var jRe=Object.defineProperty;var mse=t=>{throw TypeError(t)};var HRe=(t,e,n)=>e in t?jRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var q=(t,e,n)=>HRe(t,typeof e!="symbol"?e+"":e,n),ZV=(t,e,n)=>e.has(t)||mse("Cannot "+n);var Y=(t,e,n)=>(ZV(t,e,"read from private field"),n?n.call(t):e.get(t)),Le=(t,e,n)=>e.has(t)?mse("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),we=(t,e,n,r)=>(ZV(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Fe=(t,e,n)=>(ZV(t,e,"access private method"),n);var _E=(t,e,n,r)=>({set _(s){we(t,e,s,n)},get _(){return Y(t,e,r)}});function qRe(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function em(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function G0e(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var W0e={exports:{}},MD={},z0e={exports:{}},Pr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m7=Symbol.for("react.element"),KRe=Symbol.for("react.portal"),GRe=Symbol.for("react.fragment"),WRe=Symbol.for("react.strict_mode"),zRe=Symbol.for("react.profiler"),JRe=Symbol.for("react.provider"),YRe=Symbol.for("react.context"),QRe=Symbol.for("react.forward_ref"),ZRe=Symbol.for("react.suspense"),XRe=Symbol.for("react.memo"),e_e=Symbol.for("react.lazy"),yse=Symbol.iterator;function t_e(t){return t===null||typeof t!="object"?null:(t=yse&&t[yse]||t["@@iterator"],typeof t=="function"?t:null)}var J0e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y0e=Object.assign,Q0e={};function z5(t,e,n){this.props=t,this.context=e,this.refs=Q0e,this.updater=n||J0e}z5.prototype.isReactComponent={};z5.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};z5.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Z0e(){}Z0e.prototype=z5.prototype;function IY(t,e,n){this.props=t,this.context=e,this.refs=Q0e,this.updater=n||J0e}var CY=IY.prototype=new Z0e;CY.constructor=IY;Y0e(CY,z5.prototype);CY.isPureReactComponent=!0;var wse=Array.isArray,X0e=Object.prototype.hasOwnProperty,TY={current:null},epe={key:!0,ref:!0,__self:!0,__source:!0};function tpe(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)X0e.call(e,r)&&!epe.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var c=Array(o),l=0;l<o;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:m7,type:t,key:i,ref:a,props:s,_owner:TY.current}}function n_e(t,e){return{$$typeof:m7,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function NY(t){return typeof t=="object"&&t!==null&&t.$$typeof===m7}function r_e(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bse=/\/+/g;function XV(t,e){return typeof t=="object"&&t!==null&&t.key!=null?r_e(""+t.key):e.toString(36)}function pR(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case m7:case KRe:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+XV(a,0):r,wse(s)?(n="",t!=null&&(n=t.replace(bse,"$&/")+"/"),pR(s,e,n,"",function(l){return l})):s!=null&&(NY(s)&&(s=n_e(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(bse,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",wse(t))for(var o=0;o<t.length;o++){i=t[o];var c=r+XV(i,o);a+=pR(i,e,n,c,s)}else if(c=t_e(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=r+XV(i,o++),a+=pR(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function cP(t,e,n){if(t==null)return t;var r=[],s=0;return pR(t,r,"","",function(i){return e.call(n,i,s++)}),r}function s_e(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gc={current:null},gR={transition:null},i_e={ReactCurrentDispatcher:Gc,ReactCurrentBatchConfig:gR,ReactCurrentOwner:TY};function npe(){throw Error("act(...) is not supported in production builds of React.")}Pr.Children={map:cP,forEach:function(t,e,n){cP(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cP(t,function(){e++}),e},toArray:function(t){return cP(t,function(e){return e})||[]},only:function(t){if(!NY(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pr.Component=z5;Pr.Fragment=GRe;Pr.Profiler=zRe;Pr.PureComponent=IY;Pr.StrictMode=WRe;Pr.Suspense=ZRe;Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i_e;Pr.act=npe;Pr.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Y0e({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=TY.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)X0e.call(e,c)&&!epe.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var l=0;l<c;l++)o[l]=arguments[l+2];r.children=o}return{$$typeof:m7,type:t.type,key:s,ref:i,props:r,_owner:a}};Pr.createContext=function(t){return t={$$typeof:YRe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:JRe,_context:t},t.Consumer=t};Pr.createElement=tpe;Pr.createFactory=function(t){var e=tpe.bind(null,t);return e.type=t,e};Pr.createRef=function(){return{current:null}};Pr.forwardRef=function(t){return{$$typeof:QRe,render:t}};Pr.isValidElement=NY;Pr.lazy=function(t){return{$$typeof:e_e,_payload:{_status:-1,_result:t},_init:s_e}};Pr.memo=function(t,e){return{$$typeof:XRe,type:t,compare:e===void 0?null:e}};Pr.startTransition=function(t){var e=gR.transition;gR.transition={};try{t()}finally{gR.transition=e}};Pr.unstable_act=npe;Pr.useCallback=function(t,e){return Gc.current.useCallback(t,e)};Pr.useContext=function(t){return Gc.current.useContext(t)};Pr.useDebugValue=function(){};Pr.useDeferredValue=function(t){return Gc.current.useDeferredValue(t)};Pr.useEffect=function(t,e){return Gc.current.useEffect(t,e)};Pr.useId=function(){return Gc.current.useId()};Pr.useImperativeHandle=function(t,e,n){return Gc.current.useImperativeHandle(t,e,n)};Pr.useInsertionEffect=function(t,e){return Gc.current.useInsertionEffect(t,e)};Pr.useLayoutEffect=function(t,e){return Gc.current.useLayoutEffect(t,e)};Pr.useMemo=function(t,e){return Gc.current.useMemo(t,e)};Pr.useReducer=function(t,e,n){return Gc.current.useReducer(t,e,n)};Pr.useRef=function(t){return Gc.current.useRef(t)};Pr.useState=function(t){return Gc.current.useState(t)};Pr.useSyncExternalStore=function(t,e,n){return Gc.current.useSyncExternalStore(t,e,n)};Pr.useTransition=function(){return Gc.current.useTransition()};Pr.version="18.3.1";z0e.exports=Pr;var F=z0e.exports;const bn=em(F),DD=qRe({__proto__:null,default:bn},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_e=F,o_e=Symbol.for("react.element"),c_e=Symbol.for("react.fragment"),l_e=Object.prototype.hasOwnProperty,u_e=a_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f_e={key:!0,ref:!0,__self:!0,__source:!0};function rpe(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)l_e.call(e,r)&&!f_e.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:o_e,type:t,key:i,ref:a,props:s,_owner:u_e.current}}MD.Fragment=c_e;MD.jsx=rpe;MD.jsxs=rpe;W0e.exports=MD;var x=W0e.exports;function spe(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=spe(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function s2(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=spe(t))&&(r&&(r+=" "),r+=e);return r}const vse=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,xse=s2,Wi=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return xse(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(l=>{const u=n==null?void 0:n[l],f=i==null?void 0:i[l];if(u===null)return null;const d=vse(u)||vse(f);return s[l][d]}),o=n&&Object.entries(n).reduce((l,u)=>{let[f,d]=u;return d===void 0||(l[f]=d),l},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((l,u)=>{let{class:f,className:d,...p}=u;return Object.entries(p).every(g=>{let[m,v]=g;return Array.isArray(v)?v.includes({...i,...o}[m]):{...i,...o}[m]===v})?[...l,f,d]:l},[]);return xse(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},d_e=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},h_e=(t,e)=>({classGroupId:t,validator:e}),ipe=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),aB="-",Ese=[],p_e="arbitrary..",g_e=t=>{const e=y_e(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return m_e(a);const o=a.split(aB),c=o[0]===""&&o.length>1?1:0;return ape(o,c,e)},getConflictingClassGroupIds:(a,o)=>{if(o){const c=r[a],l=n[a];return c?l?d_e(l,c):c:l||Ese}return n[a]||Ese}}},ape=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const s=t[e],i=n.nextPart.get(s);if(i){const l=ape(t,e+1,i);if(l)return l}const a=n.validators;if(a===null)return;const o=e===0?t.join(aB):t.slice(e).join(aB),c=a.length;for(let l=0;l<c;l++){const u=a[l];if(u.validator(o))return u.classGroupId}},m_e=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?p_e+r:void 0})(),y_e=t=>{const{theme:e,classGroups:n}=t;return w_e(n,e)},w_e=(t,e)=>{const n=ipe();for(const r in t){const s=t[r];kY(s,n,r,e)}return n},kY=(t,e,n,r)=>{const s=t.length;for(let i=0;i<s;i++){const a=t[i];b_e(a,e,n,r)}},b_e=(t,e,n,r)=>{if(typeof t=="string"){v_e(t,e,n);return}if(typeof t=="function"){x_e(t,e,n,r);return}E_e(t,e,n,r)},v_e=(t,e,n)=>{const r=t===""?e:ope(e,t);r.classGroupId=n},x_e=(t,e,n,r)=>{if(A_e(t)){kY(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(h_e(n,t))},E_e=(t,e,n,r)=>{const s=Object.entries(t),i=s.length;for(let a=0;a<i;a++){const[o,c]=s[a];kY(c,ope(e,o),n,r)}},ope=(t,e)=>{let n=t;const r=e.split(aB),s=r.length;for(let i=0;i<s;i++){const a=r[i];let o=n.nextPart.get(a);o||(o=ipe(),n.nextPart.set(a,o)),n=o}return n},A_e=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,S_e=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const s=(i,a)=>{n[i]=a,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(i){let a=n[i];if(a!==void 0)return a;if((a=r[i])!==void 0)return s(i,a),a},set(i,a){i in n?n[i]=a:s(i,a)}}},tK="!",Ase=":",I_e=[],Sse=(t,e,n,r,s)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),C_e=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const i=[];let a=0,o=0,c=0,l;const u=s.length;for(let m=0;m<u;m++){const v=s[m];if(a===0&&o===0){if(v===Ase){i.push(s.slice(c,m)),c=m+1;continue}if(v==="/"){l=m;continue}}v==="["?a++:v==="]"?a--:v==="("?o++:v===")"&&o--}const f=i.length===0?s:s.slice(c);let d=f,p=!1;f.endsWith(tK)?(d=f.slice(0,-1),p=!0):f.startsWith(tK)&&(d=f.slice(1),p=!0);const g=l&&l>c?l-c:void 0;return Sse(i,p,d,g)};if(e){const s=e+Ase,i=r;r=a=>a.startsWith(s)?i(a.slice(s.length)):Sse(I_e,!1,a,void 0,!0)}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},T_e=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let i=0;i<n.length;i++){const a=n[i],o=a[0]==="[",c=e.has(a);o||c?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(a)):s.push(a)}return s.length>0&&(s.sort(),r.push(...s)),r}},N_e=t=>({cache:S_e(t.cacheSize),parseClassName:C_e(t),sortModifiers:T_e(t),...g_e(t)}),k_e=/\s+/,P_e=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,a=[],o=t.trim().split(k_e);let c="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{isExternal:f,modifiers:d,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:m}=n(u);if(f){c=u+(c.length>0?" "+c:c);continue}let v=!!m,A=r(v?g.substring(0,m):g);if(!A){if(!v){c=u+(c.length>0?" "+c:c);continue}if(A=r(g),!A){c=u+(c.length>0?" "+c:c);continue}v=!1}const S=d.length===0?"":d.length===1?d[0]:i(d).join(":"),I=p?S+tK:S,B=I+A;if(a.indexOf(B)>-1)continue;a.push(B);const D=s(A,v);for(let V=0;V<D.length;++V){const O=D[V];a.push(I+O)}c=u+(c.length>0?" "+c:c)}return c},O_e=(...t)=>{let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=cpe(n))&&(s&&(s+=" "),s+=r);return s},cpe=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=cpe(t[r]))&&(n&&(n+=" "),n+=e);return n},Ise=(t,...e)=>{let n,r,s,i;const a=c=>{const l=e.reduce((u,f)=>f(u),t());return n=N_e(l),r=n.cache.get,s=n.cache.set,i=o,o(c)},o=c=>{const l=r(c);if(l)return l;const u=P_e(c,n);return s(c,u),u};return i=a,(...c)=>i(O_e(...c))},R_e=[],da=t=>{const e=n=>n[t]||R_e;return e.isThemeGetter=!0,e},lpe=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,upe=/^\((?:(\w[\w-]*):)?(.+)\)$/i,__e=/^\d+(?:\.\d+)?\/\d+(?:\.\d+)?$/,B_e=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,M_e=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,D_e=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,L_e=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,U_e=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Tm=t=>__e.test(t),pr=t=>!!t&&!Number.isNaN(Number(t)),Nm=t=>!!t&&Number.isInteger(Number(t)),e$=t=>t.endsWith("%")&&pr(t.slice(0,-1)),yp=t=>B_e.test(t),fpe=()=>!0,F_e=t=>M_e.test(t)&&!D_e.test(t),PY=()=>!1,V_e=t=>L_e.test(t),$_e=t=>U_e.test(t),j_e=t=>!Wt(t)&&!Jt(t),H_e=t=>Sb(t,ppe,PY),Wt=t=>lpe.test(t),i1=t=>Sb(t,gpe,F_e),Cse=t=>Sb(t,Q_e,pr),q_e=t=>Sb(t,ype,fpe),K_e=t=>Sb(t,mpe,PY),Tse=t=>Sb(t,dpe,PY),G_e=t=>Sb(t,hpe,$_e),lP=t=>Sb(t,wpe,V_e),Jt=t=>upe.test(t),f8=t=>U2(t,gpe),W_e=t=>U2(t,mpe),Nse=t=>U2(t,dpe),z_e=t=>U2(t,ppe),J_e=t=>U2(t,hpe),uP=t=>U2(t,wpe,!0),Y_e=t=>U2(t,ype,!0),Sb=(t,e,n)=>{const r=lpe.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},U2=(t,e,n=!1)=>{const r=upe.exec(t);return r?r[1]?e(r[1]):n:!1},dpe=t=>t==="position"||t==="percentage",hpe=t=>t==="image"||t==="url",ppe=t=>t==="length"||t==="size"||t==="bg-size",gpe=t=>t==="length",Q_e=t=>t==="number",mpe=t=>t==="family-name",ype=t=>t==="number"||t==="weight",wpe=t=>t==="shadow",kse=()=>{const t=da("color"),e=da("font"),n=da("text"),r=da("font-weight"),s=da("tracking"),i=da("leading"),a=da("breakpoint"),o=da("container"),c=da("spacing"),l=da("radius"),u=da("shadow"),f=da("inset-shadow"),d=da("text-shadow"),p=da("drop-shadow"),g=da("blur"),m=da("perspective"),v=da("aspect"),A=da("ease"),S=da("animate"),I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...B(),Jt,Wt],V=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],U=()=>[Jt,Wt,c],Q=()=>[Tm,"full","auto",...U()],ie=()=>[Nm,"none","subgrid",Jt,Wt],G=()=>["auto",{span:["full",Nm,Jt,Wt]},Nm,Jt,Wt],R=()=>[Nm,"auto",Jt,Wt],k=()=>["auto","min","max","fr",Jt,Wt],b=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],w=()=>["start","end","center","stretch","center-safe","end-safe"],N=()=>["auto",...U()],L=()=>[Tm,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...U()],C=()=>[Tm,"screen","full","dvw","lvw","svw","min","max","fit",...U()],T=()=>[Tm,"screen","full","lh","dvh","lvh","svh","min","max","fit",...U()],E=()=>[t,Jt,Wt],P=()=>[...B(),Nse,Tse,{position:[Jt,Wt]}],_=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",z_e,H_e,{size:[Jt,Wt]}],ne=()=>[e$,f8,i1],$=()=>["","none","full",l,Jt,Wt],te=()=>["",pr,f8,i1],J=()=>["solid","dashed","dotted","double"],ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>[pr,e$,Nse,Tse],j=()=>["","none",g,Jt,Wt],se=()=>["none",pr,Jt,Wt],ye=()=>["none",pr,Jt,Wt],Ce=()=>[pr,Jt,Wt],xe=()=>[Tm,"full",...U()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[yp],breakpoint:[yp],color:[fpe],container:[yp],"drop-shadow":[yp],ease:["in","out","in-out"],font:[j_e],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[yp],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[yp],shadow:[yp],spacing:["px",pr],text:[yp],"text-shadow":[yp],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Tm,Wt,Jt,v]}],container:["container"],columns:[{columns:[pr,Wt,Jt,o]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:V()}],"overflow-x":[{"overflow-x":V()}],"overflow-y":[{"overflow-y":V()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Q()}],"inset-x":[{"inset-x":Q()}],"inset-y":[{"inset-y":Q()}],start:[{"inset-s":Q(),start:Q()}],end:[{"inset-e":Q(),end:Q()}],"inset-bs":[{"inset-bs":Q()}],"inset-be":[{"inset-be":Q()}],top:[{top:Q()}],right:[{right:Q()}],bottom:[{bottom:Q()}],left:[{left:Q()}],visibility:["visible","invisible","collapse"],z:[{z:[Nm,"auto",Jt,Wt]}],basis:[{basis:[Tm,"full","auto",o,...U()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[pr,Tm,"auto","initial","none",Wt]}],grow:[{grow:["",pr,Jt,Wt]}],shrink:[{shrink:["",pr,Jt,Wt]}],order:[{order:[Nm,"first","last","none",Jt,Wt]}],"grid-cols":[{"grid-cols":ie()}],"col-start-end":[{col:G()}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":ie()}],"row-start-end":[{row:G()}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":k()}],"auto-rows":[{"auto-rows":k()}],gap:[{gap:U()}],"gap-x":[{"gap-x":U()}],"gap-y":[{"gap-y":U()}],"justify-content":[{justify:[...b(),"normal"]}],"justify-items":[{"justify-items":[...w(),"normal"]}],"justify-self":[{"justify-self":["auto",...w()]}],"align-content":[{content:["normal",...b()]}],"align-items":[{items:[...w(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...w(),{baseline:["","last"]}]}],"place-content":[{"place-content":b()}],"place-items":[{"place-items":[...w(),"baseline"]}],"place-self":[{"place-self":["auto",...w()]}],p:[{p:U()}],px:[{px:U()}],py:[{py:U()}],ps:[{ps:U()}],pe:[{pe:U()}],pbs:[{pbs:U()}],pbe:[{pbe:U()}],pt:[{pt:U()}],pr:[{pr:U()}],pb:[{pb:U()}],pl:[{pl:U()}],m:[{m:N()}],mx:[{mx:N()}],my:[{my:N()}],ms:[{ms:N()}],me:[{me:N()}],mbs:[{mbs:N()}],mbe:[{mbe:N()}],mt:[{mt:N()}],mr:[{mr:N()}],mb:[{mb:N()}],ml:[{ml:N()}],"space-x":[{"space-x":U()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":U()}],"space-y-reverse":["space-y-reverse"],size:[{size:L()}],"inline-size":[{inline:["auto",...C()]}],"min-inline-size":[{"min-inline":["auto",...C()]}],"max-inline-size":[{"max-inline":["none",...C()]}],"block-size":[{block:["auto",...T()]}],"min-block-size":[{"min-block":["auto",...T()]}],"max-block-size":[{"max-block":["none",...T()]}],w:[{w:[o,"screen",...L()]}],"min-w":[{"min-w":[o,"screen","none",...L()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...L()]}],h:[{h:["screen","lh",...L()]}],"min-h":[{"min-h":["screen","lh","none",...L()]}],"max-h":[{"max-h":["screen","lh",...L()]}],"font-size":[{text:["base",n,f8,i1]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Y_e,q_e]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",e$,Wt]}],"font-family":[{font:[W_e,K_e,e]}],"font-features":[{"font-features":[Wt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Jt,Wt]}],"line-clamp":[{"line-clamp":[pr,"none",Jt,Cse]}],leading:[{leading:[i,...U()]}],"list-image":[{"list-image":["none",Jt,Wt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Jt,Wt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:E()}],"text-color":[{text:E()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:[pr,"from-font","auto",Jt,i1]}],"text-decoration-color":[{decoration:E()}],"underline-offset":[{"underline-offset":[pr,"auto",Jt,Wt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Jt,Wt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Jt,Wt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:P()}],"bg-repeat":[{bg:_()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Nm,Jt,Wt],radial:["",Jt,Wt],conic:[Nm,Jt,Wt]},J_e,G_e]}],"bg-color":[{bg:E()}],"gradient-from-pos":[{from:ne()}],"gradient-via-pos":[{via:ne()}],"gradient-to-pos":[{to:ne()}],"gradient-from":[{from:E()}],"gradient-via":[{via:E()}],"gradient-to":[{to:E()}],rounded:[{rounded:$()}],"rounded-s":[{"rounded-s":$()}],"rounded-e":[{"rounded-e":$()}],"rounded-t":[{"rounded-t":$()}],"rounded-r":[{"rounded-r":$()}],"rounded-b":[{"rounded-b":$()}],"rounded-l":[{"rounded-l":$()}],"rounded-ss":[{"rounded-ss":$()}],"rounded-se":[{"rounded-se":$()}],"rounded-ee":[{"rounded-ee":$()}],"rounded-es":[{"rounded-es":$()}],"rounded-tl":[{"rounded-tl":$()}],"rounded-tr":[{"rounded-tr":$()}],"rounded-br":[{"rounded-br":$()}],"rounded-bl":[{"rounded-bl":$()}],"border-w":[{border:te()}],"border-w-x":[{"border-x":te()}],"border-w-y":[{"border-y":te()}],"border-w-s":[{"border-s":te()}],"border-w-e":[{"border-e":te()}],"border-w-bs":[{"border-bs":te()}],"border-w-be":[{"border-be":te()}],"border-w-t":[{"border-t":te()}],"border-w-r":[{"border-r":te()}],"border-w-b":[{"border-b":te()}],"border-w-l":[{"border-l":te()}],"divide-x":[{"divide-x":te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...J(),"hidden","none"]}],"divide-style":[{divide:[...J(),"hidden","none"]}],"border-color":[{border:E()}],"border-color-x":[{"border-x":E()}],"border-color-y":[{"border-y":E()}],"border-color-s":[{"border-s":E()}],"border-color-e":[{"border-e":E()}],"border-color-bs":[{"border-bs":E()}],"border-color-be":[{"border-be":E()}],"border-color-t":[{"border-t":E()}],"border-color-r":[{"border-r":E()}],"border-color-b":[{"border-b":E()}],"border-color-l":[{"border-l":E()}],"divide-color":[{divide:E()}],"outline-style":[{outline:[...J(),"none","hidden"]}],"outline-offset":[{"outline-offset":[pr,Jt,Wt]}],"outline-w":[{outline:["",pr,f8,i1]}],"outline-color":[{outline:E()}],shadow:[{shadow:["","none",u,uP,lP]}],"shadow-color":[{shadow:E()}],"inset-shadow":[{"inset-shadow":["none",f,uP,lP]}],"inset-shadow-color":[{"inset-shadow":E()}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:E()}],"ring-offset-w":[{"ring-offset":[pr,i1]}],"ring-offset-color":[{"ring-offset":E()}],"inset-ring-w":[{"inset-ring":te()}],"inset-ring-color":[{"inset-ring":E()}],"text-shadow":[{"text-shadow":["none",d,uP,lP]}],"text-shadow-color":[{"text-shadow":E()}],opacity:[{opacity:[pr,Jt,Wt]}],"mix-blend":[{"mix-blend":[...ee(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ee()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[pr]}],"mask-image-linear-from-pos":[{"mask-linear-from":X()}],"mask-image-linear-to-pos":[{"mask-linear-to":X()}],"mask-image-linear-from-color":[{"mask-linear-from":E()}],"mask-image-linear-to-color":[{"mask-linear-to":E()}],"mask-image-t-from-pos":[{"mask-t-from":X()}],"mask-image-t-to-pos":[{"mask-t-to":X()}],"mask-image-t-from-color":[{"mask-t-from":E()}],"mask-image-t-to-color":[{"mask-t-to":E()}],"mask-image-r-from-pos":[{"mask-r-from":X()}],"mask-image-r-to-pos":[{"mask-r-to":X()}],"mask-image-r-from-color":[{"mask-r-from":E()}],"mask-image-r-to-color":[{"mask-r-to":E()}],"mask-image-b-from-pos":[{"mask-b-from":X()}],"mask-image-b-to-pos":[{"mask-b-to":X()}],"mask-image-b-from-color":[{"mask-b-from":E()}],"mask-image-b-to-color":[{"mask-b-to":E()}],"mask-image-l-from-pos":[{"mask-l-from":X()}],"mask-image-l-to-pos":[{"mask-l-to":X()}],"mask-image-l-from-color":[{"mask-l-from":E()}],"mask-image-l-to-color":[{"mask-l-to":E()}],"mask-image-x-from-pos":[{"mask-x-from":X()}],"mask-image-x-to-pos":[{"mask-x-to":X()}],"mask-image-x-from-color":[{"mask-x-from":E()}],"mask-image-x-to-color":[{"mask-x-to":E()}],"mask-image-y-from-pos":[{"mask-y-from":X()}],"mask-image-y-to-pos":[{"mask-y-to":X()}],"mask-image-y-from-color":[{"mask-y-from":E()}],"mask-image-y-to-color":[{"mask-y-to":E()}],"mask-image-radial":[{"mask-radial":[Jt,Wt]}],"mask-image-radial-from-pos":[{"mask-radial-from":X()}],"mask-image-radial-to-pos":[{"mask-radial-to":X()}],"mask-image-radial-from-color":[{"mask-radial-from":E()}],"mask-image-radial-to-color":[{"mask-radial-to":E()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":B()}],"mask-image-conic-pos":[{"mask-conic":[pr]}],"mask-image-conic-from-pos":[{"mask-conic-from":X()}],"mask-image-conic-to-pos":[{"mask-conic-to":X()}],"mask-image-conic-from-color":[{"mask-conic-from":E()}],"mask-image-conic-to-color":[{"mask-conic-to":E()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:P()}],"mask-repeat":[{mask:_()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Jt,Wt]}],filter:[{filter:["","none",Jt,Wt]}],blur:[{blur:j()}],brightness:[{brightness:[pr,Jt,Wt]}],contrast:[{contrast:[pr,Jt,Wt]}],"drop-shadow":[{"drop-shadow":["","none",p,uP,lP]}],"drop-shadow-color":[{"drop-shadow":E()}],grayscale:[{grayscale:["",pr,Jt,Wt]}],"hue-rotate":[{"hue-rotate":[pr,Jt,Wt]}],invert:[{invert:["",pr,Jt,Wt]}],saturate:[{saturate:[pr,Jt,Wt]}],sepia:[{sepia:["",pr,Jt,Wt]}],"backdrop-filter":[{"backdrop-filter":["","none",Jt,Wt]}],"backdrop-blur":[{"backdrop-blur":j()}],"backdrop-brightness":[{"backdrop-brightness":[pr,Jt,Wt]}],"backdrop-contrast":[{"backdrop-contrast":[pr,Jt,Wt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",pr,Jt,Wt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[pr,Jt,Wt]}],"backdrop-invert":[{"backdrop-invert":["",pr,Jt,Wt]}],"backdrop-opacity":[{"backdrop-opacity":[pr,Jt,Wt]}],"backdrop-saturate":[{"backdrop-saturate":[pr,Jt,Wt]}],"backdrop-sepia":[{"backdrop-sepia":["",pr,Jt,Wt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":U()}],"border-spacing-x":[{"border-spacing-x":U()}],"border-spacing-y":[{"border-spacing-y":U()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Jt,Wt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[pr,"initial",Jt,Wt]}],ease:[{ease:["linear","initial",A,Jt,Wt]}],delay:[{delay:[pr,Jt,Wt]}],animate:[{animate:["none",S,Jt,Wt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,Jt,Wt]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:se()}],"rotate-x":[{"rotate-x":se()}],"rotate-y":[{"rotate-y":se()}],"rotate-z":[{"rotate-z":se()}],scale:[{scale:ye()}],"scale-x":[{"scale-x":ye()}],"scale-y":[{"scale-y":ye()}],"scale-z":[{"scale-z":ye()}],"scale-3d":["scale-3d"],skew:[{skew:Ce()}],"skew-x":[{"skew-x":Ce()}],"skew-y":[{"skew-y":Ce()}],transform:[{transform:[Jt,Wt,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:xe()}],"translate-x":[{"translate-x":xe()}],"translate-y":[{"translate-y":xe()}],"translate-z":[{"translate-z":xe()}],"translate-none":["translate-none"],accent:[{accent:E()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:E()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Jt,Wt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mbs":[{"scroll-mbs":U()}],"scroll-mbe":[{"scroll-mbe":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pbs":[{"scroll-pbs":U()}],"scroll-pbe":[{"scroll-pbe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Jt,Wt]}],fill:[{fill:["none",...E()]}],"stroke-w":[{stroke:[pr,f8,i1,Cse]}],stroke:[{stroke:["none",...E()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","inset-bs","inset-be","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pbs","pbe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mbs","mbe","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-bs","border-w-be","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-bs","border-color-be","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mbs","scroll-mbe","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pbs","scroll-pbe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Z_e=(t,{cacheSize:e,prefix:n,experimentalParseClassName:r,extend:s={},override:i={}})=>(lI(t,"cacheSize",e),lI(t,"prefix",n),lI(t,"experimentalParseClassName",r),fP(t.theme,i.theme),fP(t.classGroups,i.classGroups),fP(t.conflictingClassGroups,i.conflictingClassGroups),fP(t.conflictingClassGroupModifiers,i.conflictingClassGroupModifiers),lI(t,"orderSensitiveModifiers",i.orderSensitiveModifiers),dP(t.theme,s.theme),dP(t.classGroups,s.classGroups),dP(t.conflictingClassGroups,s.conflictingClassGroups),dP(t.conflictingClassGroupModifiers,s.conflictingClassGroupModifiers),bpe(t,s,"orderSensitiveModifiers"),t),lI=(t,e,n)=>{n!==void 0&&(t[e]=n)},fP=(t,e)=>{if(e)for(const n in e)lI(t,n,e[n])},dP=(t,e)=>{if(e)for(const n in e)bpe(t,e,n)},bpe=(t,e,n)=>{const r=e[n];r!==void 0&&(t[n]=t[n]?t[n].concat(r):r)},X_e=(t,...e)=>typeof t=="function"?Ise(kse,t,...e):Ise(()=>Z_e(kse(),t),...e);function Pse(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function OY(...t){return e=>{let n=!1;const r=t.map(s=>{const i=Pse(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Pse(t[s],null)}}}}function ss(...t){return F.useCallback(OY(...t),t)}var eBe=Symbol.for("react.lazy"),oB=DD[" use ".trim().toString()];function tBe(t){return typeof t=="object"&&t!==null&&"then"in t}function vpe(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===eBe&&"_payload"in t&&tBe(t._payload)}function xpe(t){const e=nBe(t),n=F.forwardRef((r,s)=>{let{children:i,...a}=r;vpe(i)&&typeof oB=="function"&&(i=oB(i._payload));const o=F.Children.toArray(i),c=o.find(iBe);if(c){const l=c.props.children,u=o.map(f=>f===c?F.Children.count(l)>1?F.Children.only(null):F.isValidElement(l)?l.props.children:null:f);return x.jsx(e,{...a,ref:s,children:F.isValidElement(l)?F.cloneElement(l,void 0,u):null})}return x.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var LD=xpe("Slot");function nBe(t){const e=F.forwardRef((n,r)=>{let{children:s,...i}=n;if(vpe(s)&&typeof oB=="function"&&(s=oB(s._payload)),F.isValidElement(s)){const a=oBe(s),o=aBe(i,s.props);return s.type!==F.Fragment&&(o.ref=r?OY(r,a):a),F.cloneElement(s,o)}return F.Children.count(s)>1?F.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Epe=Symbol("radix.slottable");function rBe(t){const e=({children:n})=>x.jsx(x.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=Epe,e}var sBe=rBe("Slottable");function iBe(t){return F.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Epe}function aBe(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...o)=>{const c=i(...o);return s(...o),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function oBe(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ape={exports:{}},Cu={},Spe={exports:{}},Ipe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,T){var E=C.length;C.push(T);e:for(;0<E;){var P=E-1>>>1,_=C[P];if(0<s(_,T))C[P]=T,C[E]=_,E=P;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var T=C[0],E=C.pop();if(E!==T){C[0]=E;e:for(var P=0,_=C.length,H=_>>>1;P<H;){var ne=2*(P+1)-1,$=C[ne],te=ne+1,J=C[te];if(0>s($,E))te<_&&0>s(J,$)?(C[P]=J,C[te]=E,P=te):(C[P]=$,C[ne]=E,P=ne);else if(te<_&&0>s(J,E))C[P]=J,C[te]=E,P=te;else break e}}return T}function s(C,T){var E=C.sortIndex-T.sortIndex;return E!==0?E:C.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],l=[],u=1,f=null,d=3,p=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(C){for(var T=n(l);T!==null;){if(T.callback===null)r(l);else if(T.startTime<=C)r(l),T.sortIndex=T.expirationTime,e(c,T);else break;T=n(l)}}function B(C){if(m=!1,I(C),!g)if(n(c)!==null)g=!0,N(D);else{var T=n(l);T!==null&&L(B,T.startTime-C)}}function D(C,T){g=!1,m&&(m=!1,A(U),U=-1),p=!0;var E=d;try{for(I(T),f=n(c);f!==null&&(!(f.expirationTime>T)||C&&!G());){var P=f.callback;if(typeof P=="function"){f.callback=null,d=f.priorityLevel;var _=P(f.expirationTime<=T);T=t.unstable_now(),typeof _=="function"?f.callback=_:f===n(c)&&r(c),I(T)}else r(c);f=n(c)}if(f!==null)var H=!0;else{var ne=n(l);ne!==null&&L(B,ne.startTime-T),H=!1}return H}finally{f=null,d=E,p=!1}}var V=!1,O=null,U=-1,Q=5,ie=-1;function G(){return!(t.unstable_now()-ie<Q)}function R(){if(O!==null){var C=t.unstable_now();ie=C;var T=!0;try{T=O(!0,C)}finally{T?k():(V=!1,O=null)}}else V=!1}var k;if(typeof S=="function")k=function(){S(R)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,w=b.port2;b.port1.onmessage=R,k=function(){w.postMessage(null)}}else k=function(){v(R,0)};function N(C){O=C,V||(V=!0,k())}function L(C,T){U=v(function(){C(t.unstable_now())},T)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,N(D))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(C){switch(d){case 1:case 2:case 3:var T=3;break;default:T=d}var E=d;d=T;try{return C()}finally{d=E}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,T){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var E=d;d=C;try{return T()}finally{d=E}},t.unstable_scheduleCallback=function(C,T,E){var P=t.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?P+E:P):E=P,C){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=E+_,C={id:u++,callback:T,priorityLevel:C,startTime:E,expirationTime:_,sortIndex:-1},E>P?(C.sortIndex=E,e(l,C),n(c)===null&&C===n(l)&&(m?(A(U),U=-1):m=!0,L(B,E-P))):(C.sortIndex=_,e(c,C),g||p||(g=!0,N(D))),C},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(C){var T=d;return function(){var E=d;d=T;try{return C.apply(this,arguments)}finally{d=E}}}})(Ipe);Spe.exports=Ipe;var cBe=Spe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lBe=F,Au=cBe;function ht(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cpe=new Set,xN={};function F2(t,e){z6(t,e),z6(t+"Capture",e)}function z6(t,e){for(xN[t]=e,t=0;t<e.length;t++)Cpe.add(e[t])}var Fg=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nK=Object.prototype.hasOwnProperty,uBe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ose={},Rse={};function fBe(t){return nK.call(Rse,t)?!0:nK.call(Ose,t)?!1:uBe.test(t)?Rse[t]=!0:(Ose[t]=!0,!1)}function dBe(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hBe(t,e,n,r){if(e===null||typeof e>"u"||dBe(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wc(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Co={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Co[t]=new Wc(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Co[e]=new Wc(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Co[t]=new Wc(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Co[t]=new Wc(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Co[t]=new Wc(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Co[t]=new Wc(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Co[t]=new Wc(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Co[t]=new Wc(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Co[t]=new Wc(t,5,!1,t.toLowerCase(),null,!1,!1)});var RY=/[\-:]([a-z])/g;function _Y(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(RY,_Y);Co[e]=new Wc(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(RY,_Y);Co[e]=new Wc(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(RY,_Y);Co[e]=new Wc(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Co[t]=new Wc(t,1,!1,t.toLowerCase(),null,!1,!1)});Co.xlinkHref=new Wc("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Co[t]=new Wc(t,1,!1,t.toLowerCase(),null,!0,!0)});function BY(t,e,n,r){var s=Co.hasOwnProperty(e)?Co[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hBe(e,n,s,r)&&(n=null),r||s===null?fBe(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var tm=lBe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hP=Symbol.for("react.element"),LS=Symbol.for("react.portal"),US=Symbol.for("react.fragment"),MY=Symbol.for("react.strict_mode"),rK=Symbol.for("react.profiler"),Tpe=Symbol.for("react.provider"),Npe=Symbol.for("react.context"),DY=Symbol.for("react.forward_ref"),sK=Symbol.for("react.suspense"),iK=Symbol.for("react.suspense_list"),LY=Symbol.for("react.memo"),Dy=Symbol.for("react.lazy"),kpe=Symbol.for("react.offscreen"),_se=Symbol.iterator;function d8(t){return t===null||typeof t!="object"?null:(t=_se&&t[_se]||t["@@iterator"],typeof t=="function"?t:null)}var li=Object.assign,t$;function uI(t){if(t$===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);t$=e&&e[1]||""}return`
`+t$+t}var n$=!1;function r$(t,e){if(!t||n$)return"";n$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{n$=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?uI(t):""}function pBe(t){switch(t.tag){case 5:return uI(t.type);case 16:return uI("Lazy");case 13:return uI("Suspense");case 19:return uI("SuspenseList");case 0:case 2:case 15:return t=r$(t.type,!1),t;case 11:return t=r$(t.type.render,!1),t;case 1:return t=r$(t.type,!0),t;default:return""}}function aK(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case US:return"Fragment";case LS:return"Portal";case rK:return"Profiler";case MY:return"StrictMode";case sK:return"Suspense";case iK:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Npe:return(t.displayName||"Context")+".Consumer";case Tpe:return(t._context.displayName||"Context")+".Provider";case DY:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case LY:return e=t.displayName||null,e!==null?e:aK(t.type)||"Memo";case Dy:e=t._payload,t=t._init;try{return aK(t(e))}catch{}}return null}function gBe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return aK(e);case 8:return e===MY?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ob(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ppe(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mBe(t){var e=Ppe(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pP(t){t._valueTracker||(t._valueTracker=mBe(t))}function Ope(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ppe(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function cB(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function oK(t,e){var n=e.checked;return li({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bse(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ob(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Rpe(t,e){e=e.checked,e!=null&&BY(t,"checked",e,!1)}function cK(t,e){Rpe(t,e);var n=ob(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lK(t,e.type,n):e.hasOwnProperty("defaultValue")&&lK(t,e.type,ob(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mse(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lK(t,e,n){(e!=="number"||cB(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fI=Array.isArray;function b3(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ob(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function uK(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ht(91));return li({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dse(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ht(92));if(fI(n)){if(1<n.length)throw Error(ht(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ob(n)}}function _pe(t,e){var n=ob(e.value),r=ob(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Lse(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Bpe(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fK(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Bpe(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gP,Mpe=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gP=gP||document.createElement("div"),gP.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gP.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function EN(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var FT={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yBe=["Webkit","ms","Moz","O"];Object.keys(FT).forEach(function(t){yBe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),FT[e]=FT[t]})});function Dpe(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||FT.hasOwnProperty(t)&&FT[t]?(""+e).trim():e+"px"}function Lpe(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Dpe(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var wBe=li({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dK(t,e){if(e){if(wBe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ht(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ht(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ht(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ht(62))}}function hK(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pK=null;function UY(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gK=null,v3=null,x3=null;function Use(t){if(t=b7(t)){if(typeof gK!="function")throw Error(ht(280));var e=t.stateNode;e&&(e=jD(e),gK(t.stateNode,t.type,e))}}function Upe(t){v3?x3?x3.push(t):x3=[t]:v3=t}function Fpe(){if(v3){var t=v3,e=x3;if(x3=v3=null,Use(t),e)for(t=0;t<e.length;t++)Use(e[t])}}function Vpe(t,e){return t(e)}function $pe(){}var s$=!1;function jpe(t,e,n){if(s$)return t(e,n);s$=!0;try{return Vpe(t,e,n)}finally{s$=!1,(v3!==null||x3!==null)&&($pe(),Fpe())}}function AN(t,e){var n=t.stateNode;if(n===null)return null;var r=jD(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ht(231,e,typeof n));return n}var mK=!1;if(Fg)try{var h8={};Object.defineProperty(h8,"passive",{get:function(){mK=!0}}),window.addEventListener("test",h8,h8),window.removeEventListener("test",h8,h8)}catch{mK=!1}function bBe(t,e,n,r,s,i,a,o,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var VT=!1,lB=null,uB=!1,yK=null,vBe={onError:function(t){VT=!0,lB=t}};function xBe(t,e,n,r,s,i,a,o,c){VT=!1,lB=null,bBe.apply(vBe,arguments)}function EBe(t,e,n,r,s,i,a,o,c){if(xBe.apply(this,arguments),VT){if(VT){var l=lB;VT=!1,lB=null}else throw Error(ht(198));uB||(uB=!0,yK=l)}}function V2(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Hpe(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fse(t){if(V2(t)!==t)throw Error(ht(188))}function ABe(t){var e=t.alternate;if(!e){if(e=V2(t),e===null)throw Error(ht(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Fse(s),t;if(i===r)return Fse(s),e;i=i.sibling}throw Error(ht(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(ht(189))}}if(n.alternate!==r)throw Error(ht(190))}if(n.tag!==3)throw Error(ht(188));return n.stateNode.current===n?t:e}function qpe(t){return t=ABe(t),t!==null?Kpe(t):null}function Kpe(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kpe(t);if(e!==null)return e;t=t.sibling}return null}var Gpe=Au.unstable_scheduleCallback,Vse=Au.unstable_cancelCallback,SBe=Au.unstable_shouldYield,IBe=Au.unstable_requestPaint,Vi=Au.unstable_now,CBe=Au.unstable_getCurrentPriorityLevel,FY=Au.unstable_ImmediatePriority,Wpe=Au.unstable_UserBlockingPriority,fB=Au.unstable_NormalPriority,TBe=Au.unstable_LowPriority,zpe=Au.unstable_IdlePriority,UD=null,y0=null;function NBe(t){if(y0&&typeof y0.onCommitFiberRoot=="function")try{y0.onCommitFiberRoot(UD,t,void 0,(t.current.flags&128)===128)}catch{}}var Wd=Math.clz32?Math.clz32:OBe,kBe=Math.log,PBe=Math.LN2;function OBe(t){return t>>>=0,t===0?32:31-(kBe(t)/PBe|0)|0}var mP=64,yP=4194304;function dI(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dB(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=dI(o):(i&=a,i!==0&&(r=dI(i)))}else a=n&~s,a!==0?r=dI(a):i!==0&&(r=dI(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wd(e),s=1<<n,r|=t[n],e&=~s;return r}function RBe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _Be(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Wd(i),o=1<<a,c=s[a];c===-1?(!(o&n)||o&r)&&(s[a]=RBe(o,e)):c<=e&&(t.expiredLanes|=o),i&=~o}}function wK(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jpe(){var t=mP;return mP<<=1,!(mP&4194240)&&(mP=64),t}function i$(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function y7(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wd(e),t[e]=n}function BBe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Wd(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function VY(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wd(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ms=0;function Ype(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Qpe,$Y,Zpe,Xpe,ege,bK=!1,wP=[],Dw=null,Lw=null,Uw=null,SN=new Map,IN=new Map,Wy=[],MBe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $se(t,e){switch(t){case"focusin":case"focusout":Dw=null;break;case"dragenter":case"dragleave":Lw=null;break;case"mouseover":case"mouseout":Uw=null;break;case"pointerover":case"pointerout":SN.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":IN.delete(e.pointerId)}}function p8(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=b7(e),e!==null&&$Y(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function DBe(t,e,n,r,s){switch(e){case"focusin":return Dw=p8(Dw,t,e,n,r,s),!0;case"dragenter":return Lw=p8(Lw,t,e,n,r,s),!0;case"mouseover":return Uw=p8(Uw,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return SN.set(i,p8(SN.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,IN.set(i,p8(IN.get(i)||null,t,e,n,r,s)),!0}return!1}function tge(t){var e=Vv(t.target);if(e!==null){var n=V2(e);if(n!==null){if(e=n.tag,e===13){if(e=Hpe(n),e!==null){t.blockedOn=e,ege(t.priority,function(){Zpe(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mR(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vK(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);pK=r,n.target.dispatchEvent(r),pK=null}else return e=b7(n),e!==null&&$Y(e),t.blockedOn=n,!1;e.shift()}return!0}function jse(t,e,n){mR(t)&&n.delete(e)}function LBe(){bK=!1,Dw!==null&&mR(Dw)&&(Dw=null),Lw!==null&&mR(Lw)&&(Lw=null),Uw!==null&&mR(Uw)&&(Uw=null),SN.forEach(jse),IN.forEach(jse)}function g8(t,e){t.blockedOn===e&&(t.blockedOn=null,bK||(bK=!0,Au.unstable_scheduleCallback(Au.unstable_NormalPriority,LBe)))}function CN(t){function e(s){return g8(s,t)}if(0<wP.length){g8(wP[0],t);for(var n=1;n<wP.length;n++){var r=wP[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dw!==null&&g8(Dw,t),Lw!==null&&g8(Lw,t),Uw!==null&&g8(Uw,t),SN.forEach(e),IN.forEach(e),n=0;n<Wy.length;n++)r=Wy[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Wy.length&&(n=Wy[0],n.blockedOn===null);)tge(n),n.blockedOn===null&&Wy.shift()}var E3=tm.ReactCurrentBatchConfig,hB=!0;function UBe(t,e,n,r){var s=ms,i=E3.transition;E3.transition=null;try{ms=1,jY(t,e,n,r)}finally{ms=s,E3.transition=i}}function FBe(t,e,n,r){var s=ms,i=E3.transition;E3.transition=null;try{ms=4,jY(t,e,n,r)}finally{ms=s,E3.transition=i}}function jY(t,e,n,r){if(hB){var s=vK(t,e,n,r);if(s===null)g$(t,e,r,pB,n),$se(t,r);else if(DBe(s,t,e,n,r))r.stopPropagation();else if($se(t,r),e&4&&-1<MBe.indexOf(t)){for(;s!==null;){var i=b7(s);if(i!==null&&Qpe(i),i=vK(t,e,n,r),i===null&&g$(t,e,r,pB,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else g$(t,e,r,null,n)}}var pB=null;function vK(t,e,n,r){if(pB=null,t=UY(r),t=Vv(t),t!==null)if(e=V2(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Hpe(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pB=t,null}function nge(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CBe()){case FY:return 1;case Wpe:return 4;case fB:case TBe:return 16;case zpe:return 536870912;default:return 16}default:return 16}}var bw=null,HY=null,yR=null;function rge(){if(yR)return yR;var t,e=HY,n=e.length,r,s="value"in bw?bw.value:bw.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return yR=s.slice(t,1<r?1-r:void 0)}function wR(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bP(){return!0}function Hse(){return!1}function Tu(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?bP:Hse,this.isPropagationStopped=Hse,this}return li(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bP)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bP)},persist:function(){},isPersistent:bP}),e}var J5={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qY=Tu(J5),w7=li({},J5,{view:0,detail:0}),VBe=Tu(w7),a$,o$,m8,FD=li({},w7,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:KY,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==m8&&(m8&&t.type==="mousemove"?(a$=t.screenX-m8.screenX,o$=t.screenY-m8.screenY):o$=a$=0,m8=t),a$)},movementY:function(t){return"movementY"in t?t.movementY:o$}}),qse=Tu(FD),$Be=li({},FD,{dataTransfer:0}),jBe=Tu($Be),HBe=li({},w7,{relatedTarget:0}),c$=Tu(HBe),qBe=li({},J5,{animationName:0,elapsedTime:0,pseudoElement:0}),KBe=Tu(qBe),GBe=li({},J5,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WBe=Tu(GBe),zBe=li({},J5,{data:0}),Kse=Tu(zBe),JBe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YBe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QBe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZBe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QBe[t])?!!e[t]:!1}function KY(){return ZBe}var XBe=li({},w7,{key:function(t){if(t.key){var e=JBe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wR(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?YBe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:KY,charCode:function(t){return t.type==="keypress"?wR(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wR(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eMe=Tu(XBe),tMe=li({},FD,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gse=Tu(tMe),nMe=li({},w7,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:KY}),rMe=Tu(nMe),sMe=li({},J5,{propertyName:0,elapsedTime:0,pseudoElement:0}),iMe=Tu(sMe),aMe=li({},FD,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oMe=Tu(aMe),cMe=[9,13,27,32],GY=Fg&&"CompositionEvent"in window,$T=null;Fg&&"documentMode"in document&&($T=document.documentMode);var lMe=Fg&&"TextEvent"in window&&!$T,sge=Fg&&(!GY||$T&&8<$T&&11>=$T),Wse=" ",zse=!1;function ige(t,e){switch(t){case"keyup":return cMe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function age(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var FS=!1;function uMe(t,e){switch(t){case"compositionend":return age(e);case"keypress":return e.which!==32?null:(zse=!0,Wse);case"textInput":return t=e.data,t===Wse&&zse?null:t;default:return null}}function fMe(t,e){if(FS)return t==="compositionend"||!GY&&ige(t,e)?(t=rge(),yR=HY=bw=null,FS=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sge&&e.locale!=="ko"?null:e.data;default:return null}}var dMe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jse(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dMe[t.type]:e==="textarea"}function oge(t,e,n,r){Upe(r),e=gB(e,"onChange"),0<e.length&&(n=new qY("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var jT=null,TN=null;function hMe(t){wge(t,0)}function VD(t){var e=jS(t);if(Ope(e))return t}function pMe(t,e){if(t==="change")return e}var cge=!1;if(Fg){var l$;if(Fg){var u$="oninput"in document;if(!u$){var Yse=document.createElement("div");Yse.setAttribute("oninput","return;"),u$=typeof Yse.oninput=="function"}l$=u$}else l$=!1;cge=l$&&(!document.documentMode||9<document.documentMode)}function Qse(){jT&&(jT.detachEvent("onpropertychange",lge),TN=jT=null)}function lge(t){if(t.propertyName==="value"&&VD(TN)){var e=[];oge(e,TN,t,UY(t)),jpe(hMe,e)}}function gMe(t,e,n){t==="focusin"?(Qse(),jT=e,TN=n,jT.attachEvent("onpropertychange",lge)):t==="focusout"&&Qse()}function mMe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return VD(TN)}function yMe(t,e){if(t==="click")return VD(e)}function wMe(t,e){if(t==="input"||t==="change")return VD(e)}function bMe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nh=typeof Object.is=="function"?Object.is:bMe;function NN(t,e){if(nh(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!nK.call(e,s)||!nh(t[s],e[s]))return!1}return!0}function Zse(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xse(t,e){var n=Zse(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zse(n)}}function uge(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uge(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fge(){for(var t=window,e=cB();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=cB(t.document)}return e}function WY(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vMe(t){var e=fge(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&uge(n.ownerDocument.documentElement,n)){if(r!==null&&WY(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Xse(n,i);var a=Xse(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xMe=Fg&&"documentMode"in document&&11>=document.documentMode,VS=null,xK=null,HT=null,EK=!1;function eie(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;EK||VS==null||VS!==cB(r)||(r=VS,"selectionStart"in r&&WY(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),HT&&NN(HT,r)||(HT=r,r=gB(xK,"onSelect"),0<r.length&&(e=new qY("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=VS)))}function vP(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $S={animationend:vP("Animation","AnimationEnd"),animationiteration:vP("Animation","AnimationIteration"),animationstart:vP("Animation","AnimationStart"),transitionend:vP("Transition","TransitionEnd")},f$={},dge={};Fg&&(dge=document.createElement("div").style,"AnimationEvent"in window||(delete $S.animationend.animation,delete $S.animationiteration.animation,delete $S.animationstart.animation),"TransitionEvent"in window||delete $S.transitionend.transition);function $D(t){if(f$[t])return f$[t];if(!$S[t])return t;var e=$S[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dge)return f$[t]=e[n];return t}var hge=$D("animationend"),pge=$D("animationiteration"),gge=$D("animationstart"),mge=$D("transitionend"),yge=new Map,tie="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ib(t,e){yge.set(t,e),F2(e,[t])}for(var d$=0;d$<tie.length;d$++){var h$=tie[d$],EMe=h$.toLowerCase(),AMe=h$[0].toUpperCase()+h$.slice(1);Ib(EMe,"on"+AMe)}Ib(hge,"onAnimationEnd");Ib(pge,"onAnimationIteration");Ib(gge,"onAnimationStart");Ib("dblclick","onDoubleClick");Ib("focusin","onFocus");Ib("focusout","onBlur");Ib(mge,"onTransitionEnd");z6("onMouseEnter",["mouseout","mouseover"]);z6("onMouseLeave",["mouseout","mouseover"]);z6("onPointerEnter",["pointerout","pointerover"]);z6("onPointerLeave",["pointerout","pointerover"]);F2("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));F2("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));F2("onBeforeInput",["compositionend","keypress","textInput","paste"]);F2("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));F2("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));F2("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hI="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SMe=new Set("cancel close invalid load scroll toggle".split(" ").concat(hI));function nie(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,EBe(r,e,void 0,t),t.currentTarget=null}function wge(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,l=o.currentTarget;if(o=o.listener,c!==i&&s.isPropagationStopped())break e;nie(s,o,l),i=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,l=o.currentTarget,o=o.listener,c!==i&&s.isPropagationStopped())break e;nie(s,o,l),i=c}}}if(uB)throw t=yK,uB=!1,yK=null,t}function js(t,e){var n=e[TK];n===void 0&&(n=e[TK]=new Set);var r=t+"__bubble";n.has(r)||(bge(e,t,2,!1),n.add(r))}function p$(t,e,n){var r=0;e&&(r|=4),bge(n,t,r,e)}var xP="_reactListening"+Math.random().toString(36).slice(2);function kN(t){if(!t[xP]){t[xP]=!0,Cpe.forEach(function(n){n!=="selectionchange"&&(SMe.has(n)||p$(n,!1,t),p$(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xP]||(e[xP]=!0,p$("selectionchange",!1,e))}}function bge(t,e,n,r){switch(nge(e)){case 1:var s=UBe;break;case 4:s=FBe;break;default:s=jY}n=s.bind(null,e,n,t),s=void 0,!mK||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function g$(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Vv(o),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}o=o.parentNode}}r=r.return}jpe(function(){var l=i,u=UY(n),f=[];e:{var d=yge.get(t);if(d!==void 0){var p=qY,g=t;switch(t){case"keypress":if(wR(n)===0)break e;case"keydown":case"keyup":p=eMe;break;case"focusin":g="focus",p=c$;break;case"focusout":g="blur",p=c$;break;case"beforeblur":case"afterblur":p=c$;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=qse;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=jBe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=rMe;break;case hge:case pge:case gge:p=KBe;break;case mge:p=iMe;break;case"scroll":p=VBe;break;case"wheel":p=oMe;break;case"copy":case"cut":case"paste":p=WBe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Gse}var m=(e&4)!==0,v=!m&&t==="scroll",A=m?d!==null?d+"Capture":null:d;m=[];for(var S=l,I;S!==null;){I=S;var B=I.stateNode;if(I.tag===5&&B!==null&&(I=B,A!==null&&(B=AN(S,A),B!=null&&m.push(PN(S,B,I)))),v)break;S=S.return}0<m.length&&(d=new p(d,g,null,n,u),f.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&n!==pK&&(g=n.relatedTarget||n.fromElement)&&(Vv(g)||g[Vg]))break e;if((p||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=l,g=g?Vv(g):null,g!==null&&(v=V2(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=l),p!==g)){if(m=qse,B="onMouseLeave",A="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(m=Gse,B="onPointerLeave",A="onPointerEnter",S="pointer"),v=p==null?d:jS(p),I=g==null?d:jS(g),d=new m(B,S+"leave",p,n,u),d.target=v,d.relatedTarget=I,B=null,Vv(u)===l&&(m=new m(A,S+"enter",g,n,u),m.target=I,m.relatedTarget=v,B=m),v=B,p&&g)t:{for(m=p,A=g,S=0,I=m;I;I=BE(I))S++;for(I=0,B=A;B;B=BE(B))I++;for(;0<S-I;)m=BE(m),S--;for(;0<I-S;)A=BE(A),I--;for(;S--;){if(m===A||A!==null&&m===A.alternate)break t;m=BE(m),A=BE(A)}m=null}else m=null;p!==null&&rie(f,d,p,m,!1),g!==null&&v!==null&&rie(f,v,g,m,!0)}}e:{if(d=l?jS(l):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var D=pMe;else if(Jse(d))if(cge)D=wMe;else{D=mMe;var V=gMe}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(D=yMe);if(D&&(D=D(t,l))){oge(f,D,n,u);break e}V&&V(t,d,l),t==="focusout"&&(V=d._wrapperState)&&V.controlled&&d.type==="number"&&lK(d,"number",d.value)}switch(V=l?jS(l):window,t){case"focusin":(Jse(V)||V.contentEditable==="true")&&(VS=V,xK=l,HT=null);break;case"focusout":HT=xK=VS=null;break;case"mousedown":EK=!0;break;case"contextmenu":case"mouseup":case"dragend":EK=!1,eie(f,n,u);break;case"selectionchange":if(xMe)break;case"keydown":case"keyup":eie(f,n,u)}var O;if(GY)e:{switch(t){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else FS?ige(t,n)&&(U="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(sge&&n.locale!=="ko"&&(FS||U!=="onCompositionStart"?U==="onCompositionEnd"&&FS&&(O=rge()):(bw=u,HY="value"in bw?bw.value:bw.textContent,FS=!0)),V=gB(l,U),0<V.length&&(U=new Kse(U,t,null,n,u),f.push({event:U,listeners:V}),O?U.data=O:(O=age(n),O!==null&&(U.data=O)))),(O=lMe?uMe(t,n):fMe(t,n))&&(l=gB(l,"onBeforeInput"),0<l.length&&(u=new Kse("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:l}),u.data=O))}wge(f,e)})}function PN(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gB(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=AN(t,n),i!=null&&r.unshift(PN(t,i,s)),i=AN(t,e),i!=null&&r.push(PN(t,i,s))),t=t.return}return r}function BE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rie(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,l=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&l!==null&&(o=l,s?(c=AN(n,i),c!=null&&a.unshift(PN(n,c,o))):s||(c=AN(n,i),c!=null&&a.push(PN(n,c,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var IMe=/\r\n?/g,CMe=/\u0000|\uFFFD/g;function sie(t){return(typeof t=="string"?t:""+t).replace(IMe,`
`).replace(CMe,"")}function EP(t,e,n){if(e=sie(e),sie(t)!==e&&n)throw Error(ht(425))}function mB(){}var AK=null,SK=null;function IK(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var CK=typeof setTimeout=="function"?setTimeout:void 0,TMe=typeof clearTimeout=="function"?clearTimeout:void 0,iie=typeof Promise=="function"?Promise:void 0,NMe=typeof queueMicrotask=="function"?queueMicrotask:typeof iie<"u"?function(t){return iie.resolve(null).then(t).catch(kMe)}:CK;function kMe(t){setTimeout(function(){throw t})}function m$(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),CN(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);CN(e)}function Fw(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function aie(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Y5=Math.random().toString(36).slice(2),n0="__reactFiber$"+Y5,ON="__reactProps$"+Y5,Vg="__reactContainer$"+Y5,TK="__reactEvents$"+Y5,PMe="__reactListeners$"+Y5,OMe="__reactHandles$"+Y5;function Vv(t){var e=t[n0];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vg]||n[n0]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=aie(t);t!==null;){if(n=t[n0])return n;t=aie(t)}return e}t=n,n=t.parentNode}return null}function b7(t){return t=t[n0]||t[Vg],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jS(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ht(33))}function jD(t){return t[ON]||null}var NK=[],HS=-1;function Cb(t){return{current:t}}function Ws(t){0>HS||(t.current=NK[HS],NK[HS]=null,HS--)}function Ds(t,e){HS++,NK[HS]=t.current,t.current=e}var cb={},lc=Cb(cb),xl=Cb(!1),i2=cb;function J6(t,e){var n=t.type.contextTypes;if(!n)return cb;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function El(t){return t=t.childContextTypes,t!=null}function yB(){Ws(xl),Ws(lc)}function oie(t,e,n){if(lc.current!==cb)throw Error(ht(168));Ds(lc,e),Ds(xl,n)}function vge(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ht(108,gBe(t)||"Unknown",s));return li({},n,r)}function wB(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cb,i2=lc.current,Ds(lc,t),Ds(xl,xl.current),!0}function cie(t,e,n){var r=t.stateNode;if(!r)throw Error(ht(169));n?(t=vge(t,e,i2),r.__reactInternalMemoizedMergedChildContext=t,Ws(xl),Ws(lc),Ds(lc,t)):Ws(xl),Ds(xl,n)}var zp=null,HD=!1,y$=!1;function xge(t){zp===null?zp=[t]:zp.push(t)}function RMe(t){HD=!0,xge(t)}function Tb(){if(!y$&&zp!==null){y$=!0;var t=0,e=ms;try{var n=zp;for(ms=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zp=null,HD=!1}catch(s){throw zp!==null&&(zp=zp.slice(t+1)),Gpe(FY,Tb),s}finally{ms=e,y$=!1}}return null}var qS=[],KS=0,bB=null,vB=0,Ef=[],Af=0,a2=null,mg=1,yg="";function w1(t,e){qS[KS++]=vB,qS[KS++]=bB,bB=t,vB=e}function Ege(t,e,n){Ef[Af++]=mg,Ef[Af++]=yg,Ef[Af++]=a2,a2=t;var r=mg;t=yg;var s=32-Wd(r)-1;r&=~(1<<s),n+=1;var i=32-Wd(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,mg=1<<32-Wd(e)+s|n<<s|r,yg=i+t}else mg=1<<i|n<<s|r,yg=t}function zY(t){t.return!==null&&(w1(t,1),Ege(t,1,0))}function JY(t){for(;t===bB;)bB=qS[--KS],qS[KS]=null,vB=qS[--KS],qS[KS]=null;for(;t===a2;)a2=Ef[--Af],Ef[Af]=null,yg=Ef[--Af],Ef[Af]=null,mg=Ef[--Af],Ef[Af]=null}var vu=null,pu=null,ei=!1,Dd=null;function Age(t,e){var n=Pf(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function lie(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vu=t,pu=Fw(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vu=t,pu=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=a2!==null?{id:mg,overflow:yg}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pf(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vu=t,pu=null,!0):!1;default:return!1}}function kK(t){return(t.mode&1)!==0&&(t.flags&128)===0}function PK(t){if(ei){var e=pu;if(e){var n=e;if(!lie(t,e)){if(kK(t))throw Error(ht(418));e=Fw(n.nextSibling);var r=vu;e&&lie(t,e)?Age(r,n):(t.flags=t.flags&-4097|2,ei=!1,vu=t)}}else{if(kK(t))throw Error(ht(418));t.flags=t.flags&-4097|2,ei=!1,vu=t}}}function uie(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vu=t}function AP(t){if(t!==vu)return!1;if(!ei)return uie(t),ei=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!IK(t.type,t.memoizedProps)),e&&(e=pu)){if(kK(t))throw Sge(),Error(ht(418));for(;e;)Age(t,e),e=Fw(e.nextSibling)}if(uie(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ht(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pu=Fw(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pu=null}}else pu=vu?Fw(t.stateNode.nextSibling):null;return!0}function Sge(){for(var t=pu;t;)t=Fw(t.nextSibling)}function Y6(){pu=vu=null,ei=!1}function YY(t){Dd===null?Dd=[t]:Dd.push(t)}var _Me=tm.ReactCurrentBatchConfig;function y8(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ht(309));var r=n.stateNode}if(!r)throw Error(ht(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(ht(284));if(!n._owner)throw Error(ht(290,t))}return t}function SP(t,e){throw t=Object.prototype.toString.call(e),Error(ht(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fie(t){var e=t._init;return e(t._payload)}function Ige(t){function e(A,S){if(t){var I=A.deletions;I===null?(A.deletions=[S],A.flags|=16):I.push(S)}}function n(A,S){if(!t)return null;for(;S!==null;)e(A,S),S=S.sibling;return null}function r(A,S){for(A=new Map;S!==null;)S.key!==null?A.set(S.key,S):A.set(S.index,S),S=S.sibling;return A}function s(A,S){return A=Hw(A,S),A.index=0,A.sibling=null,A}function i(A,S,I){return A.index=I,t?(I=A.alternate,I!==null?(I=I.index,I<S?(A.flags|=2,S):I):(A.flags|=2,S)):(A.flags|=1048576,S)}function a(A){return t&&A.alternate===null&&(A.flags|=2),A}function o(A,S,I,B){return S===null||S.tag!==6?(S=S$(I,A.mode,B),S.return=A,S):(S=s(S,I),S.return=A,S)}function c(A,S,I,B){var D=I.type;return D===US?u(A,S,I.props.children,B,I.key):S!==null&&(S.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Dy&&fie(D)===S.type)?(B=s(S,I.props),B.ref=y8(A,S,I),B.return=A,B):(B=IR(I.type,I.key,I.props,null,A.mode,B),B.ref=y8(A,S,I),B.return=A,B)}function l(A,S,I,B){return S===null||S.tag!==4||S.stateNode.containerInfo!==I.containerInfo||S.stateNode.implementation!==I.implementation?(S=I$(I,A.mode,B),S.return=A,S):(S=s(S,I.children||[]),S.return=A,S)}function u(A,S,I,B,D){return S===null||S.tag!==7?(S=Rx(I,A.mode,B,D),S.return=A,S):(S=s(S,I),S.return=A,S)}function f(A,S,I){if(typeof S=="string"&&S!==""||typeof S=="number")return S=S$(""+S,A.mode,I),S.return=A,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case hP:return I=IR(S.type,S.key,S.props,null,A.mode,I),I.ref=y8(A,null,S),I.return=A,I;case LS:return S=I$(S,A.mode,I),S.return=A,S;case Dy:var B=S._init;return f(A,B(S._payload),I)}if(fI(S)||d8(S))return S=Rx(S,A.mode,I,null),S.return=A,S;SP(A,S)}return null}function d(A,S,I,B){var D=S!==null?S.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return D!==null?null:o(A,S,""+I,B);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case hP:return I.key===D?c(A,S,I,B):null;case LS:return I.key===D?l(A,S,I,B):null;case Dy:return D=I._init,d(A,S,D(I._payload),B)}if(fI(I)||d8(I))return D!==null?null:u(A,S,I,B,null);SP(A,I)}return null}function p(A,S,I,B,D){if(typeof B=="string"&&B!==""||typeof B=="number")return A=A.get(I)||null,o(S,A,""+B,D);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case hP:return A=A.get(B.key===null?I:B.key)||null,c(S,A,B,D);case LS:return A=A.get(B.key===null?I:B.key)||null,l(S,A,B,D);case Dy:var V=B._init;return p(A,S,I,V(B._payload),D)}if(fI(B)||d8(B))return A=A.get(I)||null,u(S,A,B,D,null);SP(S,B)}return null}function g(A,S,I,B){for(var D=null,V=null,O=S,U=S=0,Q=null;O!==null&&U<I.length;U++){O.index>U?(Q=O,O=null):Q=O.sibling;var ie=d(A,O,I[U],B);if(ie===null){O===null&&(O=Q);break}t&&O&&ie.alternate===null&&e(A,O),S=i(ie,S,U),V===null?D=ie:V.sibling=ie,V=ie,O=Q}if(U===I.length)return n(A,O),ei&&w1(A,U),D;if(O===null){for(;U<I.length;U++)O=f(A,I[U],B),O!==null&&(S=i(O,S,U),V===null?D=O:V.sibling=O,V=O);return ei&&w1(A,U),D}for(O=r(A,O);U<I.length;U++)Q=p(O,A,U,I[U],B),Q!==null&&(t&&Q.alternate!==null&&O.delete(Q.key===null?U:Q.key),S=i(Q,S,U),V===null?D=Q:V.sibling=Q,V=Q);return t&&O.forEach(function(G){return e(A,G)}),ei&&w1(A,U),D}function m(A,S,I,B){var D=d8(I);if(typeof D!="function")throw Error(ht(150));if(I=D.call(I),I==null)throw Error(ht(151));for(var V=D=null,O=S,U=S=0,Q=null,ie=I.next();O!==null&&!ie.done;U++,ie=I.next()){O.index>U?(Q=O,O=null):Q=O.sibling;var G=d(A,O,ie.value,B);if(G===null){O===null&&(O=Q);break}t&&O&&G.alternate===null&&e(A,O),S=i(G,S,U),V===null?D=G:V.sibling=G,V=G,O=Q}if(ie.done)return n(A,O),ei&&w1(A,U),D;if(O===null){for(;!ie.done;U++,ie=I.next())ie=f(A,ie.value,B),ie!==null&&(S=i(ie,S,U),V===null?D=ie:V.sibling=ie,V=ie);return ei&&w1(A,U),D}for(O=r(A,O);!ie.done;U++,ie=I.next())ie=p(O,A,U,ie.value,B),ie!==null&&(t&&ie.alternate!==null&&O.delete(ie.key===null?U:ie.key),S=i(ie,S,U),V===null?D=ie:V.sibling=ie,V=ie);return t&&O.forEach(function(R){return e(A,R)}),ei&&w1(A,U),D}function v(A,S,I,B){if(typeof I=="object"&&I!==null&&I.type===US&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case hP:e:{for(var D=I.key,V=S;V!==null;){if(V.key===D){if(D=I.type,D===US){if(V.tag===7){n(A,V.sibling),S=s(V,I.props.children),S.return=A,A=S;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Dy&&fie(D)===V.type){n(A,V.sibling),S=s(V,I.props),S.ref=y8(A,V,I),S.return=A,A=S;break e}n(A,V);break}else e(A,V);V=V.sibling}I.type===US?(S=Rx(I.props.children,A.mode,B,I.key),S.return=A,A=S):(B=IR(I.type,I.key,I.props,null,A.mode,B),B.ref=y8(A,S,I),B.return=A,A=B)}return a(A);case LS:e:{for(V=I.key;S!==null;){if(S.key===V)if(S.tag===4&&S.stateNode.containerInfo===I.containerInfo&&S.stateNode.implementation===I.implementation){n(A,S.sibling),S=s(S,I.children||[]),S.return=A,A=S;break e}else{n(A,S);break}else e(A,S);S=S.sibling}S=I$(I,A.mode,B),S.return=A,A=S}return a(A);case Dy:return V=I._init,v(A,S,V(I._payload),B)}if(fI(I))return g(A,S,I,B);if(d8(I))return m(A,S,I,B);SP(A,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,S!==null&&S.tag===6?(n(A,S.sibling),S=s(S,I),S.return=A,A=S):(n(A,S),S=S$(I,A.mode,B),S.return=A,A=S),a(A)):n(A,S)}return v}var Q6=Ige(!0),Cge=Ige(!1),xB=Cb(null),EB=null,GS=null,QY=null;function ZY(){QY=GS=EB=null}function XY(t){var e=xB.current;Ws(xB),t._currentValue=e}function OK(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function A3(t,e){EB=t,QY=GS=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wl=!0),t.firstContext=null)}function Df(t){var e=t._currentValue;if(QY!==t)if(t={context:t,memoizedValue:e,next:null},GS===null){if(EB===null)throw Error(ht(308));GS=t,EB.dependencies={lanes:0,firstContext:t}}else GS=GS.next=t;return e}var $v=null;function eQ(t){$v===null?$v=[t]:$v.push(t)}function Tge(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,eQ(e)):(n.next=s.next,s.next=n),e.interleaved=n,$g(t,r)}function $g(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ly=!1;function tQ(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nge(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pg(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vw(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,zr&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,$g(t,n)}return s=r.interleaved,s===null?(e.next=e,eQ(r)):(e.next=s.next,s.next=e),r.interleaved=e,$g(t,n)}function bR(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,VY(t,n)}}function die(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function AB(t,e,n,r){var s=t.updateQueue;Ly=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,l=c.next;c.next=null,a===null?i=l:a.next=l,a=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=l:o.next=l,u.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,u=l=c=null,o=i;do{var d=o.lane,p=o.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,m=o;switch(d=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){f=g.call(p,f,d);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,d=typeof g=="function"?g.call(p,f,d):g,d==null)break e;f=li({},f,d);break e;case 2:Ly=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(l=u=p,c=f):u=u.next=p,a|=d;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;d=o,o=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(u===null&&(c=f),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);c2|=a,t.lanes=a,t.memoizedState=f}}function hie(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ht(191,s));s.call(r)}}}var v7={},w0=Cb(v7),RN=Cb(v7),_N=Cb(v7);function jv(t){if(t===v7)throw Error(ht(174));return t}function nQ(t,e){switch(Ds(_N,e),Ds(RN,t),Ds(w0,v7),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fK(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fK(e,t)}Ws(w0),Ds(w0,e)}function Z6(){Ws(w0),Ws(RN),Ws(_N)}function kge(t){jv(_N.current);var e=jv(w0.current),n=fK(e,t.type);e!==n&&(Ds(RN,t),Ds(w0,n))}function rQ(t){RN.current===t&&(Ws(w0),Ws(RN))}var si=Cb(0);function SB(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var w$=[];function sQ(){for(var t=0;t<w$.length;t++)w$[t]._workInProgressVersionPrimary=null;w$.length=0}var vR=tm.ReactCurrentDispatcher,b$=tm.ReactCurrentBatchConfig,o2=0,ci=null,va=null,La=null,IB=!1,qT=!1,BN=0,BMe=0;function Fo(){throw Error(ht(321))}function iQ(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nh(t[n],e[n]))return!1;return!0}function aQ(t,e,n,r,s,i){if(o2=i,ci=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vR.current=t===null||t.memoizedState===null?UMe:FMe,t=n(r,s),qT){i=0;do{if(qT=!1,BN=0,25<=i)throw Error(ht(301));i+=1,La=va=null,e.updateQueue=null,vR.current=VMe,t=n(r,s)}while(qT)}if(vR.current=CB,e=va!==null&&va.next!==null,o2=0,La=va=ci=null,IB=!1,e)throw Error(ht(300));return t}function oQ(){var t=BN!==0;return BN=0,t}function Fh(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return La===null?ci.memoizedState=La=t:La=La.next=t,La}function Lf(){if(va===null){var t=ci.alternate;t=t!==null?t.memoizedState:null}else t=va.next;var e=La===null?ci.memoizedState:La.next;if(e!==null)La=e,va=t;else{if(t===null)throw Error(ht(310));va=t,t={memoizedState:va.memoizedState,baseState:va.baseState,baseQueue:va.baseQueue,queue:va.queue,next:null},La===null?ci.memoizedState=La=t:La=La.next=t}return La}function MN(t,e){return typeof e=="function"?e(t):e}function v$(t){var e=Lf(),n=e.queue;if(n===null)throw Error(ht(311));n.lastRenderedReducer=t;var r=va,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,c=null,l=i;do{var u=l.lane;if((o2&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var f={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(o=c=f,a=r):c=c.next=f,ci.lanes|=u,c2|=u}l=l.next}while(l!==null&&l!==i);c===null?a=r:c.next=o,nh(r,e.memoizedState)||(wl=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ci.lanes|=i,c2|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function x$(t){var e=Lf(),n=e.queue;if(n===null)throw Error(ht(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);nh(i,e.memoizedState)||(wl=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Pge(){}function Oge(t,e){var n=ci,r=Lf(),s=e(),i=!nh(r.memoizedState,s);if(i&&(r.memoizedState=s,wl=!0),r=r.queue,cQ(Bge.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||La!==null&&La.memoizedState.tag&1){if(n.flags|=2048,DN(9,_ge.bind(null,n,r,s,e),void 0,null),Ha===null)throw Error(ht(349));o2&30||Rge(n,e,s)}return s}function Rge(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ci.updateQueue,e===null?(e={lastEffect:null,stores:null},ci.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _ge(t,e,n,r){e.value=n,e.getSnapshot=r,Mge(e)&&Dge(t)}function Bge(t,e,n){return n(function(){Mge(e)&&Dge(t)})}function Mge(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nh(t,n)}catch{return!0}}function Dge(t){var e=$g(t,1);e!==null&&zd(e,t,1,-1)}function pie(t){var e=Fh();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:MN,lastRenderedState:t},e.queue=t,t=t.dispatch=LMe.bind(null,ci,t),[e.memoizedState,t]}function DN(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ci.updateQueue,e===null?(e={lastEffect:null,stores:null},ci.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Lge(){return Lf().memoizedState}function xR(t,e,n,r){var s=Fh();ci.flags|=t,s.memoizedState=DN(1|e,n,void 0,r===void 0?null:r)}function qD(t,e,n,r){var s=Lf();r=r===void 0?null:r;var i=void 0;if(va!==null){var a=va.memoizedState;if(i=a.destroy,r!==null&&iQ(r,a.deps)){s.memoizedState=DN(e,n,i,r);return}}ci.flags|=t,s.memoizedState=DN(1|e,n,i,r)}function gie(t,e){return xR(8390656,8,t,e)}function cQ(t,e){return qD(2048,8,t,e)}function Uge(t,e){return qD(4,2,t,e)}function Fge(t,e){return qD(4,4,t,e)}function Vge(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $ge(t,e,n){return n=n!=null?n.concat([t]):null,qD(4,4,Vge.bind(null,e,t),n)}function lQ(){}function jge(t,e){var n=Lf();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&iQ(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Hge(t,e){var n=Lf();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&iQ(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qge(t,e,n){return o2&21?(nh(n,e)||(n=Jpe(),ci.lanes|=n,c2|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wl=!0),t.memoizedState=n)}function MMe(t,e){var n=ms;ms=n!==0&&4>n?n:4,t(!0);var r=b$.transition;b$.transition={};try{t(!1),e()}finally{ms=n,b$.transition=r}}function Kge(){return Lf().memoizedState}function DMe(t,e,n){var r=jw(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gge(t))Wge(e,n);else if(n=Tge(t,e,n,r),n!==null){var s=Lc();zd(n,t,r,s),zge(n,e,r)}}function LMe(t,e,n){var r=jw(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gge(t))Wge(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,nh(o,a)){var c=e.interleaved;c===null?(s.next=s,eQ(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Tge(t,e,s,r),n!==null&&(s=Lc(),zd(n,t,r,s),zge(n,e,r))}}function Gge(t){var e=t.alternate;return t===ci||e!==null&&e===ci}function Wge(t,e){qT=IB=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zge(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,VY(t,n)}}var CB={readContext:Df,useCallback:Fo,useContext:Fo,useEffect:Fo,useImperativeHandle:Fo,useInsertionEffect:Fo,useLayoutEffect:Fo,useMemo:Fo,useReducer:Fo,useRef:Fo,useState:Fo,useDebugValue:Fo,useDeferredValue:Fo,useTransition:Fo,useMutableSource:Fo,useSyncExternalStore:Fo,useId:Fo,unstable_isNewReconciler:!1},UMe={readContext:Df,useCallback:function(t,e){return Fh().memoizedState=[t,e===void 0?null:e],t},useContext:Df,useEffect:gie,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xR(4194308,4,Vge.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xR(4194308,4,t,e)},useInsertionEffect:function(t,e){return xR(4,2,t,e)},useMemo:function(t,e){var n=Fh();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fh();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=DMe.bind(null,ci,t),[r.memoizedState,t]},useRef:function(t){var e=Fh();return t={current:t},e.memoizedState=t},useState:pie,useDebugValue:lQ,useDeferredValue:function(t){return Fh().memoizedState=t},useTransition:function(){var t=pie(!1),e=t[0];return t=MMe.bind(null,t[1]),Fh().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ci,s=Fh();if(ei){if(n===void 0)throw Error(ht(407));n=n()}else{if(n=e(),Ha===null)throw Error(ht(349));o2&30||Rge(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,gie(Bge.bind(null,r,i,t),[t]),r.flags|=2048,DN(9,_ge.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Fh(),e=Ha.identifierPrefix;if(ei){var n=yg,r=mg;n=(r&~(1<<32-Wd(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=BN++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=BMe++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FMe={readContext:Df,useCallback:jge,useContext:Df,useEffect:cQ,useImperativeHandle:$ge,useInsertionEffect:Uge,useLayoutEffect:Fge,useMemo:Hge,useReducer:v$,useRef:Lge,useState:function(){return v$(MN)},useDebugValue:lQ,useDeferredValue:function(t){var e=Lf();return qge(e,va.memoizedState,t)},useTransition:function(){var t=v$(MN)[0],e=Lf().memoizedState;return[t,e]},useMutableSource:Pge,useSyncExternalStore:Oge,useId:Kge,unstable_isNewReconciler:!1},VMe={readContext:Df,useCallback:jge,useContext:Df,useEffect:cQ,useImperativeHandle:$ge,useInsertionEffect:Uge,useLayoutEffect:Fge,useMemo:Hge,useReducer:x$,useRef:Lge,useState:function(){return x$(MN)},useDebugValue:lQ,useDeferredValue:function(t){var e=Lf();return va===null?e.memoizedState=t:qge(e,va.memoizedState,t)},useTransition:function(){var t=x$(MN)[0],e=Lf().memoizedState;return[t,e]},useMutableSource:Pge,useSyncExternalStore:Oge,useId:Kge,unstable_isNewReconciler:!1};function Ad(t,e){if(t&&t.defaultProps){e=li({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function RK(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:li({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var KD={isMounted:function(t){return(t=t._reactInternals)?V2(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Lc(),s=jw(t),i=Pg(r,s);i.payload=e,n!=null&&(i.callback=n),e=Vw(t,i,s),e!==null&&(zd(e,t,s,r),bR(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Lc(),s=jw(t),i=Pg(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Vw(t,i,s),e!==null&&(zd(e,t,s,r),bR(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Lc(),r=jw(t),s=Pg(n,r);s.tag=2,e!=null&&(s.callback=e),e=Vw(t,s,r),e!==null&&(zd(e,t,r,n),bR(e,t,r))}};function mie(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!NN(n,r)||!NN(s,i):!0}function Jge(t,e,n){var r=!1,s=cb,i=e.contextType;return typeof i=="object"&&i!==null?i=Df(i):(s=El(e)?i2:lc.current,r=e.contextTypes,i=(r=r!=null)?J6(t,s):cb),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=KD,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function yie(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&KD.enqueueReplaceState(e,e.state,null)}function _K(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},tQ(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Df(i):(i=El(e)?i2:lc.current,s.context=J6(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(RK(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&KD.enqueueReplaceState(s,s.state,null),AB(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function X6(t,e){try{var n="",r=e;do n+=pBe(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function E$(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function BK(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $Me=typeof WeakMap=="function"?WeakMap:Map;function Yge(t,e,n){n=Pg(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){NB||(NB=!0,qK=r),BK(t,e)},n}function Qge(t,e,n){n=Pg(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){BK(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){BK(t,e),typeof r!="function"&&($w===null?$w=new Set([this]):$w.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function wie(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new $Me;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=tDe.bind(null,t,e,n),e.then(t,t))}function bie(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vie(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pg(-1,1),e.tag=2,Vw(n,e,1))),n.lanes|=1),t)}var jMe=tm.ReactCurrentOwner,wl=!1;function Cc(t,e,n,r){e.child=t===null?Cge(e,null,n,r):Q6(e,t.child,n,r)}function xie(t,e,n,r,s){n=n.render;var i=e.ref;return A3(e,s),r=aQ(t,e,n,r,i,s),n=oQ(),t!==null&&!wl?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jg(t,e,s)):(ei&&n&&zY(e),e.flags|=1,Cc(t,e,r,s),e.child)}function Eie(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!yQ(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Zge(t,e,i,r,s)):(t=IR(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:NN,n(a,r)&&t.ref===e.ref)return jg(t,e,s)}return e.flags|=1,t=Hw(i,r),t.ref=e.ref,t.return=e,e.child=t}function Zge(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(NN(i,r)&&t.ref===e.ref)if(wl=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wl=!0);else return e.lanes=t.lanes,jg(t,e,s)}return MK(t,e,n,r,s)}function Xge(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ds(zS,tu),tu|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ds(zS,tu),tu|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ds(zS,tu),tu|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ds(zS,tu),tu|=r;return Cc(t,e,s,n),e.child}function eme(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function MK(t,e,n,r,s){var i=El(n)?i2:lc.current;return i=J6(e,i),A3(e,s),n=aQ(t,e,n,r,i,s),r=oQ(),t!==null&&!wl?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jg(t,e,s)):(ei&&r&&zY(e),e.flags|=1,Cc(t,e,n,s),e.child)}function Aie(t,e,n,r,s){if(El(n)){var i=!0;wB(e)}else i=!1;if(A3(e,s),e.stateNode===null)ER(t,e),Jge(e,n,r),_K(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,l=n.contextType;typeof l=="object"&&l!==null?l=Df(l):(l=El(n)?i2:lc.current,l=J6(e,l));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==l)&&yie(e,a,r,l),Ly=!1;var d=e.memoizedState;a.state=d,AB(e,r,a,s),c=e.memoizedState,o!==r||d!==c||xl.current||Ly?(typeof u=="function"&&(RK(e,n,u,r),c=e.memoizedState),(o=Ly||mie(e,n,o,r,d,c,l))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=l,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Nge(t,e),o=e.memoizedProps,l=e.type===e.elementType?o:Ad(e.type,o),a.props=l,f=e.pendingProps,d=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Df(c):(c=El(n)?i2:lc.current,c=J6(e,c));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||d!==c)&&yie(e,a,r,c),Ly=!1,d=e.memoizedState,a.state=d,AB(e,r,a,s);var g=e.memoizedState;o!==f||d!==g||xl.current||Ly?(typeof p=="function"&&(RK(e,n,p,r),g=e.memoizedState),(l=Ly||mie(e,n,l,r,d,g,c)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),a.props=r,a.state=g,a.context=c,r=l):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return DK(t,e,n,r,i,s)}function DK(t,e,n,r,s,i){eme(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&cie(e,n,!1),jg(t,e,i);r=e.stateNode,jMe.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Q6(e,t.child,null,i),e.child=Q6(e,null,o,i)):Cc(t,e,o,i),e.memoizedState=r.state,s&&cie(e,n,!0),e.child}function tme(t){var e=t.stateNode;e.pendingContext?oie(t,e.pendingContext,e.pendingContext!==e.context):e.context&&oie(t,e.context,!1),nQ(t,e.containerInfo)}function Sie(t,e,n,r,s){return Y6(),YY(s),e.flags|=256,Cc(t,e,n,r),e.child}var LK={dehydrated:null,treeContext:null,retryLane:0};function UK(t){return{baseLanes:t,cachePool:null,transitions:null}}function nme(t,e,n){var r=e.pendingProps,s=si.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ds(si,s&1),t===null)return PK(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=zD(a,r,0,null),t=Rx(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=UK(n),e.memoizedState=LK,t):uQ(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return HMe(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Hw(s,c),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=Hw(o,i):(i=Rx(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?UK(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=LK,r}return i=t.child,t=i.sibling,r=Hw(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function uQ(t,e){return e=zD({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function IP(t,e,n,r){return r!==null&&YY(r),Q6(e,t.child,null,n),t=uQ(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function HMe(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=E$(Error(ht(422))),IP(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=zD({mode:"visible",children:r.children},s,0,null),i=Rx(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Q6(e,t.child,null,a),e.child.memoizedState=UK(a),e.memoizedState=LK,i);if(!(e.mode&1))return IP(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(ht(419)),r=E$(i,r,void 0),IP(t,e,a,r)}if(o=(a&t.childLanes)!==0,wl||o){if(r=Ha,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$g(t,s),zd(r,t,s,-1))}return mQ(),r=E$(Error(ht(421))),IP(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=nDe.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,pu=Fw(s.nextSibling),vu=e,ei=!0,Dd=null,t!==null&&(Ef[Af++]=mg,Ef[Af++]=yg,Ef[Af++]=a2,mg=t.id,yg=t.overflow,a2=e),e=uQ(e,r.children),e.flags|=4096,e)}function Iie(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),OK(t.return,e,n)}function A$(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function rme(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Cc(t,e,r.children,n),r=si.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Iie(t,n,e);else if(t.tag===19)Iie(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ds(si,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&SB(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),A$(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&SB(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}A$(e,!0,n,null,i);break;case"together":A$(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ER(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jg(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),c2|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ht(153));if(e.child!==null){for(t=e.child,n=Hw(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hw(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qMe(t,e,n){switch(e.tag){case 3:tme(e),Y6();break;case 5:kge(e);break;case 1:El(e.type)&&wB(e);break;case 4:nQ(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ds(xB,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ds(si,si.current&1),e.flags|=128,null):n&e.child.childLanes?nme(t,e,n):(Ds(si,si.current&1),t=jg(t,e,n),t!==null?t.sibling:null);Ds(si,si.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return rme(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ds(si,si.current),r)break;return null;case 22:case 23:return e.lanes=0,Xge(t,e,n)}return jg(t,e,n)}var sme,FK,ime,ame;sme=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};FK=function(){};ime=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,jv(w0.current);var i=null;switch(n){case"input":s=oK(t,s),r=oK(t,r),i=[];break;case"select":s=li({},s,{value:void 0}),r=li({},r,{value:void 0}),i=[];break;case"textarea":s=uK(t,s),r=uK(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mB)}dK(n,r);var a;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var o=s[l];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(xN.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(o=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==o&&(c!=null||o!=null))if(l==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(xN.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&js("scroll",t),i||o===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};ame=function(t,e,n,r){n!==r&&(e.flags|=4)};function w8(t,e){if(!ei)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vo(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KMe(t,e,n){var r=e.pendingProps;switch(JY(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vo(e),null;case 1:return El(e.type)&&yB(),Vo(e),null;case 3:return r=e.stateNode,Z6(),Ws(xl),Ws(lc),sQ(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(AP(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dd!==null&&(WK(Dd),Dd=null))),FK(t,e),Vo(e),null;case 5:rQ(e);var s=jv(_N.current);if(n=e.type,t!==null&&e.stateNode!=null)ime(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ht(166));return Vo(e),null}if(t=jv(w0.current),AP(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[n0]=e,r[ON]=i,t=(e.mode&1)!==0,n){case"dialog":js("cancel",r),js("close",r);break;case"iframe":case"object":case"embed":js("load",r);break;case"video":case"audio":for(s=0;s<hI.length;s++)js(hI[s],r);break;case"source":js("error",r);break;case"img":case"image":case"link":js("error",r),js("load",r);break;case"details":js("toggle",r);break;case"input":Bse(r,i),js("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},js("invalid",r);break;case"textarea":Dse(r,i),js("invalid",r)}dK(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&EP(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&EP(r.textContent,o,t),s=["children",""+o]):xN.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&js("scroll",r)}switch(n){case"input":pP(r),Mse(r,i,!0);break;case"textarea":pP(r),Lse(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=mB)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Bpe(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[n0]=e,t[ON]=r,sme(t,e,!1,!1),e.stateNode=t;e:{switch(a=hK(n,r),n){case"dialog":js("cancel",t),js("close",t),s=r;break;case"iframe":case"object":case"embed":js("load",t),s=r;break;case"video":case"audio":for(s=0;s<hI.length;s++)js(hI[s],t);s=r;break;case"source":js("error",t),s=r;break;case"img":case"image":case"link":js("error",t),js("load",t),s=r;break;case"details":js("toggle",t),s=r;break;case"input":Bse(t,r),s=oK(t,r),js("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=li({},r,{value:void 0}),js("invalid",t);break;case"textarea":Dse(t,r),s=uK(t,r),js("invalid",t);break;default:s=r}dK(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?Lpe(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Mpe(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&EN(t,c):typeof c=="number"&&EN(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xN.hasOwnProperty(i)?c!=null&&i==="onScroll"&&js("scroll",t):c!=null&&BY(t,i,c,a))}switch(n){case"input":pP(t),Mse(t,r,!1);break;case"textarea":pP(t),Lse(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ob(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?b3(t,!!r.multiple,i,!1):r.defaultValue!=null&&b3(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=mB)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vo(e),null;case 6:if(t&&e.stateNode!=null)ame(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ht(166));if(n=jv(_N.current),jv(w0.current),AP(e)){if(r=e.stateNode,n=e.memoizedProps,r[n0]=e,(i=r.nodeValue!==n)&&(t=vu,t!==null))switch(t.tag){case 3:EP(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&EP(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[n0]=e,e.stateNode=r}return Vo(e),null;case 13:if(Ws(si),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ei&&pu!==null&&e.mode&1&&!(e.flags&128))Sge(),Y6(),e.flags|=98560,i=!1;else if(i=AP(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ht(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ht(317));i[n0]=e}else Y6(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vo(e),i=!1}else Dd!==null&&(WK(Dd),Dd=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||si.current&1?Aa===0&&(Aa=3):mQ())),e.updateQueue!==null&&(e.flags|=4),Vo(e),null);case 4:return Z6(),FK(t,e),t===null&&kN(e.stateNode.containerInfo),Vo(e),null;case 10:return XY(e.type._context),Vo(e),null;case 17:return El(e.type)&&yB(),Vo(e),null;case 19:if(Ws(si),i=e.memoizedState,i===null)return Vo(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)w8(i,!1);else{if(Aa!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=SB(t),a!==null){for(e.flags|=128,w8(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ds(si,si.current&1|2),e.child}t=t.sibling}i.tail!==null&&Vi()>e5&&(e.flags|=128,r=!0,w8(i,!1),e.lanes=4194304)}else{if(!r)if(t=SB(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),w8(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ei)return Vo(e),null}else 2*Vi()-i.renderingStartTime>e5&&n!==1073741824&&(e.flags|=128,r=!0,w8(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Vi(),e.sibling=null,n=si.current,Ds(si,r?n&1|2:n&1),e):(Vo(e),null);case 22:case 23:return gQ(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tu&1073741824&&(Vo(e),e.subtreeFlags&6&&(e.flags|=8192)):Vo(e),null;case 24:return null;case 25:return null}throw Error(ht(156,e.tag))}function GMe(t,e){switch(JY(e),e.tag){case 1:return El(e.type)&&yB(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Z6(),Ws(xl),Ws(lc),sQ(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rQ(e),null;case 13:if(Ws(si),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ht(340));Y6()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ws(si),null;case 4:return Z6(),null;case 10:return XY(e.type._context),null;case 22:case 23:return gQ(),null;case 24:return null;default:return null}}var CP=!1,nc=!1,WMe=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function WS(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){wi(t,e,r)}else n.current=null}function VK(t,e,n){try{n()}catch(r){wi(t,e,r)}}var Cie=!1;function zMe(t,e){if(AK=hB,t=fge(),WY(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,l=0,u=0,f=t,d=null;t:for(;;){for(var p;f!==n||s!==0&&f.nodeType!==3||(o=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)d=f,f=p;for(;;){if(f===t)break t;if(d===n&&++l===s&&(o=a),d===i&&++u===r&&(c=a),(p=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=p}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(SK={focusedElem:t,selectionRange:n},hB=!1,Gt=e;Gt!==null;)if(e=Gt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Gt=t;else for(;Gt!==null;){e=Gt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,A=e.stateNode,S=A.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ad(e.type,m),v);A.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ht(163))}}catch(B){wi(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,Gt=t;break}Gt=e.return}return g=Cie,Cie=!1,g}function KT(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&VK(e,n,i)}s=s.next}while(s!==r)}}function GD(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $K(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ome(t){var e=t.alternate;e!==null&&(t.alternate=null,ome(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[n0],delete e[ON],delete e[TK],delete e[PMe],delete e[OMe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cme(t){return t.tag===5||t.tag===3||t.tag===4}function Tie(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cme(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jK(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mB));else if(r!==4&&(t=t.child,t!==null))for(jK(t,e,n),t=t.sibling;t!==null;)jK(t,e,n),t=t.sibling}function HK(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(HK(t,e,n),t=t.sibling;t!==null;)HK(t,e,n),t=t.sibling}var fo=null,Rd=!1;function km(t,e,n){for(n=n.child;n!==null;)lme(t,e,n),n=n.sibling}function lme(t,e,n){if(y0&&typeof y0.onCommitFiberUnmount=="function")try{y0.onCommitFiberUnmount(UD,n)}catch{}switch(n.tag){case 5:nc||WS(n,e);case 6:var r=fo,s=Rd;fo=null,km(t,e,n),fo=r,Rd=s,fo!==null&&(Rd?(t=fo,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):fo.removeChild(n.stateNode));break;case 18:fo!==null&&(Rd?(t=fo,n=n.stateNode,t.nodeType===8?m$(t.parentNode,n):t.nodeType===1&&m$(t,n),CN(t)):m$(fo,n.stateNode));break;case 4:r=fo,s=Rd,fo=n.stateNode.containerInfo,Rd=!0,km(t,e,n),fo=r,Rd=s;break;case 0:case 11:case 14:case 15:if(!nc&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&VK(n,e,a),s=s.next}while(s!==r)}km(t,e,n);break;case 1:if(!nc&&(WS(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){wi(n,e,o)}km(t,e,n);break;case 21:km(t,e,n);break;case 22:n.mode&1?(nc=(r=nc)||n.memoizedState!==null,km(t,e,n),nc=r):km(t,e,n);break;default:km(t,e,n)}}function Nie(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new WMe),e.forEach(function(r){var s=rDe.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ad(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:fo=o.stateNode,Rd=!1;break e;case 3:fo=o.stateNode.containerInfo,Rd=!0;break e;case 4:fo=o.stateNode.containerInfo,Rd=!0;break e}o=o.return}if(fo===null)throw Error(ht(160));lme(i,a,s),fo=null,Rd=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){wi(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ume(e,t),e=e.sibling}function ume(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ad(e,t),Ch(t),r&4){try{KT(3,t,t.return),GD(3,t)}catch(m){wi(t,t.return,m)}try{KT(5,t,t.return)}catch(m){wi(t,t.return,m)}}break;case 1:ad(e,t),Ch(t),r&512&&n!==null&&WS(n,n.return);break;case 5:if(ad(e,t),Ch(t),r&512&&n!==null&&WS(n,n.return),t.flags&32){var s=t.stateNode;try{EN(s,"")}catch(m){wi(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Rpe(s,i),hK(o,a);var l=hK(o,i);for(a=0;a<c.length;a+=2){var u=c[a],f=c[a+1];u==="style"?Lpe(s,f):u==="dangerouslySetInnerHTML"?Mpe(s,f):u==="children"?EN(s,f):BY(s,u,f,l)}switch(o){case"input":cK(s,i);break;case"textarea":_pe(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?b3(s,!!i.multiple,p,!1):d!==!!i.multiple&&(i.defaultValue!=null?b3(s,!!i.multiple,i.defaultValue,!0):b3(s,!!i.multiple,i.multiple?[]:"",!1))}s[ON]=i}catch(m){wi(t,t.return,m)}}break;case 6:if(ad(e,t),Ch(t),r&4){if(t.stateNode===null)throw Error(ht(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){wi(t,t.return,m)}}break;case 3:if(ad(e,t),Ch(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{CN(e.containerInfo)}catch(m){wi(t,t.return,m)}break;case 4:ad(e,t),Ch(t);break;case 13:ad(e,t),Ch(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hQ=Vi())),r&4&&Nie(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(nc=(l=nc)||u,ad(e,t),nc=l):ad(e,t),Ch(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Gt=t,u=t.child;u!==null;){for(f=Gt=u;Gt!==null;){switch(d=Gt,p=d.child,d.tag){case 0:case 11:case 14:case 15:KT(4,d,d.return);break;case 1:WS(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){wi(r,n,m)}}break;case 5:WS(d,d.return);break;case 22:if(d.memoizedState!==null){Pie(f);continue}}p!==null?(p.return=d,Gt=p):Pie(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{s=f.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Dpe("display",a))}catch(m){wi(t,t.return,m)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){wi(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ad(e,t),Ch(t),r&4&&Nie(t);break;case 21:break;default:ad(e,t),Ch(t)}}function Ch(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cme(n)){var r=n;break e}n=n.return}throw Error(ht(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(EN(s,""),r.flags&=-33);var i=Tie(t);HK(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Tie(t);jK(t,o,a);break;default:throw Error(ht(161))}}catch(c){wi(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JMe(t,e,n){Gt=t,fme(t)}function fme(t,e,n){for(var r=(t.mode&1)!==0;Gt!==null;){var s=Gt,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||CP;if(!a){var o=s.alternate,c=o!==null&&o.memoizedState!==null||nc;o=CP;var l=nc;if(CP=a,(nc=c)&&!l)for(Gt=s;Gt!==null;)a=Gt,c=a.child,a.tag===22&&a.memoizedState!==null?Oie(s):c!==null?(c.return=a,Gt=c):Oie(s);for(;i!==null;)Gt=i,fme(i),i=i.sibling;Gt=s,CP=o,nc=l}kie(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Gt=i):kie(t)}}function kie(t){for(;Gt!==null;){var e=Gt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nc||GD(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nc)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ad(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&hie(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}hie(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&CN(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ht(163))}nc||e.flags&512&&$K(e)}catch(d){wi(e,e.return,d)}}if(e===t){Gt=null;break}if(n=e.sibling,n!==null){n.return=e.return,Gt=n;break}Gt=e.return}}function Pie(t){for(;Gt!==null;){var e=Gt;if(e===t){Gt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Gt=n;break}Gt=e.return}}function Oie(t){for(;Gt!==null;){var e=Gt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{GD(4,e)}catch(c){wi(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){wi(e,s,c)}}var i=e.return;try{$K(e)}catch(c){wi(e,i,c)}break;case 5:var a=e.return;try{$K(e)}catch(c){wi(e,a,c)}}}catch(c){wi(e,e.return,c)}if(e===t){Gt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Gt=o;break}Gt=e.return}}var YMe=Math.ceil,TB=tm.ReactCurrentDispatcher,fQ=tm.ReactCurrentOwner,Rf=tm.ReactCurrentBatchConfig,zr=0,Ha=null,ra=null,So=0,tu=0,zS=Cb(0),Aa=0,LN=null,c2=0,WD=0,dQ=0,GT=null,gl=null,hQ=0,e5=1/0,qp=null,NB=!1,qK=null,$w=null,TP=!1,vw=null,kB=0,WT=0,KK=null,AR=-1,SR=0;function Lc(){return zr&6?Vi():AR!==-1?AR:AR=Vi()}function jw(t){return t.mode&1?zr&2&&So!==0?So&-So:_Me.transition!==null?(SR===0&&(SR=Jpe()),SR):(t=ms,t!==0||(t=window.event,t=t===void 0?16:nge(t.type)),t):1}function zd(t,e,n,r){if(50<WT)throw WT=0,KK=null,Error(ht(185));y7(t,n,r),(!(zr&2)||t!==Ha)&&(t===Ha&&(!(zr&2)&&(WD|=n),Aa===4&&zy(t,So)),Al(t,r),n===1&&zr===0&&!(e.mode&1)&&(e5=Vi()+500,HD&&Tb()))}function Al(t,e){var n=t.callbackNode;_Be(t,e);var r=dB(t,t===Ha?So:0);if(r===0)n!==null&&Vse(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Vse(n),e===1)t.tag===0?RMe(Rie.bind(null,t)):xge(Rie.bind(null,t)),NMe(function(){!(zr&6)&&Tb()}),n=null;else{switch(Ype(r)){case 1:n=FY;break;case 4:n=Wpe;break;case 16:n=fB;break;case 536870912:n=zpe;break;default:n=fB}n=bme(n,dme.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dme(t,e){if(AR=-1,SR=0,zr&6)throw Error(ht(327));var n=t.callbackNode;if(S3()&&t.callbackNode!==n)return null;var r=dB(t,t===Ha?So:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=PB(t,r);else{e=r;var s=zr;zr|=2;var i=pme();(Ha!==t||So!==e)&&(qp=null,e5=Vi()+500,Ox(t,e));do try{XMe();break}catch(o){hme(t,o)}while(!0);ZY(),TB.current=i,zr=s,ra!==null?e=0:(Ha=null,So=0,e=Aa)}if(e!==0){if(e===2&&(s=wK(t),s!==0&&(r=s,e=GK(t,s))),e===1)throw n=LN,Ox(t,0),zy(t,r),Al(t,Vi()),n;if(e===6)zy(t,r);else{if(s=t.current.alternate,!(r&30)&&!QMe(s)&&(e=PB(t,r),e===2&&(i=wK(t),i!==0&&(r=i,e=GK(t,i))),e===1))throw n=LN,Ox(t,0),zy(t,r),Al(t,Vi()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ht(345));case 2:b1(t,gl,qp);break;case 3:if(zy(t,r),(r&130023424)===r&&(e=hQ+500-Vi(),10<e)){if(dB(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Lc(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=CK(b1.bind(null,t,gl,qp),e);break}b1(t,gl,qp);break;case 4:if(zy(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Wd(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Vi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YMe(r/1960))-r,10<r){t.timeoutHandle=CK(b1.bind(null,t,gl,qp),r);break}b1(t,gl,qp);break;case 5:b1(t,gl,qp);break;default:throw Error(ht(329))}}}return Al(t,Vi()),t.callbackNode===n?dme.bind(null,t):null}function GK(t,e){var n=GT;return t.current.memoizedState.isDehydrated&&(Ox(t,e).flags|=256),t=PB(t,e),t!==2&&(e=gl,gl=n,e!==null&&WK(e)),t}function WK(t){gl===null?gl=t:gl.push.apply(gl,t)}function QMe(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!nh(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zy(t,e){for(e&=~dQ,e&=~WD,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wd(e),r=1<<n;t[n]=-1,e&=~r}}function Rie(t){if(zr&6)throw Error(ht(327));S3();var e=dB(t,0);if(!(e&1))return Al(t,Vi()),null;var n=PB(t,e);if(t.tag!==0&&n===2){var r=wK(t);r!==0&&(e=r,n=GK(t,r))}if(n===1)throw n=LN,Ox(t,0),zy(t,e),Al(t,Vi()),n;if(n===6)throw Error(ht(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,b1(t,gl,qp),Al(t,Vi()),null}function pQ(t,e){var n=zr;zr|=1;try{return t(e)}finally{zr=n,zr===0&&(e5=Vi()+500,HD&&Tb())}}function l2(t){vw!==null&&vw.tag===0&&!(zr&6)&&S3();var e=zr;zr|=1;var n=Rf.transition,r=ms;try{if(Rf.transition=null,ms=1,t)return t()}finally{ms=r,Rf.transition=n,zr=e,!(zr&6)&&Tb()}}function gQ(){tu=zS.current,Ws(zS)}function Ox(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,TMe(n)),ra!==null)for(n=ra.return;n!==null;){var r=n;switch(JY(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yB();break;case 3:Z6(),Ws(xl),Ws(lc),sQ();break;case 5:rQ(r);break;case 4:Z6();break;case 13:Ws(si);break;case 19:Ws(si);break;case 10:XY(r.type._context);break;case 22:case 23:gQ()}n=n.return}if(Ha=t,ra=t=Hw(t.current,null),So=tu=e,Aa=0,LN=null,dQ=WD=c2=0,gl=GT=null,$v!==null){for(e=0;e<$v.length;e++)if(n=$v[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}$v=null}return t}function hme(t,e){do{var n=ra;try{if(ZY(),vR.current=CB,IB){for(var r=ci.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}IB=!1}if(o2=0,La=va=ci=null,qT=!1,BN=0,fQ.current=null,n===null||n.return===null){Aa=1,LN=e,ra=null;break}e:{var i=t,a=n.return,o=n,c=e;if(e=So,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=o,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=bie(a);if(p!==null){p.flags&=-257,vie(p,a,o,i,e),p.mode&1&&wie(i,l,e),e=p,c=l;var g=e.updateQueue;if(g===null){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break e}else{if(!(e&1)){wie(i,l,e),mQ();break e}c=Error(ht(426))}}else if(ei&&o.mode&1){var v=bie(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),vie(v,a,o,i,e),YY(X6(c,o));break e}}i=c=X6(c,o),Aa!==4&&(Aa=2),GT===null?GT=[i]:GT.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var A=Yge(i,c,e);die(i,A);break e;case 1:o=c;var S=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&($w===null||!$w.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var B=Qge(i,o,e);die(i,B);break e}}i=i.return}while(i!==null)}mme(n)}catch(D){e=D,ra===n&&n!==null&&(ra=n=n.return);continue}break}while(!0)}function pme(){var t=TB.current;return TB.current=CB,t===null?CB:t}function mQ(){(Aa===0||Aa===3||Aa===2)&&(Aa=4),Ha===null||!(c2&268435455)&&!(WD&268435455)||zy(Ha,So)}function PB(t,e){var n=zr;zr|=2;var r=pme();(Ha!==t||So!==e)&&(qp=null,Ox(t,e));do try{ZMe();break}catch(s){hme(t,s)}while(!0);if(ZY(),zr=n,TB.current=r,ra!==null)throw Error(ht(261));return Ha=null,So=0,Aa}function ZMe(){for(;ra!==null;)gme(ra)}function XMe(){for(;ra!==null&&!SBe();)gme(ra)}function gme(t){var e=wme(t.alternate,t,tu);t.memoizedProps=t.pendingProps,e===null?mme(t):ra=e,fQ.current=null}function mme(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=GMe(n,e),n!==null){n.flags&=32767,ra=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Aa=6,ra=null;return}}else if(n=KMe(n,e,tu),n!==null){ra=n;return}if(e=e.sibling,e!==null){ra=e;return}ra=e=t}while(e!==null);Aa===0&&(Aa=5)}function b1(t,e,n){var r=ms,s=Rf.transition;try{Rf.transition=null,ms=1,eDe(t,e,n,r)}finally{Rf.transition=s,ms=r}return null}function eDe(t,e,n,r){do S3();while(vw!==null);if(zr&6)throw Error(ht(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ht(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(BBe(t,i),t===Ha&&(ra=Ha=null,So=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||TP||(TP=!0,bme(fB,function(){return S3(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Rf.transition,Rf.transition=null;var a=ms;ms=1;var o=zr;zr|=4,fQ.current=null,zMe(t,n),ume(n,t),vMe(SK),hB=!!AK,SK=AK=null,t.current=n,JMe(n),IBe(),zr=o,ms=a,Rf.transition=i}else t.current=n;if(TP&&(TP=!1,vw=t,kB=s),i=t.pendingLanes,i===0&&($w=null),NBe(n.stateNode),Al(t,Vi()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(NB)throw NB=!1,t=qK,qK=null,t;return kB&1&&t.tag!==0&&S3(),i=t.pendingLanes,i&1?t===KK?WT++:(WT=0,KK=t):WT=0,Tb(),null}function S3(){if(vw!==null){var t=Ype(kB),e=Rf.transition,n=ms;try{if(Rf.transition=null,ms=16>t?16:t,vw===null)var r=!1;else{if(t=vw,vw=null,kB=0,zr&6)throw Error(ht(331));var s=zr;for(zr|=4,Gt=t.current;Gt!==null;){var i=Gt,a=i.child;if(Gt.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var l=o[c];for(Gt=l;Gt!==null;){var u=Gt;switch(u.tag){case 0:case 11:case 15:KT(8,u,i)}var f=u.child;if(f!==null)f.return=u,Gt=f;else for(;Gt!==null;){u=Gt;var d=u.sibling,p=u.return;if(ome(u),u===l){Gt=null;break}if(d!==null){d.return=p,Gt=d;break}Gt=p}}}var g=i.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}Gt=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Gt=a;else e:for(;Gt!==null;){if(i=Gt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:KT(9,i,i.return)}var A=i.sibling;if(A!==null){A.return=i.return,Gt=A;break e}Gt=i.return}}var S=t.current;for(Gt=S;Gt!==null;){a=Gt;var I=a.child;if(a.subtreeFlags&2064&&I!==null)I.return=a,Gt=I;else e:for(a=S;Gt!==null;){if(o=Gt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:GD(9,o)}}catch(D){wi(o,o.return,D)}if(o===a){Gt=null;break e}var B=o.sibling;if(B!==null){B.return=o.return,Gt=B;break e}Gt=o.return}}if(zr=s,Tb(),y0&&typeof y0.onPostCommitFiberRoot=="function")try{y0.onPostCommitFiberRoot(UD,t)}catch{}r=!0}return r}finally{ms=n,Rf.transition=e}}return!1}function _ie(t,e,n){e=X6(n,e),e=Yge(t,e,1),t=Vw(t,e,1),e=Lc(),t!==null&&(y7(t,1,e),Al(t,e))}function wi(t,e,n){if(t.tag===3)_ie(t,t,n);else for(;e!==null;){if(e.tag===3){_ie(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($w===null||!$w.has(r))){t=X6(n,t),t=Qge(e,t,1),e=Vw(e,t,1),t=Lc(),e!==null&&(y7(e,1,t),Al(e,t));break}}e=e.return}}function tDe(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Lc(),t.pingedLanes|=t.suspendedLanes&n,Ha===t&&(So&n)===n&&(Aa===4||Aa===3&&(So&130023424)===So&&500>Vi()-hQ?Ox(t,0):dQ|=n),Al(t,e)}function yme(t,e){e===0&&(t.mode&1?(e=yP,yP<<=1,!(yP&130023424)&&(yP=4194304)):e=1);var n=Lc();t=$g(t,e),t!==null&&(y7(t,e,n),Al(t,n))}function nDe(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yme(t,n)}function rDe(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ht(314))}r!==null&&r.delete(e),yme(t,n)}var wme;wme=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xl.current)wl=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wl=!1,qMe(t,e,n);wl=!!(t.flags&131072)}else wl=!1,ei&&e.flags&1048576&&Ege(e,vB,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ER(t,e),t=e.pendingProps;var s=J6(e,lc.current);A3(e,n),s=aQ(null,e,r,t,s,n);var i=oQ();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,El(r)?(i=!0,wB(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,tQ(e),s.updater=KD,e.stateNode=s,s._reactInternals=e,_K(e,r,t,n),e=DK(null,e,r,!0,i,n)):(e.tag=0,ei&&i&&zY(e),Cc(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ER(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=iDe(r),t=Ad(r,t),s){case 0:e=MK(null,e,r,t,n);break e;case 1:e=Aie(null,e,r,t,n);break e;case 11:e=xie(null,e,r,t,n);break e;case 14:e=Eie(null,e,r,Ad(r.type,t),n);break e}throw Error(ht(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ad(r,s),MK(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ad(r,s),Aie(t,e,r,s,n);case 3:e:{if(tme(e),t===null)throw Error(ht(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Nge(t,e),AB(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=X6(Error(ht(423)),e),e=Sie(t,e,r,n,s);break e}else if(r!==s){s=X6(Error(ht(424)),e),e=Sie(t,e,r,n,s);break e}else for(pu=Fw(e.stateNode.containerInfo.firstChild),vu=e,ei=!0,Dd=null,n=Cge(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Y6(),r===s){e=jg(t,e,n);break e}Cc(t,e,r,n)}e=e.child}return e;case 5:return kge(e),t===null&&PK(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,IK(r,s)?a=null:i!==null&&IK(r,i)&&(e.flags|=32),eme(t,e),Cc(t,e,a,n),e.child;case 6:return t===null&&PK(e),null;case 13:return nme(t,e,n);case 4:return nQ(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Q6(e,null,r,n):Cc(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ad(r,s),xie(t,e,r,s,n);case 7:return Cc(t,e,e.pendingProps,n),e.child;case 8:return Cc(t,e,e.pendingProps.children,n),e.child;case 12:return Cc(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ds(xB,r._currentValue),r._currentValue=a,i!==null)if(nh(i.value,a)){if(i.children===s.children&&!xl.current){e=jg(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Pg(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),OK(i.return,n,e),o.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ht(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),OK(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Cc(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,A3(e,n),s=Df(s),r=r(s),e.flags|=1,Cc(t,e,r,n),e.child;case 14:return r=e.type,s=Ad(r,e.pendingProps),s=Ad(r.type,s),Eie(t,e,r,s,n);case 15:return Zge(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ad(r,s),ER(t,e),e.tag=1,El(r)?(t=!0,wB(e)):t=!1,A3(e,n),Jge(e,r,s),_K(e,r,s,n),DK(null,e,r,!0,t,n);case 19:return rme(t,e,n);case 22:return Xge(t,e,n)}throw Error(ht(156,e.tag))};function bme(t,e){return Gpe(t,e)}function sDe(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pf(t,e,n,r){return new sDe(t,e,n,r)}function yQ(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iDe(t){if(typeof t=="function")return yQ(t)?1:0;if(t!=null){if(t=t.$$typeof,t===DY)return 11;if(t===LY)return 14}return 2}function Hw(t,e){var n=t.alternate;return n===null?(n=Pf(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function IR(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")yQ(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case US:return Rx(n.children,s,i,e);case MY:a=8,s|=8;break;case rK:return t=Pf(12,n,e,s|2),t.elementType=rK,t.lanes=i,t;case sK:return t=Pf(13,n,e,s),t.elementType=sK,t.lanes=i,t;case iK:return t=Pf(19,n,e,s),t.elementType=iK,t.lanes=i,t;case kpe:return zD(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Tpe:a=10;break e;case Npe:a=9;break e;case DY:a=11;break e;case LY:a=14;break e;case Dy:a=16,r=null;break e}throw Error(ht(130,t==null?t:typeof t,""))}return e=Pf(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Rx(t,e,n,r){return t=Pf(7,t,r,e),t.lanes=n,t}function zD(t,e,n,r){return t=Pf(22,t,r,e),t.elementType=kpe,t.lanes=n,t.stateNode={isHidden:!1},t}function S$(t,e,n){return t=Pf(6,t,null,e),t.lanes=n,t}function I$(t,e,n){return e=Pf(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function aDe(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=i$(0),this.expirationTimes=i$(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=i$(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wQ(t,e,n,r,s,i,a,o,c){return t=new aDe(t,e,n,o,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pf(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tQ(i),t}function oDe(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:LS,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vme(t){if(!t)return cb;t=t._reactInternals;e:{if(V2(t)!==t||t.tag!==1)throw Error(ht(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(El(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ht(171))}if(t.tag===1){var n=t.type;if(El(n))return vge(t,n,e)}return e}function xme(t,e,n,r,s,i,a,o,c){return t=wQ(n,r,!0,t,s,i,a,o,c),t.context=vme(null),n=t.current,r=Lc(),s=jw(n),i=Pg(r,s),i.callback=e??null,Vw(n,i,s),t.current.lanes=s,y7(t,s,r),Al(t,r),t}function JD(t,e,n,r){var s=e.current,i=Lc(),a=jw(s);return n=vme(n),e.context===null?e.context=n:e.pendingContext=n,e=Pg(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vw(s,e,a),t!==null&&(zd(t,s,a,i),bR(t,s,a)),a}function OB(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bie(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bQ(t,e){Bie(t,e),(t=t.alternate)&&Bie(t,e)}function cDe(){return null}var Eme=typeof reportError=="function"?reportError:function(t){console.error(t)};function vQ(t){this._internalRoot=t}YD.prototype.render=vQ.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ht(409));JD(t,e,null,null)};YD.prototype.unmount=vQ.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;l2(function(){JD(null,t,null,null)}),e[Vg]=null}};function YD(t){this._internalRoot=t}YD.prototype.unstable_scheduleHydration=function(t){if(t){var e=Xpe();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Wy.length&&e!==0&&e<Wy[n].priority;n++);Wy.splice(n,0,t),n===0&&tge(t)}};function xQ(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function QD(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mie(){}function lDe(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=OB(a);i.call(l)}}var a=xme(e,r,t,0,null,!1,!1,"",Mie);return t._reactRootContainer=a,t[Vg]=a.current,kN(t.nodeType===8?t.parentNode:t),l2(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var l=OB(c);o.call(l)}}var c=wQ(t,0,!1,null,null,!1,!1,"",Mie);return t._reactRootContainer=c,t[Vg]=c.current,kN(t.nodeType===8?t.parentNode:t),l2(function(){JD(e,c,n,r)}),c}function ZD(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var c=OB(a);o.call(c)}}JD(e,a,t,s)}else a=lDe(n,e,t,s,r);return OB(a)}Qpe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=dI(e.pendingLanes);n!==0&&(VY(e,n|1),Al(e,Vi()),!(zr&6)&&(e5=Vi()+500,Tb()))}break;case 13:l2(function(){var r=$g(t,1);if(r!==null){var s=Lc();zd(r,t,1,s)}}),bQ(t,1)}};$Y=function(t){if(t.tag===13){var e=$g(t,134217728);if(e!==null){var n=Lc();zd(e,t,134217728,n)}bQ(t,134217728)}};Zpe=function(t){if(t.tag===13){var e=jw(t),n=$g(t,e);if(n!==null){var r=Lc();zd(n,t,e,r)}bQ(t,e)}};Xpe=function(){return ms};ege=function(t,e){var n=ms;try{return ms=t,e()}finally{ms=n}};gK=function(t,e,n){switch(e){case"input":if(cK(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=jD(r);if(!s)throw Error(ht(90));Ope(r),cK(r,s)}}}break;case"textarea":_pe(t,n);break;case"select":e=n.value,e!=null&&b3(t,!!n.multiple,e,!1)}};Vpe=pQ;$pe=l2;var uDe={usingClientEntryPoint:!1,Events:[b7,jS,jD,Upe,Fpe,pQ]},b8={findFiberByHostInstance:Vv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fDe={bundleType:b8.bundleType,version:b8.version,rendererPackageName:b8.rendererPackageName,rendererConfig:b8.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tm.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qpe(t),t===null?null:t.stateNode},findFiberByHostInstance:b8.findFiberByHostInstance||cDe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var NP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!NP.isDisabled&&NP.supportsFiber)try{UD=NP.inject(fDe),y0=NP}catch{}}Cu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uDe;Cu.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xQ(e))throw Error(ht(200));return oDe(t,e,null,n)};Cu.createRoot=function(t,e){if(!xQ(t))throw Error(ht(299));var n=!1,r="",s=Eme;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=wQ(t,1,!1,null,null,n,!1,r,s),t[Vg]=e.current,kN(t.nodeType===8?t.parentNode:t),new vQ(e)};Cu.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ht(188)):(t=Object.keys(t).join(","),Error(ht(268,t)));return t=qpe(e),t=t===null?null:t.stateNode,t};Cu.flushSync=function(t){return l2(t)};Cu.hydrate=function(t,e,n){if(!QD(e))throw Error(ht(200));return ZD(null,t,e,!0,n)};Cu.hydrateRoot=function(t,e,n){if(!xQ(t))throw Error(ht(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Eme;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=xme(e,null,t,1,n??null,s,!1,i,a),t[Vg]=e.current,kN(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new YD(e)};Cu.render=function(t,e,n){if(!QD(e))throw Error(ht(200));return ZD(null,t,e,!1,n)};Cu.unmountComponentAtNode=function(t){if(!QD(t))throw Error(ht(40));return t._reactRootContainer?(l2(function(){ZD(null,null,t,!1,function(){t._reactRootContainer=null,t[Vg]=null})}),!0):!1};Cu.unstable_batchedUpdates=pQ;Cu.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!QD(n))throw Error(ht(200));if(t==null||t._reactInternals===void 0)throw Error(ht(38));return ZD(t,e,n,!1,r)};Cu.version="18.3.1-next-f1338f8080-20240426";function Ame(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ame)}catch(t){console.error(t)}}Ame(),Ape.exports=Cu;var $2=Ape.exports;const dDe=em($2);var hDe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],pDe=hDe.reduce((t,e)=>{const n=xpe(`Primitive.${e}`),r=F.forwardRef((s,i)=>{const{asChild:a,...o}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(c,{...o,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function gDe(t,e){const n=F.createContext(e),r=i=>{const{children:a,...o}=i,c=F.useMemo(()=>o,Object.values(o));return x.jsx(n.Provider,{value:c,children:a})};r.displayName=t+"Provider";function s(i){const a=F.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function dh(t,e=[]){let n=[];function r(i,a){const o=F.createContext(a),c=n.length;n=[...n,a];const l=f=>{var A;const{scope:d,children:p,...g}=f,m=((A=d==null?void 0:d[t])==null?void 0:A[c])||o,v=F.useMemo(()=>g,Object.values(g));return x.jsx(m.Provider,{value:v,children:p})};l.displayName=i+"Provider";function u(f,d){var m;const p=((m=d==null?void 0:d[t])==null?void 0:m[c])||o,g=F.useContext(p);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[l,u]}const s=()=>{const i=n.map(a=>F.createContext(a));return function(o){const c=(o==null?void 0:o[t])||i;return F.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return s.scopeName=t,[r,mDe(s,...e)]}function mDe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((o,{useScope:c,scopeName:l})=>{const f=c(i)[`__scope${l}`];return{...o,...f}},{});return F.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function ln(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}var Wa=globalThis!=null&&globalThis.document?F.useLayoutEffect:()=>{},yDe=DD[" useInsertionEffect ".trim().toString()]||Wa;function P0({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,a]=wDe({defaultProp:e,onChange:n}),o=t!==void 0,c=o?t:s;{const u=F.useRef(t!==void 0);F.useEffect(()=>{const f=u.current;f!==o&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,r])}const l=F.useCallback(u=>{var f;if(o){const d=bDe(u)?u(t):u;d!==t&&((f=a.current)==null||f.call(a,d))}else i(u)},[o,t,i,a]);return[c,l]}function wDe({defaultProp:t,onChange:e}){const[n,r]=F.useState(t),s=F.useRef(n),i=F.useRef(e);return yDe(()=>{i.current=e},[e]),F.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function bDe(t){return typeof t=="function"}function Sme(t){const e=F.useRef({value:t,previous:t});return F.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function Ime(t){const[e,n]=F.useState(void 0);return Wa(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,o;if("borderBoxSize"in i){const c=i.borderBoxSize,l=Array.isArray(c)?c[0]:c;a=l.inlineSize,o=l.blockSize}else a=t.offsetWidth,o=t.offsetHeight;n({width:a,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}function vDe(t,e){return F.useReducer((n,r)=>e[n][r]??n,t)}var qf=t=>{const{present:e,children:n}=t,r=xDe(e),s=typeof n=="function"?n({present:r.isPresent}):F.Children.only(n),i=ss(r.ref,EDe(s));return typeof n=="function"||r.isPresent?F.cloneElement(s,{ref:i}):null};qf.displayName="Presence";function xDe(t){const[e,n]=F.useState(),r=F.useRef(null),s=F.useRef(t),i=F.useRef("none"),a=t?"mounted":"unmounted",[o,c]=vDe(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return F.useEffect(()=>{const l=kP(r.current);i.current=o==="mounted"?l:"none"},[o]),Wa(()=>{const l=r.current,u=s.current;if(u!==t){const d=i.current,p=kP(l);t?c("MOUNT"):p==="none"||(l==null?void 0:l.display)==="none"?c("UNMOUNT"):c(u&&d!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Wa(()=>{if(e){let l;const u=e.ownerDocument.defaultView??window,f=p=>{const m=kP(r.current).includes(CSS.escape(p.animationName));if(p.target===e&&m&&(c("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",l=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},d=p=>{p.target===e&&(i.current=kP(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(l),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:F.useCallback(l=>{r.current=l?getComputedStyle(l):null,n(l)},[])}}function kP(t){return(t==null?void 0:t.animationName)||"none"}function EDe(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function t5(t){const e=ADe(t),n=F.forwardRef((r,s)=>{const{children:i,...a}=r,o=F.Children.toArray(i),c=o.find(IDe);if(c){const l=c.props.children,u=o.map(f=>f===c?F.Children.count(l)>1?F.Children.only(null):F.isValidElement(l)?l.props.children:null:f);return x.jsx(e,{...a,ref:s,children:F.isValidElement(l)?F.cloneElement(l,void 0,u):null})}return x.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function ADe(t){const e=F.forwardRef((n,r)=>{const{children:s,...i}=n;if(F.isValidElement(s)){const a=TDe(s),o=CDe(i,s.props);return s.type!==F.Fragment&&(o.ref=r?OY(r,a):a),F.cloneElement(s,o)}return F.Children.count(s)>1?F.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Cme=Symbol("radix.slottable");function SDe(t){const e=({children:n})=>x.jsx(x.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=Cme,e}function IDe(t){return F.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Cme}function CDe(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...o)=>{const c=i(...o);return s(...o),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function TDe(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var NDe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$n=NDe.reduce((t,e)=>{const n=t5(`Primitive.${e}`),r=F.forwardRef((s,i)=>{const{asChild:a,...o}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(c,{...o,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Tme(t,e){t&&$2.flushSync(()=>t.dispatchEvent(e))}var XD="Checkbox",[kDe]=dh(XD),[PDe,EQ]=kDe(XD);function ODe(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:a,name:o,onCheckedChange:c,required:l,value:u="on",internal_do_not_use_render:f}=t,[d,p]=P0({prop:n,defaultProp:s??!1,onChange:c,caller:XD}),[g,m]=F.useState(null),[v,A]=F.useState(null),S=F.useRef(!1),I=g?!!a||!!g.closest("form"):!0,B={checked:d,disabled:i,setChecked:p,control:g,setControl:m,name:o,form:a,value:u,hasConsumerStoppedPropagationRef:S,required:l,defaultChecked:qw(s)?!1:s,isFormControl:I,bubbleInput:v,setBubbleInput:A};return x.jsx(PDe,{scope:e,...B,children:RDe(f)?f(B):r})}var Nme="CheckboxTrigger",kme=F.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:a,disabled:o,checked:c,required:l,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:d,isFormControl:p,bubbleInput:g}=EQ(Nme,t),m=ss(s,u),v=F.useRef(c);return F.useEffect(()=>{const A=i==null?void 0:i.form;if(A){const S=()=>f(v.current);return A.addEventListener("reset",S),()=>A.removeEventListener("reset",S)}},[i,f]),x.jsx($n.button,{type:"button",role:"checkbox","aria-checked":qw(c)?"mixed":c,"aria-required":l,"data-state":Mme(c),"data-disabled":o?"":void 0,disabled:o,value:a,...r,ref:m,onKeyDown:ln(e,A=>{A.key==="Enter"&&A.preventDefault()}),onClick:ln(n,A=>{f(S=>qw(S)?!0:!S),g&&p&&(d.current=A.isPropagationStopped(),d.current||A.stopPropagation())})})});kme.displayName=Nme;var Pme=F.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:a,disabled:o,value:c,onCheckedChange:l,form:u,...f}=t;return x.jsx(ODe,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:o,required:a,onCheckedChange:l,name:r,form:u,value:c,internal_do_not_use_render:({isFormControl:d})=>x.jsxs(x.Fragment,{children:[x.jsx(kme,{...f,ref:e,__scopeCheckbox:n}),d&&x.jsx(Bme,{__scopeCheckbox:n})]})})});Pme.displayName=XD;var Ome="CheckboxIndicator",Rme=F.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=EQ(Ome,n);return x.jsx(qf,{present:r||qw(i.checked)||i.checked===!0,children:x.jsx($n.span,{"data-state":Mme(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});Rme.displayName=Ome;var _me="CheckboxBubbleInput",Bme=F.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:a,required:o,disabled:c,name:l,value:u,form:f,bubbleInput:d,setBubbleInput:p}=EQ(_me,t),g=ss(n,p),m=Sme(i),v=Ime(r);F.useEffect(()=>{const S=d;if(!S)return;const I=window.HTMLInputElement.prototype,D=Object.getOwnPropertyDescriptor(I,"checked").set,V=!s.current;if(m!==i&&D){const O=new Event("click",{bubbles:V});S.indeterminate=qw(i),D.call(S,qw(i)?!1:i),S.dispatchEvent(O)}},[d,m,i,s]);const A=F.useRef(qw(i)?!1:i);return x.jsx($n.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??A.current,required:o,disabled:c,name:l,value:u,form:f,...e,tabIndex:-1,ref:g,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Bme.displayName=_me;function RDe(t){return typeof t=="function"}function qw(t){return t==="indeterminate"}function Mme(t){return qw(t)?"indeterminate":t?"checked":"unchecked"}var _De=DD[" useId ".trim().toString()]||(()=>{}),BDe=0;function Jd(t){const[e,n]=F.useState(_De());return Wa(()=>{n(r=>r??String(BDe++))},[t]),t||(e?`radix-${e}`:"")}var eL="Collapsible",[MDe]=dh(eL),[DDe,AQ]=MDe(eL),Dme=F.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:a,...o}=t,[c,l]=P0({prop:r,defaultProp:s??!1,onChange:a,caller:eL});return x.jsx(DDe,{scope:n,disabled:i,contentId:Jd(),open:c,onOpenToggle:F.useCallback(()=>l(u=>!u),[l]),children:x.jsx($n.div,{"data-state":IQ(c),"data-disabled":i?"":void 0,...o,ref:e})})});Dme.displayName=eL;var Lme="CollapsibleTrigger",Ume=F.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=AQ(Lme,n);return x.jsx($n.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":IQ(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:ln(t.onClick,s.onOpenToggle)})});Ume.displayName=Lme;var SQ="CollapsibleContent",Fme=F.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=AQ(SQ,t.__scopeCollapsible);return x.jsx(qf,{present:n||s.open,children:({present:i})=>x.jsx(LDe,{...r,ref:e,present:i})})});Fme.displayName=SQ;var LDe=F.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,a=AQ(SQ,n),[o,c]=F.useState(r),l=F.useRef(null),u=ss(e,l),f=F.useRef(0),d=f.current,p=F.useRef(0),g=p.current,m=a.open||o,v=F.useRef(m),A=F.useRef(void 0);return F.useEffect(()=>{const S=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(S)},[]),Wa(()=>{const S=l.current;if(S){A.current=A.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";const I=S.getBoundingClientRect();f.current=I.height,p.current=I.width,v.current||(S.style.transitionDuration=A.current.transitionDuration,S.style.animationName=A.current.animationName),c(r)}},[a.open,r]),x.jsx($n.div,{"data-state":IQ(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!m,...i,ref:u,style:{"--radix-collapsible-content-height":d?`${d}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...t.style},children:m&&s})});function IQ(t){return t?"open":"closed"}var Vme=Dme,$me=Ume,jme=Fme;const CQ=F.createContext({});function TQ(t){const e=F.useRef(null);return e.current===null&&(e.current=t()),e.current}const Hme=typeof window<"u",qme=Hme?F.useLayoutEffect:F.useEffect,tL=F.createContext(null);function NQ(t,e){t.indexOf(e)===-1&&t.push(e)}function RB(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const O0=(t,e,n)=>n>e?e:n<t?t:n;let kQ=()=>{};const Hg={},Kme=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Gme(t){return typeof t=="object"&&t!==null}const Wme=t=>/^0[^.\s]+$/u.test(t);function zme(t){let e;return()=>(e===void 0&&(e=t()),e)}const _f=t=>t,UDe=(t,e)=>n=>e(t(n)),x7=(...t)=>t.reduce(UDe),UN=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class PQ{constructor(){this.subscriptions=[]}add(e){return NQ(this.subscriptions,e),()=>RB(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Yd=t=>t*1e3,Of=t=>t/1e3;function Jme(t,e){return e?t*(1e3/e):0}const Yme=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,FDe=1e-7,VDe=12;function $De(t,e,n,r,s){let i,a,o=0;do a=e+(n-e)/2,i=Yme(a,r,s)-t,i>0?n=a:e=a;while(Math.abs(i)>FDe&&++o<VDe);return a}function E7(t,e,n,r){if(t===e&&n===r)return _f;const s=i=>$De(i,0,1,t,n);return i=>i===0||i===1?i:Yme(s(i),e,r)}const Qme=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Zme=t=>e=>1-t(1-e),Xme=E7(.33,1.53,.69,.99),OQ=Zme(Xme),eye=Qme(OQ),tye=t=>(t*=2)<1?.5*OQ(t):.5*(2-Math.pow(2,-10*(t-1))),RQ=t=>1-Math.sin(Math.acos(t)),nye=Zme(RQ),rye=Qme(RQ),jDe=E7(.42,0,1,1),HDe=E7(0,0,.58,1),sye=E7(.42,0,.58,1),qDe=t=>Array.isArray(t)&&typeof t[0]!="number",iye=t=>Array.isArray(t)&&typeof t[0]=="number",KDe={linear:_f,easeIn:jDe,easeInOut:sye,easeOut:HDe,circIn:RQ,circInOut:rye,circOut:nye,backIn:OQ,backInOut:eye,backOut:Xme,anticipate:tye},GDe=t=>typeof t=="string",Die=t=>{if(iye(t)){kQ(t.length===4);const[e,n,r,s]=t;return E7(e,n,r,s)}else if(GDe(t))return KDe[t];return t},PP=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function WDe(t,e){let n=new Set,r=new Set,s=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(u){a.has(u)&&(l.schedule(u),t()),u(o)}const l={schedule:(u,f=!1,d=!1)=>{const g=d&&s?n:r;return f&&a.add(u),g.has(u)||g.add(u),u},cancel:u=>{r.delete(u),a.delete(u)},process:u=>{if(o=u,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,i&&(i=!1,l.process(u))}};return l}const zDe=40;function aye(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=PP.reduce((I,B)=>(I[B]=WDe(i),I),{}),{setup:o,read:c,resolveKeyframes:l,preUpdate:u,update:f,preRender:d,render:p,postRender:g}=a,m=()=>{const I=Hg.useManualTiming?s.timestamp:performance.now();n=!1,Hg.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(I-s.timestamp,zDe),1)),s.timestamp=I,s.isProcessing=!0,o.process(s),c.process(s),l.process(s),u.process(s),f.process(s),d.process(s),p.process(s),g.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(m))},v=()=>{n=!0,r=!0,s.isProcessing||t(m)};return{schedule:PP.reduce((I,B)=>{const D=a[B];return I[B]=(V,O=!1,U=!1)=>(n||v(),D.schedule(V,O,U)),I},{}),cancel:I=>{for(let B=0;B<PP.length;B++)a[PP[B]].cancel(I)},state:s,steps:a}}const{schedule:Ls,cancel:lb,state:ho,steps:C$}=aye(typeof requestAnimationFrame<"u"?requestAnimationFrame:_f,!0);let CR;function JDe(){CR=void 0}const Rc={now:()=>(CR===void 0&&Rc.set(ho.isProcessing||Hg.useManualTiming?ho.timestamp:performance.now()),CR),set:t=>{CR=t,queueMicrotask(JDe)}},oye=t=>e=>typeof e=="string"&&e.startsWith(t),cye=oye("--"),YDe=oye("var(--"),_Q=t=>YDe(t)?QDe.test(t.split("/*")[0].trim()):!1,QDe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Lie(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Q5={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},FN={...Q5,transform:t=>O0(0,1,t)},OP={...Q5,default:1},zT=t=>Math.round(t*1e5)/1e5,BQ=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ZDe(t){return t==null}const XDe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,MQ=(t,e)=>n=>!!(typeof n=="string"&&XDe.test(n)&&n.startsWith(t)||e&&!ZDe(n)&&Object.prototype.hasOwnProperty.call(n,e)),lye=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,a,o]=r.match(BQ);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},eLe=t=>O0(0,255,t),T$={...Q5,transform:t=>Math.round(eLe(t))},Hv={test:MQ("rgb","red"),parse:lye("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+T$.transform(t)+", "+T$.transform(e)+", "+T$.transform(n)+", "+zT(FN.transform(r))+")"};function tLe(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const zK={test:MQ("#"),parse:tLe,transform:Hv.transform},A7=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),zm=A7("deg"),b0=A7("%"),zt=A7("px"),nLe=A7("vh"),rLe=A7("vw"),Uie={...b0,parse:t=>b0.parse(t)/100,transform:t=>b0.transform(t*100)},JS={test:MQ("hsl","hue"),parse:lye("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+b0.transform(zT(e))+", "+b0.transform(zT(n))+", "+zT(FN.transform(r))+")"},Zi={test:t=>Hv.test(t)||zK.test(t)||JS.test(t),parse:t=>Hv.test(t)?Hv.parse(t):JS.test(t)?JS.parse(t):zK.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Hv.transform(t):JS.transform(t),getAnimatableNone:t=>{const e=Zi.parse(t);return e.alpha=0,Zi.transform(e)}},sLe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function iLe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(BQ))==null?void 0:e.length)||0)+(((n=t.match(sLe))==null?void 0:n.length)||0)>0}const uye="number",fye="color",aLe="var",oLe="var(",Fie="${}",cLe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function VN(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const o=e.replace(cLe,c=>(Zi.test(c)?(r.color.push(i),s.push(fye),n.push(Zi.parse(c))):c.startsWith(oLe)?(r.var.push(i),s.push(aLe),n.push(c)):(r.number.push(i),s.push(uye),n.push(parseFloat(c))),++i,Fie)).split(Fie);return{values:n,split:o,indexes:r,types:s}}function dye(t){return VN(t).values}function hye(t){const{split:e,types:n}=VN(t),r=e.length;return s=>{let i="";for(let a=0;a<r;a++)if(i+=e[a],s[a]!==void 0){const o=n[a];o===uye?i+=zT(s[a]):o===fye?i+=Zi.transform(s[a]):i+=s[a]}return i}}const lLe=t=>typeof t=="number"?0:Zi.test(t)?Zi.getAnimatableNone(t):t;function uLe(t){const e=dye(t);return hye(t)(e.map(lLe))}const Qd={test:iLe,parse:dye,createTransformer:hye,getAnimatableNone:uLe};function N$(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function fLe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,a=0;if(!e)s=i=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;s=N$(c,o,t+1/3),i=N$(c,o,t),a=N$(c,o,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function _B(t,e){return n=>n>0?e:t}const oi=(t,e,n)=>t+(e-t)*n,k$=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},dLe=[zK,Hv,JS],hLe=t=>dLe.find(e=>e.test(t));function Vie(t){const e=hLe(t);if(!e)return!1;let n=e.parse(t);return e===JS&&(n=fLe(n)),n}const $ie=(t,e)=>{const n=Vie(t),r=Vie(e);if(!n||!r)return _B(t,e);const s={...n};return i=>(s.red=k$(n.red,r.red,i),s.green=k$(n.green,r.green,i),s.blue=k$(n.blue,r.blue,i),s.alpha=oi(n.alpha,r.alpha,i),Hv.transform(s))},JK=new Set(["none","hidden"]);function pLe(t,e){return JK.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function gLe(t,e){return n=>oi(t,e,n)}function DQ(t){return typeof t=="number"?gLe:typeof t=="string"?_Q(t)?_B:Zi.test(t)?$ie:wLe:Array.isArray(t)?pye:typeof t=="object"?Zi.test(t)?$ie:mLe:_B}function pye(t,e){const n=[...t],r=n.length,s=t.map((i,a)=>DQ(i)(i,e[a]));return i=>{for(let a=0;a<r;a++)n[a]=s[a](i);return n}}function mLe(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=DQ(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function yLe(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],a=t.indexes[i][r[i]],o=t.values[a]??0;n[s]=o,r[i]++}return n}const wLe=(t,e)=>{const n=Qd.createTransformer(e),r=VN(t),s=VN(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?JK.has(t)&&!s.values.length||JK.has(e)&&!r.values.length?pLe(t,e):x7(pye(yLe(r,s),s.values),n):_B(t,e)};function gye(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?oi(t,e,n):DQ(t)(t,e)}const bLe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ls.update(e,n),stop:()=>lb(e),now:()=>ho.isProcessing?ho.timestamp:Rc.now()}},mye=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},BB=2e4;function LQ(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<BB;)e+=n,r=t.next(e);return e>=BB?1/0:e}function vLe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(LQ(r),BB);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:Of(s)}}const xLe=5;function yye(t,e,n){const r=Math.max(e-xLe,0);return Jme(n-t(r),e-r)}const yi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},P$=.001;function ELe({duration:t=yi.duration,bounce:e=yi.bounce,velocity:n=yi.velocity,mass:r=yi.mass}){let s,i,a=1-e;a=O0(yi.minDamping,yi.maxDamping,a),t=O0(yi.minDuration,yi.maxDuration,Of(t)),a<1?(s=l=>{const u=l*a,f=u*t,d=u-n,p=YK(l,a),g=Math.exp(-f);return P$-d/p*g},i=l=>{const f=l*a*t,d=f*n+n,p=Math.pow(a,2)*Math.pow(l,2)*t,g=Math.exp(-f),m=YK(Math.pow(l,2),a);return(-s(l)+P$>0?-1:1)*((d-p)*g)/m}):(s=l=>{const u=Math.exp(-l*t),f=(l-n)*t+1;return-P$+u*f},i=l=>{const u=Math.exp(-l*t),f=(n-l)*(t*t);return u*f});const o=5/t,c=SLe(s,i,o);if(t=Yd(t),isNaN(c))return{stiffness:yi.stiffness,damping:yi.damping,duration:t};{const l=Math.pow(c,2)*r;return{stiffness:l,damping:a*2*Math.sqrt(r*l),duration:t}}}const ALe=12;function SLe(t,e,n){let r=n;for(let s=1;s<ALe;s++)r=r-t(r)/e(r);return r}function YK(t,e){return t*Math.sqrt(1-e*e)}const ILe=["duration","bounce"],CLe=["stiffness","damping","mass"];function jie(t,e){return e.some(n=>t[n]!==void 0)}function TLe(t){let e={velocity:yi.velocity,stiffness:yi.stiffness,damping:yi.damping,mass:yi.mass,isResolvedFromDuration:!1,...t};if(!jie(t,CLe)&&jie(t,ILe))if(e.velocity=0,t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*O0(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:yi.mass,stiffness:s,damping:i}}else{const n=ELe({...t,velocity:0});e={...e,...n,mass:yi.mass},e.isResolvedFromDuration=!0}return e}function MB(t=yi.visualDuration,e=yi.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:c,damping:l,mass:u,duration:f,velocity:d,isResolvedFromDuration:p}=TLe({...n,velocity:-Of(n.velocity||0)}),g=d||0,m=l/(2*Math.sqrt(c*u)),v=a-i,A=Of(Math.sqrt(c/u)),S=Math.abs(v)<5;r||(r=S?yi.restSpeed.granular:yi.restSpeed.default),s||(s=S?yi.restDelta.granular:yi.restDelta.default);let I;if(m<1){const D=YK(A,m);I=V=>{const O=Math.exp(-m*A*V);return a-O*((g+m*A*v)/D*Math.sin(D*V)+v*Math.cos(D*V))}}else if(m===1)I=D=>a-Math.exp(-A*D)*(v+(g+A*v)*D);else{const D=A*Math.sqrt(m*m-1);I=V=>{const O=Math.exp(-m*A*V),U=Math.min(D*V,300);return a-O*((g+m*A*v)*Math.sinh(U)+D*v*Math.cosh(U))/D}}const B={calculatedDuration:p&&f||null,next:D=>{const V=I(D);if(p)o.done=D>=f;else{let O=D===0?g:0;m<1&&(O=D===0?Yd(g):yye(I,D,V));const U=Math.abs(O)<=r,Q=Math.abs(a-V)<=s;o.done=U&&Q}return o.value=o.done?a:V,o},toString:()=>{const D=Math.min(LQ(B),BB),V=mye(O=>B.next(D*O).value,D,30);return D+"ms "+V},toTransition:()=>{}};return B}MB.applyToOptions=t=>{const e=vLe(t,100,MB);return t.ease=e.ease,t.duration=Yd(e.duration),t.type="keyframes",t};function QK({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:o,max:c,restDelta:l=.5,restSpeed:u}){const f=t[0],d={done:!1,value:f},p=U=>o!==void 0&&U<o||c!==void 0&&U>c,g=U=>o===void 0?c:c===void 0||Math.abs(o-U)<Math.abs(c-U)?o:c;let m=n*e;const v=f+m,A=a===void 0?v:a(v);A!==v&&(m=A-f);const S=U=>-m*Math.exp(-U/r),I=U=>A+S(U),B=U=>{const Q=S(U),ie=I(U);d.done=Math.abs(Q)<=l,d.value=d.done?A:ie};let D,V;const O=U=>{p(d.value)&&(D=U,V=MB({keyframes:[d.value,g(d.value)],velocity:yye(I,U,d.value),damping:s,stiffness:i,restDelta:l,restSpeed:u}))};return O(0),{calculatedDuration:null,next:U=>{let Q=!1;return!V&&D===void 0&&(Q=!0,B(U),O(U)),D!==void 0&&U>=D?V.next(U-D):(!Q&&B(U),d)}}}function NLe(t,e,n){const r=[],s=n||Hg.mix||gye,i=t.length-1;for(let a=0;a<i;a++){let o=s(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||_f:e;o=x7(c,o)}r.push(o)}return r}function kLe(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(kQ(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=NLe(e,r,s),c=o.length,l=u=>{if(a&&u<t[0])return e[0];let f=0;if(c>1)for(;f<t.length-2&&!(u<t[f+1]);f++);const d=UN(t[f],t[f+1],u);return o[f](d)};return n?u=>l(O0(t[0],t[i-1],u)):l}function PLe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=UN(0,e,r);t.push(oi(n,1,s))}}function OLe(t){const e=[0];return PLe(e,t.length-1),e}function RLe(t,e){return t.map(n=>n*e)}function _Le(t,e){return t.map(()=>e||sye).splice(0,t.length-1)}function JT({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=qDe(r)?r.map(Die):Die(r),i={done:!1,value:e[0]},a=RLe(n&&n.length===e.length?n:OLe(e),t),o=kLe(a,e,{ease:Array.isArray(s)?s:_Le(e,s)});return{calculatedDuration:t,next:c=>(i.value=o(c),i.done=c>=t,i)}}const BLe=t=>t!==null;function UQ(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(BLe),o=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const MLe={decay:QK,inertia:QK,tween:JT,keyframes:JT,spring:MB};function wye(t){typeof t.type=="string"&&(t.type=MLe[t.type])}class FQ{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const DLe=t=>t/100;class VQ extends FQ{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Rc.now()&&this.tick(Rc.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;wye(e);const{type:n=JT,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=e;let{keyframes:o}=e;const c=n||JT;c!==JT&&typeof o[0]!="number"&&(this.mixKeyframes=x7(DLe,gye(o[0],o[1])),o=[0,100]);const l=c({...e,keyframes:o});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-a})),l.calculatedDuration===null&&(l.calculatedDuration=LQ(l));const{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=l}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:l=0,keyframes:u,repeat:f,repeatType:d,repeatDelay:p,type:g,onUpdate:m,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const A=this.currentTime-l*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?A<0:A>s;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let I=this.currentTime,B=r;if(f){const U=Math.min(this.currentTime,s)/o;let Q=Math.floor(U),ie=U%1;!ie&&U>=1&&(ie=1),ie===1&&Q--,Q=Math.min(Q,f+1),!!(Q%2)&&(d==="reverse"?(ie=1-ie,p&&(ie-=p/o)):d==="mirror"&&(B=a)),I=O0(0,1,ie)*o}const D=S?{done:!1,value:u[0]}:B.next(I);i&&(D.value=i(D.value));let{done:V}=D;!S&&c!==null&&(V=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return O&&g!==QK&&(D.value=UQ(u,this.options,v,this.speed)),m&&m(D.value),O&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return Of(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Of(e)}get time(){return Of(this.currentTime)}set time(e){var n;e=Yd(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Rc.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Of(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=bLe,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Rc.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function LLe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const qv=t=>t*180/Math.PI,ZK=t=>{const e=qv(Math.atan2(t[1],t[0]));return XK(e)},ULe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ZK,rotateZ:ZK,skewX:t=>qv(Math.atan(t[1])),skewY:t=>qv(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},XK=t=>(t=t%360,t<0&&(t+=360),t),Hie=ZK,qie=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Kie=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),FLe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:qie,scaleY:Kie,scale:t=>(qie(t)+Kie(t))/2,rotateX:t=>XK(qv(Math.atan2(t[6],t[5]))),rotateY:t=>XK(qv(Math.atan2(-t[2],t[0]))),rotateZ:Hie,rotate:Hie,skewX:t=>qv(Math.atan(t[4])),skewY:t=>qv(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function eG(t){return t.includes("scale")?1:0}function tG(t,e){if(!t||t==="none")return eG(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=FLe,s=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=ULe,s=o}if(!s)return eG(e);const i=r[e],a=s[1].split(",").map($Le);return typeof i=="function"?i(a):a[i]}const VLe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return tG(n,e)};function $Le(t){return parseFloat(t.trim())}const Z5=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],X5=new Set(Z5),Gie=t=>t===Q5||t===zt,jLe=new Set(["x","y","z"]),HLe=Z5.filter(t=>!jLe.has(t));function qLe(t){const e=[];return HLe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const xw={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>tG(e,"x"),y:(t,{transform:e})=>tG(e,"y")};xw.translateX=xw.x;xw.translateY=xw.y;const _x=new Set;let nG=!1,rG=!1,sG=!1;function bye(){if(rG){const t=Array.from(_x).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=qLe(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,a])=>{var o;(o=r.getValue(i))==null||o.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}rG=!1,nG=!1,_x.forEach(t=>t.complete(sG)),_x.clear()}function vye(){_x.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(rG=!0)})}function KLe(){sG=!0,vye(),bye(),sG=!1}class $Q{constructor(e,n,r,s,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(_x.add(this),nG||(nG=!0,Ls.read(vye),Ls.resolveKeyframes(bye))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const o=r.readValue(n,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),s&&i===void 0&&s.set(e[0])}LLe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),_x.delete(this)}cancel(){this.state==="scheduled"&&(_x.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const GLe=t=>t.startsWith("--");function WLe(t,e,n){GLe(e)?t.style.setProperty(e,n):t.style[e]=n}const zLe={};function xye(t,e){const n=zme(t);return()=>zLe[e]??n()}const JLe=xye(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),Eye=xye(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),pI=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Wie={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:pI([0,.65,.55,1]),circOut:pI([.55,0,1,.45]),backIn:pI([.31,.01,.66,-.59]),backOut:pI([.33,1.53,.69,.99])};function Aye(t,e){if(t)return typeof t=="function"?Eye()?mye(t,e):"ease-out":iye(t)?pI(t):Array.isArray(t)?t.map(n=>Aye(n,e)||Wie.easeOut):Wie[t]}function YLe(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:o="easeOut",times:c}={},l=void 0){const u={[e]:n};c&&(u.offset=c);const f=Aye(o,s);Array.isArray(f)&&(u.easing=f);const d={delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return l&&(d.pseudoElement=l),t.animate(u,d)}function Sye(t){return typeof t=="function"&&"applyToOptions"in t}function QLe({type:t,...e}){return Sye(t)&&Eye()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Iye extends FQ{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=e,kQ(typeof e.type!="string");const l=QLe(e);this.animation=YLe(n,r,s,l,i),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=UQ(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(u):WLe(n,r,u),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,s;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((s=(r=this.animation).commitStyles)==null||s.call(r))}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Of(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Of(e)}get time(){return Of(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Yd(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&JLe()?(this.animation.timeline=e,_f):n(this)}}const Cye={anticipate:tye,backInOut:eye,circInOut:rye};function ZLe(t){return t in Cye}function XLe(t){typeof t.ease=="string"&&ZLe(t.ease)&&(t.ease=Cye[t.ease])}const O$=10;class eUe extends Iye{constructor(e){XLe(e),wye(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new VQ({...a,autoplay:!1}),c=Math.max(O$,Rc.now()-this.startTime),l=O0(0,O$,c-O$);n.setWithVelocity(o.sample(Math.max(0,c-l)).value,o.sample(c).value,l),o.stop()}}const zie=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Qd.test(t)||t==="0")&&!t.startsWith("url("));function tUe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function nUe(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],a=zie(s,e),o=zie(i,e);return!a||!o?!1:tUe(t)||(n==="spring"||Sye(n))&&r}function iG(t){t.duration=0,t.type="keyframes"}const rUe=new Set(["opacity","clipPath","filter","transform"]),sUe=zme(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function iUe(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:a}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:l}=e.owner.getProps();return sUe()&&n&&rUe.has(n)&&(n!=="transform"||!l)&&!c&&!r&&s!=="mirror"&&i!==0&&a!=="inertia"}const aUe=40;class oUe extends FQ{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",keyframes:o,name:c,motionValue:l,element:u,...f}){var g;super(),this.stop=()=>{var m,v;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=Rc.now();const d={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:a,name:c,motionValue:l,element:u,...f},p=(u==null?void 0:u.KeyframeResolver)||$Q;this.keyframeResolver=new p(o,(m,v,A)=>this.onKeyframesResolved(m,v,d,!A),c,l,u),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(e,n,r,s){var v,A;this.keyframeResolver=void 0;const{name:i,type:a,velocity:o,delay:c,isHandoff:l,onUpdate:u}=r;this.resolvedAt=Rc.now(),nUe(e,i,a,o)||((Hg.instantAnimations||!c)&&(u==null||u(UQ(e,r,n))),e[0]=e[e.length-1],iG(r),r.repeat=0);const d={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>aUe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!l&&iUe(d),g=(A=(v=d.motionValue)==null?void 0:v.owner)==null?void 0:A.current,m=p?new eUe({...d,element:g}):new VQ(d);m.finished.then(()=>{this.notifyFinished()}).catch(_f),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),KLe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function Tye(t,e,n,r=0,s=1){const i=Array.from(t).sort((l,u)=>l.sortNodePosition(u)).indexOf(e),a=t.size,o=(a-1)*r;return typeof n=="function"?n(i,a):s===1?i*r:o-i*r}const cUe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function lUe(t){const e=cUe.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function Nye(t,e,n=1){const[r,s]=lUe(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const a=i.trim();return Kme(a)?parseFloat(a):a}return _Q(s)?Nye(s,e,n+1):s}const uUe={type:"spring",stiffness:500,damping:25,restSpeed:10},fUe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),dUe={type:"keyframes",duration:.8},hUe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pUe=(t,{keyframes:e})=>e.length>2?dUe:X5.has(t)?t.startsWith("scale")?fUe(e[1]):uUe:hUe,gUe=t=>t!==null;function mUe(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(gUe),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[i]}function kye(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...r}=t;return{...e,...r}}return t}function jQ(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?kye(n,t):n}function yUe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:o,from:c,elapsed:l,...u}){return!!Object.keys(u).length}const HQ=(t,e,n,r={},s,i)=>a=>{const o=jQ(r,t)||{},c=o.delay||r.delay||0;let{elapsed:l=0}=r;l=l-Yd(c);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-l,onUpdate:d=>{e.set(d),o.onUpdate&&o.onUpdate(d)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:i?void 0:s};yUe(o)||Object.assign(u,pUe(t,u)),u.duration&&(u.duration=Yd(u.duration)),u.repeatDelay&&(u.repeatDelay=Yd(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(iG(u),u.delay===0&&(f=!0)),(Hg.instantAnimations||Hg.skipAnimations||s!=null&&s.shouldSkipAnimations)&&(f=!0,iG(u),u.delay=0),u.allowFlatten=!o.type&&!o.ease,f&&!i&&e.get()!==void 0){const d=mUe(u.keyframes,o);if(d!==void 0){Ls.update(()=>{u.onUpdate(d),u.onComplete()});return}}return o.isSync?new VQ(u):new oUe(u)};function Jie(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function qQ(t,e,n,r){if(typeof e=="function"){const[s,i]=Jie(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=Jie(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function I3(t,e,n){const r=t.getProps();return qQ(r,e,n!==void 0?n:r.custom,t)}const Pye=new Set(["width","height","top","left","right","bottom",...Z5]),Yie=30,wUe=t=>!isNaN(parseFloat(t));class bUe{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=Rc.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Rc.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=wUe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new PQ);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ls.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Rc.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Yie)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Yie);return Jme(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function n5(t,e){return new bUe(t,e)}const aG=t=>Array.isArray(t);function vUe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,n5(n))}function xUe(t){return aG(t)?t[t.length-1]||0:t}function EUe(t,e){const n=I3(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i){const o=xUe(i[a]);vUe(t,a,o)}}const sc=t=>!!(t&&t.getVelocity);function AUe(t){return!!(sc(t)&&t.add)}function oG(t,e){const n=t.getValue("willChange");if(AUe(n))return n.add(e);if(!n&&Hg.WillChange){const r=new Hg.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function KQ(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const SUe="framerAppearId",Oye="data-"+KQ(SUe);function Rye(t){return t.props[Oye]}function IUe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function _ye(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i,transitionEnd:a,...o}=e;const c=t.getDefaultTransition();i=i?kye(i,c):c;const l=i==null?void 0:i.reduceMotion;r&&(i=r);const u=[],f=s&&t.animationState&&t.animationState.getState()[s];for(const d in o){const p=t.getValue(d,t.latestValues[d]??null),g=o[d];if(g===void 0||f&&IUe(f,d))continue;const m={delay:n,...jQ(i||{},d)},v=p.get();if(v!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===v&&!m.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const B=Rye(t);if(B){const D=window.MotionHandoffAnimation(B,d,Ls);D!==null&&(m.startTime=D,A=!0)}}oG(t,d);const S=l??t.shouldReduceMotion;p.start(HQ(d,p,g,S&&Pye.has(d)?{type:!1}:m,t,A));const I=p.animation;I&&u.push(I)}if(a){const d=()=>Ls.update(()=>{a&&EUe(t,a)});u.length?Promise.all(u).then(d):d()}return u}function cG(t,e,n={}){var c;const r=I3(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(_ye(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:d}=s;return CUe(t,e,l,u,f,d,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[l,u]=o==="beforeChildren"?[i,a]:[a,i];return l().then(()=>u())}else return Promise.all([i(),a(n.delay)])}function CUe(t,e,n=0,r=0,s=0,i=1,a){const o=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),o.push(cG(c,e,{...a,delay:n+(typeof r=="function"?0:r)+Tye(t.variantChildren,c,r,s,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(o)}function TUe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>cG(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=cG(t,e,n);else{const s=typeof e=="function"?I3(t,e,n.custom):e;r=Promise.all(_ye(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const NUe={test:t=>t==="auto",parse:t=>t},Bye=t=>e=>e.test(t),Mye=[Q5,zt,b0,zm,rLe,nLe,NUe],Qie=t=>Mye.find(Bye(t));function kUe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Wme(t):!0}const PUe=new Set(["brightness","contrast","saturate","opacity"]);function OUe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(BQ)||[];if(!r)return t;const s=n.replace(r,"");let i=PUe.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const RUe=/\b([a-z-]*)\(.*?\)/gu,lG={...Qd,getAnimatableNone:t=>{const e=t.match(RUe);return e?e.map(OUe).join(" "):t}},uG={...Qd,getAnimatableNone:t=>{const e=Qd.parse(t);return Qd.createTransformer(t)(e.map(r=>typeof r=="number"?0:typeof r=="object"?{...r,alpha:1}:r))}},Zie={...Q5,transform:Math.round},_Ue={rotate:zm,rotateX:zm,rotateY:zm,rotateZ:zm,scale:OP,scaleX:OP,scaleY:OP,scaleZ:OP,skew:zm,skewX:zm,skewY:zm,distance:zt,translateX:zt,translateY:zt,translateZ:zt,x:zt,y:zt,z:zt,perspective:zt,transformPerspective:zt,opacity:FN,originX:Uie,originY:Uie,originZ:zt},GQ={borderWidth:zt,borderTopWidth:zt,borderRightWidth:zt,borderBottomWidth:zt,borderLeftWidth:zt,borderRadius:zt,borderTopLeftRadius:zt,borderTopRightRadius:zt,borderBottomRightRadius:zt,borderBottomLeftRadius:zt,width:zt,maxWidth:zt,height:zt,maxHeight:zt,top:zt,right:zt,bottom:zt,left:zt,inset:zt,insetBlock:zt,insetBlockStart:zt,insetBlockEnd:zt,insetInline:zt,insetInlineStart:zt,insetInlineEnd:zt,padding:zt,paddingTop:zt,paddingRight:zt,paddingBottom:zt,paddingLeft:zt,paddingBlock:zt,paddingBlockStart:zt,paddingBlockEnd:zt,paddingInline:zt,paddingInlineStart:zt,paddingInlineEnd:zt,margin:zt,marginTop:zt,marginRight:zt,marginBottom:zt,marginLeft:zt,marginBlock:zt,marginBlockStart:zt,marginBlockEnd:zt,marginInline:zt,marginInlineStart:zt,marginInlineEnd:zt,fontSize:zt,backgroundPositionX:zt,backgroundPositionY:zt,..._Ue,zIndex:Zie,fillOpacity:FN,strokeOpacity:FN,numOctaves:Zie},BUe={...GQ,color:Zi,backgroundColor:Zi,outlineColor:Zi,fill:Zi,stroke:Zi,borderColor:Zi,borderTopColor:Zi,borderRightColor:Zi,borderBottomColor:Zi,borderLeftColor:Zi,filter:lG,WebkitFilter:lG,mask:uG,WebkitMask:uG},Dye=t=>BUe[t],MUe=new Set([lG,uG]);function Lye(t,e){let n=Dye(t);return MUe.has(n)||(n=Qd),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const DUe=new Set(["auto","none","0"]);function LUe(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!DUe.has(i)&&VN(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=Lye(n,s)}class UUe extends $Q{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let f=e[u];if(typeof f=="string"&&(f=f.trim(),_Q(f))){const d=Nye(f,n.current);d!==void 0&&(e[u]=d),u===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Pye.has(r)||e.length!==2)return;const[s,i]=e,a=Qie(s),o=Qie(i),c=Lie(s),l=Lie(i);if(c!==l&&xw[r]){this.needsMeasurement=!0;return}if(a!==o)if(Gie(a)&&Gie(o))for(let u=0;u<e.length;u++){const f=e[u];typeof f=="string"&&(e[u]=parseFloat(f))}else xw[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||kUe(e[s]))&&r.push(s);r.length&&LUe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xw[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,a=r[i];r[i]=xw[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([c,l])=>{e.getValue(c).set(l)}),this.resolveNoneKeyframes()}}const FUe=new Set(["opacity","clipPath","filter","transform"]);function Uye(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t).filter(r=>r!=null)}const Fye=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function fG(t){return Gme(t)&&"offsetHeight"in t}const{schedule:WQ}=aye(queueMicrotask,!1),yd={x:!1,y:!1};function Vye(){return yd.x||yd.y}function VUe(t){return t==="x"||t==="y"?yd[t]?null:(yd[t]=!0,()=>{yd[t]=!1}):yd.x||yd.y?null:(yd.x=yd.y=!0,()=>{yd.x=yd.y=!1})}function $ye(t,e){const n=Uye(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function $Ue(t){return!(t.pointerType==="touch"||Vye())}function jUe(t,e,n={}){const[r,s,i]=$ye(t,n);return r.forEach(a=>{let o=!1,c=!1,l;const u=()=>{a.removeEventListener("pointerleave",g)},f=v=>{l&&(l(v),l=void 0),u()},d=v=>{o=!1,window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",d),c&&(c=!1,f(v))},p=()=>{o=!0,window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",d,s)},g=v=>{if(v.pointerType!=="touch"){if(o){c=!0;return}f(v)}},m=v=>{if(!$Ue(v))return;c=!1;const A=e(a,v);typeof A=="function"&&(l=A,a.addEventListener("pointerleave",g,s))};a.addEventListener("pointerenter",m,s),a.addEventListener("pointerdown",p,s)}),i}const jye=(t,e)=>e?t===e?!0:jye(t,e.parentElement):!1,zQ=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,HUe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qUe(t){return HUe.has(t.tagName)||t.isContentEditable===!0}const KUe=new Set(["INPUT","SELECT","TEXTAREA"]);function GUe(t){return KUe.has(t.tagName)||t.isContentEditable===!0}const TR=new WeakSet;function Xie(t){return e=>{e.key==="Enter"&&t(e)}}function R$(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const WUe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Xie(()=>{if(TR.has(n))return;R$(n,"down");const s=Xie(()=>{R$(n,"up")}),i=()=>R$(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function eae(t){return zQ(t)&&!Vye()}const tae=new WeakSet;function zUe(t,e,n={}){const[r,s,i]=$ye(t,n),a=o=>{const c=o.currentTarget;if(!eae(o)||tae.has(o))return;TR.add(c),n.stopPropagation&&tae.add(o);const l=e(c,o),u=(p,g)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",d),TR.has(c)&&TR.delete(c),eae(p)&&typeof l=="function"&&l(p,{success:g})},f=p=>{u(p,c===window||c===document||n.useGlobalTarget||jye(c,p.target))},d=p=>{u(p,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",d,s)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,s),fG(o)&&(o.addEventListener("focus",l=>WUe(l,s)),!qUe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),i}function JQ(t){return Gme(t)&&"ownerSVGElement"in t}const NR=new WeakMap;let Jm;const Hye=(t,e,n)=>(r,s)=>s&&s[0]?s[0][t+"Size"]:JQ(r)&&"getBBox"in r?r.getBBox()[e]:r[n],JUe=Hye("inline","width","offsetWidth"),YUe=Hye("block","height","offsetHeight");function QUe({target:t,borderBoxSize:e}){var n;(n=NR.get(t))==null||n.forEach(r=>{r(t,{get width(){return JUe(t,e)},get height(){return YUe(t,e)}})})}function ZUe(t){t.forEach(QUe)}function XUe(){typeof ResizeObserver>"u"||(Jm=new ResizeObserver(ZUe))}function eFe(t,e){Jm||XUe();const n=Uye(t);return n.forEach(r=>{let s=NR.get(r);s||(s=new Set,NR.set(r,s)),s.add(e),Jm==null||Jm.observe(r)}),()=>{n.forEach(r=>{const s=NR.get(r);s==null||s.delete(e),s!=null&&s.size||Jm==null||Jm.unobserve(r)})}}const kR=new Set;let YS;function tFe(){YS=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};kR.forEach(e=>e(t))},window.addEventListener("resize",YS)}function nFe(t){return kR.add(t),YS||tFe(),()=>{kR.delete(t),!kR.size&&typeof YS=="function"&&(window.removeEventListener("resize",YS),YS=void 0)}}function nae(t,e){return typeof t=="function"?nFe(t):eFe(t,e)}function rFe(t){return JQ(t)&&t.tagName==="svg"}const sFe=[...Mye,Zi,Qd],iFe=t=>sFe.find(Bye(t)),rae=()=>({translate:0,scale:1,origin:0,originPoint:0}),QS=()=>({x:rae(),y:rae()}),sae=()=>({min:0,max:0}),ga=()=>({x:sae(),y:sae()}),aFe=new WeakMap;function nL(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function $N(t){return typeof t=="string"||Array.isArray(t)}const YQ=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],QQ=["initial",...YQ];function rL(t){return nL(t.animate)||QQ.some(e=>$N(t[e]))}function qye(t){return!!(rL(t)||t.variants)}function oFe(t,e,n){for(const r in e){const s=e[r],i=n[r];if(sc(s))t.addValue(r,s);else if(sc(i))t.addValue(r,n5(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,n5(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const dG={current:null},Kye={current:!1},cFe=typeof window<"u";function lFe(){if(Kye.current=!0,!!cFe)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>dG.current=t.matches;t.addEventListener("change",e),e()}else dG.current=!1}const iae=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let DB={};function Gye(t){DB=t}function uFe(){return DB}class fFe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,skipAnimations:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=$Q,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Rc.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ls.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=rL(n),this.isVariantNode=qye(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in d){const g=d[p];l[p]!==void 0&&sc(g)&&g.set(l[p])}}mount(e){var n,r;if(this.hasBeenMounted)for(const s in this.initialValues)(n=this.values.get(s))==null||n.jump(this.initialValues[s]),this.latestValues[s]=this.initialValues[s];this.current=e,aFe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,i)=>this.bindToMotionValue(i,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(Kye.current||lFe(),this.shouldReduceMotion=dG.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),lb(this.notifyUpdate),lb(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&FUe.has(e)&&this.current instanceof HTMLElement){const{factory:a,keyframes:o,times:c,ease:l,duration:u}=n.accelerate,f=new Iye({element:this.current,name:e,keyframes:o,times:c,ease:l,duration:Yd(u)}),d=a(f);this.valueSubscriptions.set(e,()=>{d(),f.cancel()});return}const r=X5.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ls.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;typeof window<"u"&&window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in DB){const n=DB[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ga()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<iae.length;r++){const s=iae[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=e[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=oFe(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=n5(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Kme(r)||Wme(r))?r=parseFloat(r):!iFe(r)&&Qd.test(n)&&(r=Lye(e,n)),this.setBaseTarget(e,sc(r)?r.get():r)),sc(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=qQ(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!sc(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new PQ),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){WQ.render(this.render)}}class Wye extends fFe{constructor(){super(...arguments),this.KeyframeResolver=UUe}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;sc(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Nb{constructor(e){this.isMounted=!1,this.node=e}update(){}}function zye({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function dFe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function hFe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function _$(t){return t===void 0||t===1}function hG({scale:t,scaleX:e,scaleY:n}){return!_$(t)||!_$(e)||!_$(n)}function v1(t){return hG(t)||Jye(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Jye(t){return aae(t.x)||aae(t.y)}function aae(t){return t&&t!=="0%"}function LB(t,e,n){const r=t-n,s=e*r;return n+s}function oae(t,e,n,r,s){return s!==void 0&&(t=LB(t,s,r)),LB(t,n,r)+e}function pG(t,e=0,n=1,r,s){t.min=oae(t.min,e,n,r,s),t.max=oae(t.max,e,n,r,s)}function Yye(t,{x:e,y:n}){pG(t.x,e.translate,e.scale,e.originPoint),pG(t.y,n.translate,n.scale,n.originPoint)}const cae=.999999999999,lae=1.0000000000001;function pFe(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,a;for(let o=0;o<s;o++){i=n[o],a=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&XS(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,Yye(t,a)),r&&v1(i.latestValues)&&XS(t,i.latestValues))}e.x<lae&&e.x>cae&&(e.x=1),e.y<lae&&e.y>cae&&(e.y=1)}function ZS(t,e){t.min=t.min+e,t.max=t.max+e}function uae(t,e,n,r,s=.5){const i=oi(t.min,t.max,s);pG(t,e,n,i,r)}function XS(t,e){uae(t.x,e.x,e.scaleX,e.scale,e.originX),uae(t.y,e.y,e.scaleY,e.scale,e.originY)}function Qye(t,e){return zye(hFe(t.getBoundingClientRect(),e))}function gFe(t,e,n){const r=Qye(t,n),{scroll:s}=e;return s&&(ZS(r.x,s.offset.x),ZS(r.y,s.offset.y)),r}const mFe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yFe=Z5.length;function wFe(t,e,n){let r="",s=!0;for(let i=0;i<yFe;i++){const a=Z5[i],o=t[a];if(o===void 0)continue;let c=!0;if(typeof o=="number")c=o===(a.startsWith("scale")?1:0);else{const l=parseFloat(o);c=a.startsWith("scale")?l===1:l===0}if(!c||n){const l=Fye(o,GQ[a]);if(!c){s=!1;const u=mFe[a]||a;r+=`${u}(${l}) `}n&&(e[a]=l)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function ZQ(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let a=!1,o=!1;for(const c in e){const l=e[c];if(X5.has(c)){a=!0;continue}else if(cye(c)){s[c]=l;continue}else{const u=Fye(l,GQ[c]);c.startsWith("origin")?(o=!0,i[c]=u):r[c]=u}}if(e.transform||(a||n?r.transform=wFe(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:l="50%",originZ:u=0}=i;r.transformOrigin=`${c} ${l} ${u}`}}function Zye(t,{style:e,vars:n},r,s){const i=t.style;let a;for(a in e)i[a]=e[a];s==null||s.applyProjectionStyles(i,r);for(a in n)i.setProperty(a,n[a])}function fae(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const v8={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(zt.test(t))t=parseFloat(t);else return t;const n=fae(t,e.target.x),r=fae(t,e.target.y);return`${n}% ${r}%`}},bFe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Qd.parse(t);if(s.length>5)return r;const i=Qd.createTransformer(t),a=typeof s[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;s[0+a]/=o,s[1+a]/=c;const l=oi(o,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=l),typeof s[3+a]=="number"&&(s[3+a]/=l),i(s)}},gG={borderRadius:{...v8,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:v8,borderTopRightRadius:v8,borderBottomLeftRadius:v8,borderBottomRightRadius:v8,boxShadow:bFe};function Xye(t,{layout:e,layoutId:n}){return X5.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!gG[t]||t==="opacity")}function XQ(t,e,n){var a;const r=t.style,s=e==null?void 0:e.style,i={};if(!r)return i;for(const o in r)(sc(r[o])||s&&sc(s[o])||Xye(o,t)||((a=n==null?void 0:n.getValue(o))==null?void 0:a.liveStyle)!==void 0)&&(i[o]=r[o]);return i}function vFe(t){return window.getComputedStyle(t)}class xFe extends Wye{constructor(){super(...arguments),this.type="html",this.renderInstance=Zye}readValueFromInstance(e,n){var r;if(X5.has(n))return(r=this.projection)!=null&&r.isProjecting?eG(n):VLe(e,n);{const s=vFe(e),i=(cye(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Qye(e,n)}build(e,n,r){ZQ(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return XQ(e,n,r)}}const EFe={offset:"stroke-dashoffset",array:"stroke-dasharray"},AFe={offset:"strokeDashoffset",array:"strokeDasharray"};function SFe(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?EFe:AFe;t[i.offset]=`${-r}`,t[i.array]=`${e} ${n}`}const IFe=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function ewe(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:a=0,...o},c,l,u){if(ZQ(t,o,l),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:d}=t;f.transform&&(d.transform=f.transform,delete f.transform),(d.transform||f.transformOrigin)&&(d.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),d.transform&&(d.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete f.transformBox);for(const p of IFe)f[p]!==void 0&&(d[p]=f[p],delete f[p]);e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&SFe(f,s,i,a,!1)}const twe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),nwe=t=>typeof t=="string"&&t.toLowerCase()==="svg";function CFe(t,e,n,r){Zye(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(twe.has(s)?s:KQ(s),e.attrs[s])}function rwe(t,e,n){const r=XQ(t,e,n);for(const s in t)if(sc(t[s])||sc(e[s])){const i=Z5.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}class TFe extends Wye{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ga}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(X5.has(n)){const r=Dye(n);return r&&r.default||0}return n=twe.has(n)?n:KQ(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return rwe(e,n,r)}build(e,n,r){ewe(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){CFe(e,n,r,s)}mount(e){this.isSVGTag=nwe(e.tagName),super.mount(e)}}const NFe=QQ.length;function swe(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?swe(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<NFe;n++){const r=QQ[n],s=t.props[r];($N(s)||s===!1)&&(e[r]=s)}return e}function iwe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const kFe=[...YQ].reverse(),PFe=YQ.length;function OFe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>TUe(t,n,r)))}function RFe(t){let e=OFe(t),n=dae(),r=!0;const s=c=>(l,u)=>{var d;const f=I3(t,u,c==="exit"?(d=t.presenceContext)==null?void 0:d.custom:void 0);if(f){const{transition:p,transitionEnd:g,...m}=f;l={...l,...m,...g}}return l};function i(c){e=c(t)}function a(c){const{props:l}=t,u=swe(t.parent)||{},f=[],d=new Set;let p={},g=1/0;for(let v=0;v<PFe;v++){const A=kFe[v],S=n[A],I=l[A]!==void 0?l[A]:u[A],B=$N(I),D=A===c?S.isActive:null;D===!1&&(g=v);let V=I===u[A]&&I!==l[A]&&B;if(V&&r&&t.manuallyAnimateOnMount&&(V=!1),S.protectedKeys={...p},!S.isActive&&D===null||!I&&!S.prevProp||nL(I)||typeof I=="boolean")continue;if(A==="exit"&&S.isActive&&D!==!0){S.prevResolvedValues&&(p={...p,...S.prevResolvedValues});continue}const O=_Fe(S.prevProp,I);let U=O||A===c&&S.isActive&&!V&&B||v>g&&B,Q=!1;const ie=Array.isArray(I)?I:[I];let G=ie.reduce(s(A),{});D===!1&&(G={});const{prevResolvedValues:R={}}=S,k={...R,...G},b=L=>{U=!0,d.has(L)&&(Q=!0,d.delete(L)),S.needsAnimating[L]=!0;const C=t.getValue(L);C&&(C.liveStyle=!1)};for(const L in k){const C=G[L],T=R[L];if(p.hasOwnProperty(L))continue;let E=!1;aG(C)&&aG(T)?E=!iwe(C,T):E=C!==T,E?C!=null?b(L):d.add(L):C!==void 0&&d.has(L)?b(L):S.protectedKeys[L]=!0}S.prevProp=I,S.prevResolvedValues=G,S.isActive&&(p={...p,...G}),r&&t.blockInitialAnimation&&(U=!1);const w=V&&O;U&&(!w||Q)&&f.push(...ie.map(L=>{const C={type:A};if(typeof L=="string"&&r&&!w&&t.manuallyAnimateOnMount&&t.parent){const{parent:T}=t,E=I3(T,L);if(T.enteringChildren&&E){const{delayChildren:P}=E.transition||{};C.delay=Tye(T.enteringChildren,t,P)}}return{animation:L,options:C}}))}if(d.size){const v={};if(typeof l.initial!="boolean"){const A=I3(t,Array.isArray(l.initial)?l.initial[0]:l.initial);A&&A.transition&&(v.transition=A.transition)}d.forEach(A=>{const S=t.getBaseTarget(A),I=t.getValue(A);I&&(I.liveStyle=!0),v[A]=S??null}),f.push({animation:v})}let m=!!f.length;return r&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(f):Promise.resolve()}function o(c,l){var f;if(n[c].isActive===l)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(d=>{var p;return(p=d.animationState)==null?void 0:p.setActive(c,l)}),n[c].isActive=l;const u=a(c);for(const d in n)n[d].protectedKeys={};return u}return{animateChanges:a,setActive:o,setAnimateFunction:i,getState:()=>n,reset:()=>{n=dae()}}}function _Fe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!iwe(e,t):!1}function a1(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function dae(){return{animate:a1(!0),whileInView:a1(),whileHover:a1(),whileTap:a1(),whileDrag:a1(),whileFocus:a1(),exit:a1()}}function hae(t,e){t.min=e.min,t.max=e.max}function od(t,e){hae(t.x,e.x),hae(t.y,e.y)}function pae(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const awe=1e-4,BFe=1-awe,MFe=1+awe,owe=.01,DFe=0-owe,LFe=0+owe;function _c(t){return t.max-t.min}function UFe(t,e,n){return Math.abs(t-e)<=n}function gae(t,e,n,r=.5){t.origin=r,t.originPoint=oi(e.min,e.max,t.origin),t.scale=_c(n)/_c(e),t.translate=oi(n.min,n.max,t.origin)-t.originPoint,(t.scale>=BFe&&t.scale<=MFe||isNaN(t.scale))&&(t.scale=1),(t.translate>=DFe&&t.translate<=LFe||isNaN(t.translate))&&(t.translate=0)}function YT(t,e,n,r){gae(t.x,e.x,n.x,r?r.originX:void 0),gae(t.y,e.y,n.y,r?r.originY:void 0)}function mae(t,e,n){t.min=n.min+e.min,t.max=t.min+_c(e)}function FFe(t,e,n){mae(t.x,e.x,n.x),mae(t.y,e.y,n.y)}function yae(t,e,n){t.min=e.min-n.min,t.max=t.min+_c(e)}function UB(t,e,n){yae(t.x,e.x,n.x),yae(t.y,e.y,n.y)}function wae(t,e,n,r,s){return t-=e,t=LB(t,1/n,r),s!==void 0&&(t=LB(t,1/s,r)),t}function VFe(t,e=0,n=1,r=.5,s,i=t,a=t){if(b0.test(e)&&(e=parseFloat(e),e=oi(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=oi(i.min,i.max,r);t===i&&(o-=e),t.min=wae(t.min,e,n,o,s),t.max=wae(t.max,e,n,o,s)}function bae(t,e,[n,r,s],i,a){VFe(t,e[n],e[r],e[s],e.scale,i,a)}const $Fe=["x","scaleX","originX"],jFe=["y","scaleY","originY"];function vae(t,e,n,r){bae(t.x,e,$Fe,n?n.x:void 0,r?r.x:void 0),bae(t.y,e,jFe,n?n.y:void 0,r?r.y:void 0)}function xae(t){return t.translate===0&&t.scale===1}function cwe(t){return xae(t.x)&&xae(t.y)}function Eae(t,e){return t.min===e.min&&t.max===e.max}function HFe(t,e){return Eae(t.x,e.x)&&Eae(t.y,e.y)}function Aae(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function lwe(t,e){return Aae(t.x,e.x)&&Aae(t.y,e.y)}function Sae(t){return _c(t.x)/_c(t.y)}function Iae(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function Vh(t){return[t("x"),t("y")]}function qFe(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((s||i||a)&&(r=`translate3d(${s}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:l,rotate:u,rotateX:f,rotateY:d,skewX:p,skewY:g}=n;l&&(r=`perspective(${l}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),d&&(r+=`rotateY(${d}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const uwe=["TopLeft","TopRight","BottomLeft","BottomRight"],KFe=uwe.length,Cae=t=>typeof t=="string"?parseFloat(t):t,Tae=t=>typeof t=="number"||zt.test(t);function GFe(t,e,n,r,s,i){s?(t.opacity=oi(0,n.opacity??1,WFe(r)),t.opacityExit=oi(e.opacity??1,0,zFe(r))):i&&(t.opacity=oi(e.opacity??1,n.opacity??1,r));for(let a=0;a<KFe;a++){const o=`border${uwe[a]}Radius`;let c=Nae(e,o),l=Nae(n,o);if(c===void 0&&l===void 0)continue;c||(c=0),l||(l=0),c===0||l===0||Tae(c)===Tae(l)?(t[o]=Math.max(oi(Cae(c),Cae(l),r),0),(b0.test(l)||b0.test(c))&&(t[o]+="%")):t[o]=l}(e.rotate||n.rotate)&&(t.rotate=oi(e.rotate||0,n.rotate||0,r))}function Nae(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const WFe=fwe(0,.5,nye),zFe=fwe(.5,.95,_f);function fwe(t,e,n){return r=>r<t?0:r>e?1:n(UN(t,e,r))}function JFe(t,e,n){const r=sc(t)?t:n5(t);return r.start(HQ("",r,e,n)),r.animation}function jN(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const YFe=(t,e)=>t.depth-e.depth;class QFe{constructor(){this.children=[],this.isDirty=!1}add(e){NQ(this.children,e),this.isDirty=!0}remove(e){RB(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(YFe),this.isDirty=!1,this.children.forEach(e)}}function ZFe(t,e){const n=Rc.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(lb(r),t(i-e))};return Ls.setup(r,!0),()=>lb(r)}function PR(t){return sc(t)?t.get():t}class XFe{constructor(){this.members=[]}add(e){NQ(this.members,e);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===e||r===this.lead||r===this.prevLead)continue;const s=r.instance;s&&s.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&RB(this.members,r)}e.scheduleRender()}remove(e){if(RB(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s],a=i.instance;if(i.isPresent!==!1&&(!a||a.isConnected!==!1)){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const s=r.options.layoutDependency,i=e.options.layoutDependency;if(!(s!==void 0&&i!==void 0&&s===i)){const c=r.instance;c&&c.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const OR={hasAnimatedSinceResize:!0,hasEverUpdated:!1},B$=["","X","Y","Z"],eVe=1e3;let tVe=0;function M$(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function dwe(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Rye(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ls,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&dwe(r)}function hwe({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},o=e==null?void 0:e()){this.id=tVe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(sVe),this.nodes.forEach(cVe),this.nodes.forEach(lVe),this.nodes.forEach(iVe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new QFe)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new PQ),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const c=this.eventHandlers.get(a);c&&c.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=JQ(a)&&!rFe(a),this.instance=a;const{layoutId:o,layout:c,visualElement:l}=this.options;if(l&&!l.current&&l.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let u,f=0;const d=()=>this.root.updateBlockedByResize=!1;Ls.read(()=>{f=window.innerWidth}),t(a,()=>{const p=window.innerWidth;p!==f&&(f=p,this.root.updateBlockedByResize=!0,u&&u(),u=ZFe(d,250),OR.hasAnimatedSinceResize&&(OR.hasAnimatedSinceResize=!1,this.nodes.forEach(Oae)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&l&&(o||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:d,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||l.getDefaultTransition()||pVe,{onLayoutAnimationStart:m,onLayoutAnimationComplete:v}=l.getProps(),A=!this.targetLayout||!lwe(this.targetLayout,p),S=!f&&d;if(this.options.layoutRoot||this.resumeFrom||S||f&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...jQ(g,"layout"),onPlay:m,onComplete:v};(l.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(u,S)}else f||Oae(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),lb(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(uVe),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&dwe(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kae);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Pae);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(oVe),this.nodes.forEach(nVe),this.nodes.forEach(rVe)):this.nodes.forEach(Pae),this.clearAllSnapshots();const o=Rc.now();ho.delta=O0(0,1e3/60,o-ho.timestamp),ho.timestamp=o,ho.isProcessing=!0,C$.update.process(ho),C$.preRender.process(ho),C$.render.process(ho),ho.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,WQ.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(aVe),this.sharedNodes.forEach(fVe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ls.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ls.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!_c(this.snapshot.measuredBox.x)&&!_c(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ga(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!cwe(this.projectionDelta),c=this.getTransformTemplate(),l=c?c(this.latestValues,""):void 0,u=l!==this.prevTransformTemplateValue;a&&this.instance&&(o||v1(this.latestValues)||u)&&(s(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return a&&(c=this.removeTransform(c)),gVe(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:a}=this.options;if(!a)return ga();const o=a.measureViewportBox();if(!(((l=this.scroll)==null?void 0:l.wasRoot)||this.path.some(mVe))){const{scroll:u}=this.root;u&&(ZS(o.x,u.offset.x),ZS(o.y,u.offset.y))}return o}removeElementScroll(a){var c;const o=ga();if(od(o,a),(c=this.scroll)!=null&&c.wasRoot)return o;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:f,options:d}=u;u!==this.root&&f&&d.layoutScroll&&(f.wasRoot&&od(o,a),ZS(o.x,f.offset.x),ZS(o.y,f.offset.y))}return o}applyTransform(a,o=!1){const c=ga();od(c,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&XS(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),v1(u.latestValues)&&XS(c,u.latestValues)}return v1(this.latestValues)&&XS(c,this.latestValues),c}removeTransform(a){const o=ga();od(o,a);for(let c=0;c<this.path.length;c++){const l=this.path[c];if(!l.instance||!v1(l.latestValues))continue;hG(l.latestValues)&&l.updateSnapshot();const u=ga(),f=l.measurePageBox();od(u,f),vae(o,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,u)}return v1(this.latestValues)&&vae(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ho.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var p;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:f}=this.options;if(!this.layout||!(u||f))return;this.resolvedRelativeTargetAt=ho.timestamp;const d=this.getClosestProjectingParent();d&&this.linkedParentVersion!==d.layoutVersion&&!d.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(d&&d.layout?this.createRelativeTarget(d,this.layout.layoutBox,d.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ga(),this.targetWithTransforms=ga()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),FFe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):od(this.target,this.layout.layoutBox),Yye(this.target,this.targetDelta)):od(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?this.createRelativeTarget(d,this.target,d.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||hG(this.parent.latestValues)||Jye(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,o,c){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ga(),this.relativeTargetOrigin=ga(),UB(this.relativeTargetOrigin,o,c),od(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var g;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ho.timestamp&&(c=!1),c)return;const{layout:l,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||u))return;od(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,d=this.treeScale.y;pFe(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ga());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(pae(this.prevProjectionDelta.x,this.projectionDelta.x),pae(this.prevProjectionDelta.y,this.projectionDelta.y)),YT(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==d||!Iae(this.projectionDelta.x,this.prevProjectionDelta.x)||!Iae(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=QS(),this.projectionDelta=QS(),this.projectionDeltaWithTransform=QS()}setAnimationOrigin(a,o=!1){const c=this.snapshot,l=c?c.latestValues:{},u={...this.latestValues},f=QS();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const d=ga(),p=c?c.source:void 0,g=this.layout?this.layout.source:void 0,m=p!==g,v=this.getStack(),A=!v||v.members.length<=1,S=!!(m&&!A&&this.options.crossfade===!0&&!this.path.some(hVe));this.animationProgress=0;let I;this.mixTargetDelta=B=>{const D=B/1e3;Rae(f.x,a.x,D),Rae(f.y,a.y,D),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(UB(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dVe(this.relativeTarget,this.relativeTargetOrigin,d,D),I&&HFe(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=ga()),od(I,this.relativeTarget)),m&&(this.animationValues=u,GFe(u,l,this.latestValues,D,S,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,c,l;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(l=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||l.stop(),this.pendingAnimation&&(lb(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ls.update(()=>{OR.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=n5(0)),this.motionValue.jump(0,!1),this.currentAnimation=JFe(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(eVe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:c,layout:l,latestValues:u}=a;if(!(!o||!c||!l)){if(this!==a&&this.layout&&l&&pwe(this.options.animationType,this.layout.layoutBox,l.layoutBox)){c=this.target||ga();const f=_c(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+f;const d=_c(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+d}od(o,c),XS(o,u),YT(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new XFe),this.sharedNodes.get(a).add(o);const l=o.options.initialPromotionConfig;o.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:c}={}){const l=this.getStack();l&&l.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const l={};c.z&&M$("z",a,l,this.animationValues);for(let u=0;u<B$.length;u++)M$(`rotate${B$[u]}`,a,l,this.animationValues),M$(`skew${B$[u]}`,a,l,this.animationValues);a.render();for(const u in l)a.setStaticValue(u,l[u]),this.animationValues&&(this.animationValues[u]=l[u]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=PR(o==null?void 0:o.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=PR(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!v1(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const u=l.animationValues||l.latestValues;this.applyTransformsToTarget();let f=qFe(this.projectionDeltaWithTransform,this.treeScale,u);c&&(f=c(u,f)),a.transform=f;const{x:d,y:p}=this.projectionDelta;a.transformOrigin=`${d.origin*100}% ${p.origin*100}% 0`,l.animationValues?a.opacity=l===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:a.opacity=l===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const g in gG){if(u[g]===void 0)continue;const{correct:m,applyTo:v,isCSSVariable:A}=gG[g],S=f==="none"?u[g]:m(u[g],l);if(v){const I=v.length;for(let B=0;B<I;B++)a[v[B]]=S}else A?this.options.visualElement.renderState.vars[g]=S:a[g]=S}this.options.layoutId&&(a.pointerEvents=l===this?PR(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(kae),this.root.sharedNodes.clear()}}}function nVe(t){t.updateLayout()}function rVe(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?Vh(f=>{const d=a?e.measuredBox[f]:e.layoutBox[f],p=_c(d);d.min=r[f].min,d.max=d.min+p}):pwe(i,e.layoutBox,r)&&Vh(f=>{const d=a?e.measuredBox[f]:e.layoutBox[f],p=_c(r[f]);d.max=d.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+p)});const o=QS();YT(o,r,e.layoutBox);const c=QS();a?YT(c,t.applyTransform(s,!0),e.measuredBox):YT(c,r,e.layoutBox);const l=!cwe(o);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:p}=f;if(d&&p){const g=ga();UB(g,e.layoutBox,d.layoutBox);const m=ga();UB(m,r,p.layoutBox),lwe(g,m)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=g,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function sVe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function iVe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function aVe(t){t.clearSnapshot()}function kae(t){t.clearMeasurements()}function Pae(t){t.isLayoutDirty=!1}function oVe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Oae(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function cVe(t){t.resolveTargetDelta()}function lVe(t){t.calcProjection()}function uVe(t){t.resetSkewAndRotation()}function fVe(t){t.removeLeadSnapshot()}function Rae(t,e,n){t.translate=oi(e.translate,0,n),t.scale=oi(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function _ae(t,e,n,r){t.min=oi(e.min,n.min,r),t.max=oi(e.max,n.max,r)}function dVe(t,e,n,r){_ae(t.x,e.x,n.x,r),_ae(t.y,e.y,n.y,r)}function hVe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const pVe={duration:.45,ease:[.4,0,.1,1]},Bae=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Mae=Bae("applewebkit/")&&!Bae("chrome/")?Math.round:_f;function Dae(t){t.min=Mae(t.min),t.max=Mae(t.max)}function gVe(t){Dae(t.x),Dae(t.y)}function pwe(t,e,n){return t==="position"||t==="preserve-aspect"&&!UFe(Sae(e),Sae(n),.2)}function mVe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const yVe=hwe({attachResizeListener:(t,e)=>jN(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),D$={current:void 0},gwe=hwe({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!D$.current){const t=new yVe({});t.mount(window),t.setOptions({layoutScroll:!0}),D$.current=t}return D$.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),eZ=F.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Lae(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function wVe(...t){return e=>{let n=!1;const r=t.map(s=>{const i=Lae(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Lae(t[s],null)}}}}function bVe(...t){return F.useCallback(wVe(...t),t)}let vVe=class extends F.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,s=fG(r)&&r.offsetWidth||0,i=fG(r)&&r.offsetHeight||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left,a.bottom=i-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}};function xVe({children:t,isPresent:e,anchorX:n,anchorY:r,root:s,pop:i}){var d;const a=F.useId(),o=F.useRef(null),c=F.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:l}=F.useContext(eZ),u=((d=t.props)==null?void 0:d.ref)??(t==null?void 0:t.ref),f=bVe(o,u);return F.useInsertionEffect(()=>{const{width:p,height:g,top:m,left:v,right:A,bottom:S}=c.current;if(e||i===!1||!o.current||!p||!g)return;const I=n==="left"?`left: ${v}`:`right: ${A}`,B=r==="bottom"?`bottom: ${S}`:`top: ${m}`;o.current.dataset.motionPopId=a;const D=document.createElement("style");l&&(D.nonce=l);const V=s??document.head;return V.appendChild(D),D.sheet&&D.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${g}px !important;
            ${I}px !important;
            ${B}px !important;
          }
        `),()=>{V.contains(D)&&V.removeChild(D)}},[e]),x.jsx(vVe,{isPresent:e,childRef:o,sizeRef:c,pop:i,children:i===!1?t:F.cloneElement(t,{ref:f})})}const EVe=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:a,anchorX:o,anchorY:c,root:l})=>{const u=TQ(AVe),f=F.useId();let d=!0,p=F.useMemo(()=>(d=!1,{id:f,initial:e,isPresent:n,custom:s,onExitComplete:g=>{u.set(g,!0);for(const m of u.values())if(!m)return;r&&r()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[n,u,r]);return i&&d&&(p={...p}),F.useMemo(()=>{u.forEach((g,m)=>u.set(m,!1))},[n]),F.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),t=x.jsx(xVe,{pop:a==="popLayout",isPresent:n,anchorX:o,anchorY:c,root:l,children:t}),x.jsx(tL.Provider,{value:p,children:t})};function AVe(){return new Map}function mwe(t=!0){const e=F.useContext(tL);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=F.useId();F.useEffect(()=>{if(t)return s(i)},[t]);const a=F.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,a]:[!0]}const RP=t=>t.key||"";function Uae(t){const e=[];return F.Children.forEach(t,n=>{F.isValidElement(n)&&e.push(n)}),e}const ywe=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:a=!1,anchorX:o="left",anchorY:c="top",root:l})=>{const[u,f]=mwe(a),d=F.useMemo(()=>Uae(t),[t]),p=a&&!u?[]:d.map(RP),g=F.useRef(!0),m=F.useRef(d),v=TQ(()=>new Map),A=F.useRef(new Set),[S,I]=F.useState(d),[B,D]=F.useState(d);qme(()=>{g.current=!1,m.current=d;for(let U=0;U<B.length;U++){const Q=RP(B[U]);p.includes(Q)?(v.delete(Q),A.current.delete(Q)):v.get(Q)!==!0&&v.set(Q,!1)}},[B,p.length,p.join("-")]);const V=[];if(d!==S){let U=[...d];for(let Q=0;Q<B.length;Q++){const ie=B[Q],G=RP(ie);p.includes(G)||(U.splice(Q,0,ie),V.push(ie))}return i==="wait"&&V.length&&(U=V),D(Uae(U)),I(d),null}const{forceRender:O}=F.useContext(CQ);return x.jsx(x.Fragment,{children:B.map(U=>{const Q=RP(U),ie=a&&!u?!1:d===B||p.includes(Q),G=()=>{if(A.current.has(Q))return;if(A.current.add(Q),v.has(Q))v.set(Q,!0);else return;let R=!0;v.forEach(k=>{k||(R=!1)}),R&&(O==null||O(),D(m.current),a&&(f==null||f()),r&&r())};return x.jsx(EVe,{isPresent:ie,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,root:l,onExitComplete:ie?void 0:G,anchorX:o,anchorY:c,children:U},Q)})})},wwe=F.createContext({strict:!1}),Fae={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Vae=!1;function SVe(){if(Vae)return;const t={};for(const e in Fae)t[e]={isEnabled:n=>Fae[e].some(r=>!!n[r])};Gye(t),Vae=!0}function bwe(){return SVe(),uFe()}function IVe(t){const e=bwe();for(const n in t)e[n]={...e[n],...t[n]};Gye(e)}const CVe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function FB(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||CVe.has(t)}let vwe=t=>!FB(t);function TVe(t){typeof t=="function"&&(vwe=e=>e.startsWith("on")?!FB(e):t(e))}try{TVe(require("@emotion/is-prop-valid").default)}catch{}function NVe(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(vwe(s)||n===!0&&FB(s)||!e&&!FB(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const sL=F.createContext({});function kVe(t,e){if(rL(t)){const{initial:n,animate:r}=t;return{initial:n===!1||$N(n)?n:void 0,animate:$N(r)?r:void 0}}return t.inherit!==!1?e:{}}function PVe(t){const{initial:e,animate:n}=kVe(t,F.useContext(sL));return F.useMemo(()=>({initial:e,animate:n}),[$ae(e),$ae(n)])}function $ae(t){return Array.isArray(t)?t.join(" "):t}const tZ=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xwe(t,e,n){for(const r in e)!sc(e[r])&&!Xye(r,n)&&(t[r]=e[r])}function OVe({transformTemplate:t},e){return F.useMemo(()=>{const n=tZ();return ZQ(n,e,t),Object.assign({},n.vars,n.style)},[e])}function RVe(t,e){const n=t.style||{},r={};return xwe(r,n,t),Object.assign(r,OVe(t,e)),r}function _Ve(t,e){const n={},r=RVe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Ewe=()=>({...tZ(),attrs:{}});function BVe(t,e,n,r){const s=F.useMemo(()=>{const i=Ewe();return ewe(i,e,nwe(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};xwe(i,t.style,t),s.style={...i,...s.style}}return s}const MVe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nZ(t){return typeof t!="string"||t.includes("-")?!1:!!(MVe.indexOf(t)>-1||/[A-Z]/u.test(t))}function DVe(t,e,n,{latestValues:r},s,i=!1,a){const c=(a??nZ(t)?BVe:_Ve)(e,r,s,t),l=NVe(e,typeof t=="string",i),u=t!==F.Fragment?{...l,...c,ref:n}:{},{children:f}=e,d=F.useMemo(()=>sc(f)?f.get():f,[f]);return F.createElement(t,{...u,children:d})}function LVe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:UVe(n,r,s,t),renderState:e()}}function UVe(t,e,n,r){const s={},i=r(t,{});for(const d in i)s[d]=PR(i[d]);let{initial:a,animate:o}=t;const c=rL(t),l=qye(t);e&&l&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let u=n?n.initial===!1:!1;u=u||a===!1;const f=u?o:a;if(f&&typeof f!="boolean"&&!nL(f)){const d=Array.isArray(f)?f:[f];for(let p=0;p<d.length;p++){const g=qQ(t,d[p]);if(g){const{transitionEnd:m,transition:v,...A}=g;for(const S in A){let I=A[S];if(Array.isArray(I)){const B=u?I.length-1:0;I=I[B]}I!==null&&(s[S]=I)}for(const S in m)s[S]=m[S]}}}return s}const Awe=t=>(e,n)=>{const r=F.useContext(sL),s=F.useContext(tL),i=()=>LVe(t,e,r,s);return n?i():TQ(i)},FVe=Awe({scrapeMotionValuesFromProps:XQ,createRenderState:tZ}),VVe=Awe({scrapeMotionValuesFromProps:rwe,createRenderState:Ewe}),$Ve=Symbol.for("motionComponentSymbol");function jVe(t,e,n){const r=F.useRef(n);F.useInsertionEffect(()=>{r.current=n});const s=F.useRef(null);return F.useCallback(i=>{var o;i&&((o=t.onMount)==null||o.call(t,i)),e&&(i?e.mount(i):e.unmount());const a=r.current;if(typeof a=="function")if(i){const c=a(i);typeof c=="function"&&(s.current=c)}else s.current?(s.current(),s.current=null):a(i);else a&&(a.current=i)},[e])}const Swe=F.createContext({});function aA(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function HVe(t,e,n,r,s,i){var I,B;const{visualElement:a}=F.useContext(sL),o=F.useContext(wwe),c=F.useContext(tL),l=F.useContext(eZ),u=l.reducedMotion,f=l.skipAnimations,d=F.useRef(null),p=F.useRef(!1);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u,skipAnimations:f,isSVG:i}),p.current&&d.current&&(d.current.manuallyAnimateOnMount=!0));const g=d.current,m=F.useContext(Swe);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&qVe(d.current,n,s,m);const v=F.useRef(!1);F.useInsertionEffect(()=>{g&&v.current&&g.update(n,c)});const A=n[Oye],S=F.useRef(!!A&&!((I=window.MotionHandoffIsComplete)!=null&&I.call(window,A))&&((B=window.MotionHasOptimisedAnimation)==null?void 0:B.call(window,A)));return qme(()=>{p.current=!0,g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),S.current&&g.animationState&&g.animationState.animateChanges())}),F.useEffect(()=>{g&&(!S.current&&g.animationState&&g.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var D;(D=window.MotionHandoffMarkAsComplete)==null||D.call(window,A)}),S.current=!1),g.enteringChildren=void 0)}),g}function qVe(t,e,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:o,layoutScroll:c,layoutRoot:l,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Iwe(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||o&&aA(o),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:c,layoutRoot:l})}function Iwe(t){if(t)return t.options.allowProjection!==!1?t.projection:Iwe(t.parent)}function L$(t,{forwardMotionProps:e=!1,type:n}={},r,s){r&&IVe(r);const i=n?n==="svg":nZ(t),a=i?VVe:FVe;function o(l,u){let f;const d={...F.useContext(eZ),...l,layoutId:KVe(l)},{isStatic:p}=d,g=PVe(l),m=a(l,p);if(!p&&Hme){GVe();const v=WVe(d);f=v.MeasureLayout,g.visualElement=HVe(t,m,d,s,v.ProjectionNode,i)}return x.jsxs(sL.Provider,{value:g,children:[f&&g.visualElement?x.jsx(f,{visualElement:g.visualElement,...d}):null,DVe(t,l,jVe(m,g.visualElement,u),m,p,e,i)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=F.forwardRef(o);return c[$Ve]=t,c}function KVe({layoutId:t}){const e=F.useContext(CQ).id;return e&&t!==void 0?e+"-"+t:t}function GVe(t,e){F.useContext(wwe).strict}function WVe(t){const e=bwe(),{drag:n,layout:r}=e;if(!n&&!r)return{};const s={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function zVe(t,e){if(typeof Proxy>"u")return L$;const n=new Map,r=(i,a)=>L$(i,a,t,e),s=(i,a)=>r(i,a);return new Proxy(s,{get:(i,a)=>a==="create"?r:(n.has(a)||n.set(a,L$(a,void 0,t,e)),n.get(a))})}const JVe=(t,e)=>e.isSVG??nZ(t)?new TFe(e):new xFe(e,{allowProjection:t!==F.Fragment});class YVe extends Nb{constructor(e){super(e),e.animationState||(e.animationState=RFe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();nL(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let QVe=0;class ZVe extends Nb{constructor(){super(...arguments),this.id=QVe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const XVe={animation:{Feature:YVe},exit:{Feature:ZVe}};function S7(t){return{point:{x:t.pageX,y:t.pageY}}}const e$e=t=>e=>zQ(e)&&t(e,S7(e));function QT(t,e,n,r){return jN(t,e,e$e(n),r)}const Cwe=({current:t})=>t?t.ownerDocument.defaultView:null,jae=(t,e)=>Math.abs(t-e);function t$e(t,e){const n=jae(t.x,e.x),r=jae(t.y,e.y);return Math.sqrt(n**2+r**2)}const Hae=new Set(["auto","scroll"]);class Twe{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=p=>{this.handleScroll(p.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=F$(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,m=t$e(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!m)return;const{point:v}=p,{timestamp:A}=ho;this.history.push({...v,timestamp:A});const{onStart:S,onMove:I}=this.handlers;g||(S&&S(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=U$(g,this.transformPagePoint),Ls.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:A}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=F$(p.type==="pointercancel"?this.lastMoveEventInfo:U$(g,this.transformPagePoint),this.history);this.startEvent&&m&&m(p,S),v&&v(p,S)},!zQ(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=s||window;const c=S7(e),l=U$(c,this.transformPagePoint),{point:u}=l,{timestamp:f}=ho;this.history=[{...u,timestamp:f}];const{onSessionStart:d}=n;d&&d(e,F$(l,this.history)),this.removeListeners=x7(QT(this.contextWindow,"pointermove",this.handlePointerMove),QT(this.contextWindow,"pointerup",this.handlePointerUp),QT(this.contextWindow,"pointercancel",this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(Hae.has(r.overflowX)||Hae.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0}),window.addEventListener("scroll",this.onWindowScroll),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},i={x:s.x-n.x,y:s.y-n.y};i.x===0&&i.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(e,s),Ls.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),lb(this.updatePoint)}}function U$(t,e){return e?{point:e(t.point)}:t}function qae(t,e){return{x:t.x-e.x,y:t.y-e.y}}function F$({point:t},e){return{point:t,delta:qae(t,Nwe(e)),offset:qae(t,n$e(e)),velocity:r$e(e,.1)}}function n$e(t){return t[0]}function Nwe(t){return t[t.length-1]}function r$e(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Nwe(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Yd(e)));)n--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&s.timestamp-r.timestamp>Yd(e)*2&&(r=t[1]);const i=Of(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function s$e(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?oi(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?oi(n,t,r.max):Math.min(t,n)),t}function Kae(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function i$e(t,{top:e,left:n,bottom:r,right:s}){return{x:Kae(t.x,n,s),y:Kae(t.y,e,r)}}function Gae(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function a$e(t,e){return{x:Gae(t.x,e.x),y:Gae(t.y,e.y)}}function o$e(t,e){let n=.5;const r=_c(t),s=_c(e);return s>r?n=UN(e.min,e.max-r,t.min):r>s&&(n=UN(t.min,t.max-s,e.min)),O0(0,1,n)}function c$e(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const mG=.35;function l$e(t=mG){return t===!1?t=0:t===!0&&(t=mG),{x:Wae(t,"left","right"),y:Wae(t,"top","bottom")}}function Wae(t,e,n){return{min:zae(t,e),max:zae(t,n)}}function zae(t,e){return typeof t=="number"?t:t[e]||0}const u$e=new WeakMap;class f$e{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ga(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=f=>{n&&this.snapToCursor(S7(f).point),this.stopAnimation()},a=(f,d)=>{const{drag:p,dragPropagation:g,onDragStart:m}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=VUe(p),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=d,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vh(A=>{let S=this.getAxisMotionValue(A).get()||0;if(b0.test(S)){const{projection:I}=this.visualElement;if(I&&I.layout){const B=I.layout.layoutBox[A];B&&(S=_c(B)*(parseFloat(S)/100))}}this.originPoint[A]=S}),m&&Ls.update(()=>m(f,d),!1,!0),oG(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(f,d)=>{this.latestPointerEvent=f,this.latestPanInfo=d;const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:m,onDrag:v}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:A}=d;if(g&&this.currentDirection===null){this.currentDirection=h$e(A),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",d.point,A),this.updateAxis("y",d.point,A),this.visualElement.render(),v&&Ls.update(()=>v(f,d),!1,!0)},c=(f,d)=>{this.latestPointerEvent=f,this.latestPanInfo=d,this.stop(f,d),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>{const{dragSnapToOrigin:f}=this.getProps();(f||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:u}=this.getProps();this.panSession=new Twe(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:c,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:Cwe(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&Ls.postRender(()=>o(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!_P(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=s$e(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&aA(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=i$e(r.layoutBox,e):this.constraints=!1,this.elastic=l$e(n),s!==this.constraints&&!aA(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&Vh(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=c$e(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!aA(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=gFe(r,s.root,this.visualElement.getTransformPagePoint());let a=a$e(s.layout.layoutBox,i);if(n){const o=n(dFe(a));this.hasMutatedConstraints=!!o,o&&(a=zye(o))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},l=Vh(u=>{if(!_P(u,n,this.currentDirection))return;let f=c&&c[u]||{};a&&(f={min:0,max:0});const d=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:r?e[u]:0,bounceStiffness:d,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(u,g)});return Promise.all(l).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return oG(this.visualElement,e),r.start(HQ(e,r,0,n,this.visualElement,!1))}stopAnimation(){Vh(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Vh(n=>{const{drag:r}=this.getProps();if(!_P(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:o}=s.layout.layoutBox[n],c=i.get()||0;i.set(e[n]-oi(a,o,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!aA(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Vh(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const c=o.get();s[a]=o$e({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),Vh(a=>{if(!_P(a,e,null))return;const o=this.getAxisMotionValue(a),{min:c,max:l}=this.constraints[a];o.set(oi(c,l,s[a]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;u$e.set(this.visualElement,this);const e=this.visualElement.current,n=QT(e,"pointerdown",l=>{const{drag:u,dragListener:f=!0}=this.getProps(),d=l.target,p=d!==e&&GUe(d);u&&f&&!p&&this.start(l)});let r;const s=()=>{const{dragConstraints:l}=this.getProps();aA(l)&&l.current&&(this.constraints=this.resolveRefConstraints(),r||(r=d$e(e,l.current,()=>this.scalePositionWithinConstraints())))},{projection:i}=this.visualElement,a=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ls.read(s);const o=jN(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Vh(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=l[f].translate,d.set(d.get()+l[f].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),c&&c(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=mG,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:o}}}function Jae(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function d$e(t,e,n){const r=nae(t,Jae(n)),s=nae(e,Jae(n));return()=>{r(),s()}}function _P(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function h$e(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class p$e extends Nb{constructor(e){super(e),this.removeGroupControls=_f,this.removeListeners=_f,this.controls=new f$e(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_f}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const V$=t=>(e,n)=>{t&&Ls.update(()=>t(e,n),!1,!0)};class g$e extends Nb{constructor(){super(...arguments),this.removePointerDownListener=_f}onPointerDown(e){this.session=new Twe(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Cwe(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:V$(e),onStart:V$(n),onMove:V$(r),onEnd:(i,a)=>{delete this.session,s&&Ls.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=QT(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let $$=!1;class m$e extends F.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),$$&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),OR.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:a}=r;return a&&(a.isPresent=i,e.layoutDependency!==n&&a.setOptions({...a.options,layoutDependency:n}),$$=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||Ls.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),WQ.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;$$=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kwe(t){const[e,n]=mwe(),r=F.useContext(CQ);return x.jsx(m$e,{...t,layoutGroup:r,switchLayoutGroup:F.useContext(Swe),isPresent:e,safeToRemove:n})}const y$e={pan:{Feature:g$e},drag:{Feature:p$e,ProjectionNode:gwe,MeasureLayout:kwe}};function Yae(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Ls.postRender(()=>i(e,S7(e)))}class w$e extends Nb{mount(){const{current:e}=this.node;e&&(this.unmount=jUe(e,(n,r)=>(Yae(this.node,r,"Start"),s=>Yae(this.node,s,"End"))))}unmount(){}}class b$e extends Nb{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=x7(jN(this.node.current,"focus",()=>this.onFocus()),jN(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Qae(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Ls.postRender(()=>i(e,S7(e)))}class v$e extends Nb{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=zUe(e,(s,i)=>(Qae(this.node,i,"Start"),(a,{success:o})=>Qae(this.node,a,o?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const yG=new WeakMap,j$=new WeakMap,x$e=t=>{const e=yG.get(t.target);e&&e(t)},E$e=t=>{t.forEach(x$e)};function A$e({root:t,...e}){const n=t||document;j$.has(n)||j$.set(n,{});const r=j$.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(E$e,{root:t,...e})),r[s]}function S$e(t,e,n){const r=A$e(e);return yG.set(t,n),r.observe(t),()=>{yG.delete(t),r.unobserve(t)}}const I$e={some:0,all:1};class C$e extends Nb{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:I$e[s]},o=c=>{const{isIntersecting:l}=c;if(this.isInView===l||(this.isInView=l,i&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),d=l?u:f;d&&d(c)};return S$e(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(T$e(e,n))&&this.startObserver()}unmount(){}}function T$e({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const N$e={inView:{Feature:C$e},tap:{Feature:v$e},focus:{Feature:b$e},hover:{Feature:w$e}},k$e={layout:{ProjectionNode:gwe,MeasureLayout:kwe}},P$e={...XVe,...N$e,...y$e,...k$e},Bx=zVe(P$e,JVe);function Uf(t){const e=F.useRef(t);return F.useEffect(()=>{e.current=t}),F.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function O$e(t,e=globalThis==null?void 0:globalThis.document){const n=Uf(t);F.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var R$e="DismissableLayer",wG="dismissableLayer.update",_$e="dismissableLayer.pointerDownOutside",B$e="dismissableLayer.focusOutside",Zae,Pwe=F.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),e4=F.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:o,...c}=t,l=F.useContext(Pwe),[u,f]=F.useState(null),d=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=F.useState({}),g=ss(e,O=>f(O)),m=Array.from(l.layers),[v]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),A=m.indexOf(v),S=u?m.indexOf(u):-1,I=l.layersWithOutsidePointerEventsDisabled.size>0,B=S>=A,D=D$e(O=>{const U=O.target,Q=[...l.branches].some(ie=>ie.contains(U));!B||Q||(s==null||s(O),a==null||a(O),O.defaultPrevented||o==null||o())},d),V=L$e(O=>{const U=O.target;[...l.branches].some(ie=>ie.contains(U))||(i==null||i(O),a==null||a(O),O.defaultPrevented||o==null||o())},d);return O$e(O=>{S===l.layers.size-1&&(r==null||r(O),!O.defaultPrevented&&o&&(O.preventDefault(),o()))},d),F.useEffect(()=>{if(u)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(Zae=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),Xae(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=Zae)}},[u,d,n,l]),F.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),Xae())},[u,l]),F.useEffect(()=>{const O=()=>p({});return document.addEventListener(wG,O),()=>document.removeEventListener(wG,O)},[]),x.jsx($n.div,{...c,ref:g,style:{pointerEvents:I?B?"auto":"none":void 0,...t.style},onFocusCapture:ln(t.onFocusCapture,V.onFocusCapture),onBlurCapture:ln(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:ln(t.onPointerDownCapture,D.onPointerDownCapture)})});e4.displayName=R$e;var M$e="DismissableLayerBranch",Owe=F.forwardRef((t,e)=>{const n=F.useContext(Pwe),r=F.useRef(null),s=ss(e,r);return F.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),x.jsx($n.div,{...t,ref:s})});Owe.displayName=M$e;function D$e(t,e=globalThis==null?void 0:globalThis.document){const n=Uf(t),r=F.useRef(!1),s=F.useRef(()=>{});return F.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let c=function(){Rwe(_$e,n,l,{discrete:!0})};const l={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function L$e(t,e=globalThis==null?void 0:globalThis.document){const n=Uf(t),r=F.useRef(!1);return F.useEffect(()=>{const s=i=>{i.target&&!r.current&&Rwe(B$e,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Xae(){const t=new CustomEvent(wG);document.dispatchEvent(t)}function Rwe(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Tme(s,i):s.dispatchEvent(i)}var U$e=e4,F$e=Owe,H$="focusScope.autoFocusOnMount",q$="focusScope.autoFocusOnUnmount",eoe={bubbles:!1,cancelable:!0},V$e="FocusScope",iL=F.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[o,c]=F.useState(null),l=Uf(s),u=Uf(i),f=F.useRef(null),d=ss(e,m=>c(m)),p=F.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;F.useEffect(()=>{if(r){let m=function(I){if(p.paused||!o)return;const B=I.target;o.contains(B)?f.current=B:Ym(f.current,{select:!0})},v=function(I){if(p.paused||!o)return;const B=I.relatedTarget;B!==null&&(o.contains(B)||Ym(f.current,{select:!0}))},A=function(I){if(document.activeElement===document.body)for(const D of I)D.removedNodes.length>0&&Ym(o)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const S=new MutationObserver(A);return o&&S.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),S.disconnect()}}},[r,o,p.paused]),F.useEffect(()=>{if(o){noe.add(p);const m=document.activeElement;if(!o.contains(m)){const A=new CustomEvent(H$,eoe);o.addEventListener(H$,l),o.dispatchEvent(A),A.defaultPrevented||($$e(G$e(_we(o)),{select:!0}),document.activeElement===m&&Ym(o))}return()=>{o.removeEventListener(H$,l),setTimeout(()=>{const A=new CustomEvent(q$,eoe);o.addEventListener(q$,u),o.dispatchEvent(A),A.defaultPrevented||Ym(m??document.body,{select:!0}),o.removeEventListener(q$,u),noe.remove(p)},0)}}},[o,l,u,p]);const g=F.useCallback(m=>{if(!n&&!r||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,A=document.activeElement;if(v&&A){const S=m.currentTarget,[I,B]=j$e(S);I&&B?!m.shiftKey&&A===B?(m.preventDefault(),n&&Ym(I,{select:!0})):m.shiftKey&&A===I&&(m.preventDefault(),n&&Ym(B,{select:!0})):A===S&&m.preventDefault()}},[n,r,p.paused]);return x.jsx($n.div,{tabIndex:-1,...a,ref:d,onKeyDown:g})});iL.displayName=V$e;function $$e(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ym(r,{select:e}),document.activeElement!==n)return}function j$e(t){const e=_we(t),n=toe(e,t),r=toe(e.reverse(),t);return[n,r]}function _we(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function toe(t,e){for(const n of t)if(!H$e(n,{upTo:e}))return n}function H$e(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function q$e(t){return t instanceof HTMLInputElement&&"select"in t}function Ym(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&q$e(t)&&e&&t.select()}}var noe=K$e();function K$e(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=roe(t,e),t.unshift(e)},remove(e){var n;t=roe(t,e),(n=t[0])==null||n.resume()}}}function roe(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function G$e(t){return t.filter(e=>e.tagName!=="A")}var W$e="Portal",t4=F.forwardRef((t,e)=>{var o;const{container:n,...r}=t,[s,i]=F.useState(!1);Wa(()=>i(!0),[]);const a=n||s&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?dDe.createPortal(x.jsx($n.div,{...r,ref:e}),a):null});t4.displayName=W$e;var K$=0;function rZ(){F.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??soe()),document.body.insertAdjacentElement("beforeend",t[1]??soe()),K$++,()=>{K$===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),K$--}},[])}function soe(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var r0=function(){return r0=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r0.apply(this,arguments)};function Bwe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function z$e(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var RR="right-scroll-bar-position",_R="width-before-scroll-bar",J$e="with-scroll-bars-hidden",Y$e="--removed-body-scroll-bar-size";function G$(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Q$e(t,e){var n=F.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var Z$e=typeof window<"u"?F.useLayoutEffect:F.useEffect,ioe=new WeakMap;function X$e(t,e){var n=Q$e(null,function(r){return t.forEach(function(s){return G$(s,r)})});return Z$e(function(){var r=ioe.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(o){i.has(o)||G$(o,null)}),i.forEach(function(o){s.has(o)||G$(o,a)})}ioe.set(n,t)},[t]),n}function eje(t){return t}function tje(t,e){e===void 0&&(e=eje);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(i),a=n}var c=function(){var u=a;a=[],u.forEach(i)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){a.push(u),l()},filter:function(u){return a=a.filter(u),n}}}};return s}function nje(t){t===void 0&&(t={});var e=tje(null);return e.options=r0({async:!0,ssr:!1},t),e}var Mwe=function(t){var e=t.sideCar,n=Bwe(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return F.createElement(r,r0({},n))};Mwe.isSideCarExport=!0;function rje(t,e){return t.useMedium(e),Mwe}var Dwe=nje(),W$=function(){},aL=F.forwardRef(function(t,e){var n=F.useRef(null),r=F.useState({onScrollCapture:W$,onWheelCapture:W$,onTouchMoveCapture:W$}),s=r[0],i=r[1],a=t.forwardProps,o=t.children,c=t.className,l=t.removeScrollBar,u=t.enabled,f=t.shards,d=t.sideCar,p=t.noRelative,g=t.noIsolation,m=t.inert,v=t.allowPinchZoom,A=t.as,S=A===void 0?"div":A,I=t.gapMode,B=Bwe(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=d,V=X$e([n,e]),O=r0(r0({},B),s);return F.createElement(F.Fragment,null,u&&F.createElement(D,{sideCar:Dwe,removeScrollBar:l,shards:f,noRelative:p,noIsolation:g,inert:m,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:I}),a?F.cloneElement(F.Children.only(o),r0(r0({},O),{ref:V})):F.createElement(S,r0({},O,{className:c,ref:V}),o))});aL.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};aL.classNames={fullWidth:_R,zeroRight:RR};var sje=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ije(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=sje();return e&&t.setAttribute("nonce",e),t}function aje(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function oje(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var cje=function(){var t=0,e=null;return{add:function(n){t==0&&(e=ije())&&(aje(e,n),oje(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},lje=function(){var t=cje();return function(e,n){F.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Lwe=function(){var t=lje(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},uje={left:0,top:0,right:0,gap:0},z$=function(t){return parseInt(t||"",10)||0},fje=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[z$(n),z$(r),z$(s)]},dje=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return uje;var e=fje(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},hje=Lwe(),C3="data-scroll-locked",pje=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(J$e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(C3,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(RR,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(_R,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(RR," .").concat(RR,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(_R," .").concat(_R,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(C3,`] {
    `).concat(Y$e,": ").concat(o,`px;
  }
`)},aoe=function(){var t=parseInt(document.body.getAttribute(C3)||"0",10);return isFinite(t)?t:0},gje=function(){F.useEffect(function(){return document.body.setAttribute(C3,(aoe()+1).toString()),function(){var t=aoe()-1;t<=0?document.body.removeAttribute(C3):document.body.setAttribute(C3,t.toString())}},[])},mje=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;gje();var i=F.useMemo(function(){return dje(s)},[s]);return F.createElement(hje,{styles:pje(i,!e,s,n?"":"!important")})},bG=!1;if(typeof window<"u")try{var BP=Object.defineProperty({},"passive",{get:function(){return bG=!0,!0}});window.addEventListener("test",BP,BP),window.removeEventListener("test",BP,BP)}catch{bG=!1}var ME=bG?{passive:!1}:!1,yje=function(t){return t.tagName==="TEXTAREA"},Uwe=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!yje(t)&&n[e]==="visible")},wje=function(t){return Uwe(t,"overflowY")},bje=function(t){return Uwe(t,"overflowX")},ooe=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Fwe(t,r);if(s){var i=Vwe(t,r),a=i[1],o=i[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},vje=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},xje=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Fwe=function(t,e){return t==="v"?wje(e):bje(e)},Vwe=function(t,e){return t==="v"?vje(e):xje(e)},Eje=function(t,e){return t==="h"&&e==="rtl"?-1:1},Aje=function(t,e,n,r,s){var i=Eje(t,window.getComputedStyle(e).direction),a=i*r,o=n.target,c=e.contains(o),l=!1,u=a>0,f=0,d=0;do{if(!o)break;var p=Vwe(t,o),g=p[0],m=p[1],v=p[2],A=m-v-i*g;(g||A)&&Fwe(t,o)&&(f+=A,d+=g);var S=o.parentNode;o=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!c&&o!==document.body||c&&(e.contains(o)||e===o));return(u&&Math.abs(f)<1||!u&&Math.abs(d)<1)&&(l=!0),l},MP=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},coe=function(t){return[t.deltaX,t.deltaY]},loe=function(t){return t&&"current"in t?t.current:t},Sje=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Ije=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Cje=0,DE=[];function Tje(t){var e=F.useRef([]),n=F.useRef([0,0]),r=F.useRef(),s=F.useState(Cje++)[0],i=F.useState(Lwe)[0],a=F.useRef(t);F.useEffect(function(){a.current=t},[t]),F.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var m=z$e([t.lockRef.current],(t.shards||[]).map(loe),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var o=F.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!a.current.allowPinchZoom;var A=MP(m),S=n.current,I="deltaX"in m?m.deltaX:S[0]-A[0],B="deltaY"in m?m.deltaY:S[1]-A[1],D,V=m.target,O=Math.abs(I)>Math.abs(B)?"h":"v";if("touches"in m&&O==="h"&&V.type==="range")return!1;var U=window.getSelection(),Q=U&&U.anchorNode,ie=Q?Q===V||Q.contains(V):!1;if(ie)return!1;var G=ooe(O,V);if(!G)return!0;if(G?D=O:(D=O==="v"?"h":"v",G=ooe(O,V)),!G)return!1;if(!r.current&&"changedTouches"in m&&(I||B)&&(r.current=D),!D)return!0;var R=r.current||D;return Aje(R,v,m,R==="h"?I:B)},[]),c=F.useCallback(function(m){var v=m;if(!(!DE.length||DE[DE.length-1]!==i)){var A="deltaY"in v?coe(v):MP(v),S=e.current.filter(function(D){return D.name===v.type&&(D.target===v.target||v.target===D.shadowParent)&&Sje(D.delta,A)})[0];if(S&&S.should){v.cancelable&&v.preventDefault();return}if(!S){var I=(a.current.shards||[]).map(loe).filter(Boolean).filter(function(D){return D.contains(v.target)}),B=I.length>0?o(v,I[0]):!a.current.noIsolation;B&&v.cancelable&&v.preventDefault()}}},[]),l=F.useCallback(function(m,v,A,S){var I={name:m,delta:v,target:A,should:S,shadowParent:Nje(A)};e.current.push(I),setTimeout(function(){e.current=e.current.filter(function(B){return B!==I})},1)},[]),u=F.useCallback(function(m){n.current=MP(m),r.current=void 0},[]),f=F.useCallback(function(m){l(m.type,coe(m),m.target,o(m,t.lockRef.current))},[]),d=F.useCallback(function(m){l(m.type,MP(m),m.target,o(m,t.lockRef.current))},[]);F.useEffect(function(){return DE.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",c,ME),document.addEventListener("touchmove",c,ME),document.addEventListener("touchstart",u,ME),function(){DE=DE.filter(function(m){return m!==i}),document.removeEventListener("wheel",c,ME),document.removeEventListener("touchmove",c,ME),document.removeEventListener("touchstart",u,ME)}},[]);var p=t.removeScrollBar,g=t.inert;return F.createElement(F.Fragment,null,g?F.createElement(i,{styles:Ije(s)}):null,p?F.createElement(mje,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Nje(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const kje=rje(Dwe,Tje);var oL=F.forwardRef(function(t,e){return F.createElement(aL,r0({},t,{ref:e,sideCar:kje}))});oL.classNames=aL.classNames;var Pje=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},LE=new WeakMap,DP=new WeakMap,LP={},J$=0,$we=function(t){return t&&(t.host||$we(t.parentNode))},Oje=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=$we(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Rje=function(t,e,n,r){var s=Oje(e,Array.isArray(t)?t:[t]);LP[n]||(LP[n]=new WeakMap);var i=LP[n],a=[],o=new Set,c=new Set(s),l=function(f){!f||o.has(f)||(o.add(f),l(f.parentNode))};s.forEach(l);var u=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(d){if(o.has(d))u(d);else try{var p=d.getAttribute(r),g=p!==null&&p!=="false",m=(LE.get(d)||0)+1,v=(i.get(d)||0)+1;LE.set(d,m),i.set(d,v),a.push(d),m===1&&g&&DP.set(d,!0),v===1&&d.setAttribute(n,"true"),g||d.setAttribute(r,"true")}catch(A){console.error("aria-hidden: cannot operate on ",d,A)}})};return u(e),o.clear(),J$++,function(){a.forEach(function(f){var d=LE.get(f)-1,p=i.get(f)-1;LE.set(f,d),i.set(f,p),d||(DP.has(f)||f.removeAttribute(r),DP.delete(f)),p||f.removeAttribute(n)}),J$--,J$||(LE=new WeakMap,LE=new WeakMap,DP=new WeakMap,LP={})}},sZ=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=Pje(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),Rje(r,s,n,"aria-hidden")):function(){return null}},cL="Dialog",[jwe]=dh(cL),[_je,hh]=jwe(cL),Hwe=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,o=F.useRef(null),c=F.useRef(null),[l,u]=P0({prop:r,defaultProp:s??!1,onChange:i,caller:cL});return x.jsx(_je,{scope:e,triggerRef:o,contentRef:c,contentId:Jd(),titleId:Jd(),descriptionId:Jd(),open:l,onOpenChange:u,onOpenToggle:F.useCallback(()=>u(f=>!f),[u]),modal:a,children:n})};Hwe.displayName=cL;var qwe="DialogTrigger",Bje=F.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hh(qwe,n),i=ss(e,s.triggerRef);return x.jsx($n.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":oZ(s.open),...r,ref:i,onClick:ln(t.onClick,s.onOpenToggle)})});Bje.displayName=qwe;var iZ="DialogPortal",[Mje,Kwe]=jwe(iZ,{forceMount:void 0}),Gwe=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=hh(iZ,e);return x.jsx(Mje,{scope:e,forceMount:n,children:F.Children.map(r,a=>x.jsx(qf,{present:n||i.open,children:x.jsx(t4,{asChild:!0,container:s,children:a})}))})};Gwe.displayName=iZ;var VB="DialogOverlay",Wwe=F.forwardRef((t,e)=>{const n=Kwe(VB,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=hh(VB,t.__scopeDialog);return i.modal?x.jsx(qf,{present:r||i.open,children:x.jsx(Lje,{...s,ref:e})}):null});Wwe.displayName=VB;var Dje=t5("DialogOverlay.RemoveScroll"),Lje=F.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hh(VB,n);return x.jsx(oL,{as:Dje,allowPinchZoom:!0,shards:[s.contentRef],children:x.jsx($n.div,{"data-state":oZ(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),u2="DialogContent",zwe=F.forwardRef((t,e)=>{const n=Kwe(u2,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=hh(u2,t.__scopeDialog);return x.jsx(qf,{present:r||i.open,children:i.modal?x.jsx(Uje,{...s,ref:e}):x.jsx(Fje,{...s,ref:e})})});zwe.displayName=u2;var Uje=F.forwardRef((t,e)=>{const n=hh(u2,t.__scopeDialog),r=F.useRef(null),s=ss(e,n.contentRef,r);return F.useEffect(()=>{const i=r.current;if(i)return sZ(i)},[]),x.jsx(Jwe,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ln(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ln(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&i.preventDefault()}),onFocusOutside:ln(t.onFocusOutside,i=>i.preventDefault())})}),Fje=F.forwardRef((t,e)=>{const n=hh(u2,t.__scopeDialog),r=F.useRef(!1),s=F.useRef(!1);return x.jsx(Jwe,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,o;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,l;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((l=n.triggerRef.current)==null?void 0:l.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Jwe=F.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=t,o=hh(u2,n),c=F.useRef(null),l=ss(e,c);return rZ(),x.jsxs(x.Fragment,{children:[x.jsx(iL,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:x.jsx(e4,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":oZ(o.open),...a,ref:l,onDismiss:()=>o.onOpenChange(!1)})}),x.jsxs(x.Fragment,{children:[x.jsx($je,{titleId:o.titleId}),x.jsx(Hje,{contentRef:c,descriptionId:o.descriptionId})]})]})}),aZ="DialogTitle",Ywe=F.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hh(aZ,n);return x.jsx($n.h2,{id:s.titleId,...r,ref:e})});Ywe.displayName=aZ;var Qwe="DialogDescription",Vje=F.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hh(Qwe,n);return x.jsx($n.p,{id:s.descriptionId,...r,ref:e})});Vje.displayName=Qwe;var Zwe="DialogClose",Xwe=F.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hh(Zwe,n);return x.jsx($n.button,{type:"button",...r,ref:e,onClick:ln(t.onClick,()=>s.onOpenChange(!1))})});Xwe.displayName=Zwe;function oZ(t){return t?"open":"closed"}var ebe="DialogTitleWarning",[T7t,tbe]=gDe(ebe,{contentName:u2,titleName:aZ,docsSlug:"dialog"}),$je=({titleId:t})=>{const e=tbe(ebe),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return F.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},jje="DialogDescriptionWarning",Hje=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${tbe(jje).contentName}}.`;return F.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},qje=Hwe,Kje=Gwe,Gje=Wwe,Wje=zwe,zje=Ywe,Jje=Xwe;function cZ(t){const e=t+"CollectionProvider",[n,r]=dh(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=m=>{const{scope:v,children:A}=m,S=bn.useRef(null),I=bn.useRef(new Map).current;return x.jsx(s,{scope:v,itemMap:I,collectionRef:S,children:A})};a.displayName=e;const o=t+"CollectionSlot",c=t5(o),l=bn.forwardRef((m,v)=>{const{scope:A,children:S}=m,I=i(o,A),B=ss(v,I.collectionRef);return x.jsx(c,{ref:B,children:S})});l.displayName=o;const u=t+"CollectionItemSlot",f="data-radix-collection-item",d=t5(u),p=bn.forwardRef((m,v)=>{const{scope:A,children:S,...I}=m,B=bn.useRef(null),D=ss(v,B),V=i(u,A);return bn.useEffect(()=>(V.itemMap.set(B,{ref:B,...I}),()=>void V.itemMap.delete(B))),x.jsx(d,{[f]:"",ref:D,children:S})});p.displayName=u;function g(m){const v=i(t+"CollectionConsumer",m);return bn.useCallback(()=>{const S=v.collectionRef.current;if(!S)return[];const I=Array.from(S.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((V,O)=>I.indexOf(V.ref.current)-I.indexOf(O.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:l,ItemSlot:p},g,r]}var Yje=F.createContext(void 0);function lZ(t){const e=F.useContext(Yje);return t||e||"ltr"}const Qje=["top","right","bottom","left"],ub=Math.min,cu=Math.max,$B=Math.round,UP=Math.floor,v0=t=>({x:t,y:t}),Zje={left:"right",right:"left",bottom:"top",top:"bottom"},Xje={start:"end",end:"start"};function vG(t,e,n){return cu(t,ub(e,n))}function qg(t,e){return typeof t=="function"?t(e):t}function Kg(t){return t.split("-")[0]}function n4(t){return t.split("-")[1]}function uZ(t){return t==="x"?"y":"x"}function fZ(t){return t==="y"?"height":"width"}const eHe=new Set(["top","bottom"]);function l0(t){return eHe.has(Kg(t))?"y":"x"}function dZ(t){return uZ(l0(t))}function tHe(t,e,n){n===void 0&&(n=!1);const r=n4(t),s=dZ(t),i=fZ(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=jB(a)),[a,jB(a)]}function nHe(t){const e=jB(t);return[xG(t),e,xG(e)]}function xG(t){return t.replace(/start|end/g,e=>Xje[e])}const uoe=["left","right"],foe=["right","left"],rHe=["top","bottom"],sHe=["bottom","top"];function iHe(t,e,n){switch(t){case"top":case"bottom":return n?e?foe:uoe:e?uoe:foe;case"left":case"right":return e?rHe:sHe;default:return[]}}function aHe(t,e,n,r){const s=n4(t);let i=iHe(Kg(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(xG)))),i}function jB(t){return t.replace(/left|right|bottom|top/g,e=>Zje[e])}function oHe(t){return{top:0,right:0,bottom:0,left:0,...t}}function nbe(t){return typeof t!="number"?oHe(t):{top:t,right:t,bottom:t,left:t}}function HB(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function doe(t,e,n){let{reference:r,floating:s}=t;const i=l0(e),a=dZ(e),o=fZ(a),c=Kg(e),l=i==="y",u=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,d=r[o]/2-s[o]/2;let p;switch(c){case"top":p={x:u,y:r.y-s.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-s.width,y:f};break;default:p={x:r.x,y:r.y}}switch(n4(e)){case"start":p[a]-=d*(n&&l?-1:1);break;case"end":p[a]+=d*(n&&l?-1:1);break}return p}async function cHe(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:o,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:p=0}=qg(e,t),g=nbe(p),v=o[d?f==="floating"?"reference":"floating":f],A=HB(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:l,rootBoundary:u,strategy:c})),S=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,I=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),B=await(i.isElement==null?void 0:i.isElement(I))?await(i.getScale==null?void 0:i.getScale(I))||{x:1,y:1}:{x:1,y:1},D=HB(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:S,offsetParent:I,strategy:c}):S);return{top:(A.top-D.top+g.top)/B.y,bottom:(D.bottom-A.bottom+g.bottom)/B.y,left:(A.left-D.left+g.left)/B.x,right:(D.right-A.right+g.right)/B.x}}const lHe=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,o=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let l=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:f}=doe(l,r,c),d=r,p={},g=0;for(let v=0;v<o.length;v++){var m;const{name:A,fn:S}=o[v],{x:I,y:B,data:D,reset:V}=await S({x:u,y:f,initialPlacement:r,placement:d,strategy:s,middlewareData:p,rects:l,platform:{...a,detectOverflow:(m=a.detectOverflow)!=null?m:cHe},elements:{reference:t,floating:e}});u=I??u,f=B??f,p={...p,[A]:{...p[A],...D}},V&&g<=50&&(g++,typeof V=="object"&&(V.placement&&(d=V.placement),V.rects&&(l=V.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):V.rects),{x:u,y:f}=doe(l,d,c)),v=-1)}return{x:u,y:f,placement:d,strategy:s,middlewareData:p}},uHe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:o,middlewareData:c}=e,{element:l,padding:u=0}=qg(t,e)||{};if(l==null)return{};const f=nbe(u),d={x:n,y:r},p=dZ(s),g=fZ(p),m=await a.getDimensions(l),v=p==="y",A=v?"top":"left",S=v?"bottom":"right",I=v?"clientHeight":"clientWidth",B=i.reference[g]+i.reference[p]-d[p]-i.floating[g],D=d[p]-i.reference[p],V=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l));let O=V?V[I]:0;(!O||!await(a.isElement==null?void 0:a.isElement(V)))&&(O=o.floating[I]||i.floating[g]);const U=B/2-D/2,Q=O/2-m[g]/2-1,ie=ub(f[A],Q),G=ub(f[S],Q),R=ie,k=O-m[g]-G,b=O/2-m[g]/2+U,w=vG(R,b,k),N=!c.arrow&&n4(s)!=null&&b!==w&&i.reference[g]/2-(b<R?ie:G)-m[g]/2<0,L=N?b<R?b-R:b-k:0;return{[p]:d[p]+L,data:{[p]:w,centerOffset:b-w-L,...N&&{alignmentOffset:L}},reset:N}}}),fHe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:o,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...v}=qg(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const A=Kg(s),S=l0(o),I=Kg(o)===o,B=await(c.isRTL==null?void 0:c.isRTL(l.floating)),D=d||(I||!m?[jB(o)]:nHe(o)),V=g!=="none";!d&&V&&D.push(...aHe(o,m,g,B));const O=[o,...D],U=await c.detectOverflow(e,v),Q=[];let ie=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&Q.push(U[A]),f){const b=tHe(s,a,B);Q.push(U[b[0]],U[b[1]])}if(ie=[...ie,{placement:s,overflows:Q}],!Q.every(b=>b<=0)){var G,R;const b=(((G=i.flip)==null?void 0:G.index)||0)+1,w=O[b];if(w&&(!(f==="alignment"?S!==l0(w):!1)||ie.every(C=>l0(C.placement)===S?C.overflows[0]>0:!0)))return{data:{index:b,overflows:ie},reset:{placement:w}};let N=(R=ie.filter(L=>L.overflows[0]<=0).sort((L,C)=>L.overflows[1]-C.overflows[1])[0])==null?void 0:R.placement;if(!N)switch(p){case"bestFit":{var k;const L=(k=ie.filter(C=>{if(V){const T=l0(C.placement);return T===S||T==="y"}return!0}).map(C=>[C.placement,C.overflows.filter(T=>T>0).reduce((T,E)=>T+E,0)]).sort((C,T)=>C[1]-T[1])[0])==null?void 0:k[0];L&&(N=L);break}case"initialPlacement":N=o;break}if(s!==N)return{reset:{placement:N}}}return{}}}};function hoe(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function poe(t){return Qje.some(e=>t[e]>=0)}const dHe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n,platform:r}=e,{strategy:s="referenceHidden",...i}=qg(t,e);switch(s){case"referenceHidden":{const a=await r.detectOverflow(e,{...i,elementContext:"reference"}),o=hoe(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:poe(o)}}}case"escaped":{const a=await r.detectOverflow(e,{...i,altBoundary:!0}),o=hoe(a,n.floating);return{data:{escapedOffsets:o,escaped:poe(o)}}}default:return{}}}}},rbe=new Set(["left","top"]);async function hHe(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Kg(n),o=n4(n),c=l0(n)==="y",l=rbe.has(a)?-1:1,u=i&&c?-1:1,f=qg(e,t);let{mainAxis:d,crossAxis:p,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof g=="number"&&(p=o==="end"?g*-1:g),c?{x:p*u,y:d*l}:{x:d*l,y:p*u}}const pHe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:o}=e,c=await hHe(e,t);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},gHe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s,platform:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:c={fn:A=>{let{x:S,y:I}=A;return{x:S,y:I}}},...l}=qg(t,e),u={x:n,y:r},f=await i.detectOverflow(e,l),d=l0(Kg(s)),p=uZ(d);let g=u[p],m=u[d];if(a){const A=p==="y"?"top":"left",S=p==="y"?"bottom":"right",I=g+f[A],B=g-f[S];g=vG(I,g,B)}if(o){const A=d==="y"?"top":"left",S=d==="y"?"bottom":"right",I=m+f[A],B=m-f[S];m=vG(I,m,B)}const v=c.fn({...e,[p]:g,[d]:m});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[p]:a,[d]:o}}}}}},mHe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:o=0,mainAxis:c=!0,crossAxis:l=!0}=qg(t,e),u={x:n,y:r},f=l0(s),d=uZ(f);let p=u[d],g=u[f];const m=qg(o,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const I=d==="y"?"height":"width",B=i.reference[d]-i.floating[I]+v.mainAxis,D=i.reference[d]+i.reference[I]-v.mainAxis;p<B?p=B:p>D&&(p=D)}if(l){var A,S;const I=d==="y"?"width":"height",B=rbe.has(Kg(s)),D=i.reference[f]-i.floating[I]+(B&&((A=a.offset)==null?void 0:A[f])||0)+(B?0:v.crossAxis),V=i.reference[f]+i.reference[I]+(B?0:((S=a.offset)==null?void 0:S[f])||0)-(B?v.crossAxis:0);g<D?g=D:g>V&&(g=V)}return{[d]:p,[f]:g}}}},yHe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:o}=e,{apply:c=()=>{},...l}=qg(t,e),u=await a.detectOverflow(e,l),f=Kg(s),d=n4(s),p=l0(s)==="y",{width:g,height:m}=i.floating;let v,A;f==="top"||f==="bottom"?(v=f,A=d===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(A=f,v=d==="end"?"top":"bottom");const S=m-u.top-u.bottom,I=g-u.left-u.right,B=ub(m-u[v],S),D=ub(g-u[A],I),V=!e.middlewareData.shift;let O=B,U=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(U=I),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(O=S),V&&!d){const ie=cu(u.left,0),G=cu(u.right,0),R=cu(u.top,0),k=cu(u.bottom,0);p?U=g-2*(ie!==0||G!==0?ie+G:cu(u.left,u.right)):O=m-2*(R!==0||k!==0?R+k:cu(u.top,u.bottom))}await c({...e,availableWidth:U,availableHeight:O});const Q=await a.getDimensions(o.floating);return g!==Q.width||m!==Q.height?{reset:{rects:!0}}:{}}}};function lL(){return typeof window<"u"}function r4(t){return sbe(t)?(t.nodeName||"").toLowerCase():"#document"}function xu(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function G0(t){var e;return(e=(sbe(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function sbe(t){return lL()?t instanceof Node||t instanceof xu(t).Node:!1}function rh(t){return lL()?t instanceof Element||t instanceof xu(t).Element:!1}function R0(t){return lL()?t instanceof HTMLElement||t instanceof xu(t).HTMLElement:!1}function goe(t){return!lL()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof xu(t).ShadowRoot}const wHe=new Set(["inline","contents"]);function I7(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=sh(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!wHe.has(s)}const bHe=new Set(["table","td","th"]);function vHe(t){return bHe.has(r4(t))}const xHe=[":popover-open",":modal"];function uL(t){return xHe.some(e=>{try{return t.matches(e)}catch{return!1}})}const EHe=["transform","translate","scale","rotate","perspective"],AHe=["transform","translate","scale","rotate","perspective","filter"],SHe=["paint","layout","strict","content"];function hZ(t){const e=pZ(),n=rh(t)?sh(t):t;return EHe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||AHe.some(r=>(n.willChange||"").includes(r))||SHe.some(r=>(n.contain||"").includes(r))}function IHe(t){let e=fb(t);for(;R0(e)&&!r5(e);){if(hZ(e))return e;if(uL(e))return null;e=fb(e)}return null}function pZ(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const CHe=new Set(["html","body","#document"]);function r5(t){return CHe.has(r4(t))}function sh(t){return xu(t).getComputedStyle(t)}function fL(t){return rh(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function fb(t){if(r4(t)==="html")return t;const e=t.assignedSlot||t.parentNode||goe(t)&&t.host||G0(t);return goe(e)?e.host:e}function ibe(t){const e=fb(t);return r5(e)?t.ownerDocument?t.ownerDocument.body:t.body:R0(e)&&I7(e)?e:ibe(e)}function HN(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=ibe(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=xu(s);if(i){const o=EG(a);return e.concat(a,a.visualViewport||[],I7(s)?s:[],o&&n?HN(o):[])}return e.concat(s,HN(s,[],n))}function EG(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function abe(t){const e=sh(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=R0(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,o=$B(n)!==i||$B(r)!==a;return o&&(n=i,r=a),{width:n,height:r,$:o}}function gZ(t){return rh(t)?t:t.contextElement}function T3(t){const e=gZ(t);if(!R0(e))return v0(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=abe(e);let a=(i?$B(n.width):n.width)/r,o=(i?$B(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const THe=v0(0);function obe(t){const e=xu(t);return!pZ()||!e.visualViewport?THe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function NHe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==xu(t)?!1:e}function f2(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=gZ(t);let a=v0(1);e&&(r?rh(r)&&(a=T3(r)):a=T3(t));const o=NHe(i,n,r)?obe(i):v0(0);let c=(s.left+o.x)/a.x,l=(s.top+o.y)/a.y,u=s.width/a.x,f=s.height/a.y;if(i){const d=xu(i),p=r&&rh(r)?xu(r):r;let g=d,m=EG(g);for(;m&&r&&p!==g;){const v=T3(m),A=m.getBoundingClientRect(),S=sh(m),I=A.left+(m.clientLeft+parseFloat(S.paddingLeft))*v.x,B=A.top+(m.clientTop+parseFloat(S.paddingTop))*v.y;c*=v.x,l*=v.y,u*=v.x,f*=v.y,c+=I,l+=B,g=xu(m),m=EG(g)}}return HB({width:u,height:f,x:c,y:l})}function dL(t,e){const n=fL(t).scrollLeft;return e?e.left+n:f2(G0(t)).left+n}function cbe(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-dL(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function kHe(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=G0(r),o=e?uL(e.floating):!1;if(r===a||o&&i)return n;let c={scrollLeft:0,scrollTop:0},l=v0(1);const u=v0(0),f=R0(r);if((f||!f&&!i)&&((r4(r)!=="body"||I7(a))&&(c=fL(r)),R0(r))){const p=f2(r);l=T3(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const d=a&&!f&&!i?cbe(a,c):v0(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+d.x,y:n.y*l.y-c.scrollTop*l.y+u.y+d.y}}function PHe(t){return Array.from(t.getClientRects())}function OHe(t){const e=G0(t),n=fL(t),r=t.ownerDocument.body,s=cu(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=cu(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+dL(t);const o=-n.scrollTop;return sh(r).direction==="rtl"&&(a+=cu(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:o}}const moe=25;function RHe(t,e){const n=xu(t),r=G0(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,o=0,c=0;if(s){i=s.width,a=s.height;const u=pZ();(!u||u&&e==="fixed")&&(o=s.offsetLeft,c=s.offsetTop)}const l=dL(r);if(l<=0){const u=r.ownerDocument,f=u.body,d=getComputedStyle(f),p=u.compatMode==="CSS1Compat"&&parseFloat(d.marginLeft)+parseFloat(d.marginRight)||0,g=Math.abs(r.clientWidth-f.clientWidth-p);g<=moe&&(i-=g)}else l<=moe&&(i+=l);return{width:i,height:a,x:o,y:c}}const _He=new Set(["absolute","fixed"]);function BHe(t,e){const n=f2(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=R0(t)?T3(t):v0(1),a=t.clientWidth*i.x,o=t.clientHeight*i.y,c=s*i.x,l=r*i.y;return{width:a,height:o,x:c,y:l}}function yoe(t,e,n){let r;if(e==="viewport")r=RHe(t,n);else if(e==="document")r=OHe(G0(t));else if(rh(e))r=BHe(e,n);else{const s=obe(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return HB(r)}function lbe(t,e){const n=fb(t);return n===e||!rh(n)||r5(n)?!1:sh(n).position==="fixed"||lbe(n,e)}function MHe(t,e){const n=e.get(t);if(n)return n;let r=HN(t,[],!1).filter(o=>rh(o)&&r4(o)!=="body"),s=null;const i=sh(t).position==="fixed";let a=i?fb(t):t;for(;rh(a)&&!r5(a);){const o=sh(a),c=hZ(a);!c&&o.position==="fixed"&&(s=null),(i?!c&&!s:!c&&o.position==="static"&&!!s&&_He.has(s.position)||I7(a)&&!c&&lbe(t,a))?r=r.filter(u=>u!==a):s=o,a=fb(a)}return e.set(t,r),r}function DHe(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?uL(e)?[]:MHe(e,this._c):[].concat(n),r],o=a[0],c=a.reduce((l,u)=>{const f=yoe(e,u,s);return l.top=cu(f.top,l.top),l.right=ub(f.right,l.right),l.bottom=ub(f.bottom,l.bottom),l.left=cu(f.left,l.left),l},yoe(e,o,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function LHe(t){const{width:e,height:n}=abe(t);return{width:e,height:n}}function UHe(t,e,n){const r=R0(e),s=G0(e),i=n==="fixed",a=f2(t,!0,i,e);let o={scrollLeft:0,scrollTop:0};const c=v0(0);function l(){c.x=dL(s)}if(r||!r&&!i)if((r4(e)!=="body"||I7(s))&&(o=fL(e)),r){const p=f2(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&l();i&&!r&&s&&l();const u=s&&!r&&!i?cbe(s,o):v0(0),f=a.left+o.scrollLeft-c.x-u.x,d=a.top+o.scrollTop-c.y-u.y;return{x:f,y:d,width:a.width,height:a.height}}function Y$(t){return sh(t).position==="static"}function woe(t,e){if(!R0(t)||sh(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return G0(t)===n&&(n=n.ownerDocument.body),n}function ube(t,e){const n=xu(t);if(uL(t))return n;if(!R0(t)){let s=fb(t);for(;s&&!r5(s);){if(rh(s)&&!Y$(s))return s;s=fb(s)}return n}let r=woe(t,e);for(;r&&vHe(r)&&Y$(r);)r=woe(r,e);return r&&r5(r)&&Y$(r)&&!hZ(r)?n:r||IHe(t)||n}const FHe=async function(t){const e=this.getOffsetParent||ube,n=this.getDimensions,r=await n(t.floating);return{reference:UHe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function VHe(t){return sh(t).direction==="rtl"}const $He={convertOffsetParentRelativeRectToViewportRelativeRect:kHe,getDocumentElement:G0,getClippingRect:DHe,getOffsetParent:ube,getElementRects:FHe,getClientRects:PHe,getDimensions:LHe,getScale:T3,isElement:rh,isRTL:VHe};function fbe(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function jHe(t,e){let n=null,r;const s=G0(t);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const l=t.getBoundingClientRect(),{left:u,top:f,width:d,height:p}=l;if(o||e(),!d||!p)return;const g=UP(f),m=UP(s.clientWidth-(u+d)),v=UP(s.clientHeight-(f+p)),A=UP(u),I={rootMargin:-g+"px "+-m+"px "+-v+"px "+-A+"px",threshold:cu(0,ub(1,c))||1};let B=!0;function D(V){const O=V[0].intersectionRatio;if(O!==c){if(!B)return a();O?a(!1,O):r=setTimeout(()=>{a(!1,1e-7)},1e3)}O===1&&!fbe(l,t.getBoundingClientRect())&&a(),B=!1}try{n=new IntersectionObserver(D,{...I,root:s.ownerDocument})}catch{n=new IntersectionObserver(D,I)}n.observe(t)}return a(!0),i}function HHe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=gZ(t),u=s||i?[...l?HN(l):[],...HN(e)]:[];u.forEach(A=>{s&&A.addEventListener("scroll",n,{passive:!0}),i&&A.addEventListener("resize",n)});const f=l&&o?jHe(l,n):null;let d=-1,p=null;a&&(p=new ResizeObserver(A=>{let[S]=A;S&&S.target===l&&p&&(p.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var I;(I=p)==null||I.observe(e)})),n()}),l&&!c&&p.observe(l),p.observe(e));let g,m=c?f2(t):null;c&&v();function v(){const A=f2(t);m&&!fbe(m,A)&&n(),m=A,g=requestAnimationFrame(v)}return n(),()=>{var A;u.forEach(S=>{s&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),f==null||f(),(A=p)==null||A.disconnect(),p=null,c&&cancelAnimationFrame(g)}}const qHe=pHe,KHe=gHe,GHe=fHe,WHe=yHe,zHe=dHe,boe=uHe,JHe=mHe,YHe=(t,e,n)=>{const r=new Map,s={platform:$He,...n},i={...s.platform,_c:r};return lHe(t,e,{...s,platform:i})};var QHe=typeof document<"u",ZHe=function(){},BR=QHe?F.useLayoutEffect:ZHe;function qB(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!qB(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!qB(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function dbe(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function voe(t,e){const n=dbe(t);return Math.round(e*n)/n}function Q$(t){const e=F.useRef(t);return BR(()=>{e.current=t}),e}function XHe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:o=!0,whileElementsMounted:c,open:l}=t,[u,f]=F.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[d,p]=F.useState(r);qB(d,r)||p(r);const[g,m]=F.useState(null),[v,A]=F.useState(null),S=F.useCallback(C=>{C!==V.current&&(V.current=C,m(C))},[]),I=F.useCallback(C=>{C!==O.current&&(O.current=C,A(C))},[]),B=i||g,D=a||v,V=F.useRef(null),O=F.useRef(null),U=F.useRef(u),Q=c!=null,ie=Q$(c),G=Q$(s),R=Q$(l),k=F.useCallback(()=>{if(!V.current||!O.current)return;const C={placement:e,strategy:n,middleware:d};G.current&&(C.platform=G.current),YHe(V.current,O.current,C).then(T=>{const E={...T,isPositioned:R.current!==!1};b.current&&!qB(U.current,E)&&(U.current=E,$2.flushSync(()=>{f(E)}))})},[d,e,n,G,R]);BR(()=>{l===!1&&U.current.isPositioned&&(U.current.isPositioned=!1,f(C=>({...C,isPositioned:!1})))},[l]);const b=F.useRef(!1);BR(()=>(b.current=!0,()=>{b.current=!1}),[]),BR(()=>{if(B&&(V.current=B),D&&(O.current=D),B&&D){if(ie.current)return ie.current(B,D,k);k()}},[B,D,k,ie,Q]);const w=F.useMemo(()=>({reference:V,floating:O,setReference:S,setFloating:I}),[S,I]),N=F.useMemo(()=>({reference:B,floating:D}),[B,D]),L=F.useMemo(()=>{const C={position:n,left:0,top:0};if(!N.floating)return C;const T=voe(N.floating,u.x),E=voe(N.floating,u.y);return o?{...C,transform:"translate("+T+"px, "+E+"px)",...dbe(N.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:T,top:E}},[n,o,N.floating,u.x,u.y]);return F.useMemo(()=>({...u,update:k,refs:w,elements:N,floatingStyles:L}),[u,k,w,N,L])}const eqe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?boe({element:r.current,padding:s}).fn(n):{}:r?boe({element:r,padding:s}).fn(n):{}}}},tqe=(t,e)=>({...qHe(t),options:[t,e]}),nqe=(t,e)=>({...KHe(t),options:[t,e]}),rqe=(t,e)=>({...JHe(t),options:[t,e]}),sqe=(t,e)=>({...GHe(t),options:[t,e]}),iqe=(t,e)=>({...WHe(t),options:[t,e]}),aqe=(t,e)=>({...zHe(t),options:[t,e]}),oqe=(t,e)=>({...eqe(t),options:[t,e]});var cqe="Arrow",hbe=F.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return x.jsx($n.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});hbe.displayName=cqe;var lqe=hbe,mZ="Popper",[pbe,s4]=dh(mZ),[uqe,gbe]=pbe(mZ),mbe=t=>{const{__scopePopper:e,children:n}=t,[r,s]=F.useState(null);return x.jsx(uqe,{scope:e,anchor:r,onAnchorChange:s,children:n})};mbe.displayName=mZ;var ybe="PopperAnchor",wbe=F.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=gbe(ybe,n),a=F.useRef(null),o=ss(e,a),c=F.useRef(null);return F.useEffect(()=>{const l=c.current;c.current=(r==null?void 0:r.current)||a.current,l!==c.current&&i.onAnchorChange(c.current)}),r?null:x.jsx($n.div,{...s,ref:o})});wbe.displayName=ybe;var yZ="PopperContent",[fqe,dqe]=pbe(yZ),bbe=F.forwardRef((t,e)=>{var J,ee,X,j,se,ye;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:d=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=t,v=gbe(yZ,n),[A,S]=F.useState(null),I=ss(e,Ce=>S(Ce)),[B,D]=F.useState(null),V=Ime(B),O=(V==null?void 0:V.width)??0,U=(V==null?void 0:V.height)??0,Q=r+(i!=="center"?"-"+i:""),ie=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},G=Array.isArray(l)?l:[l],R=G.length>0,k={padding:ie,boundary:G.filter(pqe),altBoundary:R},{refs:b,floatingStyles:w,placement:N,isPositioned:L,middlewareData:C}=XHe({strategy:"fixed",placement:Q,whileElementsMounted:(...Ce)=>HHe(...Ce,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[tqe({mainAxis:s+U,alignmentAxis:a}),c&&nqe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?rqe():void 0,...k}),c&&sqe({...k}),iqe({...k,apply:({elements:Ce,rects:xe,availableWidth:De,availableHeight:qe})=>{const{width:ze,height:ft}=xe.reference,mt=Ce.floating.style;mt.setProperty("--radix-popper-available-width",`${De}px`),mt.setProperty("--radix-popper-available-height",`${qe}px`),mt.setProperty("--radix-popper-anchor-width",`${ze}px`),mt.setProperty("--radix-popper-anchor-height",`${ft}px`)}}),B&&oqe({element:B,padding:o}),gqe({arrowWidth:O,arrowHeight:U}),d&&aqe({strategy:"referenceHidden",...k})]}),[T,E]=Ebe(N),P=Uf(g);Wa(()=>{L&&(P==null||P())},[L,P]);const _=(J=C.arrow)==null?void 0:J.x,H=(ee=C.arrow)==null?void 0:ee.y,ne=((X=C.arrow)==null?void 0:X.centerOffset)!==0,[$,te]=F.useState();return Wa(()=>{A&&te(window.getComputedStyle(A).zIndex)},[A]),x.jsx("div",{ref:b.setFloating,"data-radix-popper-content-wrapper":"",style:{...w,transform:L?w.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$,"--radix-popper-transform-origin":[(j=C.transformOrigin)==null?void 0:j.x,(se=C.transformOrigin)==null?void 0:se.y].join(" "),...((ye=C.hide)==null?void 0:ye.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:x.jsx(fqe,{scope:n,placedSide:T,onArrowChange:D,arrowX:_,arrowY:H,shouldHideArrow:ne,children:x.jsx($n.div,{"data-side":T,"data-align":E,...m,ref:I,style:{...m.style,animation:L?void 0:"none"}})})})});bbe.displayName=yZ;var vbe="PopperArrow",hqe={top:"bottom",right:"left",bottom:"top",left:"right"},xbe=F.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=dqe(vbe,r),a=hqe[i.placedSide];return x.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:x.jsx(lqe,{...s,ref:n,style:{...s.style,display:"block"}})})});xbe.displayName=vbe;function pqe(t){return t!==null}var gqe=t=>({name:"transformOrigin",options:t,fn(e){var v,A,S;const{placement:n,rects:r,middlewareData:s}=e,a=((v=s.arrow)==null?void 0:v.centerOffset)!==0,o=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[l,u]=Ebe(n),f={start:"0%",center:"50%",end:"100%"}[u],d=(((A=s.arrow)==null?void 0:A.x)??0)+o/2,p=(((S=s.arrow)==null?void 0:S.y)??0)+c/2;let g="",m="";return l==="bottom"?(g=a?f:`${d}px`,m=`${-c}px`):l==="top"?(g=a?f:`${d}px`,m=`${r.floating.height+c}px`):l==="right"?(g=`${-c}px`,m=a?f:`${p}px`):l==="left"&&(g=`${r.floating.width+c}px`,m=a?f:`${p}px`),{data:{x:g,y:m}}}});function Ebe(t){const[e,n="center"]=t.split("-");return[e,n]}var wZ=mbe,hL=wbe,bZ=bbe,vZ=xbe,Z$="rovingFocusGroup.onEntryFocus",mqe={bubbles:!1,cancelable:!0},C7="RovingFocusGroup",[AG,Abe,yqe]=cZ(C7),[wqe,Sbe]=dh(C7,[yqe]),[bqe,vqe]=wqe(C7),Ibe=F.forwardRef((t,e)=>x.jsx(AG.Provider,{scope:t.__scopeRovingFocusGroup,children:x.jsx(AG.Slot,{scope:t.__scopeRovingFocusGroup,children:x.jsx(xqe,{...t,ref:e})})}));Ibe.displayName=C7;var xqe=F.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...f}=t,d=F.useRef(null),p=ss(e,d),g=lZ(i),[m,v]=P0({prop:a,defaultProp:o??null,onChange:c,caller:C7}),[A,S]=F.useState(!1),I=Uf(l),B=Abe(n),D=F.useRef(!1),[V,O]=F.useState(0);return F.useEffect(()=>{const U=d.current;if(U)return U.addEventListener(Z$,I),()=>U.removeEventListener(Z$,I)},[I]),x.jsx(bqe,{scope:n,orientation:r,dir:g,loop:s,currentTabStopId:m,onItemFocus:F.useCallback(U=>v(U),[v]),onItemShiftTab:F.useCallback(()=>S(!0),[]),onFocusableItemAdd:F.useCallback(()=>O(U=>U+1),[]),onFocusableItemRemove:F.useCallback(()=>O(U=>U-1),[]),children:x.jsx($n.div,{tabIndex:A||V===0?-1:0,"data-orientation":r,...f,ref:p,style:{outline:"none",...t.style},onMouseDown:ln(t.onMouseDown,()=>{D.current=!0}),onFocus:ln(t.onFocus,U=>{const Q=!D.current;if(U.target===U.currentTarget&&Q&&!A){const ie=new CustomEvent(Z$,mqe);if(U.currentTarget.dispatchEvent(ie),!ie.defaultPrevented){const G=B().filter(N=>N.focusable),R=G.find(N=>N.active),k=G.find(N=>N.id===m),w=[R,k,...G].filter(Boolean).map(N=>N.ref.current);Nbe(w,u)}}D.current=!1}),onBlur:ln(t.onBlur,()=>S(!1))})})}),Cbe="RovingFocusGroupItem",Tbe=F.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...o}=t,c=Jd(),l=i||c,u=vqe(Cbe,n),f=u.currentTabStopId===l,d=Abe(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:m}=u;return F.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),x.jsx(AG.ItemSlot,{scope:n,id:l,focusable:r,active:s,children:x.jsx($n.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:ln(t.onMouseDown,v=>{r?u.onItemFocus(l):v.preventDefault()}),onFocus:ln(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:ln(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const A=Sqe(v,u.orientation,u.dir);if(A!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let I=d().filter(B=>B.focusable).map(B=>B.ref.current);if(A==="last")I.reverse();else if(A==="prev"||A==="next"){A==="prev"&&I.reverse();const B=I.indexOf(v.currentTarget);I=u.loop?Iqe(I,B+1):I.slice(B+1)}setTimeout(()=>Nbe(I))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:m!=null}):a})})});Tbe.displayName=Cbe;var Eqe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Aqe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Sqe(t,e,n){const r=Aqe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Eqe[r]}function Nbe(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Iqe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Cqe=Ibe,Tqe=Tbe,Nqe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),kqe="VisuallyHidden",kbe=F.forwardRef((t,e)=>x.jsx(pDe.span,{...t,ref:e,style:{...Nqe,...t.style}}));kbe.displayName=kqe;var pL="Popover",[Pbe]=dh(pL,[s4]),T7=s4(),[Pqe,kb]=Pbe(pL),Obe=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!1}=t,o=T7(e),c=F.useRef(null),[l,u]=F.useState(!1),[f,d]=P0({prop:r,defaultProp:s??!1,onChange:i,caller:pL});return x.jsx(wZ,{...o,children:x.jsx(Pqe,{scope:e,contentId:Jd(),triggerRef:c,open:f,onOpenChange:d,onOpenToggle:F.useCallback(()=>d(p=>!p),[d]),hasCustomAnchor:l,onCustomAnchorAdd:F.useCallback(()=>u(!0),[]),onCustomAnchorRemove:F.useCallback(()=>u(!1),[]),modal:a,children:n})})};Obe.displayName=pL;var Rbe="PopoverAnchor",Oqe=F.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=kb(Rbe,n),i=T7(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:o}=s;return F.useEffect(()=>(a(),()=>o()),[a,o]),x.jsx(hL,{...i,...r,ref:e})});Oqe.displayName=Rbe;var _be="PopoverTrigger",Bbe=F.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=kb(_be,n),i=T7(n),a=ss(e,s.triggerRef),o=x.jsx($n.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Fbe(s.open),...r,ref:a,onClick:ln(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?o:x.jsx(hL,{asChild:!0,...i,children:o})});Bbe.displayName=_be;var xZ="PopoverPortal",[Rqe,_qe]=Pbe(xZ,{forceMount:void 0}),Mbe=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=kb(xZ,e);return x.jsx(Rqe,{scope:e,forceMount:n,children:x.jsx(qf,{present:n||i.open,children:x.jsx(t4,{asChild:!0,container:s,children:r})})})};Mbe.displayName=xZ;var s5="PopoverContent",Dbe=F.forwardRef((t,e)=>{const n=_qe(s5,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=kb(s5,t.__scopePopover);return x.jsx(qf,{present:r||i.open,children:i.modal?x.jsx(Mqe,{...s,ref:e}):x.jsx(Dqe,{...s,ref:e})})});Dbe.displayName=s5;var Bqe=t5("PopoverContent.RemoveScroll"),Mqe=F.forwardRef((t,e)=>{const n=kb(s5,t.__scopePopover),r=F.useRef(null),s=ss(e,r),i=F.useRef(!1);return F.useEffect(()=>{const a=r.current;if(a)return sZ(a)},[]),x.jsx(oL,{as:Bqe,allowPinchZoom:!0,children:x.jsx(Lbe,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ln(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),i.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ln(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,l=o.button===2||c;i.current=l},{checkForDefaultPrevented:!1}),onFocusOutside:ln(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),Dqe=F.forwardRef((t,e)=>{const n=kb(s5,t.__scopePopover),r=F.useRef(!1),s=F.useRef(!1);return x.jsx(Lbe,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,o;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,l;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((l=n.triggerRef.current)==null?void 0:l.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Lbe=F.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...f}=t,d=kb(s5,n),p=T7(n);return rZ(),x.jsx(iL,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:x.jsx(e4,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>d.onOpenChange(!1),children:x.jsx(bZ,{"data-state":Fbe(d.open),role:"dialog",id:d.contentId,...p,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Ube="PopoverClose",Lqe=F.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=kb(Ube,n);return x.jsx($n.button,{type:"button",...r,ref:e,onClick:ln(t.onClick,()=>s.onOpenChange(!1))})});Lqe.displayName=Ube;var Uqe="PopoverArrow",Fqe=F.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=T7(n);return x.jsx(vZ,{...s,...r,ref:e})});Fqe.displayName=Uqe;function Fbe(t){return t?"open":"closed"}var Vqe=Obe,$qe=Bbe,jqe=Mbe,Hqe=Dbe;function xoe(t,[e,n]){return Math.min(n,Math.max(e,t))}var Vbe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),qqe="VisuallyHidden",gL=F.forwardRef((t,e)=>x.jsx($n.span,{...t,ref:e,style:{...Vbe,...t.style}}));gL.displayName=qqe;var Kqe=gL,Gqe=[" ","Enter","ArrowUp","ArrowDown"],Wqe=[" ","Enter"],d2="Select",[mL,yL,zqe]=cZ(d2),[i4]=dh(d2,[zqe,s4]),wL=s4(),[Jqe,Pb]=i4(d2),[Yqe,Qqe]=i4(d2),$be=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:o,onValueChange:c,dir:l,name:u,autoComplete:f,disabled:d,required:p,form:g}=t,m=wL(e),[v,A]=F.useState(null),[S,I]=F.useState(null),[B,D]=F.useState(!1),V=lZ(l),[O,U]=P0({prop:r,defaultProp:s??!1,onChange:i,caller:d2}),[Q,ie]=P0({prop:a,defaultProp:o,onChange:c,caller:d2}),G=F.useRef(null),R=v?g||!!v.closest("form"):!0,[k,b]=F.useState(new Set),w=Array.from(k).map(N=>N.props.value).join(";");return x.jsx(wZ,{...m,children:x.jsxs(Jqe,{required:p,scope:e,trigger:v,onTriggerChange:A,valueNode:S,onValueNodeChange:I,valueNodeHasChildren:B,onValueNodeHasChildrenChange:D,contentId:Jd(),value:Q,onValueChange:ie,open:O,onOpenChange:U,dir:V,triggerPointerDownPosRef:G,disabled:d,children:[x.jsx(mL.Provider,{scope:e,children:x.jsx(Yqe,{scope:t.__scopeSelect,onNativeOptionAdd:F.useCallback(N=>{b(L=>new Set(L).add(N))},[]),onNativeOptionRemove:F.useCallback(N=>{b(L=>{const C=new Set(L);return C.delete(N),C})},[]),children:n})}),R?x.jsxs(u1e,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:f,value:Q,onChange:N=>ie(N.target.value),disabled:d,form:g,children:[Q===void 0?x.jsx("option",{value:""}):null,Array.from(k)]},w):null]})})};$be.displayName=d2;var jbe="SelectTrigger",Hbe=F.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=wL(n),a=Pb(jbe,n),o=a.disabled||r,c=ss(e,a.onTriggerChange),l=yL(n),u=F.useRef("touch"),[f,d,p]=d1e(m=>{const v=l().filter(I=>!I.disabled),A=v.find(I=>I.value===a.value),S=h1e(v,m,A);S!==void 0&&a.onValueChange(S.value)}),g=m=>{o||(a.onOpenChange(!0),p()),m&&(a.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return x.jsx(hL,{asChild:!0,...i,children:x.jsx($n.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":f1e(a.value)?"":void 0,...s,ref:c,onClick:ln(s.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:ln(s.onPointerDown,m=>{u.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:ln(s.onKeyDown,m=>{const v=f.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&d(m.key),!(v&&m.key===" ")&&Gqe.includes(m.key)&&(g(),m.preventDefault())})})})});Hbe.displayName=jbe;var qbe="SelectValue",Kbe=F.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...o}=t,c=Pb(qbe,n),{onValueNodeHasChildrenChange:l}=c,u=i!==void 0,f=ss(e,c.onValueNodeChange);return Wa(()=>{l(u)},[l,u]),x.jsx($n.span,{...o,ref:f,style:{pointerEvents:"none"},children:f1e(c.value)?x.jsx(x.Fragment,{children:a}):i})});Kbe.displayName=qbe;var Zqe="SelectIcon",Gbe=F.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return x.jsx($n.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});Gbe.displayName=Zqe;var Xqe="SelectPortal",Wbe=t=>x.jsx(t4,{asChild:!0,...t});Wbe.displayName=Xqe;var h2="SelectContent",zbe=F.forwardRef((t,e)=>{const n=Pb(h2,t.__scopeSelect),[r,s]=F.useState();if(Wa(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?$2.createPortal(x.jsx(Jbe,{scope:t.__scopeSelect,children:x.jsx(mL.Slot,{scope:t.__scopeSelect,children:x.jsx("div",{children:t.children})})}),i):null}return x.jsx(Ybe,{...t,ref:e})});zbe.displayName=h2;var wd=10,[Jbe,Ob]=i4(h2),eKe="SelectContentImpl",tKe=t5("SelectContent.RemoveScroll"),Ybe=F.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:o,sideOffset:c,align:l,alignOffset:u,arrowPadding:f,collisionBoundary:d,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v,...A}=t,S=Pb(h2,n),[I,B]=F.useState(null),[D,V]=F.useState(null),O=ss(e,J=>B(J)),[U,Q]=F.useState(null),[ie,G]=F.useState(null),R=yL(n),[k,b]=F.useState(!1),w=F.useRef(!1);F.useEffect(()=>{if(I)return sZ(I)},[I]),rZ();const N=F.useCallback(J=>{const[ee,...X]=R().map(ye=>ye.ref.current),[j]=X.slice(-1),se=document.activeElement;for(const ye of J)if(ye===se||(ye==null||ye.scrollIntoView({block:"nearest"}),ye===ee&&D&&(D.scrollTop=0),ye===j&&D&&(D.scrollTop=D.scrollHeight),ye==null||ye.focus(),document.activeElement!==se))return},[R,D]),L=F.useCallback(()=>N([U,I]),[N,U,I]);F.useEffect(()=>{k&&L()},[k,L]);const{onOpenChange:C,triggerPointerDownPosRef:T}=S;F.useEffect(()=>{if(I){let J={x:0,y:0};const ee=j=>{var se,ye;J={x:Math.abs(Math.round(j.pageX)-(((se=T.current)==null?void 0:se.x)??0)),y:Math.abs(Math.round(j.pageY)-(((ye=T.current)==null?void 0:ye.y)??0))}},X=j=>{J.x<=10&&J.y<=10?j.preventDefault():I.contains(j.target)||C(!1),document.removeEventListener("pointermove",ee),T.current=null};return T.current!==null&&(document.addEventListener("pointermove",ee),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ee),document.removeEventListener("pointerup",X,{capture:!0})}}},[I,C,T]),F.useEffect(()=>{const J=()=>C(!1);return window.addEventListener("blur",J),window.addEventListener("resize",J),()=>{window.removeEventListener("blur",J),window.removeEventListener("resize",J)}},[C]);const[E,P]=d1e(J=>{const ee=R().filter(se=>!se.disabled),X=ee.find(se=>se.ref.current===document.activeElement),j=h1e(ee,J,X);j&&setTimeout(()=>j.ref.current.focus())}),_=F.useCallback((J,ee,X)=>{const j=!w.current&&!X;(S.value!==void 0&&S.value===ee||j)&&(Q(J),j&&(w.current=!0))},[S.value]),H=F.useCallback(()=>I==null?void 0:I.focus(),[I]),ne=F.useCallback((J,ee,X)=>{const j=!w.current&&!X;(S.value!==void 0&&S.value===ee||j)&&G(J)},[S.value]),$=r==="popper"?SG:Qbe,te=$===SG?{side:o,sideOffset:c,align:l,alignOffset:u,arrowPadding:f,collisionBoundary:d,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v}:{};return x.jsx(Jbe,{scope:n,content:I,viewport:D,onViewportChange:V,itemRefCallback:_,selectedItem:U,onItemLeave:H,itemTextRefCallback:ne,focusSelectedItem:L,selectedItemText:ie,position:r,isPositioned:k,searchRef:E,children:x.jsx(oL,{as:tKe,allowPinchZoom:!0,children:x.jsx(iL,{asChild:!0,trapped:S.open,onMountAutoFocus:J=>{J.preventDefault()},onUnmountAutoFocus:ln(s,J=>{var ee;(ee=S.trigger)==null||ee.focus({preventScroll:!0}),J.preventDefault()}),children:x.jsx(e4,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:J=>J.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:x.jsx($,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:J=>J.preventDefault(),...A,...te,onPlaced:()=>b(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:ln(A.onKeyDown,J=>{const ee=J.ctrlKey||J.altKey||J.metaKey;if(J.key==="Tab"&&J.preventDefault(),!ee&&J.key.length===1&&P(J.key),["ArrowUp","ArrowDown","Home","End"].includes(J.key)){let j=R().filter(se=>!se.disabled).map(se=>se.ref.current);if(["ArrowUp","End"].includes(J.key)&&(j=j.slice().reverse()),["ArrowUp","ArrowDown"].includes(J.key)){const se=J.target,ye=j.indexOf(se);j=j.slice(ye+1)}setTimeout(()=>N(j)),J.preventDefault()}})})})})})})});Ybe.displayName=eKe;var nKe="SelectItemAlignedPosition",Qbe=F.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Pb(h2,n),a=Ob(h2,n),[o,c]=F.useState(null),[l,u]=F.useState(null),f=ss(e,O=>u(O)),d=yL(n),p=F.useRef(!1),g=F.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:A,focusSelectedItem:S}=a,I=F.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&l&&m&&v&&A){const O=i.trigger.getBoundingClientRect(),U=l.getBoundingClientRect(),Q=i.valueNode.getBoundingClientRect(),ie=A.getBoundingClientRect();if(i.dir!=="rtl"){const se=ie.left-U.left,ye=Q.left-se,Ce=O.left-ye,xe=O.width+Ce,De=Math.max(xe,U.width),qe=window.innerWidth-wd,ze=xoe(ye,[wd,Math.max(wd,qe-De)]);o.style.minWidth=xe+"px",o.style.left=ze+"px"}else{const se=U.right-ie.right,ye=window.innerWidth-Q.right-se,Ce=window.innerWidth-O.right-ye,xe=O.width+Ce,De=Math.max(xe,U.width),qe=window.innerWidth-wd,ze=xoe(ye,[wd,Math.max(wd,qe-De)]);o.style.minWidth=xe+"px",o.style.right=ze+"px"}const G=d(),R=window.innerHeight-wd*2,k=m.scrollHeight,b=window.getComputedStyle(l),w=parseInt(b.borderTopWidth,10),N=parseInt(b.paddingTop,10),L=parseInt(b.borderBottomWidth,10),C=parseInt(b.paddingBottom,10),T=w+N+k+C+L,E=Math.min(v.offsetHeight*5,T),P=window.getComputedStyle(m),_=parseInt(P.paddingTop,10),H=parseInt(P.paddingBottom,10),ne=O.top+O.height/2-wd,$=R-ne,te=v.offsetHeight/2,J=v.offsetTop+te,ee=w+N+J,X=T-ee;if(ee<=ne){const se=G.length>0&&v===G[G.length-1].ref.current;o.style.bottom="0px";const ye=l.clientHeight-m.offsetTop-m.offsetHeight,Ce=Math.max($,te+(se?H:0)+ye+L),xe=ee+Ce;o.style.height=xe+"px"}else{const se=G.length>0&&v===G[0].ref.current;o.style.top="0px";const Ce=Math.max(ne,w+m.offsetTop+(se?_:0)+te)+X;o.style.height=Ce+"px",m.scrollTop=ee-ne+m.offsetTop}o.style.margin=`${wd}px 0`,o.style.minHeight=E+"px",o.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[d,i.trigger,i.valueNode,o,l,m,v,A,i.dir,r]);Wa(()=>I(),[I]);const[B,D]=F.useState();Wa(()=>{l&&D(window.getComputedStyle(l).zIndex)},[l]);const V=F.useCallback(O=>{O&&g.current===!0&&(I(),S==null||S(),g.current=!1)},[I,S]);return x.jsx(sKe,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:p,onScrollButtonChange:V,children:x.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:B},children:x.jsx($n.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Qbe.displayName=nKe;var rKe="SelectPopperPosition",SG=F.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=wd,...i}=t,a=wL(n);return x.jsx(bZ,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SG.displayName=rKe;var[sKe,EZ]=i4(h2,{}),IG="SelectViewport",Zbe=F.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Ob(IG,n),a=EZ(IG,n),o=ss(e,i.onViewportChange),c=F.useRef(0);return x.jsxs(x.Fragment,{children:[x.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),x.jsx(mL.Slot,{scope:n,children:x.jsx($n.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ln(s.onScroll,l=>{const u=l.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:d}=a;if(d!=null&&d.current&&f){const p=Math.abs(c.current-u.scrollTop);if(p>0){const g=window.innerHeight-wd*2,m=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),A=Math.max(m,v);if(A<g){const S=A+p,I=Math.min(g,S),B=S-I;f.style.height=I+"px",f.style.bottom==="0px"&&(u.scrollTop=B>0?B:0,f.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});Zbe.displayName=IG;var Xbe="SelectGroup",[iKe,aKe]=i4(Xbe),e1e=F.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Jd();return x.jsx(iKe,{scope:n,id:s,children:x.jsx($n.div,{role:"group","aria-labelledby":s,...r,ref:e})})});e1e.displayName=Xbe;var t1e="SelectLabel",oKe=F.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=aKe(t1e,n);return x.jsx($n.div,{id:s.id,...r,ref:e})});oKe.displayName=t1e;var KB="SelectItem",[cKe,n1e]=i4(KB),r1e=F.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,o=Pb(KB,n),c=Ob(KB,n),l=o.value===r,[u,f]=F.useState(i??""),[d,p]=F.useState(!1),g=ss(e,S=>{var I;return(I=c.itemRefCallback)==null?void 0:I.call(c,S,r,s)}),m=Jd(),v=F.useRef("touch"),A=()=>{s||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return x.jsx(cKe,{scope:n,value:r,disabled:s,textId:m,isSelected:l,onItemTextChange:F.useCallback(S=>{f(I=>I||((S==null?void 0:S.textContent)??"").trim())},[]),children:x.jsx(mL.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:x.jsx($n.div,{role:"option","aria-labelledby":m,"data-highlighted":d?"":void 0,"aria-selected":l&&d,"data-state":l?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:g,onFocus:ln(a.onFocus,()=>p(!0)),onBlur:ln(a.onBlur,()=>p(!1)),onClick:ln(a.onClick,()=>{v.current!=="mouse"&&A()}),onPointerUp:ln(a.onPointerUp,()=>{v.current==="mouse"&&A()}),onPointerDown:ln(a.onPointerDown,S=>{v.current=S.pointerType}),onPointerMove:ln(a.onPointerMove,S=>{var I;v.current=S.pointerType,s?(I=c.onItemLeave)==null||I.call(c):v.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ln(a.onPointerLeave,S=>{var I;S.currentTarget===document.activeElement&&((I=c.onItemLeave)==null||I.call(c))}),onKeyDown:ln(a.onKeyDown,S=>{var B;((B=c.searchRef)==null?void 0:B.current)!==""&&S.key===" "||(Wqe.includes(S.key)&&A(),S.key===" "&&S.preventDefault())})})})})});r1e.displayName=KB;var gI="SelectItemText",s1e=F.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=Pb(gI,n),o=Ob(gI,n),c=n1e(gI,n),l=Qqe(gI,n),[u,f]=F.useState(null),d=ss(e,A=>f(A),c.onItemTextChange,A=>{var S;return(S=o.itemTextRefCallback)==null?void 0:S.call(o,A,c.value,c.disabled)}),p=u==null?void 0:u.textContent,g=F.useMemo(()=>x.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=l;return Wa(()=>(m(g),()=>v(g)),[m,v,g]),x.jsxs(x.Fragment,{children:[x.jsx($n.span,{id:c.textId,...i,ref:d}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?$2.createPortal(i.children,a.valueNode):null]})});s1e.displayName=gI;var i1e="SelectItemIndicator",a1e=F.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return n1e(i1e,n).isSelected?x.jsx($n.span,{"aria-hidden":!0,...r,ref:e}):null});a1e.displayName=i1e;var CG="SelectScrollUpButton",o1e=F.forwardRef((t,e)=>{const n=Ob(CG,t.__scopeSelect),r=EZ(CG,t.__scopeSelect),[s,i]=F.useState(!1),a=ss(e,r.onScrollButtonChange);return Wa(()=>{if(n.viewport&&n.isPositioned){let o=function(){const l=c.scrollTop>0;i(l)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),s?x.jsx(l1e,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});o1e.displayName=CG;var TG="SelectScrollDownButton",c1e=F.forwardRef((t,e)=>{const n=Ob(TG,t.__scopeSelect),r=EZ(TG,t.__scopeSelect),[s,i]=F.useState(!1),a=ss(e,r.onScrollButtonChange);return Wa(()=>{if(n.viewport&&n.isPositioned){let o=function(){const l=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<l;i(u)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),s?x.jsx(l1e,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});c1e.displayName=TG;var l1e=F.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Ob("SelectScrollButton",n),a=F.useRef(null),o=yL(n),c=F.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return F.useEffect(()=>()=>c(),[c]),Wa(()=>{var u;const l=o().find(f=>f.ref.current===document.activeElement);(u=l==null?void 0:l.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),x.jsx($n.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ln(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:ln(s.onPointerMove,()=>{var l;(l=i.onItemLeave)==null||l.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:ln(s.onPointerLeave,()=>{c()})})}),lKe="SelectSeparator",uKe=F.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return x.jsx($n.div,{"aria-hidden":!0,...r,ref:e})});uKe.displayName=lKe;var NG="SelectArrow",fKe=F.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=wL(n),i=Pb(NG,n),a=Ob(NG,n);return i.open&&a.position==="popper"?x.jsx(vZ,{...s,...r,ref:e}):null});fKe.displayName=NG;var dKe="SelectBubbleInput",u1e=F.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=F.useRef(null),i=ss(r,s),a=Sme(e);return F.useEffect(()=>{const o=s.current;if(!o)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&u){const f=new Event("change",{bubbles:!0});u.call(o,e),o.dispatchEvent(f)}},[a,e]),x.jsx($n.select,{...n,style:{...Vbe,...n.style},ref:i,defaultValue:e})});u1e.displayName=dKe;function f1e(t){return t===""||t===void 0}function d1e(t){const e=Uf(t),n=F.useRef(""),r=F.useRef(0),s=F.useCallback(a=>{const o=n.current+a;e(o),function c(l){n.current=l,window.clearTimeout(r.current),l!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(o)},[e]),i=F.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return F.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function h1e(t,e,n){const s=e.length>1&&Array.from(e).every(l=>l===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=hKe(t,Math.max(i,0));s.length===1&&(a=a.filter(l=>l!==n));const c=a.find(l=>l.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function hKe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var pKe=$be,gKe=Hbe,mKe=Kbe,yKe=Gbe,wKe=Wbe,bKe=zbe,vKe=Zbe,xKe=e1e,EKe=r1e,AKe=s1e,SKe=a1e,IKe=o1e,CKe=c1e,bL="Tabs",[TKe]=dh(bL,[Sbe]),p1e=Sbe(),[NKe,AZ]=TKe(bL),g1e=F.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:o,activationMode:c="automatic",...l}=t,u=lZ(o),[f,d]=P0({prop:r,onChange:s,defaultProp:i??"",caller:bL});return x.jsx(NKe,{scope:n,baseId:Jd(),value:f,onValueChange:d,orientation:a,dir:u,activationMode:c,children:x.jsx($n.div,{dir:u,"data-orientation":a,...l,ref:e})})});g1e.displayName=bL;var m1e="TabsList",y1e=F.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=AZ(m1e,n),a=p1e(n);return x.jsx(Cqe,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:x.jsx($n.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});y1e.displayName=m1e;var w1e="TabsTrigger",b1e=F.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,a=AZ(w1e,n),o=p1e(n),c=E1e(a.baseId,r),l=A1e(a.baseId,r),u=r===a.value;return x.jsx(Tqe,{asChild:!0,...o,focusable:!s,active:u,children:x.jsx($n.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:ln(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:ln(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:ln(t.onFocus,()=>{const f=a.activationMode!=="manual";!u&&!s&&f&&a.onValueChange(r)})})})});b1e.displayName=w1e;var v1e="TabsContent",x1e=F.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=t,o=AZ(v1e,n),c=E1e(o.baseId,r),l=A1e(o.baseId,r),u=r===o.value,f=F.useRef(u);return F.useEffect(()=>{const d=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(d)},[]),x.jsx(qf,{present:s||u,children:({present:d})=>x.jsx($n.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!d,id:l,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:d&&i})})});x1e.displayName=v1e;function E1e(t,e){return`${t}-trigger-${e}`}function A1e(t,e){return`${t}-content-${e}`}var kKe=g1e,PKe=y1e,OKe=b1e,RKe=x1e,SZ="ToastProvider",[IZ,_Ke,BKe]=cZ("Toast"),[S1e]=dh("Toast",[BKe]),[MKe,vL]=S1e(SZ),I1e=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=t,[o,c]=F.useState(null),[l,u]=F.useState(0),f=F.useRef(!1),d=F.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${SZ}\`. Expected non-empty \`string\`.`),x.jsx(IZ.Provider,{scope:e,children:x.jsx(MKe,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:l,viewport:o,onViewportChange:c,onToastAdd:F.useCallback(()=>u(p=>p+1),[]),onToastRemove:F.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:d,children:a})})};I1e.displayName=SZ;var C1e="ToastViewport",DKe=["F8"],kG="toast.viewportPause",PG="toast.viewportResume",T1e=F.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=DKe,label:s="Notifications ({hotkey})",...i}=t,a=vL(C1e,n),o=_Ke(n),c=F.useRef(null),l=F.useRef(null),u=F.useRef(null),f=F.useRef(null),d=ss(e,f,a.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=a.toastCount>0;F.useEffect(()=>{const v=A=>{var I;r.length!==0&&r.every(B=>A[B]||A.code===B)&&((I=f.current)==null||I.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),F.useEffect(()=>{const v=c.current,A=f.current;if(g&&v&&A){const S=()=>{if(!a.isClosePausedRef.current){const V=new CustomEvent(kG);A.dispatchEvent(V),a.isClosePausedRef.current=!0}},I=()=>{if(a.isClosePausedRef.current){const V=new CustomEvent(PG);A.dispatchEvent(V),a.isClosePausedRef.current=!1}},B=V=>{!v.contains(V.relatedTarget)&&I()},D=()=>{v.contains(document.activeElement)||I()};return v.addEventListener("focusin",S),v.addEventListener("focusout",B),v.addEventListener("pointermove",S),v.addEventListener("pointerleave",D),window.addEventListener("blur",S),window.addEventListener("focus",I),()=>{v.removeEventListener("focusin",S),v.removeEventListener("focusout",B),v.removeEventListener("pointermove",S),v.removeEventListener("pointerleave",D),window.removeEventListener("blur",S),window.removeEventListener("focus",I)}}},[g,a.isClosePausedRef]);const m=F.useCallback(({tabbingDirection:v})=>{const S=o().map(I=>{const B=I.ref.current,D=[B,...YKe(B)];return v==="forwards"?D:D.reverse()});return(v==="forwards"?S.reverse():S).flat()},[o]);return F.useEffect(()=>{const v=f.current;if(v){const A=S=>{var D,V,O;const I=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!I){const U=document.activeElement,Q=S.shiftKey;if(S.target===v&&Q){(D=l.current)==null||D.focus();return}const R=m({tabbingDirection:Q?"backwards":"forwards"}),k=R.findIndex(b=>b===U);X$(R.slice(k+1))?S.preventDefault():Q?(V=l.current)==null||V.focus():(O=u.current)==null||O.focus()}};return v.addEventListener("keydown",A),()=>v.removeEventListener("keydown",A)}},[o,m]),x.jsxs(F$e,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&x.jsx(OG,{ref:l,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"forwards"});X$(v)}}),x.jsx(IZ.Slot,{scope:n,children:x.jsx($n.ol,{tabIndex:-1,...i,ref:d})}),g&&x.jsx(OG,{ref:u,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"backwards"});X$(v)}})]})});T1e.displayName=C1e;var N1e="ToastFocusProxy",OG=F.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=vL(N1e,n);return x.jsx(gL,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var l;const o=a.relatedTarget;!((l=i.viewport)!=null&&l.contains(o))&&r()}})});OG.displayName=N1e;var N7="Toast",LKe="toast.swipeStart",UKe="toast.swipeMove",FKe="toast.swipeCancel",VKe="toast.swipeEnd",k1e=F.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=t,[o,c]=P0({prop:r,defaultProp:s??!0,onChange:i,caller:N7});return x.jsx(qf,{present:n||o,children:x.jsx(HKe,{open:o,...a,ref:e,onClose:()=>c(!1),onPause:Uf(t.onPause),onResume:Uf(t.onResume),onSwipeStart:ln(t.onSwipeStart,l=>{l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ln(t.onSwipeMove,l=>{const{x:u,y:f}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","move"),l.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ln(t.onSwipeCancel,l=>{l.currentTarget.setAttribute("data-swipe","cancel"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ln(t.onSwipeEnd,l=>{const{x:u,y:f}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","end"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});k1e.displayName=N7;var[$Ke,jKe]=S1e(N7,{onClose(){}}),HKe=F.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:o,onPause:c,onResume:l,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:d,onSwipeEnd:p,...g}=t,m=vL(N7,n),[v,A]=F.useState(null),S=ss(e,b=>A(b)),I=F.useRef(null),B=F.useRef(null),D=s||m.duration,V=F.useRef(0),O=F.useRef(D),U=F.useRef(0),{onToastAdd:Q,onToastRemove:ie}=m,G=Uf(()=>{var w;(v==null?void 0:v.contains(document.activeElement))&&((w=m.viewport)==null||w.focus()),a()}),R=F.useCallback(b=>{!b||b===1/0||(window.clearTimeout(U.current),V.current=new Date().getTime(),U.current=window.setTimeout(G,b))},[G]);F.useEffect(()=>{const b=m.viewport;if(b){const w=()=>{R(O.current),l==null||l()},N=()=>{const L=new Date().getTime()-V.current;O.current=O.current-L,window.clearTimeout(U.current),c==null||c()};return b.addEventListener(kG,N),b.addEventListener(PG,w),()=>{b.removeEventListener(kG,N),b.removeEventListener(PG,w)}}},[m.viewport,D,c,l,R]),F.useEffect(()=>{i&&!m.isClosePausedRef.current&&R(D)},[i,D,m.isClosePausedRef,R]),F.useEffect(()=>(Q(),()=>ie()),[Q,ie]);const k=F.useMemo(()=>v?M1e(v):null,[v]);return m.viewport?x.jsxs(x.Fragment,{children:[k&&x.jsx(qKe,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:k}),x.jsx($Ke,{scope:n,onClose:G,children:$2.createPortal(x.jsx(IZ.ItemSlot,{scope:n,children:x.jsx(U$e,{asChild:!0,onEscapeKeyDown:ln(o,()=>{m.isFocusedToastEscapeKeyDownRef.current||G(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:x.jsx($n.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:S,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ln(t.onKeyDown,b=>{b.key==="Escape"&&(o==null||o(b.nativeEvent),b.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,G()))}),onPointerDown:ln(t.onPointerDown,b=>{b.button===0&&(I.current={x:b.clientX,y:b.clientY})}),onPointerMove:ln(t.onPointerMove,b=>{if(!I.current)return;const w=b.clientX-I.current.x,N=b.clientY-I.current.y,L=!!B.current,C=["left","right"].includes(m.swipeDirection),T=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,E=C?T(0,w):0,P=C?0:T(0,N),_=b.pointerType==="touch"?10:2,H={x:E,y:P},ne={originalEvent:b,delta:H};L?(B.current=H,FP(UKe,f,ne,{discrete:!1})):Eoe(H,m.swipeDirection,_)?(B.current=H,FP(LKe,u,ne,{discrete:!1}),b.target.setPointerCapture(b.pointerId)):(Math.abs(w)>_||Math.abs(N)>_)&&(I.current=null)}),onPointerUp:ln(t.onPointerUp,b=>{const w=B.current,N=b.target;if(N.hasPointerCapture(b.pointerId)&&N.releasePointerCapture(b.pointerId),B.current=null,I.current=null,w){const L=b.currentTarget,C={originalEvent:b,delta:w};Eoe(w,m.swipeDirection,m.swipeThreshold)?FP(VKe,p,C,{discrete:!0}):FP(FKe,d,C,{discrete:!0}),L.addEventListener("click",T=>T.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),qKe=t=>{const{__scopeToast:e,children:n,...r}=t,s=vL(N7,e),[i,a]=F.useState(!1),[o,c]=F.useState(!1);return zKe(()=>a(!0)),F.useEffect(()=>{const l=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(l)},[]),o?null:x.jsx(t4,{asChild:!0,children:x.jsx(gL,{...r,children:i&&x.jsxs(x.Fragment,{children:[s.label," ",n]})})})},KKe="ToastTitle",P1e=F.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx($n.div,{...r,ref:e})});P1e.displayName=KKe;var GKe="ToastDescription",O1e=F.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx($n.div,{...r,ref:e})});O1e.displayName=GKe;var R1e="ToastAction",WKe=F.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?x.jsx(B1e,{altText:n,asChild:!0,children:x.jsx(CZ,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${R1e}\`. Expected non-empty \`string\`.`),null)});WKe.displayName=R1e;var _1e="ToastClose",CZ=F.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=jKe(_1e,n);return x.jsx(B1e,{asChild:!0,children:x.jsx($n.button,{type:"button",...r,ref:e,onClick:ln(t.onClick,s.onClose)})})});CZ.displayName=_1e;var B1e=F.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return x.jsx($n.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function M1e(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),JKe(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...M1e(r))}}),e}function FP(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Tme(s,i):s.dispatchEvent(i)}var Eoe=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function zKe(t=()=>{}){const e=Uf(t);Wa(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function JKe(t){return t.nodeType===t.ELEMENT_NODE}function YKe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function X$(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var QKe=I1e,ZKe=T1e,XKe=k1e,eGe=P1e,tGe=O1e,nGe=CZ,[xL]=dh("Tooltip",[s4]),EL=s4(),D1e="TooltipProvider",rGe=700,RG="tooltip.open",[sGe,TZ]=xL(D1e),L1e=t=>{const{__scopeTooltip:e,delayDuration:n=rGe,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,a=F.useRef(!0),o=F.useRef(!1),c=F.useRef(0);return F.useEffect(()=>{const l=c.current;return()=>window.clearTimeout(l)},[]),x.jsx(sGe,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:F.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:F.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:F.useCallback(l=>{o.current=l},[]),disableHoverableContent:s,children:i})};L1e.displayName=D1e;var qN="Tooltip",[iGe,k7]=xL(qN),U1e=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:a,delayDuration:o}=t,c=TZ(qN,t.__scopeTooltip),l=EL(e),[u,f]=F.useState(null),d=Jd(),p=F.useRef(0),g=a??c.disableHoverableContent,m=o??c.delayDuration,v=F.useRef(!1),[A,S]=P0({prop:r,defaultProp:s??!1,onChange:O=>{O?(c.onOpen(),document.dispatchEvent(new CustomEvent(RG))):c.onClose(),i==null||i(O)},caller:qN}),I=F.useMemo(()=>A?v.current?"delayed-open":"instant-open":"closed",[A]),B=F.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v.current=!1,S(!0)},[S]),D=F.useCallback(()=>{window.clearTimeout(p.current),p.current=0,S(!1)},[S]),V=F.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,S(!0),p.current=0},m)},[m,S]);return F.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),x.jsx(wZ,{...l,children:x.jsx(iGe,{scope:e,contentId:d,open:A,stateAttribute:I,trigger:u,onTriggerChange:f,onTriggerEnter:F.useCallback(()=>{c.isOpenDelayedRef.current?V():B()},[c.isOpenDelayedRef,V,B]),onTriggerLeave:F.useCallback(()=>{g?D():(window.clearTimeout(p.current),p.current=0)},[D,g]),onOpen:B,onClose:D,disableHoverableContent:g,children:n})})};U1e.displayName=qN;var _G="TooltipTrigger",F1e=F.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=k7(_G,n),i=TZ(_G,n),a=EL(n),o=F.useRef(null),c=ss(e,o,s.onTriggerChange),l=F.useRef(!1),u=F.useRef(!1),f=F.useCallback(()=>l.current=!1,[]);return F.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),x.jsx(hL,{asChild:!0,...a,children:x.jsx($n.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:ln(t.onPointerMove,d=>{d.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:ln(t.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:ln(t.onPointerDown,()=>{s.open&&s.onClose(),l.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ln(t.onFocus,()=>{l.current||s.onOpen()}),onBlur:ln(t.onBlur,s.onClose),onClick:ln(t.onClick,s.onClose)})})});F1e.displayName=_G;var NZ="TooltipPortal",[aGe,oGe]=xL(NZ,{forceMount:void 0}),V1e=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,i=k7(NZ,e);return x.jsx(aGe,{scope:e,forceMount:n,children:x.jsx(qf,{present:n||i.open,children:x.jsx(t4,{asChild:!0,container:s,children:r})})})};V1e.displayName=NZ;var i5="TooltipContent",$1e=F.forwardRef((t,e)=>{const n=oGe(i5,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,a=k7(i5,t.__scopeTooltip);return x.jsx(qf,{present:r||a.open,children:a.disableHoverableContent?x.jsx(j1e,{side:s,...i,ref:e}):x.jsx(cGe,{side:s,...i,ref:e})})}),cGe=F.forwardRef((t,e)=>{const n=k7(i5,t.__scopeTooltip),r=TZ(i5,t.__scopeTooltip),s=F.useRef(null),i=ss(e,s),[a,o]=F.useState(null),{trigger:c,onClose:l}=n,u=s.current,{onPointerInTransitChange:f}=r,d=F.useCallback(()=>{o(null),f(!1)},[f]),p=F.useCallback((g,m)=>{const v=g.currentTarget,A={x:g.clientX,y:g.clientY},S=dGe(A,v.getBoundingClientRect()),I=hGe(A,S),B=pGe(m.getBoundingClientRect()),D=mGe([...I,...B]);o(D),f(!0)},[f]);return F.useEffect(()=>()=>d(),[d]),F.useEffect(()=>{if(c&&u){const g=v=>p(v,u),m=v=>p(v,c);return c.addEventListener("pointerleave",g),u.addEventListener("pointerleave",m),()=>{c.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",m)}}},[c,u,p,d]),F.useEffect(()=>{if(a){const g=m=>{const v=m.target,A={x:m.clientX,y:m.clientY},S=(c==null?void 0:c.contains(v))||(u==null?void 0:u.contains(v)),I=!gGe(A,a);S?d():I&&(d(),l())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,u,a,l,d]),x.jsx(j1e,{...t,ref:i})}),[lGe,uGe]=xL(qN,{isInside:!1}),fGe=SDe("TooltipContent"),j1e=F.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...o}=t,c=k7(i5,n),l=EL(n),{onClose:u}=c;return F.useEffect(()=>(document.addEventListener(RG,u),()=>document.removeEventListener(RG,u)),[u]),F.useEffect(()=>{if(c.trigger){const f=d=>{const p=d.target;p!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,u]),x.jsx(e4,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:x.jsxs(bZ,{"data-state":c.stateAttribute,...l,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[x.jsx(fGe,{children:r}),x.jsx(lGe,{scope:n,isInside:!0,children:x.jsx(Kqe,{id:c.contentId,role:"tooltip",children:s||r})})]})})});$1e.displayName=i5;var H1e="TooltipArrow",q1e=F.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=EL(n);return uGe(H1e,n).isInside?null:x.jsx(vZ,{...s,...r,ref:e})});q1e.displayName=H1e;function dGe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function hGe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function pGe(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function gGe(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const o=e[i],c=e[a],l=o.x,u=o.y,f=c.x,d=c.y;u>r!=d>r&&n<(f-l)*(r-u)/(d-u)+l&&(s=!s)}return s}function mGe(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),yGe(e)}function yGe(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var wGe=L1e,bGe=U1e,vGe=F1e,xGe=V1e,EGe=$1e,AGe=q1e,SGe=["positive","negative","info","warning","destructive","primary","secondary","muted","inverse","backgroundPrimary","backgroundSecondary","backgroundMuted","backgroundInverse","backgroundOverlay","backgroundRaised","backgroundInput","backgroundHover","backgroundActive","borderNormal","borderHover","borderFocus","borderButton","borderCard","gradientBackdrop","gradientPrimary","gradientSecondary","gradientSkeleton"],IGe=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase()),CGe="data-theme",TGe="dark",NGe="@sequence.theme",K1e=F.createContext(null),kGe=t=>{const{children:e,customThemes:n,defaultTheme:r=TGe,storageKey:s=NGe,root:i}=t,[a,o]=F.useState(()=>t.theme||MGe(s)||r),c=F.useMemo(()=>a==="system"?DGe():a,[a]),[l,u]=F.useState(void 0);F.useEffect(()=>{t.theme&&o(t.theme)},[t.theme]),F.useEffect(()=>{/Mac/.test(window.navigator.userAgent)&&window.document.documentElement.classList.add("is-apple")},[]),F.useEffect(()=>{const d=typeof i=="object"?i:document.querySelector(i||":root");if(d){_Ge(d),d.setAttribute(CGe,c);const p={...n==null?void 0:n[c]};BGe(d,p),i&&d.classList.add("seq-root"),u(i?d:document.body)}},[c,i,n]);const f=F.useMemo(()=>({theme:a,resolvedTheme:c,container:l,setTheme:d=>{s&&typeof localStorage<"u"&&localStorage.setItem(s,d),o(d)}}),[a,c,n,l,s]);return x.jsx(K1e.Provider,{value:f,children:e})},kZ=()=>{const t=F.useContext(K1e);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},PGe=["light","dark","system"],OGe=t=>typeof t=="string"&&PGe.includes(t),G1e=t=>`--seq-color-${IGe(t)}`,RGe=SGe.map(t=>G1e(t)),_Ge=t=>{RGe.forEach(e=>{t.style.removeProperty(e)})},BGe=(t,e)=>{Object.entries(e).forEach(([n,r])=>{r&&t.style.setProperty(G1e(n),r)})},MGe=t=>{if(!t||typeof localStorage>"u")return null;const e=localStorage.getItem(t);return e&&OGe(e)?e:null},DGe=()=>typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",LGe=X_e({extend:{classGroups:{"font-size":["text-xlarge","text-large","text-medium","text-normal","text-normal-bold","text-small","text-small-bold",{text:[t=>/^\d+$/.test(t)]}]}}}),rn=(...t)=>LGe(s2(t)),oa=Wi("block shrink-0",{variants:{size:{default:"w-5 h-5",xxs:"size-3",xs:"size-4",sm:"size-5",md:"size-6",lg:"size-7",xl:"size-9"}},defaultVariants:{size:"default"}}),UGe=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:x.jsx("path",{fill:"currentColor",d:"M13 3a1 1 0 1 0-2 0v8H3a1 1 0 1 0 0 2h8v8a1 1 0 1 0 2 0v-8h8a1 1 0 1 0 0-2h-8z"})}),FGe=({className:t,size:e,...n})=>x.jsx(UGe,{className:rn(oa({size:e}),t),...n}),P7=FGe,VGe=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M21.635 4.235c.426.362.488 1.014.138 1.455L10.999 19.245a1.958 1.958 0 0 1-3.01.095l-5.722-6.368a1.06 1.06 0 0 1 .053-1.461.977.977 0 0 1 1.413.054l5.72 6.368L20.228 4.378a.98.98 0 0 1 1.408-.143",clipRule:"evenodd"})}),$Ge=({className:t,size:e,...n})=>x.jsx(VGe,{className:rn(oa({size:e}),t),...n}),Ff=$Ge,jGe=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.293 7.814a1 1 0 0 1 1.414 0L12 14.107l6.293-6.293a1 1 0 1 1 1.414 1.414l-6.93 6.93a1.1 1.1 0 0 1-1.555 0l-6.93-6.93a1 1 0 0 1 0-1.414",clipRule:"evenodd"})}),HGe=({className:t,size:e,...n})=>x.jsx(jGe,{className:rn(oa({size:e}),t),...n}),AL=HGe,qGe=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M16.186 19.707a1 1 0 0 0 0-1.414L9.893 12l6.293-6.293a1 1 0 0 0-1.414-1.414l-6.93 6.93a1.1 1.1 0 0 0 0 1.555l6.93 6.93a1 1 0 0 0 1.414 0",clipRule:"evenodd"})}),KGe=({className:t,size:e,...n})=>x.jsx(qGe,{className:rn(oa({size:e}),t),...n}),PZ=KGe,GGe=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.293 16.186a1 1 0 0 0 1.414 0L12 9.894l6.293 6.292a1 1 0 0 0 1.414-1.414l-6.93-6.93a1.1 1.1 0 0 0-1.555 0l-6.93 6.93a1 1 0 0 0 0 1.414",clipRule:"evenodd"})}),WGe=({className:t,size:e,...n})=>x.jsx(GGe,{className:rn(oa({size:e}),t),...n}),zGe=WGe,JGe=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:x.jsx("path",{fill:"currentColor",d:"M19.293 3.293a1 1 0 1 1 1.414 1.414L13.414 12l7.293 7.293a1 1 0 0 1-1.414 1.414L12 13.414l-7.293 7.293a1 1 0 0 1-1.414-1.414L10.586 12 3.293 4.707a1 1 0 0 1 1.414-1.414L12 10.586z"})}),YGe=({className:t,size:e,...n})=>x.jsx(JGe,{className:rn(oa({size:e}),t),...n}),p2=YGe,QGe=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:[x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M20 12v8h-8v-8zm1-2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H11a1 1 0 0 1-1-1V11a1 1 0 0 1 1-1z",clipRule:"evenodd"}),x.jsx("path",{fill:"currentColor",d:"M8 8v12H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v1z"}),x.jsx("path",{fill:"currentColor",d:"M4 4v12H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v1z"})]}),ZGe=({className:t,size:e,...n})=>x.jsx(QGe,{className:rn(oa({size:e}),t),...n}),W1e=ZGe,XGe=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:x.jsx("path",{fill:"currentColor",d:"M9 18q-.825 0-1.412-.587A1.93 1.93 0 0 1 7 16V4q0-.824.588-1.412A1.93 1.93 0 0 1 9 2h9q.824 0 1.413.587Q20 3.176 20 4v12q0 .824-.587 1.413A1.93 1.93 0 0 1 18 18zm0-2h9V4H9zm-4 6q-.824 0-1.412-.587A1.93 1.93 0 0 1 3 20V7a1 1 0 0 1 2 0v13h10a1 1 0 1 1 0 2z"})}),eWe=({className:t,size:e,...n})=>x.jsx(XGe,{className:rn(oa({size:e}),t),...n}),z1e=eWe,tWe=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.95 5.988A1 1 0 0 1 8.963 5l9.777.122a1 1 0 0 1 .988.987l.121 9.778a1 1 0 1 1-2 .025l-.092-7.406-11.05 11.05a1 1 0 1 1-1.414-1.413l11.05-11.05L8.938 7a1 1 0 0 1-.988-1.012",clipRule:"evenodd"})}),nWe=({className:t,size:e,...n})=>x.jsx(tWe,{className:rn(oa({size:e}),t),...n}),SL=nWe,rWe=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 6a2 2 0 0 1 2-2h5.15a2 2 0 0 1 1.249.438L12.35 6H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2zm7.15 0H4v12h16V8h-7.65a2 2 0 0 1-1.249-.438z",clipRule:"evenodd"})}),sWe=({className:t,size:e,...n})=>x.jsx(rWe,{className:rn(oa({size:e}),t),...n}),J1e=sWe,iWe=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:[x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M21.707 2.293a1 1 0 0 1 0 1.414l-18 18a1 1 0 0 1-1.414-1.414l3.49-3.49C3.179 14.75 2 12 2 12s3-7 10-7c1.743 0 3.238.434 4.5 1.086l3.793-3.793a1 1 0 0 1 1.414 0m-8.414 7a3 3 0 0 0-4.001 4.001l-2.084 2.083a10.3 10.3 0 0 1-1.367-1.238 12.4 12.4 0 0 1-1.544-2.068L4.255 12l.042-.07c.337-.568.85-1.322 1.544-2.07C7.23 8.365 9.236 7 12 7c1.12 0 2.115.224 2.996.59z",clipRule:"evenodd"}),x.jsx("path",{fill:"currentColor",d:"M12 19c-.88 0-1.697-.11-2.453-.304l1.728-1.728Q11.629 17 12 17c2.764 0 4.77-1.364 6.16-2.86a12.4 12.4 0 0 0 1.543-2.07l.042-.07-.042-.07a12.4 12.4 0 0 0-1.437-1.953l1.416-1.416C21.267 10.291 22 12 22 12s-3 7-10 7"})]}),aWe=({className:t,size:e,...n})=>x.jsx(iWe,{className:rn(oa({size:e}),t),...n}),Y1e=aWe,oWe=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:[x.jsx("path",{fill:"currentColor",d:"M11 8a1 1 0 1 1 2 0 1 1 0 0 1-2 0M13 16a1 1 0 1 1-2 0v-4.5a1 1 0 1 1 2 0z"}),x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16m0 2c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10",clipRule:"evenodd"})]}),cWe=({className:t,size:e,...n})=>x.jsx(oWe,{className:rn(oa({size:e}),t),...n}),Q1e=cWe,lWe=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 7a1 1 0 0 1 1-1h18a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1M2 12a1 1 0 0 1 1-1h18a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1M2 17a1 1 0 0 1 1-1h18a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1",clipRule:"evenodd"})}),uWe=({className:t,size:e,...n})=>x.jsx(lWe,{className:rn(oa({size:e}),t),...n}),fWe=uWe,dWe=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.137 8.437a9.51 9.51 0 0 1 8.82-5.937A9.51 9.51 0 0 1 20 6.928V4.562a1 1 0 1 1 2 0v4.25a1 1 0 0 1-1 1h-4.256a1 1 0 1 1 0-2h1.445A7.5 7.5 0 0 0 11.956 4.5 7.51 7.51 0 0 0 4.99 9.188a1 1 0 0 1-1.853-.751m17.175 5.824a1 1 0 0 1 .551 1.302 9.515 9.515 0 0 1-8.82 5.937A9.51 9.51 0 0 1 4 17.072v2.366a1 1 0 1 1-2 0v-4.25a1 1 0 0 1 1-1h4.256a1 1 0 1 1 0 2H5.81a7.5 7.5 0 0 0 6.233 3.312 7.515 7.515 0 0 0 6.966-4.688 1 1 0 0 1 1.302-.551",clipRule:"evenodd"})}),hWe=({className:t,size:e,...n})=>x.jsx(dWe,{className:rn(oa({size:e}),t),...n}),OZ=hWe,pWe=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M16.097 14.68a7.87 7.87 0 1 0-12.8-9.14A7.872 7.872 0 0 0 14.68 16.096l5.609 5.61a1.003 1.003 0 0 0 1.417-1.418zm-1.33-8.038a5.866 5.866 0 0 1-1.671 8.125 5.864 5.864 0 1 1 1.671-8.125",clipRule:"evenodd"})}),gWe=({className:t,size:e,...n})=>x.jsx(pWe,{className:rn(oa({size:e}),t),...n}),BG=gWe,mWe=t=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 8.586a3 3 0 0 0 .879 2.121L5.172 12l-1.293 1.293A3 3 0 0 0 3 15.414v4.42c0 1.585 1.69 2.598 3.088 1.852l14.688-7.833c1.482-.79 1.482-2.915 0-3.706L6.088 2.314C4.69 1.568 3 2.58 3 4.167zm2.293.707A1 1 0 0 1 5 8.586v-4.42a.1.1 0 0 1 .147-.088l14.688 7.834a.1.1 0 0 1 0 .176L5.147 19.922A.1.1 0 0 1 5 19.833v-4.419a1 1 0 0 1 .293-.707L7 13h4.5a1 1 0 0 0 0-2H7z",clipRule:"evenodd"})}),yWe=({className:t,size:e,...n})=>x.jsx(mWe,{className:rn(oa({size:e}),t),...n}),Z1e=yWe,wWe=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:[x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M10 4a1 1 0 0 1 1-1h6.5a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H11a1 1 0 1 1 0-2h6.5a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H11a1 1 0 0 1-1-1",clipRule:"evenodd"}),x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.793 8.293a1 1 0 0 1 1.414 0L13.914 12l-3.707 3.707a1 1 0 0 1-1.414-1.414L10.086 13H4a1 1 0 1 1 0-2h6.086L8.793 9.707a1 1 0 0 1 0-1.414",clipRule:"evenodd"})]}),bWe=({className:t,size:e,...n})=>x.jsx(wWe,{className:rn(oa({size:e}),t),...n}),vWe=bWe,xWe=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:[x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M18.16 9.86C16.77 8.365 14.763 7 12 7S7.23 8.364 5.84 9.86A12.4 12.4 0 0 0 4.256 12q.02.035.042.07c.337.568.85 1.322 1.544 2.07C7.23 15.635 9.236 17 12 17s4.77-1.364 6.16-2.86A12.4 12.4 0 0 0 19.744 12l-.042-.07c-.337-.568-.85-1.322-1.544-2.07M22 12s-3-7-10-7-10 7-10 7 3 7 10 7 10-7 10-7m-1.836-.793v-.002zm0 1.588v-.002zm-16.329 0 .001-.002zm.001-1.588v-.002q-.001 0 0 0z",clipRule:"evenodd"}),x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 13.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m0 1.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6",clipRule:"evenodd"})]}),EWe=({className:t,size:e,...n})=>x.jsx(xWe,{className:rn(oa({size:e}),t),...n}),X1e=EWe,AWe=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:[x.jsx("path",{fill:"currentColor",d:"M5 3C3.343 3 2 4.344 2 6.003v11.744A3.25 3.25 0 0 0 5.25 21h13.5A3.25 3.25 0 0 0 22 17.747V8.004a1 1 0 0 0-1-1h-2V4A1 1 0 0 0 18 3zm0 2.002h12v2.001H5a1 1 0 0 1 0-2.001m0 4.003h15v8.742a1.25 1.25 0 0 1-1.25 1.251H5.25c-.69 0-1.25-.56-1.25-1.25l.006-8.919s.358.18.994.176"}),x.jsx("path",{fill:"currentColor",d:"M16 14a1 1 0 1 1 2 0 1 1 0 0 1-2 0"})]}),SWe=({className:t,size:e,...n})=>x.jsx(AWe,{className:rn(oa({size:e}),t),...n}),IWe=SWe,CWe=t=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:[x.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 4.74 19.631 19H4.37zm9.822 14.115c.514.96-.147 2.145-1.195 2.145H3.373c-1.048 0-1.709-1.185-1.195-2.145l8.627-16.12a1.34 1.34 0 0 1 2.39 0z",clipRule:"evenodd"}),x.jsx("path",{fill:"currentColor",d:"M13 17a1 1 0 1 1-2 0 1 1 0 0 1 2 0M11 10a1 1 0 1 1 2 0v4a1 1 0 1 1-2 0z"})]}),TWe=({className:t,size:e,...n})=>x.jsx(CWe,{className:rn(oa({size:e}),t),...n}),eve=TWe,O7="disabled:cursor-not-allowed disabled:opacity-50 disabled:pointer-events-none",a4="border-1 border-border-normal hover:not-disabled:not-[[aria-invalid=true]]:not-has-[[aria-invalid=true]]:border-border-hover",W0=Wi("",{variants:{variant:{visible:"focus-visible:outline-2 focus-visible:outline-border-focus",within:"has-[:focus-visible]:outline-2 has-[:focus-visible]:outline-border-focus"},inner:{true:"outline-offset-[-2px]",false:"outline-offset-1"}},defaultVariants:{inner:!0,variant:"visible"}}),Sa=Wi("",{variants:{variant:{inherit:["font-inherit","text-inherit","leading-inherit","tracking-inherit","font-inherit"],xxxlarge:["font-body","font-bold","text-6xl","tracking-normal","leading-15"],xxlarge:["font-body","font-bold","text-4xl","tracking-widest","leading-10"],xlarge:["font-body","font-bold","text-2xl","tracking-normal","leading-8"],large:["font-body","font-semibold","text-xl","tracking-normal","leading-7"],medium:["font-body","font-bold","text-base","tracking-normal","leading-6"],"normal-bold":["font-body","font-bold","text-sm","tracking-wide","leading-5"],normal:["font-body","font-medium","text-sm","tracking-wide","leading-5"],"small-bold":["font-body","font-bold","text-xs","tracking-normal","leading-4"],small:["font-body","font-medium","text-xs","tracking-wide","leading-4"],"xsmall-bold":["font-body","font-bold","text-[0.625rem]","tracking-wide","leading-4"],xsmall:["font-body","font-bold","text-[0.625rem]","tracking-wide","leading-4"],code:["font-mono","font-normal","text-sm","tracking-normal","leading-5"]},fontWeight:{normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold"},color:{primary:"text-primary",secondary:"text-secondary",muted:"text-muted",inverse:"text-inverse",white:"text-white",black:"text-black",negative:"text-negative",positive:"text-positive",warning:"text-warning",info:"text-info",text100:"text-primary",text80:"text-secondary",text50:"text-muted",inverse100:"text-inverse"},ellipsis:{true:["overflow-hidden","whitespace-nowrap","text-ellipsis"]},italic:{true:"italic"},underline:{true:"underline"},uppercase:{true:"uppercase"},capitalize:{true:"capitalize"},nowrap:{true:"whitespace-nowrap"},block:{true:"block"},hidden:{true:["border-0","clip-rect-0","h-[1px]","-m-[1px]","overflow-hidden","p-0","absolute","w-[1px]"]}},defaultVariants:{variant:"inherit"}}),ke=t=>{const{asChild:e,variant:n="inherit",color:r,fontWeight:s,className:i,hidden:a,italic:o,underline:c,ellipsis:l,uppercase:u,capitalize:f,nowrap:d,block:p,...g}=t,m=e?LD:"span";return x.jsx(m,{className:rn(Sa({variant:n,fontWeight:s,color:r,hidden:a,italic:o,underline:c,ellipsis:l,uppercase:u,capitalize:f,nowrap:d,block:p}),i),...g})},tve=Wi(["inline-flex items-center gap-2 whitespace-nowrap overflow-hidden text-decoration-none cursor-pointer","disabled:cursor-default disabled:opacity-50",W0()],{variants:{size:{xs:[Sa({variant:"xsmall-bold"}),'min-w-7 h-7 px-2 gap-1 [&_svg:not([class*="size-"])]:size-4'],sm:[Sa({variant:"normal-bold"}),'min-w-9 h-9 px-3 gap-1 [&_svg:not([class*="size-"])]:size-5'],md:[Sa({variant:"normal-bold"}),'min-w-11 h-11 px-4 [&_svg:not([class*="size-"])]:size-5'],lg:[Sa({variant:"normal-bold"}),'min-w-13 h-13 px-5 [&_svg:not([class*="size-"])]:size-5']},shape:{circle:"rounded-full",square:"rounded-lg"},variant:{primary:"bg-gradient-primary text-white hover:opacity-80 border-1 border-transparent bg-origin-border",secondary:"bg-background-secondary text-primary border-1 border-border-button hover:border-border-hover hover:bg-background-hover",outline:"bg-transparent text-primary border-1 border-current hover:opacity-80",ghost:"bg-transparent text-primary/80 hover:bg-background-inverse/15 hover:text-primary",emphasis:"bg-background-inverse text-background-primary hover:bg-primary/80",destructive:"bg-destructive text-white hover:bg-destructive/80",text:["bg-transparent text-primary rounded-xs h-auto w-auto h-auto min-w-0 p-0 focus-visible:outline-offset-1 grow-0 hover:opacity-80"]},disabled:{true:"cursor-default opacity-50",false:"cursor-pointer"},iconOnly:{true:"p-0 shrink-0 items-center justify-center"}},defaultVariants:{variant:"secondary",shape:"circle",size:"md"}});function Zt({className:t,variant:e,size:n,shape:r,iconOnly:s,disabled:i,asChild:a=!1,...o}){const c=a?LD:"button";return x.jsx(c,{"data-slot":"button",className:rn(tve({variant:e,size:n,shape:r,iconOnly:s,disabled:i}),t),disabled:i,...o})}var NWe=t=>{const{ref:e,asChild:n,className:r,disabled:s=!1,pending:i=!1,label:a,leftIcon:o,rightIcon:c,size:l="md",variant:u="secondary",shape:f="circle",type:d="button",children:p,...g}=t,m=o!==void 0&&a===void 0,v=l==="xs"?"xs":"sm",A=l==="xs"?"gap-1":"gap-2",S=n?LD:"button";return x.jsxs(S,{ref:e,className:rn(tve({disabled:s||i,size:u==="text"?void 0:l,shape:u==="text"?void 0:f,variant:u}),r),disabled:s||i,type:d,...g,children:[x.jsx(sBe,{children:p}),m?x.jsx(o,{size:v}):x.jsxs("div",{className:rn("w-full h-full flex items-center justify-between",A),children:[x.jsxs("div",{className:rn("flex items-center justify-start",A),children:[o&&x.jsx(o,{size:v}),a]}),c&&x.jsx(c,{size:v})]})]})};Zt.Helper=NWe;var kWe=Wi([Sa({variant:"normal"}),"text-primary relative w-full rounded-lg border-1 border-(--alert-border) bg-(--alert-background) p-4 grid gap-y-2 items-center grid-cols-[auto_1fr_auto]","[&>svg]:mr-2 [&>svg]:text-(--alert-accent) [&>svg]:self-start [&_[data-slot=alert-button]]:text-(--alert-accent)"],{variants:{variant:{info:["[--alert-background:var(--color-indigo-200)] dark:[--alert-background:var(--color-indigo-950)]","[--alert-border:var(--color-indigo-500)] dark:[--alert-border:var(--color-indigo-900)]","[--alert-accent:var(--color-indigo-700)] dark:[--alert-accent:var(--color-indigo-400)]"],success:["[--alert-background:var(--color-green-200)] dark:[--alert-background:var(--color-green-950)]","[--alert-border:var(--color-green-500)] dark:[--alert-border:var(--color-green-900)]","[--alert-accent:var(--color-green-700)] dark:[--alert-accent:var(--color-green-400)]"],warning:["[--alert-background:var(--color-yellow-100)] dark:[--alert-background:var(--color-yellow-950)]","[--alert-border:var(--color-yellow-500)] dark:[--alert-border:var(--color-yellow-900)]","[--alert-accent:var(--color-yellow-700)] dark:[--alert-accent:var(--color-yellow-400)]"],error:["[--alert-background:var(--color-red-200)] dark:[--alert-background:var(--color-red-950)]","[--alert-border:var(--color-red-500)] dark:[--alert-border:var(--color-red-900)]","[--alert-accent:var(--color-red-700)] dark:[--alert-accent:var(--color-red-400)]"]}},defaultVariants:{variant:"info"}});function g2({className:t,variant:e,...n}){return x.jsx("div",{"data-slot":"alert",role:"alert",className:rn(kWe({variant:e}),t),...n})}function PWe({className:t,...e}){return x.jsx("div",{"data-slot":"alert-title",className:rn(Sa({variant:"normal-bold"}),"text-(--alert-accent) col-start-2 col-end-4 min-h-4 sm:col-end-3",t),...e})}function OWe({className:t,...e}){return x.jsx("div",{"data-slot":"alert-description",className:rn(Sa({variant:"normal"}),"text-current col-start-2 col-end-4 grid justify-items-start gap-1 sm:col-end-3",t),...e})}function RWe({variant:t,size:e="sm",...n}){switch(t){case"info":return x.jsx(Q1e,{size:e,...n});case"success":return x.jsx(Ff,{size:e,...n});case"warning":case"error":return x.jsx(eve,{size:e,...n});default:return null}}function _We({variant:t,title:e,description:n,children:r,...s}){return x.jsxs(g2,{variant:t,...s,children:[x.jsx(RWe,{variant:t}),x.jsx(PWe,{children:e}),n&&x.jsx(OWe,{children:n}),r]})}g2.Helper=_We;Wi(["inline-flex","shrink-0","items-center","rounded-full","text-white","whitespace-nowrap","font-normal"],{variants:{variant:{info:"bg-info",warning:"bg-warning",success:"bg-positive",error:"bg-negative"},size:{sm:[Sa({variant:"small"}),"h-4","min-w-4","px-2"],md:[Sa({variant:"normal"}),"h-5","min-w-5","px-3"],lg:[Sa({variant:"medium"}),"h-6","min-w-6","px-4"]}},defaultVariants:{variant:"info",size:"md"}});Wi([Sa({variant:"normal"}),"text-primary relative w-full rounded-lg border-1 overflow-hidden bg-(--callout-header) border-(--callout-header)"],{variants:{variant:{info:["[--callout-header:var(--color-indigo-500)] dark:[--callout-header:var(--color-indigo-900)]","[--callout-content:var(--color-indigo-200)] dark:[--callout-content:var(--color-indigo-950)]","[--callout-accent:var(--color-indigo-700)] dark:[--callout-accent:var(--color-indigo-400)]"],success:["[--callout-header:var(--color-green-500)] dark:[--callout-header:var(--color-green-900)]","[--callout-content:var(--color-green-200)] dark:[--callout-content:var(--color-green-950)]","[--callout-accent:var(--color-green-700)] dark:[--callout-accent:var(--color-green-400)]"],warning:["[--callout-header:var(--color-yellow-500)] dark:[--callout-header:var(--color-yellow-900)]","[--callout-content:var(--color-yellow-100)] dark:[--callout-content:var(--color-yellow-950)]","[--callout-accent:var(--color-yellow-700)] dark:[--callout-accent:var(--color-yellow-400)]"],error:["[--callout-header:var(--color-red-500)] dark:[--callout-header:var(--color-red-900)]","[--callout-content:var(--color-red-200)] dark:[--callout-content:var(--color-red-950)]","[--callout-accent:var(--color-red-700)] dark:[--callout-accent:var(--color-red-400)]"]}},defaultVariants:{variant:"info"}});var BWe=Wi(["overflow-hidden","rounded-xl","p-4","w-full"],{variants:{variant:{default:"bg-background-secondary border-1 border-border-card",outline:"bg-transparent border-1 border-border-card",muted:"bg-background-muted border-1 border-border-card"},clickable:{true:["cursor-pointer hover:opacity-80",W0()]},disabled:{true:"opacity-50 cursor-default pointer-events-none hover:border-border-card"}},defaultVariants:{variant:"default"}}),Cs=t=>{const{ref:e,className:n,children:r,variant:s,clickable:i,disabled:a,asChild:o,...c}=t,l=o?LD:"div";return x.jsx(l,{ref:e,className:rn(BWe({variant:s,clickable:i,disabled:a}),n),...c,children:r})};F.createContext(null);var MWe=Wi("",{variants:{size:{sm:"size-5",lg:"size-7"}},defaultVariants:{size:"sm"}});function o4({className:t,size:e="sm",...n}){return x.jsx(Pme,{"data-slot":"checkbox",className:rn("peer shrink-0 text-primary flex items-center justify-center bg-background-input rounded-sm cursor-pointer",MWe({size:e}),W0(),a4,O7,"aria-invalid:outline-destructive aria-invalid:border-destructive",t),...n,children:x.jsx(Rme,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:x.jsx(Ff,{size:e==="lg"?"sm":"xxs"})})})}var Aoe="64px",DWe=Wi(["min-h-[64px] rounded-xl relative overflow-hidden w-full",W0({variant:"within"})],{variants:{variant:{default:"bg-background-secondary border-1 border-border-card",muted:"bg-background-muted border-1 border-border-card",outline:"bg-transparent ring-inset border-1 border-border-normal"}},defaultVariants:{variant:"default"}}),RZ=t=>{const{className:e,variant:n,children:r,defaultOpen:s=!1,open:i,onOpenChange:a,label:o,...c}=t,[l,u]=F.useState(s),f=i??l,d=g=>{i===void 0&&u(g)},p=g=>{d(g),a==null||a(g)};return x.jsx(Vme,{open:f,defaultOpen:s,onOpenChange:p,asChild:!0,...c,children:x.jsxs(Bx.div,{className:s2(DWe({variant:n}),e),initial:{height:f?"auto":Aoe},animate:{height:f?"auto":Aoe},transition:{ease:"easeOut",duration:.3},children:[x.jsxs($me,{className:s2("flex items-center p-4 bg-transparent w-full cursor-pointer select-none rounded-xl border-none appearance-none h-[64px] focus:outline-hidden","text-primary hover:text-primary/80"),children:[x.jsx(ke,{variant:"normal",fontWeight:"bold",asChild:!0,ellipsis:!0,children:x.jsx("div",{children:o})}),x.jsx(Bx.div,{className:"absolute right-0 mr-4",initial:{rotate:f?180:0},animate:{rotate:f?180:0},transition:{ease:"linear",duration:.1},children:x.jsx(AL,{className:"h-5 w-5 block text-muted"})})]}),x.jsx(ywe,{children:f&&x.jsx(jme,{className:"pt-0 px-4 pb-4 w-full origin-top",asChild:!0,forceMount:!0,children:x.jsx(Bx.div,{initial:{opacity:f?1:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeOut",duration:.3},children:r})})})]})})},LWe=Wi("p-0 flex shrink-0 items-center justify-center",{variants:{size:{xs:"size-7",sm:"size-9",md:"size-11",lg:"size-13"}}}),Ia=t=>{const{className:e,icon:n,size:r="md",...s}=t;return x.jsx(Zt.Helper,{className:rn(LWe({size:r}),e),leftIcon:n,size:r,...s})},UWe={png:".png,image/png",jpeg:".jpeg,image/jpeg",jpg:".jpg,image/jpg",images:"image/*, video/*",pdf:".pdf,application/pdf",mp4:".mp4,video/mp4",csv:".csv,text/csv",json:".json,application/json",gif:".gif,image/gif",webp:".webp,image/webp",svg:".svg,image/svg+xml"},nve=t=>{const{disabled:e=!1,id:n,name:r,onValueChange:s,placeholder:i="Upload a file",validExtensions:a,className:o,ref:c,...l}=t,u=F.useRef(null);F.useImperativeHandle(c,()=>u.current);const[f,d]=F.useState(null),p=m=>{const v=m.currentTarget.files;if(!v||!v[0])return;const A=v[0],S=A.name,I=A.size/1e3;d({name:S,size:I,extension:S.split(".").pop()??""}),s==null||s(A)},g=a.map(m=>UWe[m]).join(",");return x.jsxs("div",{className:rn(Sa({variant:"normal"}),"w-full min-w-0 inline-flex items-center flex-row justify-start p-4 relative h-13","rounded-xl bg-background-input","[&:has(:disabled)]:cursor-default [&:has(:disabled)]:opacity-50",f?"justify-between text-primary":"justify-start text-muted",W0({variant:"within"}),a4,"has-[[aria-invalid=true]]:border-destructive has-[[aria-invalid=true]]:outline-destructive","border-dashed",o),children:[f?x.jsxs("div",{className:"flex flex-row gap-2 items-center min-w-0",children:[x.jsx(ke,{ellipsis:!0,asChild:!0,children:x.jsx("p",{children:f.name})}),x.jsxs(ke,{color:"muted",variant:"xsmall",nowrap:!0,children:[f.size.toFixed(2)," kb"]})]}):x.jsx(ke,{ellipsis:!0,asChild:!0,children:x.jsx("p",{children:i})}),x.jsx("input",{accept:g,className:"absolute inset-0 opacity-0 cursor-pointer focus:outline-hidden",disabled:e,id:n??r,name:r,onChange:p,ref:u,type:"file",...l}),f&&x.jsx(Ia,{className:"cursor-pointer z-10 ml-1",icon:p2,size:"xs",onClick:m=>{var v;m.preventDefault(),m.stopPropagation(),(v=u.current)!=null&&v.value&&(u.current.value=""),s==null||s(null),d(null)}})]})},MG=1e3,N3=64,ej=N3/2,FWe="gradient-avatar-",VWe=Wi(["shrink-0 rounded-full overflow-hidden"],{variants:{size:{xs:"size-3",sm:"size-5",md:"size-8",lg:"size-10",xl:"size-13"}},defaultVariants:{size:"md"}}),tj=(t,e=MG)=>t%e/(MG/N3),UE=(t,e=0)=>{let n=3735928559^e,r=1103547991^e;for(let s=0,i;s<t.length;s++)i=t.charCodeAt(s),n=Math.imul(n^i,2654435761),r=Math.imul(r^i,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)},MR=(t,e)=>`${FWe}${t}${e}`,$We=(t,e,n)=>{const r=t%360,s=(t+120)%360,i=n%360;return{hueA:r,hueB:s,hueC:i}},jWe=(t,e)=>{const n={a:UE(e+"a",0),b:UE(e+"b",1),c:UE(e+"c",2),x:UE(e+"d",3),y:UE(e+"e",4),r:UE(e+"f",5)},{hueA:r,hueB:s,hueC:i}=$We(n.a,n.b,n.c),a=tj(n.x),o=tj(n.y),c=N3/10+tj(n.r,MG*1.5);return{background:{id:MR("background",t),stopColor0:`hsl(${i}deg 100% 50% / 1)`,stopColor1:`hsl(${r}deg 100% 50% / 1)`,cx:a,cy:o,r:c},primary:{id:MR("primary",t),stopColor0:`hsl(${r}deg 100% 50% / 1)`,stopColor1:`hsl(${s}deg 100% 50% / 1)`,cx:a,cy:o,r:c},secondary:{id:MR("secondary",t),stopColor0:`hsl(${i}deg 100% 50% / 1)`,stopColor1:`hsl(${s}deg 100% 50% / 1)`,cx:o,cy:a,r:c/2}}},R7=F.memo(t=>{const{className:e,address:n,size:r="md",...s}=t,i=F.useId(),a=jWe(i,n.toLowerCase()),o=c=>MR(c,i);return x.jsxs("svg",{className:rn(VWe({size:r}),e),viewBox:`0 0 ${N3} ${N3}`,version:"1.1",xmlns:"http://www.w3.org/2000/svg",...s,children:[x.jsxs("defs",{children:[x.jsx("clipPath",{id:o("circle-clip"),children:x.jsx("circle",{cx:ej,cy:ej,r:ej})}),x.jsxs("filter",{id:o("blur-xs"),x:"-10%",y:"-10%",width:"120%",height:"120%",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[x.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),x.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),x.jsx("feGaussianBlur",{stdDeviation:N3/10,result:"effect1_foregroundBlur"})]}),x.jsxs("linearGradient",{id:a.background.id,x1:"0",y1:"0",x2:"1",y2:"1",children:[x.jsx("stop",{offset:"0",stopColor:a.background.stopColor0}),x.jsx("stop",{offset:"1",stopColor:a.background.stopColor1})]}),x.jsxs("radialGradient",{id:a.primary.id,children:[x.jsx("stop",{offset:"0",stopColor:a.primary.stopColor0}),x.jsx("stop",{offset:"1",stopColor:a.primary.stopColor1})]}),x.jsxs("radialGradient",{id:a.secondary.id,children:[x.jsx("stop",{offset:"0",stopColor:a.secondary.stopColor0}),x.jsx("stop",{offset:"1",stopColor:a.secondary.stopColor1})]})]}),x.jsxs("g",{clipPath:`url(#${o("circle-clip")})`,children:[x.jsx("rect",{width:"100%",height:"100%",fill:`url(#${a.background.id})`}),x.jsxs("g",{filter:`url(#${o("blur-xs")})`,children:[x.jsx("circle",{fill:`url(#${a.primary.id})`,cx:a.primary.cx,cy:a.primary.cy,r:a.primary.r}),x.jsx("circle",{fill:`url(#${a.secondary.id})`,cx:a.secondary.cx,cy:a.secondary.cy,r:a.secondary.r})]})]})]})}),rve=t=>{const{fadeIn:e,onLoad:n,className:r,...s}=t,[i,a]=F.useState(!1),o=c=>{a(!0),n==null||n(c)};return x.jsx(Bx.img,{className:r,initial:e?{opacity:0}:void 0,animate:e?{opacity:i?1:0}:void 0,transition:{duration:.2},onLoad:o,...s})};function HWe({className:t,type:e,autoComplete:n="off",spellCheck:r="false",...s}){return x.jsx("input",{type:e,"data-slot":"input",className:rn("placeholder:text-muted h-13 w-full min-w-0 rounded-xl bg-background-input px-4 py-1 text-primary","file:text-primary file:inline-flex file:h-13 file:border-0 file:bg-transparent file:text-sm file:font-medium",Sa({variant:"normal"}),a4,W0(),"aria-invalid:outline-destructive aria-invalid:border-destructive",O7,t),autoComplete:n,spellCheck:r,...s})}function qWe({className:t,...e}){return x.jsx("div",{"data-slot":"input-group",role:"group",className:rn("group/input-group relative flex w-full items-center rounded-xl","h-13 min-w-0 has-[>textarea]:h-auto bg-background-input",a4,"has-[>[data-align=inline-start]]:[&>input]:pl-2","has-[>[data-align=inline-end]]:[&>input]:pr-2","has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3","has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3","has-[[data-slot=input-group-control]:disabled]:opacity-50 has-[[data-slot=input-group-control]:disabled]:cursor-not-allowed has-[[data-slot=input-group-control]:disabled]:pointer-events-none",W0({variant:"within"}),"has-[[data-slot][aria-invalid=true]]:outline-destructive has-[[data-slot][aria-invalid=true]]:border-destructive",t),...e})}function KWe({className:t,...e}){return x.jsx(HWe,{"data-slot":"input-group-control",className:rn("flex-1 rounded-none border-0 bg-transparent outline-none disabled:opacity-100",t),...e})}var GWe=Wi([Sa({variant:"small"}),"text-primary flex h-auto cursor-text items-center justify-center gap-2 py-1.5 select-none group-data-[disabled=true]/input-group:opacity-50"],{variants:{align:{"inline-start":"order-first pl-4","inline-end":"order-last pr-4","block-start":"order-first w-full justify-start px-4 pt-4 [.border-b]:pb-3 group-has-[>input]/input-group:pt-2.5","block-end":"order-last w-full justify-start px-4 pb-4 [.border-t]:pt-3 group-has-[>input]/input-group:pb-2.5"}},defaultVariants:{align:"inline-start"}});function nj({className:t,align:e="inline-start",...n}){return x.jsx("div",{role:"group","data-slot":"input-group-addon","data-align":e,className:rn(GWe({align:e}),t),onClick:r=>{var s,i;r.target.closest("button")||(i=(s=r.currentTarget.parentElement)==null?void 0:s.querySelector("input"))==null||i.focus()},...n})}var WWe=Wi(["w-full h-full bg-background-primary focus:outline-hidden"],{variants:{direction:{vertical:["h-full overflow-y-auto overscroll-y-contain"],horizontal:["overflow-x-auto overscroll-x-contain w-full"]}},defaultVariants:{direction:"vertical"}}),zWe=Wi(["relative w-full h-full"],{variants:{direction:{vertical:["before:absolute before:z-10 before:pointer-events-none before:left-0 before:top-0 before:w-full before:h-4","before:bg-linear-to-t before:from-transparent before:to-background-primary","after:absolute after:z-10 after:pointer-events-none after:left-0 after:bottom-0 after:w-full after:h-4","after:bg-linear-to-b after:from-transparent after:to-background-primary"],horizontal:["before:absolute before:z-10 before:pointer-events-none before:left-0 before:top-0 before:h-full before:w-4","before:bg-linear-to-l before:from-transparent before:to-background-primary","after:absolute after:z-10 after:pointer-events-none after:right-0 after:top-0 after:h-full after:w-4","after:bg-linear-to-r after:from-transparent after:to-background-primary"]},shadows:{true:"",false:"before:hidden after:hidden"}},defaultVariants:{direction:"vertical",shadows:!1}}),JWe=t=>{const{children:e,shadows:n,direction:r="vertical",contentProps:s,className:i,...a}=t;return x.jsx("div",{className:rn(zWe({direction:r,shadows:n}),i),...a,children:x.jsx("div",{className:rn(WWe({direction:r})),...s,children:e})})},YWe=Wi(["flex","flex-col","fixed","overflow-hidden","bg-background-primary","focus:outline-hidden","scrollbar-none","bottom-0 md:bottom-auto","rounded-t-2xl rounded-b-none md:rounded-b-2xl"],{variants:{size:{sm:["w-screen md:w-[540px]","min-h-[100px] max-h-[calc(100dvh-80px)] md:max-h-[min(800px,calc(100dvh-80px))]"],lg:["w-screen md:w-[720px]","h-[calc(100dvh-70px)] md:h-[800px] md:max-h-[min(800px,calc(100dvh-80px))]"]},autoHeight:{true:"lg:h-auto!"}},defaultVariants:{size:"lg"}}),Sl=t=>{const{header:e,footer:n,autoHeight:r=!1,overlayColor:s="bg-background-overlay",children:i,disableAnimation:a=!1,isDismissible:o=!0,onClose:c,scroll:l=!0,size:u="lg",overlayProps:f,contentProps:d,rootProps:p={},title:g="Modal dialog"}=t,{container:m}=kZ(),v=l?JWe:F.Fragment;return m?x.jsx(qje,{modal:!0,defaultOpen:!0,onOpenChange:c,children:x.jsx(Kje,{forceMount:!0,container:m,children:x.jsxs(Gje,{...p,className:rn("seq-root","fixed inset-0 flex items-center justify-center z-20",p==null?void 0:p.className),forceMount:!0,children:[x.jsx(Bx.div,{className:s2("absolute inset-0",s),initial:a?!1:{opacity:0},animate:a?!1:{opacity:1},exit:a?void 0:{opacity:0},transition:{type:"tween",ease:"linear"},...f},"modal-overlay"),x.jsx(Wje,{asChild:!0,forceMount:!0,onEscapeKeyDown:A=>{o?c==null||c():A.preventDefault()},onInteractOutside:A=>{o||A.preventDefault()},children:x.jsxs(Bx.div,{initial:a?!1:{y:"100%",opacity:u==="sm"?0:1},animate:a?!1:{y:0,opacity:1},exit:a?void 0:{y:"100%",opacity:u==="sm"?0:1},transition:{type:"tween",ease:"easeOut"},transformTemplate:(A,S)=>`${S} translateZ(0)`,...d,className:rn(YWe({size:u,autoHeight:r}),d==null?void 0:d.className),children:[x.jsx(kbe,{children:x.jsx(zje,{children:g})}),e&&x.jsx(QWe,{children:e}),x.jsxs(v,{children:[e&&x.jsx(ZWe,{}),i]}),n&&x.jsx(XWe,{children:n}),o&&x.jsx(Jje,{asChild:!0,children:x.jsx(Ia,{icon:p2,size:"xs",className:"absolute right-4 top-4 z-20 backdrop-blur-xs","aria-label":"Close"})})]},"modal-content")})]})})}):null},QWe=t=>{const{children:e}=t;return x.jsxs("div",{className:s2("absolute top-0 left-0 right-0 h-[60px] p-4 z-10","before:absolute before:left-0 before:-bottom-4 before:w-full before:h-4 before:z-[11] before:pointer-events-none before:bg-gradient-to-t before:from-transparent before:to-background-primary/70"),children:[x.jsx("div",{className:"backdrop-blur-md bg-background-primary/70 absolute w-full h-full top-0 left-0 border-b-1 border-border-card"}),x.jsx("div",{className:"relative h-full w-full z-10 flex items-center justify-center",children:typeof e=="string"?x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"primary",block:!0,children:e}):e})]})},ZWe=()=>x.jsx("div",{className:"pt-[60px]"}),XWe=t=>{const{children:e}=t;return x.jsxs("div",{className:s2("absolute bottom-0 left-0 right-0 p-4","before:absolute before:left-0 before:-top-4 before:w-full before:h-4 before:z-[11] before:pointer-events-none before:bg-gradient-to-b before:from-transparent before:to-background-primary/70"),children:[x.jsx("div",{className:"backdrop-blur-md bg-background-primary/70 absolute w-full h-full top-0 left-0 border-t-1 border-border-card"}),x.jsx("div",{className:"relative w-full z-10 pb-[calc(env(safe-area-inset-bottom))]",children:e})]})},sve="3.2.7",ive="https://assets.sequence.info/",eze={xs:"small",sm:"small",md:"medium",lg:"large",xl:"large"},_Z=t=>t?eze[t]||t:"medium",tze=(t,e)=>t.replace(/\/(small|medium|large)\//,`/${_Z(e)}/`),nze=(t,e,n)=>ive+`images/tokens/${_Z(n)}/${t}/${e.toLowerCase()}.webp?${sve}`,rze=(t,e)=>ive+`images/networks/${_Z(e)}/${t}.webp?${sve}`,sze=Wi(["flex","items-center","justify-center","overflow-hidden","shrink-0","rounded-full"],{variants:{size:{xs:"size-3",sm:"size-5",md:"size-8",lg:"size-10",xl:"size-16"}}}),a5=F.memo(t=>{const{chainId:e,className:n,fadeIn:r,style:s,src:i,size:a="md",...o}=t,c=i||tze(rze(e),a);return x.jsx("div",{className:rn(sze({size:a}),n),style:s,...o,children:x.jsx(rve,{className:"max-w-full max-h-full object-cover w-full",fadeIn:r,src:c})})});Wi([Sa({variant:"large"}),"flex justify-center items-center h-12 w-10 p-[10px]","rounded-lg text-primary bg-background-input text-center","caret-transparent selection:bg-transparent",W0(),a4,O7],{variants:{},defaultVariants:{}});function ize({...t}){return x.jsx(Vqe,{"data-slot":"popover",...t})}function aze({...t}){return x.jsx($qe,{"data-slot":"popover-trigger",...t})}function oze({className:t,align:e="center",sideOffset:n=4,...r}){return x.jsx(jqe,{children:x.jsx(Hqe,{"data-slot":"popover-content",align:e,sideOffset:n,className:rn("shadow-primary rounded-2xl bg-background-raised border-1 border-border-normal","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) outline-hidden",t),...r})})}function _7({...t}){return x.jsx(pKe,{"data-slot":"select",...t})}function cze({...t}){return x.jsx(xKe,{"data-slot":"select-group",...t})}function lze({...t}){return x.jsx(mKe,{"data-slot":"select-value",...t})}function uze({className:t,size:e="default",children:n,...r}){return x.jsxs(gKe,{"data-slot":"select-trigger","data-size":e,className:rn(Sa({variant:"normal"}),W0(),a4,O7,"bg-background-input text-primary select-none cursor-pointer data-[placeholder]:text-muted flex w-fit items-center justify-between gap-2 rounded-xl px-4 py-2 whitespace-nowrap data-[size=default]:h-13 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2","[&_svg:not([class*='text-'])]:text-muted [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4","aria-invalid:border-destructive aria-invalid:outline-destructive",t),...r,children:[n,x.jsx(yKe,{asChild:!0,children:x.jsx(AL,{className:"size-4 text-muted"})})]})}function fze({className:t,children:e,position:n="popper",align:r="center",...s}){const{container:i}=kZ();return x.jsx(wKe,{container:i,children:x.jsxs(bKe,{"data-slot":"select-content",className:rn("bg-background-raised text-primary relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-lg border border-border-normal shadow-primary","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,align:r,...s,children:[x.jsx(hze,{}),x.jsx(vKe,{className:rn("p-1",n==="popper"&&"h-(--radix-select-trigger-height) w-full min-w-(--radix-select-trigger-width) scroll-my-1"),children:e}),x.jsx(pze,{})]})})}function dze({className:t,children:e,...n}){return x.jsxs(EKe,{"data-slot":"select-item",className:rn(Sa({variant:"normal"}),"[&_svg:not([class*='text-'])]:text-muted relative flex w-full cursor-pointer items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2","focus:bg-background-hover data-highlighted:bg-background-hover",t),...n,children:[x.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:x.jsx(SKe,{children:x.jsx(Ff,{className:"size-4"})})}),x.jsx(AKe,{children:e})]})}function hze({className:t,...e}){return x.jsx(IKe,{"data-slot":"select-scroll-up-button",className:rn("flex cursor-default items-center justify-center py-1",t),...e,children:x.jsx(zGe,{className:"size-4"})})}function pze({className:t,...e}){return x.jsx(CKe,{"data-slot":"select-scroll-down-button",className:rn("flex cursor-default items-center justify-center py-1",t),...e,children:x.jsx(AL,{className:"size-4"})})}var gze=t=>{const{disabled:e=!1,id:n,name:r,options:s,placeholder:i,className:a,ref:o,"aria-invalid":c,...l}=t;return x.jsxs(_7,{disabled:e,name:r,...l,children:[x.jsx(uze,{className:a,id:n??r,"aria-invalid":c,ref:o,children:x.jsx(lze,{placeholder:i})}),x.jsx(fze,{position:"popper",side:"bottom",align:"start",children:x.jsx(cze,{children:s.map(({value:u,label:f,...d})=>x.jsx(dze,{value:u,...d,children:f},u))})})]})};_7.Helper=gze;var mze=Wi("text-muted animate-spin w-6 h-6 stroke-2",{variants:{size:{xxs:"size-3",xs:"size-4",sm:"size-5",md:"size-6",lg:"size-7",xl:"size-9"}}}),_0=({size:t,className:e})=>x.jsxs("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",className:rn(mze({size:t}),e),children:[x.jsx("circle",{cx:"12",cy:"12",fill:"none",r:"10.5",strokeDasharray:"42",strokeLinecap:"round"}),x.jsx("circle",{cx:"12",cy:"12",fill:"none",opacity:"0.25",r:"10.5",strokeLinecap:"round"})]});function ave({className:t,...e}){return x.jsx(kKe,{"data-slot":"tabs",className:rn("flex flex-col gap-2",t),...e})}function ove({className:t,...e}){return x.jsx(PKe,{"data-slot":"tabs-list",className:rn("inline-flex h-10 w-full items-center justify-start border-b border-border-normal",t),...e})}function DG({className:t,...e}){return x.jsx(OKe,{"data-slot":"tabs-trigger",className:rn(Sa({variant:"normal-bold"}),"h-full text-muted inline-flex items-center justify-center whitespace-nowrap cursor-pointer border-b-2 border-transparent px-4 -mb-[2px] rounded-t-sm","hover:not-[[data-state=active]]:opacity-80 data-[state=active]:border-border-focus data-[state=active]:text-border-focus",W0(),O7,t),...e})}function rj({className:t,...e}){return x.jsx(RKe,{"data-slot":"tabs-content",className:rn("flex-1 outline-none",t),...e})}var na=({className:t,id:e,name:n,leftIcon:r,rightIcon:s,controls:i,...a})=>x.jsxs(qWe,{className:t,children:[x.jsx(KWe,{id:e??n,name:n,...a}),r&&x.jsx(nj,{align:"inline-start",children:x.jsx(r,{size:"sm"})}),s&&x.jsx(nj,{align:"inline-end",children:x.jsx(s,{size:"sm"})}),i&&x.jsx(nj,{align:"inline-end",children:i})]}),yze=Wi(["will-change-transform will-change-opacity","data-[swipe=move]:translate-x-(--radix-toast-swipe-move-x)","data-[swipe=cancel]:translate-x-0 data-[swipe=cancel]:transition-transform data-[swipe=cancel]:duration-200 data-[swipe=cancel]:ease-out","data-[swipe=end]:animate-swipe-out"],{variants:{variant:{normal:"",success:"text-positive",error:"text-negative"}},defaultVariants:{variant:"normal"}}),cve=F.createContext(null),wze=t=>{const{children:e,...n}=t,[r,s]=F.useState(new Set);return x.jsxs(QKe,{...n,children:[x.jsxs(cve.Provider,{value:s,children:[e,x.jsx(ywe,{children:Array.from(r).map(i=>x.jsx(vze,{...i},i.id))})]}),x.jsx(bze,{})]})},bze=()=>x.jsx(ZKe,{className:"fixed right-0 bottom-0 focus:outline-hidden w-full flex flex-col gap-2 p-4 pt-0 z-1000 list-none max-w-[532px]"}),vze=t=>{const{id:e,variant:n,title:r,description:s,icon:i,isDismissible:a=!0,...o}=t,c=()=>{if(i)return x.jsx(i,{});switch(n){case"success":return x.jsx("div",{className:"bg-positive text-white rounded-full w-8 h-8 place-items-center min-w-0 shrink-0 flex items-center justify-center",children:x.jsx(Ff,{})});case"error":return x.jsx("div",{className:"bg-negative text-white rounded-full w-8 h-8 place-items-center min-w-0 shrink-0 flex items-center justify-center",children:x.jsx(p2,{})});default:return null}};return x.jsx(XKe,{className:yze({variant:n}),open:!0,forceMount:!0,asChild:!0,...o,children:x.jsx(Cs,{className:"rounded-md bg-background-raised relative flex justify-between w-full shadow-primary",asChild:!0,children:x.jsxs(Bx.li,{layoutId:e,layout:!0,initial:{x:"100%"},animate:{x:0},exit:{y:"100%",opacity:0},children:[x.jsxs("div",{className:"flex gap-3 items-center",children:[c(),x.jsxs("div",{className:"flex flex-col gap-1",children:[r&&x.jsx(eGe,{children:x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"secondary",asChild:!0,children:x.jsx("div",{children:r})})}),x.jsx(tGe,{children:x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"muted",asChild:!0,children:x.jsx("div",{children:s})})})]})]}),a&&x.jsx(nGe,{"aria-label":"Close",asChild:!0,children:x.jsx(Ia,{icon:p2,size:"xs"})})]})})})},Rb=()=>{const t=F.useContext(cve);return e=>{const n={...e,id:Math.random().toString(36).slice(2,12),onOpenChange:r=>{r||t(s=>(s.delete(n),new Set([...s])))}};t(r=>new Set([...r,n]))}},Soe="40%",Ioe="-2%",xze=Wi(["relative","flex","items-center","justify-center","shrink-0"],{variants:{size:{xs:"size-3 text-[4px]",sm:"size-5 text-[6px]",md:"size-8 text-[9px]",lg:"size-10 text-[11px]",xl:"size-16 text-[16px]"}},defaultVariants:{size:"md"}}),Coe="[mask-image:radial-gradient(circle_at_82%_82%,transparent_22%,black_0)]",Eze=F.memo(t=>{const{className:e,style:n,src:r,symbol:s,size:i="md",withNetwork:a,fadeIn:o,...c}=t;return x.jsxs("div",{className:rn(xze({size:i}),e),style:n,...c,children:[r?x.jsx(rve,{className:rn("rounded-full max-w-full max-h-full object-cover w-full overflow-hidden",a&&Coe),fadeIn:o,src:r}):x.jsx(ke,{className:rn("bg-background-secondary rounded-full w-full h-full flex items-center justify-center overflow-hidden",a&&Coe),variant:"inherit",fontWeight:"medium",color:"muted",uppercase:!0,children:s==null?void 0:s.replace(/\s/,"").slice(0,4)}),a&&x.jsx(a5,{chainId:a,className:"absolute z-1",fadeIn:o,style:{width:Soe,height:Soe,right:Ioe,bottom:Ioe}})]})}),BZ=t=>{const{align:e="center",children:n,delayDuration:r=0,disabled:s=!1,hOffset:i=0,message:a,side:o="top",vOffset:c=0}=t,{container:l}=kZ();return s?x.jsx(x.Fragment,{children:n}):x.jsx(wGe,{children:x.jsxs(bGe,{delayDuration:r,children:[x.jsx(vGe,{asChild:!0,children:n}),x.jsx(xGe,{container:l,children:x.jsxs(EGe,{className:"bg-primary fill-primary rounded-lg p-2 flex justify-center items-center shadow-primary z-1000 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 w-fit origin-(--radix-tooltip-content-transform-origin)",side:o,align:e,sideOffset:c,alignOffset:i,children:[x.jsx(ke,{variant:"small",fontWeight:"medium",color:"inverse",children:a}),x.jsx(AGe,{offset:12,width:10,height:5})]})})]})})},Nu=(t,e={})=>{const{defaultValue:n=!1}=e,[r,s]=F.useState(()=>typeof window>"u"?n:window.matchMedia(t).matches);return F.useEffect(()=>{if(typeof window>"u")return;const i=window.matchMedia(t),a=o=>{s(o.matches)};return a(i),i.addEventListener("change",a),()=>{i.removeEventListener("change",a)}},[t]),r},LG={},Toe=$2;LG.createRoot=Toe.createRoot,LG.hydrateRoot=Toe.hydrateRoot;var lve={exports:{}},ys={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za=typeof Symbol=="function"&&Symbol.for,MZ=Za?Symbol.for("react.element"):60103,DZ=Za?Symbol.for("react.portal"):60106,IL=Za?Symbol.for("react.fragment"):60107,CL=Za?Symbol.for("react.strict_mode"):60108,TL=Za?Symbol.for("react.profiler"):60114,NL=Za?Symbol.for("react.provider"):60109,kL=Za?Symbol.for("react.context"):60110,LZ=Za?Symbol.for("react.async_mode"):60111,PL=Za?Symbol.for("react.concurrent_mode"):60111,OL=Za?Symbol.for("react.forward_ref"):60112,RL=Za?Symbol.for("react.suspense"):60113,Aze=Za?Symbol.for("react.suspense_list"):60120,_L=Za?Symbol.for("react.memo"):60115,BL=Za?Symbol.for("react.lazy"):60116,Sze=Za?Symbol.for("react.block"):60121,Ize=Za?Symbol.for("react.fundamental"):60117,Cze=Za?Symbol.for("react.responder"):60118,Tze=Za?Symbol.for("react.scope"):60119;function ku(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case MZ:switch(t=t.type,t){case LZ:case PL:case IL:case TL:case CL:case RL:return t;default:switch(t=t&&t.$$typeof,t){case kL:case OL:case BL:case _L:case NL:return t;default:return e}}case DZ:return e}}}function uve(t){return ku(t)===PL}ys.AsyncMode=LZ;ys.ConcurrentMode=PL;ys.ContextConsumer=kL;ys.ContextProvider=NL;ys.Element=MZ;ys.ForwardRef=OL;ys.Fragment=IL;ys.Lazy=BL;ys.Memo=_L;ys.Portal=DZ;ys.Profiler=TL;ys.StrictMode=CL;ys.Suspense=RL;ys.isAsyncMode=function(t){return uve(t)||ku(t)===LZ};ys.isConcurrentMode=uve;ys.isContextConsumer=function(t){return ku(t)===kL};ys.isContextProvider=function(t){return ku(t)===NL};ys.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===MZ};ys.isForwardRef=function(t){return ku(t)===OL};ys.isFragment=function(t){return ku(t)===IL};ys.isLazy=function(t){return ku(t)===BL};ys.isMemo=function(t){return ku(t)===_L};ys.isPortal=function(t){return ku(t)===DZ};ys.isProfiler=function(t){return ku(t)===TL};ys.isStrictMode=function(t){return ku(t)===CL};ys.isSuspense=function(t){return ku(t)===RL};ys.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===IL||t===PL||t===TL||t===CL||t===RL||t===Aze||typeof t=="object"&&t!==null&&(t.$$typeof===BL||t.$$typeof===_L||t.$$typeof===NL||t.$$typeof===kL||t.$$typeof===OL||t.$$typeof===Ize||t.$$typeof===Cze||t.$$typeof===Tze||t.$$typeof===Sze)};ys.typeOf=ku;lve.exports=ys;var Nze=lve.exports,fve=Nze,kze={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Pze={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},dve={};dve[fve.ForwardRef]=kze;dve[fve.Memo]=Pze;function UG(){return UG=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UG.apply(this,arguments)}function ML(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Oze(t,e){if(t){if(typeof t=="string")return Noe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Noe(t,e)}}function Noe(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mI(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=Oze(t))||e){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}var Rze,_ze=function(){function t(){this._plugins=[]}var e=t.prototype;return e.use=function(r){this._plugins.push(r)},e.onCreate=function(r,s){this._plugins.forEach(function(i){return i.onCreate==null?void 0:i.onCreate(r,s)})},e.onChange=function(r,s,i){this._plugins.forEach(function(a){return a.onChange==null?void 0:a.onChange(r,s,i)})},e.onBecomeObserved=function(r){this._plugins.forEach(function(s){return s.onBecomeObserved==null?void 0:s.onBecomeObserved(r)})},e.onBecomeUnobserved=function(r){this._plugins.forEach(function(s){return s.onBecomeUnobserved==null?void 0:s.onBecomeUnobserved(r)})},e.onAttach=function(r,s){this._plugins.forEach(function(i){return i.onAttach==null?void 0:i.onAttach(r,s)})},e.onDetach=function(r,s){this._plugins.forEach(function(i){return i.onDetach==null?void 0:i.onDetach(r,s)})},t}(),VP=Symbol(),o1=new _ze,$P=[],x8=!1,sj=[],jP=0,DR=function(){function t(n,r){r===void 0&&(r={}),this._prevVal=VP,this._inputs=[],this._outputs=[],this._listeners=[],this._attachedToInputs=!1,this.onChange=this.subscribe,this._val=n,this._options=r,o1.onCreate(this,n)}var e=t.prototype;return e.get=function(){var r=$P[$P.length-1];if(r&&x8)try{return x8=!1,r.push(this),this._get()}finally{x8=!0}else return this._get()},e._get=function(){var r=!this._attachedToInputs||this._prevVal!==VP;return r?this._evaluate():this._val},e._evaluate=function(){return this._val},e._set=function(r){this._val!==r&&(this._addToBatchRecursively(),this._val=r)},e.subscribe=function(r){var s=this;this._listeners.push(r),this._attachToInputs();var i=!1;return function(){i||(i=!0,s._listeners.splice(s._listeners.indexOf(r),1),s._detachFromInputs())}},e.onBecomeObserved=function(){},e.onBecomeUnobserved=function(){},e.getInputs=function(){return this._inputs},e.getOptions=function(){return this._options},e.withOptions=function(r){return this._options=UG({},this._options,r),this},t._captureInputs=function(r){try{var s=[];return $P.push(s),x8=!0,r(),s}finally{$P.pop(),x8=!1}},e._addInput=function(r){this._inputs.push(r),this._attachedToInputs&&this._attachToInput(r)},e._removeInput=function(r){this._inputs.splice(this._inputs.indexOf(r),1),this._attachedToInputs&&this._detachFromInput(r)},e._shouldAttachToInputs=function(){return this._listeners.length>0||this._outputs.length>0},e._attachToInputs=function(){if(!this._attachedToInputs&&this._shouldAttachToInputs()){this._attachedToInputs=!0,this._val=this._evaluate(),this.onBecomeObserved(),o1.onBecomeObserved(this);for(var r=mI(this._inputs),s;!(s=r()).done;){var i=s.value;this._attachToInput(i),i._attachToInputs()}}},e._detachFromInputs=function(){if(this._attachedToInputs&&!this._shouldAttachToInputs()){this._attachedToInputs=!1;for(var r=mI(this._inputs),s;!(s=r()).done;){var i=s.value;this._detachFromInput(i),i._detachFromInputs()}this.onBecomeUnobserved(),o1.onBecomeUnobserved(this)}},e._attachToInput=function(r){r._outputs.push(this),o1.onAttach(this,r)},e._detachFromInput=function(r){r._outputs.splice(r._outputs.indexOf(this),1),o1.onDetach(this,r)},e._addToBatchRecursively=function(){if(this._prevVal===VP){this._prevVal=this._val;for(var r=mI(this._outputs),s;!(s=r()).done;){var i=s.value;i._addToBatchRecursively()}sj.push(this)}},t._batch=function(r){try{jP++,jP===1&&Rze||r()}finally{if(jP--,jP===0){var s=sj;sj=[];for(var i=s.length-1;i>=0;i--){var a=s[i],o=a._prevVal;a._prevVal=VP,a._val=a._evaluate();var c=a._val;if(c!==o){for(var l=mI(a._listeners.slice()),u;!(u=l()).done;){var f=u.value;f(c,o)}o1.onChange(a,c,o)}}}}},t._use=function(r){o1.use(r)},t}();function Bze(t){var e,n;return function(r){var s=!1;if(!e||r.length!==e.length)s=!0;else for(var i=0;i<r.length;i++)if(r[i]!==e[i]){s=!0;break}return s&&(e=r,n=t(r)),n}}function rr(t,e){return new Mze(t,e)}var k3=function(t){ML(e,t);function e(r,s){var i;return i=t.call(this,r instanceof e?r.get():r,s)||this,i.transform=i.select,i._updateValInput(r),i}var n=e.prototype;return n._evaluate=function(){return this._valInput?this._valInput.get():t.prototype._evaluate.call(this)},n.select=function(s){return new E8([this],function(i){var a=i[0];return s(a)})},n.onlyIf=function(s){var i=void 0;return this.select(function(a){return s(a)&&(i=a),i})},n.default=function(s){return this.select(function(i){return i??s})},n.as=function(){return this},e.select=function(s,i){return new E8(s,function(a){return i.apply(void 0,a)})},e.from=function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return new E8(i,function(o){return o})},e.merge=function(s){return new E8(s,function(i){return i})},e.latest=function(){for(var s,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return new E8(a,function(c){var l=s?c.find(function(u,f){return u!==s[f]}):c[0];return s=c,l})},e.compute=function(s){return new Dze(s)},e.fromPromise=function(s,i){var a=rr(void 0);return s.then(function(o){return a.set(o)},function(o){return i&&a.set(i(o))}),a},n.toPromise=function(){var s=this;return new Promise(function(i){var a=s.subscribe(function(o){i(o),a()})})},e.batch=function(s){DR._batch(s)},e.use=function(s){DR._use(s)},n._updateValInput=function(s){this._valInput!==s&&(this._valInput&&(this._removeInput(this._valInput),this._valInput=void 0),s instanceof e&&(this._addInput(s),this._valInput=s))},e}(DR),Mze=function(t){ML(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.set=function(s){var i=this;this._updateValInput(s),k3.batch(function(){return i._set(s instanceof k3?s.get():s)})},n.update=function(s){this.set(s(this.get()))},n.readOnly=function(){return this},e}(k3),E8=function(t){ML(e,t);function e(r,s){var i;i=t.call(this,void 0)||this,i._compute=Bze(s),i._computeInputs=r;for(var a=mI(r),o;!(o=a()).done;){var c=o.value;i._addInput(c)}return i}var n=e.prototype;return n._evaluate=function(){var s=this._compute(this._computeInputs.map(function(i){return i.get()}));return this._updateValInput(s),s instanceof k3?s.get():s},e}(k3),Dze=function(t){ML(e,t);function e(r){var s;return s=t.call(this,void 0)||this,s._currentInputs=new Set,s._compute=r,s}var n=e.prototype;return n._evaluate=function(){var s=this,i,a=new Set(DR._captureInputs(function(){return i=s._compute()}));return a.forEach(function(o){s._currentInputs.has(o)?s._currentInputs.delete(o):s._addInput(o)}),this._currentInputs.forEach(function(o){return s._removeInput(o)}),this._currentInputs=a,i},e}(k3);function vn(t){var e=F.useState({}),n=e[1],r=t.get();return F.useLayoutEffect(function(){return t.subscribe(function(){return n({})})},[t]),r}class Lze{constructor(){q(this,"stores",{})}get(e){const n=this.stores[e.name];if(n)return n;const r=new e(this);return this.stores[e.name]=r,r}async getAsync(e,n){const r=(await e)[n];return this.get(r)}destroyStores(){var e;for(const n of Object.values(this.stores))(e=n.destroyStore)==null||e.call(n);this.stores={}}}const Uze=()=>new Lze,hve=F.createContext(null),Fze=({store:t,children:e})=>x.jsx(hve.Provider,{value:t,children:e});function Vt(t){const e=F.useContext(hve);if(!e)throw new Error("store cannot be null! check your <StoreProvider ...>");return e.get(t)}/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function KN(){return KN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KN.apply(this,arguments)}var Ew;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ew||(Ew={}));const koe="popstate";function Vze(t){t===void 0&&(t={});function e(s,i){let{pathname:a="/",search:o="",hash:c=""}=j2(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),FG("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let a=s.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let c=s.location.href,l=c.indexOf("#");o=l===-1?c:c.slice(0,l)}return o+"#"+(typeof i=="string"?i:pve(i))}function r(s,i){UZ(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return jze(e,n,r,t)}function Ca(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function UZ(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $ze(){return Math.random().toString(36).substr(2,8)}function Poe(t,e){return{usr:t.state,key:t.key,idx:e}}function FG(t,e,n,r){return n===void 0&&(n=null),KN({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?j2(e):e,{state:n,key:e&&e.key||r||$ze()})}function pve(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function j2(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function jze(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=Ew.Pop,c=null,l=u();l==null&&(l=0,a.replaceState(KN({},a.state,{idx:l}),""));function u(){return(a.state||{idx:null}).idx}function f(){o=Ew.Pop;let v=u(),A=v==null?null:v-l;l=v,c&&c({action:o,location:m.location,delta:A})}function d(v,A){o=Ew.Push;let S=FG(m.location,v,A);n&&n(S,v),l=u()+1;let I=Poe(S,l),B=m.createHref(S);try{a.pushState(I,"",B)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(B)}i&&c&&c({action:o,location:m.location,delta:1})}function p(v,A){o=Ew.Replace;let S=FG(m.location,v,A);n&&n(S,v),l=u();let I=Poe(S,l),B=m.createHref(S);a.replaceState(I,"",B),i&&c&&c({action:o,location:m.location,delta:0})}function g(v){let A=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof v=="string"?v:pve(v);return S=S.replace(/ $/,"%20"),Ca(A,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,A)}let m={get action(){return o},get location(){return t(s,a)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(koe,f),c=v,()=>{s.removeEventListener(koe,f),c=null}},createHref(v){return e(s,v)},createURL:g,encodeLocation(v){let A=g(v);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:d,replace:p,go(v){return a.go(v)}};return m}var Ooe;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ooe||(Ooe={}));function Hze(t,e,n){return n===void 0&&(n="/"),qze(t,e,n)}function qze(t,e,n,r){let s=typeof e=="string"?j2(e):e,i=yve(s.pathname||"/",n);if(i==null)return null;let a=gve(t);Kze(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let l=rJe(i);o=eJe(a[c],l)}return o}function gve(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Ca(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=Mx([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Ca(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),gve(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:Zze(l,i.index),routesMeta:u})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let c of mve(i.path))s(i,a,c)}),e}function mve(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=mve(r.join("/")),o=[];return o.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&o.push(...a),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function Kze(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Xze(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Gze=/^:[\w-]+$/,Wze=3,zze=2,Jze=1,Yze=10,Qze=-2,Roe=t=>t==="*";function Zze(t,e){let n=t.split("/"),r=n.length;return n.some(Roe)&&(r+=Qze),e&&(r+=zze),n.filter(s=>!Roe(s)).reduce((s,i)=>s+(Gze.test(i)?Wze:i===""?Jze:Yze),r)}function Xze(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function eJe(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let c=r[o],l=o===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",f=tJe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),d=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Mx([i,f.pathname]),pathnameBase:lJe(Mx([i,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(i=Mx([i,f.pathnameBase]))}return a}function tJe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=nJe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((l,u,f)=>{let{paramName:d,isOptional:p}=u;if(d==="*"){let m=o[f]||"";a=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const g=o[f];return p&&!g?l[d]=void 0:l[d]=(g||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:a,pattern:t}}function nJe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),UZ(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function rJe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return UZ(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yve(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function sJe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?j2(t):t;return{pathname:n?n.startsWith("/")?n:iJe(n,e):e,search:uJe(r),hash:fJe(s)}}function iJe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ij(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aJe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function oJe(t,e){let n=aJe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cJe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=j2(t):(s=KN({},t),Ca(!s.pathname||!s.pathname.includes("?"),ij("?","pathname","search",s)),Ca(!s.pathname||!s.pathname.includes("#"),ij("#","pathname","hash",s)),Ca(!s.search||!s.search.includes("#"),ij("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),f-=1;s.pathname=d.join("/")}o=f>=0?e[f]:"/"}let c=sJe(s,o),l=a&&a!=="/"&&a.endsWith("/"),u=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Mx=t=>t.join("/").replace(/\/\/+/g,"/"),lJe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uJe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fJe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dJe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const wve=["post","put","patch","delete"];new Set(wve);const hJe=["get",...wve];new Set(hJe);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function GN(){return GN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GN.apply(this,arguments)}const FZ=F.createContext(null),pJe=F.createContext(null),DL=F.createContext(null),LL=F.createContext(null),c4=F.createContext({outlet:null,matches:[],isDataRoute:!1}),bve=F.createContext(null);function UL(){return F.useContext(LL)!=null}function VZ(){return UL()||Ca(!1),F.useContext(LL).location}function vve(t){F.useContext(DL).static||F.useLayoutEffect(t)}function FL(){let{isDataRoute:t}=F.useContext(c4);return t?TJe():gJe()}function gJe(){UL()||Ca(!1);let t=F.useContext(FZ),{basename:e,future:n,navigator:r}=F.useContext(DL),{matches:s}=F.useContext(c4),{pathname:i}=VZ(),a=JSON.stringify(oJe(s,n.v7_relativeSplatPath)),o=F.useRef(!1);return vve(()=>{o.current=!0}),F.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){r.go(l);return}let f=cJe(l,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Mx([e,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[e,r,a,i,t])}function mJe(t,e){return yJe(t,e)}function yJe(t,e,n,r){UL()||Ca(!1);let{navigator:s}=F.useContext(DL),{matches:i}=F.useContext(c4),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let l=VZ(),u;if(e){var f;let v=typeof e=="string"?j2(e):e;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||Ca(!1),u=v}else u=l;let d=u.pathname||"/",p=d;if(c!=="/"){let v=c.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=Hze(t,{pathname:p}),m=EJe(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:Mx([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Mx([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&m?F.createElement(LL.Provider,{value:{location:GN({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ew.Pop}},m):m}function wJe(){let t=CJe(),e=dJe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:s},n):null,null)}const bJe=F.createElement(wJe,null);class vJe extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(c4.Provider,{value:this.props.routeContext},F.createElement(bve.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xJe(t){let{routeContext:e,match:n,children:r}=t,s=F.useContext(FZ);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(c4.Provider,{value:e},r)}function EJe(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let u=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);u>=0||Ca(!1),a=a.slice(0,Math.min(a.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let f=a[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=u),f.route.id){let{loaderData:d,errors:p}=n,g=f.route.loader&&d[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){c=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((u,f,d)=>{let p,g=!1,m=null,v=null;n&&(p=o&&f.route.id?o[f.route.id]:void 0,m=f.route.errorElement||bJe,c&&(l<0&&d===0?(NJe("route-fallback"),g=!0,v=null):l===d&&(g=!0,v=f.route.hydrateFallbackElement||null)));let A=e.concat(a.slice(0,d+1)),S=()=>{let I;return p?I=m:g?I=v:f.route.Component?I=F.createElement(f.route.Component,null):f.route.element?I=f.route.element:I=u,F.createElement(xJe,{match:f,routeContext:{outlet:u,matches:A,isDataRoute:n!=null},children:I})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?F.createElement(vJe,{location:n.location,revalidation:n.revalidation,component:m,error:p,children:S(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):S()},null)}var xve=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(xve||{}),Eve=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Eve||{});function AJe(t){let e=F.useContext(FZ);return e||Ca(!1),e}function SJe(t){let e=F.useContext(pJe);return e||Ca(!1),e}function IJe(t){let e=F.useContext(c4);return e||Ca(!1),e}function Ave(t){let e=IJe(),n=e.matches[e.matches.length-1];return n.route.id||Ca(!1),n.route.id}function CJe(){var t;let e=F.useContext(bve),n=SJe(),r=Ave();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function TJe(){let{router:t}=AJe(xve.UseNavigateStable),e=Ave(Eve.UseNavigateStable),n=F.useRef(!1);return vve(()=>{n.current=!0}),F.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,GN({fromRouteId:e},i)))},[t,e])}const _oe={};function NJe(t,e,n){_oe[t]||(_oe[t]=!0)}const Boe={};function kJe(t,e){Boe[e]||(Boe[e]=!0,console.warn(e))}const Moe=(t,e,n)=>kJe(t," React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function PJe(t,e){t!=null&&t.v7_startTransition||Moe("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),t!=null&&t.v7_relativeSplatPath||Moe("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function yI(t){Ca(!1)}function OJe(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ew.Pop,navigator:i,static:a=!1,future:o}=t;UL()&&Ca(!1);let c=e.replace(/^\/*/,"/"),l=F.useMemo(()=>({basename:c,navigator:i,static:a,future:GN({v7_relativeSplatPath:!1},o)}),[c,o,i,a]);typeof r=="string"&&(r=j2(r));let{pathname:u="/",search:f="",hash:d="",state:p=null,key:g="default"}=r,m=F.useMemo(()=>{let v=yve(u,c);return v==null?null:{location:{pathname:v,search:f,hash:d,state:p,key:g},navigationType:s}},[c,u,f,d,p,g,s]);return m==null?null:F.createElement(DL.Provider,{value:l},F.createElement(LL.Provider,{children:n,value:m}))}function RJe(t){let{children:e,location:n}=t;return mJe(VG(e),n)}new Promise(()=>{});function VG(t,e){e===void 0&&(e=[]);let n=[];return F.Children.forEach(t,(r,s)=>{if(!F.isValidElement(r))return;let i=[...e,s];if(r.type===F.Fragment){n.push.apply(n,VG(r.props.children,i));return}r.type!==yI&&Ca(!1),!r.props.index||!r.props.children||Ca(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=VG(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const _Je="6";try{window.__reactRouterVersion=_Je}catch{}const BJe="startTransition",Doe=DD[BJe];function MJe(t){let{basename:e,children:n,future:r,window:s}=t,i=F.useRef();i.current==null&&(i.current=Vze({window:s,v5Compat:!0}));let a=i.current,[o,c]=F.useState({action:a.action,location:a.location}),{v7_startTransition:l}=r||{},u=F.useCallback(f=>{l&&Doe?Doe(()=>c(f)):c(f)},[c,l]);return F.useLayoutEffect(()=>a.listen(u),[a,u]),F.useEffect(()=>PJe(r),[r]),F.createElement(OJe,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}var Loe;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Loe||(Loe={}));var Uoe;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Uoe||(Uoe={}));var u0=(t=>(t.NETWORKS_USER_EDITS="@sequence-recovery.networks-user-edits",t.NETWORKS_USER_ADDITIONS="@sequence-recovery.networks-user-additions",t.ARWEAVE_GATEWAY_URL="@sequence-recovery.arweave-gateway-url",t.ARWEAVE_GRAPHQL_URL="@sequence-recovery.arweave-graphql-url",t.TOKENS_USER_ADDITIONS="@sequence-recovery.tokens-user-additions",t.COLLECTIBLES="@sequence-recovery.collectibles",t.GATEWAY_ADDRESS="@sequence-recovery.gateway-address",t.LAST_CONNECTED_EXTERNAL_PROVIDER_INFO="@sequence-recovery.last-connected-external-provider-info",t.DEFAULT_NETWORK="@sequence-recovery.default-network",t))(u0||{});const e3="@sequence-recovery.navigation-state";var Tr=(t=>(t.SECURITY="security",t.ERC20="erc20",t.ERC721="erc721",t.ERC1155="erc1155",t.TOKEN_METADATA="token-metadata",t))(Tr||{});const DJe="1.2.3";let Pu=class $G extends Error{constructor(e,n={}){var a;const r=n.cause instanceof $G?n.cause.details:(a=n.cause)!=null&&a.message?n.cause.message:n.details,s=n.cause instanceof $G&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${DJe}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function nm(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const Sve=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Ive=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Cve=/^\(.+?\).*?$/,Foe=/^tuple(?<array>(\[(\d*)\])*)$/;function jG(t){let e=t.type;if(Foe.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=jG(i),s<n-1&&(e+=", ")}const r=nm(Foe,t.type);return e+=`)${(r==null?void 0:r.array)||""}`,jG({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function oA(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=jG(s),r!==n-1&&(e+=", ")}return e}function GB(t){var e;return t.type==="function"?`function ${t.name}(${oA(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${oA(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${oA(t.inputs)})`:t.type==="error"?`error ${t.name}(${oA(t.inputs)})`:t.type==="constructor"?`constructor(${oA(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const Tve=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function LJe(t){return Tve.test(t)}function UJe(t){return nm(Tve,t)}const Nve=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function FJe(t){return Nve.test(t)}function VJe(t){return nm(Nve,t)}const kve=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function $Je(t){return kve.test(t)}function jJe(t){return nm(kve,t)}const Pve=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function $Z(t){return Pve.test(t)}function HJe(t){return nm(Pve,t)}const Ove=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function qJe(t){return Ove.test(t)}function KJe(t){return nm(Ove,t)}const Rve=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function GJe(t){return Rve.test(t)}function WJe(t){return nm(Rve,t)}const zJe=/^receive\(\) external payable$/;function JJe(t){return zJe.test(t)}const YJe=new Set(["indexed"]),HG=new Set(["calldata","memory","storage"]);class QJe extends Pu{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class ZJe extends Pu{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class XJe extends Pu{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class eYe extends Pu{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class tYe extends Pu{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class nYe extends Pu{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class rYe extends Pu{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class sYe extends Pu{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}let l4=class extends Pu{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}};class iYe extends Pu{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class aYe extends Pu{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class oYe extends Pu{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class cYe extends Pu{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function lYe(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const a of s[1])i+=`[${a.type}${a.name?`:${a.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:`${t}${r}`}const aj=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function qG(t,e={}){if($Je(t))return uYe(t,e);if(FJe(t))return fYe(t,e);if(LJe(t))return dYe(t,e);if(qJe(t))return hYe(t,e);if(GJe(t))return pYe(t);if(JJe(t))return{type:"receive",stateMutability:"payable"};throw new iYe({signature:t})}function uYe(t,e={}){const n=jJe(t);if(!n)throw new l4({signature:t,type:"function"});const r=Ud(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(m2(r[o],{modifiers:HG,structs:e,type:"function"}));const a=[];if(n.returns){const o=Ud(n.returns),c=o.length;for(let l=0;l<c;l++)a.push(m2(o[l],{modifiers:HG,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:a}}function fYe(t,e={}){const n=VJe(t);if(!n)throw new l4({signature:t,type:"event"});const r=Ud(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(m2(r[a],{modifiers:YJe,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function dYe(t,e={}){const n=UJe(t);if(!n)throw new l4({signature:t,type:"error"});const r=Ud(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(m2(r[a],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function hYe(t,e={}){const n=KJe(t);if(!n)throw new l4({signature:t,type:"constructor"});const r=Ud(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(m2(r[a],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function pYe(t){const e=WJe(t);if(!e)throw new l4({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const gYe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,mYe=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,yYe=/^u?int$/;function m2(t,e){var f,d;const n=lYe(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(aj.has(n))return aj.get(n);const r=Cve.test(t),s=nm(r?mYe:gYe,t);if(!s)throw new eYe({param:t});if(s.name&&bYe(s.name))throw new tYe({param:t,name:s.name});const i=s.name?{name:s.name}:{},a=s.modifier==="indexed"?{indexed:!0}:{},o=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const p=Ud(s.type),g=[],m=p.length;for(let v=0;v<m;v++)g.push(m2(p[v],{structs:o}));l={components:g}}else if(s.type in o)c="tuple",l={components:o[s.type]};else if(yYe.test(s.type))c=`${s.type}256`;else if(s.type==="address payable")c="address";else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!_ve(c))throw new XJe({type:c});if(s.modifier){if(!((d=(f=e==null?void 0:e.modifiers)==null?void 0:f.has)!=null&&d.call(f,s.modifier)))throw new nYe({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(HG.has(s.modifier)&&!vYe(c,!!s.array))throw new rYe({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...a,...l};return aj.set(n,u),u}function Ud(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const a=t[i],o=t.slice(i+1);switch(a){case",":return r===0?Ud(o,[...e,n.trim()]):Ud(o,e,`${n}${a}`,r);case"(":return Ud(o,e,`${n}${a}`,r+1);case")":return Ud(o,e,`${n}${a}`,r-1);default:return Ud(o,e,`${n}${a}`,r)}}if(n==="")return e;if(r!==0)throw new cYe({current:n,depth:r});return e.push(n.trim()),e}function _ve(t){return t==="address"||t==="bool"||t==="function"||t==="string"||Sve.test(t)||Ive.test(t)}const wYe=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function bYe(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||Sve.test(t)||Ive.test(t)||wYe.test(t)}function vYe(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function Bve(t){const e={},n=t.length;for(let a=0;a<n;a++){const o=t[a];if(!$Z(o))continue;const c=HJe(o);if(!c)throw new l4({signature:o,type:"struct"});const l=c.properties.split(";"),u=[],f=l.length;for(let d=0;d<f;d++){const g=l[d].trim();if(!g)continue;const m=m2(g,{type:"struct"});u.push(m)}if(!u.length)throw new aYe({signature:o});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let a=0;a<i;a++){const[o,c]=s[a];r[o]=Mve(c,e)}return r}const xYe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function Mve(t=[],e={},n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const a=t[i];if(Cve.test(a.type))r.push(a);else{const c=nm(xYe,a.type);if(!(c!=null&&c.type))throw new sYe({abiParameter:a});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new oYe({type:u});r.push({...a,type:`tuple${l??""}`,components:Mve(e[u],e,new Set([...n,u]))})}else if(_ve(u))r.push(a);else throw new ZJe({type:u})}}return r}function EYe(t){const e=Bve(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];$Z(i)||n.push(qG(i,e))}return n}function Voe(t){let e;if(typeof t=="string")e=qG(t);else{const n=Bve(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!$Z(i)){e=qG(i,n);break}}}if(!e)throw new QJe({signature:t});return e}function AYe(t){for(const e of t)if(typeof e!="string")return!1;return!0}function Er(t){return AYe(t)?EYe(t):t}const SYe="0.1.1";function IYe(){return SYe}let mn=class Cp extends Error{static setStaticOptions(e){Cp.prototype.docsOrigin=e.docsOrigin,Cp.prototype.showVersion=e.showVersion,Cp.prototype.version=e.version}constructor(e,n={}){const r=(()=>{var u;if(n.cause instanceof Cp){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(u=n.cause)!=null&&u.message?n.cause.message:n.details})(),s=n.cause instanceof Cp&&n.cause.docsPath||n.docsPath,i=n.docsOrigin??Cp.prototype.docsOrigin,a=`${i}${s??""}`,o=!!(n.version??Cp.prototype.showVersion),c=n.version??Cp.prototype.version,l=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s||o?["",r?`Details: ${r}`:void 0,s?`See: ${a}`:void 0,o?`Version: ${c}`:void 0]:[]].filter(u=>typeof u=="string").join(`
`);super(l,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsOrigin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"showVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.cause=n.cause,this.details=r,this.docs=a,this.docsOrigin=i,this.docsPath=s,this.shortMessage=e,this.showVersion=o,this.version=c}walk(e){return Dve(this,e)}};Object.defineProperty(mn,"defaultStaticOptions",{enumerable:!0,configurable:!0,writable:!0,value:{docsOrigin:"https://oxlib.sh",showVersion:!1,version:`ox@${IYe()}`}});mn.setStaticOptions(mn.defaultStaticOptions);function Dve(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?Dve(t.cause,e):e?null:t}const FE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function VL(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Og(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function rc(t,...e){if(!VL(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function jZ(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Og(t.outputLen),Og(t.blockLen)}function o5(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Lve(t,e){rc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function CYe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ih(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Dx(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Th(t,e){return t<<32-e|t>>>e}function HP(t,e){return t<<e|t>>>32-e>>>0}const TYe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function NYe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function kYe(t){for(let e=0;e<t.length;e++)t[e]=NYe(t[e]);return t}const $oe=TYe?t=>t:kYe,Uve=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",PYe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Lx(t){if(rc(t),Uve)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=PYe[t[n]];return e}const wp={_0:48,_9:57,A:65,F:70,a:97,f:102};function joe(t){if(t>=wp._0&&t<=wp._9)return t-wp._0;if(t>=wp.A&&t<=wp.F)return t-(wp.A-10);if(t>=wp.a&&t<=wp.f)return t-(wp.a-10)}function WN(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Uve)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const a=joe(t.charCodeAt(i)),o=joe(t.charCodeAt(i+1));if(a===void 0||o===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=a*16+o}return r}function HZ(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function $L(t){return typeof t=="string"&&(t=HZ(t)),rc(t),t}function Hoe(t){return typeof t=="string"&&(t=HZ(t)),rc(t),t}function fu(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];rc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function OYe(t,e){if(e!==void 0&&{}.toString.call(e)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(t,e)}let qZ=class{};function B7(t){const e=r=>t().update($L(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function KZ(t=32){if(FE&&typeof FE.getRandomValues=="function")return FE.getRandomValues(new Uint8Array(t));if(FE&&typeof FE.randomBytes=="function")return Uint8Array.from(FE.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function RYe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}function _Ye(t,e,n){return t&e^~t&n}function BYe(t,e,n){return t&e^t&n^e&n}let GZ=class extends qZ{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Dx(this.buffer)}update(e){o5(this),e=$L(e),rc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=Dx(e);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){o5(this),Lve(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,ih(this.buffer.subarray(a)),this.padOffset>s-a&&(this.process(r,0),a=0);for(let f=a;f<s;f++)n[f]=0;RYe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=Dx(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)o.setUint32(4*f,u[f],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return e.destroyed=a,e.finished=i,e.length=s,e.pos=o,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Pm=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$o=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),jo=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),MYe=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Fve=Uint8Array.from(new Array(16).fill(0).map((t,e)=>e)),DYe=Fve.map(t=>(9*t+5)%16),Vve=(()=>{const n=[[Fve],[DYe]];for(let r=0;r<4;r++)for(let s of n)s.push(s[r].map(i=>MYe[i]));return n})(),$ve=Vve[0],jve=Vve[1],Hve=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>Uint8Array.from(t)),LYe=$ve.map((t,e)=>t.map(n=>Hve[e][n])),UYe=jve.map((t,e)=>t.map(n=>Hve[e][n])),FYe=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),VYe=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function qoe(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const qP=new Uint32Array(16);let $Ye=class extends GZ{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:s,h4:i}=this;return[e,n,r,s,i]}set(e,n,r,s,i){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=s|0,this.h4=i|0}process(e,n){for(let p=0;p<16;p++,n+=4)qP[p]=e.getUint32(n,!0);let r=this.h0|0,s=r,i=this.h1|0,a=i,o=this.h2|0,c=o,l=this.h3|0,u=l,f=this.h4|0,d=f;for(let p=0;p<5;p++){const g=4-p,m=FYe[p],v=VYe[p],A=$ve[p],S=jve[p],I=LYe[p],B=UYe[p];for(let D=0;D<16;D++){const V=HP(r+qoe(p,i,o,l)+qP[A[D]]+m,I[D])+f|0;r=f,f=l,l=HP(o,10)|0,o=i,i=V}for(let D=0;D<16;D++){const V=HP(s+qoe(g,a,c,u)+qP[S[D]]+v,B[D])+d|0;s=d,d=u,u=HP(c,10)|0,c=a,a=V}}this.set(this.h1+o+u|0,this.h2+l+d|0,this.h3+f+s|0,this.h4+r+a|0,this.h0+i+c|0)}roundClean(){ih(qP)}destroy(){this.destroyed=!0,ih(this.buffer),this.set(0,0,0,0,0)}};const jYe=B7(()=>new $Ye),KP=BigInt(2**32-1),Koe=BigInt(32);function HYe(t,e=!1){return e?{h:Number(t&KP),l:Number(t>>Koe&KP)}:{h:Number(t>>Koe&KP)|0,l:Number(t&KP)|0}}function qve(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:a,l:o}=HYe(t[i],e);[r[i],s[i]]=[a,o]}return[r,s]}const Goe=(t,e,n)=>t>>>n,Woe=(t,e,n)=>t<<32-n|e>>>n,VE=(t,e,n)=>t>>>n|e<<32-n,$E=(t,e,n)=>t<<32-n|e>>>n,GP=(t,e,n)=>t<<64-n|e>>>n-32,WP=(t,e,n)=>t>>>n-32|e<<64-n,qYe=(t,e,n)=>t<<n|e>>>32-n,KYe=(t,e,n)=>e<<n|t>>>32-n,GYe=(t,e,n)=>e<<n-32|t>>>64-n,WYe=(t,e,n)=>t<<n-32|e>>>64-n;function bp(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const zYe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),JYe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,YYe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),QYe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,ZYe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),XYe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,eQe=BigInt(0),A8=BigInt(1),tQe=BigInt(2),nQe=BigInt(7),rQe=BigInt(256),sQe=BigInt(113),Kve=[],Gve=[],Wve=[];for(let t=0,e=A8,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Kve.push(2*(5*r+n)),Gve.push((t+1)*(t+2)/2%64);let s=eQe;for(let i=0;i<7;i++)e=(e<<A8^(e>>nQe)*sQe)%rQe,e&tQe&&(s^=A8<<(A8<<BigInt(i))-A8);Wve.push(s)}const zve=qve(Wve,!0),iQe=zve[0],aQe=zve[1],zoe=(t,e,n)=>n>32?GYe(t,e,n):qYe(t,e,n),Joe=(t,e,n)=>n>32?WYe(t,e,n):KYe(t,e,n);function oQe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let a=0;a<10;a++)n[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,l=n[c],u=n[c+1],f=zoe(l,u,1)^n[o],d=Joe(l,u,1)^n[o+1];for(let p=0;p<50;p+=10)t[a+p]^=f,t[a+p+1]^=d}let s=t[2],i=t[3];for(let a=0;a<24;a++){const o=Gve[a],c=zoe(s,i,o),l=Joe(s,i,o),u=Kve[a];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)n[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~n[(o+2)%10]&n[(o+4)%10]}t[0]^=iQe[r],t[1]^=aQe[r]}ih(n)}let cQe=class Jve extends qZ{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Og(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=CYe(this.state)}clone(){return this._cloneInto()}keccak(){$oe(this.state32),oQe(this.state32,this.rounds),$oe(this.state32),this.posOut=0,this.pos=0}update(e){o5(this),e=$L(e),rc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let o=0;o<a;o++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){o5(this,!1),rc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Og(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Lve(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ih(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return e||(e=new Jve(n,r,s,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}};const lQe=(t,e,n)=>B7(()=>new cQe(e,t,n)),Yve=lQe(1,136,256/8),uQe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Om=new Uint32Array(64);let fQe=class extends GZ{constructor(e=32){super(64,e,8,!1),this.A=Pm[0]|0,this.B=Pm[1]|0,this.C=Pm[2]|0,this.D=Pm[3]|0,this.E=Pm[4]|0,this.F=Pm[5]|0,this.G=Pm[6]|0,this.H=Pm[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:a,G:o,H:c}=this;return[e,n,r,s,i,a,o,c]}set(e,n,r,s,i,a,o,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,n){for(let f=0;f<16;f++,n+=4)Om[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const d=Om[f-15],p=Om[f-2],g=Th(d,7)^Th(d,18)^d>>>3,m=Th(p,17)^Th(p,19)^p>>>10;Om[f]=m+Om[f-7]+g+Om[f-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=Th(o,6)^Th(o,11)^Th(o,25),p=u+d+_Ye(o,c,l)+uQe[f]+Om[f]|0,m=(Th(r,2)^Th(r,13)^Th(r,22))+BYe(r,s,i)|0;u=l,l=c,c=o,o=a+p|0,a=i,i=s,s=r,r=p+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,a,o,c,l,u)}roundClean(){ih(Om)}destroy(){this.set(0,0,0,0,0,0,0,0),ih(this.buffer)}};const Qve=qve(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),dQe=Qve[0],hQe=Qve[1],Rm=new Uint32Array(80),_m=new Uint32Array(80);let Zve=class extends GZ{constructor(e=64){super(128,e,16,!1),this.Ah=jo[0]|0,this.Al=jo[1]|0,this.Bh=jo[2]|0,this.Bl=jo[3]|0,this.Ch=jo[4]|0,this.Cl=jo[5]|0,this.Dh=jo[6]|0,this.Dl=jo[7]|0,this.Eh=jo[8]|0,this.El=jo[9]|0,this.Fh=jo[10]|0,this.Fl=jo[11]|0,this.Gh=jo[12]|0,this.Gl=jo[13]|0,this.Hh=jo[14]|0,this.Hl=jo[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:a,Dh:o,Dl:c,Eh:l,El:u,Fh:f,Fl:d,Gh:p,Gl:g,Hh:m,Hl:v}=this;return[e,n,r,s,i,a,o,c,l,u,f,d,p,g,m,v]}set(e,n,r,s,i,a,o,c,l,u,f,d,p,g,m,v){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=f|0,this.Fl=d|0,this.Gh=p|0,this.Gl=g|0,this.Hh=m|0,this.Hl=v|0}process(e,n){for(let I=0;I<16;I++,n+=4)Rm[I]=e.getUint32(n),_m[I]=e.getUint32(n+=4);for(let I=16;I<80;I++){const B=Rm[I-15]|0,D=_m[I-15]|0,V=VE(B,D,1)^VE(B,D,8)^Goe(B,D,7),O=$E(B,D,1)^$E(B,D,8)^Woe(B,D,7),U=Rm[I-2]|0,Q=_m[I-2]|0,ie=VE(U,Q,19)^GP(U,Q,61)^Goe(U,Q,6),G=$E(U,Q,19)^WP(U,Q,61)^Woe(U,Q,6),R=YYe(O,G,_m[I-7],_m[I-16]),k=QYe(R,V,ie,Rm[I-7],Rm[I-16]);Rm[I]=k|0,_m[I]=R|0}let{Ah:r,Al:s,Bh:i,Bl:a,Ch:o,Cl:c,Dh:l,Dl:u,Eh:f,El:d,Fh:p,Fl:g,Gh:m,Gl:v,Hh:A,Hl:S}=this;for(let I=0;I<80;I++){const B=VE(f,d,14)^VE(f,d,18)^GP(f,d,41),D=$E(f,d,14)^$E(f,d,18)^WP(f,d,41),V=f&p^~f&m,O=d&g^~d&v,U=ZYe(S,D,O,hQe[I],_m[I]),Q=XYe(U,A,B,V,dQe[I],Rm[I]),ie=U|0,G=VE(r,s,28)^GP(r,s,34)^GP(r,s,39),R=$E(r,s,28)^WP(r,s,34)^WP(r,s,39),k=r&i^r&o^i&o,b=s&a^s&c^a&c;A=m|0,S=v|0,m=p|0,v=g|0,p=f|0,g=d|0,{h:f,l:d}=bp(l|0,u|0,Q|0,ie|0),l=o|0,u=c|0,o=i|0,c=a|0,i=r|0,a=s|0;const w=zYe(ie,R,b);r=JYe(w,Q,G,k),s=w|0}({h:r,l:s}=bp(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:a}=bp(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l:c}=bp(this.Ch|0,this.Cl|0,o|0,c|0),{h:l,l:u}=bp(this.Dh|0,this.Dl|0,l|0,u|0),{h:f,l:d}=bp(this.Eh|0,this.El|0,f|0,d|0),{h:p,l:g}=bp(this.Fh|0,this.Fl|0,p|0,g|0),{h:m,l:v}=bp(this.Gh|0,this.Gl|0,m|0,v|0),{h:A,l:S}=bp(this.Hh|0,this.Hl|0,A|0,S|0),this.set(r,s,i,a,o,c,l,u,f,d,p,g,m,v,A,S)}roundClean(){ih(Rm,_m)}destroy(){ih(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},pQe=class extends Zve{constructor(){super(48),this.Ah=$o[0]|0,this.Al=$o[1]|0,this.Bh=$o[2]|0,this.Bl=$o[3]|0,this.Ch=$o[4]|0,this.Cl=$o[5]|0,this.Dh=$o[6]|0,this.Dl=$o[7]|0,this.Eh=$o[8]|0,this.El=$o[9]|0,this.Fh=$o[10]|0,this.Fl=$o[11]|0,this.Gh=$o[12]|0,this.Gl=$o[13]|0,this.Hh=$o[14]|0,this.Hl=$o[15]|0}};const u4=B7(()=>new fQe),WB=B7(()=>new Zve),gQe=B7(()=>new pQe),Xve=u4;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const WZ=BigInt(0),KG=BigInt(1);function M7(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function zZ(t){if(!M7(t))throw new Error("Uint8Array expected")}function zN(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function zP(t){const e=t.toString(16);return e.length&1?"0"+e:e}function exe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?WZ:BigInt("0x"+t)}const txe=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",mQe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function JN(t){if(zZ(t),txe)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=mQe[t[n]];return e}const vp={_0:48,_9:57,A:65,F:70,a:97,f:102};function Yoe(t){if(t>=vp._0&&t<=vp._9)return t-vp._0;if(t>=vp.A&&t<=vp.F)return t-(vp.A-10);if(t>=vp.a&&t<=vp.f)return t-(vp.a-10)}function zB(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(txe)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const a=Yoe(t.charCodeAt(i)),o=Yoe(t.charCodeAt(i+1));if(a===void 0||o===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=a*16+o}return r}function Ux(t){return exe(JN(t))}function nxe(t){return zZ(t),exe(JN(Uint8Array.from(t).reverse()))}function D7(t,e){return zB(t.toString(16).padStart(e*2,"0"))}function rxe(t,e){return D7(t,e).reverse()}function uf(t,e,n){let r;if(typeof e=="string")try{r=zB(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(M7(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function JB(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];zZ(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function sxe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const oj=t=>typeof t=="bigint"&&WZ<=t;function JZ(t,e,n){return oj(t)&&oj(e)&&oj(n)&&e<=t&&t<n}function P3(t,e,n,r){if(!JZ(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function yQe(t){let e;for(e=0;t>WZ;t>>=KG,e+=1);return e}const jL=t=>(KG<<BigInt(t))-KG,cj=t=>new Uint8Array(t),Qoe=t=>Uint8Array.from(t);function wQe(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=cj(t),s=cj(t),i=0;const a=()=>{r.fill(1),s.fill(0),i=0},o=(...f)=>n(s,r,...f),c=(f=cj(0))=>{s=o(Qoe([0]),f),r=o(),f.length!==0&&(s=o(Qoe([1]),f),r=o())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<e;){r=o();const p=r.slice();d.push(p),f+=r.length}return JB(...d)};return(f,d)=>{a(),c(f);let p;for(;!(p=d(l()));)c();return a(),p}}const bQe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||M7(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function HL(t,e,n={}){const r=(s,i,a)=>{const o=bQe[i];if(typeof o!="function")throw new Error("invalid validator function");const c=t[s];if(!(a&&c===void 0)&&!o(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function Zoe(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}function f4(t,e){if(d0(t)>e)throw new DQe({givenSize:d0(t),maxSize:e})}function vQe(t,e){if(typeof e=="number"&&e>0&&e>d0(t)-1)throw new mxe({offset:e,position:"start",size:d0(t)})}function xQe(t,e,n){if(typeof e=="number"&&typeof n=="number"&&d0(t)!==n-e)throw new mxe({offset:n,position:"end",size:d0(t)})}const xp={zero:48,nine:57,A:65,F:70,a:97,f:102};function Xoe(t){if(t>=xp.zero&&t<=xp.nine)return t-xp.zero;if(t>=xp.A&&t<=xp.F)return t-(xp.A-10);if(t>=xp.a&&t<=xp.f)return t-(xp.a-10)}function ixe(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new LQe({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const a=n==="right";s[a?i:r-i-1]=t[a?i:t.length-i-1]}return s}function axe(t,e={}){const{dir:n="left"}=e;let r=t,s=0;for(let i=0;i<r.length-1&&r[n==="left"?i:r.length-i-1].toString()==="0";i++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r}function qL(t,e){if(ui(t)>e)throw new NQe({givenSize:ui(t),maxSize:e})}function EQe(t,e){if(typeof e=="number"&&e>0&&e>ui(t)-1)throw new dxe({offset:e,position:"start",size:ui(t)})}function AQe(t,e,n){if(typeof e=="number"&&typeof n=="number"&&ui(t)!==n-e)throw new dxe({offset:n,position:"end",size:ui(t)})}function oxe(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new kQe({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const SQe="#__bigint";function d4(t,e,n){return JSON.stringify(t,(r,s)=>typeof e=="function"?e(r,s):typeof s=="bigint"?s.toString()+SQe:s,n)}const IQe=new TextEncoder,CQe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Mi(t,e={}){const{strict:n=!1}=e;if(!t)throw new ece(t);if(typeof t!="string")throw new ece(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new tce(t);if(!t.startsWith("0x"))throw new tce(t)}function Us(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Su(t){return t instanceof Uint8Array?Un(t):Array.isArray(t)?Un(new Uint8Array(t)):t}function cxe(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(qL(n,e.size),ii(n,e.size)):n}function Un(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=CQe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(qL(r,e.size),y2(r,e.size)):r}function Gn(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const l=typeof t=="bigint"?"n":"";throw new fxe({max:i?`${i}${l}`:void 0,min:`${a}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?BigInt.asUintN(r*8,BigInt(s)):s).toString(16)}`;return r?ii(c,r):c}function Il(t,e={}){return Un(IQe.encode(t),e)}function YZ(t,e){return sxe(Lt(t),Lt(e))}function ii(t,e){return oxe(t,{dir:"left",size:e})}function y2(t,e){return oxe(t,{dir:"right",size:e})}function lxe(t){return Un(ZZ(t))}function au(t,e,n,r={}){const{strict:s}=r;EQe(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&AQe(i,e,n),i}function ui(t){return Math.ceil((t.length-2)/2)}function w2(t,e={}){const{signed:n}=e;e.size&&qL(t,e.size);const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n)-1n,a=i>>1n;return r<=a?r:r-i-1n}function B0(t,e={}){return Lt(t,e)}function TQe(t,e={}){const{signed:n,size:r}=e;return Number(!n&&!r?t:w2(t,e))}function uxe(t,e={}){const{size:n}=e;let r=Lt(t);return n&&(f4(r,n),r=pxe(r)),new TextDecoder().decode(r)}function h4(t,e={}){const{strict:n=!1}=e;try{return Mi(t,{strict:n}),!0}catch{return!1}}let fxe=class extends mn{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class ece extends mn{constructor(e){super(`Value \`${typeof e=="object"?d4(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class tce extends mn{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let NQe=class extends mn{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},dxe=class extends mn{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},kQe=class extends mn{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const PQe=new TextDecoder,OQe=new TextEncoder;function RQe(t){if(!(t instanceof Uint8Array)){if(!t)throw new JP(t);if(typeof t!="object")throw new JP(t);if(!("BYTES_PER_ELEMENT"in t))throw new JP(t);if(t.BYTES_PER_ELEMENT!==1||t.constructor.name!=="Uint8Array")throw new JP(t)}}function Dt(...t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function Ln(t){return t instanceof Uint8Array?t:typeof t=="string"?Lt(t):Jp(t)}function Jp(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function Lt(t,e={}){const{size:n}=e;let r=t;n&&(qL(t,n),r=y2(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,a=new Uint8Array(i);for(let o=0,c=0;o<i;o++){const l=Xoe(s.charCodeAt(c++)),u=Xoe(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new mn(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);a[o]=l<<4|u}return a}function Ot(t,e){const n=Gn(t,e);return Lt(n)}function vi(t,e={}){const{size:n}=e,r=OQe.encode(t);return typeof n=="number"?(f4(r,n),QZ(r,n)):r}function f0(t,e){return sxe(t,e)}function dt(t,e){return ixe(t,{dir:"left",size:e})}function QZ(t,e){return ixe(t,{dir:"right",size:e})}function ZZ(t){return crypto.getRandomValues(new Uint8Array(t))}function d0(t){return t.length}function rf(t,e,n,r={}){const{strict:s}=r;vQe(t,e);const i=t.slice(e,n);return s&&xQe(i,e,n),i}function Vf(t,e={}){const{size:n}=e;typeof n<"u"&&f4(t,n);const r=Un(t,e);return w2(r,e)}function _Qe(t,e={}){const{size:n}=e;let r=t;if(typeof n<"u"&&(f4(r,n),r=hxe(r)),r.length>1||r[0]>1)throw new MQe(r);return!!r[0]}function mr(t,e={}){return Un(t,e)}function Hi(t,e={}){const{size:n}=e;typeof n<"u"&&f4(t,n);const r=Un(t,e);return TQe(r,e)}function BQe(t,e={}){const{size:n}=e;let r=t;return typeof n<"u"&&(f4(r,n),r=pxe(r)),PQe.decode(r)}function hxe(t){return axe(t,{dir:"left"})}function pxe(t){return axe(t,{dir:"right"})}function gxe(t){try{return RQe(t),!0}catch{return!1}}let MQe=class extends mn{constructor(e){super(`Bytes value \`${e}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}};class JP extends mn{constructor(e){super(`Value \`${typeof e=="object"?d4(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}let DQe=class extends mn{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},mxe=class extends mn{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}},LQe=class extends mn{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};function xr(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=Yve(Ln(t));return n==="Bytes"?r:Un(r)}function YN(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=Xve(Ln(t));return n==="Bytes"?r:Un(r)}let UQe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const FQe={checksum:new UQe(8192)},lj=FQe.checksum;function yxe(t,e={}){const{compressed:n}=e,{prefix:r,x:s,y:i}=t;if(n===!1||typeof s=="bigint"&&typeof i=="bigint"){if(r!==4)throw new nce({prefix:r,cause:new HQe});return}if(n===!0||typeof s=="bigint"&&typeof i>"u"){if(r!==3&&r!==2)throw new nce({prefix:r,cause:new jQe});return}throw new $Qe({publicKey:t})}function QN(t){const e=(()=>{if(h4(t))return wxe(t);if(gxe(t))return VQe(t);const{prefix:n,x:r,y:s}=t;return typeof r=="bigint"&&typeof s=="bigint"?{prefix:n??4,x:r,y:s}:{prefix:n,x:r}})();return yxe(e),e}function VQe(t){return wxe(Un(t))}function wxe(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new qQe({publicKey:t});if(t.length===130){const r=BigInt(au(t,0,32)),s=BigInt(au(t,32,64));return{prefix:4,x:r,y:s}}if(t.length===132){const r=Number(au(t,0,1)),s=BigInt(au(t,1,33)),i=BigInt(au(t,33,65));return{prefix:r,x:s,y:i}}const e=Number(au(t,0,1)),n=BigInt(au(t,1,33));return{prefix:e,x:n}}function bxe(t,e={}){yxe(t);const{prefix:n,x:r,y:s}=t,{includePrefix:i=!0}=e;return Us(i?Gn(n,{size:1}):"0x",Gn(r,{size:32}),typeof s=="bigint"?Gn(s,{size:32}):"0x")}class $Qe extends mn{constructor({publicKey:e}){super(`Value \`${d4(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class nce extends mn{constructor({prefix:e,cause:n}){super(`Prefix "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class jQe extends mn{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class HQe extends mn{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let qQe=class extends mn{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${ui(Su(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const KQe=/^0x[a-fA-F0-9]{40}$/;function xa(t,e={}){const{strict:n=!0}=e;if(!KQe.test(t))throw new GG({address:t,cause:new vxe});if(n){if(t.toLowerCase()===t)return;if(Zd(t)!==t)throw new GG({address:t,cause:new GQe})}}function Zd(t){if(lj.has(t))return lj.get(t);xa(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=xr(vi(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return lj.set(t,s),s}function Yi(t,e={}){const{checksum:n=!1}=e;return xa(t),n?Zd(t):t}function XZ(t,e={}){const n=xr(`0x${bxe(t).slice(4)}`).substring(26);return Yi(`0x${n}`,e)}function Mn(t,e){return xa(t,{strict:!1}),xa(e,{strict:!1}),t.toLowerCase()===e.toLowerCase()}function c5(t,e={}){const{strict:n=!0}=e??{};try{return xa(t,{strict:n}),!0}catch{return!1}}let GG=class extends mn{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},vxe=class extends mn{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}};class GQe extends mn{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function WG(t){let e=!0,n="",r=0,s="",i=!1;for(let a=0;a<t.length;a++){const o=t[a];if(["(",")",","].includes(o)&&(e=!0),o==="("&&r++,o===")"&&r--,!!e){if(r===0){if(o===" "&&["event","function","error",""].includes(s))s="";else if(s+=o,o===")"){i=!0;break}continue}if(o===" "){t[a-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=o,n+=o}}if(!i)throw new mn("Unable to normalize signature.");return s}function zG(t,e){const n=typeof t,r=e.type;switch(r){case"address":return c5(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>zG(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>zG(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function xxe(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return xxe(s.components,i.components,n[r]);const a=[s.type,i.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?c5(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?c5(n[r],{strict:!1}):!1)return a}}function WQe(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?Voe(t):t;return{...r,...n?{hash:t3(r)}:{}}}function KL(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=h4(e,{strict:!1}),a=t.filter(l=>i?l.type==="function"||l.type==="error"?Exe(l)===au(e,0,4):l.type==="event"?t3(l)===e:!1:"name"in l&&l.name===e);if(a.length===0)throw new JG({name:e});if(a.length===1)return{...a[0],...s?{hash:t3(a[0])}:{}};let o;for(const l of a){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:t3(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((f,d)=>{const p="inputs"in l&&l.inputs[d];return p?zG(f,p):!1})){if(o&&"inputs"in o&&o.inputs){const f=xxe(l.inputs,o.inputs,r);if(f)throw new JQe({abiItem:l,type:f[0]},{abiItem:o,type:f[1]})}o=l}}const c=(()=>{if(o)return o;const[l,...u]=a;return{...l,overloads:u}})();if(!c)throw new JG({name:e});return{...c,...s?{hash:t3(c)}:{}}}function Exe(...t){const e=(()=>{if(Array.isArray(t[0])){const[n,r]=t;return KL(n,r)}return t[0]})();return au(t3(e),0,4)}function zQe(...t){const e=(()=>{if(Array.isArray(t[0])){const[r,s]=t;return KL(r,s)}return t[0]})(),n=typeof e=="string"?e:GB(e);return WG(n)}function t3(...t){const e=(()=>{if(Array.isArray(t[0])){const[n,r]=t;return KL(n,r)}return t[0]})();return typeof e!="string"&&"hash"in e&&e.hash?e.hash:xr(Il(zQe(e)))}class JQe extends mn{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${WG(GB(e.abiItem))}\`, and`,`\`${n.type}\` in \`${WG(GB(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}let JG=class extends mn{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}};class YQe extends mn{constructor({data:e}){super(`Selector size is invalid. Expected 4 bytes. Received ${ui(e)} bytes ("${e}").`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.InvalidSelectorSizeError"})}}const QQe=/^(.*)\[([0-9]*)\]$/,Axe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,eX=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,rce=2n**256n-1n;function O3(t,e,n){const{checksumAddress:r,staticPosition:s}=n,i=rX(e.type);if(i){const[a,o]=i;return XQe(t,{...e,type:o},{checksumAddress:r,length:a,staticPosition:s})}if(e.type==="tuple")return rZe(t,e,{checksumAddress:r,staticPosition:s});if(e.type==="address")return ZQe(t,{checksum:r});if(e.type==="bool")return eZe(t);if(e.type.startsWith("bytes"))return tZe(t,e,{staticPosition:s});if(e.type.startsWith("uint")||e.type.startsWith("int"))return nZe(t,e);if(e.type==="string")return sZe(t,{staticPosition:s});throw new sX(e.type)}const sce=32,YG=32;function ZQe(t,e={}){const{checksum:n=!1}=e,r=t.readBytes(32);return[(i=>n?Zd(i):i)(Un(rf(r,-20))),32]}function XQe(t,e,n){const{checksumAddress:r,length:s,staticPosition:i}=n;if(!s){const c=Hi(t.readBytes(YG)),l=i+c,u=l+sce;t.setPosition(l);const f=Hi(t.readBytes(sce)),d=ZN(e);let p=0;const g=[];for(let m=0;m<f;++m){t.setPosition(u+(d?m*32:p));const[v,A]=O3(t,e,{checksumAddress:r,staticPosition:u});p+=A,g.push(v)}return t.setPosition(i+32),[g,32]}if(ZN(e)){const c=Hi(t.readBytes(YG)),l=i+c,u=[];for(let f=0;f<s;++f){t.setPosition(l+f*32);const[d]=O3(t,e,{checksumAddress:r,staticPosition:l});u.push(d)}return t.setPosition(i+32),[u,32]}let a=0;const o=[];for(let c=0;c<s;++c){const[l,u]=O3(t,e,{checksumAddress:r,staticPosition:i+a});a+=u,o.push(l)}return[o,a]}function eZe(t){return[_Qe(t.readBytes(32),{size:32}),32]}function tZe(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const a=Hi(t.readBytes(32));t.setPosition(n+a);const o=Hi(t.readBytes(32));if(o===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(o);return t.setPosition(n+32),[Un(c),32]}return[Un(t.readBytes(Number.parseInt(s,10),32)),32]}function nZe(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?Vf(s,{signed:n}):Hi(s,{signed:n}),32]}function rZe(t,e,n){const{checksumAddress:r,staticPosition:s}=n,i=e.components.length===0||e.components.some(({name:c})=>!c),a=i?[]:{};let o=0;if(ZN(e)){const c=Hi(t.readBytes(YG)),l=s+c;for(let u=0;u<e.components.length;++u){const f=e.components[u];t.setPosition(l+o);const[d,p]=O3(t,f,{checksumAddress:r,staticPosition:l});o+=p,a[i?u:f==null?void 0:f.name]=d}return t.setPosition(s+32),[a,32]}for(let c=0;c<e.components.length;++c){const l=e.components[c],[u,f]=O3(t,l,{checksumAddress:r,staticPosition:s});a[i?c:l==null?void 0:l.name]=u,o+=f}return[a,o]}function sZe(t,{staticPosition:e}){const n=Hi(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Hi(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),a=BQe(hxe(i));return t.setPosition(e+32),[a,32]}function iZe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(tX({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function tX({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=rX(r.type);if(s){const[i,a]=s;return oZe(n,{checksumAddress:t,length:i,parameter:{...r,type:a}})}if(r.type==="tuple")return dZe(n,{checksumAddress:t,parameter:r});if(r.type==="address")return aZe(n,{checksum:t});if(r.type==="bool")return lZe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,a="256"]=eX.exec(r.type)??[];return uZe(n,{signed:i,size:Number(a)})}if(r.type.startsWith("bytes"))return cZe(n,{type:r.type});if(r.type==="string")return fZe(n);throw new sX(r.type)}function nX(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:o}=t[i];a?e+=32:e+=ui(o)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:o}=t[i];a?(n.push(Gn(e+s,{size:32})),r.push(o),s+=ui(o)):n.push(o)}return Us(...n,...r)}function aZe(t,e){const{checksum:n=!1}=e;return xa(t,{strict:n}),{dynamic:!1,encoded:ii(t.toLowerCase())}}function oZe(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new vZe(t);if(!i&&t.length!==r)throw new bZe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let a=!1;const o=[];for(let c=0;c<t.length;c++){const l=tX({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(a=!0),o.push(l)}if(i||a){const c=nX(o);if(i){const l=Gn(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?Us(l,c):l}}if(a)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Us(...o.map(({encoded:c})=>c))}}function cZe(t,{type:e}){const[,n]=e.split("bytes"),r=ui(t);if(!n){let s=t;return r%32!==0&&(s=y2(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Us(ii(Gn(r,{size:32})),s)}}if(r!==Number.parseInt(n,10))throw new Sxe({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:y2(t)}}function lZe(t){if(typeof t!="boolean")throw new mn(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:ii(cxe(t))}}function uZe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new fxe({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Gn(t,{size:32,signed:e})}}function fZe(t){const e=Il(t),n=Math.ceil(ui(e)/32),r=[];for(let s=0;s<n;s++)r.push(y2(au(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Us(y2(Gn(ui(e),{size:32})),...r)}}function dZe(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let a=0;a<r.components.length;a++){const o=r.components[a],c=Array.isArray(t)?a:o.name,l=tX({checksumAddress:n,parameter:o,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?nX(i):Us(...i.map(({encoded:a})=>a))}}function rX(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function ZN(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(ZN);const n=rX(t.type);return!!(n&&ZN({...t,type:n[1]}))}const hZe={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new mZe({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new gZe({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new ice({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new ice({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function pZe(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(hZe);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}let ice=class extends mn{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}},gZe=class extends mn{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}},mZe=class extends mn{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}};function YB(t,e,n={}){const{as:r="Array",checksumAddress:s=!1}=n,i=typeof e=="string"?Lt(e):e,a=pZe(i);if(d0(i)===0&&t.length>0)throw new wZe;if(d0(i)&&d0(i)<32)throw new yZe({data:typeof e=="string"?e:Un(e),parameters:t,size:d0(i)});let o=0;const c=r==="Array"?[]:{};for(let l=0;l<t.length;++l){const u=t[l];a.setPosition(o);const[f,d]=O3(a,u,{checksumAddress:s,staticPosition:0});o+=d,r==="Array"?c.push(f):c[u.name??l]=f}return c}function l5(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new Ixe({expectedLength:t.length,givenLength:e.length});const s=iZe({checksumAddress:r,parameters:t,values:e}),i=nX(s);return i.length===0?"0x":i}function QB(t,e){if(t.length!==e.length)throw new Ixe({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(QB.encode(s,i))}return Us(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return xa(c),ii(c.toLowerCase(),s?32:0)}if(n==="string")return Il(r);if(n==="bytes")return r;if(n==="bool")return ii(cxe(r),s?32:1);const i=n.match(eX);if(i){const[c,l,u="256"]=i,f=Number.parseInt(u,10)/8;return Gn(r,{size:s?32:f,signed:l==="int"})}const a=n.match(Axe);if(a){const[c,l]=a;if(Number.parseInt(l,10)!==(r.length-2)/2)throw new Sxe({expectedSize:Number.parseInt(l,10),value:r});return y2(r,s?32:0)}const o=n.match(QQe);if(o&&Array.isArray(r)){const[c,l]=o,u=[];for(let f=0;f<r.length;f++)u.push(e(l,r[f],!0));return u.length===0?"0x":Us(...u)}throw new sX(n)}t.encode=e})(QB||(QB={}));class yZe extends mn{constructor({data:e,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${oA(n)})`,`Data:   ${e} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class wZe extends mn{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class bZe extends mn{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}let Sxe=class extends mn{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${ui(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}};class Ixe extends mn{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}let vZe=class extends mn{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}};class sX extends mn{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function xZe(...t){var i;const[e,n]=(()=>{if(Array.isArray(t[0])){const[a,o,c]=t;return[XN(a,o),c]}return t})(),{overloads:r}=e;if(ui(n)<4)throw new YQe({data:n});if(((i=e.inputs)==null?void 0:i.length)===0)return;const s=r?XN([e,...r],n):e;if(!(ui(n)<=4))return YB(s.inputs,au(n,4))}function Cxe(...t){const[e,n,r={}]=(()=>{if(Array.isArray(t[0])){const[i,a,o,c]=t;return[XN(i,a),o,c]}return t})(),s=YB(e.outputs,n,r);if(!(s&&Object.keys(s).length===0))return s&&Object.keys(s).length===1?Array.isArray(s)?s[0]:Object.values(s)[0]:s}function Bs(...t){const[e,n=[]]=(()=>{if(Array.isArray(t[0])){const[l,u,f]=t;return[XN(l,u,{args:f}),f]}const[o,c]=t;return[o,c]})(),{overloads:r}=e,s=r?XN([e,...r],e.name,{args:n}):e,i=ZB(s),a=n.length>0?l5(s.inputs,n):void 0;return a?Us(i,a):i}function H2(t,e={}){return WQe(t,e)}function XN(t,e,n){const r=KL(t,e,n);if(r.type!=="function")throw new JG({name:e,type:"function"});return r}function ZB(t){return Exe(t)}let Txe=class extends qZ{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,jZ(e);const r=$L(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),ih(i)}update(e){return o5(this),this.iHash.update(e),this}digestInto(e){o5(this),rc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:a,outputLen:o}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const u5=(t,e,n)=>new Txe(t,e).update(n).digest();u5.create=(t,e)=>new Txe(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bl=BigInt(0),Uc=BigInt(1),Kv=BigInt(2),EZe=BigInt(3),Nxe=BigInt(4),kxe=BigInt(5),Pxe=BigInt(8);function dl(t,e){const n=t%e;return n>=bl?n:e+n}function Wu(t,e,n){let r=t;for(;e-- >bl;)r*=r,r%=n;return r}function QG(t,e){if(t===bl)throw new Error("invert: expected non-zero number");if(e<=bl)throw new Error("invert: expected positive modulus, got "+e);let n=dl(t,e),r=e,s=bl,i=Uc;for(;n!==bl;){const o=r/n,c=r%n,l=s-i*o;r=n,n=c,s=i,i=l}if(r!==Uc)throw new Error("invert: does not exist");return dl(s,e)}function Oxe(t,e){const n=(t.ORDER+Uc)/Nxe,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function AZe(t,e){const n=(t.ORDER-kxe)/Pxe,r=t.mul(e,Kv),s=t.pow(r,n),i=t.mul(e,s),a=t.mul(t.mul(i,Kv),s),o=t.mul(i,t.sub(a,t.ONE));if(!t.eql(t.sqr(o),e))throw new Error("Cannot find square root");return o}function SZe(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Uc,n=0;for(;e%Kv===bl;)e/=Kv,n++;let r=Kv;const s=p4(t);for(;ace(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Oxe;let i=s.pow(r,e);const a=(e+Uc)/Kv;return function(c,l){if(c.is0(l))return l;if(ace(c,l)!==1)throw new Error("Cannot find square root");let u=n,f=c.mul(c.ONE,i),d=c.pow(l,e),p=c.pow(l,a);for(;!c.eql(d,c.ONE);){if(c.is0(d))return c.ZERO;let g=1,m=c.sqr(d);for(;!c.eql(m,c.ONE);)if(g++,m=c.sqr(m),g===u)throw new Error("Cannot find square root");const v=Uc<<BigInt(u-g-1),A=c.pow(f,v);u=g,f=c.sqr(A),d=c.mul(d,f),p=c.mul(p,A)}return p}}function IZe(t){return t%Nxe===EZe?Oxe:t%Pxe===kxe?AZe:SZe(t)}const CZe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function TZe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=CZe.reduce((r,s)=>(r[s]="function",r),e);return HL(t,n)}function NZe(t,e,n){if(n<bl)throw new Error("invalid exponent, negatives unsupported");if(n===bl)return t.ONE;if(n===Uc)return e;let r=t.ONE,s=e;for(;n>bl;)n&Uc&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Uc;return r}function Rxe(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((a,o,c)=>t.is0(o)?a:(r[c]=a,t.mul(a,o)),t.ONE),i=t.inv(s);return e.reduceRight((a,o,c)=>t.is0(o)?a:(r[c]=t.mul(a,r[c]),t.mul(a,o)),i),r}function ace(t,e){const n=(t.ORDER-Uc)/Kv,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),a=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!a)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function _xe(t,e){e!==void 0&&Og(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function p4(t,e,n=!1,r={}){if(t<=bl)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=_xe(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const o=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:jL(s),ZERO:bl,ONE:Uc,create:c=>dl(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return bl<=c&&c<t},is0:c=>c===bl,isOdd:c=>(c&Uc)===Uc,neg:c=>dl(-c,t),eql:(c,l)=>c===l,sqr:c=>dl(c*c,t),add:(c,l)=>dl(c+l,t),sub:(c,l)=>dl(c-l,t),mul:(c,l)=>dl(c*l,t),pow:(c,l)=>NZe(o,c,l),div:(c,l)=>dl(c*QG(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>QG(c,t),sqrt:r.sqrt||(c=>(a||(a=IZe(t)),a(o,c))),toBytes:c=>n?rxe(c,i):D7(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?nxe(c):Ux(c)},invertBatch:c=>Rxe(o,c),cmov:(c,l,u)=>u?l:c});return Object.freeze(o)}function Bxe(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Mxe(t){const e=Bxe(t);return e+Math.ceil(e/2)}function kZe(t,e,n=!1){const r=t.length,s=Bxe(e),i=Mxe(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const a=n?nxe(t):Ux(t),o=dl(a,e-Uc)+Uc;return n?rxe(o,s):D7(o,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oce=BigInt(0),ZG=BigInt(1);function uj(t,e){const n=e.negate();return t?n:e}function Dxe(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function fj(t,e){Dxe(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=jL(t),a=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:a}}function cce(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:a}=n;let o=Number(t&s),c=t>>a;o>r&&(o-=i,c+=ZG);const l=e*r,u=l+Math.abs(o)-1,f=o===0,d=o<0,p=e%2!==0;return{nextN:c,offset:u,isZero:f,isNeg:d,isNegF:p,offsetF:l}}function PZe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function OZe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const dj=new WeakMap,Lxe=new WeakMap;function hj(t){return Lxe.get(t)||1}function RZe(t,e){return{constTimeNegate:uj,hasPrecomputes(n){return hj(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>oce;)r&ZG&&(s=s.add(i)),i=i.double(),r>>=ZG;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=fj(r,e),a=[];let o=n,c=o;for(let l=0;l<s;l++){c=o,a.push(c);for(let u=1;u<i;u++)c=c.add(o),a.push(c);o=c.double()}return a},wNAF(n,r,s){let i=t.ZERO,a=t.BASE;const o=fj(n,e);for(let c=0;c<o.windows;c++){const{nextN:l,offset:u,isZero:f,isNeg:d,isNegF:p,offsetF:g}=cce(s,c,o);s=l,f?a=a.add(uj(p,r[g])):i=i.add(uj(d,r[u]))}return{p:i,f:a}},wNAFUnsafe(n,r,s,i=t.ZERO){const a=fj(n,e);for(let o=0;o<a.windows&&s!==oce;o++){const{nextN:c,offset:l,isZero:u,isNeg:f}=cce(s,o,a);if(s=c,!u){const d=r[l];i=i.add(f?d.negate():d)}}return i},getPrecomputes(n,r,s){let i=dj.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&dj.set(r,s(i))),i},wNAFCached(n,r,s){const i=hj(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const a=hj(n);return a===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(a,this.getPrecomputes(a,n,s),r,i)},setWindowSize(n,r){Dxe(r,e),Lxe.set(n,r),dj.delete(n)}}}function _Ze(t,e,n,r){PZe(n,t),OZe(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const a=t.ZERO,o=yQe(BigInt(s));let c=1;o>12?c=o-3:o>4?c=o-2:o>0&&(c=2);const l=jL(c),u=new Array(Number(l)+1).fill(a),f=Math.floor((e.BITS-1)/c)*c;let d=a;for(let p=f;p>=0;p-=c){u.fill(a);for(let m=0;m<i;m++){const v=r[m],A=Number(v>>BigInt(p)&l);u[A]=u[A].add(n[m])}let g=a;for(let m=u.length-1,v=a;m>0;m--)v=v.add(u[m]),g=g.add(v);if(d=d.add(g),p!==0)for(let m=0;m<c;m++)d=d.double()}return d}function Uxe(t){return TZe(t.Fp),HL(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({..._xe(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function lce(t){t.lowS!==void 0&&zN("lowS",t.lowS),t.prehash!==void 0&&zN("prehash",t.prehash)}function BZe(t){const e=Uxe(t);HL(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}let MZe=class extends Error{constructor(e=""){super(e)}};const Yp={Err:MZe,_tlv:{encode:(t,e)=>{const{Err:n}=Yp;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=zP(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?zP(s.length/2|128):"";return zP(t)+i+s+e},decode(t,e){const{Err:n}=Yp;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let a=0;if(!i)a=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)a=a<<8|u;if(r+=c,a<128)throw new n("tlv.decode(long): not minimal encoding")}const o=e.subarray(r,r+a);if(o.length!==a)throw new n("tlv.decode: wrong value length");return{v:o,l:e.subarray(r+a)}}},_int:{encode(t){const{Err:e}=Yp;if(t<dg)throw new e("integer: negative integers are not allowed");let n=zP(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Yp;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Ux(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Yp,s=uf("signature",t),{v:i,l:a}=r.decode(48,s);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:o,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Yp,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}};function pj(t,e){return JN(D7(t,e))}const dg=BigInt(0),Da=BigInt(1);BigInt(2);const gj=BigInt(3),DZe=BigInt(4);function LZe(t){const e=BZe(t),{Fp:n}=e,r=p4(e.n,e.nBitLength),s=e.toBytes||((I,B,D)=>{const V=B.toAffine();return JB(Uint8Array.from([4]),n.toBytes(V.x),n.toBytes(V.y))}),i=e.fromBytes||(I=>{const B=I.subarray(1),D=n.fromBytes(B.subarray(0,n.BYTES)),V=n.fromBytes(B.subarray(n.BYTES,2*n.BYTES));return{x:D,y:V}});function a(I){const{a:B,b:D}=e,V=n.sqr(I),O=n.mul(V,I);return n.add(n.add(O,n.mul(I,B)),D)}function o(I,B){const D=n.sqr(B),V=a(I);return n.eql(D,V)}if(!o(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,gj),DZe),l=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,l)))throw new Error("bad curve params: a or b");function u(I){return JZ(I,Da,e.n)}function f(I){const{allowedPrivateKeyLengths:B,nByteLength:D,wrapPrivateKey:V,n:O}=e;if(B&&typeof I!="bigint"){if(M7(I)&&(I=JN(I)),typeof I!="string"||!B.includes(I.length))throw new Error("invalid private key");I=I.padStart(D*2,"0")}let U;try{U=typeof I=="bigint"?I:Ux(uf("private key",I,D))}catch{throw new Error("invalid private key, expected hex or "+D+" bytes, got "+typeof I)}return V&&(U=dl(U,O)),P3("private key",U,Da,O),U}function d(I){if(!(I instanceof m))throw new Error("ProjectivePoint expected")}const p=Zoe((I,B)=>{const{px:D,py:V,pz:O}=I;if(n.eql(O,n.ONE))return{x:D,y:V};const U=I.is0();B==null&&(B=U?n.ONE:n.inv(O));const Q=n.mul(D,B),ie=n.mul(V,B),G=n.mul(O,B);if(U)return{x:n.ZERO,y:n.ZERO};if(!n.eql(G,n.ONE))throw new Error("invZ was invalid");return{x:Q,y:ie}}),g=Zoe(I=>{if(I.is0()){if(e.allowInfinityPoint&&!n.is0(I.py))return;throw new Error("bad point: ZERO")}const{x:B,y:D}=I.toAffine();if(!n.isValid(B)||!n.isValid(D))throw new Error("bad point: x or y not FE");if(!o(B,D))throw new Error("bad point: equation left != right");if(!I.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class m{constructor(B,D,V){if(B==null||!n.isValid(B))throw new Error("x required");if(D==null||!n.isValid(D)||n.is0(D))throw new Error("y required");if(V==null||!n.isValid(V))throw new Error("z required");this.px=B,this.py=D,this.pz=V,Object.freeze(this)}static fromAffine(B){const{x:D,y:V}=B||{};if(!B||!n.isValid(D)||!n.isValid(V))throw new Error("invalid affine point");if(B instanceof m)throw new Error("projective point not allowed");const O=U=>n.eql(U,n.ZERO);return O(D)&&O(V)?m.ZERO:new m(D,V,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(B){const D=Rxe(n,B.map(V=>V.pz));return B.map((V,O)=>V.toAffine(D[O])).map(m.fromAffine)}static fromHex(B){const D=m.fromAffine(i(uf("pointHex",B)));return D.assertValidity(),D}static fromPrivateKey(B){return m.BASE.multiply(f(B))}static msm(B,D){return _Ze(m,r,B,D)}_setWindowSize(B){S.setWindowSize(this,B)}assertValidity(){g(this)}hasEvenY(){const{y:B}=this.toAffine();if(n.isOdd)return!n.isOdd(B);throw new Error("Field doesn't support isOdd")}equals(B){d(B);const{px:D,py:V,pz:O}=this,{px:U,py:Q,pz:ie}=B,G=n.eql(n.mul(D,ie),n.mul(U,O)),R=n.eql(n.mul(V,ie),n.mul(Q,O));return G&&R}negate(){return new m(this.px,n.neg(this.py),this.pz)}double(){const{a:B,b:D}=e,V=n.mul(D,gj),{px:O,py:U,pz:Q}=this;let ie=n.ZERO,G=n.ZERO,R=n.ZERO,k=n.mul(O,O),b=n.mul(U,U),w=n.mul(Q,Q),N=n.mul(O,U);return N=n.add(N,N),R=n.mul(O,Q),R=n.add(R,R),ie=n.mul(B,R),G=n.mul(V,w),G=n.add(ie,G),ie=n.sub(b,G),G=n.add(b,G),G=n.mul(ie,G),ie=n.mul(N,ie),R=n.mul(V,R),w=n.mul(B,w),N=n.sub(k,w),N=n.mul(B,N),N=n.add(N,R),R=n.add(k,k),k=n.add(R,k),k=n.add(k,w),k=n.mul(k,N),G=n.add(G,k),w=n.mul(U,Q),w=n.add(w,w),k=n.mul(w,N),ie=n.sub(ie,k),R=n.mul(w,b),R=n.add(R,R),R=n.add(R,R),new m(ie,G,R)}add(B){d(B);const{px:D,py:V,pz:O}=this,{px:U,py:Q,pz:ie}=B;let G=n.ZERO,R=n.ZERO,k=n.ZERO;const b=e.a,w=n.mul(e.b,gj);let N=n.mul(D,U),L=n.mul(V,Q),C=n.mul(O,ie),T=n.add(D,V),E=n.add(U,Q);T=n.mul(T,E),E=n.add(N,L),T=n.sub(T,E),E=n.add(D,O);let P=n.add(U,ie);return E=n.mul(E,P),P=n.add(N,C),E=n.sub(E,P),P=n.add(V,O),G=n.add(Q,ie),P=n.mul(P,G),G=n.add(L,C),P=n.sub(P,G),k=n.mul(b,E),G=n.mul(w,C),k=n.add(G,k),G=n.sub(L,k),k=n.add(L,k),R=n.mul(G,k),L=n.add(N,N),L=n.add(L,N),C=n.mul(b,C),E=n.mul(w,E),L=n.add(L,C),C=n.sub(N,C),C=n.mul(b,C),E=n.add(E,C),N=n.mul(L,E),R=n.add(R,N),N=n.mul(P,E),G=n.mul(T,G),G=n.sub(G,N),N=n.mul(T,L),k=n.mul(P,k),k=n.add(k,N),new m(G,R,k)}subtract(B){return this.add(B.negate())}is0(){return this.equals(m.ZERO)}wNAF(B){return S.wNAFCached(this,B,m.normalizeZ)}multiplyUnsafe(B){const{endo:D,n:V}=e;P3("scalar",B,dg,V);const O=m.ZERO;if(B===dg)return O;if(this.is0()||B===Da)return this;if(!D||S.hasPrecomputes(this))return S.wNAFCachedUnsafe(this,B,m.normalizeZ);let{k1neg:U,k1:Q,k2neg:ie,k2:G}=D.splitScalar(B),R=O,k=O,b=this;for(;Q>dg||G>dg;)Q&Da&&(R=R.add(b)),G&Da&&(k=k.add(b)),b=b.double(),Q>>=Da,G>>=Da;return U&&(R=R.negate()),ie&&(k=k.negate()),k=new m(n.mul(k.px,D.beta),k.py,k.pz),R.add(k)}multiply(B){const{endo:D,n:V}=e;P3("scalar",B,Da,V);let O,U;if(D){const{k1neg:Q,k1:ie,k2neg:G,k2:R}=D.splitScalar(B);let{p:k,f:b}=this.wNAF(ie),{p:w,f:N}=this.wNAF(R);k=S.constTimeNegate(Q,k),w=S.constTimeNegate(G,w),w=new m(n.mul(w.px,D.beta),w.py,w.pz),O=k.add(w),U=b.add(N)}else{const{p:Q,f:ie}=this.wNAF(B);O=Q,U=ie}return m.normalizeZ([O,U])[0]}multiplyAndAddUnsafe(B,D,V){const O=m.BASE,U=(ie,G)=>G===dg||G===Da||!ie.equals(O)?ie.multiplyUnsafe(G):ie.multiply(G),Q=U(this,D).add(U(B,V));return Q.is0()?void 0:Q}toAffine(B){return p(this,B)}isTorsionFree(){const{h:B,isTorsionFree:D}=e;if(B===Da)return!0;if(D)return D(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:B,clearCofactor:D}=e;return B===Da?this:D?D(m,this):this.multiplyUnsafe(e.h)}toRawBytes(B=!0){return zN("isCompressed",B),this.assertValidity(),s(m,this,B)}toHex(B=!0){return zN("isCompressed",B),JN(this.toRawBytes(B))}}m.BASE=new m(e.Gx,e.Gy,n.ONE),m.ZERO=new m(n.ZERO,n.ONE,n.ZERO);const{endo:v,nBitLength:A}=e,S=RZe(m,v?Math.ceil(A/2):A);return{CURVE:e,ProjectivePoint:m,normPrivateKeyToScalar:f,weierstrassEquation:a,isWithinCurveOrder:u}}function UZe(t){const e=Uxe(t);return HL(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function FZe(t){const e=UZe(t),{Fp:n,n:r,nByteLength:s,nBitLength:i}=e,a=n.BYTES+1,o=2*n.BYTES+1;function c(w){return dl(w,r)}function l(w){return QG(w,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:d,isWithinCurveOrder:p}=LZe({...e,toBytes(w,N,L){const C=N.toAffine(),T=n.toBytes(C.x),E=JB;return zN("isCompressed",L),L?E(Uint8Array.from([N.hasEvenY()?2:3]),T):E(Uint8Array.from([4]),T,n.toBytes(C.y))},fromBytes(w){const N=w.length,L=w[0],C=w.subarray(1);if(N===a&&(L===2||L===3)){const T=Ux(C);if(!JZ(T,Da,n.ORDER))throw new Error("Point is not on curve");const E=d(T);let P;try{P=n.sqrt(E)}catch(ne){const $=ne instanceof Error?": "+ne.message:"";throw new Error("Point is not on curve"+$)}const _=(P&Da)===Da;return(L&1)===1!==_&&(P=n.neg(P)),{x:T,y:P}}else if(N===o&&L===4){const T=n.fromBytes(C.subarray(0,n.BYTES)),E=n.fromBytes(C.subarray(n.BYTES,2*n.BYTES));return{x:T,y:E}}else{const T=a,E=o;throw new Error("invalid Point, expected length of "+T+", or uncompressed "+E+", got "+N)}}});function g(w){const N=r>>Da;return w>N}function m(w){return g(w)?c(-w):w}const v=(w,N,L)=>Ux(w.slice(N,L));class A{constructor(N,L,C){P3("r",N,Da,r),P3("s",L,Da,r),this.r=N,this.s=L,C!=null&&(this.recovery=C),Object.freeze(this)}static fromCompact(N){const L=s;return N=uf("compactSignature",N,L*2),new A(v(N,0,L),v(N,L,2*L))}static fromDER(N){const{r:L,s:C}=Yp.toSig(uf("DER",N));return new A(L,C)}assertValidity(){}addRecoveryBit(N){return new A(this.r,this.s,N)}recoverPublicKey(N){const{r:L,s:C,recovery:T}=this,E=O(uf("msgHash",N));if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");const P=T===2||T===3?L+e.n:L;if(P>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const _=T&1?"03":"02",H=u.fromHex(_+pj(P,n.BYTES)),ne=l(P),$=c(-E*ne),te=c(C*ne),J=u.BASE.multiplyAndAddUnsafe(H,$,te);if(!J)throw new Error("point at infinify");return J.assertValidity(),J}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return zB(this.toDERHex())}toDERHex(){return Yp.hexFromSig(this)}toCompactRawBytes(){return zB(this.toCompactHex())}toCompactHex(){const N=s;return pj(this.r,N)+pj(this.s,N)}}const S={isValidPrivateKey(w){try{return f(w),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const w=Mxe(e.n);return kZe(e.randomBytes(w),e.n)},precompute(w=8,N=u.BASE){return N._setWindowSize(w),N.multiply(BigInt(3)),N}};function I(w,N=!0){return u.fromPrivateKey(w).toRawBytes(N)}function B(w){if(typeof w=="bigint")return!1;if(w instanceof u)return!0;const L=uf("key",w).length,C=n.BYTES,T=C+1,E=2*C+1;if(!(e.allowedPrivateKeyLengths||s===T))return L===T||L===E}function D(w,N,L=!0){if(B(w)===!0)throw new Error("first arg must be private key");if(B(N)===!1)throw new Error("second arg must be public key");return u.fromHex(N).multiply(f(w)).toRawBytes(L)}const V=e.bits2int||function(w){if(w.length>8192)throw new Error("input is too large");const N=Ux(w),L=w.length*8-i;return L>0?N>>BigInt(L):N},O=e.bits2int_modN||function(w){return c(V(w))},U=jL(i);function Q(w){return P3("num < 2^"+i,w,dg,U),D7(w,s)}function ie(w,N,L=G){if(["recovered","canonical"].some(X=>X in L))throw new Error("sign() legacy options not supported");const{hash:C,randomBytes:T}=e;let{lowS:E,prehash:P,extraEntropy:_}=L;E==null&&(E=!0),w=uf("msgHash",w),lce(L),P&&(w=uf("prehashed msgHash",C(w)));const H=O(w),ne=f(N),$=[Q(ne),Q(H)];if(_!=null&&_!==!1){const X=_===!0?T(n.BYTES):_;$.push(uf("extraEntropy",X))}const te=JB(...$),J=H;function ee(X){const j=V(X);if(!p(j))return;const se=l(j),ye=u.BASE.multiply(j).toAffine(),Ce=c(ye.x);if(Ce===dg)return;const xe=c(se*c(J+Ce*ne));if(xe===dg)return;let De=(ye.x===Ce?0:2)|Number(ye.y&Da),qe=xe;return E&&g(xe)&&(qe=m(xe),De^=1),new A(Ce,qe,De)}return{seed:te,k2sig:ee}}const G={lowS:e.lowS,prehash:!1},R={lowS:e.lowS,prehash:!1};function k(w,N,L=G){const{seed:C,k2sig:T}=ie(w,N,L),E=e;return wQe(E.hash.outputLen,E.nByteLength,E.hmac)(C,T)}u.BASE._setWindowSize(8);function b(w,N,L,C=R){var De;const T=w;N=uf("msgHash",N),L=uf("publicKey",L);const{lowS:E,prehash:P,format:_}=C;if(lce(C),"strict"in C)throw new Error("options.strict was renamed to lowS");if(_!==void 0&&_!=="compact"&&_!=="der")throw new Error("format must be compact or der");const H=typeof T=="string"||M7(T),ne=!H&&!_&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!H&&!ne)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let $,te;try{if(ne&&($=new A(T.r,T.s)),H){try{_!=="compact"&&($=A.fromDER(T))}catch(qe){if(!(qe instanceof Yp.Err))throw qe}!$&&_!=="der"&&($=A.fromCompact(T))}te=u.fromHex(L)}catch{return!1}if(!$||E&&$.hasHighS())return!1;P&&(N=e.hash(N));const{r:J,s:ee}=$,X=O(N),j=l(ee),se=c(X*j),ye=c(J*j),Ce=(De=u.BASE.multiplyAndAddUnsafe(te,se,ye))==null?void 0:De.toAffine();return Ce?c(Ce.x)===J:!1}return{CURVE:e,getPublicKey:I,getSharedSecret:D,sign:k,verify:b,ProjectivePoint:u,Signature:A,utils:S}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function VZe(t){return{hash:t,hmac:(e,...n)=>u5(t,e,fu(...n)),randomBytes:KZ}}function GL(t,e){const n=r=>FZe({...t,...VZe(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fxe=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),uce=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),$Ze=BigInt(0),jZe=BigInt(1),XG=BigInt(2),fce=(t,e)=>(t+e/XG)/e;function HZe(t){const e=Fxe,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,f=Wu(u,n,e)*u%e,d=Wu(f,n,e)*u%e,p=Wu(d,XG,e)*l%e,g=Wu(p,s,e)*p%e,m=Wu(g,i,e)*g%e,v=Wu(m,o,e)*m%e,A=Wu(v,c,e)*v%e,S=Wu(A,o,e)*m%e,I=Wu(S,n,e)*u%e,B=Wu(I,a,e)*g%e,D=Wu(B,r,e)*l%e,V=Wu(D,XG,e);if(!eW.eql(eW.sqr(V),t))throw new Error("Cannot find square root");return V}const eW=p4(Fxe,void 0,void 0,{sqrt:HZe}),g4=GL({a:$Ze,b:BigInt(7),Fp:eW,n:uce,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=uce,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-jZe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),o=fce(i*t,e),c=fce(-r*t,e);let l=dl(t-o*n-c*s,e),u=dl(-o*r-c*i,e);const f=l>a,d=u>a;if(f&&(l=e-l),d&&(u=e-u),l>a||u>a)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:l,k2neg:d,k2:u}}}},u4);function Vxe(t,e={}){const{recovered:n}=e;if(typeof t.r>"u")throw new mj({signature:t});if(typeof t.s>"u")throw new mj({signature:t});if(n&&typeof t.yParity>"u")throw new mj({signature:t});if(t.r<0n||t.r>rce)throw new JZe({value:t.r});if(t.s<0n||t.s>rce)throw new YZe({value:t.s});if(typeof t.yParity=="number"&&t.yParity!==0&&t.yParity!==1)throw new zL({value:t.yParity})}function qZe(t){return WL(Un(t))}function WL(t){if(t.length!==130&&t.length!==132)throw new zZe({signature:t});const e=BigInt(au(t,0,32)),n=BigInt(au(t,32,64)),r=(()=>{const s=+`0x${t.slice(130)}`;if(!Number.isNaN(s))try{return iX(s)}catch{throw new zL({value:s})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function jE(t){const e=typeof t=="string"?WL(t):t instanceof Uint8Array?qZe(t):typeof t.r=="string"?GZe(t):t.v?KZe(t):{r:t.r,s:t.s,...typeof t.yParity<"u"?{yParity:t.yParity}:{}};return Vxe(e),e}function KZe(t){return{r:t.r,s:t.s,yParity:iX(t.v)}}function GZe(t){const e=(()=>{const n=t.v?Number(t.v):void 0;let r=t.yParity?Number(t.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=iX(n)),typeof r!="number")throw new zL({value:t.yParity});return r})();return{r:BigInt(t.r),s:BigInt(t.s),yParity:e}}function tW(t){Vxe(t);const e=t.r,n=t.s;return Us(Gn(e,{size:32}),Gn(n,{size:32}),typeof t.yParity=="number"?Gn(WZe(t.yParity),{size:1}):"0x")}function iX(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new QZe({value:t})}function WZe(t){if(t===0)return 27;if(t===1)return 28;throw new zL({value:t})}class zZe extends mn{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${ui(Su(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class mj extends mn{constructor({signature:e}){super(`Signature \`${d4(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class JZe extends mn{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class YZe extends mn{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class zL extends mn{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class QZe extends mn{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}const ZZe=new TextEncoder,XZe=new TextDecoder,YP=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((t,e)=>[e,t.charCodeAt(0)])),QP={...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((t,e)=>[t.charCodeAt(0),e])),61:0,45:62,95:63};function eXe(t,e={}){const{pad:n=!0,url:r=!1}=e,s=new Uint8Array(Math.ceil(t.length/3)*4);for(let c=0,l=0;l<t.length;c+=4,l+=3){const u=(t[l]<<16)+(t[l+1]<<8)+(t[l+2]|0);s[c]=YP[u>>18],s[c+1]=YP[u>>12&63],s[c+2]=YP[u>>6&63],s[c+3]=YP[u&63]}const i=t.length%3,a=Math.floor(t.length/3)*4+(i&&i+1);let o=XZe.decode(new Uint8Array(s.buffer,0,a));return n&&i===1&&(o+="=="),n&&i===2&&(o+="="),r&&(o=o.replaceAll("+","-").replaceAll("/","_")),o}function tXe(t,e={}){return eXe(Lt(t),e)}function XB(t){const e=t.replace(/=+$/,""),n=e.length,r=new Uint8Array(n+3);ZZe.encodeInto(e+"===",r);for(let i=0,a=0;i<e.length;i+=4,a+=3){const o=(QP[r[i]]<<18)+(QP[r[i+1]]<<12)+(QP[r[i+2]]<<6)+QP[r[i+3]];r[a]=o>>16,r[a+1]=o>>8&255,r[a+2]=o&255}const s=(n>>2)*3+(n%4&&n%4-1);return new Uint8Array(r.buffer,0,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const aX=BigInt(0),nW=BigInt(1);function eM(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function Gv(t,e,n=""){const r=VL(t),s=t==null?void 0:t.length,i=e!==void 0;if(!r||i&&s!==e){const a=n&&`"${n}" `,o=i?` of length ${e}`:"",c=r?`length=${s}`:`type=${typeof t}`;throw new Error(a+"expected Uint8Array"+o+", got "+c)}return t}function ZP(t){const e=t.toString(16);return e.length&1?"0"+e:e}function $xe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?aX:BigInt("0x"+t)}function JL(t){return $xe(Lx(t))}function jxe(t){return rc(t),$xe(Lx(Uint8Array.from(t).reverse()))}function oX(t,e){return WN(t.toString(16).padStart(e*2,"0"))}function Hxe(t,e){return oX(t,e).reverse()}function ll(t,e,n){let r;if(typeof e=="string")try{r=WN(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(VL(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");return r.length,r}const yj=t=>typeof t=="bigint"&&aX<=t;function nXe(t,e,n){return yj(t)&&yj(e)&&yj(n)&&e<=t&&t<n}function rXe(t,e,n,r){if(!nXe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function qxe(t){let e;for(e=0;t>aX;t>>=nW,e+=1);return e}const L7=t=>(nW<<BigInt(t))-nW;function sXe(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=p=>new Uint8Array(p),s=p=>Uint8Array.of(p);let i=r(t),a=r(t),o=0;const c=()=>{i.fill(1),a.fill(0),o=0},l=(...p)=>n(a,i,...p),u=(p=r(0))=>{a=l(s(0),p),i=l(),p.length!==0&&(a=l(s(1),p),i=l())},f=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const g=[];for(;p<e;){i=l();const m=i.slice();g.push(m),p+=i.length}return fu(...g)};return(p,g)=>{c(),u(p);let m;for(;!(m=g(f()));)u();return c(),m}}function cX(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,a){const o=t[s];if(a&&o===void 0)return;const c=typeof o;if(c!==i||o===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function dce(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vl=BigInt(0),Fc=BigInt(1),Wv=BigInt(2),Kxe=BigInt(3),Gxe=BigInt(4),Wxe=BigInt(5),iXe=BigInt(7),zxe=BigInt(8),aXe=BigInt(9),Jxe=BigInt(16);function yf(t,e){const n=t%e;return n>=vl?n:e+n}function zu(t,e,n){let r=t;for(;e-- >vl;)r*=r,r%=n;return r}function hce(t,e){if(t===vl)throw new Error("invert: expected non-zero number");if(e<=vl)throw new Error("invert: expected positive modulus, got "+e);let n=yf(t,e),r=e,s=vl,i=Fc;for(;n!==vl;){const o=r/n,c=r%n,l=s-i*o;r=n,n=c,s=i,i=l}if(r!==Fc)throw new Error("invert: does not exist");return yf(s,e)}function lX(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function Yxe(t,e){const n=(t.ORDER+Fc)/Gxe,r=t.pow(e,n);return lX(t,r,e),r}function oXe(t,e){const n=(t.ORDER-Wxe)/zxe,r=t.mul(e,Wv),s=t.pow(r,n),i=t.mul(e,s),a=t.mul(t.mul(i,Wv),s),o=t.mul(i,t.sub(a,t.ONE));return lX(t,o,e),o}function cXe(t){const e=U7(t),n=Qxe(t),r=n(e,e.neg(e.ONE)),s=n(e,r),i=n(e,e.neg(r)),a=(t+iXe)/Jxe;return(o,c)=>{let l=o.pow(c,a),u=o.mul(l,r);const f=o.mul(l,s),d=o.mul(l,i),p=o.eql(o.sqr(u),c),g=o.eql(o.sqr(f),c);l=o.cmov(l,u,p),u=o.cmov(d,f,g);const m=o.eql(o.sqr(u),c),v=o.cmov(l,u,m);return lX(o,v,c),v}}function Qxe(t){if(t<Kxe)throw new Error("sqrt is not defined for small field");let e=t-Fc,n=0;for(;e%Wv===vl;)e/=Wv,n++;let r=Wv;const s=U7(t);for(;pce(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Yxe;let i=s.pow(r,e);const a=(e+Fc)/Wv;return function(c,l){if(c.is0(l))return l;if(pce(c,l)!==1)throw new Error("Cannot find square root");let u=n,f=c.mul(c.ONE,i),d=c.pow(l,e),p=c.pow(l,a);for(;!c.eql(d,c.ONE);){if(c.is0(d))return c.ZERO;let g=1,m=c.sqr(d);for(;!c.eql(m,c.ONE);)if(g++,m=c.sqr(m),g===u)throw new Error("Cannot find square root");const v=Fc<<BigInt(u-g-1),A=c.pow(f,v);u=g,f=c.sqr(A),d=c.mul(d,f),p=c.mul(p,A)}return p}}function lXe(t){return t%Gxe===Kxe?Yxe:t%zxe===Wxe?oXe:t%Jxe===aXe?cXe(t):Qxe(t)}const uXe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fXe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=uXe.reduce((r,s)=>(r[s]="function",r),e);return cX(t,n),t}function dXe(t,e,n){if(n<vl)throw new Error("invalid exponent, negatives unsupported");if(n===vl)return t.ONE;if(n===Fc)return e;let r=t.ONE,s=e;for(;n>vl;)n&Fc&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Fc;return r}function Zxe(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((a,o,c)=>t.is0(o)?a:(r[c]=a,t.mul(a,o)),t.ONE),i=t.inv(s);return e.reduceRight((a,o,c)=>t.is0(o)?a:(r[c]=t.mul(a,r[c]),t.mul(a,o)),i),r}function pce(t,e){const n=(t.ORDER-Fc)/Wv,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),a=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!a)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Xxe(t,e){e!==void 0&&Og(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function U7(t,e,n=!1,r={}){if(t<=vl)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,a=!1,o;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const d=e;d.BITS&&(s=d.BITS),d.sqrt&&(i=d.sqrt),typeof d.isLE=="boolean"&&(n=d.isLE),typeof d.modFromBytes=="boolean"&&(a=d.modFromBytes),o=d.allowedLengths}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:l}=Xxe(t,s);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const f=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:l,MASK:L7(c),ZERO:vl,ONE:Fc,allowedLengths:o,create:d=>yf(d,t),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return vl<=d&&d<t},is0:d=>d===vl,isValidNot0:d=>!f.is0(d)&&f.isValid(d),isOdd:d=>(d&Fc)===Fc,neg:d=>yf(-d,t),eql:(d,p)=>d===p,sqr:d=>yf(d*d,t),add:(d,p)=>yf(d+p,t),sub:(d,p)=>yf(d-p,t),mul:(d,p)=>yf(d*p,t),pow:(d,p)=>dXe(f,d,p),div:(d,p)=>yf(d*hce(p,t),t),sqrN:d=>d*d,addN:(d,p)=>d+p,subN:(d,p)=>d-p,mulN:(d,p)=>d*p,inv:d=>hce(d,t),sqrt:i||(d=>(u||(u=lXe(t)),u(f,d))),toBytes:d=>n?Hxe(d,l):oX(d,l),fromBytes:(d,p=!0)=>{if(o){if(!o.includes(d.length)||d.length>l)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+d.length);const m=new Uint8Array(l);m.set(d,n?0:m.length-d.length),d=m}if(d.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+d.length);let g=n?jxe(d):JL(d);if(a&&(g=yf(g,t)),!p&&!f.isValid(g))throw new Error("invalid field element: outside of range 0..ORDER");return g},invertBatch:d=>Zxe(f,d),cmov:(d,p,g)=>g?p:d});return Object.freeze(f)}function e2e(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function t2e(t){const e=e2e(t);return e+Math.ceil(e/2)}function hXe(t,e,n=!1){const r=t.length,s=e2e(e),i=t2e(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const a=n?jxe(t):JL(t),o=yf(a,e-Fc)+Fc;return n?Hxe(o,s):oX(o,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const f5=BigInt(0),zv=BigInt(1);function tM(t,e){const n=e.negate();return t?n:e}function wj(t,e){const n=Zxe(t.Fp,e.map(r=>r.Z));return e.map((r,s)=>t.fromAffine(r.toAffine(n[s])))}function n2e(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function bj(t,e){n2e(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=L7(t),a=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:a}}function gce(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:a}=n;let o=Number(t&s),c=t>>a;o>r&&(o-=i,c+=zv);const l=e*r,u=l+Math.abs(o)-1,f=o===0,d=o<0,p=e%2!==0;return{nextN:c,offset:u,isZero:f,isNeg:d,isNegF:p,offsetF:l}}function pXe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function gXe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const vj=new WeakMap,r2e=new WeakMap;function xj(t){return r2e.get(t)||1}function mce(t){if(t!==f5)throw new Error("invalid wNAF")}let mXe=class{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let s=e;for(;n>f5;)n&zv&&(r=r.add(s)),s=s.double(),n>>=zv;return r}precomputeWindow(e,n){const{windows:r,windowSize:s}=bj(n,this.bits),i=[];let a=e,o=a;for(let c=0;c<r;c++){o=a,i.push(o);for(let l=1;l<s;l++)o=o.add(a),i.push(o);a=o.double()}return i}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const a=bj(e,this.bits);for(let o=0;o<a.windows;o++){const{nextN:c,offset:l,isZero:u,isNeg:f,isNegF:d,offsetF:p}=gce(r,o,a);r=c,u?i=i.add(tM(d,n[p])):s=s.add(tM(f,n[l]))}return mce(r),{p:s,f:i}}wNAFUnsafe(e,n,r,s=this.ZERO){const i=bj(e,this.bits);for(let a=0;a<i.windows&&r!==f5;a++){const{nextN:o,offset:c,isZero:l,isNeg:u}=gce(r,a,i);if(r=o,!l){const f=n[c];s=s.add(u?f.negate():f)}}return mce(r),s}getPrecomputes(e,n,r){let s=vj.get(n);return s||(s=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(s=r(s)),vj.set(n,s))),s}cached(e,n,r){const s=xj(e);return this.wNAF(s,this.getPrecomputes(s,e,r),n)}unsafe(e,n,r,s){const i=xj(e);return i===1?this._unsafeLadder(e,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),n,s)}createCache(e,n){n2e(n,this.bits),r2e.set(e,n),vj.delete(e)}hasCache(e){return xj(e)!==1}};function yXe(t,e,n,r){let s=e,i=t.ZERO,a=t.ZERO;for(;n>f5||r>f5;)n&zv&&(i=i.add(s)),r&zv&&(a=a.add(s)),s=s.double(),n>>=zv,r>>=zv;return{p1:i,p2:a}}function wXe(t,e,n,r){pXe(n,t),gXe(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const a=t.ZERO,o=qxe(BigInt(s));let c=1;o>12?c=o-3:o>4?c=o-2:o>0&&(c=2);const l=L7(c),u=new Array(Number(l)+1).fill(a),f=Math.floor((e.BITS-1)/c)*c;let d=a;for(let p=f;p>=0;p-=c){u.fill(a);for(let m=0;m<i;m++){const v=r[m],A=Number(v>>BigInt(p)&l);u[A]=u[A].add(n[m])}let g=a;for(let m=u.length-1,v=a;m>0;m--)v=v.add(u[m]),g=g.add(v);if(d=d.add(g),p!==0)for(let m=0;m<c;m++)d=d.double()}return d}function yce(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return fXe(e),e}else return U7(t,{isLE:n})}function bXe(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const l=e[c];if(!(typeof l=="bigint"&&l>f5))throw new Error(`CURVE.${c} must be positive bigint`)}const s=yce(e.p,n.Fp,r),i=yce(e.n,n.Fn,r),o=["Gx","Gy","a","b"];for(const c of o)if(!s.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wce=(t,e)=>(t+(t>=0?e:-e)/s2e)/e;function vXe(t,e,n){const[[r,s],[i,a]]=e,o=wce(a*t,n),c=wce(-s*t,n);let l=t-o*r-c*i,u=-o*s-c*a;const f=l<wg,d=u<wg;f&&(l=-l),d&&(u=-u);const p=L7(Math.ceil(qxe(n)/2))+R3;if(l<wg||l>=p||u<wg||u>=p)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:f,k1:l,k2neg:d,k2:u}}function rW(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function Ej(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return eM(n.lowS,"lowS"),eM(n.prehash,"prehash"),n.format!==void 0&&rW(n.format),n}class xXe extends Error{constructor(e=""){super(e)}}const Qp={Err:xXe,_tlv:{encode:(t,e)=>{const{Err:n}=Qp;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=ZP(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?ZP(s.length/2|128):"";return ZP(t)+i+s+e},decode(t,e){const{Err:n}=Qp;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let a=0;if(!i)a=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)a=a<<8|u;if(r+=c,a<128)throw new n("tlv.decode(long): not minimal encoding")}const o=e.subarray(r,r+a);if(o.length!==a)throw new n("tlv.decode: wrong value length");return{v:o,l:e.subarray(r+a)}}},_int:{encode(t){const{Err:e}=Qp;if(t<wg)throw new e("integer: negative integers are not allowed");let n=ZP(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Qp;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return JL(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Qp,s=ll("signature",t),{v:i,l:a}=r.decode(48,s);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:o,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Qp,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},wg=BigInt(0),R3=BigInt(1),s2e=BigInt(2),XP=BigInt(3),EXe=BigInt(4);function n3(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let s=ll("private key",e);try{r=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function AXe(t,e={}){const n=bXe("weierstrass",t,e),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:a,n:o}=i;cX(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!r.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=a2e(r,s);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function f(R,k,b){const{x:w,y:N}=k.toAffine(),L=r.toBytes(w);if(eM(b,"isCompressed"),b){u();const C=!r.isOdd(N);return fu(i2e(C),L)}else return fu(Uint8Array.of(4),L,r.toBytes(N))}function d(R){Gv(R,void 0,"Point");const{publicKey:k,publicKeyUncompressed:b}=l,w=R.length,N=R[0],L=R.subarray(1);if(w===k&&(N===2||N===3)){const C=r.fromBytes(L);if(!r.isValid(C))throw new Error("bad point: is not on curve, wrong x");const T=m(C);let E;try{E=r.sqrt(T)}catch(H){const ne=H instanceof Error?": "+H.message:"";throw new Error("bad point: is not on curve, sqrt error"+ne)}u();const P=r.isOdd(E);return(N&1)===1!==P&&(E=r.neg(E)),{x:C,y:E}}else if(w===b&&N===4){const C=r.BYTES,T=r.fromBytes(L.subarray(0,C)),E=r.fromBytes(L.subarray(C,C*2));if(!v(T,E))throw new Error("bad point: is not on curve");return{x:T,y:E}}else throw new Error(`bad point: got length ${w}, expected compressed=${k} or uncompressed=${b}`)}const p=e.toBytes||f,g=e.fromBytes||d;function m(R){const k=r.sqr(R),b=r.mul(k,R);return r.add(r.add(b,r.mul(R,i.a)),i.b)}function v(R,k){const b=r.sqr(k),w=m(R);return r.eql(b,w)}if(!v(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const A=r.mul(r.pow(i.a,XP),EXe),S=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(A,S)))throw new Error("bad curve params: a or b");function I(R,k,b=!1){if(!r.isValid(k)||b&&r.is0(k))throw new Error(`bad point coordinate ${R}`);return k}function B(R){if(!(R instanceof Q))throw new Error("ProjectivePoint expected")}function D(R){if(!c||!c.basises)throw new Error("no endo");return vXe(R,c.basises,s.ORDER)}const V=dce((R,k)=>{const{X:b,Y:w,Z:N}=R;if(r.eql(N,r.ONE))return{x:b,y:w};const L=R.is0();k==null&&(k=L?r.ONE:r.inv(N));const C=r.mul(b,k),T=r.mul(w,k),E=r.mul(N,k);if(L)return{x:r.ZERO,y:r.ZERO};if(!r.eql(E,r.ONE))throw new Error("invZ was invalid");return{x:C,y:T}}),O=dce(R=>{if(R.is0()){if(e.allowInfinityPoint&&!r.is0(R.Y))return;throw new Error("bad point: ZERO")}const{x:k,y:b}=R.toAffine();if(!r.isValid(k)||!r.isValid(b))throw new Error("bad point: x or y not field elements");if(!v(k,b))throw new Error("bad point: equation left != right");if(!R.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function U(R,k,b,w,N){return b=new Q(r.mul(b.X,R),b.Y,b.Z),k=tM(w,k),b=tM(N,b),k.add(b)}class Q{constructor(k,b,w){this.X=I("x",k),this.Y=I("y",b,!0),this.Z=I("z",w),Object.freeze(this)}static CURVE(){return i}static fromAffine(k){const{x:b,y:w}=k||{};if(!k||!r.isValid(b)||!r.isValid(w))throw new Error("invalid affine point");if(k instanceof Q)throw new Error("projective point not allowed");return r.is0(b)&&r.is0(w)?Q.ZERO:new Q(b,w,r.ONE)}static fromBytes(k){const b=Q.fromAffine(g(Gv(k,void 0,"point")));return b.assertValidity(),b}static fromHex(k){return Q.fromBytes(ll("pointHex",k))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(k=8,b=!0){return G.createCache(this,k),b||this.multiply(XP),this}assertValidity(){O(this)}hasEvenY(){const{y:k}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(k)}equals(k){B(k);const{X:b,Y:w,Z:N}=this,{X:L,Y:C,Z:T}=k,E=r.eql(r.mul(b,T),r.mul(L,N)),P=r.eql(r.mul(w,T),r.mul(C,N));return E&&P}negate(){return new Q(this.X,r.neg(this.Y),this.Z)}double(){const{a:k,b}=i,w=r.mul(b,XP),{X:N,Y:L,Z:C}=this;let T=r.ZERO,E=r.ZERO,P=r.ZERO,_=r.mul(N,N),H=r.mul(L,L),ne=r.mul(C,C),$=r.mul(N,L);return $=r.add($,$),P=r.mul(N,C),P=r.add(P,P),T=r.mul(k,P),E=r.mul(w,ne),E=r.add(T,E),T=r.sub(H,E),E=r.add(H,E),E=r.mul(T,E),T=r.mul($,T),P=r.mul(w,P),ne=r.mul(k,ne),$=r.sub(_,ne),$=r.mul(k,$),$=r.add($,P),P=r.add(_,_),_=r.add(P,_),_=r.add(_,ne),_=r.mul(_,$),E=r.add(E,_),ne=r.mul(L,C),ne=r.add(ne,ne),_=r.mul(ne,$),T=r.sub(T,_),P=r.mul(ne,H),P=r.add(P,P),P=r.add(P,P),new Q(T,E,P)}add(k){B(k);const{X:b,Y:w,Z:N}=this,{X:L,Y:C,Z:T}=k;let E=r.ZERO,P=r.ZERO,_=r.ZERO;const H=i.a,ne=r.mul(i.b,XP);let $=r.mul(b,L),te=r.mul(w,C),J=r.mul(N,T),ee=r.add(b,w),X=r.add(L,C);ee=r.mul(ee,X),X=r.add($,te),ee=r.sub(ee,X),X=r.add(b,N);let j=r.add(L,T);return X=r.mul(X,j),j=r.add($,J),X=r.sub(X,j),j=r.add(w,N),E=r.add(C,T),j=r.mul(j,E),E=r.add(te,J),j=r.sub(j,E),_=r.mul(H,X),E=r.mul(ne,J),_=r.add(E,_),E=r.sub(te,_),_=r.add(te,_),P=r.mul(E,_),te=r.add($,$),te=r.add(te,$),J=r.mul(H,J),X=r.mul(ne,X),te=r.add(te,J),J=r.sub($,J),J=r.mul(H,J),X=r.add(X,J),$=r.mul(te,X),P=r.add(P,$),$=r.mul(j,X),E=r.mul(ee,E),E=r.sub(E,$),$=r.mul(ee,te),_=r.mul(j,_),_=r.add(_,$),new Q(E,P,_)}subtract(k){return this.add(k.negate())}is0(){return this.equals(Q.ZERO)}multiply(k){const{endo:b}=e;if(!s.isValidNot0(k))throw new Error("invalid scalar: out of range");let w,N;const L=C=>G.cached(this,C,T=>wj(Q,T));if(b){const{k1neg:C,k1:T,k2neg:E,k2:P}=D(k),{p:_,f:H}=L(T),{p:ne,f:$}=L(P);N=H.add($),w=U(b.beta,_,ne,C,E)}else{const{p:C,f:T}=L(k);w=C,N=T}return wj(Q,[w,N])[0]}multiplyUnsafe(k){const{endo:b}=e,w=this;if(!s.isValid(k))throw new Error("invalid scalar: out of range");if(k===wg||w.is0())return Q.ZERO;if(k===R3)return w;if(G.hasCache(this))return this.multiply(k);if(b){const{k1neg:N,k1:L,k2neg:C,k2:T}=D(k),{p1:E,p2:P}=yXe(Q,w,L,T);return U(b.beta,E,P,N,C)}else return G.unsafe(w,k)}multiplyAndAddUnsafe(k,b,w){const N=this.multiplyUnsafe(b).add(k.multiplyUnsafe(w));return N.is0()?void 0:N}toAffine(k){return V(this,k)}isTorsionFree(){const{isTorsionFree:k}=e;return a===R3?!0:k?k(Q,this):G.unsafe(this,o).is0()}clearCofactor(){const{clearCofactor:k}=e;return a===R3?this:k?k(Q,this):this.multiplyUnsafe(a)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}toBytes(k=!0){return eM(k,"isCompressed"),this.assertValidity(),p(Q,this,k)}toHex(k=!0){return Lx(this.toBytes(k))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(k=!0){return this.toBytes(k)}_setWindowSize(k){this.precompute(k)}static normalizeZ(k){return wj(Q,k)}static msm(k,b){return wXe(Q,s,k,b)}static fromPrivateKey(k){return Q.BASE.multiply(n3(s,k))}}Q.BASE=new Q(i.Gx,i.Gy,r.ONE),Q.ZERO=new Q(r.ZERO,r.ONE,r.ZERO),Q.Fp=r,Q.Fn=s;const ie=s.BITS,G=new mXe(Q,e.endo?Math.ceil(ie/2):ie);return Q.BASE.precompute(8),Q}function i2e(t){return Uint8Array.of(t?2:3)}function a2e(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function SXe(t,e={}){const{Fn:n}=t,r=e.randomBytes||KZ,s=Object.assign(a2e(t.Fp,n),{seed:t2e(n.ORDER)});function i(p){try{return!!n3(n,p)}catch{return!1}}function a(p,g){const{publicKey:m,publicKeyUncompressed:v}=s;try{const A=p.length;return g===!0&&A!==m||g===!1&&A!==v?!1:!!t.fromBytes(p)}catch{return!1}}function o(p=r(s.seed)){return hXe(Gv(p,s.seed,"seed"),n.ORDER)}function c(p,g=!0){return t.BASE.multiply(n3(n,p)).toBytes(g)}function l(p){const g=o(p);return{secretKey:g,publicKey:c(g)}}function u(p){if(typeof p=="bigint")return!1;if(p instanceof t)return!0;const{secretKey:g,publicKey:m,publicKeyUncompressed:v}=s;if(n.allowedLengths||g===m)return;const A=ll("key",p).length;return A===m||A===v}function f(p,g,m=!0){if(u(p)===!0)throw new Error("first arg must be private key");if(u(g)===!1)throw new Error("second arg must be public key");const v=n3(n,p);return t.fromHex(g).multiply(v).toBytes(m)}return Object.freeze({getPublicKey:c,getSharedSecret:f,keygen:l,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:a,randomSecretKey:o,isValidPrivateKey:i,randomPrivateKey:o,normPrivateKeyToScalar:p=>n3(n,p),precompute(p=8,g=t.BASE){return g.precompute(p,!1)}},lengths:s})}function IXe(t,e,n={}){jZ(e),cX(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||KZ,s=n.hmac||((b,...w)=>u5(e,b,fu(...w))),{Fp:i,Fn:a}=t,{ORDER:o,BITS:c}=a,{keygen:l,getPublicKey:u,getSharedSecret:f,utils:d,lengths:p}=SXe(t,n),g={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},m="compact";function v(b){const w=o>>R3;return b>w}function A(b,w){if(!a.isValidNot0(w))throw new Error(`invalid signature ${b}: out of range 1..Point.Fn.ORDER`);return w}function S(b,w){rW(w);const N=p.signature,L=w==="compact"?N:w==="recovered"?N+1:void 0;return Gv(b,L,`${w} signature`)}class I{constructor(w,N,L){this.r=A("r",w),this.s=A("s",N),L!=null&&(this.recovery=L),Object.freeze(this)}static fromBytes(w,N=m){S(w,N);let L;if(N==="der"){const{r:P,s:_}=Qp.toSig(Gv(w));return new I(P,_)}N==="recovered"&&(L=w[0],N="compact",w=w.subarray(1));const C=a.BYTES,T=w.subarray(0,C),E=w.subarray(C,C*2);return new I(a.fromBytes(T),a.fromBytes(E),L)}static fromHex(w,N){return this.fromBytes(WN(w),N)}addRecoveryBit(w){return new I(this.r,this.s,w)}recoverPublicKey(w){const N=i.ORDER,{r:L,s:C,recovery:T}=this;if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");if(o*s2e<N&&T>1)throw new Error("recovery id is ambiguous for h>1 curve");const P=T===2||T===3?L+o:L;if(!i.isValid(P))throw new Error("recovery id 2 or 3 invalid");const _=i.toBytes(P),H=t.fromBytes(fu(i2e((T&1)===0),_)),ne=a.inv(P),$=D(ll("msgHash",w)),te=a.create(-$*ne),J=a.create(C*ne),ee=t.BASE.multiplyUnsafe(te).add(H.multiplyUnsafe(J));if(ee.is0())throw new Error("point at infinify");return ee.assertValidity(),ee}hasHighS(){return v(this.s)}toBytes(w=m){if(rW(w),w==="der")return WN(Qp.hexFromSig(this));const N=a.toBytes(this.r),L=a.toBytes(this.s);if(w==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return fu(Uint8Array.of(this.recovery),N,L)}return fu(N,L)}toHex(w){return Lx(this.toBytes(w))}assertValidity(){}static fromCompact(w){return I.fromBytes(ll("sig",w),"compact")}static fromDER(w){return I.fromBytes(ll("sig",w),"der")}normalizeS(){return this.hasHighS()?new I(this.r,a.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Lx(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Lx(this.toBytes("compact"))}}const B=n.bits2int||function(w){if(w.length>8192)throw new Error("input is too large");const N=JL(w),L=w.length*8-c;return L>0?N>>BigInt(L):N},D=n.bits2int_modN||function(w){return a.create(B(w))},V=L7(c);function O(b){return rXe("num < 2^"+c,b,wg,V),a.toBytes(b)}function U(b,w){return Gv(b,void 0,"message"),w?Gv(e(b),void 0,"prehashed message"):b}function Q(b,w,N){if(["recovered","canonical"].some(te=>te in N))throw new Error("sign() legacy options not supported");const{lowS:L,prehash:C,extraEntropy:T}=Ej(N,g);b=U(b,C);const E=D(b),P=n3(a,w),_=[O(P),O(E)];if(T!=null&&T!==!1){const te=T===!0?r(p.secretKey):T;_.push(ll("extraEntropy",te))}const H=fu(..._),ne=E;function $(te){const J=B(te);if(!a.isValidNot0(J))return;const ee=a.inv(J),X=t.BASE.multiply(J).toAffine(),j=a.create(X.x);if(j===wg)return;const se=a.create(ee*a.create(ne+j*P));if(se===wg)return;let ye=(X.x===j?0:2)|Number(X.y&R3),Ce=se;return L&&v(se)&&(Ce=a.neg(se),ye^=1),new I(j,Ce,ye)}return{seed:H,k2sig:$}}function ie(b,w,N={}){b=ll("message",b);const{seed:L,k2sig:C}=Q(b,w,N);return sXe(e.outputLen,a.BYTES,s)(L,C)}function G(b){let w;const N=typeof b=="string"||VL(b),L=!N&&b!==null&&typeof b=="object"&&typeof b.r=="bigint"&&typeof b.s=="bigint";if(!N&&!L)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(L)w=new I(b.r,b.s);else if(N){try{w=I.fromBytes(ll("sig",b),"der")}catch(C){if(!(C instanceof Qp.Err))throw C}if(!w)try{w=I.fromBytes(ll("sig",b),"compact")}catch{return!1}}return w||!1}function R(b,w,N,L={}){const{lowS:C,prehash:T,format:E}=Ej(L,g);if(N=ll("publicKey",N),w=U(ll("message",w),T),"strict"in L)throw new Error("options.strict was renamed to lowS");const P=E===void 0?G(b):I.fromBytes(ll("sig",b),E);if(P===!1)return!1;try{const _=t.fromBytes(N);if(C&&P.hasHighS())return!1;const{r:H,s:ne}=P,$=D(w),te=a.inv(ne),J=a.create($*te),ee=a.create(H*te),X=t.BASE.multiplyUnsafe(J).add(_.multiplyUnsafe(ee));return X.is0()?!1:a.create(X.x)===H}catch{return!1}}function k(b,w,N={}){const{prehash:L}=Ej(N,g);return w=U(w,L),I.fromBytes(b,"recovered").recoverPublicKey(w).toBytes()}return Object.freeze({keygen:l,getPublicKey:u,getSharedSecret:f,utils:d,lengths:p,Point:t,sign:ie,verify:R,recoverPublicKey:k,Signature:I,hash:e})}function CXe(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(a=>Math.ceil(a/2)))):void 0;const s=U7(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),i={Fp:n,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function TXe(t){const{CURVE:e,curveOpts:n}=CXe(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function NXe(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,Xxe(n.Fn.ORDER,n.Fn.BITS))})}function kXe(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:s}=TXe(t),i=AXe(e,n),a=IXe(i,r,s);return NXe(t,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function PXe(t,e){const n=r=>kXe({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uX={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},OXe={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},bce=BigInt(2);function RXe(t){const e=uX.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,f=zu(u,n,e)*u%e,d=zu(f,n,e)*u%e,p=zu(d,bce,e)*l%e,g=zu(p,s,e)*p%e,m=zu(g,i,e)*g%e,v=zu(m,o,e)*m%e,A=zu(v,c,e)*v%e,S=zu(A,o,e)*m%e,I=zu(S,n,e)*u%e,B=zu(I,a,e)*g%e,D=zu(B,r,e)*l%e,V=zu(D,bce,e);if(!sW.eql(sW.sqr(V),t))throw new Error("Cannot find square root");return V}const sW=U7(uX.p,{sqrt:RXe}),Tp=PXe({...uX,Fp:sW,lowS:!0,endo:OXe},u4);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function iW(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function o2e(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function _Xe(t){if(typeof t!="function")throw new Error("function expected");return!0}function aW(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function fX(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function oW(t){if(!Array.isArray(t))throw new Error("array expected")}function c2e(t,e){if(!o2e(!0,e))throw new Error(`${t}: array of strings expected`)}function BXe(t,e){if(!o2e(!1,e))throw new Error(`${t}: array of numbers expected`)}function l2e(...t){const e=i=>i,n=(i,a)=>o=>i(a(o)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function MXe(t){const e=typeof t=="string"?t.split(""):t,n=e.length;c2e("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(oW(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(oW(s),s.map(i=>{aW("alphabet.decode",i);const a=r.get(i);if(a===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return a}))}}function DXe(t=""){return aW("join",t),{encode:e=>(c2e("join.decode",e),e.join(t)),decode:e=>(aW("join.decode",e),e.split(t))}}function vce(t,e,n){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(oW(t),!t.length)return[];let r=0;const s=[],i=Array.from(t,o=>{if(fX(o),o<0||o>=e)throw new Error(`invalid integer: ${o}`);return o}),a=i.length;for(;;){let o=0,c=!0;for(let l=r;l<a;l++){const u=i[l],f=e*o,d=f+u;if(!Number.isSafeInteger(d)||f/e!==o||d-u!==f)throw new Error("convertRadix: carry overflow");const p=d/n;o=d%n;const g=Math.floor(p);if(i[l]=g,!Number.isSafeInteger(g)||g*n+o!==d)throw new Error("convertRadix: carry overflow");if(c)g?c=!1:r=l;else continue}if(s.push(o),c)break}for(let o=0;o<t.length-1&&t[o]===0;o++)s.push(0);return s.reverse()}function LXe(t){fX(t);const e=2**8;return{encode:n=>{if(!iW(n))throw new Error("radix.encode input should be Uint8Array");return vce(Array.from(n),e,t)},decode:n=>(BXe("radix.decode",n),Uint8Array.from(vce(n,t,e)))}}function UXe(t,e){return fX(t),_Xe(e),{encode(n){if(!iW(n))throw new Error("checksum.encode: input should be Uint8Array");const r=e(n).slice(0,t),s=new Uint8Array(n.length+t);return s.set(n),s.set(r,n.length),s},decode(n){if(!iW(n))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-t),s=n.slice(-t),i=e(r).slice(0,t);for(let a=0;a<t;a++)if(i[a]!==s[a])throw new Error("Invalid checksum");return r}}}const FXe=t=>l2e(LXe(58),MXe(t),DXe("")),VXe=FXe("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),$Xe=t=>l2e(UXe(4,e=>t(t(e))),VXe);/*! scure-bip32 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const eO=Tp.ProjectivePoint,Aj=$Xe(u4);function xce(t){rc(t);const e=t.length===0?"0":Lx(t);return BigInt("0x"+e)}function jXe(t){if(typeof t!="bigint")throw new Error("bigint expected");return WN(t.toString(16).padStart(64,"0"))}const HXe=HZ("Bitcoin seed"),Sj={private:76066276,public:76067358},Ij=2147483648,qXe=t=>jYe(u4(t)),KXe=t=>Dx(t).getUint32(0,!1),tO=t=>{if(!Number.isSafeInteger(t)||t<0||t>2**32-1)throw new Error("invalid number, should be from 0 to 2**32-1, got "+t);const e=new Uint8Array(4);return Dx(e).setUint32(0,t,!1),e};class Jy{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return KXe(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return Aj.encode(this.serialize(this.versions.private,fu(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return Aj.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,n=Sj){if(rc(e),8*e.length<128||8*e.length>512)throw new Error("HDKey: seed length must be between 128 and 512 bits; 256 bits is advised, got "+e.length);const r=u5(WB,HXe,e);return new Jy({versions:n,chainCode:r.slice(32),privateKey:r.slice(0,32)})}static fromExtendedKey(e,n=Sj){const r=Aj.decode(e),s=Dx(r),i=s.getUint32(0,!1),a={versions:n,depth:r[4],parentFingerprint:s.getUint32(5,!1),index:s.getUint32(9,!1),chainCode:r.slice(13,45)},o=r.slice(45),c=o[0]===0;if(i!==n[c?"private":"public"])throw new Error("Version mismatch");return c?new Jy({...a,privateKey:o.slice(1)}):new Jy({...a,publicKey:o})}static fromJSON(e){return Jy.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||typeof e!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||Sj,this.depth=e.depth||0,this.chainCode=e.chainCode||null,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!Tp.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey=typeof e.privateKey=="bigint"?e.privateKey:xce(e.privateKey),this.privKeyBytes=jXe(this.privKey),this.pubKey=Tp.getPublicKey(e.privateKey,!0)}else if(e.publicKey)this.pubKey=eO.fromHex(e.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=qXe(this.pubKey)}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const n=e.replace(/^[mM]'?\//,"").split("/");let r=this;for(const s of n){const i=/^(\d+)('?)$/.exec(s),a=i&&i[1];if(!i||i.length!==3||typeof a!="string")throw new Error("invalid child index: "+s);let o=+a;if(!Number.isSafeInteger(o)||o>=Ij)throw new Error("Invalid index");i[2]==="'"&&(o+=Ij),r=r.deriveChild(o)}return r}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let n=tO(e);if(e>=Ij){const o=this.privateKey;if(!o)throw new Error("Could not derive hardened child key");n=fu(new Uint8Array([0]),o,n)}else n=fu(this.pubKey,n);const r=u5(WB,this.chainCode,n),s=xce(r.slice(0,32)),i=r.slice(32);if(!Tp.utils.isValidPrivateKey(s))throw new Error("Tweak bigger than curve order");const a={versions:this.versions,chainCode:i,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const o=yf(this.privKey+s,Tp.CURVE.n);if(!Tp.utils.isValidPrivateKey(o))throw new Error("The tweak was out of range or the resulted private key is invalid");a.privateKey=o}else{const o=eO.fromHex(this.pubKey).add(eO.fromPrivateKey(s));if(o.equals(eO.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");a.publicKey=o.toRawBytes(!0)}return new Jy(a)}catch{return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return rc(e,32),Tp.sign(e,this.privKey).toCompactRawBytes()}verify(e,n){if(rc(e,32),rc(n,64),!this.publicKey)throw new Error("No publicKey set!");let r;try{r=Tp.Signature.fromCompact(n)}catch{return!1}return Tp.verify(r,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,n){if(!this.chainCode)throw new Error("No chainCode set");return rc(n,33),fu(tO(e),new Uint8Array([this.depth]),tO(this.parentFingerprint),tO(this.index),this.chainCode,n)}}let GXe=!1;function dX(t){const{privateKey:e}=t,n=g4.ProjectivePoint.fromPrivateKey(Su(e).slice(2));return QN(n)}function u2e(t){return XZ(WXe(t))}function WXe(t){const{payload:e,signature:n}=t,{r,s,yParity:i}=n,o=new g4.Signature(BigInt(r),BigInt(s)).addRecoveryBit(i).recoverPublicKey(Su(e).substring(2));return QN(o)}function f2e(t){const{extraEntropy:e=GXe,hash:n,payload:r,privateKey:s}=t,{r:i,s:a,recovery:o}=g4.sign(Ln(r),Ln(s),{extraEntropy:typeof e=="boolean"?e:Su(e).slice(2),lowS:!0,...n?{prehash:!0}:{}});return{r:i,s:a,yParity:o}}function d2e(t){return{derive:e=>d2e(t.derive(e)),depth:t.depth,identifier:Un(t.identifier),index:t.index,privateKey:Un(t.privateKey),privateExtendedKey:t.privateExtendedKey,publicKey:dX({privateKey:t.privateKey}),publicExtendedKey:t.publicExtendedKey,versions:t.versions}}function zXe(t,e={}){const{versions:n}=e,r=Jy.fromMasterSeed(Ln(t),n);return d2e(r)}function JXe(t={}){const{account:e=0,change:n=0,index:r=0}=t;return`m/44'/60'/${e}'/${n}/${r}`}function YXe(t,e,n,r){jZ(t);const s=OYe({dkLen:32,asyncTick:10},r),{c:i,dkLen:a,asyncTick:o}=s;if(Og(i),Og(a),Og(o),i<1)throw new Error("iterations (c) should be >= 1");const c=Hoe(e),l=Hoe(n),u=new Uint8Array(a),f=u5.create(t,c),d=f._cloneInto().update(l);return{c:i,dkLen:a,asyncTick:o,DK:u,PRF:f,PRFSalt:d}}function QXe(t,e,n,r,s){return t.destroy(),e.destroy(),r&&r.destroy(),ih(s),n}function ZXe(t,e,n,r){const{c:s,dkLen:i,DK:a,PRF:o,PRFSalt:c}=YXe(t,e,n,r);let l;const u=new Uint8Array(4),f=Dx(u),d=new Uint8Array(o.outputLen);for(let p=1,g=0;g<i;p++,g+=o.outputLen){const m=a.subarray(g,g+o.outputLen);f.setInt32(0,p,!1),(l=c._cloneInto(l)).update(u).digestInto(d),m.set(d.subarray(0,m.length));for(let v=1;v<s;v++){o._cloneInto(l).update(d).digestInto(d);for(let A=0;A<m.length;A++)m[A]^=d[A]}}return QXe(o,c,a,l,d)}function XXe(t,e={}){return{...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null}}/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */function h2e(t){if(typeof t!="string")throw new TypeError("invalid mnemonic type: "+typeof t);return t.normalize("NFKD")}function eet(t){const e=h2e(t),n=e.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:n}}const tet=t=>h2e("mnemonic"+t);function p2e(t,e=""){return ZXe(WB,eet(t).nfkd,tet(e),{c:2048,dkLen:64})}function net(t,e={}){const{passphrase:n}=e,r=set(t,{passphrase:n});return zXe(r)}function ret(t,e={}){const{path:n=JXe(),passphrase:r}=e,s=net(t,{passphrase:r}).derive(n);return e.as==="Bytes"?Ln(s.privateKey):s.privateKey}function set(t,e={}){const{passphrase:n}=e,r=p2e(t,n);return e.as==="Hex"?mr(r):r}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const g2e=p4(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),iet=g2e.create(BigInt("-3")),aet=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),m2e=GL({a:iet,b:aet,Fp:g2e,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},u4),y2e=p4(BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff")),oet=y2e.create(BigInt("-3")),cet=BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef");GL({a:oet,b:cet,Fp:y2e,n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),h:BigInt(1),lowS:!1},gQe);const w2e=p4(BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")),uet=w2e.create(BigInt("-3")),fet=BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00");GL({a:uet,b:fet,Fp:w2e,n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650"),h:BigInt(1),lowS:!1,allowedPrivateKeyLengths:[130,131,132]},WB);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ece=m2e,b2e=m2e;function Ace(t){const{payload:e,signature:n}=t,{r,s,yParity:i}=n,a=new b2e.Signature(BigInt(r),BigInt(s)).addRecoveryBit(i),o=e instanceof Uint8Array?Un(e):e,c=a.recoverPublicKey(o.substring(2));return QN(c)}function det(t){const{hash:e,payload:n,publicKey:r,signature:s}=t;return b2e.verify(s,n instanceof Uint8Array?n:Lt(n),bxe(r).substring(2),...e?[{prehash:!0,lowS:!0}]:[])}function het(t){const e=Su(t);return Us("0x19",Il(`Ethereum Signed Message:
`+ui(e)),e)}function pet(t){return xr(het(t))}var get={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,f,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,f||c,d),g=n?n+l:l;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function a(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],u,f;if(this._eventsCount===0)return l;for(f in u=this._events)e.call(u,f)&&l.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},o.prototype.listeners=function(l){var u=n?n+l:l,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,p=f.length,g=new Array(p);d<p;d++)g[d]=f[d].fn;return g},o.prototype.listenerCount=function(l){var u=n?n+l:l,f=this._events[u];return f?f.fn?1:f.length:0},o.prototype.emit=function(l,u,f,d,p,g){var m=n?n+l:l;if(!this._events[m])return!1;var v=this._events[m],A=arguments.length,S,I;if(v.fn){switch(v.once&&this.removeListener(l,v.fn,void 0,!0),A){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,f),!0;case 4:return v.fn.call(v.context,u,f,d),!0;case 5:return v.fn.call(v.context,u,f,d,p),!0;case 6:return v.fn.call(v.context,u,f,d,p,g),!0}for(I=1,S=new Array(A-1);I<A;I++)S[I-1]=arguments[I];v.fn.apply(v.context,S)}else{var B=v.length,D;for(I=0;I<B;I++)switch(v[I].once&&this.removeListener(l,v[I].fn,void 0,!0),A){case 1:v[I].fn.call(v[I].context);break;case 2:v[I].fn.call(v[I].context,u);break;case 3:v[I].fn.call(v[I].context,u,f);break;case 4:v[I].fn.call(v[I].context,u,f,d);break;default:if(!S)for(D=1,S=new Array(A-1);D<A;D++)S[D-1]=arguments[D];v[I].fn.apply(v[I].context,S)}}return!0},o.prototype.on=function(l,u,f){return i(this,l,u,f,!1)},o.prototype.once=function(l,u,f){return i(this,l,u,f,!0)},o.prototype.removeListener=function(l,u,f,d){var p=n?n+l:l;if(!this._events[p])return this;if(!u)return a(this,p),this;var g=this._events[p];if(g.fn)g.fn===u&&(!d||g.once)&&(!f||g.context===f)&&a(this,p);else{for(var m=0,v=[],A=g.length;m<A;m++)(g[m].fn!==u||d&&!g[m].once||f&&g[m].context!==f)&&v.push(g[m]);v.length?this._events[p]=v.length===1?v[0]:v:a(this,p)}return this},o.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(get);function v2e(t,e={}){const{raw:n=!1}=e,r=t;if(n)return t;if(r.error)throw x2e(r.error);return r.result}function x2e(t){const e=t;if(e instanceof Error&&!("code"in e))return new Aw({cause:e,data:e,message:e.message,stack:e.stack});const{code:n}=e;return n===Aw.code?new Aw(e):n===ek.code?new ek(e):n===ok.code?new ok(e):n===cW.code?new cW(e):n===ik.code?new ik(e):n===lW.code?new lW(e):n===sk.code?new sk(e):n===ck.code?new ck(e):n===tk.code?new tk(e):n===nk.code?new nk(e):n===rk.code?new rk(e):n===ak.code?new ak(e):new Aw({cause:e instanceof Error?e:void 0,data:e,message:e.message,stack:e instanceof Error?e.stack:void 0})}let Kf=class extends Error{constructor(e){const{cause:n,code:r,message:s,data:i,stack:a}=e;super(s,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.BaseError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=n,this.code=r,this.data=i,this.stack=a??""}};class ek extends Kf{constructor(e={}){super({code:ek.code,data:e.data,message:e.message??"Missing or invalid parameters."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidInputError"})}}Object.defineProperty(ek,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class tk extends Kf{constructor(e={}){super({code:tk.code,data:e.data,message:e.message??"Requested resource not found."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceNotFoundError"})}}Object.defineProperty(tk,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class nk extends Kf{constructor(e={}){super({code:nk.code,data:e.data,message:e.message??"Requested resource not available."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceUnavailableError"})}}Object.defineProperty(nk,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class rk extends Kf{constructor(e={}){super({code:rk.code,data:e.data,message:e.message??"Transaction creation failed."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.TransactionRejectedError"})}}Object.defineProperty(rk,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class sk extends Kf{constructor(e={}){super({code:sk.code,data:e.data,message:e.message??"Method is not implemented."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotSupportedError"})}}Object.defineProperty(sk,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class ik extends Kf{constructor(e={}){super({code:ik.code,data:e.data,message:e.message??"Rate limit exceeded."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.LimitExceededError"})}}Object.defineProperty(ik,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class ak extends Kf{constructor(e={}){super({code:ak.code,data:e.data,message:e.message??"JSON-RPC version not supported."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.VersionNotSupportedError"})}}Object.defineProperty(ak,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});let cW=class E2e extends Kf{constructor(e={}){super({code:E2e.code,data:e.data,message:e.message??"Input is not a valid JSON-RPC request."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidRequestError"})}};Object.defineProperty(cW,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});let lW=class A2e extends Kf{constructor(e={}){super({code:A2e.code,data:e.data,message:e.message??"Method does not exist."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotFoundError"})}};Object.defineProperty(lW,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class ok extends Kf{constructor(e={}){super({code:ok.code,data:e.data,message:e.message??"Invalid method parameters."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidParamsError"})}}Object.defineProperty(ok,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Aw extends Kf{constructor(e={}){super({cause:e.cause,code:Aw.code,data:e.data,message:e.message??"Internal JSON-RPC error.",stack:e.stack}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InternalError"})}}Object.defineProperty(Aw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class ck extends Kf{constructor(e={}){super({code:ck.code,data:e.data,message:e.message??"Failed to parse JSON-RPC response."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ParseError"})}}Object.defineProperty(ck,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Ou extends Error{constructor(e,n){super(n),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=e,this.details=n}}class uW extends Ou{constructor({message:e="The user rejected the request."}={}){super(4001,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UserRejectedRequestError"})}}Object.defineProperty(uW,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});let fW=class extends Ou{constructor({message:e="The requested method and/or account has not been authorized by the user."}={}){super(4100,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnauthorizedError"})}};Object.defineProperty(fW,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class dW extends Ou{constructor({message:e="The provider does not support the requested method."}={}){super(4200,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedMethodError"})}}Object.defineProperty(dW,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class hW extends Ou{constructor({message:e="The provider is disconnected from all chains."}={}){super(4900,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.DisconnectedError"})}}Object.defineProperty(hW,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class pW extends Ou{constructor({message:e="The provider is not connected to the requested chain."}={}){super(4901,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.ChainDisconnectedError"})}}Object.defineProperty(pW,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class gW extends Ou{constructor({message:e="An error occurred when attempting to switch chain."}={}){super(4902,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.SwitchChainError"})}}Object.defineProperty(gW,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class mW extends Ou{constructor({message:e="This Wallet does not support a capability that was not marked as optional."}={}){super(5700,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedNonOptionalCapabilityError"})}}Object.defineProperty(mW,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class yW extends Ou{constructor({message:e="This Wallet does not support the requested chain ID."}={}){super(5710,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedChainIdError"})}}Object.defineProperty(yW,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class wW extends Ou{constructor({message:e="There is already a bundle submitted with this ID."}={}){super(5720,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.DuplicateIdError"})}}Object.defineProperty(wW,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class bW extends Ou{constructor({message:e="This bundle id is unknown / has not been submitted."}={}){super(5730,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnknownBundleIdError"})}}Object.defineProperty(bW,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class vW extends Ou{constructor({message:e="The call bundle is too large for the Wallet to process."}={}){super(5740,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.BundleTooLargeError"})}}Object.defineProperty(vW,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class xW extends Ou{constructor({message:e="The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."}={}){super(5750,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.AtomicReadyWalletRejectedUpgradeError"})}}Object.defineProperty(xW,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class EW extends Ou{constructor({message:e="The wallet does not support atomic execution but the request requires it."}={}){super(5760,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.AtomicityNotSupportedError"})}}Object.defineProperty(EW,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});function Kw(t,e={}){if(!t)throw new yet;return{...t,async request(n){try{const r=await t.request(n);return r&&typeof r=="object"&&"jsonrpc"in r?v2e(r):r}catch(r){throw met(r)}}}}function met(t){const e=x2e(t);if(e instanceof Aw){if(!e.data)return e;const{code:n}=e.data;if(n===hW.code)return new hW(e);if(n===pW.code)return new pW(e);if(n===uW.code)return new uW(e);if(n===fW.code)return new fW(e);if(n===dW.code)return new dW(e);if(n===gW.code)return new gW(e);if(n===xW.code)return new xW(e);if(n===EW.code)return new EW(e);if(n===vW.code)return new vW(e);if(n===bW.code)return new bW(e);if(n===wW.code)return new wW(e);if(n===yW.code)return new yW(e);if(n===mW.code)return new mW(e)}return e}class yet extends mn{constructor(){super("`provider` is undefined."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.IsUndefinedError"})}}function wet(t={}){let e=t.id??0;return{prepare(n){return bet({id:e++,...n})},get id(){return e}}}function bet(t){return{...t,jsonrpc:"2.0"}}function vet(t,e){const{errorInstance:n=new xet,timeout:r,signal:s}=e;return new Promise((i,a)=>{(async()=>{let o;try{const c=new AbortController;r>0&&(o=setTimeout(()=>{s&&c.abort()},r)),i(await t({signal:c.signal}))}catch(c){(c==null?void 0:c.name)==="AbortError"&&a(n),a(c)}finally{clearTimeout(o)}})()})}let xet=class extends mn{constructor(){super("Operation timed out."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Promise.TimeoutError"})}};function Eet(t,e){const n=wet();return{request:async({method:r,params:s},i={})=>{const a=n.prepare({method:r,params:s}),o=await t.request(a,i);return v2e(o,{raw:i.raw??(e==null?void 0:e.raw)})}}}function Gw(t,e={}){return Eet({async request(n,r){const{fetchFn:s=e.fetchFn??fetch,fetchOptions:i=e.fetchOptions,timeout:a=e.timeout??1e4}=r,o=JSON.stringify(n),c=typeof i=="function"?await i(n):i,l=await vet(({signal:f})=>{const d={...c,body:o,headers:{"Content-Type":"application/json",...c==null?void 0:c.headers},method:(c==null?void 0:c.method)??"POST",signal:(c==null?void 0:c.signal)??(a>0?f:null)},p=new Request(t,d);return s(p)},{timeout:a,signal:!0}),u=await(async()=>{var f;return(f=l.headers.get("Content-Type"))!=null&&f.startsWith("application/json")?l.json():l.text().then(d=>{try{return JSON.parse(d||"{}")}catch{if(l.ok)throw new Iet({response:d});return{error:d}}})})();if(!l.ok)throw new Aet({body:o,details:JSON.stringify(u.error)??l.statusText,response:l,url:t});return u}},{raw:e.raw})}class Aet extends mn{constructor({body:e,details:n,response:r,url:s}){super("HTTP request failed.",{details:n,metaMessages:[`Status: ${r.status}`,`URL: ${s}`,e?`Body: ${JSON.stringify(e)}`:void 0]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcTransport.HttpError"})}}class Iet extends mn{constructor({response:e}){super("HTTP Response could not be parsed as JSON.",{metaMessages:[`Response: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcTransport.MalformedResponseError"})}}const Cet={"0x0":"reverted","0x1":"success"},Tet={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Net(t){return t?{...t,blobGasPrice:t.blobGasPrice?BigInt(t.blobGasPrice):void 0,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,blockNumber:BigInt(t.blockNumber??0n),cumulativeGasUsed:BigInt(t.cumulativeGasUsed??0n),effectiveGasPrice:BigInt(t.effectiveGasPrice??0n),gasUsed:BigInt(t.gasUsed??0n),logs:t.logs.map(e=>XXe(e,{})),status:Cet[t.status],transactionIndex:Number(t.transactionIndex??0),type:Tet[t.type]||t.type}:null}function ket(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(a,o)=>{for(const c of a){const{name:l,type:u}=c,f=o[l],d=u.match(eX);if(d&&(typeof f=="number"||typeof f=="bigint")){const[,m,v]=d;Gn(f,{signed:m==="int",size:Number.parseInt(v??"",10)/8})}if(u==="address"&&typeof f=="string"&&!c5(f))throw new GG({address:f,cause:new vxe});const p=u.match(Axe);if(p){const[,m]=p;if(m&&ui(f)!==Number.parseInt(m,10))throw new _et({expectedSize:Number.parseInt(m,10),givenSize:ui(f)})}const g=s[u];g&&(Uet(u),i(g,f))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new Bet({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new Met({primaryType:r,types:s})}function S2e(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:hX(e),...t.types};ket({domain:e,message:n,primaryType:r,types:s});const i=["0x19","0x01"];return e&&i.push(Oet({domain:e,types:s})),r!=="EIP712Domain"&&i.push(C2e({data:n,primaryType:r,types:s})),Us(...i)}function Pet(t){const{primaryType:e,types:n}=t;let r="";const s=k2e({primaryType:e,types:n});s.delete(e);const i=[e,...Array.from(s).sort()];for(const a of i)r+=`${a}(${(n[a]??[]).map(({name:o,type:c})=>`${c} ${o}`).join(",")})`;return r}function hX(t){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function I2e(t){return xr(S2e(t))}function Oet(t){const{domain:e,types:n}=t;return C2e({data:e,primaryType:"EIP712Domain",types:{...n,EIP712Domain:(n==null?void 0:n.EIP712Domain)||hX(e)}})}function C2e(t){const{data:e,primaryType:n,types:r}=t,s=T2e({data:e,primaryType:n,types:r});return xr(s)}function Ret(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const f of c){const{name:d,type:p}=f;p==="address"&&(u[d]=u[d].toLowerCase())}return u},a=(()=>{if(!e)return{};const c=s.EIP712Domain??hX(e);return i(c,e)})(),o=(()=>{if(r!=="EIP712Domain")return s[r]?i(s[r],n):{}})();return d4({domain:a,message:o,primaryType:r,types:s},(c,l)=>typeof l=="bigint"?l.toString():l)}let _et=class extends mn{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TypedData.BytesSizeMismatchError"})}},Bet=class extends mn{constructor({domain:e}){super(`Invalid domain "${d4(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TypedData.InvalidDomainError"})}},Met=class extends mn{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{metaMessages:["Check that the primary type is a key in `types`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TypedData.InvalidPrimaryTypeError"})}},Det=class extends mn{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TypedData.InvalidStructTypeError"})}};function T2e(t){const{data:e,primaryType:n,types:r}=t,s=[{type:"bytes32"}],i=[Let({primaryType:n,types:r})];for(const a of r[n]??[]){const[o,c]=N2e({types:r,name:a.name,type:a.type,value:e[a.name]});s.push(o),i.push(c)}return l5(s,i)}function Let(t){const{primaryType:e,types:n}=t,r=Il(Pet({primaryType:e,types:n}));return xr(r)}function N2e(t){let{types:e,name:n,type:r,value:s}=t;if(e[r]!==void 0)return[{type:"bytes32"},xr(T2e({data:s,primaryType:r,types:e}))];if(r==="bytes")return s=`0x${(s.length%2?"0":"")+s.slice(2)}`,[{type:"bytes32"},xr(s,{as:"Hex"})];if(r==="string")return[{type:"bytes32"},xr(vi(s),{as:"Hex"})];if(r.lastIndexOf("]")===r.length-1){const i=r.slice(0,r.lastIndexOf("[")),a=s.map(o=>N2e({name:n,type:i,types:e,value:o}));return[{type:"bytes32"},xr(l5(a.map(([o])=>o),a.map(([,o])=>o)))]}return[{type:r},s]}function k2e(t,e=new Set){const{primaryType:n,types:r}=t,s=n.match(/^\w*/u),i=s==null?void 0:s[0];if(e.has(i)||r[i]===void 0)return e;e.add(i);for(const a of r[i])k2e({primaryType:a.type,types:r},e);return e}function Uet(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new Det({type:t})}function Fet(t){const e=t[4]===0?5:4,n=e+32,r=t[n+2]===0?n+3:n+2,s=BigInt(Un(t.slice(e,n))),i=BigInt(Un(t.slice(r)));return{r:s,s:i>Ece.CURVE.n/2n?Ece.CURVE.n-i:i}}async function Vet(t){try{const e=t.getPublicKey();if(!e)throw new lk;const n=new Uint8Array(e),r=await crypto.subtle.importKey("spki",new Uint8Array(n),{name:"ECDSA",namedCurve:"P-256",hash:"SHA-256"},!0,["verify"]),s=new Uint8Array(await crypto.subtle.exportKey("raw",r));return QN(s)}catch(e){if(e.message!=="Permission denied to access object")throw e;const n=new Uint8Array(t.attestationObject),r=32,s=88,i=c=>{const l=new Uint8Array([c,s,r]);for(let u=0;u<n.length-l.length;u++)if(l.every((f,d)=>n[u+d]===f))return u+l.length;throw new lk},a=i(33),o=i(34);return QN(new Uint8Array([4,...n.slice(a,a+r),...n.slice(o,o+r)]))}}const P2e=Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);async function $et(t){const{createFn:e=window.navigator.credentials.create.bind(window.navigator.credentials),...n}=t,r=_2e(n);try{const s=await e(r);if(!s)throw new lk;const i=s.response,a=await Vet(i);return{id:s.id,publicKey:a,raw:s}}catch(s){throw new lk({cause:s})}}function O2e(t={}){const{flag:e=5,rpId:n=window.location.hostname,signCount:r=0}=t,s=YN(Il(n)),i=Gn(e,{size:1}),a=Gn(r,{size:4});return Us(s,i,a)}function R2e(t){const{challenge:e,crossOrigin:n=!1,extraClientData:r,origin:s=window.location.origin}=t;return JSON.stringify({type:"webauthn.get",challenge:tXe(e,{url:!0,pad:!1}),origin:s,crossOrigin:n,...r})}function _2e(t){const{attestation:e="none",authenticatorSelection:n={residentKey:"preferred",requireResidentKey:!1,userVerification:"required"},challenge:r=P2e,excludeCredentialIds:s,extensions:i,name:a,rp:o={id:window.location.hostname,name:window.document.title},user:c}=t,l=(c==null?void 0:c.name)??a;return{publicKey:{attestation:e,authenticatorSelection:n,challenge:typeof r=="string"?Lt(r):r,...s?{excludeCredentials:s==null?void 0:s.map(u=>({id:XB(u),type:"public-key"}))}:{},pubKeyCredParams:[{type:"public-key",alg:-7}],...i&&{extensions:i},rp:o,user:{id:(c==null?void 0:c.id)??xr(vi(l),{as:"Bytes"}),name:l,displayName:(c==null?void 0:c.displayName)??l}}}}function B2e(t){const{credentialId:e,challenge:n,extensions:r,rpId:s=window.location.hostname,userVerification:i="required"}=t;return{publicKey:{...e?{allowCredentials:Array.isArray(e)?e.map(a=>({id:XB(a),type:"public-key"})):[{id:XB(e),type:"public-key"}]}:{},challenge:Lt(n),...r&&{extensions:r},rpId:s,userVerification:i}}}function jet(t){const{challenge:e,crossOrigin:n,extraClientData:r,flag:s,origin:i,rpId:a,signCount:o,userVerification:c="required"}=t,l=O2e({flag:s,rpId:a,signCount:o}),u=R2e({challenge:e,crossOrigin:n,extraClientData:r,origin:i}),f=YN(Il(u)),d=u.indexOf('"challenge"'),p=u.indexOf('"type"'),g={authenticatorData:l,clientDataJSON:u,challengeIndex:d,typeIndex:p,userVerificationRequired:c==="required"},m=Us(l,f);return{metadata:g,payload:m}}async function Het(t){const{getFn:e=window.navigator.credentials.get.bind(window.navigator.credentials),...n}=t,r=B2e(n);try{const s=await e(r);if(!s)throw new AW;const i=s.response,a=String.fromCharCode(...new Uint8Array(i.clientDataJSON)),o=a.indexOf('"challenge"'),c=a.indexOf('"type"'),l=Fet(new Uint8Array(i.signature));return{metadata:{authenticatorData:Un(new Uint8Array(i.authenticatorData)),clientDataJSON:a,challengeIndex:o,typeIndex:c,userVerificationRequired:r.publicKey.userVerification==="required"},signature:l,raw:s}}catch(s){throw new AW({cause:s})}}function M2e(t){const{challenge:e,hash:n=!0,metadata:r,publicKey:s,signature:i}=t,{authenticatorData:a,challengeIndex:o,clientDataJSON:c,typeIndex:l,userVerificationRequired:u}=r,f=Lt(a);if(f.length<37)return!1;const d=f[32];if((d&1)!==1||u&&(d&4)!==4||(d&8)!==8&&(d&16)===16)return!1;if(l!==void 0){const S='"type":"webauthn.get"';if(S!==c.slice(Number(l),S.length+1))return!1}const p=o!==void 0?c.slice(Number(o)).match(/^"challenge":"(.*?)"/):c.match(/"challenge":"(.*?)"/);if(!p)return!1;const[g,m]=p;if(Un(XB(m))!==e)return!1;const v=YN(vi(c),{as:"Bytes"}),A=Dt(f,v);return det({hash:n,payload:A,publicKey:s,signature:i})}class lk extends mn{constructor({cause:e}={}){super("Failed to create credential.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialCreationFailedError"})}}class AW extends mn{constructor({cause:e}={}){super("Failed to request credential.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialRequestFailedError"})}}const Cj=Object.freeze(Object.defineProperty({__proto__:null,CredentialCreationFailedError:lk,CredentialRequestFailedError:AW,createChallenge:P2e,createCredential:$et,getAuthenticatorData:O2e,getClientDataJSON:R2e,getCredentialCreationOptions:_2e,getCredentialRequestOptions:B2e,getSignPayload:jet,sign:Het,verify:M2e},Symbol.toStringTag,{value:"Module"})),x0="0x0000000000000000000000000000000000000000",pX="0xffff0000ffff0000ffff0000ffff0000ffff0000",gX="0x0000000000006Ac72ed1d192fa28f0058D3F8806",Tj=Er(["function isValidSignature(bytes32 _hash, bytes memory _signature) public view returns (bytes4 magicValue)"])[0],qet=Er(["function deploy(address _mainModule, bytes32 _salt) public payable returns (address _contract)"])[0],Ket=Er(["function getImplementation() external view returns (address)"])[0],Get=Er(["function imageHash() external view returns (bytes32)"])[0],Wet=Er(["function readNonce(uint256 _space) public view returns (uint256)"])[0],Sce=Er(["function execute(bytes calldata _payload, bytes calldata _signature) external"])[0],Ice=Er(["function updateImageHash(bytes32 _imageHash) external"])[0],zet=Er(["function recoverSapientSignature((uint8 kind,bool noChainId,(address to,uint256 value,bytes data,uint256 gasLimit,bool delegateCall,bool onlyFallback,uint256 behaviorOnError)[] calls,uint256 space,uint256 nonce,bytes message,bytes32 imageHash,bytes32 digest,address[] parentWallets) calldata _payload, bytes calldata _signature) external view returns (bytes32)"])[0],Jet=Er(["function recoverSapientSignatureCompact(bytes32 _digest, bytes calldata _signature) external view returns (bytes32)"])[0],Yet=Er(["function executeUserOp(bytes calldata _userOp) external"])[0],Qet=Er(["function getNonce(address _account, uint192 _key) public view returns (uint256)"])[0];Er(["function entrypoint() public view returns (address)"])[0];Er([{type:"function",name:"incrementUsageLimit",inputs:[{name:"limits",type:"tuple[]",internalType:"struct UsageLimit[]",components:[{name:"usageHash",type:"bytes32",internalType:"bytes32"},{name:"usageAmount",type:"uint256",internalType:"uint256"}]}],outputs:[],stateMutability:"nonpayable"}])[0];Er(["function getLimitUsage(address wallet, bytes32 usageHash) public view returns (uint256)"])[0];const cA="0x6492649264926492649264926492649264926492649264926492649264926492";function Zet(t,e){const n=Bs(qet,[e.stage1,Su(t)]);switch(typeof t){case"object":return{to:e.factory,data:B0(n)};case"string":return{to:e.factory,data:n}}}function Cce(t,{to:e,data:n}){const r=Us(l5([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,Su(n),Su(t)]),cA);switch(typeof t){case"object":return B0(r);case"string":return r}}function Xet(t){switch(typeof t){case"object":if(mr(t.subarray(-cA.slice(2).length/2))===cA){const[e,n,r]=YB([{type:"address"},{type:"bytes"},{type:"bytes"}],t.subarray(0,-cA.slice(2).length/2));return{signature:B0(r),erc6492:{to:e,data:B0(n)}}}else return{signature:t};case"string":if(t.endsWith(cA.slice(2)))try{const[e,n,r]=YB([{type:"address"},{type:"bytes"},{type:"bytes"}],t.slice(0,-cA.slice(2).length));return{signature:r,erc6492:{to:e,data:n}}}catch{return{signature:t}}else return{signature:t}}}function _3(t){return Math.ceil(t.toString(16).length/2)}function D2e({r:t,s:e,yParity:n}){const r=dt(Ot(t),32);let s=dt(Ot(e),32);return n%2===1&&(s[0]|=128),Dt(r,s)}function Tce(t){const e=Vf(t.slice(0,32)),n=t.slice(32,64),r=n[0]&128?1:0,s=new Uint8Array(n);s[0]=s[0]&127;const i=Vf(s);return{r:e,s:i,yParity:r}}const ett=0,ttt=1,ntt=2,rtt=3,stt=0,itt=1,att=2;function YL(t){return{type:"message",message:t}}function nM(t){return{type:"config-update",imageHash:t}}function mX(t){return t.type==="call"}function uk(t){return t.type==="message"}function d5(t){return t.type==="config-update"}function L2e(t){return t.type==="digest"}function yX(t){return QL(t)?!1:t.recovery===!0}function ott(t){return t.type==="call_4337_07"}function ctt(t){return yX(t)?t:{...t,recovery:!0}}function QL(t){return t.type==="session-implicit-authorize"}function LR(t,e){const n=t.calls.length,r=_3(t.nonce);if(r>15)throw new Error("Nonce is too large");let s=0;t.space===0n&&(s|=1),s|=r<<1,n===1&&(s|=16);let i=0;if(n!==1)if(n<256)i=1;else if(n<65536)i=2,s|=32;else throw new Error("Too many calls");let a=Ot(s,{size:1});if(t.space!==0n){const o=dt(Ot(t.space),20);a=Dt(a,o)}if(r>0){const o=dt(Ot(t.nonce),r);a=Dt(a,o)}n!==1&&(i===1?a=Dt(a,Ot(n,{size:1})):a=Dt(a,Ot(n,{size:2})));for(const o of t.calls){let c=0;if(o.value!==0n&&(c|=2),o.data&&o.data.length>0&&(c|=4),o.gasLimit!==0n&&(c|=8),o.delegateCall&&(c|=16),o.onlyFallback&&(c|=32),c|=bX(o.behaviorOnError)<<6,a=Dt(a,Ot(c,{size:1})),!(c&1)){const l=Lt(o.to);if(l.length!==20)throw new Error(`Invalid 'to' address: ${o.to}`);a=Dt(a,l)}if(c&2){const l=dt(Ot(o.value),32);a=Dt(a,l)}if(c&4){const l=Lt(o.data).length;if(l>16777215)throw new Error("Data too large");const u=Ot(l,{size:3});a=Dt(a,u,Lt(o.data))}if(c&8){const l=dt(Ot(o.gasLimit),32);a=Dt(a,l)}}return a}function Fd(t,e,n){if(L2e(n))return Lt(n.digest);if(QL(n))return Att(n.attestation);const r=wX(t,e,n);return Lt(I2e(r))}function ltt(t,e,n){return yX(t)?{name:"Sequence Wallet - Recovery Mode",version:"1",chainId:Number(n),verifyingContract:e}:{name:"Sequence Wallet",version:"3",chainId:Number(n),verifyingContract:e}}function utt(t,e){if(t>6277101735386680763835789423207666416102355444464034512895n)throw new RangeError("key exceeds 192 bits");if(e>18446744073709551615n)throw new RangeError("seq exceeds 64 bits");return t<<64n|e}function wX(t,e,n){const r=ltt(n,t,e);switch(n.type){case"call":{const s={Calls:[{name:"calls",type:"Call[]"},{name:"space",type:"uint256"},{name:"nonce",type:"uint256"},{name:"wallets",type:"address[]"}],Call:[{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"gasLimit",type:"uint256"},{name:"delegateCall",type:"bool"},{name:"onlyFallback",type:"bool"},{name:"behaviorOnError",type:"uint256"}]},i={calls:n.calls.map(a=>({to:a.to,value:a.value.toString(),data:a.data,gasLimit:a.gasLimit.toString(),delegateCall:a.delegateCall,onlyFallback:a.onlyFallback,behaviorOnError:BigInt(bX(a.behaviorOnError)).toString()})),space:n.space.toString(),nonce:n.nonce.toString(),wallets:n.parentWallets??[]};return{domain:r,types:s,primaryType:"Calls",message:i}}case"message":{const s={Message:[{name:"message",type:"bytes"},{name:"wallets",type:"address[]"}]},i={message:n.message,wallets:n.parentWallets??[]};return{domain:r,types:s,primaryType:"Message",message:i}}case"config-update":{const s={ConfigUpdate:[{name:"imageHash",type:"bytes32"},{name:"wallets",type:"address[]"}]},i={imageHash:n.imageHash,wallets:n.parentWallets??[]};return{domain:r,types:s,primaryType:"ConfigUpdate",message:i}}case"digest":throw new Error("Digest does not support typed data - Use message instead");case"session-implicit-authorize":throw new Error("Payload does not support typed data");case"call_4337_07":{const s={type:"message",message:ftt(n,t,e)};return wX(t,e,s)}}}function U2e(t,e,n){const r={space:0n,nonce:0n,calls:t.calls},s=Un(LR(r));return{sender:e,nonce:utt(t.space,t.nonce),callData:Bs(Yet,[s]),callGasLimit:t.callGasLimit,maxFeePerGas:t.maxFeePerGas,maxPriorityFeePerGas:t.maxPriorityFeePerGas,preVerificationGas:t.preVerificationGas,verificationGasLimit:t.verificationGasLimit,factory:t.factory,factoryData:t.factoryData,paymaster:t.paymaster,paymasterData:t.paymasterData,paymasterPostOpGasLimit:t.paymasterPostOpGasLimit,paymasterVerificationGasLimit:t.paymasterVerificationGasLimit,signature:n}}function ftt(t,e,n){const r=U2e(t,e),s=Us(ii(Gn(r.verificationGasLimit),16),ii(Gn(r.callGasLimit),16)),i=Us(ii(Gn(r.maxPriorityFeePerGas),16),ii(Gn(r.maxFeePerGas),16)),a=xr(r.factory&&r.factoryData?Us(r.factory,r.factoryData):"0x"),o=xr(r.paymaster?Us(r.paymaster,ii(Gn(r.paymasterVerificationGasLimit||0),16),ii(Gn(r.paymasterPostOpGasLimit||0),16),r.paymasterData||"0x"):"0x"),c=l5([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[r.sender,r.nonce,a,xr(r.callData),s,r.preVerificationGas,i,o]);return l5([{type:"bytes32"},{type:"address"},{type:"uint256"}],[xr(c),t.entrypoint,BigInt(n)])}function bX(t){switch(t){case"ignore":return stt;case"revert":return itt;case"abort":return att}}function dtt(t){if(t.type==="call")return{kind:ett,noChainId:!1,calls:t.calls.map(e=>({to:e.to,value:e.value,data:e.data,gasLimit:e.gasLimit,delegateCall:e.delegateCall,onlyFallback:e.onlyFallback,behaviorOnError:BigInt(bX(e.behaviorOnError))})),space:t.space,nonce:t.nonce,message:"0x",imageHash:"0x0000000000000000000000000000000000000000000000000000000000000000",digest:"0x0000000000000000000000000000000000000000000000000000000000000000",parentWallets:t.parentWallets??[]};if(t.type==="message")return{kind:ttt,noChainId:!1,calls:[],space:0n,nonce:0n,message:t.message,imageHash:"0x0000000000000000000000000000000000000000000000000000000000000000",digest:"0x0000000000000000000000000000000000000000000000000000000000000000",parentWallets:t.parentWallets??[]};if(t.type==="config-update")return{kind:ntt,noChainId:!1,calls:[],space:0n,nonce:0n,message:"0x",imageHash:t.imageHash,digest:"0x0000000000000000000000000000000000000000000000000000000000000000",parentWallets:t.parentWallets??[]};if(t.type==="digest")return{kind:rtt,noChainId:!1,calls:[],space:0n,nonce:0n,message:"0x",imageHash:"0x0000000000000000000000000000000000000000000000000000000000000000",digest:t.digest,parentWallets:t.parentWallets??[]};throw new Error("Invalid payload type")}const F2e=0,V2e=1,$2e=2,SW=3,j2e=4,H2e=5,q2e=6,K2e=7,G2e=8,IW=9,W2e=10;function htt(t){return"type"in t&&(t.type==="sapient_compact"||t.type==="sapient")&&typeof t=="object"&&"address"in t&&"data"in t}function ptt(t){return t&&typeof t=="object"&&typeof t.threshold=="bigint"&&typeof t.checkpoint=="bigint"&&CW(t.topology)&&(t.checkpointer===void 0||c5(t.checkpointer))}function F7(t){return typeof t=="object"&&"weight"in t&&"signature"in t}function z2e(t){return To(t)&&"signature"in t}function gtt(t){return za(t)&&"signature"in t}function fk(t){return Array.isArray(t)&&t.length===2&&(CW(t[0])||dk(t[0]))&&(CW(t[1])||dk(t[1]))}function CW(t){return fk(t)||mtt(t)}function mtt(t){return typeof t=="object"&&"weight"in t&&!("tree"in t)}function V7(t){return typeof t=="object"&&"tree"in t&&"weight"in t&&"threshold"in t}function J2e(t){const{signature:e,erc6492:n}=Xet(t);if(e.length<1)throw new Error("Signature is empty");const r=e[0];let s=1;const i=(r&2)===2;let a,o;if((r&64)===64){if(s+20>e.length)throw new Error("Not enough bytes for checkpointer address");if(a=mr(e.slice(s,s+20)),s+=20,s+3>e.length)throw new Error("Not enough bytes for checkpointer data size");const m=Hi(e.slice(s,s+3));if(s+=3,s+m>e.length)throw new Error("Not enough bytes for checkpointer data");o=e.slice(s,s+m),s+=m}const c=(r&28)>>2;if(s+c>e.length)throw new Error("Not enough bytes for checkpoint");const l=Vf(e.slice(s,s+c));s+=c;const u=((r&32)>>5)+1;if(s+u>e.length)throw new Error("Not enough bytes for threshold");const f=Vf(e.slice(s,s+u));if(s+=u,(r&1)===1){const m=[];for(;s<e.length;){if(s+3>e.length)throw new Error("Not enough bytes for chained subsignature size");const v=Hi(e.subarray(s,s+3));if(s+=3,s+v>e.length)throw new Error("Not enough bytes for chained subsignature");const A=J2e(e.subarray(s,s+v));if(s+=v,A.checkpointerData)throw new Error("Chained subsignature has checkpointer data");m.push({...A,checkpointerData:void 0})}if(m.length===0)throw new Error("Chained signature has no subsignatures");return{...m[0],suffix:m.slice(1),erc6492:n}}const{nodes:d,leftover:p}=TW(e.slice(s));if(p.length!==0)throw new Error("Leftover bytes in signature");const g=NW(d);return{noChainId:i,checkpointerData:o,configuration:{threshold:f,checkpoint:l,topology:g,checkpointer:a},erc6492:n}}function TW(t){const e=[];let n=0;for(;n<t.length;){const r=t[n];n++;const s=(r&240)>>4;if(s===F2e){let i=r&15;if(i===0){if(n>=t.length)throw new Error("Not enough bytes for dynamic weight");i=t[n],n++}if(n+64>t.length)throw new Error("Not enough bytes for hash signature (r + yParityAndS)");const a=Tce(t.slice(n,n+64));n+=64,e.push({type:"unrecovered-signer",weight:BigInt(i),signature:{type:"hash",...a}});continue}if(s===V2e){let i=r&15;if(i===0){if(n>=t.length)throw new Error("Not enough bytes for address weight");i=t[n],n++}if(n+20>t.length)throw new Error("Not enough bytes for address leaf");const a=mr(t.slice(n,n+20));n+=20,e.push({type:"signer",address:a,weight:BigInt(i)});continue}if(s===$2e){let i=r&3;if(i===0){if(n>=t.length)throw new Error("Not enough bytes for ERC1271 weight");i=t[n],n++}if(n+20>t.length)throw new Error("Not enough bytes for ERC1271 signer address");const a=mr(t.slice(n,n+20));n+=20;const o=(r&12)>>2;if(n+o>t.length)throw new Error("Not enough bytes for ERC1271 sizeSize");const c=Hi(t.slice(n,n+o));if(n+=o,n+c>t.length)throw new Error("Not enough bytes for ERC1271 data");const l=t.slice(n,n+c);n+=c,e.push({type:"unrecovered-signer",weight:BigInt(i),signature:{type:"erc1271",address:a,data:mr(l)}});continue}if(s===SW){if(n+32>t.length)throw new Error("Not enough bytes for node leaf");const i=t.slice(n,n+32);n+=32,e.push(mr(i));continue}if(s===j2e){const i=r&15;if(n+i>t.length)throw new Error("Not enough bytes for branch sizeSize");const a=Hi(t.slice(n,n+i));if(n+=i,n+a>t.length)throw new Error("Not enough bytes in sub-branch");const o=t.slice(n,n+a);n+=a;const{nodes:c,leftover:l}=TW(o);if(l.length>0)throw new Error("Leftover bytes in sub-branch");const u=NW(c);e.push(u);continue}if(s===H2e){if(n+32>t.length)throw new Error("Not enough bytes for subdigest");const i=t.slice(n,n+32);n+=32,e.push({type:"subdigest",digest:mr(i)});continue}if(s===q2e){let i=(r&12)>>2;if(i===0){if(n>=t.length)throw new Error("Not enough bytes for nested weight");i=t[n],n++}let a=r&3;if(a===0){if(n+2>t.length)throw new Error("Not enough bytes for nested threshold");a=Hi(t.slice(n,n+2)),n+=2}if(n+3>t.length)throw new Error("Not enough bytes for nested sub-tree size");const o=Hi(t.slice(n,n+3));if(n+=3,n+o>t.length)throw new Error("Not enough bytes for nested sub-tree");const c=t.slice(n,n+o);n+=o;const{nodes:l,leftover:u}=TW(c);if(u.length>0)throw new Error("Leftover bytes in nested sub-tree");const f=NW(l);e.push({type:"nested",tree:f,weight:BigInt(i),threshold:BigInt(a)});continue}if(s===K2e){let i=r&15;if(i===0){if(n>=t.length)throw new Error("Not enough bytes for dynamic weight in eth_sign");i=t[n],n++}if(n+64>t.length)throw new Error("Not enough bytes for eth_sign signature");const a=Tce(t.slice(n,n+64));n+=64,e.push({type:"unrecovered-signer",weight:BigInt(i),signature:{type:"eth_sign",...a}});continue}if(s===G2e){if(n+32>t.length)throw new Error("Not enough bytes for any address subdigest");const i=t.slice(n,n+32);n+=32,e.push({type:"any-address-subdigest",digest:mr(i)});continue}if(s===IW||s===W2e){let i=r&3;if(i===0){if(n>=t.length)throw new Error("Not enough bytes for sapient weight");i=t[n],n++}if(n+20>t.length)throw new Error("Not enough bytes for sapient signer address");const a=mr(t.slice(n,n+20));n+=20;const o=(r&12)>>2;if(n+o>t.length)throw new Error("Not enough bytes for sapient signature size");const c=Hi(t.slice(n,n+o));if(n+=o,n+c>t.length)throw new Error("Not enough bytes for sapient signature data");const l=t.slice(n,n+c);n+=c,e.push({type:"unrecovered-signer",weight:BigInt(i),signature:{address:a,data:mr(l),type:s===IW?"sapient":"sapient_compact"}});continue}throw new Error(`Invalid signature flag: 0x${s.toString(16)}`)}return{nodes:e,leftover:t.slice(n)}}function ZT(t,e){if(ti(t))return[ZT(t[0],e),ZT(t[1],e)];if(To(t)){const n=e(t);return n?{...t,signature:n}:t}if(za(t)){const n=e(t);return n?{...t,signature:n}:t}if(M0(t)||D0(t))return t;if(Cl(t))return{...t,tree:ZT(t.tree,e)};if(mo(t))return t;throw new Error("Invalid topology")}function ytt(t){var s;let e=1,n=t[t.length-1];n!=null&&n.configuration.checkpointer&&(e|=64);let r=Ot(e);if(n!=null&&n.configuration.checkpointer){r=Dt(r,dt(Lt(n.configuration.checkpointer),20));const i=((s=n.checkpointerData)==null?void 0:s.length)??0;if(i>16777215)throw new Error("Checkpointer data too large");const a=dt(Ot(i),3);r=Dt(r,a,n.checkpointerData??Jp([]))}for(let i=0;i<t.length;i++){const a=t[i],o=r3(a,!0,i===t.length-1);if(o.length>16777215)throw new Error("Chained signature too large");const c=dt(Ot(o.length),3);r=Dt(r,c,o)}return r}function r3(t,e,n){const{noChainId:r,checkpointerData:s,configuration:i,suffix:a,erc6492:o}=t;if(a!=null&&a.length){const m=ytt([{...t,suffix:void 0,erc6492:void 0},...a]);return o?Cce(m,o):m}let c=0;r&&(c|=2);const l=_3(i.checkpoint);if(l>7)throw new Error("Checkpoint too large");c|=l<<2;let u=_3(i.threshold);if(u=u===0?1:u,u>2)throw new Error("Threshold too large");c|=u==2?32:0,i.checkpointer&&!n&&(c|=64);let f=Ot(c);if(i.checkpointer&&!n&&(f=Dt(f,dt(Lt(i.checkpointer),20)),!e)){const m=(s==null?void 0:s.length)??0;if(m>16777215)throw new Error("Checkpointer data too large");const v=dt(Ot(m),3);f=Dt(f,v,s??Jp([]))}const d=dt(Ot(i.checkpoint),l);f=Dt(f,d);const p=dt(Ot(i.threshold),u);f=Dt(f,p);const g=UR(i.topology,t);return f=Dt(f,g),o?Cce(f,o):f}function UR(t,e={}){if(ti(t)||fk(t)){const n=UR(t[0],e),r=UR(t[1],e);if(ti(t[1])||fk(t[1])){let i=_3(BigInt(r.length));if(i>15)throw new Error("Branch too large");const a=j2e<<4|i;return Dt(n,Ot(a),dt(Ot(r.length),i),r)}else return Dt(n,r)}if(Cl(t)||V7(t)){const n=UR(t.tree,e);let r=q2e<<4,s=Jp([]);if(t.weight<=3n&&t.weight>0n)r|=Number(t.weight)<<2;else if(t.weight<=255n)s=Ot(Number(t.weight));else throw new Error("Weight too large");let i=Jp([]);if(t.threshold<=3n&&t.threshold>0n)r|=Number(t.threshold);else if(t.threshold<=65535n)i=dt(Ot(Number(t.threshold)),2);else throw new Error("Threshold too large");if(n.length>16777215)throw new Error("Nested tree too large");return Dt(Ot(r),s,i,dt(Ot(n.length),3),n)}if(mo(t))return Dt(Ot(SW<<4),Lt(t));if(z2e(t)||F7(t))if(t.signature.type==="hash"||t.signature.type==="eth_sign"){let n=(t.signature.type==="hash"?F2e:K2e)<<4,r=Jp([]);if(t.weight<=15n&&t.weight>0n)n|=Number(t.weight);else if(t.weight<=255n)r=Ot(Number(t.weight));else throw new Error("Weight too large");const s=D2e(t.signature);return Dt(Ot(n),r,s)}else if(t.signature.type==="erc1271"){let n=$2e<<4,r=_3(BigInt(t.signature.data.length));if(r>3)throw new Error("Signature too large");n|=r<<2;let s=Jp([]);if(t.weight<=3n&&t.weight>0n)n|=Number(t.weight);else if(t.weight<=255n)s=Ot(Number(t.weight));else throw new Error("Weight too large");return Dt(Ot(n),s,dt(Lt(t.signature.address),20),dt(Ot(Lt(t.signature.data).length),r),Lt(t.signature.data))}else if(t.signature.type==="sapient"||t.signature.type==="sapient_compact"){let n=(t.signature.type==="sapient"?IW:W2e)<<4;const r=Lt(t.signature.data);let s=_3(BigInt(r.length));if(s>3)throw new Error("Signature too large");n|=s<<2;let i=Jp([]);if(t.weight<=3n&&t.weight>0n)n|=Number(t.weight);else if(t.weight<=255n)i=Ot(Number(t.weight));else throw new Error("Weight too large");return Dt(Ot(n),i,dt(Lt(t.signature.address),20),dt(Ot(r.length),s),r)}else throw new Error(`Invalid signature type: ${t.signature.type}`);if(To(t)){let n=V2e<<4,r=Jp([]);if(t.weight<=15n&&t.weight>0n)n|=Number(t.weight);else if(t.weight<=255n)r=Ot(Number(t.weight));else throw new Error("Weight too large");return Dt(Ot(n),r,dt(Lt(t.address),20))}if(za(t)){const n=Ai(t);return Dt(Ot(SW<<4),n)}if(M0(t))return Dt(Ot(H2e<<4),Lt(t.digest));if(D0(t))return Dt(Ot(G2e<<4),Lt(t.digest));throw new Error("Invalid topology")}function NW(t){if(t.length===0)throw new Error("Empty signature tree");if(t.length===1)return t[0];let e=t[0];for(let n=1;n<t.length;n++)e=[e,t[n]];return e}async function kW(t,e,n,r,s){var o;if((o=t.suffix)!=null&&o.length){let c=!1,{configuration:l,weight:u}=await kW({...t,suffix:void 0},e,n,r,s);c||(c=u<l.threshold);for(const f of t.suffix){const d=await kW(f,e,f.noChainId?0:n,nM(mr(Ai(l))),s);c||(c=d.weight<d.configuration.threshold),c||(c=d.configuration.checkpoint>=l.checkpoint),l=d.configuration,u=d.weight}return{configuration:l,weight:c?0n:u}}const{topology:i,weight:a}=await PW(t.configuration.topology,e,n,r,s);return{configuration:{...t.configuration,topology:i},weight:a}}async function PW(t,e,n,r,s){const i=Fd(e,n,r);if(F7(t))switch(t.signature.type){case"eth_sign":case"hash":return{topology:{type:"signer",address:u2e({payload:t.signature.type==="eth_sign"?xr(QB(["string","bytes32"],[`Ethereum Signed Message:
32`,mr(i)])):i,signature:t.signature}),weight:t.weight,signed:!0,signature:t.signature},weight:t.weight};case"erc1271":switch(s==null?void 0:s.provider){case void 0:case"assume-invalid":if((s==null?void 0:s.throw)!==!1)throw new Error(`unable to validate signer ${t.signature.address} erc-1271 signature`);return{topology:{type:"signer",address:t.signature.address,weight:t.weight},weight:0n};case"assume-valid":return{topology:{type:"signer",address:t.signature.address,weight:t.weight,signed:!0,signature:t.signature},weight:t.weight};default:const a="provider"in s.provider?s.provider.provider:s.provider,o="block"in s.provider?s.provider.block:void 0,c={to:t.signature.address,data:Bs(Tj,[mr(i),t.signature.data])},l=await a.request({method:"eth_call",params:o===void 0?[c,"latest"]:[c,Gn(o)]}),u=Cxe(Tj,l);if(YZ(u,ZB(Tj)))return{topology:{type:"signer",address:t.signature.address,weight:t.weight,signed:!0,signature:t.signature},weight:t.weight};if((s==null?void 0:s.throw)!==!1)throw new Error(`invalid signer ${t.signature.address} erc-1271 signature`);return{topology:{type:"signer",address:t.signature.address,weight:t.weight},weight:0n}}case"sapient":case"sapient_compact":switch(s==null?void 0:s.provider){case void 0:case"assume-invalid":case"assume-valid":throw new Error(`unable to validate sapient signer ${t.signature.address} signature`);default:const a="provider"in s.provider?s.provider.provider:s.provider,o="block"in s.provider?s.provider.block:void 0,c={to:t.signature.address,data:t.signature.type==="sapient"?Bs(zet,[wtt(n,r),t.signature.data]):Bs(Jet,[mr(i),t.signature.data])},l=await a.request({method:"eth_call",params:o===void 0?[c,"latest"]:[c,Gn(o)]});return{topology:{type:"sapient-signer",address:t.signature.address,weight:t.weight,imageHash:l,signed:!0,signature:t.signature},weight:t.weight}}}else if(V7(t)){const{topology:a,weight:o}=await PW(t.tree,e,n,r,s);return{topology:{...t,tree:a},weight:o>=t.threshold?t.weight:0n}}else{if(To(t))return{topology:t,weight:0n};if(za(t))return{topology:t,weight:0n};if(M0(t))return{topology:t,weight:f0(Lt(t.digest),i)?0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffn:0n};if(D0(t)){const a=Fd(x0,n,r);return{topology:t,weight:f0(Lt(t.digest),a)?0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffn:0n}}else{if(mo(t))return{topology:t,weight:0n};{const[a,o]=await Promise.all(t.map(c=>PW(c,e,n,r,s)));return{topology:[a.topology,o.topology],weight:a.weight+o.weight}}}}}function wtt(t,e){switch(e.type){case"call":return{kind:0,noChainId:!0,calls:e.calls.map(n=>({...n,data:n.data,behaviorOnError:n.behaviorOnError==="ignore"?0n:n.behaviorOnError==="revert"?1n:2n})),space:e.space,nonce:e.nonce,message:"0x",imageHash:"0x0000000000000000000000000000000000000000000000000000000000000000",digest:"0x0000000000000000000000000000000000000000000000000000000000000000",parentWallets:e.parentWallets??[]};case"message":return{kind:1,noChainId:!0,calls:[],space:0n,nonce:0n,message:e.message,imageHash:"0x0000000000000000000000000000000000000000000000000000000000000000",digest:"0x0000000000000000000000000000000000000000000000000000000000000000",parentWallets:e.parentWallets??[]};case"config-update":return{kind:2,noChainId:!0,calls:[],space:0n,nonce:0n,message:"0x",imageHash:e.imageHash,digest:"0x0000000000000000000000000000000000000000000000000000000000000000",parentWallets:e.parentWallets??[]};case"digest":return{kind:3,noChainId:!0,calls:[],space:0n,nonce:0n,message:"0x",imageHash:"0x0000000000000000000000000000000000000000000000000000000000000000",digest:e.digest,parentWallets:e.parentWallets??[]};default:throw new Error("Invalid payload type")}}function To(t){return typeof t=="object"&&t!==null&&t.type==="signer"}function za(t){return typeof t=="object"&&t!==null&&t.type==="sapient-signer"}function M0(t){return typeof t=="object"&&t!==null&&t.type==="subdigest"}function D0(t){return typeof t=="object"&&t!==null&&t.type==="any-address-subdigest"}function mo(t){return h4(t)&&t.length===66}function Cl(t){return typeof t=="object"&&t!==null&&t.type==="nested"}function ti(t){return Array.isArray(t)&&t.length===2&&dk(t[0])&&dk(t[1])}function ZL(t){return typeof t=="object"&&"threshold"in t&&"checkpoint"in t&&"topology"in t}function btt(t){return To(t)||za(t)||M0(t)||D0(t)||mo(t)||Cl(t)}function dk(t){return ti(t)||btt(t)}function zl(t){const e=new Set,n=new Set;let r=!0;const s=i=>{ti(i)?(s(i[0]),s(i[1])):To(i)?i.weight&&e.add(i.address):za(i)?n.add({address:i.address,imageHash:i.imageHash}):mo(i)?r=!1:Cl(i)&&i.weight&&s(i.tree)};return s(ZL(t)?t.topology:t),{signers:Array.from(e),sapientSigners:Array.from(n),isComplete:r}}function B3(t,e){if(t=ptt(t)||ZL(t)?t.topology:t,z2e(t))return{weight:t.weight,maxWeight:t.weight};if(To(t))return{weight:0n,maxWeight:e(t)?t.weight:0n};if(F7(t))return{weight:t.weight,maxWeight:t.weight};if(gtt(t))return{weight:t.weight,maxWeight:t.weight};if(za(t))return{weight:0n,maxWeight:e(t)?t.weight:0n};if(M0(t))return{weight:0n,maxWeight:0n};if(D0(t))return{weight:0n,maxWeight:0n};if(V7(t)){const{weight:n,maxWeight:r}=B3(t.tree,e);return{weight:n>=t.threshold?t.weight:0n,maxWeight:r>=t.threshold?t.weight:0n}}else{if(mo(t))return{weight:0n,maxWeight:0n};{const[n,r]=[B3(t[0],e),B3(t[1],e)];return{weight:n.weight+r.weight,maxWeight:n.maxWeight+r.maxWeight}}}}function Ai(t){if(ZL(t)){let e=Ai(t.topology);return e=xr(Dt(e,dt(Ot(t.threshold),32))),e=xr(Dt(e,dt(Ot(t.checkpoint),32))),e=xr(Dt(e,dt(Lt(t.checkpointer??x0),32))),e}if(To(t))return xr(Dt(vi(`Sequence signer:
`),Lt(t.address),dt(Ot(t.weight),32)));if(za(t))return xr(Dt(vi(`Sequence sapient config:
`),Lt(t.address),dt(Ot(t.weight),32),dt(Lt(t.imageHash),32)));if(M0(t))return xr(Dt(vi(`Sequence static digest:
`),Lt(t.digest)));if(D0(t))return xr(Dt(vi(`Sequence any address subdigest:
`),Lt(t.digest)));if(mo(t))return Lt(t);if(Cl(t))return xr(Dt(vi(`Sequence nested config:
`),Ai(t.tree),dt(Ot(t.threshold),32),dt(Ot(t.weight),32)));if(ti(t))return xr(Dt(Ai(t[0]),Ai(t[1])));throw new Error("Invalid topology")}function hk(t){if(t.length===0)throw new Error("Cannot create topology from empty leaves");return t.length===1?t[0]:t.length===2?[t[0],t[1]]:[hk(t.slice(0,t.length/2)),hk(t.slice(t.length/2))]}function FR(t){return ti(t)?[...FR(t[0]),...FR(t[1])]:Cl(t)?[...FR(t.tree)]:[t]}function vtt(t){return t instanceof Promise?{signature:t}:typeof t=="object"&&t&&"signature"in t&&t.signature instanceof Promise?t:{signature:Promise.resolve(t)}}function rM(t,e){if(ti(t)&&ti(e))return[rM(t[0],e[0]),rM(t[1],e[1])];if(ti(t)&&!ti(e)){if(!mo(e))throw new Error("Topology mismatch: cannot merge node with non-node that is not a node leaf");const n=Ai(e);if(!f0(n,Ai(t)))throw new Error("Topology mismatch: node hash does not match");return t}if(!ti(t)&&ti(e)){if(!mo(t))throw new Error("Topology mismatch: cannot merge node with non-node that is not a node leaf");const n=Ai(t);if(!f0(n,Ai(e)))throw new Error("Topology mismatch: node hash does not match");return e}return xtt(t,e)}function wI(t){return ZL(t)?t.threshold>65535n||t.checkpoint>72057594037927935n||wI(t.topology):ti(t)?wI(t[0])||wI(t[1]):Cl(t)?wI(t.tree)||t.weight>255n||t.threshold>65535n:To(t)||za(t)?t.weight>255n:!1}function VR(t){return ti(t)?Math.max(VR(t[0]),VR(t[1]))+1:Cl(t)?VR(t.tree)+1:0}function Nce(t){if(t.threshold===0n)throw new Error("unsafe-threshold-0");if(wI(t))throw new Error("unsafe-invalid-values");if(VR(t.topology)>32)throw new Error("unsafe-depth");const{maxWeight:e}=B3(t.topology,()=>!0);if(e<t.threshold)throw new Error("unsafe-threshold")}function xtt(t,e){if(mo(t)&&mo(e)){if(!YZ(t,e))throw new Error("Topology mismatch: different node leaves");return t}if(mo(t)&&!mo(e)){const n=Ai(e);if(!f0(n,Lt(t)))throw new Error("Topology mismatch: node leaf hash does not match");return e}if(!mo(t)&&mo(e)){const n=Ai(t);if(!f0(n,Lt(e)))throw new Error("Topology mismatch: node leaf hash does not match");return t}if(To(t)&&To(e)){if(t.address!==e.address||t.weight!==e.weight)throw new Error("Topology mismatch: signer fields differ");if(!!t.signed!=!!e.signed||!!t.signature!=!!e.signature)throw new Error("Topology mismatch: signer signature fields differ");return t}if(za(t)&&za(e)){if(t.address!==e.address||t.weight!==e.weight||t.imageHash!==e.imageHash)throw new Error("Topology mismatch: sapient signer fields differ");if(!!t.signed!=!!e.signed||!!t.signature!=!!e.signature)throw new Error("Topology mismatch: sapient signature fields differ");return t}if(M0(t)&&M0(e)){if(!f0(Lt(t.digest),Lt(e.digest)))throw new Error("Topology mismatch: subdigest fields differ");return t}if(D0(t)&&D0(e)){if(!f0(Lt(t.digest),Lt(e.digest)))throw new Error("Topology mismatch: any-address-subdigest fields differ");return t}if(Cl(t)&&Cl(e)){if(t.weight!==e.weight||t.threshold!==e.threshold)throw new Error("Topology mismatch: nested leaf fields differ");const n=rM(t.tree,e.tree);return{type:"nested",weight:t.weight,threshold:t.threshold,tree:n}}throw new Error("Topology mismatch: incompatible leaf types")}function $R(t,e,n){return ti(t)?[$R(t[0],e,n),$R(t[1],e,n)]:Cl(t)?{...t,tree:$R(t.tree,e,n)}:(To(t)||za(t))&&Mn(t.address,e)?{...t,address:n}:t}function OW(t,e){const n=t instanceof Uint8Array?t:Ai(t);return mr(xr(Dt(Ln("0xff"),Ln(e.factory),n,xr(Dt(Ln(e.creationCode),dt(Ln(e.stage1),32)))),{as:"Bytes"}).subarray(12))}function Y2e(t){const e=Ett(t.authData),n=[Lt(t.approvedSigner,{size:20}),dt(t.identityType.slice(0,4),4),dt(t.issuerHash,32),dt(t.audienceHash,32),Ot(t.applicationData.length,{size:3}),t.applicationData,e];return Dt(...n)}function Ett(t){return Dt(Ot(t.redirectUrl.length,{size:3}),vi(t.redirectUrl),Ot(t.issuedAt,{size:8}))}function Att(t){return xr(Y2e(t))}function Stt(t,e){return JSON.stringify(Itt(t),null,e)}function Itt(t){return{approvedSigner:t.approvedSigner.toString(),identityType:mr(t.identityType),issuerHash:mr(t.issuerHash),audienceHash:mr(t.audienceHash),applicationData:mr(t.applicationData),authData:{redirectUrl:t.authData.redirectUrl,issuedAt:t.authData.issuedAt.toString()}}}xr(vi("acceptImplicitRequest"));var kce;(function(t){t[t.EQUAL=0]="EQUAL",t[t.NOT_EQUAL=1]="NOT_EQUAL",t[t.GREATER_THAN_OR_EQUAL=2]="GREATER_THAN_OR_EQUAL",t[t.LESS_THAN_OR_EQUAL=3]="LESS_THAN_OR_EQUAL"})(kce||(kce={}));const Ctt=2**7-1,Ttt=2**8-1;QZ(Lt("0xffffffff"),32),dt(Lt("0xffffffffffffffffffffffffffffffffffffffff"),32),dt(Lt("0x01"),32),dt(Ln(Array(1).fill(255)),32),dt(Ln(Array(2).fill(255)),32),dt(Ln(Array(4).fill(255)),32),dt(Ln(Array(8).fill(255)),32),dt(Ln(Array(16).fill(255)),32),dt(Ln(Array(32).fill(255)),32),dt(Ln(Array(1).fill(255)),32),dt(Ln(Array(2).fill(255)),32),dt(Ln(Array(4).fill(255)),32),dt(Ln(Array(8).fill(255)),32),dt(Ln(Array(16).fill(255)),32),dt(Ln(Array(32).fill(255)),32),dt(Ln(Array(1).fill(255)),32),dt(Ln(Array(2).fill(255)),32),dt(Ln(Array(4).fill(255)),32),dt(Ln(Array(8).fill(255)),32),dt(Ln(Array(16).fill(255)),32),dt(Ln(Array(32).fill(255)),32);function Ntt(t){if(t.permissions.length>Ctt)throw new Error("Too many permissions");const e=t.permissions.map(ktt);return Dt(dt(Lt(t.signer),20),dt(Ot(t.chainId),32),dt(Ot(t.valueLimit),32),dt(Ot(t.deadline,{size:8}),8),Ot(t.permissions.length,{size:1}),Dt(...e))}function ktt(t){if(t.rules.length>Ttt)throw new Error("Too many rules");const e=t.rules.map(Ptt);return Dt(dt(Lt(t.target),20),Ot(t.rules.length,{size:1}),Dt(...e))}function Ptt(t){const e=Number(t.operation)<<1|(t.cumulative?1:0);return Dt(Ot(e),dt(t.value,32),dt(Ot(t.offset),32),dt(t.mask,32))}function Ott(t){const e=mr(t.slice(0,20)),n=Hi(t.slice(20,52)),r=Vf(t.slice(52,84)),s=Vf(t.slice(84,92)),i=Number(t[92]),a=[];let o=93;for(let c=0;c<i;c++){const{permission:l,consumed:u}=Rtt(t.slice(o));a.push(l),o+=u}if(a.length===0)throw new Error("No permissions");return{signer:e,chainId:n,valueLimit:r,deadline:s,permissions:a}}function Rtt(t){const e=mr(t.slice(0,20)),n=Number(t[20]),r=[];let s=21;for(let i=0;i<n;i++){const a=t.slice(s,s+97);r.push(_tt(a)),s+=97}return{permission:{target:e,rules:r},consumed:s}}function _tt(t){const e=Number(t[0]),n=(e&1)===1,r=e>>1,s=t.slice(1,33),i=Vf(t.slice(33,65)),a=t.slice(65,97);return{cumulative:n,operation:r,value:s,offset:i,mask:a}}function $7(t){return Array.isArray(t)&&t.length>=2&&t.every(e=>Btt(e))}function vX(t){return t.type==="leaf"&&gxe(t.value)}function Btt(t){return $7(t)||vX(t)||Bf(t)}function Bf(t){return h4(t)&&ui(t)===32}function Hd(t){if($7(t)){const e=t.map(Hd);if(e.length===0)throw new Error("Empty branch");let n=B0(e[0]);for(let r=1;r<e.length;r++)n=xr(Dt(n,B0(e[r])));return Un(n)}return Bf(t)?t:xr(t.value,{as:"Hex"})}const Q2e=0,Z2e=3,X2e=4,Mtt=32;function pk(t){return h4(t)&&ui(t)===Mtt}function h5(t){return typeof t=="object"&&t!==null&&"blacklist"in t}function p5(t){return typeof t=="object"&&t!==null&&"identitySigner"in t}function g5(t){return typeof t=="object"&&t!==null&&"signer"in t}function sM(t){return h5(t)||p5(t)||g5(t)}function m4(t){return Array.isArray(t)&&t.length>=2&&t.every(e=>Dtt(e))}function Dtt(t){return m4(t)||sM(t)||pk(t)}function iM(t){return p5(t)?[t.identitySigner]:m4(t)?t.map(iM).flat():[]}function xX(t){if(h5(t))return t;if(m4(t)){const e=t.map(xX).filter(n=>n!==null);if(e.length>1)throw new Error("Multiple blacklists");if(e.length===1)return e[0]}return null}function EX(t,e){if(g5(t)&&Mn(t.signer,e))return t;if(m4(t))for(const n of t){const r=EX(n,e);if(r)return r}return null}function Ltt(t){if(g5(t))return{type:"leaf",value:Dt(Ot(Q2e),Ntt(t))};if(h5(t))return{type:"leaf",value:Dt(Ot(Z2e),Dt(...t.blacklist.map(e=>dt(Lt(e),20))))};if(p5(t))return{type:"leaf",value:Dt(Ot(X2e),dt(Lt(t.identitySigner),20))};throw new Error("Invalid leaf")}function Utt(t){const e=t[0];if(e===Z2e){const n=[];for(let r=1;r<t.length;r+=20)n.push(mr(t.slice(r,r+20)));return{type:"implicit-blacklist",blacklist:n}}if(e===X2e)return{type:"identity-signer",identitySigner:mr(t.slice(1,21))};if(e===Q2e)return{type:"session-permissions",...Ott(t.slice(1))};throw new Error("Invalid leaf")}function bI(t){if(m4(t))return t.map(bI);if(h5(t)||p5(t)||g5(t))return Ltt(t);if(pk(t))return t;throw new Error("Invalid topology")}function jR(t){if($7(t))return t.map(jR);if(Bf(t))throw new Error("Unknown in configuration tree");return Utt(t.value)}function AX(t,e){if(sM(t)&&sM(e)){if(t.type===e.type){if(g5(t)&&g5(e)){if(Mn(t.signer,e.signer))return null}else if(h5(t)&&h5(e)){const n=t.blacklist.filter(r=>!e.blacklist.includes(r));return n.length===0?null:{type:"implicit-blacklist",blacklist:n}}else if(p5(t)&&p5(e)&&Mn(t.identitySigner,e.identitySigner))return null}}else if(pk(t)&&pk(e)&&YZ(t,e))return null;if(m4(t)){const n=[];for(const r of t){const s=AX(r,e);s!=null&&n.push(s)}return n.length===0?null:n.length===1?n[0]:n}return t}function Pce(t,e){const n=EX(t,e);if(!n)return t;const r=AX(t,n);return r?XL(r):null}function Oce(t,e){if(EX(t,e.signer))throw new Error("Session already exists");const n=eEe(t,{type:"session-permissions",...e});return XL(n)}function Ftt(t,e){const r=AX(t,{type:"identity-signer",identitySigner:e});return r?XL(r):null}function Rce(t,e){if(iM(t).some(r=>Mn(r,e)))throw new Error("Identity signer already exists");const n=eEe(t,{type:"identity-signer",identitySigner:e});return XL(n)}function eEe(t,e){return[t,e]}function tEe(t){if(sM(t)||pk(t))return[t];const e=[];for(const n of t)e.push(...tEe(n));return e}function aM(t){if(t.length===1)return t[0];if(t.length===0)throw new Error("Cannot build a topology from an empty list");const e=Math.floor(t.length/2),n=t.slice(0,e),r=t.slice(e),s=aM(n),i=aM(r);return[s,i]}function XL(t){return aM(tEe(t))}function Vtt(t,e){const n=xX(t);if(!n)throw new Error("No blacklist found");const{blacklist:r}=n;return r.some(s=>Mn(s,e))||(r.push(e),r.sort((s,i)=>BigInt(s)<BigInt(i)?-1:1)),t}function $tt(t,e){const n=xX(t);if(!n)throw new Error("No blacklist found");const{blacklist:r}=n,s=r.filter(i=>i!==e);return n.blacklist=s,t}function RW(t){if(!Array.isArray(t))return RW([t]);const e=[{type:"implicit-blacklist",blacklist:[]},...t.map(n=>({type:"identity-signer",identitySigner:n}))];return aM(e)}const jtt={factory:"0xe828630697817291140D6B7A42a2c3b7277bE45a",stage1:"0x2a4fB19F66F1427A5E363Bf1bB3be27b9A9ACC39",stage2:"0xe1299E4456b267123F7Aba29B72C2164ff501BDa",creationCode:"0x603e600e3d39601e805130553df33d3d34601c57363d3d373d363d30545af43d82803e903d91601c57fd5bf3"},nEe={factory:"0xFE14B91dE3c5Ca74c4D24608EBcD4B2848aA6010",stage1:"0x300E98ae5bEA4A7291d62Eb0b9feD535E10095dD",stage2:"0x90cb0a8ccf40bEdA60896e408bdc7801033447C6",creationCode:"0x6041600e3d396021805130553df33d3d36153402601f57363d3d373d363d30545af43d82803e903d91601f57fd5bf3"},Htt={factory:"0xFE14B91dE3c5Ca74c4D24608EBcD4B2848aA6010",stage1:"0x8Ae58FCc0Ee9b32994CA52c9854deb969DC8fa2A",stage2:"0x30f8e3AceAcDEac8a3F28935D87FD58DC5f71ad2",creationCode:"0x6041600e3d396021805130553df33d3d36153402601f57363d3d373d363d30545af43d82803e903d91601f57fd5bf3",capabilities:{erc4337:{entrypoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032"}}},qtt={factory:"0x00000000000018A77519fcCCa060c2537c9D6d3F",stage1:"0x00000000000084fA81809Dd337311297C5594d62",stage2:"0x7438718F9E4b9B834e305A620EEeCf2B9E6eBE79",creationCode:"0x6041600e3d396021805130553df33d3d36153402601f57363d3d373d363d30545af43d82803e903d91601f57fd5bf3"},Ktt={factory:"0x00000000000018A77519fcCCa060c2537c9D6d3F",stage1:"0x0000000000005A02E3218e820EA45102F84A35C7",stage2:"0x7706aaC0cc2C42C01CE17136F7475b0E46F2ABA1",creationCode:"0x6041600e3d396021805130553df33d3d36153402601f57363d3d373d363d30545af43d82803e903d91601f57fd5bf3",capabilities:{erc4337:{entrypoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032"}}},Gtt={factory:"0x00000000000018A77519fcCCa060c2537c9D6d3F",stage1:"0x0000000000003DF093bc4257E6dCE45D937EF161",stage2:"0x10bE1Abf3cD0918bb1079ECc6b8220c177F34088",creationCode:"0x6041600e3d396021805130553df33d3d36153402601f57363d3d373d363d30545af43d82803e903d91601f57fd5bf3"},Wtt={factory:"0x00000000000018A77519fcCCa060c2537c9D6d3F",stage1:"0x0000000000003add039FF84b064B7347Fc23C444",stage2:"0x4B3E5735665057A0A15eE448A7293bC01e3b4De9",creationCode:"0x6041600e3d396021805130553df33d3d36153402601f57363d3d373d363d30545af43d82803e903d91601f57fd5bf3",capabilities:{erc4337:{entrypoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032"}}},rEe={factory:"0x00000000000018A77519fcCCa060c2537c9D6d3F",stage1:"0x0000000000001f3C39d61698ab21131a12134454",stage2:"0xD0ae8eF93b7DA4eabb32Ec4d81b7a501DCa04D4C",creationCode:"0x6041600e3d396021805130553df33d3d36153402601f57363d3d373d363d30545af43d82803e903d91601f57fd5bf3"},sEe={factory:"0x00000000000018A77519fcCCa060c2537c9D6d3F",stage1:"0x0000000000009caFdeDb6f64Bf5F31a22124B2a8",stage2:"0xcBca3328a731deffE6Ce4c2fb51b585c3c37FB92",creationCode:"0x6041600e3d396021805130553df33d3d36153402601f57363d3d373d363d30545af43d82803e903d91601f57fd5bf3",capabilities:{erc4337:{entrypoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032"}}},ztt=[{name:"Dev1",development:!0,...jtt},{name:"Dev2",development:!0,...nEe},{name:"Dev2_4337",development:!0,...Htt},{name:"Rc3",development:!0,...qtt},{name:"Rc3_4337",development:!0,...Ktt},{name:"Rc4",development:!1,...Gtt},{name:"Rc4_4337",development:!1,...Wtt},{name:"Rc5",development:!1,...rEe},{name:"Rc5_4337",development:!1,...sEe}];function iEe(t){return typeof t=="object"?{type:"leaf",value:vi(t.credentialId)}:t}function Jtt(t){return Hd(iEe(t))}function aEe(t){const e=ii(t.x,32),n=ii(t.y,32),r=ii(t.requireUserVerification?"0x01":"0x00",32);return t.metadata?[[e,n],[r,iEe(t.metadata)]]:[[e,n],[r,ii("0x00",32)]]}function bd(t){return Hd(aEe(t))}function Ytt(t){const e=t.clientDataJSON.indexOf('"challenge"'),n=t.clientDataJSON.indexOf('"type"'),r=t.authenticatorData.length,s=t.clientDataJSON.length;if(r>65535)throw new Error("Authenticator data size is too large");if(s>65535)throw new Error("Client data JSON size is too large");const i=r<=255?1:2,a=s<=255?1:2,o=e<=255?1:2,c=n<=255?1:2;let l=0;l|=t.publicKey.requireUserVerification?1:0,l|=i-1<<1,l|=a-1<<2,l|=o-1<<3,l|=c-1<<4,t.embedMetadata&&(l|=64);let u=Ln([l]);if(t.embedMetadata){if(!t.publicKey.metadata)throw new Error("Metadata is not present in the public key");u=Dt(u,B0(Jtt(t.publicKey.metadata)))}return u=Dt(u,dt(Ot(r),i)),u=Dt(u,t.authenticatorData),u=Dt(u,dt(Ot(t.clientDataJSON.length),a)),u=Dt(u,Ln(new TextEncoder().encode(t.clientDataJSON))),u=Dt(u,dt(Ot(e),o)),u=Dt(u,dt(Ot(n),c)),u=Dt(u,dt(t.r,32)),u=Dt(u,dt(t.s,32)),u=Dt(u,Lt(t.publicKey.x)),u=Dt(u,Lt(t.publicKey.y)),u}function oEe(t,e){return M2e({challenge:t,publicKey:{x:w2(e.publicKey.x),y:w2(e.publicKey.y),prefix:4},metadata:{authenticatorData:Un(e.authenticatorData),challengeIndex:e.clientDataJSON.indexOf('"challenge"'),clientDataJSON:e.clientDataJSON,typeIndex:e.clientDataJSON.indexOf('"type"'),userVerificationRequired:e.publicKey.requireUserVerification},signature:{r:Vf(e.r),s:Vf(e.s)}})}function SX(t){let e=0;const n=t[0];if(e+=1,n===void 0)throw new Error("Invalid flags");const r=(n&1)!==0,s=(n>>1&1)+1,i=(n>>2&1)+1,a=(n>>3&1)+1,o=(n>>4&1)+1,c=(n>>6&1)===1;if(n&32)throw new Error("Fallback to abi decode is not supported in this implementation");let l;if(c){const D=rf(t,e,e+32);l=Un(D),e+=32}const u=Hi(rf(t,e,e+s));e+=s;const f=rf(t,e,e+u);e+=u;const d=Hi(rf(t,e,e+i));e+=i;const p=rf(t,e,e+d);e+=d;const g=new TextDecoder().decode(p),m=Hi(rf(t,e,e+a));e+=a;const v=Hi(rf(t,e,e+o));e+=o;const A=rf(t,e,e+32);e+=32;const S=rf(t,e,e+32);e+=32;const I=rf(t,e,e+32);e+=32;const B=rf(t,e,e+32);return{publicKey:{requireUserVerification:r,x:Un(I),y:Un(B),metadata:l},r:A,s:S,authenticatorData:f,clientDataJSON:g,challengeIndex:m,typeIndex:v,embedMetadata:c}}const Qtt=1,Ztt=3,Xtt=4,vI=vi(`Sequence recovery leaf:
`),ent=Er(["function queuePayload(address _wallet, address _signer, (uint8 kind,bool noChainId,(address to,uint256 value,bytes data,uint256 gasLimit,bool delegateCall,bool onlyFallback,uint256 behaviorOnError)[] calls,uint256 space,uint256 nonce,bytes message,bytes32 imageHash,bytes32 digest,address[] parentWallets) calldata _payload, bytes calldata _signature) external"])[0],tnt=Er(["function timestampForQueuedPayload(address _wallet, address _signer, bytes32 _payloadHash) external view returns (uint256)"])[0],nnt=Er(["function queuedPayloadHashes(address _wallet, address _signer, uint256 _index) external view returns (bytes32)"])[0],cEe=Er(["function totalQueuedPayloads(address _wallet, address _signer) external view returns (uint256)"])[0];function j7(t){return typeof t=="object"&&t!==null&&t.type==="leaf"}function m5(t){return Array.isArray(t)&&t.length===2&&_ce(t[0])&&_ce(t[1])}function _ce(t){return j7(t)||Bf(t)||m5(t)}function Bce(t){return Hd(gk(t))}function XT(t){if(j7(t))return{leaves:[t],isComplete:!0};if(Bf(t))return{leaves:[],isComplete:!1};if(m5(t)){const n=XT(t[0]),r=XT(t[1]);return{leaves:[...n.leaves,...r.leaves],isComplete:n.isComplete&&r.isComplete}}else throw new Error("Invalid topology")}function _W(t,e){if(j7(t))return Mn(t.signer,e)?t:Bce(t);if(Bf(t))return t;if(m5(t)){const n=_W(t[0],e),r=_W(t[1],e);return Bf(n)&&Bf(r)?Bce(t):[n,r]}throw new Error("Invalid topology")}function BW(t){if(m5(t)){const e=BW(t[0]),n=BW(t[1]);if(m5(t[1])){if(n.length>16777215)throw new Error("Branch too large");const s=Ot(Xtt),i=dt(Ot(n.length),3);return Dt(e,s,i,n)}else return Dt(e,n)}if(Bf(t)){const e=Ot(Ztt),n=Lt(t,{size:32});return Dt(e,n)}if(j7(t)){const e=Ot(Qtt),n=Lt(t.signer,{size:20});if(t.requiredDeltaTime>16777215n)throw new Error("Required delta time too large");const r=dt(Ot(t.requiredDeltaTime),3);if(t.minTimestamp>18446744073709551615n)throw new Error("Min timestamp too large");const s=dt(Ot(t.minTimestamp),8);return Dt(e,n,r,s)}throw new Error("Invalid topology")}function oM(t){if(t.length===0)throw new Error("Cannot build a tree with zero leaves");if(t.length===1)return t[0];const e=Math.floor(t.length/2),n=oM(t.slice(0,e)),r=oM(t.slice(e));return[n,r]}function gk(t){if(j7(t))return{type:"leaf",value:Dt(vI,Lt(t.signer,{size:20}),dt(Ot(t.requiredDeltaTime),32),dt(Ot(t.minTimestamp),32))};if(Bf(t))return t;if(m5(t))return[gk(t[0]),gk(t[1])];throw new Error("Invalid topology")}function eN(t){if(vX(t)){const e=t.value;if(e.length!==vI.length+84||!f0(e.slice(0,vI.length),vI))throw new Error("Invalid recovery leaf format");const n=vI.length,r=Yi(Un(e.slice(n,n+20))),s=Vf(e.slice(n+20,n+52)),i=Vf(e.slice(n+52,n+84));return{type:"leaf",signer:r,requiredDeltaTime:s,minTimestamp:i}}else{if(Bf(t))return t;if($7(t)){if(t.length!==2)throw new Error("Recovery tree only supports binary branches");return[eN(t[0]),eN(t[1])]}else throw new Error("Invalid tree format")}}function rnt(t,e,n,r){let s;r.type==="erc1271"?s=r.data:s=mr(D2e(r));const i=dtt(e);return Bs(ent,[t,n,i,s])}async function snt(t,e,n,r){const s=await t.request({method:"eth_call",params:[{to:e,data:Bs(cEe,[n,r])},"latest"]});return s==="0x"?0n:w2(s)}async function int(t,e,n,r,s){return await t.request({method:"eth_call",params:[{to:e,data:Bs(nnt,[n,r,s])},"latest"]})}async function ant(t,e,n,r,s){const i=await t.request({method:"eth_call",params:[{to:e,data:Bs(tnt,[n,r,s])},"latest"]});return w2(i)}const ont={passkeys:"0x8f26281dB84C18aAeEa8a53F94c835393229d296"},cnt={passkeys:"0x4491845806B757D67BE05BbD877Cab101B9bee5C"},lnt={passkeys:"0x0000000000dc2d96870dc108c5E15570B715DFD2"},unt={passkeys:"0x0000000000005204F3711851EAD52CC9c241499a"},IX={passkeys:"0x0000000000005204F3711851EAD52CC9c241499a",recovery:"0x000000000000AB36D17eB1150116371520565205",sessions:"0x00000000000030Bcc832F7d657f50D6Be35C92b3"},Qn="0xcA11bde05977b3631167028862bE2a173976CA11",S8="0xae96419a81516f063744206d4b5E36f3168280f8";var dn;(function(t){t.MAINNET="mainnet",t.TESTNET="testnet"})(dn||(dn={}));const je={MAINNET:1,SEPOLIA:11155111,POLYGON:137,POLYGON_ZKEVM:1101,POLYGON_AMOY:80002,BSC:56,BSC_TESTNET:97,OPTIMISM:10,OPTIMISM_SEPOLIA:11155420,ARBITRUM:42161,ARBITRUM_SEPOLIA:421614,ARBITRUM_NOVA:42170,AVALANCHE:43114,AVALANCHE_TESTNET:43113,GNOSIS:100,BASE:8453,BASE_SEPOLIA:84532,HOMEVERSE_TESTNET:40875,HOMEVERSE:19011,XAI:660279,XAI_SEPOLIA:37714555429,TELOS:40,TELOS_TESTNET:41,B3:8333,B3_SEPOLIA:1993,APECHAIN:33139,APECHAIN_TESTNET:33111,BLAST:81457,BLAST_SEPOLIA:168587773,SKALE_NEBULA:1482601649,SKALE_NEBULA_TESTNET:37084624,SONEIUM_MINATO:1946,SONEIUM:1868,TOY_TESTNET:21e6,IMMUTABLE_ZKEVM:13371,IMMUTABLE_ZKEVM_TESTNET:13473,ETHERLINK:42793,ETHERLINK_SHADOWNET_TESTNET:127823,MOONBEAM:1284,MOONBASE_ALPHA:1287,MONAD:143,MONAD_TESTNET:10143,SOMNIA_TESTNET:50312,SOMNIA:5031,INCENTIV_TESTNET_V2:28802,KATANA:747474,SANDBOX_TESTNET:6252,ARC_TESTNET:5042002,HYPEREVM:999,SONIC:146,BERACHAIN:80094},lEe=[{chainId:je.MAINNET,type:dn.MAINNET,name:"mainnet",title:"Ethereum",rpcUrl:kn("mainnet"),logoUrl:Pn(je.MAINNET),blockExplorer:{name:"Etherscan",url:"https://etherscan.io/"},nativeCurrency:{symbol:"ETH",name:"Ether",decimals:18},contracts:{multicall3:Qn,ensUniversalResolver:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"}},{chainId:je.SEPOLIA,type:dn.TESTNET,name:"sepolia",title:"Sepolia",rpcUrl:kn("sepolia"),logoUrl:Pn(je.SEPOLIA),blockExplorer:{name:"Etherscan (Sepolia)",url:"https://sepolia.etherscan.io/"},nativeCurrency:{symbol:"sETH",name:"Sepolia Ether",decimals:18},contracts:{multicall3:Qn}},{chainId:je.POLYGON,type:dn.MAINNET,name:"polygon",title:"Polygon",rpcUrl:kn("polygon"),logoUrl:Pn(je.POLYGON),blockExplorer:{name:"Polygonscan",url:"https://polygonscan.com/"},nativeCurrency:{symbol:"POL",name:"POL",decimals:18},contracts:{multicall3:Qn}},{chainId:je.POLYGON_AMOY,type:dn.TESTNET,name:"amoy",title:"Polygon Amoy",rpcUrl:kn("amoy"),logoUrl:Pn(je.POLYGON_AMOY),blockExplorer:{name:"OKLink (Amoy)",url:"https://www.oklink.com/amoy/"},nativeCurrency:{symbol:"aPOL",name:"Amoy POL",decimals:18},contracts:{multicall3:Qn}},{chainId:je.POLYGON_ZKEVM,type:dn.MAINNET,name:"polygon-zkevm",title:"Polygon zkEVM",rpcUrl:kn("polygon-zkevm"),logoUrl:Pn(je.POLYGON_ZKEVM),blockExplorer:{name:"Polygonscan (zkEVM)",url:"https://zkevm.polygonscan.com/"},nativeCurrency:{symbol:"ETH",name:"Ether",decimals:18},contracts:{multicall3:Qn}},{chainId:je.BSC,type:dn.MAINNET,name:"bsc",title:"BNB Smart Chain",rpcUrl:kn("bsc"),logoUrl:Pn(je.BSC),blockExplorer:{name:"BSCScan",url:"https://bscscan.com/"},nativeCurrency:{symbol:"BNB",name:"BNB",decimals:18},contracts:{multicall3:Qn}},{chainId:je.BSC_TESTNET,type:dn.TESTNET,name:"bsc-testnet",title:"BNB Smart Chain Testnet",rpcUrl:kn("bsc-testnet"),logoUrl:Pn(je.BSC_TESTNET),blockExplorer:{name:"BSCScan (Testnet)",url:"https://testnet.bscscan.com/"},nativeCurrency:{symbol:"tBNB",name:"Testnet BNB",decimals:18},contracts:{multicall3:Qn}},{chainId:je.OPTIMISM,type:dn.MAINNET,name:"optimism",title:"Optimism",rpcUrl:kn("optimism"),logoUrl:Pn(je.OPTIMISM),blockExplorer:{name:"Etherscan (Optimism)",url:"https://optimistic.etherscan.io/"},nativeCurrency:{symbol:"ETH",name:"Ether",decimals:18},contracts:{multicall3:Qn}},{chainId:je.OPTIMISM_SEPOLIA,type:dn.TESTNET,name:"optimism-sepolia",title:"Optimism Sepolia",rpcUrl:kn("optimism-sepolia"),logoUrl:Pn(je.OPTIMISM_SEPOLIA),blockExplorer:{name:"Etherscan (Optimism Sepolia)",url:"https://sepolia-optimistic.etherscan.io/"},nativeCurrency:{symbol:"sETH",name:"Sepolia Ether",decimals:18},contracts:{multicall3:Qn}},{chainId:je.ARBITRUM,type:dn.MAINNET,name:"arbitrum",title:"Arbitrum One",rpcUrl:kn("arbitrum"),logoUrl:Pn(je.ARBITRUM),blockExplorer:{name:"Arbiscan",url:"https://arbiscan.io/"},nativeCurrency:{symbol:"ETH",name:"Ether",decimals:18},contracts:{multicall3:Qn}},{chainId:je.ARBITRUM_SEPOLIA,type:dn.TESTNET,name:"arbitrum-sepolia",title:"Arbitrum Sepolia",rpcUrl:kn("arbitrum-sepolia"),logoUrl:Pn(je.ARBITRUM_SEPOLIA),blockExplorer:{name:"Arbiscan (Sepolia Testnet)",url:"https://sepolia.arbiscan.io/"},nativeCurrency:{symbol:"sETH",name:"Sepolia Ether",decimals:18},contracts:{multicall3:Qn}},{chainId:je.ARBITRUM_NOVA,type:dn.MAINNET,name:"arbitrum-nova",title:"Arbitrum Nova",rpcUrl:kn("arbitrum-nova"),logoUrl:Pn(je.ARBITRUM_NOVA),blockExplorer:{name:"Arbiscan Nova",url:"https://nova.arbiscan.io/"},nativeCurrency:{symbol:"ETH",name:"Ether",decimals:18},contracts:{multicall3:Qn}},{chainId:je.AVALANCHE,type:dn.MAINNET,name:"avalanche",title:"Avalanche",rpcUrl:kn("avalanche"),logoUrl:Pn(je.AVALANCHE),blockExplorer:{name:"Snowtrace",url:"https://subnets.avax.network/c-chain/"},nativeCurrency:{symbol:"AVAX",name:"AVAX",decimals:18},contracts:{multicall3:Qn}},{chainId:je.AVALANCHE_TESTNET,type:dn.TESTNET,name:"avalanche-testnet",title:"Avalanche Testnet",rpcUrl:kn("avalanche-testnet"),logoUrl:Pn(je.AVALANCHE_TESTNET),blockExplorer:{name:"Snowtrace (Testnet)",url:"https://subnets-test.avax.network/c-chain/"},nativeCurrency:{symbol:"tAVAX",name:"Testnet AVAX",decimals:18},contracts:{multicall3:Qn}},{chainId:je.GNOSIS,type:dn.MAINNET,name:"gnosis",title:"Gnosis Chain",rpcUrl:kn("gnosis"),logoUrl:Pn(je.GNOSIS),blockExplorer:{name:"Gnosis Chain Explorer",url:"https://blockscout.com/xdai/mainnet/"},nativeCurrency:{symbol:"XDAI",name:"XDAI",decimals:18},contracts:{multicall3:Qn}},{chainId:je.BASE,type:dn.MAINNET,name:"base",title:"Base (Coinbase)",rpcUrl:kn("base"),logoUrl:Pn(je.BASE),blockExplorer:{name:"Base Explorer",url:"https://basescan.org/"},nativeCurrency:{symbol:"ETH",name:"Ether",decimals:18},contracts:{multicall3:Qn}},{chainId:je.BASE_SEPOLIA,type:dn.TESTNET,name:"base-sepolia",title:"Base Sepolia",rpcUrl:kn("base-sepolia"),logoUrl:Pn(je.BASE_SEPOLIA),blockExplorer:{name:"Base Sepolia Explorer",url:"https://base-sepolia.blockscout.com/"},nativeCurrency:{symbol:"sETH",name:"Sepolia Ether",decimals:18},contracts:{multicall3:Qn}},{chainId:je.HOMEVERSE,type:dn.MAINNET,name:"homeverse",title:"Oasys Homeverse",rpcUrl:kn("homeverse"),logoUrl:Pn(je.HOMEVERSE),blockExplorer:{name:"Oasys Homeverse Explorer",url:"https://explorer.oasys.homeverse.games/"},nativeCurrency:{symbol:"OAS",name:"OAS",decimals:18},contracts:{multicall3:Qn}},{chainId:je.HOMEVERSE_TESTNET,type:dn.TESTNET,name:"homeverse-testnet",title:"Oasys Homeverse Testnet",rpcUrl:kn("homeverse-testnet"),logoUrl:Pn(je.HOMEVERSE_TESTNET),blockExplorer:{name:"Oasys Homeverse Explorer (Testnet)",url:"https://explorer.testnet.oasys.homeverse.games/"},nativeCurrency:{symbol:"tOAS",name:"Testnet OAS",decimals:18},contracts:{multicall3:S8}},{chainId:je.XAI,type:dn.MAINNET,name:"xai",title:"Xai",rpcUrl:kn("xai"),logoUrl:Pn(je.XAI),blockExplorer:{name:"Xai Explorer",url:"https://explorer.xai-chain.net/"},nativeCurrency:{symbol:"XAI",name:"XAI",decimals:18},contracts:{multicall3:Qn}},{chainId:je.XAI_SEPOLIA,type:dn.TESTNET,name:"xai-sepolia",title:"Xai Sepolia",rpcUrl:kn("xai-sepolia"),logoUrl:Pn(je.XAI_SEPOLIA),blockExplorer:{name:"Xai Sepolia Explorer",url:"https://testnet-explorer-v2.xai-chain.net/"},nativeCurrency:{symbol:"sXAI",name:"Sepolia XAI",decimals:18},contracts:{multicall3:S8}},{chainId:je.B3,type:dn.MAINNET,name:"b3",title:"B3",rpcUrl:kn("b3"),logoUrl:Pn(je.B3),blockExplorer:{name:"B3 Explorer",url:"https://explorer.b3.fun/"},nativeCurrency:{symbol:"ETH",name:"Ether",decimals:18},contracts:{multicall3:Qn}},{chainId:je.B3_SEPOLIA,type:dn.TESTNET,name:"b3-sepolia",title:"B3 Sepolia",rpcUrl:kn("b3-sepolia"),logoUrl:Pn(je.B3_SEPOLIA),blockExplorer:{name:"B3 Sepolia Explorer",url:"https://sepolia.explorer.b3.fun/"},nativeCurrency:{symbol:"ETH",name:"Ether",decimals:18},contracts:{multicall3:Qn}},{chainId:je.APECHAIN,type:dn.MAINNET,name:"apechain",title:"APE Chain",rpcUrl:kn("apechain"),logoUrl:Pn(je.APECHAIN),blockExplorer:{name:"APE Chain Explorer",url:"https://apechain.calderaexplorer.xyz/"},nativeCurrency:{symbol:"APE",name:"ApeCoin",decimals:18},contracts:{multicall3:Qn}},{chainId:je.APECHAIN_TESTNET,type:dn.TESTNET,name:"apechain-testnet",title:"APE Chain Testnet",rpcUrl:kn("apechain-testnet"),logoUrl:Pn(je.APECHAIN_TESTNET),blockExplorer:{name:"APE Chain Explorer",url:"https://curtis.explorer.caldera.xyz/"},nativeCurrency:{symbol:"APE",name:"ApeCoin",decimals:18},contracts:{multicall3:Qn}},{chainId:je.BLAST,type:dn.MAINNET,name:"blast",title:"Blast",rpcUrl:kn("blast"),logoUrl:Pn(je.BLAST),blockExplorer:{name:"Blast Explorer",url:"https://blastscan.io/"},nativeCurrency:{symbol:"ETH",name:"Ether",decimals:18},contracts:{multicall3:Qn}},{chainId:je.BLAST_SEPOLIA,type:dn.TESTNET,name:"blast-sepolia",title:"Blast Sepolia",rpcUrl:kn("blast-sepolia"),logoUrl:Pn(je.BLAST_SEPOLIA),blockExplorer:{name:"Blast Sepolia Explorer",url:"https://sepolia.blastexplorer.io/"},nativeCurrency:{symbol:"ETH",name:"Ether",decimals:18},contracts:{multicall3:Qn}},{chainId:je.TELOS,type:dn.MAINNET,name:"telos",title:"Telos",rpcUrl:kn("telos"),logoUrl:Pn(je.TELOS),blockExplorer:{name:"Telos Explorer",url:"https://explorer.telos.net/network/"},nativeCurrency:{symbol:"TLOS",name:"TLOS",decimals:18},contracts:{multicall3:Qn}},{chainId:je.TELOS_TESTNET,type:dn.TESTNET,name:"telos-testnet",title:"Telos Testnet",rpcUrl:kn("telos-testnet"),logoUrl:Pn(je.TELOS_TESTNET),blockExplorer:{name:"Telos Testnet Explorer",url:"https://explorer-test.telos.net/network"},nativeCurrency:{symbol:"TLOS",name:"TLOS",decimals:18},contracts:{multicall3:S8}},{chainId:je.SKALE_NEBULA,type:dn.MAINNET,name:"skale-nebula",title:"SKALE Nebula Gaming Hub",rpcUrl:kn("skale-nebula"),logoUrl:Pn(je.SKALE_NEBULA),blockExplorer:{name:"SKALE Nebula Gaming Hub Explorer",url:"https://green-giddy-denebola.explorer.mainnet.skalenodes.com/"},nativeCurrency:{symbol:"sFUEL",name:"SKALE Fuel",decimals:18},contracts:{multicall3:Qn}},{chainId:je.SKALE_NEBULA_TESTNET,type:dn.TESTNET,name:"skale-nebula-testnet",title:"SKALE Nebula Gaming Hub Testnet",rpcUrl:kn("skale-nebula-testnet"),logoUrl:Pn(je.SKALE_NEBULA_TESTNET),blockExplorer:{name:"SKALE Nebula Gaming Hub Testnet Explorer",url:"https://lanky-ill-funny-testnet.explorer.testnet.skalenodes.com/"},nativeCurrency:{symbol:"sFUEL",name:"SKALE Fuel",decimals:18},contracts:{multicall3:Qn}},{chainId:je.SONEIUM,type:dn.MAINNET,name:"soneium",title:"Soneium",rpcUrl:kn("soneium"),logoUrl:Pn(je.SONEIUM),blockExplorer:{name:"Soneium Explorer",url:"https://soneium.blockscout.com/"},nativeCurrency:{symbol:"ETH",name:"Ether",decimals:18},contracts:{multicall3:Qn}},{chainId:je.SONEIUM_MINATO,type:dn.TESTNET,name:"soneium-minato",title:"Soneium Minato (Testnet)",rpcUrl:kn("soneium-minato"),logoUrl:Pn(je.SONEIUM_MINATO),blockExplorer:{name:"Soneium Minato Explorer",url:"https://explorer-testnet.soneium.org/"},nativeCurrency:{symbol:"ETH",name:"Ether",decimals:18},contracts:{multicall3:Qn}},{chainId:je.TOY_TESTNET,type:dn.TESTNET,name:"toy-testnet",title:"TOY (Testnet)",rpcUrl:kn("toy-testnet"),logoUrl:Pn(je.TOY_TESTNET),blockExplorer:{name:"TOY Testnet Explorer",url:"https://toy-chain-testnet.explorer.caldera.xyz/"},nativeCurrency:{symbol:"TOY",name:"TOY",decimals:18},contracts:{multicall3:Qn}},{chainId:je.IMMUTABLE_ZKEVM,type:dn.MAINNET,name:"immutable-zkevm",title:"Immutable zkEVM",rpcUrl:kn("immutable-zkevm"),logoUrl:Pn(je.IMMUTABLE_ZKEVM),blockExplorer:{name:"Immutable zkEVM Explorer",url:"https://explorer.immutable.com/"},nativeCurrency:{symbol:"IMX",name:"IMX",decimals:18},contracts:{multicall3:Qn}},{chainId:je.IMMUTABLE_ZKEVM_TESTNET,type:dn.TESTNET,name:"immutable-zkevm-testnet",title:"Immutable zkEVM Testnet",rpcUrl:kn("immutable-zkevm-testnet"),logoUrl:Pn(je.IMMUTABLE_ZKEVM_TESTNET),blockExplorer:{name:"Immutable zkEVM Testnet Explorer",url:"https://explorer.testnet.immutable.com/"},nativeCurrency:{symbol:"IMX",name:"IMX",decimals:18},contracts:{multicall3:Qn}},{chainId:je.MOONBEAM,type:dn.MAINNET,name:"moonbeam",title:"Moonbeam",rpcUrl:kn("moonbeam"),logoUrl:Pn(je.MOONBEAM),blockExplorer:{name:"Moonscan",url:"https://moonscan.io/"},nativeCurrency:{symbol:"GLMR",name:"GLMR",decimals:18},contracts:{multicall3:Qn}},{chainId:je.MOONBASE_ALPHA,type:dn.TESTNET,name:"moonbase-alpha",title:"Moonbase Alpha",rpcUrl:kn("moonbase-alpha"),logoUrl:Pn(je.MOONBASE_ALPHA),blockExplorer:{name:"Moonscan (Moonbase Alpha)",url:"https://moonbase.moonscan.io/"},nativeCurrency:{symbol:"GLMR",name:"GLMR",decimals:18},contracts:{multicall3:Qn}},{chainId:je.ETHERLINK,type:dn.MAINNET,name:"etherlink",title:"Etherlink",rpcUrl:kn("etherlink"),logoUrl:Pn(je.ETHERLINK),blockExplorer:{name:"Etherlink Explorer",url:"https://explorer.etherlink.com/"},nativeCurrency:{symbol:"XTZ",name:"Tez",decimals:18},contracts:{multicall3:Qn}},{chainId:je.ETHERLINK_SHADOWNET_TESTNET,type:dn.TESTNET,name:"etherlink-shadownet-testnet",title:"Etherlink Shadownet Testnet",rpcUrl:kn("etherlink-shadownet-testnet"),logoUrl:Pn(je.ETHERLINK_SHADOWNET_TESTNET),blockExplorer:{name:"Etherlink Shadownet Testnet Explorer",url:"https://shadownet.explorer.etherlink.com/"},nativeCurrency:{symbol:"XTZ",name:"Tez",decimals:18},contracts:{multicall3:Qn}},{chainId:je.MONAD,type:dn.MAINNET,name:"monad",title:"Monad",rpcUrl:kn("monad"),logoUrl:Pn(je.MONAD),blockExplorer:{name:"Monad Explorer",url:"https://mainnet-beta.monvision.io/"},nativeCurrency:{symbol:"MON",name:"MON",decimals:18},contracts:{multicall3:Qn}},{chainId:je.MONAD_TESTNET,type:dn.TESTNET,name:"monad-testnet",title:"Monad Testnet",rpcUrl:kn("monad-testnet"),logoUrl:Pn(je.MONAD_TESTNET),blockExplorer:{name:"Monad Testnet Explorer",url:"https://testnet.monadexplorer.com/"},nativeCurrency:{symbol:"MON",name:"MON",decimals:18},contracts:{multicall3:Qn}},{chainId:je.SOMNIA,type:dn.MAINNET,name:"somnia",title:"Somnia",rpcUrl:kn("somnia"),logoUrl:Pn(je.SOMNIA),blockExplorer:{name:"Somnia Explorer",url:"https://mainnet.somnia.w3us.site/"},nativeCurrency:{symbol:"SOMI",name:"SOMI",decimals:18},contracts:{multicall3:S8}},{chainId:je.SOMNIA_TESTNET,type:dn.TESTNET,name:"somnia-testnet",title:"Somnia Testnet",rpcUrl:kn("somnia-testnet"),logoUrl:Pn(je.SOMNIA_TESTNET),blockExplorer:{name:"Somnia Testnet Explorer",url:"https://somnia-testnet.socialscan.io/"},nativeCurrency:{symbol:"STT",name:"STT",decimals:18},contracts:{multicall3:S8}},{chainId:je.INCENTIV_TESTNET_V2,type:dn.TESTNET,name:"incentiv-testnet-v2",title:"Incentiv Testnet",rpcUrl:kn("incentiv-testnet-v2"),logoUrl:Pn(je.INCENTIV_TESTNET_V2),blockExplorer:{name:"Incentiv Testnet Explorer",url:"https://explorer.testnet.incentiv.net/"},nativeCurrency:{symbol:"TCENT",name:"TCENT",decimals:18},contracts:{multicall3:Qn}},{chainId:je.KATANA,type:dn.MAINNET,name:"katana",title:"Katana",rpcUrl:kn("katana"),logoUrl:Pn(je.KATANA),blockExplorer:{name:"Katana Explorer",url:"https://katanascan.com/"},nativeCurrency:{symbol:"ETH",name:"ETH",decimals:18},contracts:{multicall3:Qn}},{chainId:je.SANDBOX_TESTNET,type:dn.TESTNET,name:"sandbox-testnet",title:"Sandbox Testnet",rpcUrl:kn("sandbox-testnet"),logoUrl:Pn(je.SANDBOX_TESTNET),blockExplorer:{name:"Sandbox Testnet Explorer",url:"https://sandbox-testnet.explorer.caldera.xyz/"},nativeCurrency:{symbol:"SAND",name:"SAND",decimals:18},contracts:{multicall3:Qn}},{chainId:je.ARC_TESTNET,type:dn.TESTNET,name:"arc-testnet",title:"Arc Testnet",rpcUrl:kn("arc-testnet"),logoUrl:Pn(je.ARC_TESTNET),blockExplorer:{name:"Arc Testnet Explorer",url:"https://1jr2dw1zdqvyes8u.blockscout.com/"},nativeCurrency:{symbol:"USDC",name:"USDC",decimals:6},contracts:{multicall3:Qn}},{chainId:je.HYPEREVM,type:dn.MAINNET,name:"hyperevm",title:"HyperEVM",rpcUrl:kn("hyperevm"),logoUrl:Pn(je.HYPEREVM),blockExplorer:{name:"HyperEVM Explorer",url:"https://www.hyperscan.com/"},nativeCurrency:{symbol:"HYPE",name:"HYPE",decimals:18}},{chainId:je.BERACHAIN,type:dn.MAINNET,name:"berachain",title:"Berachain",rpcUrl:kn("berachain"),logoUrl:Pn(je.BERACHAIN),blockExplorer:{name:"Berachain Explorer",url:"https://berascan.com/"},nativeCurrency:{symbol:"BEAR",name:"BEAR",decimals:18}},{chainId:je.SONIC,type:dn.MAINNET,name:"sonic",title:"Sonic",rpcUrl:kn("sonic"),logoUrl:Pn(je.SONIC),blockExplorer:{name:"Sonic Explorer",url:"https://sonicscan.com/"},nativeCurrency:{symbol:"S",name:"Sonic",decimals:18}}];function kn(t){return`https://nodes.sequence.app/${t}`}function Pn(t){return`https://assets.sequence.info/images/networks/medium/${t}.webp`}function y4(t){return lEe.find(e=>e.chainId===Number(t))}function cM(t){return typeof t=="object"&&"address"in t&&"signature"in t&&!("imageHash"in t)}function y5(t){return typeof t=="object"&&"signature"in t&&"imageHash"in t}function uEe(t,e){if(To(e))return t.signatures.find(n=>cM(n)&&Mn(n.address,e.address));if(za(e))return t.signatures.find(n=>y5(n)&&n.imageHash===e.imageHash&&Mn(n.signature.address,e.address))}function Ww(t){const{maxWeight:e}=B3(t.configuration,n=>!!uEe(t,n));return{weight:e,threshold:t.configuration.threshold}}function fEe(t){const{weight:e,threshold:n}=Ww(t);return e>=n}function nO(t){const e=ZT(t.configuration.topology,n=>{var r;return(r=uEe(t,n))==null?void 0:r.signature});return{noChainId:t.chainId===0,configuration:{...t.configuration,topology:e}}}function fnt(t,e=[]){return{...t,signatures:e}}function dnt(t,e,n){if(y5(e)){const r=t.signatures.find(s=>y5(s)&&Mn(s.signature.address,e.signature.address)&&s.imageHash===e.imageHash);if(r){if(r.signature.data===e.signature.data)return;throw new Error("Signature already defined for signer")}t.signatures.push(e)}else if(cM(e)){const r=t.signatures.find(s=>cM(s)&&Mn(s.address,e.address));if(r){if(r.signature.type==="erc1271"&&e.signature.type==="erc1271"){if(r.signature.data===e.signature.data)return}else if(r.signature.type!=="erc1271"&&e.signature.type!=="erc1271"&&r.signature.r===e.signature.r&&r.signature.s===e.signature.s)return;throw new Error("Signature already defined for signer")}t.signatures.push(e)}else throw new Error("Unsupported signature type")}function eU(t){return typeof t=="object"&&"signatures"in t}class hnt{constructor(){q(this,"configs",new Map);q(this,"counterfactualWallets",new Map);q(this,"payloads",new Map);q(this,"signerSubdigests",new Map);q(this,"signatures",new Map);q(this,"sapientSignerSubdigests",new Map);q(this,"sapientSignatures",new Map);q(this,"trees",new Map)}deepCopy(e){if(typeof structuredClone=="function")return structuredClone(e);if(e===null||typeof e!="object")return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return e.map(r=>this.deepCopy(r));if(e instanceof Map)return new Map(Array.from(e,([r,s])=>[this.deepCopy(r),this.deepCopy(s)]));if(e instanceof Set)return new Set(Array.from(e,r=>this.deepCopy(r)));const n={};for(const[r,s]of Object.entries(e))n[r]=this.deepCopy(s);return n}getSignatureKey(e,n){return`${e.toLowerCase()}-${n.toLowerCase()}`}getSapientSignatureKey(e,n,r){return`${e.toLowerCase()}-${r.toLowerCase()}-${n.toLowerCase()}`}async loadConfig(e){const n=this.configs.get(e.toLowerCase());return n?this.deepCopy(n):void 0}async saveConfig(e,n){this.configs.set(e.toLowerCase(),this.deepCopy(n))}async loadCounterfactualWallet(e){const n=this.counterfactualWallets.get(e.toLowerCase());return n?this.deepCopy(n):void 0}async saveCounterfactualWallet(e,n,r){this.counterfactualWallets.set(e.toLowerCase(),this.deepCopy({imageHash:n,context:r}))}async loadPayloadOfSubdigest(e){const n=this.payloads.get(e.toLowerCase());return n?this.deepCopy(n):void 0}async savePayloadOfSubdigest(e,n){this.payloads.set(e.toLowerCase(),this.deepCopy(n))}async loadSubdigestsOfSigner(e){const n=this.signerSubdigests.get(e.toLowerCase());return n?Array.from(n).map(r=>r):[]}async loadSignatureOfSubdigest(e,n){const r=this.getSignatureKey(e,n),s=this.signatures.get(r);return s?this.deepCopy(s):void 0}async saveSignatureOfSubdigest(e,n,r){const s=this.getSignatureKey(e,n);this.signatures.set(s,this.deepCopy(r));const i=e.toLowerCase(),a=n.toLowerCase();this.signerSubdigests.has(i)||this.signerSubdigests.set(i,new Set),this.signerSubdigests.get(i).add(a)}async loadSubdigestsOfSapientSigner(e,n){const r=`${e.toLowerCase()}-${n.toLowerCase()}`,s=this.sapientSignerSubdigests.get(r);return s?Array.from(s).map(i=>i):[]}async loadSapientSignatureOfSubdigest(e,n,r){const s=this.getSapientSignatureKey(e,n,r),i=this.sapientSignatures.get(s);return i?this.deepCopy(i):void 0}async saveSapientSignatureOfSubdigest(e,n,r,s){const i=this.getSapientSignatureKey(e,n,r);this.sapientSignatures.set(i,this.deepCopy(s));const a=`${e.toLowerCase()}-${r.toLowerCase()}`,o=n.toLowerCase();this.sapientSignerSubdigests.has(a)||this.sapientSignerSubdigests.set(a,new Set),this.sapientSignerSubdigests.get(a).add(o)}async loadTree(e){const n=this.trees.get(e.toLowerCase());return n?this.deepCopy(n):void 0}async saveTree(e,n){this.trees.set(e.toLowerCase(),this.deepCopy(n))}}function Nj(t){if(!t||typeof t!="object")return!1;const e=t;return typeof e.getItem=="function"&&typeof e.setItem=="function"&&typeof e.removeItem=="function"}function CX(t){const e=globalThis,n=typeof window<"u"?window:e.window??{};let r,s;if(Nj(t==null?void 0:t.storage)?r=t.storage:Nj(n.localStorage)?r=n.localStorage:Nj(e.localStorage)&&(r=e.localStorage),t!=null&&t.text){if(!t.text.TextEncoder||!t.text.TextDecoder)throw new Error("env.text must provide both TextEncoder and TextDecoder");s=t.text}else s={TextEncoder:n.TextEncoder??e.TextEncoder,TextDecoder:n.TextDecoder??e.TextDecoder};return{fetch:(t==null?void 0:t.fetch)??n.fetch??e.fetch,crypto:(t==null?void 0:t.crypto)??n.crypto??e.crypto,storage:r,indexedDB:(t==null?void 0:t.indexedDB)??n.indexedDB??e.indexedDB,text:s}}class dEe{constructor(e="e_pk_key_",n="e_pk",r){q(this,"localStorageKeyPrefix");q(this,"env");q(this,"tableName");q(this,"dbName","pk-db");q(this,"dbVersion",1);this.localStorageKeyPrefix=e,this.env=r,this.tableName=n}computeDbKey(e){return`pk_${e.toLowerCase()}`}getIndexedDB(){var r,s;const e=globalThis,n=((r=this.env)==null?void 0:r.indexedDB)??e.indexedDB??((s=e.window)==null?void 0:s.indexedDB);if(!n)throw new Error("indexedDB is not available");return n}getStorage(){const e=CX(this.env).storage;if(!e)throw new Error("storage is not available");return e}getCrypto(){var r,s;const e=globalThis,n=((r=this.env)==null?void 0:r.crypto)??e.crypto??((s=e.window)==null?void 0:s.crypto);if(!(n!=null&&n.subtle)||!(n!=null&&n.getRandomValues))throw new Error("crypto.subtle is not available");return n}getTextEncoderCtor(){var r,s,i,a;const e=globalThis;if((r=this.env)!=null&&r.text&&(!this.env.text.TextEncoder||!this.env.text.TextDecoder))throw new Error("env.text must provide both TextEncoder and TextDecoder");const n=((i=(s=this.env)==null?void 0:s.text)==null?void 0:i.TextEncoder)??e.TextEncoder??((a=e.window)==null?void 0:a.TextEncoder);if(!n)throw new Error("TextEncoder is not available");return n}getTextDecoderCtor(){var r,s,i,a;const e=globalThis;if((r=this.env)!=null&&r.text&&(!this.env.text.TextEncoder||!this.env.text.TextDecoder))throw new Error("env.text must provide both TextEncoder and TextDecoder");const n=((i=(s=this.env)==null?void 0:s.text)==null?void 0:i.TextDecoder)??e.TextDecoder??((a=e.window)==null?void 0:a.TextDecoder);if(!n)throw new Error("TextDecoder is not available");return n}openDB(){return new Promise((e,n)=>{const r=this.getIndexedDB().open(this.dbName,this.dbVersion);r.onupgradeneeded=()=>{const s=r.result;s.objectStoreNames.contains(this.tableName)||s.createObjectStore(this.tableName)},r.onsuccess=()=>e(r.result),r.onerror=()=>n(r.error)})}async putData(e,n){const r=await this.openDB();return new Promise((s,i)=>{const c=r.transaction(this.tableName,"readwrite").objectStore(this.tableName).put(n,e);c.onsuccess=()=>s(),c.onerror=()=>i(c.error)})}async getData(e){const n=await this.openDB();return new Promise((r,s)=>{const o=n.transaction(this.tableName,"readonly").objectStore(this.tableName).get(e);o.onsuccess=()=>r(o.result),o.onerror=()=>s(o.error)})}async getAllData(){const e=await this.openDB();return new Promise((n,r)=>{const a=e.transaction(this.tableName,"readonly").objectStore(this.tableName).getAll();a.onsuccess=()=>n(a.result),a.onerror=()=>r(a.error)})}async generateAndStore(){const e=this.getCrypto(),n=this.getStorage(),r=this.getTextEncoderCtor(),s=await e.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),i=lxe(32),a=dX({privateKey:i}),o=XZ(a),c=this.localStorageKeyPrefix+o,l=await e.subtle.exportKey("jwk",s);n.setItem(c,JSON.stringify(l));const f=new r().encode(i),d=e.getRandomValues(new Uint8Array(12)),p=await e.subtle.encrypt({name:"AES-GCM",iv:d},s,f),g={iv:d,data:p,keyPointer:c,address:o,publicKey:a},m=this.computeDbKey(o);return await this.putData(m,g),g}async getEncryptedEntry(e){const n=this.computeDbKey(e);return this.getData(n)}async getEncryptedPkStore(e){const n=await this.getEncryptedEntry(e);if(n)return new pnt(n,this.env)}async listAddresses(){return(await this.getAllData()).map(n=>n.address)}async remove(e){const n=this.computeDbKey(e);await this.putData(n,void 0);const r=this.localStorageKeyPrefix+e;this.getStorage().removeItem(r)}}class pnt{constructor(e,n){q(this,"encrypted");q(this,"env");this.encrypted=e,this.env=n}getStorage(){const e=CX(this.env).storage;if(!e)throw new Error("storage is not available");return e}getCrypto(){var r,s;const e=globalThis,n=((r=this.env)==null?void 0:r.crypto)??e.crypto??((s=e.window)==null?void 0:s.crypto);if(!(n!=null&&n.subtle))throw new Error("crypto.subtle is not available");return n}getTextDecoderCtor(){var r,s,i;const e=globalThis,n=((s=(r=this.env)==null?void 0:r.text)==null?void 0:s.TextDecoder)??e.TextDecoder??((i=e.window)==null?void 0:i.TextDecoder);if(!n)throw new Error("TextDecoder is not available");return n}address(){return this.encrypted.address}publicKey(){return this.encrypted.publicKey}async signDigest(e){const n=this.getStorage(),r=this.getCrypto(),s=this.getTextDecoderCtor(),i=n.getItem(this.encrypted.keyPointer);if(!i)throw new Error("Encryption key not found in localStorage");const a=JSON.parse(i),o=await r.subtle.importKey("jwk",a,{name:"AES-GCM"},!1,["decrypt"]),c=await r.subtle.decrypt({name:"AES-GCM",iv:this.encrypted.iv},o,this.encrypted.data),u=new s().decode(c);return f2e({payload:e,privateKey:u})}}class gnt{constructor(e){q(this,"privateKey");this.privateKey=e}address(){return XZ(this.publicKey())}publicKey(){return dX({privateKey:this.privateKey})}signDigest(e){return Promise.resolve(f2e({payload:e,privateKey:this.privateKey}))}}class MW{constructor(e){q(this,"privateKey");q(this,"address");q(this,"pubKey");this.privateKey=typeof e=="string"?new gnt(e):e,this.pubKey=this.privateKey.publicKey(),this.address=this.privateKey.address()}async sign(e,n,r){const s=Fd(e,n,r);return this.signDigest(s)}async signDigest(e){return{...await this.privateKey.signDigest(e),type:"hash"}}async witness(e,n,r){const s=YL(Il(JSON.stringify({action:"consent-to-be-part-of-wallet",wallet:n,signer:this.address,timestamp:Date.now(),...r}))),i=await this.sign(n,0,s);await e.saveWitnesses(n,0,s,{type:"unrecovered-signer",weight:1n,signature:i})}}function mnt(t){return typeof t=="object"&&t!==null&&"action"in t&&t.action==="consent-to-be-part-of-wallet"}class hg{constructor(e){q(this,"credentialId");q(this,"publicKey");q(this,"address");q(this,"imageHash");q(this,"embedMetadata");q(this,"metadata");q(this,"webauthn");this.address=e.extensions.passkeys,this.publicKey=e.publicKey,this.credentialId=e.credentialId,this.embedMetadata=e.embedMetadata??!1,this.imageHash=bd(e.publicKey),this.metadata=e.metadata,this.webauthn=e.webauthn??Cj}static async loadFromWitness(e,n,r,s,i){const a=await e.getWitnessForSapient(r,n.passkeys,s);if(!a)throw new Error("Witness for wallet not found");const o=a.payload;if(!uk(o))throw new Error("Witness payload is not a message");const c=JSON.parse(uxe(o.message));if(!mnt(c))throw new Error("Witness payload is not a witness message");const l=c.publicKey.metadata||c.metadata;if(typeof l=="string"||!l)throw new Error("Metadata does not contain credential id");const u=SX(Lt(a.signature.data));return new hg({credentialId:l.credentialId,extensions:n,publicKey:c.publicKey,embedMetadata:u.embedMetadata,metadata:l,webauthn:i==null?void 0:i.webauthn})}static async create(e,n){const r=(n==null?void 0:n.webauthn)??Cj,s=(n==null?void 0:n.credentialName)??`Sequence (${Date.now()})`,i=await r.createCredential({user:{name:s}}),a=Gn(i.publicKey.x),o=Gn(i.publicKey.y),c={credentialId:i.id},l=new hg({credentialId:i.id,extensions:e,publicKey:{requireUserVerification:(n==null?void 0:n.requireUserVerification)??!0,x:a,y:o,metadata:n!=null&&n.embedMetadata?c:void 0},embedMetadata:n==null?void 0:n.embedMetadata,metadata:c,webauthn:r});return n!=null&&n.stateProvider&&await n.stateProvider.saveTree(aEe(l.publicKey)),l}static async find(e,n,r){const i=await((r==null?void 0:r.webauthn)??Cj).sign({challenge:lxe(32)});if(!i.raw)throw new Error("No credential returned");const a=Lt(i.metadata.authenticatorData),o=YN(vi(i.metadata.clientDataJSON),{as:"Bytes"}),c=Dt(a,o),l=YN(c,{as:"Bytes"}),u=Ace({payload:l,signature:{r:BigInt(i.signature.r),s:BigInt(i.signature.s),yParity:0}}),f=Ace({payload:l,signature:{r:BigInt(i.signature.r),s:BigInt(i.signature.s),yParity:1}}),d={x:Gn(u.x),y:Gn(u.y)},p={x:Gn(f.x),y:Gn(f.y)},g={credentialId:i.raw.id},m=[bd({...d,requireUserVerification:!0}),bd({...d,requireUserVerification:!1}),bd({...d,requireUserVerification:!0,metadata:g}),bd({...d,requireUserVerification:!1,metadata:g}),bd({...p,requireUserVerification:!0}),bd({...p,requireUserVerification:!1}),bd({...p,requireUserVerification:!0,metadata:g}),bd({...p,requireUserVerification:!1,metadata:g})],A=(await Promise.all(m.map(async S=>{const I=await e.getWalletsForSapient(n.passkeys,S);return Object.keys(I).map(B=>({wallet:Yi(B),imageHash:S}))}))).flat().filter((S,I,B)=>B.findIndex(D=>Mn(D.wallet,S.wallet)&&D.imageHash===S.imageHash)===I);if(A.length!==0)return A.length>1&&console.warn("Multiple signers found for passkey",A),hg.loadFromWitness(e,n,A[0].wallet,A[0].imageHash,r)}async signSapient(e,n,r,s){if(this.imageHash!==s)throw new Error("Unexpected image hash");const i=Un(Fd(e,n,r)),a=await this.webauthn.sign({challenge:i,credentialId:this.credentialId,userVerification:this.publicKey.requireUserVerification?"required":"discouraged"}),o=Lt(a.metadata.authenticatorData),c=Ot(a.signature.r),l=Ot(a.signature.s),u=Ytt({publicKey:this.publicKey,r:c,s:l,authenticatorData:o,clientDataJSON:a.metadata.clientDataJSON,embedMetadata:this.embedMetadata});return{address:this.address,data:mr(u),type:"sapient_compact"}}async witness(e,n,r){const s=YL(Il(JSON.stringify({action:"consent-to-be-part-of-wallet",wallet:n,publicKey:this.publicKey,metadata:this.metadata,timestamp:Date.now(),...r}))),i=await this.signSapient(n,0,s,this.imageHash);await e.saveWitnesses(n,0,s,{type:"unrecovered-signer",weight:1n,signature:i})}}class mk extends Error{constructor(n){super("auth required");q(this,"id");this.id=n,this.name="AuthRequiredError",Object.setPrototypeOf(this,mk.prototype)}}const ynt="Webrpc",wnt="webrpc@v0.25.3;gen-typescript@v0.17.0;sequence-guard@v0.5.0";var s3;(function(t){t.Calls="Calls",t.Message="Message",t.ConfigUpdate="ConfigUpdate",t.SessionImplicitAuthorize="SessionImplicitAuthorize"})(s3||(s3={}));var i3;(function(t){t.Hash="Hash",t.Sapient="Sapient",t.EthSign="EthSign",t.Erc1271="Erc1271"})(i3||(i3={}));let bnt=class{constructor(e,n){q(this,"hostname");q(this,"fetch");q(this,"path","/rpc/Guard/");q(this,"ping",(e,n)=>this.fetch(this.url("Ping"),Ho({},e,n)).then(r=>qo(r).then(s=>({status:s.status})),r=>{throw ao.new({cause:`fetch(): ${r.message||""}`})}));q(this,"version",(e,n)=>this.fetch(this.url("Version"),Ho({},e,n)).then(r=>qo(r).then(s=>({version:s.version})),r=>{throw ao.new({cause:`fetch(): ${r.message||""}`})}));q(this,"runtimeStatus",(e,n)=>this.fetch(this.url("RuntimeStatus"),Ho({},e,n)).then(r=>qo(r).then(s=>({status:s.status})),r=>{throw ao.new({cause:`fetch(): ${r.message||""}`})}));q(this,"getSignerConfig",(e,n,r)=>this.fetch(this.url("GetSignerConfig"),Ho(e,n,r)).then(s=>qo(s).then(i=>({signerConfig:i.signerConfig})),s=>{throw ao.new({cause:`fetch(): ${s.message||""}`})}));q(this,"sign",(e,n,r)=>this.fetch(this.url("Sign"),Ho(e,n,r)).then(s=>qo(s).then(i=>({sig:i.sig})),s=>{throw ao.new({cause:`fetch(): ${s.message||""}`})}));q(this,"signWith",(e,n,r)=>this.fetch(this.url("SignWith"),Ho(e,n,r)).then(s=>qo(s).then(i=>({sig:i.sig})),s=>{throw ao.new({cause:`fetch(): ${s.message||""}`})}));q(this,"patch",(e,n,r)=>this.fetch(this.url("Patch"),Ho(e,n,r)).then(s=>qo(s).then(i=>({txs:i.txs})),s=>{throw ao.new({cause:`fetch(): ${s.message||""}`})}));q(this,"authMethods",(e,n,r)=>this.fetch(this.url("AuthMethods"),Ho(e,n,r)).then(s=>qo(s).then(i=>({methods:i.methods,active:i.active})),s=>{throw ao.new({cause:`fetch(): ${s.message||""}`})}));q(this,"setPIN",(e,n,r)=>this.fetch(this.url("SetPIN"),Ho(e,n,r)).then(s=>qo(s).then(i=>({})),s=>{throw ao.new({cause:`fetch(): ${s.message||""}`})}));q(this,"resetPIN",(e,n,r)=>this.fetch(this.url("ResetPIN"),Ho(e,n,r)).then(s=>qo(s).then(i=>({})),s=>{throw ao.new({cause:`fetch(): ${s.message||""}`})}));q(this,"createTOTP",(e,n,r)=>this.fetch(this.url("CreateTOTP"),Ho(e,n,r)).then(s=>qo(s).then(i=>({uri:i.uri})),s=>{throw ao.new({cause:`fetch(): ${s.message||""}`})}));q(this,"commitTOTP",(e,n,r)=>this.fetch(this.url("CommitTOTP"),Ho(e,n,r)).then(s=>qo(s).then(i=>({codes:i.codes})),s=>{throw ao.new({cause:`fetch(): ${s.message||""}`})}));q(this,"resetTOTP",(e,n,r)=>this.fetch(this.url("ResetTOTP"),Ho(e,n,r)).then(s=>qo(s).then(i=>({})),s=>{throw ao.new({cause:`fetch(): ${s.message||""}`})}));q(this,"reset2FA",(e,n,r)=>this.fetch(this.url("Reset2FA"),Ho(e,n,r)).then(s=>qo(s).then(i=>({})),s=>{throw ao.new({cause:`fetch(): ${s.message||""}`})}));q(this,"recoveryCodes",(e,n,r)=>this.fetch(this.url("RecoveryCodes"),Ho(e,n,r)).then(s=>qo(s).then(i=>({codes:i.codes})),s=>{throw ao.new({cause:`fetch(): ${s.message||""}`})}));q(this,"resetRecoveryCodes",(e,n,r)=>this.fetch(this.url("ResetRecoveryCodes"),Ho(e,n,r)).then(s=>qo(s).then(i=>({codes:i.codes})),s=>{throw ao.new({cause:`fetch(): ${s.message||""}`})}));this.hostname=e.replace(/\/*$/,""),this.fetch=(r,s)=>n(r,s)}url(e){return this.hostname+this.path+e}};const Ho=(t={},e={},n=null)=>{const r={...e,"Content-Type":"application/json"};return r[ynt]=wnt,{method:"POST",headers:r,body:JSON.stringify(t||{}),signal:n}},qo=t=>t.text().then(e=>{let n;try{n=JSON.parse(e)}catch(r){let s="";throw r instanceof Error&&(s=r.message),bEe.new({status:t.status,cause:`JSON.parse(): ${s}: response text: ${e}`})}if(!t.ok){const r=typeof n.code=="number"?n.code:0;throw($nt[r]||Ts).new(n)}return n});let Ts=class hEe extends Error{constructor(n,r,s,i,a){super(s);q(this,"name");q(this,"code");q(this,"message");q(this,"status");q(this,"cause");q(this,"msg");this.name=n||"WebrpcError",this.code=typeof r=="number"?r:0,this.message=s||`endpoint error ${this.code}`,this.msg=this.message,this.status=typeof i=="number"?i:0,this.cause=a,Object.setPrototypeOf(this,hEe.prototype)}static new(n){return new this(n.error,n.code,n.message||n.msg,n.status,n.cause)}},vnt=class pEe extends Ts{constructor(e="WebrpcEndpoint",n=0,r="endpoint error",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,pEe.prototype)}},ao=class gEe extends Ts{constructor(e="WebrpcRequestFailed",n=-1,r="request failed",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,gEe.prototype)}},xnt=class mEe extends Ts{constructor(e="WebrpcBadRoute",n=-2,r="bad route",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,mEe.prototype)}},Ent=class yEe extends Ts{constructor(e="WebrpcBadMethod",n=-3,r="bad method",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,yEe.prototype)}},Ant=class wEe extends Ts{constructor(e="WebrpcBadRequest",n=-4,r="bad request",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,wEe.prototype)}},bEe=class vEe extends Ts{constructor(e="WebrpcBadResponse",n=-5,r="bad response",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,vEe.prototype)}},Snt=class xEe extends Ts{constructor(e="WebrpcServerPanic",n=-6,r="server panic",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,xEe.prototype)}},Int=class EEe extends Ts{constructor(e="WebrpcInternalError",n=-7,r="internal error",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,EEe.prototype)}},Cnt=class AEe extends Ts{constructor(e="WebrpcClientDisconnected",n=-8,r="client disconnected",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,AEe.prototype)}},Tnt=class SEe extends Ts{constructor(e="WebrpcStreamLost",n=-9,r="stream lost",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,SEe.prototype)}},Nnt=class IEe extends Ts{constructor(e="WebrpcStreamFinished",n=-10,r="stream finished",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,IEe.prototype)}},knt=class CEe extends Ts{constructor(e="Unauthorized",n=1e3,r="Unauthorized access",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,CEe.prototype)}},Pnt=class TEe extends Ts{constructor(e="PermissionDenied",n=1001,r="Permission denied",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,TEe.prototype)}},Ont=class NEe extends Ts{constructor(e="SessionExpired",n=1002,r="Session expired",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,NEe.prototype)}},Rnt=class kEe extends Ts{constructor(e="MethodNotFound",n=1003,r="Method not found",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,kEe.prototype)}},_nt=class PEe extends Ts{constructor(e="RequestConflict",n=1004,r="Conflict with target resource",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,PEe.prototype)}},Bnt=class OEe extends Ts{constructor(e="Aborted",n=1005,r="Request aborted",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,OEe.prototype)}},Mnt=class REe extends Ts{constructor(e="Geoblocked",n=1006,r="Geoblocked region",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,REe.prototype)}},Dnt=class _Ee extends Ts{constructor(e="RateLimited",n=1007,r="Rate-limited. Please slow down.",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,_Ee.prototype)}},Lnt=class BEe extends Ts{constructor(e="InvalidArgument",n=2001,r="Invalid argument",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,BEe.prototype)}},Unt=class MEe extends Ts{constructor(e="Unavailable",n=2002,r="Unavailable resource",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,MEe.prototype)}},Fnt=class DEe extends Ts{constructor(e="QueryFailed",n=2003,r="Query failed",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,DEe.prototype)}};class TX extends Ts{constructor(e="ValidationFailed",n=2004,r="Validation Failed",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,TX.prototype)}}let Vnt=class LEe extends Ts{constructor(e="NotFound",n=3e3,r="Resource not found",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,LEe.prototype)}};class tU extends Ts{constructor(e="RequiresTOTP",n=6600,r="TOTP is required",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,tU.prototype)}}class nU extends Ts{constructor(e="RequiresPIN",n=6601,r="PIN is required",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,nU.prototype)}}var Mce;(function(t){t.WebrpcEndpoint="WebrpcEndpoint",t.WebrpcRequestFailed="WebrpcRequestFailed",t.WebrpcBadRoute="WebrpcBadRoute",t.WebrpcBadMethod="WebrpcBadMethod",t.WebrpcBadRequest="WebrpcBadRequest",t.WebrpcBadResponse="WebrpcBadResponse",t.WebrpcServerPanic="WebrpcServerPanic",t.WebrpcInternalError="WebrpcInternalError",t.WebrpcClientDisconnected="WebrpcClientDisconnected",t.WebrpcStreamLost="WebrpcStreamLost",t.WebrpcStreamFinished="WebrpcStreamFinished",t.Unauthorized="Unauthorized",t.PermissionDenied="PermissionDenied",t.SessionExpired="SessionExpired",t.MethodNotFound="MethodNotFound",t.RequestConflict="RequestConflict",t.Aborted="Aborted",t.Geoblocked="Geoblocked",t.RateLimited="RateLimited",t.InvalidArgument="InvalidArgument",t.Unavailable="Unavailable",t.QueryFailed="QueryFailed",t.ValidationFailed="ValidationFailed",t.NotFound="NotFound",t.RequiresTOTP="RequiresTOTP",t.RequiresPIN="RequiresPIN"})(Mce||(Mce={}));var Dce;(function(t){t[t.WebrpcEndpoint=0]="WebrpcEndpoint",t[t.WebrpcRequestFailed=-1]="WebrpcRequestFailed",t[t.WebrpcBadRoute=-2]="WebrpcBadRoute",t[t.WebrpcBadMethod=-3]="WebrpcBadMethod",t[t.WebrpcBadRequest=-4]="WebrpcBadRequest",t[t.WebrpcBadResponse=-5]="WebrpcBadResponse",t[t.WebrpcServerPanic=-6]="WebrpcServerPanic",t[t.WebrpcInternalError=-7]="WebrpcInternalError",t[t.WebrpcClientDisconnected=-8]="WebrpcClientDisconnected",t[t.WebrpcStreamLost=-9]="WebrpcStreamLost",t[t.WebrpcStreamFinished=-10]="WebrpcStreamFinished",t[t.Unauthorized=1e3]="Unauthorized",t[t.PermissionDenied=1001]="PermissionDenied",t[t.SessionExpired=1002]="SessionExpired",t[t.MethodNotFound=1003]="MethodNotFound",t[t.RequestConflict=1004]="RequestConflict",t[t.Aborted=1005]="Aborted",t[t.Geoblocked=1006]="Geoblocked",t[t.RateLimited=1007]="RateLimited",t[t.InvalidArgument=2001]="InvalidArgument",t[t.Unavailable=2002]="Unavailable",t[t.QueryFailed=2003]="QueryFailed",t[t.ValidationFailed=2004]="ValidationFailed",t[t.NotFound=3e3]="NotFound",t[t.RequiresTOTP=6600]="RequiresTOTP",t[t.RequiresPIN=6601]="RequiresPIN"})(Dce||(Dce={}));const $nt={0:vnt,[-1]:ao,[-2]:xnt,[-3]:Ent,[-4]:Ant,[-5]:bEe,[-6]:Snt,[-7]:Int,[-8]:Cnt,[-9]:Tnt,[-10]:Nnt,1e3:knt,1001:Pnt,1002:Ont,1003:Rnt,1004:_nt,1005:Bnt,1006:Mnt,1007:Dnt,2001:Lnt,2002:Unt,2003:Fnt,2004:TX,3e3:Vnt,6600:tU,6601:nU};let jnt=class{constructor(e,n,r){q(this,"guard");q(this,"address");e&&n&&(this.guard=new bnt(e,r??window.fetch)),this.address=n}async signPayload(e,n,r,s,i,a,o){if(!this.guard||!this.address)throw new Error("Guard not initialized");try{const c=await this.guard.signWith({signer:this.address,request:{chainId:n,msg:Un(s),wallet:e,payloadType:r,payloadData:Un(i),signatures:a},token:o});return Mi(c.sig),WL(c.sig)}catch(c){throw c instanceof tU?new mk("TOTP"):c instanceof nU?new mk("PIN"):(console.error(c),new Error("Error signing with guard"))}}};class Hnt{constructor(e){q(this,"guard");q(this,"address");this.guard=e,this.address=this.guard.address}async signEnvelope(e,n){const r={...e.payload,parentWallets:void 0},s=qnt(e.payload),{message:i,digest:a}=Knt(e.wallet,e.chainId,r),o=e.signatures.map(Gnt),c=await this.guard.signPayload(e.wallet,e.chainId,s,a,i,o,n?{id:n.id,token:n.code,resetAuth:n.resetAuth}:void 0);return{address:this.guard.address,signature:{type:"hash",...c}}}}function qnt(t){switch(t.type){case"call":return s3.Calls;case"message":return s3.Message;case"config-update":return s3.ConfigUpdate;case"session-implicit-authorize":return s3.SessionImplicitAuthorize}throw new Error(`Payload type not supported by Guard: ${t.type}`)}function Knt(t,e,n){if(QL(n))return{message:vi(Stt(n.attestation)),digest:xr(Y2e(n.attestation))};const r=wX(t,e,n);return{message:vi(Ret(r)),digest:Lt(I2e(r))}}function Gnt(t){if(y5(t))return{type:i3.Sapient,address:t.signature.address,imageHash:t.imageHash,data:t.signature.data};if(t.signature.type=="erc1271")return{type:i3.Erc1271,address:t.signature.address,data:t.signature.data};const e={eth_sign:i3.EthSign,hash:i3.Hash}[t.signature.type];if(!e)throw new Error(`Signature type not supported by Guard: ${t.signature.type}`);return{type:e,address:t.address,data:tW(t.signature)}}function DW(t){return"signSapient"in t}async function kj(t,e){const n=await Wnt(t,e);return Object.entries(n).map(([r,{chainId:s,payload:i,signature:a}])=>(Mi(r),{wallet:r,chainId:s,payload:i,signature:a}))}async function Wnt(t,e){if(DW(e)){const[n,r]=await Promise.all([e.address,e.imageHash]);return r?t.getWalletsForSapient(n,r):(console.warn("Sapient signer has no imageHash"),{})}else return t.getWallets(await e.address)}function w5(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[Zd(e),n]))}const znt=1,rO="configs",sO="counterfactualWallets",iO="payloads",I8="signerSubdigests",aO="signatures",C8="sapientSignerSubdigests",oO="sapientSignatures",cO="trees";class Jnt{constructor(e="sequence-indexeddb",n){q(this,"env");q(this,"_db",null);q(this,"dbName");this.env=n,this.dbName=e}getIndexedDB(){var r,s;const e=globalThis,n=((r=this.env)==null?void 0:r.indexedDB)??e.indexedDB??((s=e.window)==null?void 0:s.indexedDB);if(!n)throw new Error("indexedDB is not available");return n}async openDB(){return this._db?this._db:new Promise((e,n)=>{const r=this.getIndexedDB().open(this.dbName,znt);r.onupgradeneeded=()=>{const s=r.result;s.objectStoreNames.contains(rO)||s.createObjectStore(rO),s.objectStoreNames.contains(sO)||s.createObjectStore(sO),s.objectStoreNames.contains(iO)||s.createObjectStore(iO),s.objectStoreNames.contains(I8)||s.createObjectStore(I8),s.objectStoreNames.contains(aO)||s.createObjectStore(aO),s.objectStoreNames.contains(C8)||s.createObjectStore(C8),s.objectStoreNames.contains(oO)||s.createObjectStore(oO),s.objectStoreNames.contains(cO)||s.createObjectStore(cO)},r.onsuccess=()=>{this._db=r.result,e(this._db)},r.onerror=()=>{n(r.error)}})}async get(e,n){const r=await this.openDB();return new Promise((s,i)=>{const c=r.transaction(e,"readonly").objectStore(e).get(n);c.onsuccess=()=>s(c.result),c.onerror=()=>i(c.error)})}async put(e,n,r){const s=await this.openDB();return new Promise((i,a)=>{const l=s.transaction(e,"readwrite").objectStore(e).put(r,n);l.onsuccess=()=>i(),l.onerror=()=>a(l.error)})}async getSet(e,n){const r=await this.get(e,n)||new Set;return Array.isArray(r)?new Set(r):r}async putSet(e,n,r){await this.put(e,n,Array.from(r))}getSignatureKey(e,n){return`${e.toLowerCase()}-${n.toLowerCase()}`}getSapientSignatureKey(e,n,r){return`${e.toLowerCase()}-${r.toLowerCase()}-${n.toLowerCase()}`}async loadConfig(e){return this.get(rO,e.toLowerCase())}async saveConfig(e,n){await this.put(rO,e.toLowerCase(),n)}async loadCounterfactualWallet(e){return this.get(sO,e.toLowerCase())}async saveCounterfactualWallet(e,n,r){await this.put(sO,e.toLowerCase(),{imageHash:n,context:r})}async loadPayloadOfSubdigest(e){return this.get(iO,e.toLowerCase())}async savePayloadOfSubdigest(e,n){await this.put(iO,e.toLowerCase(),n)}async loadSubdigestsOfSigner(e){const n=await this.getSet(I8,e.toLowerCase());return Array.from(n)}async loadSignatureOfSubdigest(e,n){const r=this.getSignatureKey(e,n);return this.get(aO,r.toLowerCase())}async saveSignatureOfSubdigest(e,n,r){const s=this.getSignatureKey(e,n);await this.put(aO,s.toLowerCase(),r);const i=e.toLowerCase(),a=n.toLowerCase(),o=await this.getSet(I8,i);o.add(a),await this.putSet(I8,i,o)}async loadSubdigestsOfSapientSigner(e,n){const r=`${e.toLowerCase()}-${n.toLowerCase()}`,s=await this.getSet(C8,r);return Array.from(s)}async loadSapientSignatureOfSubdigest(e,n,r){const s=this.getSapientSignatureKey(e,n,r);return this.get(oO,s.toLowerCase())}async saveSapientSignatureOfSubdigest(e,n,r,s){const i=this.getSapientSignatureKey(e,n,r).toLowerCase();await this.put(oO,i,s);const a=`${e.toLowerCase()}-${r.toLowerCase()}`,o=n.toLowerCase(),c=await this.getSet(C8,a);c.add(o),await this.putSet(C8,a,c)}async loadTree(e){return this.get(cO,e.toLowerCase())}async saveTree(e,n){await this.put(cO,e.toLowerCase(),n)}}let Ynt=class{constructor(e=new hnt,n=IX){q(this,"store");q(this,"extensions");this.store=e,this.extensions=n}getConfiguration(e){return this.store.loadConfig(e)}async saveWallet(e,n){await this.saveConfig(e);const r=Ai(e);await this.saveCounterfactualWallet(OW(r,n),Un(r),n)}async saveConfig(e){const n=mr(Ai(e)),r=await this.store.loadConfig(n);if(r){const s=rM(r.topology,e.topology);return this.store.saveConfig(n,{...r,topology:s})}else return this.store.saveConfig(n,e)}saveCounterfactualWallet(e,n,r){this.store.saveCounterfactualWallet(e,n,r)}getDeploy(e){return this.store.loadCounterfactualWallet(e)}async getWalletsGeneric(e,n){const r=await Promise.all(e.map(i=>this.store.loadPayloadOfSubdigest(i))),s={};for(const i of r){if(!i)continue;const a=Zd(i.wallet);if(s[a])continue;const o=Un(Fd(a,i.chainId,i.content)),c=await n(o);c&&(s[a]={chainId:i.chainId,payload:i.content,signature:c})}return s}async getWallets(e){return w5(await this.getWalletsGeneric(await this.store.loadSubdigestsOfSigner(e),n=>this.store.loadSignatureOfSubdigest(e,n)))}async getWalletsForSapient(e,n){return w5(await this.getWalletsGeneric(await this.store.loadSubdigestsOfSapientSigner(e,n),r=>this.store.loadSapientSignatureOfSubdigest(e,r,n)))}getWitnessFor(e,n){const r=Zd(e);return this.getWallets(n).then(s=>s[r])}getWitnessForSapient(e,n,r){const s=Zd(e);return this.getWalletsForSapient(n,r).then(i=>i[s])}async saveWitnesses(e,n,r,s){const i=Un(Fd(e,n,r));await Promise.all([this.saveSignature(i,s),this.store.savePayloadOfSubdigest(i,{content:r,chainId:n,wallet:e})])}async getConfigurationUpdates(e,n,r){let s=await this.store.loadConfig(n);if(!s)return[];const{signers:i,sapientSigners:a}=zl(s),o=await Promise.all([...i.map(g=>this.store.loadSubdigestsOfSigner(g)),...a.map(g=>this.store.loadSubdigestsOfSapientSigner(g.address,g.imageHash))]),c=[...new Set(o.flat())],l=await Promise.all(c.map(g=>this.store.loadPayloadOfSubdigest(g))),u=await Promise.all(l.filter(g=>(g==null?void 0:g.content)&&d5(g.content)).map(async g=>({payload:g,nextImageHash:g.content.imageHash,config:await this.store.loadConfig(g.content.imageHash)})));let f;const d=u.filter(g=>g.config&&g.config.checkpoint>s.checkpoint).sort((g,m)=>g.config.checkpoint>m.config.checkpoint?r!=null&&r.allUpdates?1:-1:r!=null&&r.allUpdates?-1:1);for(const g of d){if(f){if(r!=null&&r.allUpdates){if(g.config.checkpoint<=f.checkpoint)continue}else if(g.config.checkpoint<=f.checkpoint)continue}const m=Un(Fd(e,g.payload.chainId,g.payload.content)),v=await Promise.all([...i.map(async I=>({signer:I,signature:await this.store.loadSignatureOfSubdigest(I,m)})),...a.map(async I=>({signer:I.address,imageHash:I.imageHash,signature:await this.store.loadSapientSignatureOfSubdigest(I.address,m,I.imageHash)}))]);let A=0n;const S=ZT(s.topology,I=>{var D,V;if(za(I)){const O=(D=v.find(({signer:U,imageHash:Q})=>Q&&Mn(U,I.address)&&Q===I.imageHash))==null?void 0:D.signature;if(O)return A+=I.weight,O}const B=(V=v.find(({signer:O})=>Mn(O,I.address)))==null?void 0:V.signature;if(B)return A+=I.weight,B});A<s.threshold||(f={nextImageHash:g.nextImageHash,checkpoint:g.config.checkpoint,signature:{noChainId:!0,configuration:{threshold:s.threshold,checkpoint:s.checkpoint,topology:S}}})}if(!f)return[];const p=await this.getConfigurationUpdates(e,f.nextImageHash,{allUpdates:!0});return[{imageHash:f.nextImageHash,signature:f.signature},...p]}async saveUpdate(e,n,r){const i={type:"config-update",imageHash:mr(Ai(n))},a=Fd(e,0,i);await this.store.savePayloadOfSubdigest(Un(a),{content:i,chainId:0,wallet:e}),await this.saveConfig(n),await this.saveSignature(Un(a),r.configuration.topology)}async saveSignature(e,n){if(fk(n)){await Promise.all([this.saveSignature(e,n[0]),this.saveSignature(e,n[1])]);return}if(V7(n))return this.saveSignature(e,n.tree);if(F7(n)){const r=n.signature.type;if(r==="eth_sign"||r==="hash"){const s=u2e({payload:r==="eth_sign"?pet(e):e,signature:n.signature});return this.store.saveSignatureOfSubdigest(s,e,n.signature)}if(htt(n.signature))switch(n.signature.address.toLowerCase()){case this.extensions.passkeys.toLowerCase():const s=SX(Lt(n.signature.data));if(!oEe(e,s))throw new Error("Invalid passkey signature");return this.store.saveSapientSignatureOfSubdigest(n.signature.address,e,bd(s.publicKey),n.signature);default:throw new Error(`Unsupported sapient signer: ${n.signature.address}`)}}}getTree(e){return this.store.loadTree(e)}saveTree(e){return this.store.saveTree(Hd(e),e)}saveConfiguration(e){return this.store.saveConfig(mr(Ai(e)),e)}saveDeploy(e,n){return this.store.saveCounterfactualWallet(OW(Lt(e),n),e,n)}async getPayload(e){const n=await this.store.loadPayloadOfSubdigest(e);return n?{chainId:n.chainId,payload:n.content,wallet:n.wallet}:void 0}savePayload(e,n,r){const s=Un(Fd(e,r,n));return this.store.savePayloadOfSubdigest(s,{content:n,chainId:r,wallet:e})}};class Qnt{constructor(e){q(this,"args");this.args=e}async getConfiguration(e){const n=await this.args.cache.getConfiguration(e);if(n)return n;const r=await this.args.source.getConfiguration(e);return r&&await this.args.cache.saveConfiguration(r),r}async getDeploy(e){const n=await this.args.cache.getDeploy(e);if(n)return n;const r=await this.args.source.getDeploy(e);return r&&await this.args.cache.saveDeploy(r.imageHash,r.context),r}async getWallets(e){const n=w5(await this.args.cache.getWallets(e)),r=w5(await this.args.source.getWallets(e)),s={...n,...r};for(const[i,a]of Object.entries(s))xa(i),r[i]||await this.args.source.saveWitnesses(i,a.chainId,a.payload,{type:"unrecovered-signer",weight:1n,signature:a.signature}),n[i]||await this.args.cache.saveWitnesses(i,a.chainId,a.payload,{type:"unrecovered-signer",weight:1n,signature:a.signature});return s}async getWalletsForSapient(e,n){const r=await this.args.cache.getWalletsForSapient(e,n),s=await this.args.source.getWalletsForSapient(e,n),i={...r,...s};for(const[a,o]of Object.entries(i)){const c=Yi(a);s[c]||await this.args.source.saveWitnesses(c,o.chainId,o.payload,{type:"unrecovered-signer",weight:1n,signature:o.signature}),r[c]||await this.args.cache.saveWitnesses(c,o.chainId,o.payload,{type:"unrecovered-signer",weight:1n,signature:o.signature})}return i}async getWitnessFor(e,n){const r=await this.args.cache.getWitnessFor(e,n);if(r)return r;const s=await this.args.source.getWitnessFor(e,n);return s&&await this.args.cache.saveWitnesses(e,s.chainId,s.payload,{type:"unrecovered-signer",weight:1n,signature:s.signature}),s}async getWitnessForSapient(e,n,r){const s=await this.args.cache.getWitnessForSapient(e,n,r);if(s)return s;const i=await this.args.source.getWitnessForSapient(e,n,r);return i&&await this.args.cache.saveWitnesses(e,i.chainId,i.payload,{type:"unrecovered-signer",weight:1n,signature:i.signature}),i}async getConfigurationUpdates(e,n,r){return this.args.source.getConfigurationUpdates(e,n,r)}async getTree(e){const n=await this.args.cache.getTree(e);if(n)return n;const r=await this.args.source.getTree(e);return r&&await this.args.cache.saveTree(r),r}saveWallet(e,n){return this.args.source.saveWallet(e,n)}saveWitnesses(e,n,r,s){return this.args.source.saveWitnesses(e,n,r,s)}saveUpdate(e,n,r){return this.args.source.saveUpdate(e,n,r)}saveTree(e){return this.args.source.saveTree(e)}saveConfiguration(e){return this.args.source.saveConfiguration(e)}saveDeploy(e,n){return this.args.source.saveDeploy(e,n)}async getPayload(e){const n=await this.args.cache.getPayload(e);if(n)return n;const r=await this.args.source.getPayload(e);return r&&await this.args.cache.savePayload(r.wallet,r.payload,r.chainId),r}savePayload(e,n,r){return this.args.source.savePayload(e,n,r)}}const Znt="Webrpc",Xnt="webrpc@v0.22.1;gen-typescript@v0.16.2;sessions@v0.0.1";var Lce;(function(t){t.Transactions="Transactions",t.Message="Message",t.ConfigUpdate="ConfigUpdate",t.Digest="Digest"})(Lce||(Lce={}));var Ss;(function(t){t.EIP712="EIP712",t.EthSign="EthSign",t.EIP1271="EIP1271",t.Sapient="Sapient",t.SapientCompact="SapientCompact"})(Ss||(Ss={}));let ert=class{constructor(e,n){q(this,"hostname");q(this,"fetch");q(this,"path","/rpc/Sessions/");q(this,"ping",(e,n)=>this.fetch(this.url("Ping"),ha({},e,n)).then(r=>pa(r).then(s=>({})),r=>{throw Ji.new({cause:`fetch(): ${r.message||""}`})}));q(this,"config",(e,n,r)=>this.fetch(this.url("Config"),ha(e,n,r)).then(s=>pa(s).then(i=>({version:i.version,config:i.config})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"tree",(e,n,r)=>this.fetch(this.url("Tree"),ha(e,n,r)).then(s=>pa(s).then(i=>({version:i.version,tree:i.tree})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"payload",(e,n,r)=>this.fetch(this.url("Payload"),ha(e,n,r)).then(s=>pa(s).then(i=>({version:i.version,payload:i.payload,wallet:i.wallet,chainID:i.chainID})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"wallets",(e,n,r)=>this.fetch(this.url("Wallets"),ha(e,n,r)).then(s=>pa(s).then(i=>({wallets:i.wallets,cursor:i.cursor})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"deployHash",(e,n,r)=>this.fetch(this.url("DeployHash"),ha(e,n,r)).then(s=>pa(s).then(i=>({deployHash:i.deployHash,context:i.context})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"witness",(e,n,r)=>this.fetch(this.url("Witness"),ha(e,n,r)).then(s=>pa(s).then(i=>({witness:i.witness})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"configUpdates",(e,n,r)=>this.fetch(this.url("ConfigUpdates"),ha(e,n,r)).then(s=>pa(s).then(i=>({updates:i.updates})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"migrations",(e,n,r)=>this.fetch(this.url("Migrations"),ha(e,n,r)).then(s=>pa(s).then(i=>({migrations:i.migrations})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"saveConfig",(e,n,r)=>this.fetch(this.url("SaveConfig"),ha(e,n,r)).then(s=>pa(s).then(i=>({})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"saveTree",(e,n,r)=>this.fetch(this.url("SaveTree"),ha(e,n,r)).then(s=>pa(s).then(i=>({})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"savePayload",(e,n,r)=>this.fetch(this.url("SavePayload"),ha(e,n,r)).then(s=>pa(s).then(i=>({})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"saveWallet",(e,n,r)=>this.fetch(this.url("SaveWallet"),ha(e,n,r)).then(s=>pa(s).then(i=>({})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"saveSignature",(e,n,r)=>this.fetch(this.url("SaveSignature"),ha(e,n,r)).then(s=>pa(s).then(i=>({})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"saveSignature2",(e,n,r)=>this.fetch(this.url("SaveSignature2"),ha(e,n,r)).then(s=>pa(s).then(i=>({})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"saveSignerSignatures",(e,n,r)=>this.fetch(this.url("SaveSignerSignatures"),ha(e,n,r)).then(s=>pa(s).then(i=>({})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"saveSignerSignatures2",(e,n,r)=>this.fetch(this.url("SaveSignerSignatures2"),ha(e,n,r)).then(s=>pa(s).then(i=>({})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"saveSignerSignatures3",(e,n,r)=>this.fetch(this.url("SaveSignerSignatures3"),ha(e,n,r)).then(s=>pa(s).then(i=>({})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));q(this,"saveMigration",(e,n,r)=>this.fetch(this.url("SaveMigration"),ha(e,n,r)).then(s=>pa(s).then(i=>({})),s=>{throw Ji.new({cause:`fetch(): ${s.message||""}`})}));this.hostname=e.replace(/\/*$/,""),this.fetch=(r,s)=>n(r,s)}url(e){return this.hostname+this.path+e}};const ha=(t={},e={},n=null)=>{const r={...e,"Content-Type":"application/json"};return r[Znt]=Xnt,{method:"POST",headers:r,body:JSON.stringify(t||{}),signal:n}},pa=t=>t.text().then(e=>{let n;try{n=JSON.parse(e)}catch(r){let s="";throw r instanceof Error&&(s=r.message),qEe.new({status:t.status,cause:`JSON.parse(): ${s}: response text: ${e}`})}if(!t.ok){const r=typeof n.code=="number"?n.code:0;throw(drt[r]||Ol).new(n)}return n});let Ol=class UEe extends Error{constructor(n,r,s,i,a){super(s);q(this,"name");q(this,"code");q(this,"message");q(this,"status");q(this,"cause");q(this,"msg");this.name=n||"WebrpcError",this.code=typeof r=="number"?r:0,this.message=s||`endpoint error ${this.code}`,this.msg=this.message,this.status=typeof i=="number"?i:0,this.cause=a,Object.setPrototypeOf(this,UEe.prototype)}static new(n){return new this(n.error,n.code,n.message||n.msg,n.status,n.cause)}},trt=class FEe extends Ol{constructor(e="WebrpcEndpoint",n=0,r="endpoint error",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,FEe.prototype)}},Ji=class VEe extends Ol{constructor(e="WebrpcRequestFailed",n=-1,r="request failed",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,VEe.prototype)}},nrt=class $Ee extends Ol{constructor(e="WebrpcBadRoute",n=-2,r="bad route",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,$Ee.prototype)}},rrt=class jEe extends Ol{constructor(e="WebrpcBadMethod",n=-3,r="bad method",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,jEe.prototype)}},srt=class HEe extends Ol{constructor(e="WebrpcBadRequest",n=-4,r="bad request",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,HEe.prototype)}},qEe=class KEe extends Ol{constructor(e="WebrpcBadResponse",n=-5,r="bad response",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,KEe.prototype)}},irt=class GEe extends Ol{constructor(e="WebrpcServerPanic",n=-6,r="server panic",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,GEe.prototype)}},art=class WEe extends Ol{constructor(e="WebrpcInternalError",n=-7,r="internal error",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,WEe.prototype)}},ort=class zEe extends Ol{constructor(e="WebrpcClientDisconnected",n=-8,r="client disconnected",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,zEe.prototype)}},crt=class JEe extends Ol{constructor(e="WebrpcStreamLost",n=-9,r="stream lost",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,JEe.prototype)}},lrt=class YEe extends Ol{constructor(e="WebrpcStreamFinished",n=-10,r="stream finished",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,YEe.prototype)}},urt=class QEe extends Ol{constructor(e="InvalidArgument",n=1,r="invalid argument",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,QEe.prototype)}},frt=class ZEe extends Ol{constructor(e="NotFound",n=2,r="not found",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,ZEe.prototype)}};var Uce;(function(t){t.WebrpcEndpoint="WebrpcEndpoint",t.WebrpcRequestFailed="WebrpcRequestFailed",t.WebrpcBadRoute="WebrpcBadRoute",t.WebrpcBadMethod="WebrpcBadMethod",t.WebrpcBadRequest="WebrpcBadRequest",t.WebrpcBadResponse="WebrpcBadResponse",t.WebrpcServerPanic="WebrpcServerPanic",t.WebrpcInternalError="WebrpcInternalError",t.WebrpcClientDisconnected="WebrpcClientDisconnected",t.WebrpcStreamLost="WebrpcStreamLost",t.WebrpcStreamFinished="WebrpcStreamFinished",t.InvalidArgument="InvalidArgument",t.NotFound="NotFound"})(Uce||(Uce={}));var Fce;(function(t){t[t.WebrpcEndpoint=0]="WebrpcEndpoint",t[t.WebrpcRequestFailed=-1]="WebrpcRequestFailed",t[t.WebrpcBadRoute=-2]="WebrpcBadRoute",t[t.WebrpcBadMethod=-3]="WebrpcBadMethod",t[t.WebrpcBadRequest=-4]="WebrpcBadRequest",t[t.WebrpcBadResponse=-5]="WebrpcBadResponse",t[t.WebrpcServerPanic=-6]="WebrpcServerPanic",t[t.WebrpcInternalError=-7]="WebrpcInternalError",t[t.WebrpcClientDisconnected=-8]="WebrpcClientDisconnected",t[t.WebrpcStreamLost=-9]="WebrpcStreamLost",t[t.WebrpcStreamFinished=-10]="WebrpcStreamFinished",t[t.InvalidArgument=1]="InvalidArgument",t[t.NotFound=2]="NotFound"})(Fce||(Fce={}));const drt={0:trt,[-1]:Ji,[-2]:nrt,[-3]:rrt,[-4]:srt,[-5]:qEe,[-6]:irt,[-7]:art,[-8]:ort,[-9]:crt,[-10]:lrt,1:urt,2:frt};class b5{constructor(e="https://keymachine.sequence.app",n){q(this,"service");const r=n??globalThis.fetch;if(!r)throw new Error("fetch is not available");this.service=new ert(e,r)}async getConfiguration(e){const{version:n,config:r}=await this.service.config({imageHash:e});if(n!==3)throw new Error(`invalid configuration version ${n}, expected version 3`);return mrt(r)}async getDeploy(e){const{deployHash:n,context:r}=await this.service.deployHash({wallet:e});return Mi(n),xa(r.factory),xa(r.mainModule),xa(r.mainModuleUpgradable),Mi(r.walletCreationCode),{imageHash:n,context:{factory:r.factory,stage1:r.mainModule,stage2:r.mainModuleUpgradable,creationCode:r.walletCreationCode}}}async getWallets(e){const n=await this.service.wallets({signer:e}),r=w5(n.wallets);return Object.fromEntries(Object.entries(r).map(([s,i])=>{switch(xa(s),Mi(i.signature),i.type){case Ss.EIP712:return[s,{chainId:Number(i.chainID),payload:cd(i.payload),signature:{type:"hash",...jE(i.signature)}}];case Ss.EthSign:return[s,{chainId:Number(i.chainID),payload:cd(i.payload),signature:{type:"eth_sign",...jE(i.signature)}}];case Ss.EIP1271:return[s,{chainId:Number(i.chainID),payload:cd(i.payload),signature:{type:"erc1271",address:e,data:i.signature}}];case Ss.Sapient:throw new Error(`unexpected sapient signature by ${e}`);case Ss.SapientCompact:throw new Error(`unexpected compact sapient signature by ${e}`)}}))}async getWalletsForSapient(e,n){const r=await this.service.wallets({signer:e,sapientHash:n}),s=w5(r.wallets);return Object.fromEntries(Object.entries(s).map(([i,a])=>{switch(xa(i),Mi(a.signature),a.type){case Ss.EIP712:throw new Error(`unexpected eip-712 signature by ${e}`);case Ss.EthSign:throw new Error(`unexpected eth_sign signature by ${e}`);case Ss.EIP1271:throw new Error(`unexpected erc-1271 signature by ${e}`);case Ss.Sapient:return[i,{chainId:Number(a.chainID),payload:cd(a.payload),signature:{type:"sapient",address:e,data:a.signature}}];case Ss.SapientCompact:return[i,{chainId:Number(a.chainID),payload:cd(a.payload),signature:{type:"sapient_compact",address:e,data:a.signature}}]}}))}async getWitnessFor(e,n){try{const{witness:r}=await this.service.witness({signer:n,wallet:e});switch(Mi(r.signature),r.type){case Ss.EIP712:return{chainId:Number(r.chainID),payload:cd(r.payload),signature:{type:"hash",...jE(r.signature)}};case Ss.EthSign:return{chainId:Number(r.chainID),payload:cd(r.payload),signature:{type:"eth_sign",...jE(r.signature)}};case Ss.EIP1271:return{chainId:Number(r.chainID),payload:cd(r.payload),signature:{type:"erc1271",address:n,data:r.signature}};case Ss.Sapient:throw new Error(`unexpected sapient signature by ${n}`);case Ss.SapientCompact:throw new Error(`unexpected compact sapient signature by ${n}`)}}catch{}}async getWitnessForSapient(e,n,r){try{const{witness:s}=await this.service.witness({signer:n,wallet:e,sapientHash:r});switch(Mi(s.signature),s.type){case Ss.EIP712:throw new Error(`unexpected eip-712 signature by ${n}`);case Ss.EthSign:throw new Error(`unexpected eth_sign signature by ${n}`);case Ss.EIP1271:throw new Error(`unexpected erc-1271 signature by ${n}`);case Ss.Sapient:return{chainId:Number(s.chainID),payload:cd(s.payload),signature:{type:"sapient",address:n,data:s.signature}};case Ss.SapientCompact:return{chainId:Number(s.chainID),payload:cd(s.payload),signature:{type:"sapient_compact",address:n,data:s.signature}}}}catch{}}async getConfigurationUpdates(e,n,r){const{updates:s}=await this.service.configUpdates({wallet:e,fromImageHash:n,allUpdates:r==null?void 0:r.allUpdates});return Promise.all(s.map(async({toImageHash:i,signature:a})=>{Mi(i),Mi(a);const o=J2e(B0(a)),{configuration:c}=await kW(o,e,0,nM(i),{provider:grt});return{imageHash:i,signature:{...o,configuration:c}}}))}async getTree(e){const{version:n,tree:r}=await this.service.tree({imageHash:e});if(n!==3)throw new Error(`invalid tree version ${n}, expected version 3`);return tAe(r)}async getPayload(e){const{version:n,payload:r,wallet:s,chainID:i}=await this.service.payload({digest:e});if(n!==3)throw new Error(`invalid payload version ${n}, expected version 3`);return xa(s),{payload:cd(r),wallet:s,chainId:Number(i)}}async saveWallet(e,n){await this.service.saveWallet({version:3,deployConfig:Oj(e),context:{version:3,factory:n.factory,mainModule:n.stage1,mainModuleUpgradable:n.stage2,guestModule:gX,walletCreationCode:n.creationCode}})}async saveWitnesses(e,n,r,s){await this.service.saveSignerSignatures3({wallet:e,payload:Rj(r),chainID:n.toString(),signatures:xI(s).map(i=>{switch(i.type){case"hash":return{type:Ss.EIP712,signature:tW(jE(i))};case"eth_sign":return{type:Ss.EthSign,signature:tW(jE(i))};case"erc1271":return{type:Ss.EIP1271,signer:i.address,signature:i.data,referenceChainID:n.toString()};case"sapient":return{type:Ss.Sapient,signer:i.address,signature:i.data,referenceChainID:n.toString()};case"sapient_compact":return{type:Ss.SapientCompact,signer:i.address,signature:i.data,referenceChainID:n.toString()}}})})}async saveUpdate(e,n,r){await this.service.saveSignature2({wallet:e,payload:Rj(nM(mr(Ai(n)))),chainID:"0",signature:mr(r3(r)),toConfig:Oj(n)})}async saveTree(e){await this.service.saveTree({version:3,tree:eAe(e)})}async saveConfiguration(e){await this.service.saveConfig({version:3,config:Oj(e)})}async saveDeploy(e,n){}async savePayload(e,n,r){await this.service.savePayload({version:3,payload:Rj(n),wallet:e,chainID:r.toString()})}}const hrt=[ont.passkeys,cnt.passkeys,lnt.passkeys,unt.passkeys,IX.passkeys].map(Zd),XEe="function recoverSapientSignatureCompact(bytes32 _digest, bytes _signature) view returns (bytes32)",Pj=H2(XEe);class prt{constructor(){q(this,"request",async e=>{var n,r;switch(e.method){case"eth_call":if(!e.params||!Array.isArray(e.params)||e.params.length===0)throw new Error("eth_call requires transaction parameters");const s=e.params[0];if(!((n=s.data)!=null&&n.startsWith(ZB(Pj))))throw new Error(`unknown selector ${(r=s.data)==null?void 0:r.slice(0,10)}, expected selector ${ZB(Pj)} for ${XEe}`);if(!hrt.includes(s.to?Zd(s.to):"0x"))throw new Error(`unknown passkey signer ${s.to}`);const[i,a]=xZe(Pj,s.data),o=SX(B0(a));if(oEe(i,o))return bd(o.publicKey);throw new Error(`invalid passkey signature ${a} for digest ${i}`);default:throw new Error(`method ${e.method} not implemented`)}});q(this,"on",e=>{throw new Error(`unable to listen for ${e}: not implemented`)});q(this,"removeListener",e=>{throw new Error(`unable to remove listener for ${e}: not implemented`)})}}const grt=new prt;function Oj(t){return{threshold:h0(t.threshold),checkpoint:h0(t.checkpoint),checkpointer:t.checkpointer,tree:HR(t.topology)}}function mrt(t){return t.checkpointer!==void 0&&xa(t.checkpointer),{threshold:BigInt(t.threshold),checkpoint:BigInt(t.checkpoint),checkpointer:t.checkpointer,topology:qR(t.tree)}}function HR(t){if(ti(t))return[HR(t[0]),HR(t[1])];if(To(t))return{weight:h0(t.weight),address:t.address};if(za(t))return{weight:h0(t.weight),address:t.address,imageHash:t.imageHash};if(M0(t))return{subdigest:t.digest};if(D0(t))return{subdigest:t.digest,isAnyAddress:!0};if(Cl(t))return{weight:h0(t.weight),threshold:h0(t.threshold),tree:HR(t.tree)};if(mo(t))return t;throw new Error(`unknown topology '${JSON.stringify(t)}'`)}function qR(t){switch(typeof t){case"string":return Mi(t),t;case"object":if(t instanceof Array)return[qR(t[0]),qR(t[1])];if("weight"in t){if("address"in t)return xa(t.address),t.imageHash?(Mi(t.imageHash),{type:"sapient-signer",address:t.address,weight:BigInt(t.weight),imageHash:t.imageHash}):{type:"signer",address:t.address,weight:BigInt(t.weight)};if("tree"in t)return{type:"nested",weight:BigInt(t.weight),threshold:BigInt(t.threshold),tree:qR(t.tree)}}if("subdigest"in t)return Mi(t.subdigest),{type:t.isAnyAddress?"any-address-subdigest":"subdigest",digest:t.subdigest}}throw new Error(`unknown config tree '${JSON.stringify(t)}'`)}function Rj(t){if(mX(t))return{type:"call",space:h0(t.space),nonce:h0(t.nonce),calls:t.calls.map(yrt)};if(uk(t))return{type:"message",message:t.message};if(d5(t))return{type:"config-update",imageHash:t.imageHash};if(L2e(t))return{type:"digest",digest:t.digest};throw new Error(`unknown payload '${JSON.stringify(t)}'`)}function cd(t){switch(t.type){case"call":return{type:"call",space:BigInt(t.space),nonce:BigInt(t.nonce),calls:t.calls.map(wrt)};case"message":return Mi(t.message),{type:"message",message:t.message};case"config-update":return Mi(t.imageHash),{type:"config-update",imageHash:t.imageHash};case"digest":return Mi(t.digest),{type:"digest",digest:t.digest}}}function yrt(t){return{to:t.to,value:h0(t.value),data:t.data,gasLimit:h0(t.gasLimit),delegateCall:t.delegateCall,onlyFallback:t.onlyFallback,behaviorOnError:t.behaviorOnError}}function wrt(t){return xa(t.to),Mi(t.data),{to:t.to,value:BigInt(t.value),data:t.data,gasLimit:BigInt(t.gasLimit),delegateCall:t.delegateCall,onlyFallback:t.onlyFallback,behaviorOnError:t.behaviorOnError}}function eAe(t){if($7(t))return t.map(eAe);if(vX(t))return{data:mr(t.value)};if(Bf(t))return t;throw new Error(`unknown tree '${JSON.stringify(t)}'`)}function tAe(t){switch(typeof t){case"string":return Mi(t),t;case"object":if(t instanceof Array)return t.map(tAe);if("data"in t)return Mi(t.data),{type:"leaf",value:B0(t.data)}}throw new Error(`unknown tree '${JSON.stringify(t)}'`)}function h0(t){return t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER?t.toString():Number(t)}function xI(t){if(fk(t))return[...xI(t[0]),...xI(t[1])];if(F7(t))return[t.signature];if(Cl(t))return xI(t.tree);if(V7(t))return xI(t.tree);if(To(t))return t.signature?[t.signature]:[];if(za(t))return t.signature?[t.signature]:[];if(M0(t))return[];if(D0(t))return[];if(mo(t))return[];throw new Error(`unknown topology '${JSON.stringify(t)}'`)}function brt(t){const{authorization:e,factory:n,factoryData:r}=t;if(n==="0x7702"||n==="0x7702000000000000000000000000000000000000"){if(!e)return"0x7702000000000000000000000000000000000000";const s=e.address;return Us(s,r??"0x")}return n?Us(n,r??"0x"):"0x"}function vrt(t){const{callGasLimit:e,callData:n,maxPriorityFeePerGas:r,maxFeePerGas:s,nonce:i,paymaster:a,paymasterData:o,paymasterPostOpGasLimit:c,paymasterVerificationGasLimit:l,sender:u,signature:f,verificationGasLimit:d}=t,p=Us(ii(Gn(d||0n),16),ii(Gn(e||0n),16)),g=brt(t),m=Us(ii(Gn(r||0n),16),ii(Gn(s||0n),16)),v=a?Us(a,ii(Gn(l||0n),16),ii(Gn(c||0n),16),o||"0x"):"0x",A=t.preVerificationGas??0n;return{accountGasLimits:p,callData:n,initCode:g,gasFees:m,nonce:i,paymasterAndData:v,preVerificationGas:A,sender:u,signature:f}}function xrt(t){const e={};return e.callData=t.callData,e.callGasLimit=Gn(t.callGasLimit),e.maxFeePerGas=Gn(t.maxFeePerGas),e.maxPriorityFeePerGas=Gn(t.maxPriorityFeePerGas),e.nonce=Gn(t.nonce),e.preVerificationGas=Gn(t.preVerificationGas),e.sender=t.sender,e.verificationGasLimit=Gn(t.verificationGasLimit),t.factory&&(e.factory=t.factory),t.factoryData&&(e.factoryData=t.factoryData),t.initCode&&(e.initCode=t.initCode),t.paymaster&&(e.paymaster=t.paymaster),t.paymasterData&&(e.paymasterData=t.paymasterData),typeof t.paymasterPostOpGasLimit=="bigint"&&(e.paymasterPostOpGasLimit=Gn(t.paymasterPostOpGasLimit)),typeof t.paymasterVerificationGasLimit=="bigint"&&(e.paymasterVerificationGasLimit=Gn(t.paymasterVerificationGasLimit)),t.signature&&(e.signature=t.signature),e}function LW(t,e){const{chainId:n,entryPointAddress:r}=e,s=vrt(t);return{domain:{name:"ERC4337",version:"1",chainId:n,verifyingContract:r},message:s,primaryType:"PackedUserOperation",types:LW.types}}(function(t){t.types={PackedUserOperation:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"}]}})(LW||(LW={}));const _j={knownContexts:ztt,stateProvider:new b5,guest:gX};let nu=class nAe{constructor(e,n){q(this,"address");q(this,"guest");q(this,"stateProvider");q(this,"knownContexts");this.address=e;const r=[..._j.knownContexts,...(n==null?void 0:n.knownContexts)??[]],s={..._j,...n,knownContexts:r};this.guest=s.guest,this.stateProvider=s.stateProvider,this.knownContexts=s.knownContexts}static async fromConfiguration(e,n){const r=(n==null?void 0:n.context)??nEe,s={..._j,...n};return s.unsafe||Nce(e),await s.stateProvider.saveWallet(e,r),new nAe(OW(e,r),s)}async isDeployed(e){return await e.request({method:"eth_getCode",params:[this.address,"pending"]})!=="0x"}async buildDeployTransaction(){const e=await this.stateProvider.getDeploy(this.address);if(!e)throw new Error(`cannot find deploy information for ${this.address}`);return Zet(e.imageHash,e.context)}async prepareUpdate(e,n){n!=null&&n.unsafe||Nce(e);const r=Ai(e);return{...(await Promise.all([this.prepareBlankEnvelope(0),this.stateProvider.saveConfiguration(e)]))[0],payload:nM(mr(r))}}async submitUpdate(e,n){const[r,s]=await Promise.all([this.getStatus(),this.stateProvider.getConfiguration(e.payload.imageHash)]);if(!s)throw new Error(`cannot find configuration details for ${e.payload.imageHash}`);const i={...e,configuration:r.configuration},{weight:a,threshold:o}=Ww(i);if(a<o)throw new Error("insufficient weight in envelope");const c=nO(i);if(await this.stateProvider.saveUpdate(this.address,s,c),!(n!=null&&n.noValidateSave)){const l=await this.getStatus();if(Su(Ai(l.configuration))!==e.payload.imageHash)throw new Error("configuration not saved")}}async getStatus(e){var p,g;let n=!1,r,s,i,a=[],o,c;const l=await this.stateProvider.getDeploy(this.address);if(!l)throw new Error(`cannot find deploy information for ${this.address}`);const u=this.knownContexts.find(m=>Mn(l.context.factory,m.factory)&&Mn(l.context.stage1,m.stage1))??l.context;let f;if(e){const m=await Promise.all([e.request({method:"eth_chainId"}),this.isDeployed(e),e.request({method:"eth_call",params:[{to:this.address,data:Bs(Ket)},"latest"]}).then(v=>{const A=`0x${v.slice(-40)}`;return xa(A,{strict:!1}),A}).catch(()=>{})]);if(s=Number(m[0]),n=m[1],r=m[2],f=r?[...this.knownContexts,u].find(v=>Mn(r,v.stage1)||Mn(r,v.stage2)):u,!f)throw new Error(`cannot find context for ${this.address}`);if(c=r&&Mn(r,f.stage2)?"stage2":"stage1",n&&c==="stage2")o=await e.request({method:"eth_call",params:[{to:this.address,data:Bs(Get)},"latest"]});else{const v=await this.stateProvider.getDeploy(this.address);if(!v)throw new Error(`cannot find deploy information for ${this.address}`);o=v.imageHash}a=await this.stateProvider.getConfigurationUpdates(this.address,o),i=((p=a[a.length-1])==null?void 0:p.imageHash)??o}else a=await this.stateProvider.getConfigurationUpdates(this.address,l.imageHash),i=((g=a[a.length-1])==null?void 0:g.imageHash)??l.imageHash;const d=await this.stateProvider.getConfiguration(i);if(!d)throw new Error(`cannot find configuration details for ${this.address}`);return e?{address:this.address,isDeployed:n,implementation:r,stage:c,configuration:d,imageHash:i,pendingUpdates:[...a].reverse(),chainId:s,onChainImageHash:o,context:f}:{address:this.address,isDeployed:n,implementation:r,configuration:d,imageHash:i,pendingUpdates:[...a].reverse(),chainId:s,counterFactual:{context:u,imageHash:l.imageHash}}}async getNonce(e,n){const r=await e.request({method:"eth_call",params:[{to:this.address,data:Bs(Wet,[n])},"latest"]});return r==="0x"||r.length===0?0n:BigInt(r)}async get4337Nonce(e,n,r){const s=await e.request({method:"eth_call",params:[{to:n,data:Bs(Qet,[this.address,r])},"latest"]});return s==="0x"||s.length===0?0n:BigInt(s)&0xffffffffffffffffn}async get4337Entrypoint(e){var r,s;return(s=(r=(await this.getStatus(e)).context.capabilities)==null?void 0:r.erc4337)==null?void 0:s.entrypoint}async prepare4337Transaction(e,n,r){var u,f,d,p,g,m;const s=r.space??0n;if(!(r!=null&&r.unsafe))for(const v of n){if(v.delegateCall)throw new Error("delegate calls are not allowed in safe mode");if(Mn(v.to,this.address))throw new Error("calls to the wallet contract itself are not allowed in safe mode")}const[i,a]=await Promise.all([e.request({method:"eth_chainId"}),this.getStatus(e)]);if(!((f=(u=a.context.capabilities)==null?void 0:u.erc4337)!=null&&f.entrypoint))throw new Error("4337 is not enabled in this wallet");const o=this.get4337Nonce(e,(p=(d=a.context.capabilities)==null?void 0:d.erc4337)==null?void 0:p.entrypoint,s);let c,l;if(!a.isDeployed){const v=await this.buildDeployTransaction();c=v.to,l=v.data}if(!(r!=null&&r.noConfigUpdate)){const v=await this.getStatus(e);v.imageHash!==v.onChainImageHash&&n.push({to:this.address,value:0n,data:Bs(Ice,[v.imageHash]),gasLimit:0n,delegateCall:!1,onlyFallback:!1,behaviorOnError:"revert"})}return{payload:{type:"call_4337_07",nonce:await o,space:s,calls:n,entrypoint:(m=(g=a.context.capabilities)==null?void 0:g.erc4337)==null?void 0:m.entrypoint,callGasLimit:0n,maxFeePerGas:0n,maxPriorityFeePerGas:0n,paymaster:void 0,paymasterData:"0x",preVerificationGas:0n,verificationGasLimit:0n,factory:c,factoryData:l},...await this.prepareBlankEnvelope(Number(i),e)}}async build4337Transaction(e,n){const r=await this.getStatus(e),s={...n,configuration:r.configuration},{weight:i,threshold:a}=Ww(s);if(i<a)throw new Error("insufficient weight in envelope");const o=nO(s),c=U2e(n.payload,this.address,mr(r3({...o,suffix:r.pendingUpdates.map(({signature:l})=>l)})));return{operation:xrt(c),entrypoint:n.payload.entrypoint}}async prepareTransaction(e,n,r){const s=(r==null?void 0:r.space)??0n;if(!(r!=null&&r.unsafe))for(const o of n){if(o.delegateCall)throw new Error("delegate calls are not allowed in safe mode");if(Mn(o.to,this.address))throw new Error("calls to the wallet contract itself are not allowed in safe mode")}const[i,a]=await Promise.all([e.request({method:"eth_chainId"}),this.getNonce(e,s)]);if(!(r!=null&&r.noConfigUpdate)){const o=await this.getStatus(e);o.imageHash!==o.onChainImageHash&&n.push({to:this.address,value:0n,data:Bs(Ice,[o.imageHash]),gasLimit:0n,delegateCall:!1,onlyFallback:!1,behaviorOnError:"revert"})}return{payload:{type:"call",space:s,nonce:a,calls:n},...await this.prepareBlankEnvelope(Number(i),e)}}async buildTransaction(e,n){const r=await this.getStatus(e),s={...n,configuration:r.configuration},{weight:i,threshold:a}=Ww(s);if(i<a)throw new Error("insufficient weight in envelope");const o=nO(s);if(r.isDeployed)return{to:this.address,data:Bs(Sce,[mr(LR(n.payload)),mr(r3({...o,suffix:r.pendingUpdates.map(({signature:c})=>c)}))])};{const c=await this.buildDeployTransaction();return{to:this.guest,data:mr(LR({space:0n,nonce:0n,calls:[{to:c.to,value:0n,data:c.data,gasLimit:0n,delegateCall:!1,onlyFallback:!1,behaviorOnError:"revert"},{to:this.address,value:0n,data:Bs(Sce,[mr(LR(n.payload)),mr(r3({...o,suffix:r.pendingUpdates.map(({signature:l})=>l)}))]),gasLimit:0n,delegateCall:!1,onlyFallback:!1,behaviorOnError:"revert"}]}))}}}async prepareMessageSignature(e,n){let r;if(typeof e!="string")r=S2e(e);else{let s=h4(e)?e:Il(e);const i=ui(s);r=Us(Il(`${`Ethereum Signed Message:
${i}`}`),s)}return{...await this.prepareBlankEnvelope(n),payload:YL(r)}}async buildMessageSignature(e,n){const r=await this.getStatus(n),s=nO(e);if(!r.isDeployed){const a=await this.buildDeployTransaction();s.erc6492={to:a.to,data:Lt(a.data)}}return r3({...s,suffix:r.pendingUpdates.map(({signature:a})=>a)})}async prepareBlankEnvelope(e,n){const r=await this.getStatus(n);return{wallet:this.address,chainId:e,configuration:r.configuration}}};function Ert(t){return"estimateLimits"in t&&"relay"in t&&"isAvailable"in t}var Vce="$";function Art(t,e){var n="",r=e&&e.include,s=e&&e.exclude;s&&typeof s=="string"&&(s=[s]),r&&r.sort();var i=new WeakMap,a=e&&e.allowCircular,o=e&&e.filterUndefined,c=e&&e.undefinedInArrayToNull;return l(t,Vce),n;function l(u,f){if(u===null||typeof u!="object"||u.toJSON!=null)n+=JSON.stringify(u);else if(Array.isArray(u)){var d=i.get(u);if(d!==void 0&&f.startsWith(d)){if(!a)throw new Error("Circular reference detected");n+='"[Circular:'+d+']"';return}i.set(u,f),n+="[";var p=!1;u.forEach(function(A,S){p&&(n+=","),p=!0,c&&A===void 0&&(A=null),l(A,f+"["+S+"]")}),n+="]"}else{var d=i.get(u);if(d!==void 0&&f.startsWith(d)){if(!a)throw new Error("Circular reference detected");n+='"[Circular:'+d+']"';return}i.set(u,f),n+="{";var g=!1,m=function(S){s&&s.includes(S)||(g&&(n+=","),g=!0,n+=JSON.stringify(S),n+=":",l(u[S],f+"."+S))};if(f===Vce&&r)r.forEach(function(S){u.hasOwnProperty(S)&&m(S)});else{var v=Object.keys(u);o&&(v=v.filter(function(S){return u[S]!==void 0})),v.sort(),v.forEach(function(S){m(S)})}n+="}"}}}function Bj(t,e){return Art(t,{allowCircular:e,filterUndefined:!0,undefinedInArrayToNull:!0})}const Srt="Webrpc",Irt="webrpc@v0.23.1;gen-typescript@v0.16.3;identity-instrument@v0.1.0";var db;(function(t){t.WebCrypto_Secp256r1="WebCrypto_Secp256r1",t.Ethereum_Secp256k1="Ethereum_Secp256k1"})(db||(db={}));var L0;(function(t){t.Email="Email",t.OIDC="OIDC"})(L0||(L0={}));var hb;(function(t){t.OTP="OTP",t.IDToken="IDToken",t.AccessToken="AccessToken",t.AuthCode="AuthCode",t.AuthCodePKCE="AuthCodePKCE"})(hb||(hb={}));let Crt=class{constructor(e,n){q(this,"hostname");q(this,"fetch");q(this,"path","/rpc/IdentityInstrument/");q(this,"commitVerifier",(e,n,r)=>this.fetch(this.url("CommitVerifier"),Mj(e,n,r)).then(s=>Dj(s).then(i=>({verifier:i.verifier,loginHint:i.loginHint,challenge:i.challenge})),s=>{throw KR.new({cause:`fetch(): ${s.message||""}`})}));q(this,"completeAuth",(e,n,r)=>this.fetch(this.url("CompleteAuth"),Mj(e,n,r)).then(s=>Dj(s).then(i=>({signer:i.signer,identity:i.identity})),s=>{throw KR.new({cause:`fetch(): ${s.message||""}`})}));q(this,"sign",(e,n,r)=>this.fetch(this.url("Sign"),Mj(e,n,r)).then(s=>Dj(s).then(i=>({signature:i.signature})),s=>{throw KR.new({cause:`fetch(): ${s.message||""}`})}));this.hostname=e.replace(/\/*$/,""),this.fetch=(r,s)=>n(r,s)}url(e){return this.hostname+this.path+e}};const Mj=(t={},e={},n=null)=>{const r={...e,"Content-Type":"application/json"};return r[Srt]=Irt,{method:"POST",headers:r,body:JSON.stringify(t||{}),signal:n}},Dj=t=>t.text().then(e=>{let n;try{n=JSON.parse(e)}catch(r){let s="";throw r instanceof Error&&(s=r.message),lAe.new({status:t.status,cause:`JSON.parse(): ${s}: response text: ${e}`})}if(!t.ok){const r=typeof n.code=="number"?n.code:0;throw(Drt[r]||Es).new(n)}return n});let Es=class rAe extends Error{constructor(n,r,s,i,a){super(s);q(this,"name");q(this,"code");q(this,"message");q(this,"status");q(this,"cause");q(this,"msg");this.name=n||"WebrpcError",this.code=typeof r=="number"?r:0,this.message=s||`endpoint error ${this.code}`,this.msg=this.message,this.status=typeof i=="number"?i:0,this.cause=a,Object.setPrototypeOf(this,rAe.prototype)}static new(n){return new this(n.error,n.code,n.message||n.msg,n.status,n.cause)}},Trt=class sAe extends Es{constructor(e="WebrpcEndpoint",n=0,r="endpoint error",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,sAe.prototype)}},KR=class iAe extends Es{constructor(e="WebrpcRequestFailed",n=-1,r="request failed",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,iAe.prototype)}},Nrt=class aAe extends Es{constructor(e="WebrpcBadRoute",n=-2,r="bad route",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,aAe.prototype)}},krt=class oAe extends Es{constructor(e="WebrpcBadMethod",n=-3,r="bad method",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,oAe.prototype)}},Prt=class cAe extends Es{constructor(e="WebrpcBadRequest",n=-4,r="bad request",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,cAe.prototype)}},lAe=class uAe extends Es{constructor(e="WebrpcBadResponse",n=-5,r="bad response",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,uAe.prototype)}},Ort=class fAe extends Es{constructor(e="WebrpcServerPanic",n=-6,r="server panic",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,fAe.prototype)}},Rrt=class dAe extends Es{constructor(e="WebrpcInternalError",n=-7,r="internal error",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,dAe.prototype)}},_rt=class hAe extends Es{constructor(e="WebrpcClientDisconnected",n=-8,r="client disconnected",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,hAe.prototype)}},Brt=class pAe extends Es{constructor(e="WebrpcStreamLost",n=-9,r="stream lost",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,pAe.prototype)}},Mrt=class gAe extends Es{constructor(e="WebrpcStreamFinished",n=-10,r="stream finished",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,gAe.prototype)}};class NX extends Es{constructor(e="InternalError",n=7100,r="Internal error",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,NX.prototype)}}class kX extends Es{constructor(e="EncryptionError",n=7101,r="Encryption error",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,kX.prototype)}}class PX extends Es{constructor(e="DatabaseError",n=7102,r="Database error",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,PX.prototype)}}class OX extends Es{constructor(e="DataIntegrityError",n=7103,r="Data integrity error",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,OX.prototype)}}class RX extends Es{constructor(e="IdentityProviderError",n=7104,r="Identity provider error",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,RX.prototype)}}class _X extends Es{constructor(e="InvalidRequest",n=7200,r="The request was invalid",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,_X.prototype)}}class BX extends Es{constructor(e="InvalidSignature",n=7201,r="The signature was invalid",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,BX.prototype)}}class MX extends Es{constructor(e="KeyNotFound",n=7202,r="The authentication key was not found",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,MX.prototype)}}class DX extends Es{constructor(e="KeyExpired",n=7203,r="The authentication key expired",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,DX.prototype)}}class LX extends Es{constructor(e="SignerNotFound",n=7204,r="The signer was not found",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,LX.prototype)}}class UX extends Es{constructor(e="ProofVerificationFailed",n=7002,r="The authentication proof could not be verified",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,UX.prototype)}}let mAe=class yAe extends Es{constructor(e="AnswerIncorrect",n=7003,r="The provided answer is incorrect",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,yAe.prototype)}},wAe=class bAe extends Es{constructor(e="ChallengeExpired",n=7004,r="The challenge has expired",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,bAe.prototype)}},vAe=class xAe extends Es{constructor(e="TooManyAttempts",n=7005,r="Too many attempts",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,xAe.prototype)}};class FX extends Es{constructor(e="OAuthError",n=7006,r="Failed to exchange OAuth credentials",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,FX.prototype)}}class VX extends Es{constructor(e="AccessError",n=7007,r="Access error",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,VX.prototype)}}var $ce;(function(t){t.WebrpcEndpoint="WebrpcEndpoint",t.WebrpcRequestFailed="WebrpcRequestFailed",t.WebrpcBadRoute="WebrpcBadRoute",t.WebrpcBadMethod="WebrpcBadMethod",t.WebrpcBadRequest="WebrpcBadRequest",t.WebrpcBadResponse="WebrpcBadResponse",t.WebrpcServerPanic="WebrpcServerPanic",t.WebrpcInternalError="WebrpcInternalError",t.WebrpcClientDisconnected="WebrpcClientDisconnected",t.WebrpcStreamLost="WebrpcStreamLost",t.WebrpcStreamFinished="WebrpcStreamFinished",t.InternalError="InternalError",t.EncryptionError="EncryptionError",t.DatabaseError="DatabaseError",t.DataIntegrityError="DataIntegrityError",t.IdentityProviderError="IdentityProviderError",t.InvalidRequest="InvalidRequest",t.InvalidSignature="InvalidSignature",t.KeyNotFound="KeyNotFound",t.KeyExpired="KeyExpired",t.SignerNotFound="SignerNotFound",t.ProofVerificationFailed="ProofVerificationFailed",t.AnswerIncorrect="AnswerIncorrect",t.ChallengeExpired="ChallengeExpired",t.TooManyAttempts="TooManyAttempts",t.OAuthError="OAuthError",t.AccessError="AccessError"})($ce||($ce={}));var jce;(function(t){t[t.WebrpcEndpoint=0]="WebrpcEndpoint",t[t.WebrpcRequestFailed=-1]="WebrpcRequestFailed",t[t.WebrpcBadRoute=-2]="WebrpcBadRoute",t[t.WebrpcBadMethod=-3]="WebrpcBadMethod",t[t.WebrpcBadRequest=-4]="WebrpcBadRequest",t[t.WebrpcBadResponse=-5]="WebrpcBadResponse",t[t.WebrpcServerPanic=-6]="WebrpcServerPanic",t[t.WebrpcInternalError=-7]="WebrpcInternalError",t[t.WebrpcClientDisconnected=-8]="WebrpcClientDisconnected",t[t.WebrpcStreamLost=-9]="WebrpcStreamLost",t[t.WebrpcStreamFinished=-10]="WebrpcStreamFinished",t[t.InternalError=7100]="InternalError",t[t.EncryptionError=7101]="EncryptionError",t[t.DatabaseError=7102]="DatabaseError",t[t.DataIntegrityError=7103]="DataIntegrityError",t[t.IdentityProviderError=7104]="IdentityProviderError",t[t.InvalidRequest=7200]="InvalidRequest",t[t.InvalidSignature=7201]="InvalidSignature",t[t.KeyNotFound=7202]="KeyNotFound",t[t.KeyExpired=7203]="KeyExpired",t[t.SignerNotFound=7204]="SignerNotFound",t[t.ProofVerificationFailed=7002]="ProofVerificationFailed",t[t.AnswerIncorrect=7003]="AnswerIncorrect",t[t.ChallengeExpired=7004]="ChallengeExpired",t[t.TooManyAttempts=7005]="TooManyAttempts",t[t.OAuthError=7006]="OAuthError",t[t.AccessError=7007]="AccessError"})(jce||(jce={}));const Drt={0:Trt,[-1]:KR,[-2]:Nrt,[-3]:krt,[-4]:Prt,[-5]:lAe,[-6]:Ort,[-7]:Rrt,[-8]:_rt,[-9]:Brt,[-10]:Mrt,7100:NX,7101:kX,7102:PX,7103:OX,7104:RX,7200:_X,7201:BX,7202:MX,7203:DX,7204:LX,7002:UX,7003:mAe,7004:wAe,7005:vAe,7006:FX,7007:VX};class Lrt extends Error{}Lrt.prototype.name="InvalidTokenError";class $X{}class jX extends $X{constructor(n,r,s,i){super();q(this,"issuer");q(this,"audience");q(this,"redirectUri");q(this,"authCode");q(this,"handle","");q(this,"signer");this.issuer=n,this.audience=r,this.redirectUri=s,this.authCode=i;const a=xr(new TextEncoder().encode(this.authCode));this.handle=Un(a)}getCommitParams(){return{authMode:hb.AuthCode,identityType:L0.OIDC,signer:this.signer,handle:this.handle,metadata:{iss:this.issuer,aud:this.audience,redirect_uri:this.redirectUri}}}getCompleteParams(){return{authMode:hb.AuthCode,identityType:L0.OIDC,verifier:this.handle,answer:this.authCode}}withSigner(n){const r=new jX(this.issuer,this.audience,this.redirectUri,this.authCode);return r.handle=this.handle,r.signer=n,r}}class yk extends $X{constructor(n,r,s){super();q(this,"issuer");q(this,"audience");q(this,"redirectUri");q(this,"verifier");q(this,"authCode");q(this,"signer");this.issuer=n,this.audience=r,this.redirectUri=s}getCommitParams(){return{authMode:hb.AuthCodePKCE,identityType:L0.OIDC,signer:this.signer,metadata:{iss:this.issuer,aud:this.audience,redirect_uri:this.redirectUri}}}getCompleteParams(){if(!this.verifier||!this.authCode)throw new Error("AuthCodePkceChallenge is not complete");return{authMode:hb.AuthCodePKCE,identityType:L0.OIDC,verifier:this.verifier,answer:this.authCode}}withSigner(n){const r=new yk(this.issuer,this.audience,this.redirectUri);return r.verifier=this.verifier,r.signer=n,r}withAnswer(n,r){const s=new yk(this.issuer,this.audience,this.redirectUri);return s.signer=this.signer,s.verifier=n,s.authCode=r,s}}class M3 extends $X{constructor(n){super();q(this,"identityType");q(this,"answer");q(this,"recipient");q(this,"signer");this.identityType=n}static fromRecipient(n,r){const s=new M3(n);return s.recipient=r,s}static fromSigner(n,r){const s=new M3(n);return s.signer=r,s}getCommitParams(){if(!this.recipient&&(!this.signer||!this.signer.address||!this.signer.keyType))throw new Error("OtpChallenge is not complete");return{authMode:hb.OTP,identityType:this.identityType,handle:this.recipient,signer:this.signer,metadata:{}}}getCompleteParams(){if(!this.answer||!this.recipient&&!this.signer)throw new Error("OtpChallenge is not complete");return{authMode:hb.OTP,identityType:this.identityType,verifier:this.recipient??(this.signer?`${this.signer.keyType}:${this.signer.address}`:""),answer:this.answer}}withAnswer(n,r){const s=new M3(this.identityType);s.recipient=this.recipient,s.signer=this.signer;const i=xr(vi(n+r));return s.answer=Un(i),s}}class Urt{constructor(e,n,r=window.fetch){q(this,"scope");q(this,"rpc");this.rpc=new Crt(e.endsWith("/")?e.slice(0,-1):e,r),this.scope=n}async commitVerifier(e,n){const r={...n.getCommitParams(),scope:this.scope},s=await e.sign(vi(Bj(r)));return this.rpc.commitVerifier({params:r,authKey:{address:e.address,keyType:e.keyType},signature:s})}async completeAuth(e,n){const r={...n.getCompleteParams(),signerType:db.Ethereum_Secp256k1,scope:this.scope},s=await e.sign(vi(Bj(r)));return this.rpc.completeAuth({params:r,authKey:{address:e.address,keyType:e.keyType},signature:s})}async sign(e,n){const r={scope:this.scope,signer:{address:e.signer,keyType:db.Ethereum_Secp256k1},digest:Un(n),nonce:Gn(Date.now())},s=await this.rpc.sign({params:r,authKey:{address:e.address,keyType:e.keyType},signature:await e.sign(vi(Bj(r)))});return Mi(s.signature),s.signature}}function UW(t,e){var s;const n=globalThis,r=e??((s=n.window)==null?void 0:s.crypto)??n.crypto;if(!(r!=null&&r.subtle))throw new Error("crypto.subtle is not available");return{address:t.address,keyType:db.WebCrypto_Secp256r1,signer:t.identitySigner,async sign(i){const a=await r.subtle.sign({name:"ECDSA",hash:"SHA-256"},t.privateKey,new Uint8Array(i));return Un(new Uint8Array(a))}}}class Hce{constructor(e,n,r){q(this,"identityInstrument");q(this,"authKey");q(this,"crypto");this.identityInstrument=e,this.authKey=n,this.crypto=r}get address(){if(!c5(this.authKey.identitySigner))throw new Error("No signer address found");return Zd(this.authKey.identitySigner)}async sign(e,n,r){const s=Fd(e,n,r);return this.signDigest(s)}async signDigest(e){const n=await this.identityInstrument.sign(UW(this.authKey,this.crypto),e);return{type:"hash",...WL(n)}}async witness(e,n,r){const s=YL(Il(JSON.stringify({action:"consent-to-be-part-of-wallet",wallet:n,signer:this.address,timestamp:Date.now(),...r}))),i=await this.sign(n,0,s);await e.saveWitnesses(n,0,s,{type:"unrecovered-signer",weight:1n,signature:i})}}var qce;(function(t){t.UNKNOWN="UNKNOWN",t.DROPPED="DROPPED",t.QUEUED="QUEUED",t.SENT="SENT",t.SUCCEEDED="SUCCEEDED",t.PARTIALLY_FAILED="PARTIALLY_FAILED",t.FAILED="FAILED",t.PENDING_PRECONDITION="PENDING_PRECONDITION"})(qce||(qce={}));var Kce;(function(t){t.SEND="SEND",t.RECEIVE="RECEIVE",t.BRIDGE_DEPOSIT="BRIDGE_DEPOSIT",t.BRIDGE_WITHDRAW="BRIDGE_WITHDRAW",t.BURN="BURN",t.UNKNOWN="UNKNOWN"})(Kce||(Kce={}));var Gce;(function(t){t.SKIPPED="SKIPPED",t.SUCCEEDED="SUCCEEDED",t.FAILED="FAILED",t.ABORTED="ABORTED",t.REVERTED="REVERTED",t.NOT_ENOUGH_GAS="NOT_ENOUGH_GAS"})(Gce||(Gce={}));var Wce;(function(t){t.UNKNOWN="UNKNOWN",t.ERC20_TOKEN="ERC20_TOKEN",t.ERC1155_TOKEN="ERC1155_TOKEN"})(Wce||(Wce={}));var zce;(function(t){t.DESC="DESC",t.ASC="ASC"})(zce||(zce={}));var Jce;(function(t){t.WebrpcEndpoint="WebrpcEndpoint",t.WebrpcRequestFailed="WebrpcRequestFailed",t.WebrpcBadRoute="WebrpcBadRoute",t.WebrpcBadMethod="WebrpcBadMethod",t.WebrpcBadRequest="WebrpcBadRequest",t.WebrpcBadResponse="WebrpcBadResponse",t.WebrpcServerPanic="WebrpcServerPanic",t.WebrpcInternalError="WebrpcInternalError",t.WebrpcClientAborted="WebrpcClientAborted",t.WebrpcStreamLost="WebrpcStreamLost",t.WebrpcStreamFinished="WebrpcStreamFinished",t.Unauthorized="Unauthorized",t.PermissionDenied="PermissionDenied",t.SessionExpired="SessionExpired",t.MethodNotFound="MethodNotFound",t.RequestConflict="RequestConflict",t.Aborted="Aborted",t.Geoblocked="Geoblocked",t.RateLimited="RateLimited",t.ProjectNotFound="ProjectNotFound",t.AccessKeyNotFound="AccessKeyNotFound",t.AccessKeyMismatch="AccessKeyMismatch",t.InvalidOrigin="InvalidOrigin",t.InvalidService="InvalidService",t.UnauthorizedUser="UnauthorizedUser",t.QuotaExceeded="QuotaExceeded",t.QuotaRateLimit="QuotaRateLimit",t.NoDefaultKey="NoDefaultKey",t.MaxAccessKeys="MaxAccessKeys",t.AtLeastOneKey="AtLeastOneKey",t.Timeout="Timeout",t.InvalidArgument="InvalidArgument",t.Unavailable="Unavailable",t.QueryFailed="QueryFailed",t.NotFound="NotFound",t.InsufficientFee="InsufficientFee",t.NotEnoughBalance="NotEnoughBalance",t.SimulationFailed="SimulationFailed"})(Jce||(Jce={}));var Yce;(function(t){t[t.WebrpcEndpoint=0]="WebrpcEndpoint",t[t.WebrpcRequestFailed=-1]="WebrpcRequestFailed",t[t.WebrpcBadRoute=-2]="WebrpcBadRoute",t[t.WebrpcBadMethod=-3]="WebrpcBadMethod",t[t.WebrpcBadRequest=-4]="WebrpcBadRequest",t[t.WebrpcBadResponse=-5]="WebrpcBadResponse",t[t.WebrpcServerPanic=-6]="WebrpcServerPanic",t[t.WebrpcInternalError=-7]="WebrpcInternalError",t[t.WebrpcClientAborted=-8]="WebrpcClientAborted",t[t.WebrpcStreamLost=-9]="WebrpcStreamLost",t[t.WebrpcStreamFinished=-10]="WebrpcStreamFinished",t[t.Unauthorized=1e3]="Unauthorized",t[t.PermissionDenied=1001]="PermissionDenied",t[t.SessionExpired=1002]="SessionExpired",t[t.MethodNotFound=1003]="MethodNotFound",t[t.RequestConflict=1004]="RequestConflict",t[t.Aborted=1005]="Aborted",t[t.Geoblocked=1006]="Geoblocked",t[t.RateLimited=1007]="RateLimited",t[t.ProjectNotFound=1008]="ProjectNotFound",t[t.AccessKeyNotFound=1101]="AccessKeyNotFound",t[t.AccessKeyMismatch=1102]="AccessKeyMismatch",t[t.InvalidOrigin=1103]="InvalidOrigin",t[t.InvalidService=1104]="InvalidService",t[t.UnauthorizedUser=1105]="UnauthorizedUser",t[t.QuotaExceeded=1200]="QuotaExceeded",t[t.QuotaRateLimit=1201]="QuotaRateLimit",t[t.NoDefaultKey=1300]="NoDefaultKey",t[t.MaxAccessKeys=1301]="MaxAccessKeys",t[t.AtLeastOneKey=1302]="AtLeastOneKey",t[t.Timeout=1900]="Timeout",t[t.InvalidArgument=2001]="InvalidArgument",t[t.Unavailable=2002]="Unavailable",t[t.QueryFailed=2003]="QueryFailed",t[t.NotFound=3e3]="NotFound",t[t.InsufficientFee=3004]="InsufficientFee",t[t.NotEnoughBalance=3005]="NotEnoughBalance",t[t.SimulationFailed=3006]="SimulationFailed"})(Yce||(Yce={}));Er(["function isValidSignature(bytes32 _hash, bytes memory _signature) public view returns (bytes4 magicValue)"])[0];Er(["function deploy(address _mainModule, bytes32 _salt) public payable returns (address _contract)"])[0];Er(["function getImplementation() external view returns (address)"])[0];Er(["function imageHash() external view returns (bytes32)"])[0];Er(["function readNonce(uint256 _space) public view returns (uint256)"])[0];Er(["function execute(bytes calldata _payload, bytes calldata _signature) external"])[0];Er(["function updateImageHash(bytes32 _imageHash) external"])[0];Er(["function recoverSapientSignature((uint8 kind,bool noChainId,(address to,uint256 value,bytes data,uint256 gasLimit,bool delegateCall,bool onlyFallback,uint256 behaviorOnError)[] calls,uint256 space,uint256 nonce,bytes message,bytes32 imageHash,bytes32 digest,address[] parentWallets) calldata _payload, bytes calldata _signature) external view returns (bytes32)"])[0];Er(["function recoverSapientSignatureCompact(bytes32 _digest, bytes calldata _signature) external view returns (bytes32)"])[0];Er(["function executeUserOp(bytes calldata _userOp) external"])[0];Er(["function getNonce(address _account, uint192 _key) public view returns (uint256)"])[0];Er(["function entrypoint() public view returns (address)"])[0];Er([{type:"function",name:"incrementUsageLimit",inputs:[{name:"limits",type:"tuple[]",internalType:"struct UsageLimit[]",components:[{name:"usageHash",type:"bytes32",internalType:"bytes32"},{name:"usageAmount",type:"uint256",internalType:"uint256"}]}],outputs:[],stateMutability:"nonpayable"}])[0];Er(["function getLimitUsage(address wallet, bytes32 usageHash) public view returns (uint256)"])[0];xr(vi("acceptImplicitRequest"));var Qce;(function(t){t[t.EQUAL=0]="EQUAL",t[t.NOT_EQUAL=1]="NOT_EQUAL",t[t.GREATER_THAN_OR_EQUAL=2]="GREATER_THAN_OR_EQUAL",t[t.LESS_THAN_OR_EQUAL=3]="LESS_THAN_OR_EQUAL"})(Qce||(Qce={}));QZ(Lt("0xffffffff"),32),dt(Lt("0xffffffffffffffffffffffffffffffffffffffff"),32),dt(Lt("0x01"),32),dt(Ln(Array(1).fill(255)),32),dt(Ln(Array(2).fill(255)),32),dt(Ln(Array(4).fill(255)),32),dt(Ln(Array(8).fill(255)),32),dt(Ln(Array(16).fill(255)),32),dt(Ln(Array(32).fill(255)),32),dt(Ln(Array(1).fill(255)),32),dt(Ln(Array(2).fill(255)),32),dt(Ln(Array(4).fill(255)),32),dt(Ln(Array(8).fill(255)),32),dt(Ln(Array(16).fill(255)),32),dt(Ln(Array(32).fill(255)),32),dt(Ln(Array(1).fill(255)),32),dt(Ln(Array(2).fill(255)),32),dt(Ln(Array(4).fill(255)),32),dt(Ln(Array(8).fill(255)),32),dt(Ln(Array(16).fill(255)),32),dt(Ln(Array(32).fill(255)),32);vi(`Sequence recovery leaf:
`);Er(["function queuePayload(address _wallet, address _signer, (uint8 kind,bool noChainId,(address to,uint256 value,bytes data,uint256 gasLimit,bool delegateCall,bool onlyFallback,uint256 behaviorOnError)[] calls,uint256 space,uint256 nonce,bytes message,bytes32 imageHash,bytes32 digest,address[] parentWallets) calldata _payload, bytes calldata _signature) external"])[0];Er(["function timestampForQueuedPayload(address _wallet, address _signer, bytes32 _payloadHash) external view returns (uint256)"])[0];Er(["function queuedPayloadHashes(address _wallet, address _signer, uint256 _index) external view returns (bytes32)"])[0];Er(["function totalQueuedPayloads(address _wallet, address _signer) external view returns (uint256)"])[0];const Zn="0xcA11bde05977b3631167028862bE2a173976CA11",T8="0xae96419a81516f063744206d4b5E36f3168280f8";var wn;(function(t){t.MAINNET="mainnet",t.TESTNET="testnet"})(wn||(wn={}));const ot={MAINNET:1,SEPOLIA:11155111,POLYGON:137,POLYGON_ZKEVM:1101,POLYGON_AMOY:80002,BSC:56,BSC_TESTNET:97,OPTIMISM:10,OPTIMISM_SEPOLIA:11155420,ARBITRUM:42161,ARBITRUM_SEPOLIA:421614,ARBITRUM_NOVA:42170,AVALANCHE:43114,AVALANCHE_TESTNET:43113,GNOSIS:100,BASE:8453,BASE_SEPOLIA:84532,HOMEVERSE_TESTNET:40875,HOMEVERSE:19011,XAI:660279,XAI_SEPOLIA:37714555429,TELOS:40,TELOS_TESTNET:41,B3:8333,B3_SEPOLIA:1993,APECHAIN:33139,APECHAIN_TESTNET:33111,BLAST:81457,BLAST_SEPOLIA:168587773,SKALE_NEBULA:1482601649,SKALE_NEBULA_TESTNET:37084624,SONEIUM_MINATO:1946,SONEIUM:1868,TOY_TESTNET:21e6,IMMUTABLE_ZKEVM:13371,IMMUTABLE_ZKEVM_TESTNET:13473,ETHERLINK:42793,ETHERLINK_SHADOWNET_TESTNET:127823,MOONBEAM:1284,MOONBASE_ALPHA:1287,MONAD:143,MONAD_TESTNET:10143,SOMNIA_TESTNET:50312,SOMNIA:5031,INCENTIV_TESTNET_V2:28802,KATANA:747474,SANDBOX_TESTNET:6252,ARC_TESTNET:5042002,HYPEREVM:999,SONIC:146,BERACHAIN:80094};ot.MAINNET,wn.MAINNET,On("mainnet"),Rn(ot.MAINNET),ot.SEPOLIA,wn.TESTNET,On("sepolia"),Rn(ot.SEPOLIA),ot.POLYGON,wn.MAINNET,On("polygon"),Rn(ot.POLYGON),ot.POLYGON_AMOY,wn.TESTNET,On("amoy"),Rn(ot.POLYGON_AMOY),ot.POLYGON_ZKEVM,wn.MAINNET,On("polygon-zkevm"),Rn(ot.POLYGON_ZKEVM),ot.BSC,wn.MAINNET,On("bsc"),Rn(ot.BSC),ot.BSC_TESTNET,wn.TESTNET,On("bsc-testnet"),Rn(ot.BSC_TESTNET),ot.OPTIMISM,wn.MAINNET,On("optimism"),Rn(ot.OPTIMISM),ot.OPTIMISM_SEPOLIA,wn.TESTNET,On("optimism-sepolia"),Rn(ot.OPTIMISM_SEPOLIA),ot.ARBITRUM,wn.MAINNET,On("arbitrum"),Rn(ot.ARBITRUM),ot.ARBITRUM_SEPOLIA,wn.TESTNET,On("arbitrum-sepolia"),Rn(ot.ARBITRUM_SEPOLIA),ot.ARBITRUM_NOVA,wn.MAINNET,On("arbitrum-nova"),Rn(ot.ARBITRUM_NOVA),ot.AVALANCHE,wn.MAINNET,On("avalanche"),Rn(ot.AVALANCHE),ot.AVALANCHE_TESTNET,wn.TESTNET,On("avalanche-testnet"),Rn(ot.AVALANCHE_TESTNET),ot.GNOSIS,wn.MAINNET,On("gnosis"),Rn(ot.GNOSIS),ot.BASE,wn.MAINNET,On("base"),Rn(ot.BASE),ot.BASE_SEPOLIA,wn.TESTNET,On("base-sepolia"),Rn(ot.BASE_SEPOLIA),ot.HOMEVERSE,wn.MAINNET,On("homeverse"),Rn(ot.HOMEVERSE),ot.HOMEVERSE_TESTNET,wn.TESTNET,On("homeverse-testnet"),Rn(ot.HOMEVERSE_TESTNET),ot.XAI,wn.MAINNET,On("xai"),Rn(ot.XAI),ot.XAI_SEPOLIA,wn.TESTNET,On("xai-sepolia"),Rn(ot.XAI_SEPOLIA),ot.B3,wn.MAINNET,On("b3"),Rn(ot.B3),ot.B3_SEPOLIA,wn.TESTNET,On("b3-sepolia"),Rn(ot.B3_SEPOLIA),ot.APECHAIN,wn.MAINNET,On("apechain"),Rn(ot.APECHAIN),ot.APECHAIN_TESTNET,wn.TESTNET,On("apechain-testnet"),Rn(ot.APECHAIN_TESTNET),ot.BLAST,wn.MAINNET,On("blast"),Rn(ot.BLAST),ot.BLAST_SEPOLIA,wn.TESTNET,On("blast-sepolia"),Rn(ot.BLAST_SEPOLIA),ot.TELOS,wn.MAINNET,On("telos"),Rn(ot.TELOS),ot.TELOS_TESTNET,wn.TESTNET,On("telos-testnet"),Rn(ot.TELOS_TESTNET),ot.SKALE_NEBULA,wn.MAINNET,On("skale-nebula"),Rn(ot.SKALE_NEBULA),ot.SKALE_NEBULA_TESTNET,wn.TESTNET,On("skale-nebula-testnet"),Rn(ot.SKALE_NEBULA_TESTNET),ot.SONEIUM,wn.MAINNET,On("soneium"),Rn(ot.SONEIUM),ot.SONEIUM_MINATO,wn.TESTNET,On("soneium-minato"),Rn(ot.SONEIUM_MINATO),ot.TOY_TESTNET,wn.TESTNET,On("toy-testnet"),Rn(ot.TOY_TESTNET),ot.IMMUTABLE_ZKEVM,wn.MAINNET,On("immutable-zkevm"),Rn(ot.IMMUTABLE_ZKEVM),ot.IMMUTABLE_ZKEVM_TESTNET,wn.TESTNET,On("immutable-zkevm-testnet"),Rn(ot.IMMUTABLE_ZKEVM_TESTNET),ot.MOONBEAM,wn.MAINNET,On("moonbeam"),Rn(ot.MOONBEAM),ot.MOONBASE_ALPHA,wn.TESTNET,On("moonbase-alpha"),Rn(ot.MOONBASE_ALPHA),ot.ETHERLINK,wn.MAINNET,On("etherlink"),Rn(ot.ETHERLINK),ot.ETHERLINK_SHADOWNET_TESTNET,wn.TESTNET,On("etherlink-shadownet-testnet"),Rn(ot.ETHERLINK_SHADOWNET_TESTNET),ot.MONAD,wn.MAINNET,On("monad"),Rn(ot.MONAD),ot.MONAD_TESTNET,wn.TESTNET,On("monad-testnet"),Rn(ot.MONAD_TESTNET),ot.SOMNIA,wn.MAINNET,On("somnia"),Rn(ot.SOMNIA),ot.SOMNIA_TESTNET,wn.TESTNET,On("somnia-testnet"),Rn(ot.SOMNIA_TESTNET),ot.INCENTIV_TESTNET_V2,wn.TESTNET,On("incentiv-testnet-v2"),Rn(ot.INCENTIV_TESTNET_V2),ot.KATANA,wn.MAINNET,On("katana"),Rn(ot.KATANA),ot.SANDBOX_TESTNET,wn.TESTNET,On("sandbox-testnet"),Rn(ot.SANDBOX_TESTNET),ot.ARC_TESTNET,wn.TESTNET,On("arc-testnet"),Rn(ot.ARC_TESTNET),ot.HYPEREVM,wn.MAINNET,On("hyperevm"),Rn(ot.HYPEREVM),ot.BERACHAIN,wn.MAINNET,On("berachain"),Rn(ot.BERACHAIN),ot.SONIC,wn.MAINNET,On("sonic"),Rn(ot.SONIC);function On(t){return`https://nodes.sequence.app/${t}`}function Rn(t){return`https://assets.sequence.info/images/networks/medium/${t}.webp`}class Frt{constructor(e,n,r){q(this,"address");q(this,"min");q(this,"max");this.address=e,this.min=n,this.max=r}type(){return"native-balance"}isValid(){if(!this.address)return new Error("address is required");if(this.min!==void 0&&this.max!==void 0&&this.min>this.max)return new Error("min balance cannot be greater than max balance")}}class Vrt{constructor(e,n,r,s){q(this,"address");q(this,"token");q(this,"min");q(this,"max");this.address=e,this.token=n,this.min=r,this.max=s}type(){return"erc20-balance"}isValid(){if(!this.address)return new Error("address is required");if(!this.token)return new Error("token address is required");if(this.min!==void 0&&this.max!==void 0&&this.min>this.max)return new Error("min balance cannot be greater than max balance")}}class $rt{constructor(e,n,r,s){q(this,"address");q(this,"token");q(this,"operator");q(this,"min");this.address=e,this.token=n,this.operator=r,this.min=s}type(){return"erc20-approval"}isValid(){if(!this.address)return new Error("address is required");if(!this.token)return new Error("token address is required");if(!this.operator)return new Error("operator address is required");if(this.min===void 0)return new Error("min approval amount is required")}}class jrt{constructor(e,n,r,s){q(this,"address");q(this,"token");q(this,"tokenId");q(this,"owned");this.address=e,this.token=n,this.tokenId=r,this.owned=s}type(){return"erc721-ownership"}isValid(){if(!this.address)return new Error("address is required");if(!this.token)return new Error("token address is required");if(this.tokenId===void 0)return new Error("tokenId is required")}}class Hrt{constructor(e,n,r,s){q(this,"address");q(this,"token");q(this,"tokenId");q(this,"operator");this.address=e,this.token=n,this.tokenId=r,this.operator=s}type(){return"erc721-approval"}isValid(){if(!this.address)return new Error("address is required");if(!this.token)return new Error("token address is required");if(this.tokenId===void 0)return new Error("tokenId is required");if(!this.operator)return new Error("operator address is required")}}class qrt{constructor(e,n,r,s,i){q(this,"address");q(this,"token");q(this,"tokenId");q(this,"min");q(this,"max");this.address=e,this.token=n,this.tokenId=r,this.min=s,this.max=i}type(){return"erc1155-balance"}isValid(){if(!this.address)return new Error("address is required");if(!this.token)return new Error("token address is required");if(this.tokenId===void 0)return new Error("tokenId is required");if(this.min!==void 0&&this.max!==void 0&&this.min>this.max)return new Error("min balance cannot be greater than max balance")}}class Krt{constructor(e,n,r,s,i){q(this,"address");q(this,"token");q(this,"tokenId");q(this,"operator");q(this,"min");this.address=e,this.token=n,this.tokenId=r,this.operator=s,this.min=i}type(){return"erc1155-approval"}isValid(){if(!this.address)return new Error("address is required");if(!this.token)return new Error("token address is required");if(this.tokenId===void 0)return new Error("tokenId is required");if(!this.operator)return new Error("operator address is required");if(this.min===void 0)return new Error("min approval amount is required")}}function Grt(t){if(!t)return;if(typeof t.minAmount!="bigint"){console.warn("Failed to decode precondition: minAmount must be a bigint");return}let e;try{switch(t.type){case"native-balance":e=new Frt(Yi(t.ownerAddress),t.minAmount,void 0);break;case"erc20-balance":e=new Vrt(Yi(t.ownerAddress),Yi(t.tokenAddress),t.minAmount,void 0);break;case"erc20-approval":e=new $rt(Yi(t.ownerAddress),Yi(t.tokenAddress),Yi(t.ownerAddress),t.minAmount);break;case"erc721-ownership":e=new jrt(Yi(t.ownerAddress),Yi(t.tokenAddress),BigInt(0),!0);break;case"erc721-approval":e=new Hrt(Yi(t.ownerAddress),Yi(t.tokenAddress),BigInt(0),Yi(t.ownerAddress));break;case"erc1155-balance":e=new qrt(Yi(t.ownerAddress),Yi(t.tokenAddress),BigInt(0),t.minAmount,void 0);break;case"erc1155-approval":e=new Krt(Yi(t.ownerAddress),Yi(t.tokenAddress),BigInt(0),Yi(t.ownerAddress),t.minAmount);break;default:return}const n=e.isValid();if(n){console.warn(`Invalid precondition: ${n.message}`);return}return e}catch(n){console.warn(`Failed to decode precondition: ${n}`);return}}const Wrt=H2("function balanceOf(address) returns (uint256)"),zrt=H2("function allowance(address,address) returns (uint256)"),Jrt=H2("function ownerOf(uint256) returns (address)"),Yrt=H2("function getApproved(uint256) returns (address)"),Qrt=H2("function balanceOf(address,uint256) returns (uint256)"),Zrt=H2("function isApprovedForAll(address,address) returns (bool)");function lM(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new fst(t.type);return`${t.name}(${HX(t.inputs,{includeName:e})})`}function HX(t,{includeName:e=!1}={}){return t?t.map(n=>Xrt(n,{includeName:e})).join(e?", ":","):""}function Xrt(t,{includeName:e}){return t.type.startsWith("tuple")?`(${HX(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function q2(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function qi(t){return q2(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const EAe="2.46.3";let N8={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${EAe}`},sr=class FW extends Error{constructor(e,n={}){var o;const r=(()=>{var c;return n.cause instanceof FW?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof FW&&n.cause.docsPath||n.docsPath,i=(o=N8.getDocsUrl)==null?void 0:o.call(N8,{...n,docsPath:s}),a=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...N8.version?[`Version: ${N8.version}`]:[]].join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=EAe}walk(e){return AAe(this,e)}};function AAe(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?AAe(t.cause,e):e?null:t}class est extends sr{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${HX(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class tst extends sr{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class nst extends sr{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class rst extends sr{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${qi(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class sst extends sr{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Zce extends sr{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class ist extends sr{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://4byte.sourcify.dev/?q=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class ast extends sr{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${lM(e.abiItem)}\`, and`,`\`${n.type}\` in \`${lM(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class ost extends sr{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class cst extends sr{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class lst extends sr{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class ust extends sr{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class fst extends sr{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class SAe extends sr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let IAe=class extends sr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};function w4(t,{dir:e,size:n=32}={}){return typeof t=="string"?zw(t,{dir:e,size:n}):dst(t,{dir:e,size:n})}function zw(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new IAe({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function dst(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new IAe({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class qX extends sr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class hst extends sr{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}let pst=class extends sr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function b2(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function z0(t,{size:e}){if(qi(t)>e)throw new pst({givenSize:qi(t),maxSize:e})}function uM(t,e={}){const{signed:n}=e;e.size&&z0(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function CAe(t,e={}){const n=uM(t,e),r=Number(n);if(!Number.isSafeInteger(r))throw new qX({max:`${Number.MAX_SAFE_INTEGER}`,min:`${Number.MIN_SAFE_INTEGER}`,signed:e.signed,size:e.size,value:`${n}n`});return r}const gst=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function v2(t,e={}){return typeof t=="number"||typeof t=="bigint"?Wn(t,e):typeof t=="string"?fM(t,e):typeof t=="boolean"?TAe(t,e):qc(t,e)}function TAe(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(z0(n,{size:e.size}),w4(n,{size:e.size})):n}function qc(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=gst[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(z0(r,{size:e.size}),w4(r,{dir:"right",size:e.size})):r}function Wn(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const c=typeof t=="bigint"?"n":"";throw new qX({max:i?`${i}${c}`:void 0,min:`${a}${c}`,signed:n,size:r,value:`${t}${c}`})}const o=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?w4(o,{size:r}):o}const mst=new TextEncoder;function fM(t,e={}){const n=mst.encode(t);return qc(n,e)}const yst=new TextEncoder;function KX(t,e={}){return typeof t=="number"||typeof t=="bigint"?bst(t,e):typeof t=="boolean"?wst(t,e):q2(t)?ah(t,e):NAe(t,e)}function wst(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(z0(n,{size:e.size}),w4(n,{size:e.size})):n}const Ep={zero:48,nine:57,A:65,F:70,a:97,f:102};function Xce(t){if(t>=Ep.zero&&t<=Ep.nine)return t-Ep.zero;if(t>=Ep.A&&t<=Ep.F)return t-(Ep.A-10);if(t>=Ep.a&&t<=Ep.f)return t-(Ep.a-10)}function ah(t,e={}){let n=t;e.size&&(z0(n,{size:e.size}),n=w4(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let a=0,o=0;a<s;a++){const c=Xce(r.charCodeAt(o++)),l=Xce(r.charCodeAt(o++));if(c===void 0||l===void 0)throw new sr(`Invalid byte sequence ("${r[o-2]}${r[o-1]}" in "${r}").`);i[a]=c*16+l}return i}function bst(t,e){const n=Wn(t,e);return ah(n)}function NAe(t,e={}){const n=yst.encode(t);return typeof e.size=="number"?(z0(n,{size:e.size}),w4(n,{dir:"right",size:e.size})):n}function gu(t,e){const n=e||"hex",r=Yve(q2(t,{strict:!1})?KX(t):t);return n==="bytes"?r:v2(r)}const vst=t=>gu(KX(t));function xst(t){return vst(t)}function Est(t){let e=!0,n="",r=0,s="",i=!1;for(let a=0;a<t.length;a++){const o=t[a];if(["(",")",","].includes(o)&&(e=!0),o==="("&&r++,o===")"&&r--,!!e){if(r===0){if(o===" "&&["event","function",""].includes(s))s="";else if(s+=o,o===")"){i=!0;break}continue}if(o===" "){t[a-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=o,n+=o}}if(!i)throw new sr("Unable to normalize signature.");return s}const Ast=t=>{const e=typeof t=="string"?t:GB(t);return Est(e)};function kAe(t){return xst(Ast(t))}const Sst=kAe;class Gg extends sr{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class PAe extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Lj=new PAe(8192);function GX(t,e){if(Lj.has(`${t}.${e}`))return Lj.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=gu(NAe(n),"bytes"),s=n.split("");for(let a=0;a<40;a+=2)r[a>>1]>>4>=8&&s[a]&&(s[a]=s[a].toUpperCase()),(r[a>>1]&15)>=8&&s[a+1]&&(s[a+1]=s[a+1].toUpperCase());const i=`0x${s.join("")}`;return Lj.set(`${t}.${e}`,i),i}const Ist=/^0x[a-fA-F0-9]{40}$/,Uj=new PAe(8192);function Ja(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(Uj.has(r))return Uj.get(r);const s=Ist.test(t)?t.toLowerCase()===t?!0:n?GX(t)===t:!0:!1;return Uj.set(r,s),s}function pb(t){return typeof t[0]=="string"?K2(t):Cst(t)}function Cst(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function K2(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function wk(t,e,n,{strict:r}={}){return q2(t,{strict:!1})?Tst(t,e,n,{strict:r}):_Ae(t,e,n,{strict:r})}function OAe(t,e){if(typeof e=="number"&&e>0&&e>qi(t)-1)throw new SAe({offset:e,position:"start",size:qi(t)})}function RAe(t,e,n){if(typeof e=="number"&&typeof n=="number"&&qi(t)!==n-e)throw new SAe({offset:n,position:"end",size:qi(t)})}function _Ae(t,e,n,{strict:r}={}){OAe(t,e);const s=t.slice(e,n);return r&&RAe(s,e,n),s}function Tst(t,e,n,{strict:r}={}){OAe(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&RAe(s,e,n),s}const Nst=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,BAe=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function WX(t,e){if(t.length!==e.length)throw new sst({expectedLength:t.length,givenLength:e.length});const n=kst({params:t,values:e}),r=JX(n);return r.length===0?"0x":r}function kst({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(zX({param:t[r],value:e[r]}));return n}function zX({param:t,value:e}){const n=YX(t.type);if(n){const[r,s]=n;return Ost(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return Dst(e,{param:t});if(t.type==="address")return Pst(e);if(t.type==="bool")return _st(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=BAe.exec(t.type)??[];return Bst(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return Rst(e,{param:t});if(t.type==="string")return Mst(e);throw new cst(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function JX(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:o}=t[i];a?e+=32:e+=qi(o)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:o}=t[i];a?(n.push(Wn(e+s,{size:32})),r.push(o),s+=qi(o)):n.push(o)}return pb([...n,...r])}function Pst(t){if(!Ja(t))throw new Gg({address:t});return{dynamic:!1,encoded:zw(t.toLowerCase())}}function Ost(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new ust(t);if(!r&&t.length!==e)throw new nst({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let a=0;a<t.length;a++){const o=zX({param:n,value:t[a]});o.dynamic&&(s=!0),i.push(o)}if(r||s){const a=JX(i);if(r){const o=Wn(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?pb([o,a]):o}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:pb(i.map(({encoded:a})=>a))}}function Rst(t,{param:e}){const[,n]=e.type.split("bytes"),r=qi(t);if(!n){let s=t;return r%32!==0&&(s=zw(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:pb([zw(Wn(r,{size:32})),s])}}if(r!==Number.parseInt(n,10))throw new rst({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:zw(t,{dir:"right"})}}function _st(t){if(typeof t!="boolean")throw new sr(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:zw(TAe(t))}}function Bst(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new qX({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Wn(t,{size:32,signed:e})}}function Mst(t){const e=fM(t),n=Math.ceil(qi(e)/32),r=[];for(let s=0;s<n;s++)r.push(zw(wk(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:pb([zw(Wn(qi(e),{size:32})),...r])}}function Dst(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],a=Array.isArray(t)?s:i.name,o=zX({param:i,value:t[a]});r.push(o),o.dynamic&&(n=!0)}return{dynamic:n,encoded:n?JX(r):pb(r.map(({encoded:s})=>s))}}function YX(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const QX=t=>wk(kAe(t),0,4);function Lst(t){const{abi:e,args:n=[],name:r}=t,s=q2(r,{strict:!1}),i=e.filter(o=>s?o.type==="function"?QX(o)===r:o.type==="event"?Sst(o)===r:!1:"name"in o&&o.name===r);if(i.length===0)return;if(i.length===1)return i[0];let a;for(const o of i){if(!("inputs"in o))continue;if(!n||n.length===0){if(!o.inputs||o.inputs.length===0)return o;continue}if(!o.inputs||o.inputs.length===0||o.inputs.length!==n.length)continue;if(n.every((l,u)=>{const f="inputs"in o&&o.inputs[u];return f?VW(l,f):!1})){if(a&&"inputs"in a&&a.inputs){const l=MAe(o.inputs,a.inputs,n);if(l)throw new ast({abiItem:o,type:l[0]},{abiItem:a,type:l[1]})}a=o}}return a||i[0]}function VW(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Ja(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>n==="object"&&VW(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>VW(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function MAe(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return MAe(s.components,i.components,n[r]);const a=[s.type,i.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?Ja(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?Ja(n[r],{strict:!1}):!1)return a}}const ele="/docs/contract/encodeFunctionData";function Ust(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=Lst({abi:e,args:n,name:r});if(!i)throw new Zce(r,{docsPath:ele});s=i}if(s.type!=="function")throw new Zce(void 0,{docsPath:ele});return{abi:[s],functionName:QX(lM(s))}}function Fj(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var o;return t.abi.length===1&&((o=t.functionName)!=null&&o.startsWith("0x"))?t:Ust(t)})(),s=n[0],i=r,a="inputs"in s&&s.inputs?WX(s.inputs,e??[]):void 0;return K2([i,a??"0x"])}class tle extends sr{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Fst extends sr{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Vst extends sr{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const $st={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Vst({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new Fst({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new tle({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new tle({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function ZX(t,{recursiveReadLimit:e=8192}={}){const n=Object.create($st);return n.bytes=t,n.dataView=new DataView(t.buffer??t,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function jst(t,e={}){typeof e.size<"u"&&z0(t,{size:e.size});const n=qc(t,e);return uM(n,e)}function Hst(t,e={}){let n=t;if(typeof e.size<"u"&&(z0(n,{size:e.size}),n=b2(n)),n.length>1||n[0]>1)throw new hst(n);return!!n[0]}function Rg(t,e={}){typeof e.size<"u"&&z0(t,{size:e.size});const n=qc(t,e);return CAe(n,e)}function qst(t,e={}){let n=t;return typeof e.size<"u"&&(z0(n,{size:e.size}),n=b2(n,{dir:"right"})),new TextDecoder().decode(n)}function Kst(t,e){const n=typeof e=="string"?ah(e):e,r=ZX(n);if(qi(n)===0&&t.length>0)throw new tst;if(qi(e)&&qi(e)<32)throw new est({data:typeof e=="string"?e:qc(e),params:t,size:qi(e)});let s=0;const i=[];for(let a=0;a<t.length;++a){const o=t[a];r.setPosition(s);const[c,l]=D3(r,o,{staticPosition:0});s+=l,i.push(c)}return i}function D3(t,e,{staticPosition:n}){const r=YX(e.type);if(r){const[s,i]=r;return Wst(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return Qst(t,e,{staticPosition:n});if(e.type==="address")return Gst(t);if(e.type==="bool")return zst(t);if(e.type.startsWith("bytes"))return Jst(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return Yst(t,e);if(e.type==="string")return Zst(t,{staticPosition:n});throw new lst(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const nle=32,$W=32;function Gst(t){const e=t.readBytes(32);return[GX(qc(_Ae(e,-20))),32]}function Wst(t,e,{length:n,staticPosition:r}){if(!n){const a=Rg(t.readBytes($W)),o=r+a,c=o+nle;t.setPosition(o);const l=Rg(t.readBytes(nle)),u=bk(e);let f=0;const d=[];for(let p=0;p<l;++p){t.setPosition(c+(u?p*32:f));const[g,m]=D3(t,e,{staticPosition:c});f+=m,d.push(g)}return t.setPosition(r+32),[d,32]}if(bk(e)){const a=Rg(t.readBytes($W)),o=r+a,c=[];for(let l=0;l<n;++l){t.setPosition(o+l*32);const[u]=D3(t,e,{staticPosition:o});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let a=0;a<n;++a){const[o,c]=D3(t,e,{staticPosition:r+s});s+=c,i.push(o)}return[i,s]}function zst(t){return[Hst(t.readBytes(32),{size:32}),32]}function Jst(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const a=Rg(t.readBytes(32));t.setPosition(n+a);const o=Rg(t.readBytes(32));if(o===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(o);return t.setPosition(n+32),[qc(c),32]}return[qc(t.readBytes(Number.parseInt(s,10),32)),32]}function Yst(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?jst(s,{signed:n}):Rg(s,{signed:n}),32]}function Qst(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:a})=>!a),s=r?[]:{};let i=0;if(bk(e)){const a=Rg(t.readBytes($W)),o=n+a;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(o+i);const[u,f]=D3(t,l,{staticPosition:o});i+=f,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let a=0;a<e.components.length;++a){const o=e.components[a],[c,l]=D3(t,o,{staticPosition:n});s[r?a:o==null?void 0:o.name]=c,i+=l}return[s,i]}function Zst(t,{staticPosition:e}){const n=Rg(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Rg(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),a=qst(b2(i));return t.setPosition(e+32),[a,32]}function bk(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(bk);const n=YX(t.type);return!!(n&&bk({...t,type:n[1]}))}const Xst=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),eit={ether:-9,wei:9};function DAe(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function jW(t,e="wei"){return DAe(t,eit[e])}function tit(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class nit extends sr{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class rit extends sr{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",tit(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class sit extends sr{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}function iit(t){const e=gu(`0x${t.substring(4)}`).substring(26);return GX(`0x${e}`)}const ait="modulepreload",oit=function(t){return"/"+t},rle={},cit=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=oit(c),c in rle)return;rle[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":ait,l||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),l)return new Promise((d,p)=>{f.addEventListener("load",d),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function x2(t,e="hex"){const n=LAe(t),r=ZX(new Uint8Array(n.length));return n.encode(r),e==="hex"?qc(r.bytes):r.bytes}function LAe(t){return Array.isArray(t)?lit(t.map(e=>LAe(e))):uit(t)}function lit(t){const e=t.reduce((s,i)=>s+i.length,0),n=UAe(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function uit(t){const e=typeof t=="string"?ah(t):t,n=UAe(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function UAe(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new sr("Length is too large.")}function fit(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=gu(K2(["0x05",x2([e?Wn(e):"0x",s,n?Wn(n):"0x"])]));return r==="bytes"?ah(i):i}class rU extends sr{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${jW(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(rU,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class FAe extends sr{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${jW(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${jW(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(FAe,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});const XX=2n**256n-1n;function VAe(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>ah(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>qc(i))}function $Ae(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(a=>ah(a)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(a=>ah(a)):t.commitments,i=[];for(let a=0;a<r.length;a++){const o=r[a],c=s[a];i.push(Uint8Array.from(e.computeBlobKzgProof(o,c)))}return n==="bytes"?i:i.map(a=>qc(a))}function dit(t,e){return Xve(q2(t,{strict:!1})?KX(t):t)}function hit(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=dit(e);return s.set([n],0),r==="bytes"?s:qc(s)}function pit(t){const{commitments:e,version:n}=t,r=t.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(const i of e)s.push(hit({commitment:i,to:r,version:n}));return s}const sle=6,jAe=32,eee=4096,HAe=jAe*eee,ile=HAe*sle-1-1*eee*sle,qAe=1;class git extends sr{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class KAe extends sr{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class mit extends sr{constructor({hash:e,size:n}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class yit extends sr{constructor({hash:e,version:n}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${qAe}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function wit(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),n=typeof t.data=="string"?ah(t.data):t.data,r=qi(n);if(!r)throw new KAe;if(r>ile)throw new git({maxSize:ile,size:r});const s=[];let i=!0,a=0;for(;i;){const o=ZX(new Uint8Array(HAe));let c=0;for(;c<eee;){const l=n.slice(a,a+(jAe-1));if(o.pushByte(0),o.pushBytes(l),l.length<31){o.pushByte(128),i=!1;break}c++,a+=31}s.push(o)}return e==="bytes"?s.map(o=>o.bytes):s.map(o=>qc(o.bytes))}function bit(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??wit({data:e,to:r}),i=t.commitments??VAe({blobs:s,kzg:n,to:r}),a=t.proofs??$Ae({blobs:s,commitments:i,kzg:n,to:r}),o=[];for(let c=0;c<s.length;c++)o.push({blob:s[c],commitment:i[c],proof:a[c]});return o}function vit(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new rit({transaction:t})}const GAe=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],WAe=[{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC1155InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC1155InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"idsLength",type:"uint256"},{internalType:"uint256",name:"valuesLength",type:"uint256"}],name:"ERC1155InvalidArrayLength",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC1155InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC1155InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC1155InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC1155MissingApprovalForAll",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],zAe=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"event",name:"ApprovalForAll",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"operator",type:"address"},{indexed:!1,name:"approved",type:"bool"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"payable",inputs:[{name:"spender",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"getApproved",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"address"}]},{type:"function",name:"isApprovedForAll",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"operator",type:"address"}],outputs:[{type:"bool"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"ownerOf",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"owner",type:"address"}]},{type:"function",name:"safeTransferFrom",stateMutability:"payable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"safeTransferFrom",stateMutability:"nonpayable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"id",type:"uint256"},{name:"data",type:"bytes"}],outputs:[]},{type:"function",name:"setApprovalForAll",stateMutability:"nonpayable",inputs:[{name:"operator",type:"address"},{name:"approved",type:"bool"}],outputs:[]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"index",type:"uint256"}],outputs:[{type:"uint256"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"index",type:"uint256"}],outputs:[{name:"tokenId",type:"uint256"}]},{type:"function",name:"tokenURI",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transferFrom",stateMutability:"payable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]}];class sU extends sr{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}function Vj(t){const{abi:e,data:n}=t,r=wk(n,0,4),s=e.find(i=>i.type==="function"&&r===QX(lM(i)));if(!s)throw new ist(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Kst(s.inputs,wk(n,4)):void 0}}function xit(t){const{authorizationList:e}=t;if(e)for(const n of e){const{chainId:r}=n,s=n.address;if(!Ja(s))throw new Gg({address:s});if(r<0)throw new sU({chainId:r})}tee(t)}function Eit(t){const{blobVersionedHashes:e}=t;if(e){if(e.length===0)throw new KAe;for(const n of e){const r=qi(n),s=CAe(wk(n,0,1));if(r!==32)throw new mit({hash:n,size:r});if(s!==qAe)throw new yit({hash:n,version:s})}}tee(t)}function tee(t){const{chainId:e,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=t;if(e<=0)throw new sU({chainId:e});if(s&&!Ja(s))throw new Gg({address:s});if(r&&r>XX)throw new rU({maxFeePerGas:r});if(n&&r&&n>r)throw new FAe({maxFeePerGas:r,maxPriorityFeePerGas:n})}function Ait(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(e<=0)throw new sU({chainId:e});if(i&&!Ja(i))throw new Gg({address:i});if(n||s)throw new sr("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>XX)throw new rU({maxFeePerGas:r})}function Sit(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(i&&!Ja(i))throw new Gg({address:i});if(typeof e<"u"&&e<=0)throw new sU({chainId:e});if(n||s)throw new sr("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>XX)throw new rU({maxFeePerGas:r})}function iU(t){if(!t||t.length===0)return[];const e=[];for(let n=0;n<t.length;n++){const{address:r,storageKeys:s}=t[n];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new sit({storageKey:s[i]});if(!Ja(r,{strict:!1}))throw new Gg({address:r});e.push([r,s])}return e}function Iit(t,e){const n=vit(t);return n==="eip1559"?Nit(t,e):n==="eip2930"?kit(t,e):n==="eip4844"?Tit(t,e):n==="eip7702"?Cit(t,e):Pit(t,e)}function Cit(t,e){const{authorizationList:n,chainId:r,gas:s,nonce:i,to:a,value:o,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:f}=t;xit(t);const d=iU(u),p=Oit(n);return K2(["0x04",x2([Wn(r),i?Wn(i):"0x",l?Wn(l):"0x",c?Wn(c):"0x",s?Wn(s):"0x",a??"0x",o?Wn(o):"0x",f??"0x",d,p,...H7(t,e)])])}function Tit(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:a,maxFeePerBlobGas:o,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:f}=t;Eit(t);let d=t.blobVersionedHashes,p=t.sidecars;if(t.blobs&&(typeof d>"u"||typeof p>"u")){const I=typeof t.blobs[0]=="string"?t.blobs:t.blobs.map(V=>qc(V)),B=t.kzg,D=VAe({blobs:I,kzg:B});if(typeof d>"u"&&(d=pit({commitments:D})),typeof p>"u"){const V=$Ae({blobs:I,commitments:D,kzg:B});p=bit({blobs:I,commitments:D,proofs:V})}}const g=iU(u),m=[Wn(n),s?Wn(s):"0x",l?Wn(l):"0x",c?Wn(c):"0x",r?Wn(r):"0x",i??"0x",a?Wn(a):"0x",f??"0x",g,o?Wn(o):"0x",d??[],...H7(t,e)],v=[],A=[],S=[];if(p)for(let I=0;I<p.length;I++){const{blob:B,commitment:D,proof:V}=p[I];v.push(B),A.push(D),S.push(V)}return K2(["0x03",x2(p?[m,v,A,S]:m)])}function Nit(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:a,maxFeePerGas:o,maxPriorityFeePerGas:c,accessList:l,data:u}=t;tee(t);const f=iU(l),d=[Wn(n),s?Wn(s):"0x",c?Wn(c):"0x",o?Wn(o):"0x",r?Wn(r):"0x",i??"0x",a?Wn(a):"0x",u??"0x",f,...H7(t,e)];return K2(["0x02",x2(d)])}function kit(t,e){const{chainId:n,gas:r,data:s,nonce:i,to:a,value:o,accessList:c,gasPrice:l}=t;Ait(t);const u=iU(c),f=[Wn(n),i?Wn(i):"0x",l?Wn(l):"0x",r?Wn(r):"0x",a??"0x",o?Wn(o):"0x",s??"0x",u,...H7(t,e)];return K2(["0x01",x2(f)])}function Pit(t,e){const{chainId:n=0,gas:r,data:s,nonce:i,to:a,value:o,gasPrice:c}=t;Sit(t);let l=[i?Wn(i):"0x",c?Wn(c):"0x",r?Wn(r):"0x",a??"0x",o?Wn(o):"0x",s??"0x"];if(e){const u=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+e.v-27n);const p=27n+(e.v===27n?0n:1n);if(e.v!==p)throw new nit({v:e.v});return p})(),f=b2(e.r),d=b2(e.s);l=[...l,Wn(u),f==="0x00"?"0x":f,d==="0x00"?"0x":d]}else n>0&&(l=[...l,Wn(n),"0x","0x"]);return x2(l)}function H7(t,e){const n=e??t,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const i=b2(n.r),a=b2(n.s);return[typeof s=="number"?s?Wn(1):"0x":r===0n?"0x":r===1n?Wn(1):r===27n?"0x":Wn(1),i==="0x00"?"0x":i,a==="0x00"?"0x":a]}function Oit(t){if(!t||t.length===0)return[];const e=[];for(const n of t){const{chainId:r,nonce:s,...i}=n,a=n.address;e.push([r?v2(r):"0x",a,s?v2(s):"0x",...H7({},i)])}return e}const Rit=`Ethereum Signed Message:
`;function _it(t){const e=typeof t=="string"?fM(t):typeof t.raw=="string"?t.raw:qc(t.raw),n=fM(`${Rit}${qi(e)}`);return pb([n,e])}function Bit(t,e){return gu(_it(t),e)}class Mit extends sr{constructor({domain:e}){super(`Invalid domain "${Xst(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Dit extends sr{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Lit extends sr{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Uit(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(a,o)=>{for(const c of a){const{name:l,type:u}=c,f=o[l],d=u.match(BAe);if(d&&(typeof f=="number"||typeof f=="bigint")){const[m,v,A]=d;Wn(f,{signed:v==="int",size:Number.parseInt(A,10)/8})}if(u==="address"&&typeof f=="string"&&!Ja(f))throw new Gg({address:f});const p=u.match(Nst);if(p){const[m,v]=p;if(v&&qi(f)!==Number.parseInt(v,10))throw new ost({expectedSize:Number.parseInt(v,10),givenSize:qi(f)})}const g=s[u];g&&(Vit(u),i(g,f))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new Mit({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new Dit({primaryType:r,types:s})}function Fit({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Vit(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new Lit({type:t})}function $it(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:Fit({domain:e}),...t.types};Uit({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(jit({domain:e,types:s})),r!=="EIP712Domain"&&i.push(JAe({data:n,primaryType:r,types:s})),gu(pb(i))}function jit({domain:t,types:e}){return JAe({data:t,primaryType:"EIP712Domain",types:e})}function JAe({data:t,primaryType:e,types:n}){const r=YAe({data:t,primaryType:e,types:n});return gu(r)}function YAe({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[Hit({primaryType:e,types:n})];for(const i of n[e]){const[a,o]=ZAe({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(a),s.push(o)}return WX(r,s)}function Hit({primaryType:t,types:e}){const n=v2(qit({primaryType:t,types:e}));return gu(n)}function qit({primaryType:t,types:e}){let n="";const r=QAe({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:a,type:o})=>`${o} ${a}`).join(",")})`;return n}function QAe({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])QAe({primaryType:i.type,types:e},n);return n}function ZAe({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},gu(YAe({data:r,primaryType:n,types:t}))];if(n==="bytes")return[{type:"bytes32"},gu(r)];if(n==="string")return[{type:"bytes32"},gu(v2(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(a=>ZAe({name:e,type:s,types:t,value:a}));return[{type:"bytes32"},gu(WX(i.map(([a])=>a),i.map(([,a])=>a)))]}return[{type:n},r]}function Kit({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),a=`0x${new g4.Signature(uM(t),uM(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?a:ah(a)}let XAe=class HW{constructor(e){q(this,"provider");q(this,"kind","relayer");q(this,"type","local");q(this,"id","local");this.provider=e}isAvailable(e,n){return Promise.resolve(!0)}static createFromWindow(e){const n=e.ethereum;if(!n){console.warn("Window.ethereum not found, skipping local relayer");return}return new HW(new qW(n))}static createFromProvider(e){return new HW(new qW(e))}feeTokens(){return Promise.resolve({isFeeRequired:!1})}feeOptions(e,n,r,s){return Promise.resolve({options:[]})}async relay(e,n,r,s,i,a=5e3){const o=async()=>{if(!i||i.length===0)return!0;for(const c of i)if(!await this.checkPrecondition(c))return!1;return!0};return await o()?{opHash:await this.provider.sendTransaction({to:e,data:n},r)}:new Promise((c,l)=>{let u,f=!1;const d=async()=>{try{if(f)return;if(await o()){f=!0,clearTimeout(u);const p=await this.provider.sendTransaction({to:e,data:n},r);c({opHash:p})}else u=setTimeout(d,a)}catch(p){f=!0,clearTimeout(u),l(p)}};return u=setTimeout(d,a),()=>{f=!0,clearTimeout(u)}})}async status(e,n){const r=await this.provider.getTransactionReceipt(e,n);return r==="unknown"?{status:"unknown"}:r==="success"?{status:"confirmed",transactionHash:e}:{status:"failed",reason:"failed"}}async checkPrecondition(e){const n=Grt(e);if(!n)return!1;switch(n.type()){case"native-balance":{const r=n,s=await this.provider.getBalance(r.address);return!(r.min!==void 0&&s<r.min||r.max!==void 0&&s>r.max)}case"erc20-balance":{const r=n,s=Bs(Wrt,[r.address]),i=await this.provider.call({to:r.token,data:s}),a=BigInt(i);return!(r.min!==void 0&&a<r.min||r.max!==void 0&&a>r.max)}case"erc20-approval":{const r=n,s=Bs(zrt,[r.address,r.operator]),i=await this.provider.call({to:r.token,data:s});return BigInt(i)>=r.min}case"erc721-ownership":{const r=n,s=Bs(Jrt,[r.tokenId]),o=("0x"+(await this.provider.call({to:r.token,data:s})).slice(26)).toLowerCase()===r.address.toString().toLowerCase();return r.owned===void 0?o:r.owned===o}case"erc721-approval":{const r=n,s=Bs(Yrt,[r.tokenId]);return("0x"+(await this.provider.call({to:r.token,data:s})).slice(26)).toLowerCase()===r.operator.toString().toLowerCase()}case"erc1155-balance":{const r=n,s=Bs(Qrt,[r.address,r.tokenId]),i=await this.provider.call({to:r.token,data:s}),a=BigInt(i);return!(r.min!==void 0&&a<r.min||r.max!==void 0&&a>r.max)}case"erc1155-approval":{const r=n,s=Bs(Zrt,[r.address,r.operator]),i=await this.provider.call({to:r.token,data:s});return BigInt(i)===1n}default:return!1}}};class qW{constructor(e){q(this,"provider");this.provider=e}async trySwitchChain(e){try{await this.provider.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${e.toString(16)}`}]})}catch(n){console.error("Error switching chain",n)}}async sendTransaction(e,n){const s=(await this.provider.request({method:"eth_requestAccounts"}))[0];if(!s){console.warn("No account selected, skipping local relayer");return}return await this.trySwitchChain(n),await this.provider.request({method:"eth_sendTransaction",params:[{from:s,to:e.to,data:e.data}]})}async getBalance(e){const n=await this.provider.request({method:"eth_getBalance",params:[e,"latest"]});return BigInt(n)}async call(e){return await this.provider.request({method:"eth_call",params:[e,"latest"]})}async getTransactionReceipt(e,n){await this.trySwitchChain(n);const r=await this.provider.request({method:"eth_getTransactionReceipt",params:[e]});if(r){const s=Net(r);if((s==null?void 0:s.status)==="success")return"success";if((s==null?void 0:s.status)==="reverted")return"failed"}return"unknown"}}function Git(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function eSe(){const t=new Set;let e=[];const n=()=>Git(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}class tSe{constructor(e){q(this,"kind","relayer");q(this,"type","eip6963");q(this,"id");q(this,"info");q(this,"relayer");this.info=e.info,this.id=e.info.uuid,this.relayer=new XAe(new qW(e.provider))}isAvailable(e,n){return this.relayer.isAvailable(e,n)}feeTokens(){return this.relayer.feeTokens()}feeOptions(e,n,r,s){return this.relayer.feeOptions(e,n,r,s)}async relay(e,n,r,s){return this.relayer.relay(e,n,r)}status(e,n){return this.relayer.status(e,n)}async checkPrecondition(e){return this.relayer.checkPrecondition(e)}}let $j;function Wit(){return $j||($j=eSe()),$j}const jj=new Map;function zit(){const e=Wit().getProviders();for(const n of e)jj.has(n.info.uuid)||jj.set(n.info.uuid,new tSe(n));return Array.from(jj.values())}function Jit(t){return typeof t=="object"&&t!==null&&"isAvailable"in t&&"feeOptions"in t&&"relay"in t&&"status"in t&&"checkPrecondition"in t}const gt={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},qs={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,CBOR:24,URI:32,BASE64URL:33,BASE64:34,SET:258,JSON:262,REGEXP:21066,SELF_DESCRIBED:55799,INVALID_16:65535,INVALID_32:4294967295,INVALID_64:0xffffffffffffffffn},lr={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},Sw={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};var cI;let ic=(cI=class{},q(cI,"BREAK",Symbol.for("github.com/hildjj/cbor2/break")),q(cI,"ENCODED",Symbol.for("github.com/hildjj/cbor2/cbor-encoded")),q(cI,"LENGTH",Symbol.for("github.com/hildjj/cbor2/length")),cI);const dM={MIN:-(2n**63n),MAX:2n**64n-1n};var kg,ff;let gr=(kg=class{constructor(e,n=void 0){q(this,"tag");q(this,"contents");this.tag=e,this.contents=n}get noChildren(){var e;return!!((e=Y(kg,ff).get(this.tag))!=null&&e.noChildren)}static registerDecoder(e,n,r){const s=Y(this,ff).get(e);return Y(this,ff).set(e,n),s&&("comment"in n||(n.comment=s.comment),"noChildren"in n||(n.noChildren=s.noChildren)),r&&!n.comment&&(n.comment=()=>`(${r})`),s}static clearDecoder(e){const n=Y(this,ff).get(e);return Y(this,ff).delete(e),n}static getDecoder(e){return Y(this,ff).get(e)}static getAllDecoders(){return new Map(Y(this,ff))}*[Symbol.iterator](){yield this.contents}push(e){return this.contents=e,1}decode(e){const n=Y(kg,ff).get(this.tag);return n?n(this,e):this}comment(e,n){const r=Y(kg,ff).get(this.tag);if(r!=null&&r.comment)return r.comment(this,e,n)}toCBOR(){return[this.tag,this.contents]}[Symbol.for("nodejs.util.inspect.custom")](e,n,r){return`${this.tag}(${r(this.contents,n)})`}},ff=new WeakMap,Le(kg,ff,new Map),kg);function hM(t){if(t!=null&&typeof t=="object")return t[ic.ENCODED]}function Yit(t){if(t!=null&&typeof t=="object")return t[ic.LENGTH]}function vk(t,e){Object.defineProperty(t,ic.ENCODED,{configurable:!0,enumerable:!1,value:e})}function EI(t,e){const n=Object(t);return vk(n,e),n}const nee=Symbol("CBOR_RANGES");function nSe(t,e){Object.defineProperty(t,nee,{configurable:!1,enumerable:!1,writable:!1,value:e})}function pM(t){return t[nee]}function Qit(t){return pM(t)!==void 0}function KW(t,e=0,n=t.length-1){const r=t.subarray(e,n),s=pM(t);if(s){const i=[];for(const a of s)if(a[0]>=e&&a[0]+a[1]<=n){const o=[...a];o[0]-=e,i.push(o)}i.length&&nSe(r,i)}return r}function rSe(t){let e=Math.ceil(t.length/2);const n=new Uint8Array(e);e--;for(let r=t.length,s=r-2;r>=0;r=s,s-=2,e--)n[e]=parseInt(t.substring(s,r),16);return n}function mu(t){return t.reduce((e,n)=>e+n.toString(16).padStart(2,"0"),"")}function Zit(t){const e=t.reduce((a,o)=>a+o.length,0),n=t.some(a=>Qit(a)),r=[],s=new Uint8Array(e);let i=0;for(const a of t){if(!(a instanceof Uint8Array))throw new TypeError(`Invalid array: ${a}`);if(s.set(a,i),n){const o=a[nee]??[[0,a.length]];for(const c of o)c[0]+=i;r.push(...o)}i+=a.length}return n&&nSe(s,r),s}function ree(t){const e=atob(t);return Uint8Array.from(e,n=>n.codePointAt(0))}const Xit={"-":"+",_:"/"};function eat(t){const e=t.replace(/[_-]/g,n=>Xit[n]);return ree(e.padEnd(Math.ceil(e.length/4)*4,"="))}function tat(){const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])}function ale(t){var n;let e="";for(const r of t){const s=(n=r.codePointAt(0))==null?void 0:n.toString(16).padStart(4,"0");e&&(e+=", "),e+=`U+${s}`}return e}function sSe(t,e){const[n,r,s]=t,[i,a,o]=e,c=Math.min(s.length,o.length);for(let l=0;l<c;l++){const u=s[l]-o[l];if(u!==0)return u}return 0}var ox,ew,co,al,Ri,tw,Br,x1,GR,GW,_h,Bh;let iSe=(ox=class{constructor(e={}){Le(this,Br);Le(this,ew);Le(this,co,[]);Le(this,al,null);Le(this,Ri,0);Le(this,tw,0);if(we(this,ew,{...ox.defaultOptions,...e}),Y(this,ew).chunkSize<8)throw new RangeError(`Expected size >= 8, got ${Y(this,ew).chunkSize}`);Fe(this,Br,x1).call(this)}get length(){return Y(this,tw)}read(){Fe(this,Br,GR).call(this);const e=new Uint8Array(Y(this,tw));let n=0;for(const r of Y(this,co))e.set(r,n),n+=r.length;return Fe(this,Br,x1).call(this),e}write(e){const n=e.length;n>Fe(this,Br,GW).call(this)?(Fe(this,Br,GR).call(this),n>Y(this,ew).chunkSize?(Y(this,co).push(e),Fe(this,Br,x1).call(this)):(Fe(this,Br,x1).call(this),Y(this,co)[Y(this,co).length-1].set(e),we(this,Ri,n))):(Y(this,co)[Y(this,co).length-1].set(e,Y(this,Ri)),we(this,Ri,Y(this,Ri)+n)),we(this,tw,Y(this,tw)+n)}writeUint8(e){Fe(this,Br,_h).call(this,1),Y(this,al).setUint8(Y(this,Ri),e),Fe(this,Br,Bh).call(this,1)}writeUint16(e,n=!1){Fe(this,Br,_h).call(this,2),Y(this,al).setUint16(Y(this,Ri),e,n),Fe(this,Br,Bh).call(this,2)}writeUint32(e,n=!1){Fe(this,Br,_h).call(this,4),Y(this,al).setUint32(Y(this,Ri),e,n),Fe(this,Br,Bh).call(this,4)}writeBigUint64(e,n=!1){Fe(this,Br,_h).call(this,8),Y(this,al).setBigUint64(Y(this,Ri),e,n),Fe(this,Br,Bh).call(this,8)}writeInt16(e,n=!1){Fe(this,Br,_h).call(this,2),Y(this,al).setInt16(Y(this,Ri),e,n),Fe(this,Br,Bh).call(this,2)}writeInt32(e,n=!1){Fe(this,Br,_h).call(this,4),Y(this,al).setInt32(Y(this,Ri),e,n),Fe(this,Br,Bh).call(this,4)}writeBigInt64(e,n=!1){Fe(this,Br,_h).call(this,8),Y(this,al).setBigInt64(Y(this,Ri),e,n),Fe(this,Br,Bh).call(this,8)}writeFloat32(e,n=!1){Fe(this,Br,_h).call(this,4),Y(this,al).setFloat32(Y(this,Ri),e,n),Fe(this,Br,Bh).call(this,4)}writeFloat64(e,n=!1){Fe(this,Br,_h).call(this,8),Y(this,al).setFloat64(Y(this,Ri),e,n),Fe(this,Br,Bh).call(this,8)}clear(){we(this,tw,0),we(this,co,[]),Fe(this,Br,x1).call(this)}},ew=new WeakMap,co=new WeakMap,al=new WeakMap,Ri=new WeakMap,tw=new WeakMap,Br=new WeakSet,x1=function(){const e=new Uint8Array(Y(this,ew).chunkSize);Y(this,co).push(e),we(this,Ri,0),we(this,al,new DataView(e.buffer,e.byteOffset,e.byteLength))},GR=function(){if(Y(this,Ri)===0){Y(this,co).pop();return}const e=Y(this,co).length-1;Y(this,co)[e]=Y(this,co)[e].subarray(0,Y(this,Ri)),we(this,Ri,0),we(this,al,null)},GW=function(){const e=Y(this,co).length-1;return Y(this,co)[e].length-Y(this,Ri)},_h=function(e){Fe(this,Br,GW).call(this)<e&&(Fe(this,Br,GR).call(this),Fe(this,Br,x1).call(this))},Bh=function(e){we(this,Ri,Y(this,Ri)+e),we(this,tw,Y(this,tw)+e)},q(ox,"defaultOptions",{chunkSize:4096}),ox);function aSe(t,e=0,n=!1){const r=t[e]&128?-1:1,s=(t[e]&124)>>2,i=(t[e]&3)<<8|t[e+1];if(s===0){if(n&&i!==0)throw new Error(`Unwanted subnormal: ${r*5960464477539063e-23*i}`);return r*5960464477539063e-23*i}else if(s===31)return i?NaN:r*(1/0);return r*2**(s-25)*(1024+i)}function oSe(t){const e=new DataView(new ArrayBuffer(4));e.setFloat32(0,t,!1);const n=e.getUint32(0,!1);if(n&8191)return null;let r=n>>16&32768;const s=n>>23&255,i=n&8388607;if(!(s===0&&i===0))if(s>=113&&s<=142)r+=(s-112<<10)+(i>>13);else if(s>=103&&s<113){if(i&(1<<126-s)-1)return null;r+=i+8388608>>126-s}else if(s===255)r|=31744,r|=i>>13;else return null;return r}function nat(t){if(t!==0){const e=new ArrayBuffer(8),n=new DataView(e);n.setFloat64(0,t,!1);const r=n.getBigUint64(0,!1);if((r&0x7ff0000000000000n)===0n)return r&0x8000000000000000n?-0:0}return t}function rat(t){switch(t.length){case 2:aSe(t,0,!0);break;case 4:{const e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=e.getUint32(0,!1);if(!(n&2139095040)&&n&8388607)throw new Error(`Unwanted subnormal: ${e.getFloat32(0,!1)}`);break}case 8:{const e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=e.getBigUint64(0,!1);if((n&0x7ff0000000000000n)===0n&&n&0x000fffffffffffn)throw new Error(`Unwanted subnormal: ${e.getFloat64(0,!1)}`);break}default:throw new TypeError(`Bad input to isSubnormal: ${t}`)}}const ole=gt.SIMPLE_FLOAT<<5|lr.TWO,sat=gt.SIMPLE_FLOAT<<5|lr.FOUR,iat=gt.SIMPLE_FLOAT<<5|lr.EIGHT,aat=gt.SIMPLE_FLOAT<<5|Sw.TRUE,oat=gt.SIMPLE_FLOAT<<5|Sw.FALSE,cat=gt.SIMPLE_FLOAT<<5|Sw.UNDEFINED,lat=gt.SIMPLE_FLOAT<<5|Sw.NULL,uat=new TextEncoder,cSe={...iSe.defaultOptions,avoidInts:!1,cde:!1,collapseBigInts:!0,dcbor:!1,float64:!1,flushToZero:!1,forceEndian:null,ignoreOriginalEncoding:!1,largeNegativeAsBigInt:!1,reduceUnsafeNumbers:!1,rejectBigInts:!1,rejectCustomSimples:!1,rejectDuplicateKeys:!1,rejectFloats:!1,rejectUndefined:!1,simplifyNegativeZero:!1,sortKeys:null,stringNormalization:null},lSe={cde:!0,ignoreOriginalEncoding:!0,sortKeys:sSe},fat={...lSe,dcbor:!0,largeNegativeAsBigInt:!0,reduceUnsafeNumbers:!0,rejectCustomSimples:!0,rejectDuplicateKeys:!0,rejectUndefined:!0,simplifyNegativeZero:!0,stringNormalization:"NFC"};function uSe(t){const e=t<0;return typeof t=="bigint"?[e?-t-1n:t,e]:[e?-t-1:t,e]}function Hj(t,e,n){if(n.rejectFloats)throw new Error(`Attempt to encode an unwanted floating point number: ${t}`);if(isNaN(t))e.writeUint8(ole),e.writeUint16(32256);else if(!n.float64&&Math.fround(t)===t){const r=oSe(t);r===null?(e.writeUint8(sat),e.writeFloat32(t)):(e.writeUint8(ole),e.writeUint16(r))}else e.writeUint8(iat),e.writeFloat64(t)}function oh(t,e,n){const[r,s]=uSe(t);if(s&&n)throw new TypeError(`Negative size: ${t}`);n??(n=s?gt.NEG_INT:gt.POS_INT),n<<=5,r<24?e.writeUint8(n|r):r<=255?(e.writeUint8(n|lr.ONE),e.writeUint8(r)):r<=65535?(e.writeUint8(n|lr.TWO),e.writeUint16(r)):r<=4294967295?(e.writeUint8(n|lr.FOUR),e.writeUint32(r)):(e.writeUint8(n|lr.EIGHT),e.writeBigUint64(BigInt(r)))}function gM(t,e,n){typeof t=="number"?oh(t,e,gt.TAG):typeof t=="object"&&!n.ignoreOriginalEncoding&&ic.ENCODED in t?e.write(t[ic.ENCODED]):t<=Number.MAX_SAFE_INTEGER?oh(Number(t),e,gt.TAG):(e.writeUint8(gt.TAG<<5|lr.EIGHT),e.writeBigUint64(BigInt(t)))}function fSe(t,e,n){const[r,s]=uSe(t);if(n.collapseBigInts&&(!n.largeNegativeAsBigInt||t>=-0x8000000000000000n)){if(r<=0xffffffffn){oh(Number(t),e);return}if(r<=0xffffffffffffffffn){const l=(s?gt.NEG_INT:gt.POS_INT)<<5;e.writeUint8(l|lr.EIGHT),e.writeBigUint64(r);return}}if(n.rejectBigInts)throw new Error(`Attempt to encode unwanted bigint: ${t}`);const i=s?qs.NEG_BIGINT:qs.POS_BIGINT,a=r.toString(16),o=a.length%2?"0":"";gM(i,e,n);const c=rSe(o+a);oh(c.length,e,gt.BYTE_STRING),e.write(c)}function dat(t,e,n){n.flushToZero&&(t=nat(t)),Object.is(t,-0)?n.simplifyNegativeZero?n.avoidInts?Hj(0,e,n):oh(0,e):Hj(t,e,n):!n.avoidInts&&Number.isSafeInteger(t)?oh(t,e):n.reduceUnsafeNumbers&&Math.floor(t)===t&&t>=dM.MIN&&t<=dM.MAX?fSe(BigInt(t),e,n):Hj(t,e,n)}function hat(t,e,n){const r=n.stringNormalization?t.normalize(n.stringNormalization):t,s=uat.encode(r);oh(s.length,e,gt.UTF8_STRING),e.write(s)}function pat(t,e,n){const r=t;see(r,r.length,gt.ARRAY,e,n);for(const s of r)Jv(s,e,n)}function gat(t,e){const n=t;oh(n.length,e,gt.BYTE_STRING),e.write(n)}const WW=new Map([[Array,pat],[Uint8Array,gat]]);function mi(t,e){const n=WW.get(t);return WW.set(t,e),n}function see(t,e,n,r,s){const i=Yit(t);i&&!s.ignoreOriginalEncoding?r.write(i):oh(e,r,n)}function mat(t,e,n){if(t===null){e.writeUint8(lat);return}if(!n.ignoreOriginalEncoding&&ic.ENCODED in t){e.write(t[ic.ENCODED]);return}const r=WW.get(t.constructor);if(r){const i=r(t,e,n);i&&((typeof i[0]=="bigint"||isFinite(Number(i[0])))&&gM(i[0],e,n),Jv(i[1],e,n));return}if(typeof t.toCBOR=="function"){const i=t.toCBOR(e,n);i&&((typeof i[0]=="bigint"||isFinite(Number(i[0])))&&gM(i[0],e,n),Jv(i[1],e,n));return}if(typeof t.toJSON=="function"){Jv(t.toJSON(),e,n);return}const s=Object.entries(t).map(i=>[i[0],i[1],v5(i[0],n)]);n.sortKeys&&s.sort(n.sortKeys),see(t,s.length,gt.MAP,e,n);for(const[i,a,o]of s)e.write(o),Jv(a,e,n)}function Jv(t,e,n){switch(typeof t){case"number":dat(t,e,n);break;case"bigint":fSe(t,e,n);break;case"string":hat(t,e,n);break;case"boolean":e.writeUint8(t?aat:oat);break;case"undefined":if(n.rejectUndefined)throw new Error("Attempt to encode unwanted undefined.");e.writeUint8(cat);break;case"object":mat(t,e,n);break;case"symbol":throw new TypeError(`Unknown symbol: ${t.toString()}`);default:throw new TypeError(`Unknown type: ${typeof t}, ${String(t)}`)}}function v5(t,e={}){const n={...cSe};e.dcbor?Object.assign(n,fat):e.cde&&Object.assign(n,lSe),Object.assign(n,e);const r=new iSe(n);return Jv(t,r,n),r.read()}var mM=(t=>(t[t.NEVER=-1]="NEVER",t[t.PREFERRED=0]="PREFERRED",t[t.ALWAYS=1]="ALWAYS",t))(mM||{});const Ky=class Ky{constructor(e){q(this,"value");this.value=e}static create(e){return Ky.KnownSimple.has(e)?Ky.KnownSimple.get(e):new Ky(e)}toCBOR(e,n){if(n.rejectCustomSimples)throw new Error(`Cannot encode non-standard Simple value: ${this.value}`);oh(this.value,e,gt.SIMPLE_FLOAT)}toString(){return`simple(${this.value})`}decode(){return Ky.KnownSimple.has(this.value)?Ky.KnownSimple.get(this.value):this}[Symbol.for("nodejs.util.inspect.custom")](e,n,r){return`simple(${r(this.value,n)})`}};q(Ky,"KnownSimple",new Map([[Sw.FALSE,!1],[Sw.TRUE,!0],[Sw.NULL,null],[Sw.UNDEFINED,void 0]]));let x5=Ky;const yat=new TextDecoder("utf8",{fatal:!0,ignoreBOM:!0});var cx,Yl,Cd,lo,df,wo,E1,zW,AI;let aU=(cx=class{constructor(e,n){Le(this,wo);Le(this,Yl);Le(this,Cd);Le(this,lo,0);Le(this,df);if(we(this,df,{...cx.defaultOptions,...n}),typeof e=="string")switch(Y(this,df).encoding){case"hex":we(this,Yl,rSe(e));break;case"base64":we(this,Yl,ree(e));break;default:throw new TypeError(`Encoding not implemented: "${Y(this,df).encoding}"`)}else we(this,Yl,e);we(this,Cd,new DataView(Y(this,Yl).buffer,Y(this,Yl).byteOffset,Y(this,Yl).byteLength))}toHere(e){return KW(Y(this,Yl),e,Y(this,lo))}*[Symbol.iterator](){if(yield*Fe(this,wo,E1).call(this,0),Y(this,lo)!==Y(this,Yl).length)throw new Error("Extra data in input")}},Yl=new WeakMap,Cd=new WeakMap,lo=new WeakMap,df=new WeakMap,wo=new WeakSet,E1=function*(e){if(e++>Y(this,df).maxDepth)throw new Error(`Maximum depth ${Y(this,df).maxDepth} exceeded`);const n=Y(this,lo),r=Y(this,Cd).getUint8(_E(this,lo)._++),s=r>>5,i=r&31;let a=i,o=!1,c=0;switch(i){case lr.ONE:if(c=1,a=Y(this,Cd).getUint8(Y(this,lo)),s===gt.SIMPLE_FLOAT){if(a<32)throw new Error(`Invalid simple encoding in extra byte: ${a}`);o=!0}else if(Y(this,df).requirePreferred&&a<24)throw new Error(`Unexpectedly long integer encoding (1) for ${a}`);break;case lr.TWO:if(c=2,s===gt.SIMPLE_FLOAT)a=aSe(Y(this,Yl),Y(this,lo));else if(a=Y(this,Cd).getUint16(Y(this,lo),!1),Y(this,df).requirePreferred&&a<=255)throw new Error(`Unexpectedly long integer encoding (2) for ${a}`);break;case lr.FOUR:if(c=4,s===gt.SIMPLE_FLOAT)a=Y(this,Cd).getFloat32(Y(this,lo),!1);else if(a=Y(this,Cd).getUint32(Y(this,lo),!1),Y(this,df).requirePreferred&&a<=65535)throw new Error(`Unexpectedly long integer encoding (4) for ${a}`);break;case lr.EIGHT:{if(c=8,s===gt.SIMPLE_FLOAT)a=Y(this,Cd).getFloat64(Y(this,lo),!1);else if(a=Y(this,Cd).getBigUint64(Y(this,lo),!1),a<=Number.MAX_SAFE_INTEGER&&(a=Number(a)),Y(this,df).requirePreferred&&a<=4294967295)throw new Error(`Unexpectedly long integer encoding (8) for ${a}`);break}case 28:case 29:case 30:throw new Error(`Additional info not implemented: ${i}`);case lr.INDEFINITE:switch(s){case gt.POS_INT:case gt.NEG_INT:case gt.TAG:throw new Error(`Invalid indefinite encoding for MT ${s}`);case gt.SIMPLE_FLOAT:yield[s,i,ic.BREAK,n,0];return}a=1/0;break;default:o=!0}switch(we(this,lo,Y(this,lo)+c),s){case gt.POS_INT:yield[s,i,a,n,c];break;case gt.NEG_INT:yield[s,i,typeof a=="bigint"?-1n-a:-1-Number(a),n,c];break;case gt.BYTE_STRING:a===1/0?yield*Fe(this,wo,AI).call(this,s,e,n):yield[s,i,Fe(this,wo,zW).call(this,a),n,a];break;case gt.UTF8_STRING:a===1/0?yield*Fe(this,wo,AI).call(this,s,e,n):yield[s,i,yat.decode(Fe(this,wo,zW).call(this,a)),n,a];break;case gt.ARRAY:if(a===1/0)yield*Fe(this,wo,AI).call(this,s,e,n,!1);else{const l=Number(a);yield[s,i,l,n,c];for(let u=0;u<l;u++)yield*Fe(this,wo,E1).call(this,e+1)}break;case gt.MAP:if(a===1/0)yield*Fe(this,wo,AI).call(this,s,e,n,!1);else{const l=Number(a);yield[s,i,l,n,c];for(let u=0;u<l;u++)yield*Fe(this,wo,E1).call(this,e),yield*Fe(this,wo,E1).call(this,e)}break;case gt.TAG:yield[s,i,a,n,c],yield*Fe(this,wo,E1).call(this,e);break;case gt.SIMPLE_FLOAT:{const l=a;o&&(a=x5.create(Number(a))),yield[s,i,a,n,l];break}}},zW=function(e){const n=KW(Y(this,Yl),Y(this,lo),we(this,lo,Y(this,lo)+e));if(n.length!==e)throw new Error(`Unexpected end of stream reading ${e} bytes, got ${n.length}`);return n},AI=function*(e,n,r,s=!0){for(yield[e,lr.INDEFINITE,1/0,r,1/0];;){const i=Fe(this,wo,E1).call(this,n),a=i.next(),[o,c,l]=a.value;if(l===ic.BREAK){yield a.value,i.next();return}if(s){if(o!==e)throw new Error(`Unmatched major type.  Expected ${e}, got ${o}.`);if(c===lr.INDEFINITE)throw new Error("New stream started in typed stream")}yield a.value,yield*i}},q(cx,"defaultOptions",{maxDepth:1024,encoding:"hex",requirePreferred:!1}),cx);const wat=new Map([[lr.ZERO,1],[lr.ONE,2],[lr.TWO,3],[lr.FOUR,5],[lr.EIGHT,9]]),bat=new Uint8Array(0);function vat(t,e){return!e.boxed&&!e.preferMap&&t.every(([n])=>typeof n=="string")?Object.fromEntries(t):new Map(t)}var t0,vc,Gh,TD,dSe;let du=(t0=class{constructor(e,n,r,s){Le(this,TD);q(this,"parent");q(this,"mt");q(this,"ai");q(this,"left");q(this,"offset");q(this,"count",0);q(this,"children",[]);q(this,"depth",0);Le(this,vc);Le(this,Gh,null);if([this.mt,this.ai,,this.offset]=e,this.left=n,this.parent=r,we(this,vc,s),r&&(this.depth=r.depth+1),this.mt===gt.MAP&&(Y(this,vc).sortKeys||Y(this,vc).rejectDuplicateKeys)&&we(this,Gh,[]),Y(this,vc).rejectStreaming&&this.ai===lr.INDEFINITE)throw new Error("Streaming not supported")}get isStreaming(){return this.left===1/0}get done(){return this.left===0}static create(e,n,r,s){const[i,a,o,c]=e;switch(i){case gt.POS_INT:case gt.NEG_INT:{if(r.rejectInts)throw new Error(`Unexpected integer: ${o}`);if(r.rejectLargeNegatives&&o<-0x8000000000000000n)throw new Error(`Invalid 65bit negative number: ${o}`);let l=o;return r.convertUnsafeIntsToFloat&&l>=dM.MIN&&l<=dM.MAX&&(l=Number(o)),r.boxed?EI(l,s.toHere(c)):l}case gt.SIMPLE_FLOAT:if(a>lr.ONE){if(r.rejectFloats)throw new Error(`Decoding unwanted floating point number: ${o}`);if(r.rejectNegativeZero&&Object.is(o,-0))throw new Error("Decoding negative zero");if(r.rejectLongLoundNaN&&isNaN(o)){const l=s.toHere(c);if(l.length!==3||l[1]!==126||l[2]!==0)throw new Error(`Invalid NaN encoding: "${mu(l)}"`)}if(r.rejectSubnormals&&rat(s.toHere(c+1)),r.rejectLongFloats){const l=v5(o,{chunkSize:9,reduceUnsafeNumbers:r.rejectUnsafeFloatInts});if(l[0]>>5!==i)throw new Error(`Should have been encoded as int, not float: ${o}`);if(l.length<wat.get(a))throw new Error(`Number should have been encoded shorter: ${o}`)}if(typeof o=="number"&&r.boxed)return EI(o,s.toHere(c))}else{if(r.rejectSimple&&o instanceof x5)throw new Error(`Invalid simple value: ${o}`);if(r.rejectUndefined&&o===void 0)throw new Error("Unexpected undefined")}return o;case gt.BYTE_STRING:case gt.UTF8_STRING:if(o===1/0)return new r.ParentType(e,1/0,n,r);if(r.rejectStringsNotNormalizedAs&&typeof o=="string"){const l=o.normalize(r.rejectStringsNotNormalizedAs);if(o!==l)throw new Error(`String not normalized as "${r.rejectStringsNotNormalizedAs}", got [${ale(o)}] instead of [${ale(l)}]`)}return r.boxed?EI(o,s.toHere(c)):o;case gt.ARRAY:return new r.ParentType(e,o,n,r);case gt.MAP:return new r.ParentType(e,o*2,n,r);case gt.TAG:{const l=new r.ParentType(e,1,n,r);return l.children=new gr(o),l}}throw new TypeError(`Invalid major type: ${i}`)}static decodeToEncodeOpts(e){return{...cSe,avoidInts:e.rejectInts,float64:!e.rejectLongFloats,flushToZero:e.rejectSubnormals,largeNegativeAsBigInt:e.rejectLargeNegatives,sortKeys:e.sortKeys}}push(e,n,r){if(this.children.push(e),Y(this,Gh)){const s=hM(e)||n.toHere(r);Y(this,Gh).push(s)}return--this.left}replaceLast(e,n,r){let s,i=-1/0;if(this.children instanceof gr?(i=0,s=this.children.contents,this.children.contents=e):(i=this.children.length-1,s=this.children[i],this.children[i]=e),Y(this,Gh)){const a=hM(e)||r.toHere(n.offset);Y(this,Gh)[i]=a}return s}convert(e){let n;switch(this.mt){case gt.ARRAY:n=this.children;break;case gt.MAP:{const r=Fe(this,TD,dSe).call(this);if(Y(this,vc).sortKeys){let s;for(const i of r){if(s&&Y(this,vc).sortKeys(s,i)>=0)throw new Error(`Duplicate or out of order key: "0x${i[2]}"`);s=i}}else if(Y(this,vc).rejectDuplicateKeys){const s=new Set;for(const[i,a,o]of r){const c=mu(o);if(s.has(c))throw new Error(`Duplicate key: "0x${c}"`);s.add(c)}}n=Y(this,vc).createObject(r,Y(this,vc));break}case gt.BYTE_STRING:return Zit(this.children);case gt.UTF8_STRING:{const r=this.children.join("");n=Y(this,vc).boxed?EI(r,e.toHere(this.offset)):r;break}case gt.TAG:n=this.children.decode(Y(this,vc));break;default:throw new TypeError(`Invalid mt on convert: ${this.mt}`)}return Y(this,vc).saveOriginal&&n&&typeof n=="object"&&vk(n,e.toHere(this.offset)),n}},vc=new WeakMap,Gh=new WeakMap,TD=new WeakSet,dSe=function(){const e=this.children,n=e.length;if(n%2)throw new Error("Missing map value");const r=new Array(n/2);if(Y(this,Gh))for(let s=0;s<n;s+=2)r[s>>1]=[e[s],e[s+1],Y(this,Gh)[s]];else for(let s=0;s<n;s+=2)r[s>>1]=[e[s],e[s+1],bat];return r},q(t0,"defaultDecodeOptions",{...aU.defaultOptions,ParentType:t0,boxed:!1,cde:!1,dcbor:!1,diagnosticSizes:mM.PREFERRED,convertUnsafeIntsToFloat:!1,createObject:vat,pretty:!1,preferMap:!1,rejectLargeNegatives:!1,rejectBigInts:!1,rejectDuplicateKeys:!1,rejectFloats:!1,rejectInts:!1,rejectLongLoundNaN:!1,rejectLongFloats:!1,rejectNegativeZero:!1,rejectSimple:!1,rejectStreaming:!1,rejectStringsNotNormalizedAs:null,rejectSubnormals:!1,rejectUndefined:!1,rejectUnsafeFloatInts:!1,saveOriginal:!1,sortKeys:null}),q(t0,"cdeDecodeOptions",{cde:!0,rejectStreaming:!0,requirePreferred:!0,sortKeys:sSe}),q(t0,"dcborDecodeOptions",{...t0.cdeDecodeOptions,dcbor:!0,convertUnsafeIntsToFloat:!0,rejectDuplicateKeys:!0,rejectLargeNegatives:!0,rejectLongLoundNaN:!0,rejectLongFloats:!0,rejectNegativeZero:!0,rejectSimple:!0,rejectUndefined:!0,rejectUnsafeFloatInts:!0,rejectStringsNotNormalizedAs:"NFC"}),t0);const qj="  ",xat=new TextEncoder;let cle=class extends du{constructor(){super(...arguments);q(this,"close","");q(this,"quote",'"')}get isEmptyStream(){return(this.mt===gt.UTF8_STRING||this.mt===gt.BYTE_STRING)&&this.count===0}};function Bm(t,e,n,r){let s="";if(e===lr.INDEFINITE)s+="_";else{if(r.diagnosticSizes===mM.NEVER)return"";{let i=r.diagnosticSizes===mM.ALWAYS;if(!i){let a=lr.ZERO;if(Object.is(n,-0))a=lr.TWO;else if(t===gt.POS_INT||t===gt.NEG_INT){const o=n<0,c=typeof n=="bigint"?1n:1,l=o?-n-c:n;l<=23?a=Number(l):l<=255?a=lr.ONE:l<=65535?a=lr.TWO:l<=4294967295?a=lr.FOUR:a=lr.EIGHT}else isFinite(n)?Math.fround(n)===n?oSe(n)==null?a=lr.FOUR:a=lr.TWO:a=lr.EIGHT:a=lr.TWO;i=a!==e}i&&(s+="_",e<lr.ONE?s+="i":s+=String(e-24))}}return s}function Eat(t,e){const n={...du.defaultDecodeOptions,...e,ParentType:cle},r=new aU(t,n);let s,i,a="";for(const o of r){const[c,l,u]=o;switch(s&&(s.count>0&&u!==ic.BREAK&&(s.mt===gt.MAP&&s.count%2?a+=": ":(a+=",",n.pretty||(a+=" "))),n.pretty&&(s.mt!==gt.MAP||s.count%2===0)&&(a+=`
${qj.repeat(s.depth+1)}`)),i=du.create(o,s,n,r),c){case gt.POS_INT:case gt.NEG_INT:a+=String(u),a+=Bm(c,l,u,n);break;case gt.SIMPLE_FLOAT:if(u!==ic.BREAK)if(typeof u=="number"){const f=Object.is(u,-0)?"-0.0":String(u);a+=f,isFinite(u)&&!/[.e]/.test(f)&&(a+=".0"),a+=Bm(c,l,u,n)}else u instanceof x5?(a+="simple(",a+=String(u.value),a+=Bm(gt.POS_INT,l,u.value,n),a+=")"):a+=String(u);break;case gt.BYTE_STRING:u===1/0?(a+="(_ ",i.close=")",i.quote="'"):(a+="h'",a+=mu(u),a+="'",a+=Bm(gt.POS_INT,l,u.length,n));break;case gt.UTF8_STRING:u===1/0?(a+="(_ ",i.close=")"):(a+=JSON.stringify(u),a+=Bm(gt.POS_INT,l,xat.encode(u).length,n));break;case gt.ARRAY:{a+="[";const f=Bm(gt.POS_INT,l,u,n);a+=f,f&&(a+=" "),n.pretty&&u?i.close=`
${qj.repeat(i.depth)}]`:i.close="]";break}case gt.MAP:{a+="{";const f=Bm(gt.POS_INT,l,u,n);a+=f,f&&(a+=" "),n.pretty&&u?i.close=`
${qj.repeat(i.depth)}}`:i.close="}";break}case gt.TAG:a+=String(u),a+=Bm(gt.POS_INT,l,u,n),a+="(",i.close=")";break}if(i===ic.BREAK)if(s!=null&&s.isStreaming)s.left=0;else throw new Error("Unexpected BREAK");else s&&(s.count++,s.left--);for(i instanceof cle&&(s=i);s!=null&&s.done;){if(s.isEmptyStream)a=a.slice(0,-3),a+=`${s.quote}${s.quote}_`;else{if(s.mt===gt.MAP&&s.count%2!==0)throw new Error(`Odd streaming map size: ${s.count}`);a+=s.close}s=s.parent}}return a}const Aat=new TextDecoder;var j0e,H0e;let JW=class extends(H0e=du,j0e=ic.ENCODED,H0e){constructor(n,r,s,i){super(n,r,s,i);q(this,"depth",0);q(this,"leaf",!1);q(this,"value");q(this,"length");q(this,j0e);this.parent?this.depth=this.parent.depth+1:this.depth=i.initialDepth,[,,this.value,,this.length]=n}numBytes(){switch(this.ai){case lr.ONE:return 1;case lr.TWO:return 2;case lr.FOUR:return 4;case lr.EIGHT:return 8}return 0}};function hSe(t){return t instanceof JW}function lO(t,e){return t===1/0?"Indefinite":e?`${t} ${e}${t!==1&&t!==1n?"s":""}`:String(t)}function k8(t){return"".padStart(t," ")}function pSe(t,e,n){let r="";r+=k8(t.depth*2);const s=hM(t);r+=mu(s.subarray(0,1));const i=t.numBytes();i&&(r+=" ",r+=mu(s.subarray(1,i+1))),r=r.padEnd(e.minCol+1," "),r+="-- ",n!==void 0&&(r+=k8(t.depth*2),n!==""&&(r+=`[${n}] `));let a=!1;const[o]=t.children;switch(t.mt){case gt.POS_INT:r+=`Unsigned: ${o}`,typeof o=="bigint"&&(r+="n");break;case gt.NEG_INT:r+=`Negative: ${o}`,typeof o=="bigint"&&(r+="n");break;case gt.BYTE_STRING:r+=`Bytes (Length: ${lO(t.length)})`;break;case gt.UTF8_STRING:r+=`UTF8 (Length: ${lO(t.length)})`,t.length!==1/0&&(r+=`: ${JSON.stringify(o)}`);break;case gt.ARRAY:r+=`Array (Length: ${lO(t.value,"item")})`;break;case gt.MAP:r+=`Map (Length: ${lO(t.value,"pair")})`;break;case gt.TAG:{r+=`Tag #${t.value}`;const c=t.children,[l]=c.contents.children,u=new gr(c.tag,l);vk(u,s);const f=u.comment(e,t.depth);f&&(r+=": ",r+=f),a||(a=u.noChildren);break}case gt.SIMPLE_FLOAT:o===ic.BREAK?r+="BREAK":t.ai>lr.ONE?Object.is(o,-0)?r+="Float: -0":r+=`Float: ${o}`:(r+="Simple: ",o instanceof x5?r+=o.value:r+=o);break}if(!a)if(t.leaf){if(r+=`
`,s.length>i+1){const c=k8((t.depth+1)*2),l=pM(s);if(l!=null&&l.length){l.sort((f,d)=>f[0]-d[0]||d[1]-f[1]);let u=0;for(const[f,d,p]of l)if(!(f<u)){if(u=f+d,p==="<<"){r+=k8(e.minCol+1),r+="--",r+=c,r+="<< ";const g=KW(s,f,f+d),m=pM(g);if(m){const v=m.findIndex(([A,S,I])=>A===0&&S===d&&I==="<<");v>=0&&m.splice(v,1)}r+=Eat(g),r+=` >>
`,r+=gSe(g,{initialDepth:t.depth+1,minCol:e.minCol,noPrefixHex:!0});continue}else p==="'"&&(r+=k8(e.minCol+1),r+="--",r+=c,r+="'",r+=Aat.decode(s.subarray(f,f+d)),r+=`'
`);if(f>i)for(let g=f;g<f+d;g+=8){const m=Math.min(g+8,f+d);r+=c,r+=mu(s.subarray(g,m)),r+=`
`}}}else for(let u=i+1;u<s.length;u+=8)r+=c,r+=mu(s.subarray(u,u+8)),r+=`
`}}else{r+=`
`;let c=0;for(const l of t.children){if(hSe(l)){let u=String(c);t.mt===gt.MAP?u=c%2?`val ${(c-1)/2}`:`key ${c/2}`:t.mt===gt.TAG&&(u=""),r+=pSe(l,e,u)}c++}}return r}const Sat={...du.defaultDecodeOptions,initialDepth:0,noPrefixHex:!1,minCol:0};function gSe(t,e){const n={...Sat,...e,ParentType:JW,saveOriginal:!0},r=new aU(t,n);let s,i;for(const o of r){if(i=du.create(o,s,n,r),o[2]===ic.BREAK)if(s!=null&&s.isStreaming)s.left=1;else throw new Error("Unexpected BREAK");if(!hSe(i)){const u=new JW(o,0,s,n);u.leaf=!0,u.children.push(i),vk(u,r.toHere(o[3])),i=u}let c=(i.depth+1)*2;const l=i.numBytes();for(l&&(c+=1,c+=l*2),n.minCol=Math.max(n.minCol,c),s&&s.push(i,r,o[3]),s=i;s!=null&&s.done;)i=s,i.leaf||vk(i,r.toHere(i.offset)),{parent:s}=s}e&&(e.minCol=n.minCol);let a=n.noPrefixHex?"":`0x${mu(r.toHere(0))}
`;return a+=pSe(i,n),a}const lle=!tat();function mSe(t){if(typeof t=="object"&&t){if(t.constructor!==Number)throw new Error(`Expected number: ${t}`)}else if(typeof t!="number")throw new Error(`Expected number: ${t}`)}function Yy(t){if(typeof t=="object"&&t){if(t.constructor!==String)throw new Error(`Expected string: ${t}`)}else if(typeof t!="string")throw new Error(`Expected string: ${t}`)}function E2(t){if(!(t instanceof Uint8Array))throw new Error(`Expected Uint8Array: ${t}`)}function ySe(t){if(!Array.isArray(t))throw new Error(`Expected Array: ${t}`)}mi(Map,(t,e,n)=>{const r=[...t.entries()].map(s=>[s[0],s[1],v5(s[0],n)]);if(n.rejectDuplicateKeys){const s=new Set;for(const[i,a,o]of r){const c=mu(o);if(s.has(c))throw new Error(`Duplicate map key: 0x${c}`);s.add(c)}}n.sortKeys&&r.sort(n.sortKeys),see(t,t.size,gt.MAP,e,n);for(const[s,i,a]of r)e.write(a),Jv(i,e,n)});function ule(t){return Yy(t.contents),new Date(t.contents)}ule.comment=t=>(Yy(t.contents),`(String Date) ${new Date(t.contents).toISOString()}`),gr.registerDecoder(qs.DATE_STRING,ule);function fle(t){return mSe(t.contents),new Date(t.contents*1e3)}fle.comment=t=>(mSe(t.contents),`(Epoch Date) ${new Date(t.contents*1e3).toISOString()}`),gr.registerDecoder(qs.DATE_EPOCH,fle),mi(Date,t=>[qs.DATE_EPOCH,t.valueOf()/1e3]);function yM(t,e,n){if(E2(e.contents),n.rejectBigInts)throw new Error(`Decoding unwanted big integer: ${e}(h'${mu(e.contents)}')`);if(n.requirePreferred&&e.contents[0]===0)throw new Error(`Decoding overly-large bigint: ${e.tag}(h'${mu(e.contents)})`);let r=e.contents.reduce((s,i)=>s<<8n|BigInt(i),0n);if(t&&(r=-1n-r),n.requirePreferred&&r>=Number.MIN_SAFE_INTEGER&&r<=Number.MAX_SAFE_INTEGER)throw new Error(`Decoding bigint that could have been int: ${r}n`);return n.boxed?EI(r,e.contents):r}const dle=yM.bind(null,!1),hle=yM.bind(null,!0);dle.comment=(t,e)=>`(Positive BigInt) ${yM(!1,t,e)}n`,hle.comment=(t,e)=>`(Negative BigInt) ${yM(!0,t,e)}n`,gr.registerDecoder(qs.POS_BIGINT,dle),gr.registerDecoder(qs.NEG_BIGINT,hle);function Kj(t,e){return E2(t.contents),t}Kj.comment=(t,e,n)=>{E2(t.contents);const r={...e,initialDepth:n+2,noPrefixHex:!0},s=hM(t);let i=2**((s[0]&31)-24)+1;const a=s[i]&31;let o=mu(s.subarray(i,++i));a>=24&&(o+=" ",o+=mu(s.subarray(i,i+2**(a-24)))),r.minCol=Math.max(r.minCol,(n+1)*2+o.length);const c=gSe(t.contents,r);let l=`Embedded CBOR
`;return l+=`${"".padStart((n+1)*2," ")}${o}`.padEnd(r.minCol+1," "),l+=`-- Bytes (Length: ${t.contents.length})
`,l+=c,l},Kj.noChildren=!0,gr.registerDecoder(qs.CBOR,Kj),gr.registerDecoder(qs.URI,t=>(Yy(t.contents),new URL(t.contents)),"URI"),mi(URL,t=>[qs.URI,t.toString()]),gr.registerDecoder(qs.BASE64URL,t=>(Yy(t.contents),eat(t.contents)),"Base64url-encoded"),gr.registerDecoder(qs.BASE64,t=>(Yy(t.contents),ree(t.contents)),"Base64-encoded"),gr.registerDecoder(35,t=>(Yy(t.contents),new RegExp(t.contents)),"RegExp"),gr.registerDecoder(21065,t=>{Yy(t.contents);const e=`^(?:${t.contents})$`;return new RegExp(e,"u")},"I-RegExp"),gr.registerDecoder(qs.REGEXP,t=>{if(ySe(t.contents),t.contents.length<1||t.contents.length>2)throw new Error(`Invalid RegExp Array: ${t.contents}`);return new RegExp(t.contents[0],t.contents[1])},"RegExp"),mi(RegExp,t=>[qs.REGEXP,[t.source,t.flags]]),gr.registerDecoder(64,t=>(E2(t.contents),t.contents),"uint8 Typed Array");function Ko(t,e,n){E2(t.contents);let r=t.contents.length;if(r%e.BYTES_PER_ELEMENT!==0)throw new Error(`Number of bytes must be divisible by ${e.BYTES_PER_ELEMENT}, got: ${r}`);r/=e.BYTES_PER_ELEMENT;const s=new e(r),i=new DataView(t.contents.buffer,t.contents.byteOffset,t.contents.byteLength),a=i[`get${e.name.replace(/Array/,"")}`].bind(i);for(let o=0;o<r;o++)s[o]=a(o*e.BYTES_PER_ELEMENT,n);return s}function Mm(t,e,n,r,s){const i=s.forceEndian??lle;if(gM(i?e:n,t,s),oh(r.byteLength,t,gt.BYTE_STRING),lle===i)t.write(new Uint8Array(r.buffer,r.byteOffset,r.byteLength));else{const a=`write${r.constructor.name.replace(/Array/,"")}`,o=t[a].bind(t);for(const c of r)o(c,i)}}gr.registerDecoder(65,t=>Ko(t,Uint16Array,!1),"uint16, big endian, Typed Array"),gr.registerDecoder(66,t=>Ko(t,Uint32Array,!1),"uint32, big endian, Typed Array"),gr.registerDecoder(67,t=>Ko(t,BigUint64Array,!1),"uint64, big endian, Typed Array"),gr.registerDecoder(68,t=>(E2(t.contents),new Uint8ClampedArray(t.contents)),"uint8 Typed Array, clamped arithmetic"),mi(Uint8ClampedArray,t=>[68,new Uint8Array(t.buffer,t.byteOffset,t.byteLength)]),gr.registerDecoder(69,t=>Ko(t,Uint16Array,!0),"uint16, little endian, Typed Array"),mi(Uint16Array,(t,e,n)=>Mm(e,69,65,t,n)),gr.registerDecoder(70,t=>Ko(t,Uint32Array,!0),"uint32, little endian, Typed Array"),mi(Uint32Array,(t,e,n)=>Mm(e,70,66,t,n)),gr.registerDecoder(71,t=>Ko(t,BigUint64Array,!0),"uint64, little endian, Typed Array"),mi(BigUint64Array,(t,e,n)=>Mm(e,71,67,t,n)),gr.registerDecoder(72,t=>(E2(t.contents),new Int8Array(t.contents)),"sint8 Typed Array"),mi(Int8Array,t=>[72,new Uint8Array(t.buffer,t.byteOffset,t.byteLength)]),gr.registerDecoder(73,t=>Ko(t,Int16Array,!1),"sint16, big endian, Typed Array"),gr.registerDecoder(74,t=>Ko(t,Int32Array,!1),"sint32, big endian, Typed Array"),gr.registerDecoder(75,t=>Ko(t,BigInt64Array,!1),"sint64, big endian, Typed Array"),gr.registerDecoder(77,t=>Ko(t,Int16Array,!0),"sint16, little endian, Typed Array"),mi(Int16Array,(t,e,n)=>Mm(e,77,73,t,n)),gr.registerDecoder(78,t=>Ko(t,Int32Array,!0),"sint32, little endian, Typed Array"),mi(Int32Array,(t,e,n)=>Mm(e,78,74,t,n)),gr.registerDecoder(79,t=>Ko(t,BigInt64Array,!0),"sint64, little endian, Typed Array"),mi(BigInt64Array,(t,e,n)=>Mm(e,79,75,t,n)),gr.registerDecoder(81,t=>Ko(t,Float32Array,!1),"IEEE 754 binary32, big endian, Typed Array"),gr.registerDecoder(82,t=>Ko(t,Float64Array,!1),"IEEE 754 binary64, big endian, Typed Array"),gr.registerDecoder(85,t=>Ko(t,Float32Array,!0),"IEEE 754 binary32, little endian, Typed Array"),mi(Float32Array,(t,e,n)=>Mm(e,85,81,t,n)),gr.registerDecoder(86,t=>Ko(t,Float64Array,!0),"IEEE 754 binary64, big endian, Typed Array"),mi(Float64Array,(t,e,n)=>Mm(e,86,82,t,n)),gr.registerDecoder(qs.SET,(t,e)=>{if(ySe(t.contents),e.sortKeys){const n=du.decodeToEncodeOpts(e);let r=null;for(const s of t.contents){const i=[s,void 0,v5(s,n)];if(r&&e.sortKeys(r,i)>=0)throw new Error(`Set items out of order in tag #${qs.SET}`);r=i}}return new Set(t.contents)},"Set"),mi(Set,(t,e,n)=>{let r=[...t];if(n.sortKeys){const s=r.map(i=>[i,void 0,v5(i,n)]);s.sort(n.sortKeys),r=s.map(([i])=>i)}return[qs.SET,r]}),gr.registerDecoder(qs.JSON,t=>(Yy(t.contents),JSON.parse(t.contents)),"JSON-encoded"),gr.registerDecoder(qs.SELF_DESCRIBED,t=>t.contents,"Self-Described"),gr.registerDecoder(qs.INVALID_16,()=>{throw new Error(`Tag always invalid: ${qs.INVALID_16}`)},"Invalid"),gr.registerDecoder(qs.INVALID_32,()=>{throw new Error(`Tag always invalid: ${qs.INVALID_32}`)},"Invalid"),gr.registerDecoder(qs.INVALID_64,()=>{throw new Error(`Tag always invalid: ${qs.INVALID_64}`)},"Invalid");function Gj(t){throw new Error(`Encoding ${t.constructor.name} intentionally unimplmented.  It is not concrete enough to interoperate.  Convert to Uint8Array first.`)}mi(ArrayBuffer,Gj),mi(DataView,Gj),typeof SharedArrayBuffer<"u"&&mi(SharedArrayBuffer,Gj);function uO(t){return[NaN,t.valueOf()]}mi(Boolean,uO),mi(Number,uO),mi(String,uO),mi(BigInt,uO);function ple(t,e={}){const n={...du.defaultDecodeOptions};if(e.dcbor?Object.assign(n,du.dcborDecodeOptions):e.cde&&Object.assign(n,du.cdeDecodeOptions),Object.assign(n,e),Object.hasOwn(n,"rejectLongNumbers"))throw new TypeError("rejectLongNumbers has changed to requirePreferred");n.boxed&&(n.saveOriginal=!0);const r=new aU(t,n);let s,i;for(const a of r){if(i=du.create(a,s,n,r),a[2]===ic.BREAK)if(s!=null&&s.isStreaming)s.left=0;else throw new Error("Unexpected BREAK");else s&&s.push(i,r,a[3]);for(i instanceof du&&(s=i);s!=null&&s.done;){i=s.convert(r);const o=s.parent;o==null||o.replaceLast(i,s,r),s=o}}return i}const{cdeDecodeOptions:b9t,dcborDecodeOptions:v9t,defaultDecodeOptions:x9t}=du;/*!
 * MIT License
 * 
 * Copyright (c) 2017-2024 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const Iat="[object ArrayBuffer]";class fn{static isArrayBuffer(e){return Object.prototype.toString.call(e)===Iat}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,n){if(e.constructor===n)return e;if(this.isArrayBuffer(e))return new n(e);if(this.isArrayBufferView(e))return new n(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,n){const r=fn.toUint8Array(e),s=fn.toUint8Array(n);if(r.length!==s.byteLength)return!1;for(let i=0;i<r.length;i++)if(r[i]!==s[i])return!1;return!0}static concat(...e){let n;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?n=e[0]:e[e.length-1]instanceof Function?n=e.slice(0,e.length-1):n=e;let r=0;for(const a of n)r+=a.byteLength;const s=new Uint8Array(r);let i=0;for(const a of n){const o=this.toUint8Array(a);s.set(o,i),i+=o.length}return e[e.length-1]instanceof Function?this.toView(s,e[e.length-1]):s.buffer}}const Wj="string",Cat=/^[0-9a-f\s]+$/i,Tat=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,Nat=/^[a-zA-Z0-9-_]+$/;class gle{static fromString(e){const n=unescape(encodeURIComponent(e)),r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r.buffer}static toString(e){const n=fn.toUint8Array(e);let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return decodeURIComponent(escape(r))}}class Nh{static toString(e,n=!1){const r=fn.toArrayBuffer(e),s=new DataView(r);let i="";for(let a=0;a<r.byteLength;a+=2){const o=s.getUint16(a,n);i+=String.fromCharCode(o)}return i}static fromString(e,n=!1){const r=new ArrayBuffer(e.length*2),s=new DataView(r);for(let i=0;i<e.length;i++)s.setUint16(i*2,e.charCodeAt(i),n);return r}}class pn{static isHex(e){return typeof e===Wj&&Cat.test(e)}static isBase64(e){return typeof e===Wj&&Tat.test(e)}static isBase64Url(e){return typeof e===Wj&&Nat.test(e)}static ToString(e,n="utf8"){const r=fn.toUint8Array(e);switch(n.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);case"utf16le":return Nh.toString(r,!0);case"utf16":case"utf16be":return Nh.toString(r);default:throw new Error(`Unknown type of encoding '${n}'`)}}static FromString(e,n="utf8"){if(!e)return new ArrayBuffer(0);switch(n.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return Nh.fromString(e,!0);case"utf16":case"utf16be":return Nh.fromString(e);default:throw new Error(`Unknown type of encoding '${n}'`)}}static ToBase64(e){const n=fn.toUint8Array(e);if(typeof btoa<"u"){const r=this.ToString(n,"binary");return btoa(r)}else return Buffer.from(n).toString("base64")}static FromBase64(e){const n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!pn.isBase64(n))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(n)):new Uint8Array(Buffer.from(n,"base64")).buffer}static FromBase64Url(e){const n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!pn.isBase64Url(n))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(n.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,n=pn.DEFAULT_UTF8_ENCODING){switch(n){case"ascii":return this.FromBinary(e);case"utf8":return gle.fromString(e);case"utf16":case"utf16be":return Nh.fromString(e);case"utf16le":case"usc2":return Nh.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${n}'`)}}static ToUtf8String(e,n=pn.DEFAULT_UTF8_ENCODING){switch(n){case"ascii":return this.ToBinary(e);case"utf8":return gle.toString(e);case"utf16":case"utf16be":return Nh.toString(e);case"utf16le":case"usc2":return Nh.toString(e,!0);default:throw new Error(`Unknown type of encoding '${n}'`)}}static FromBinary(e){const n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return r.buffer}static ToBinary(e){const n=fn.toUint8Array(e);let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}static ToHex(e){const n=fn.toUint8Array(e);let r="";const s=n.length;for(let i=0;i<s;i++){const a=n[i];a<16&&(r+="0"),r+=a.toString(16)}return r}static FromHex(e){let n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!pn.isHex(n))throw new TypeError("Argument 'hexString' is not HEX encoded");n.length%2&&(n=`0${n}`);const r=new Uint8Array(n.length/2);for(let s=0;s<n.length;s=s+2){const i=n.slice(s,s+2);r[s/2]=parseInt(i,16)}return r.buffer}static ToUtf16String(e,n=!1){return Nh.toString(e,n)}static FromUtf16String(e,n=!1){return Nh.fromString(e,n)}static Base64Padding(e){const n=4-e.length%4;if(n<4)for(let r=0;r<n;r++)e+="=";return e}static formatString(e){return(e==null?void 0:e.replace(/[\n\r\t ]/g,""))||""}}pn.DEFAULT_UTF8_ENCODING="utf8";/*!
 Copyright (c) Peculiar Ventures, LLC
*/function Z(t,e,n){var r;return t instanceof Object&&(r=t[e])!==null&&r!==void 0?r:n}function zj(t,e=0,n=t.byteLength-e,r=!1){let s="";for(const i of new Uint8Array(t,e,n)){const a=i.toString(16).toUpperCase();a.length===1&&(s+="0"),s+=a,r&&(s+=" ")}return s.trim()}function A2(t,e){let n=0;if(t.length===1)return t[0];for(let r=t.length-1;r>=0;r--)n+=t[t.length-1-r]*Math.pow(2,e*r);return n}function Wg(t,e,n=-1){const r=n;let s=t,i=0,a=Math.pow(2,e);for(let o=1;o<8;o++){if(t<a){let c;if(r<0)c=new ArrayBuffer(o),i=o;else{if(r<o)return new ArrayBuffer(0);c=new ArrayBuffer(r),i=r}const l=new Uint8Array(c);for(let u=o-1;u>=0;u--){const f=Math.pow(2,u*e);l[i-u-1]=Math.floor(s/f),s-=l[i-u-1]*f}return c}a*=Math.pow(2,e)}return new ArrayBuffer(0)}function L3(...t){let e=0,n=0;for(const i of t)e+=i.byteLength;const r=new ArrayBuffer(e),s=new Uint8Array(r);for(const i of t)s.set(new Uint8Array(i),n),n+=i.byteLength;return r}function YW(...t){let e=0,n=0;for(const i of t)e+=i.length;const r=new ArrayBuffer(e),s=new Uint8Array(r);for(const i of t)s.set(i,n),n+=i.length;return s}function wSe(){const t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const o=t[0]===255&&t[1]&128,c=t[0]===0&&(t[1]&128)===0;(o||c)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(e);for(let o=0;o<this.valueHex.byteLength;o++)n[o]=0;n[0]=t[0]&128;const r=A2(n,8),s=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(s);for(let o=0;o<this.valueHex.byteLength;o++)i[o]=t[o];return i[0]&=127,A2(i,8)-r}function kat(t){const e=t<0?t*-1:t;let n=128;for(let r=1;r<8;r++){if(e<=n){if(t<0){const a=n-e,o=Wg(a,8,r),c=new Uint8Array(o);return c[0]|=128,o}let s=Wg(e,8,r),i=new Uint8Array(s);if(i[0]&128){const a=s.slice(0),o=new Uint8Array(a);s=new ArrayBuffer(s.byteLength+1),i=new Uint8Array(s);for(let c=0;c<a.byteLength;c++)i[c+1]=o[c];i[0]=0}return s}n*=Math.pow(2,8)}return new ArrayBuffer(0)}function E5(t,e){if(t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),r=new Uint8Array(e);for(let s=0;s<n.length;s++)if(n[s]!==r[s])return!1;return!0}function ou(t,e){const n=t.toString(10);if(e<n.length)return"";const r=e-n.length,s=new Array(r);for(let a=0;a<r;a++)s[a]="0";return s.join("").concat(n)}const bSe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",vSe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function QW(t,e=!1,n=!1,r=!1){let s=0,i=0,a=0,o="";const c=e?vSe:bSe;if(r){let l=0;for(let u=0;u<t.length;u++)if(t.charCodeAt(u)!==0){l=u;break}t=t.slice(l)}for(;s<t.length;){const l=t.charCodeAt(s++);s>=t.length&&(i=1);const u=t.charCodeAt(s++);s>=t.length&&(a=1);const f=t.charCodeAt(s++),d=l>>2,p=(l&3)<<4|u>>4;let g=(u&15)<<2|f>>6,m=f&63;i===1?g=m=64:a===1&&(m=64),n?g===64?o+=`${c.charAt(d)}${c.charAt(p)}`:m===64?o+=`${c.charAt(d)}${c.charAt(p)}${c.charAt(g)}`:o+=`${c.charAt(d)}${c.charAt(p)}${c.charAt(g)}${c.charAt(m)}`:o+=`${c.charAt(d)}${c.charAt(p)}${c.charAt(g)}${c.charAt(m)}`}return o}function xk(t,e=!1,n=!1){const r=e?vSe:bSe;function s(c){for(let l=0;l<64;l++)if(r.charAt(l)===c)return l;return 64}function i(c){return c===64?0:c}let a=0,o="";for(;a<t.length;){const c=s(t.charAt(a++)),l=a>=t.length?0:s(t.charAt(a++)),u=a>=t.length?0:s(t.charAt(a++)),f=a>=t.length?0:s(t.charAt(a++)),d=i(c)<<2|i(l)>>4,p=(i(l)&15)<<4|i(u)>>2,g=(i(u)&3)<<6|i(f);o+=String.fromCharCode(d),u!==64&&(o+=String.fromCharCode(p)),f!==64&&(o+=String.fromCharCode(g))}if(n){const c=o.length;let l=-1;for(let u=c-1;u>=0;u--)if(o.charCodeAt(u)!==0){l=u;break}l!==-1?o=o.slice(0,l+1):o=""}return o}function wM(t){let e="";const n=new Uint8Array(t);for(const r of n)e+=String.fromCharCode(r);return e}function A5(t){const e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n);for(let s=0;s<e;s++)r[s]=t.charCodeAt(s);return n}const Pat=Math.log(2);function Oat(t){const e=Math.log(t)/Pat,n=Math.floor(e),r=Math.round(e);return n===r?n:r}function st(t,e){for(const n of e)delete t[n]}/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function bM(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function iee(t){let e=0,n=0;for(let s=0;s<t.length;s++){const i=t[s];e+=i.byteLength}const r=new Uint8Array(e);for(let s=0;s<t.length;s++){const i=t[s];r.set(new Uint8Array(i),n),n+=i.byteLength}return r.buffer}function rm(t,e,n,r){return e instanceof Uint8Array?e.byteLength?n<0?(t.error="Wrong parameter: inputOffset less than zero",!1):r<0?(t.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-n-r<0?(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class aee{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return iee(this.items)}}const P8=[new Uint8Array([1])],mle="0123456789",Jj="name",yle="valueHexView",Rat="isHexOnly",_at="idBlock",Bat="tagClass",Mat="tagNumber",Dat="isConstructed",Lat="fromBER",Uat="toBER",Fat="local",hl="",J0=new ArrayBuffer(0),oU=new Uint8Array(0),Ek="EndOfContent",xSe="OCTET STRING",ESe="BIT STRING";function sm(t){var e;return e=class extends t{get valueHex(){return this.valueHexView.slice().buffer}set valueHex(r){this.valueHexView=new Uint8Array(r)}constructor(...r){var s;super(...r);const i=r[0]||{};this.isHexOnly=(s=i.isHexOnly)!==null&&s!==void 0?s:!1,this.valueHexView=i.valueHex?fn.toUint8Array(i.valueHex):oU}fromBER(r,s,i){const a=r instanceof ArrayBuffer?new Uint8Array(r):r;if(!rm(this,a,s,i))return-1;const o=s+i;return this.valueHexView=a.subarray(s,o),this.valueHexView.length?(this.blockLength=i,o):(this.warnings.push("Zero buffer length"),s)}toBER(r=!1){return this.isHexOnly?r?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",J0)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:pn.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class G2{static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}constructor({blockLength:e=0,error:n=hl,warnings:r=[],valueBeforeDecode:s=oU}={}){this.blockLength=e,this.error=n,this.warnings=r,this.valueBeforeDecodeView=fn.toUint8Array(s)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:pn.ToHex(this.valueBeforeDecodeView)}}}G2.NAME="baseBlock";class Rl extends G2{fromBER(e,n,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}Rl.NAME="valueBlock";class ASe extends sm(G2){constructor({idBlock:e={}}={}){var n,r,s,i;super(),e?(this.isHexOnly=(n=e.isHexOnly)!==null&&n!==void 0?n:!1,this.valueHexView=e.valueHex?fn.toUint8Array(e.valueHex):oU,this.tagClass=(r=e.tagClass)!==null&&r!==void 0?r:-1,this.tagNumber=(s=e.tagNumber)!==null&&s!==void 0?s:-1,this.isConstructed=(i=e.isConstructed)!==null&&i!==void 0?i:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let n=0;switch(this.tagClass){case 1:n|=0;break;case 2:n|=64;break;case 3:n|=128;break;case 4:n|=192;break;default:return this.error="Unknown tag class",J0}if(this.isConstructed&&(n|=32),this.tagNumber<31&&!this.isHexOnly){const s=new Uint8Array(1);if(!e){let i=this.tagNumber;i&=31,n|=i,s[0]=n}return s.buffer}if(!this.isHexOnly){const s=Wg(this.tagNumber,7),i=new Uint8Array(s),a=s.byteLength,o=new Uint8Array(a+1);if(o[0]=n|31,!e){for(let c=0;c<a-1;c++)o[c+1]=i[c]|128;o[a]=i[a-1]}return o.buffer}const r=new Uint8Array(this.valueHexView.byteLength+1);if(r[0]=n|31,!e){const s=this.valueHexView;for(let i=0;i<s.length-1;i++)r[i+1]=s[i]|128;r[this.valueHexView.byteLength]=s[s.length-1]}return r.buffer}fromBER(e,n,r){const s=fn.toUint8Array(e);if(!rm(this,s,n,r))return-1;const i=s.subarray(n,n+r);if(i.length===0)return this.error="Zero buffer length",-1;switch(i[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(i[0]&32)===32,this.isHexOnly=!1;const o=i[0]&31;if(o!==31)this.tagNumber=o,this.blockLength=1;else{let c=1,l=this.valueHexView=new Uint8Array(255),u=255;for(;i[c]&128;){if(l[c-1]=i[c]&127,c++,c>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(c===u){u+=255;const d=new Uint8Array(u);for(let p=0;p<l.length;p++)d[p]=l[p];l=this.valueHexView=new Uint8Array(u)}}this.blockLength=c+1,l[c-1]=i[c]&127;const f=new Uint8Array(c);for(let d=0;d<c;d++)f[d]=l[d];l=this.valueHexView=new Uint8Array(c),l.set(f),this.blockLength<=9?this.tagNumber=A2(l,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return n+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}ASe.NAME="identificationBlock";class SSe extends G2{constructor({lenBlock:e={}}={}){var n,r,s;super(),this.isIndefiniteForm=(n=e.isIndefiniteForm)!==null&&n!==void 0?n:!1,this.longFormUsed=(r=e.longFormUsed)!==null&&r!==void 0?r:!1,this.length=(s=e.length)!==null&&s!==void 0?s:0}fromBER(e,n,r){const s=fn.toUint8Array(e);if(!rm(this,s,n,r))return-1;const i=s.subarray(n,n+r);if(i.length===0)return this.error="Zero buffer length",-1;if(i[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=i[0]===128,this.isIndefiniteForm)return this.blockLength=1,n+this.blockLength;if(this.longFormUsed=!!(i[0]&128),this.longFormUsed===!1)return this.length=i[0],this.blockLength=1,n+this.blockLength;const a=i[0]&127;if(a>8)return this.error="Too big integer",-1;if(a+1>i.length)return this.error="End of input reached before message was fully decoded",-1;const o=n+1,c=s.subarray(o,o+a);return c[a-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=A2(c,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=a+1,n+this.blockLength}toBER(e=!1){let n,r;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return n=new ArrayBuffer(1),e===!1&&(r=new Uint8Array(n),r[0]=128),n;if(this.longFormUsed){const s=Wg(this.length,8);if(s.byteLength>127)return this.error="Too big length",J0;if(n=new ArrayBuffer(s.byteLength+1),e)return n;const i=new Uint8Array(s);r=new Uint8Array(n),r[0]=s.byteLength|128;for(let a=0;a<s.byteLength;a++)r[a+1]=i[a];return n}return n=new ArrayBuffer(1),e===!1&&(r=new Uint8Array(n),r[0]=this.length),n}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}SSe.NAME="lengthBlock";const Ft={};class Kc extends G2{constructor({name:e=hl,optional:n=!1,primitiveSchema:r,...s}={},i){super(s),this.name=e,this.optional=n,r&&(this.primitiveSchema=r),this.idBlock=new ASe(s),this.lenBlock=new SSe(s),this.valueBlock=i?new i(s):new Rl(s)}fromBER(e,n,r){const s=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return s===-1?(this.error=this.valueBlock.error,s):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),s)}toBER(e,n){const r=n||new aee;n||ISe(this);const s=this.idBlock.toBER(e);if(r.write(s),this.lenBlock.isIndefiniteForm)r.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,r),r.write(new ArrayBuffer(2));else{const i=this.valueBlock.toBER(e);this.lenBlock.length=i.byteLength;const a=this.lenBlock.toBER(e);r.write(a),r.write(i)}return n?J0:r.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():pn.ToHex(this.toBER())}onAsciiEncoding(){const e=this.constructor.NAME,n=pn.ToHex(this.valueBlock.valueBeforeDecodeView);return`${e} : ${n}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const n=this.toBER(),r=e.toBER();return E5(n,r)}}Kc.NAME="BaseBlock";function ISe(t){var e;if(t instanceof Ft.Constructed)for(const n of t.valueBlock.value)ISe(n)&&(t.lenBlock.isIndefiniteForm=!0);return!!(!((e=t.lenBlock)===null||e===void 0)&&e.isIndefiniteForm)}class CSe extends Kc{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor({value:e=hl,...n}={},r){super(n,r),e&&this.fromString(e)}fromBER(e,n,r){const s=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return s===-1?(this.error=this.valueBlock.error,s):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),s)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}CSe.NAME="BaseStringBlock";class TSe extends sm(Rl){constructor({isHexOnly:e=!0,...n}={}){super(n),this.isHexOnly=e}}TSe.NAME="PrimitiveValueBlock";var NSe;let gn=class extends Kc{constructor(e={}){super(e,TSe),this.idBlock.isConstructed=!1}};NSe=gn;Ft.Primitive=NSe;gn.NAME="PRIMITIVE";function Vat(t,e){if(t instanceof e)return t;const n=new e;return n.idBlock=t.idBlock,n.lenBlock=t.lenBlock,n.warnings=t.warnings,n.valueBeforeDecodeView=t.valueBeforeDecodeView,n}function q7(t,e=0,n=t.length){const r=e;let s=new Kc({},Rl);const i=new G2;if(!rm(i,t,e,n))return s.error=i.error,{offset:-1,result:s};if(!t.subarray(e,e+n).length)return s.error="Zero buffer length",{offset:-1,result:s};let o=s.idBlock.fromBER(t,e,n);if(s.idBlock.warnings.length&&s.warnings.concat(s.idBlock.warnings),o===-1)return s.error=s.idBlock.error,{offset:-1,result:s};if(e=o,n-=s.idBlock.blockLength,o=s.lenBlock.fromBER(t,e,n),s.lenBlock.warnings.length&&s.warnings.concat(s.lenBlock.warnings),o===-1)return s.error=s.lenBlock.error,{offset:-1,result:s};if(e=o,n-=s.lenBlock.blockLength,!s.idBlock.isConstructed&&s.lenBlock.isIndefiniteForm)return s.error="Indefinite length form used for primitive encoding form",{offset:-1,result:s};let c=Kc;switch(s.idBlock.tagClass){case 1:if(s.idBlock.tagNumber>=37&&s.idBlock.isHexOnly===!1)return s.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:s};switch(s.idBlock.tagNumber){case 0:if(s.idBlock.isConstructed&&s.lenBlock.length>0)return s.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:s};c=Ft.EndOfContent;break;case 1:c=Ft.Boolean;break;case 2:c=Ft.Integer;break;case 3:c=Ft.BitString;break;case 4:c=Ft.OctetString;break;case 5:c=Ft.Null;break;case 6:c=Ft.ObjectIdentifier;break;case 10:c=Ft.Enumerated;break;case 12:c=Ft.Utf8String;break;case 13:c=Ft.RelativeObjectIdentifier;break;case 14:c=Ft.TIME;break;case 15:return s.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:s};case 16:c=Ft.Sequence;break;case 17:c=Ft.Set;break;case 18:c=Ft.NumericString;break;case 19:c=Ft.PrintableString;break;case 20:c=Ft.TeletexString;break;case 21:c=Ft.VideotexString;break;case 22:c=Ft.IA5String;break;case 23:c=Ft.UTCTime;break;case 24:c=Ft.GeneralizedTime;break;case 25:c=Ft.GraphicString;break;case 26:c=Ft.VisibleString;break;case 27:c=Ft.GeneralString;break;case 28:c=Ft.UniversalString;break;case 29:c=Ft.CharacterString;break;case 30:c=Ft.BmpString;break;case 31:c=Ft.DATE;break;case 32:c=Ft.TimeOfDay;break;case 33:c=Ft.DateTime;break;case 34:c=Ft.Duration;break;default:{const l=s.idBlock.isConstructed?new Ft.Constructed:new Ft.Primitive;l.idBlock=s.idBlock,l.lenBlock=s.lenBlock,l.warnings=s.warnings,s=l}}break;case 2:case 3:case 4:default:c=s.idBlock.isConstructed?Ft.Constructed:Ft.Primitive}return s=Vat(s,c),o=s.fromBER(t,e,s.lenBlock.isIndefiniteForm?n:s.lenBlock.length),s.valueBeforeDecodeView=t.subarray(r,r+s.blockLength),{offset:o,result:s}}function ia(t){if(!t.byteLength){const e=new Kc({},Rl);return e.error="Input buffer has zero length",{offset:-1,result:e}}return q7(fn.toUint8Array(t).slice(),0,t.byteLength)}function $at(t,e){return t?1:e}class Jw extends Rl{constructor({value:e=[],isIndefiniteForm:n=!1,...r}={}){super(r),this.value=e,this.isIndefiniteForm=n}fromBER(e,n,r){const s=fn.toUint8Array(e);if(!rm(this,s,n,r))return-1;if(this.valueBeforeDecodeView=s.subarray(n,n+r),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),n;let i=n;for(;$at(this.isIndefiniteForm,r)>0;){const a=q7(s,i,r);if(a.offset===-1)return this.error=a.result.error,this.warnings.concat(a.result.warnings),-1;if(i=a.offset,this.blockLength+=a.result.blockLength,r-=a.result.blockLength,this.value.push(a.result),this.isIndefiniteForm&&a.result.constructor.NAME===Ek)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===Ek?this.value.pop():this.warnings.push("No EndOfContent block encoded")),i}toBER(e,n){const r=n||new aee;for(let s=0;s<this.value.length;s++)this.value[s].toBER(e,r);return n?J0:r.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const n of this.value)e.value.push(n.toJSON());return e}}Jw.NAME="ConstructedValueBlock";var kSe;class Re extends Kc{constructor(e={}){super(e,Jw),this.idBlock.isConstructed=!0}fromBER(e,n,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const s=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return s===-1?(this.error=this.valueBlock.error,s):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),s)}onAsciiEncoding(){const e=[];for(const r of this.valueBlock.value)e.push(r.toString("ascii").split(`
`).map(s=>`  ${s}`).join(`
`));const n=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${n} :
${e.join(`
`)}`:`${n} :`}}kSe=Re;Ft.Constructed=kSe;Re.NAME="CONSTRUCTED";class PSe extends Rl{fromBER(e,n,r){return n}toBER(e){return J0}}PSe.override="EndOfContentValueBlock";var OSe;class RSe extends Kc{constructor(e={}){super(e,PSe),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}OSe=RSe;Ft.EndOfContent=OSe;RSe.NAME=Ek;var _Se;class xi extends Kc{constructor(e={}){super(e,Rl),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,n,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,n+r>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):n+r}toBER(e,n){const r=new ArrayBuffer(2);if(!e){const s=new Uint8Array(r);s[0]=5,s[1]=0}return n&&n.write(r),r}onAsciiEncoding(){return`${this.constructor.NAME}`}}_Se=xi;Ft.Null=_Se;xi.NAME="NULL";class BSe extends sm(Rl){get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}constructor({value:e,...n}={}){super(n),n.valueHex?this.valueHexView=fn.toUint8Array(n.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}fromBER(e,n,r){const s=fn.toUint8Array(e);return rm(this,s,n,r)?(this.valueHexView=s.subarray(n,n+r),r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,wSe.call(this),this.blockLength=r,n+r):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}BSe.NAME="BooleanValueBlock";var MSe;let U0=class extends Kc{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor(e={}){super(e,BSe),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};MSe=U0;Ft.Boolean=MSe;U0.NAME="BOOLEAN";class DSe extends sm(Jw){constructor({isConstructed:e=!1,...n}={}){super(n),this.isConstructed=e}fromBER(e,n,r){let s=0;if(this.isConstructed){if(this.isHexOnly=!1,s=Jw.prototype.fromBER.call(this,e,n,r),s===-1)return s;for(let i=0;i<this.value.length;i++){const a=this.value[i].constructor.NAME;if(a===Ek){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(a!==xSe)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,s=super.fromBER(e,n,r),this.blockLength=r;return s}toBER(e,n){return this.isConstructed?Jw.prototype.toBER.call(this,e,n):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}DSe.NAME="OctetStringValueBlock";var oee;class ut extends Kc{constructor({idBlock:e={},lenBlock:n={},...r}={}){var s,i;(s=r.isConstructed)!==null&&s!==void 0||(r.isConstructed=!!(!((i=r.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...n,isIndefiniteForm:!!r.isIndefiniteForm},...r},DSe),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,n,r){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,r===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),n;if(!this.valueBlock.isConstructed){const i=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(n,n+r);try{if(i.byteLength){const a=q7(i,0,i.byteLength);a.offset!==-1&&a.offset===r&&(this.valueBlock.value=[a.result])}}catch{}}return super.fromBER(e,n,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Re.prototype.onAsciiEncoding.call(this);const e=this.constructor.NAME,n=pn.ToHex(this.valueBlock.valueHexView);return`${e} : ${n}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const n of this.valueBlock.value)n instanceof oee&&e.push(n.valueBlock.valueHexView);return fn.concat(e)}}oee=ut;Ft.OctetString=oee;ut.NAME=xSe;class LSe extends sm(Jw){constructor({unusedBits:e=0,isConstructed:n=!1,...r}={}){super(r),this.unusedBits=e,this.isConstructed=n,this.blockLength=this.valueHexView.byteLength}fromBER(e,n,r){if(!r)return n;let s=-1;if(this.isConstructed){if(s=Jw.prototype.fromBER.call(this,e,n,r),s===-1)return s;for(const o of this.value){const c=o.constructor.NAME;if(c===Ek){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(c!==ESe)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const l=o.valueBlock;if(this.unusedBits>0&&l.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=l.unusedBits}return s}const i=fn.toUint8Array(e);if(!rm(this,i,n,r))return-1;const a=i.subarray(n,n+r);if(this.unusedBits=a[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const o=a.subarray(1);try{if(o.byteLength){const c=q7(o,0,o.byteLength);c.offset!==-1&&c.offset===r-1&&(this.value=[c.result])}}catch{}}return this.valueHexView=a.subarray(1),this.blockLength=a.length,n+r}toBER(e,n){if(this.isConstructed)return Jw.prototype.toBER.call(this,e,n);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength){const s=new Uint8Array(1);return s[0]=0,s.buffer}const r=new Uint8Array(this.valueHexView.length+1);return r[0]=this.unusedBits,r.set(this.valueHexView,1),r.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}LSe.NAME="BitStringValueBlock";var USe;class ur extends Kc{constructor({idBlock:e={},lenBlock:n={},...r}={}){var s,i;(s=r.isConstructed)!==null&&s!==void 0||(r.isConstructed=!!(!((i=r.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...n,isIndefiniteForm:!!r.isIndefiniteForm},...r},LSe),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,n,r){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,n,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Re.prototype.onAsciiEncoding.call(this);{const e=[],n=this.valueBlock.valueHexView;for(const a of n)e.push(a.toString(2).padStart(8,"0"));const r=e.join(""),s=this.constructor.NAME,i=r.substring(0,r.length-this.valueBlock.unusedBits);return`${s} : ${i}`}}}USe=ur;Ft.BitString=USe;ur.NAME=ESe;var FSe;function jat(t,e){const n=new Uint8Array([0]),r=new Uint8Array(t),s=new Uint8Array(e);let i=r.slice(0);const a=i.length-1,o=s.slice(0),c=o.length-1;let l=0;const u=c<a?a:c;let f=0;for(let d=u;d>=0;d--,f++){switch(!0){case f<o.length:l=i[a-f]+o[c-f]+n[0];break;default:l=i[a-f]+n[0]}switch(n[0]=l/10,!0){case f>=i.length:i=YW(new Uint8Array([l%10]),i);break;default:i[a-f]=l%10}}return n[0]>0&&(i=YW(n,i)),i}function wle(t){if(t>=P8.length)for(let e=P8.length;e<=t;e++){const n=new Uint8Array([0]);let r=P8[e-1].slice(0);for(let s=r.length-1;s>=0;s--){const i=new Uint8Array([(r[s]<<1)+n[0]]);n[0]=i[0]/10,r[s]=i[0]%10}n[0]>0&&(r=YW(n,r)),P8.push(r)}return P8[t]}function Hat(t,e){let n=0;const r=new Uint8Array(t),s=new Uint8Array(e),i=r.slice(0),a=i.length-1,o=s.slice(0),c=o.length-1;let l,u=0;for(let f=c;f>=0;f--,u++)switch(l=i[a-u]-o[c-u]-n,!0){case l<0:n=1,i[a-u]=l+10;break;default:n=0,i[a-u]=l}if(n>0)for(let f=a-c+1;f>=0;f--,u++)if(l=i[a-u]-n,l<0)n=1,i[a-u]=l+10;else{n=0,i[a-u]=l;break}return i.slice()}class cee extends sm(Rl){setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=wSe.call(this)))}constructor({value:e,...n}={}){super(n),this._valueDec=0,n.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(kat(e))}get valueDec(){return this._valueDec}fromDER(e,n,r,s=0){const i=this.fromBER(e,n,r);if(i===-1)return i;const a=this.valueHexView;return a[0]===0&&a[1]&128?this.valueHexView=a.subarray(1):s!==0&&a.length<s&&(s-a.length>1&&(s=a.length+1),this.valueHexView=a.subarray(s-a.length)),i}toDER(e=!1){const n=this.valueHexView;switch(!0){case(n[0]&128)!==0:{const r=new Uint8Array(this.valueHexView.length+1);r[0]=0,r.set(n,1),this.valueHexView=r}break;case(n[0]===0&&(n[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,n,r){const s=super.fromBER(e,n,r);return s===-1||this.setValueHex(),s}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let n=new Uint8Array(this.valueHexView.length*8/3),r=0,s;const i=this.valueHexView;let a="",o=!1;for(let c=i.byteLength-1;c>=0;c--){s=i[c];for(let l=0;l<8;l++){if((s&1)===1)switch(r){case e:n=Hat(wle(r),n),a="-";break;default:n=jat(n,wle(r))}r++,s>>=1}}for(let c=0;c<n.length;c++)n[c]&&(o=!0),o&&(a+=mle.charAt(n[c]));return o===!1&&(a+=mle.charAt(0)),a}}FSe=cee;cee.NAME="IntegerValueBlock";Object.defineProperty(FSe.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var tN;class $e extends Kc{constructor(e={}){super(e,cee),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return bM(),BigInt(this.valueBlock.toString())}static fromBigInt(e){bM();const n=BigInt(e),r=new aee,s=n.toString(16).replace(/^-/,""),i=new Uint8Array(pn.FromHex(s));if(n<0){const o=new Uint8Array(i.length+(i[0]&128?1:0));o[0]|=128;const l=BigInt(`0x${pn.ToHex(o)}`)+n,u=fn.toUint8Array(pn.FromHex(l.toString(16)));u[0]|=128,r.write(u)}else i[0]&128&&r.write(new Uint8Array([0])),r.write(i);return new tN({valueHex:r.final()})}convertToDER(){const e=new tN({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new tN({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}tN=$e;Ft.Integer=tN;$e.NAME="INTEGER";var VSe;class S2 extends $e{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}VSe=S2;Ft.Enumerated=VSe;S2.NAME="ENUMERATED";class ZW extends sm(Rl){constructor({valueDec:e=-1,isFirstSid:n=!1,...r}={}){super(r),this.valueDec=e,this.isFirstSid=n}fromBER(e,n,r){if(!r)return n;const s=fn.toUint8Array(e);if(!rm(this,s,n,r))return-1;const i=s.subarray(n,n+r);this.valueHexView=new Uint8Array(r);for(let o=0;o<r&&(this.valueHexView[o]=i[o]&127,this.blockLength++,!!(i[o]&128));o++);const a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength;o++)a[o]=this.valueHexView[o];return this.valueHexView=a,i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=A2(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),n+this.blockLength)}set valueBigInt(e){bM();let n=BigInt(e).toString(2);for(;n.length%7;)n="0"+n;const r=new Uint8Array(n.length/7);for(let s=0;s<r.length;s++)r[s]=parseInt(n.slice(s*7,s*7+7),2)+(s+1<r.length?128:0);this.fromBER(r.buffer,0,r.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const s=this.valueHexView,i=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)i[a]=s[a]|128;return i[this.blockLength-1]=s[this.blockLength-1],i.buffer}const n=Wg(this.valueDec,7);if(n.byteLength===0)return this.error="Error during encoding SID value",J0;const r=new Uint8Array(n.byteLength);if(!e){const s=new Uint8Array(n),i=n.byteLength-1;for(let a=0;a<i;a++)r[a]=s[a]|128;r[i]=s[i]}return r}toString(){let e="";if(this.isHexOnly)e=pn.ToHex(this.valueHexView);else if(this.isFirstSid){let n=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",n-=40):(e="2.",n-=80),e+=n.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}ZW.NAME="sidBlock";class $Se extends Rl{constructor({value:e=hl,...n}={}){super(n),this.value=[],e&&this.fromString(e)}fromBER(e,n,r){let s=n;for(;r>0;){const i=new ZW;if(s=i.fromBER(e,s,r),s===-1)return this.blockLength=0,this.error=i.error,s;this.value.length===0&&(i.isFirstSid=!0),this.blockLength+=i.blockLength,r-=i.blockLength,this.value.push(i)}return s}toBER(e){const n=[];for(let r=0;r<this.value.length;r++){const s=this.value[r].toBER(e);if(s.byteLength===0)return this.error=this.value[r].error,J0;n.push(s)}return iee(n)}fromString(e){this.value=[];let n=0,r=0,s="",i=!1;do if(r=e.indexOf(".",n),r===-1?s=e.substring(n):s=e.substring(n,r),n=r+1,i){const a=this.value[0];let o=0;switch(a.valueDec){case 0:break;case 1:o=40;break;case 2:o=80;break;default:this.value=[];return}const c=parseInt(s,10);if(isNaN(c))return;a.valueDec=c+o,i=!1}else{const a=new ZW;if(s>Number.MAX_SAFE_INTEGER){bM();const o=BigInt(s);a.valueBigInt=o}else if(a.valueDec=parseInt(s,10),isNaN(a.valueDec))return;this.value.length||(a.isFirstSid=!0,i=!0),this.value.push(a)}while(r!==-1)}toString(){let e="",n=!1;for(let r=0;r<this.value.length;r++){n=this.value[r].isHexOnly;let s=this.value[r].toString();r!==0&&(e=`${e}.`),n?(s=`{${s}}`,this.value[r].isFirstSid?e=`2.{${s} - 80}`:e+=s):e+=s}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let n=0;n<this.value.length;n++)e.sidArray.push(this.value[n].toJSON());return e}}$Se.NAME="ObjectIdentifierValueBlock";var jSe;class Rt extends Kc{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,$Se),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}jSe=Rt;Ft.ObjectIdentifier=jSe;Rt.NAME="OBJECT IDENTIFIER";class XW extends sm(G2){constructor({valueDec:e=0,...n}={}){super(n),this.valueDec=e}fromBER(e,n,r){if(r===0)return n;const s=fn.toUint8Array(e);if(!rm(this,s,n,r))return-1;const i=s.subarray(n,n+r);this.valueHexView=new Uint8Array(r);for(let o=0;o<r&&(this.valueHexView[o]=i[o]&127,this.blockLength++,!!(i[o]&128));o++);const a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength;o++)a[o]=this.valueHexView[o];return this.valueHexView=a,i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=A2(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),n+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const s=this.valueHexView,i=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)i[a]=s[a]|128;return i[this.blockLength-1]=s[this.blockLength-1],i.buffer}const n=Wg(this.valueDec,7);if(n.byteLength===0)return this.error="Error during encoding SID value",J0;const r=new Uint8Array(n.byteLength);if(!e){const s=new Uint8Array(n),i=n.byteLength-1;for(let a=0;a<i;a++)r[a]=s[a]|128;r[i]=s[i]}return r.buffer}toString(){let e="";return this.isHexOnly?e=pn.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}XW.NAME="relativeSidBlock";class HSe extends Rl{constructor({value:e=hl,...n}={}){super(n),this.value=[],e&&this.fromString(e)}fromBER(e,n,r){let s=n;for(;r>0;){const i=new XW;if(s=i.fromBER(e,s,r),s===-1)return this.blockLength=0,this.error=i.error,s;this.blockLength+=i.blockLength,r-=i.blockLength,this.value.push(i)}return s}toBER(e,n){const r=[];for(let s=0;s<this.value.length;s++){const i=this.value[s].toBER(e);if(i.byteLength===0)return this.error=this.value[s].error,J0;r.push(i)}return iee(r)}fromString(e){this.value=[];let n=0,r=0,s="";do{r=e.indexOf(".",n),r===-1?s=e.substring(n):s=e.substring(n,r),n=r+1;const i=new XW;if(i.valueDec=parseInt(s,10),isNaN(i.valueDec))return!0;this.value.push(i)}while(r!==-1);return!0}toString(){let e="",n=!1;for(let r=0;r<this.value.length;r++){n=this.value[r].isHexOnly;let s=this.value[r].toString();r!==0&&(e=`${e}.`),n&&(s=`{${s}}`),e+=s}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let n=0;n<this.value.length;n++)e.sidArray.push(this.value[n].toJSON());return e}}HSe.NAME="RelativeObjectIdentifierValueBlock";var qSe;class KSe extends Kc{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,HSe),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}qSe=KSe;Ft.RelativeObjectIdentifier=qSe;KSe.NAME="RelativeObjectIdentifier";var GSe;class ve extends Re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}GSe=ve;Ft.Sequence=GSe;ve.NAME="SEQUENCE";var WSe;let Ei=class extends Re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};WSe=Ei;Ft.Set=WSe;Ei.NAME="SET";class zSe extends sm(Rl){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=hl}toJSON(){return{...super.toJSON(),value:this.value}}}zSe.NAME="StringValueBlock";class JSe extends zSe{}JSe.NAME="SimpleStringValueBlock";class Ru extends CSe{constructor({...e}={}){super(e,JSe)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,fn.toUint8Array(e))}fromString(e){const n=e.length,r=this.valueBlock.valueHexView=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);this.valueBlock.value=e}}Ru.NAME="SIMPLE STRING";class YSe extends Ru{fromBuffer(e){this.valueBlock.valueHexView=fn.toUint8Array(e);try{this.valueBlock.value=pn.ToUtf8String(e)}catch(n){this.warnings.push(`Error during "decodeURIComponent": ${n}, using raw string`),this.valueBlock.value=pn.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(pn.FromUtf8String(e)),this.valueBlock.value=e}}YSe.NAME="Utf8StringValueBlock";var QSe;class ch extends YSe{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}QSe=ch;Ft.Utf8String=QSe;ch.NAME="UTF8String";class ZSe extends Ru{fromBuffer(e){this.valueBlock.value=pn.ToUtf16String(e),this.valueBlock.valueHexView=fn.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(pn.FromUtf16String(e))}}ZSe.NAME="BmpStringValueBlock";var XSe;class Ak extends ZSe{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}XSe=Ak;Ft.BmpString=XSe;Ak.NAME="BMPString";class e3e extends Ru{fromBuffer(e){const n=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),r=new Uint8Array(n);for(let s=0;s<r.length;s+=4)r[s]=r[s+3],r[s+1]=r[s+2],r[s+2]=0,r[s+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(n))}fromString(e){const n=e.length,r=this.valueBlock.valueHexView=new Uint8Array(n*4);for(let s=0;s<n;s++){const i=Wg(e.charCodeAt(s),8),a=new Uint8Array(i);if(a.length>4)continue;const o=4-a.length;for(let c=a.length-1;c>=0;c--)r[s*4+c+o]=a[c]}this.valueBlock.value=e}}e3e.NAME="UniversalStringValueBlock";var t3e;class Sk extends e3e{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}t3e=Sk;Ft.UniversalString=t3e;Sk.NAME="UniversalString";var n3e;class U3 extends Ru{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}n3e=U3;Ft.NumericString=n3e;U3.NAME="NumericString";var r3e;class qd extends Ru{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}r3e=qd;Ft.PrintableString=r3e;qd.NAME="PrintableString";var s3e;class Ik extends Ru{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}s3e=Ik;Ft.TeletexString=s3e;Ik.NAME="TeletexString";var i3e;class lee extends Ru{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}i3e=lee;Ft.VideotexString=i3e;lee.NAME="VideotexString";var a3e;class cU extends Ru{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}a3e=cU;Ft.IA5String=a3e;cU.NAME="IA5String";var o3e;class uee extends Ru{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}o3e=uee;Ft.GraphicString=o3e;uee.NAME="GraphicString";var c3e;class lU extends Ru{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}c3e=lU;Ft.VisibleString=c3e;lU.NAME="VisibleString";var l3e;class fee extends Ru{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}l3e=fee;Ft.GeneralString=l3e;fee.NAME="GeneralString";var u3e;class dee extends Ru{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}u3e=dee;Ft.CharacterString=u3e;dee.NAME="CharacterString";var f3e;class S5 extends lU{constructor({value:e,valueDate:n,...r}={}){if(super(r),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let s=0;s<e.length;s++)this.valueBlock.valueHexView[s]=e.charCodeAt(s)}n&&(this.fromDate(n),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,fn.toUint8Array(e)))}toBuffer(){const e=this.toString(),n=new ArrayBuffer(e.length),r=new Uint8Array(n);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return n}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const r=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(r===null){this.error="Wrong input string for conversion";return}const s=parseInt(r[1],10);s>=50?this.year=1900+s:this.year=2e3+s,this.month=parseInt(r[2],10),this.day=parseInt(r[3],10),this.hour=parseInt(r[4],10),this.minute=parseInt(r[5],10),this.second=parseInt(r[6],10)}toString(e="iso"){if(e==="iso"){const n=new Array(7);return n[0]=ou(this.year<2e3?this.year-1900:this.year-2e3,2),n[1]=ou(this.month,2),n[2]=ou(this.day,2),n[3]=ou(this.hour,2),n[4]=ou(this.minute,2),n[5]=ou(this.second,2),n[6]="Z",n.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}f3e=S5;Ft.UTCTime=f3e;S5.NAME="UTCTime";var d3e;class Gs extends S5{constructor(e={}){var n;super(e),(n=this.millisecond)!==null&&n!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){const e=Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond);return new Date(e)}fromString(e){let n=!1,r="",s="",i=0,a,o=0,c=0;if(e[e.length-1]==="Z")r=e.substring(0,e.length-1),n=!0;else{const f=new Number(e[e.length-1]);if(isNaN(f.valueOf()))throw new Error("Wrong input string for conversion");r=e}if(n){if(r.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(r.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let f=1,d=r.indexOf("+"),p="";if(d===-1&&(d=r.indexOf("-"),f=-1),d!==-1){if(p=r.substring(d+1),r=r.substring(0,d),p.length!==2&&p.length!==4)throw new Error("Wrong input string for conversion");let g=parseInt(p.substring(0,2),10);if(isNaN(g.valueOf()))throw new Error("Wrong input string for conversion");if(o=f*g,p.length===4){if(g=parseInt(p.substring(2,4),10),isNaN(g.valueOf()))throw new Error("Wrong input string for conversion");c=f*g}}}let l=r.indexOf(".");if(l===-1&&(l=r.indexOf(",")),l!==-1){const f=new Number(`0${r.substring(l)}`);if(isNaN(f.valueOf()))throw new Error("Wrong input string for conversion");i=f.valueOf(),s=r.substring(0,l)}else s=r;switch(!0){case s.length===8:if(a=/(\d{4})(\d{2})(\d{2})/ig,l!==-1)throw new Error("Wrong input string for conversion");break;case s.length===10:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,l!==-1){let f=60*i;this.minute=Math.floor(f),f=60*(f-this.minute),this.second=Math.floor(f),f=1e3*(f-this.second),this.millisecond=Math.floor(f)}break;case s.length===12:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,l!==-1){let f=60*i;this.second=Math.floor(f),f=1e3*(f-this.second),this.millisecond=Math.floor(f)}break;case s.length===14:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,l!==-1){const f=1e3*i;this.millisecond=Math.floor(f)}break;default:throw new Error("Wrong input string for conversion")}const u=a.exec(s);if(u===null)throw new Error("Wrong input string for conversion");for(let f=1;f<u.length;f++)switch(f){case 1:this.year=parseInt(u[f],10);break;case 2:this.month=parseInt(u[f],10);break;case 3:this.day=parseInt(u[f],10);break;case 4:this.hour=parseInt(u[f],10)+o;break;case 5:this.minute=parseInt(u[f],10)+c;break;case 6:this.second=parseInt(u[f],10);break;default:throw new Error("Wrong input string for conversion")}if(n===!1){const f=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=f.getUTCFullYear(),this.month=f.getUTCMonth(),this.day=f.getUTCDay(),this.hour=f.getUTCHours(),this.minute=f.getUTCMinutes(),this.second=f.getUTCSeconds(),this.millisecond=f.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const n=[];return n.push(ou(this.year,4)),n.push(ou(this.month,2)),n.push(ou(this.day,2)),n.push(ou(this.hour,2)),n.push(ou(this.minute,2)),n.push(ou(this.second,2)),this.millisecond!==0&&(n.push("."),n.push(ou(this.millisecond,3))),n.push("Z"),n.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}d3e=Gs;Ft.GeneralizedTime=d3e;Gs.NAME="GeneralizedTime";var h3e;let p3e=class extends ch{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}};h3e=p3e;Ft.DATE=h3e;p3e.NAME="DATE";var g3e;class m3e extends ch{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}g3e=m3e;Ft.TimeOfDay=g3e;m3e.NAME="TimeOfDay";var y3e;class w3e extends ch{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}y3e=w3e;Ft.DateTime=y3e;w3e.NAME="DateTime";var b3e;class v3e extends ch{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}b3e=v3e;Ft.Duration=b3e;v3e.NAME="Duration";var x3e;class E3e extends ch{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}x3e=E3e;Ft.TIME=x3e;E3e.NAME="TIME";class xn{constructor({name:e=hl,optional:n=!1}={}){this.name=e,this.optional=n}}class zs extends xn{constructor({value:e=[],...n}={}){super(n),this.value=e}}class Dn extends xn{constructor({value:e=new xn,local:n=!1,...r}={}){super(r),this.value=e,this.local=n}}class vM{get data(){return this.dataView.slice().buffer}set data(e){this.dataView=fn.toUint8Array(e)}constructor({data:e=oU}={}){this.dataView=fn.toUint8Array(e)}fromBER(e,n,r){const s=n+r;return this.dataView=fn.toUint8Array(e).subarray(n,s),s}toBER(e){return this.dataView.slice().buffer}}function tt(t,e,n){if(n instanceof zs){for(const i of n.value)if(tt(t,e,i).verified)return{verified:!0,result:t};{const i={verified:!1,result:{error:"Wrong values for Choice type"}};return n.hasOwnProperty(Jj)&&(i.name=n.name),i}}if(n instanceof xn)return n.hasOwnProperty(Jj)&&(t[n.name]=e),{verified:!0,result:t};if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(n instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(_at in n))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(Lat in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(Uat in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const r=n.idBlock.toBER(!1);if(r.byteLength===0)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(n.idBlock.fromBER(r,0,r.byteLength)===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(n.idBlock.hasOwnProperty(Bat)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagClass!==e.idBlock.tagClass)return{verified:!1,result:t};if(n.idBlock.hasOwnProperty(Mat)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagNumber!==e.idBlock.tagNumber)return{verified:!1,result:t};if(n.idBlock.hasOwnProperty(Dat)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isConstructed!==e.idBlock.isConstructed)return{verified:!1,result:t};if(!(Rat in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isHexOnly!==e.idBlock.isHexOnly)return{verified:!1,result:t};if(n.idBlock.isHexOnly){if(!(yle in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const i=n.idBlock.valueHexView,a=e.idBlock.valueHexView;if(i.length!==a.length)return{verified:!1,result:t};for(let o=0;o<i.length;o++)if(i[o]!==a[1])return{verified:!1,result:t}}if(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,hl),n.name&&(t[n.name]=e)),n instanceof Ft.Constructed){let i=0,a={verified:!1,result:{error:"Unknown error"}},o=n.valueBlock.value.length;if(o>0&&n.valueBlock.value[0]instanceof Dn&&(o=e.valueBlock.value.length),o===0)return{verified:!0,result:t};if(e.valueBlock.value.length===0&&n.valueBlock.value.length!==0){let c=!0;for(let l=0;l<n.valueBlock.value.length;l++)c=c&&(n.valueBlock.value[l].optional||!1);return c?{verified:!0,result:t}:(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,hl),n.name&&delete t[n.name]),t.error="Inconsistent object length",{verified:!1,result:t})}for(let c=0;c<o;c++)if(c-i>=e.valueBlock.value.length){if(n.valueBlock.value[c].optional===!1){const l={verified:!1,result:t};return t.error="Inconsistent length between ASN.1 data and schema",n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,hl),n.name&&(delete t[n.name],l.name=n.name)),l}}else if(n.valueBlock.value[0]instanceof Dn){if(a=tt(t,e.valueBlock.value[c],n.valueBlock.value[0].value),a.verified===!1)if(n.valueBlock.value[0].optional)i++;else return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,hl),n.name&&delete t[n.name]),a;if(Jj in n.valueBlock.value[0]&&n.valueBlock.value[0].name.length>0){let l={};Fat in n.valueBlock.value[0]&&n.valueBlock.value[0].local?l=e:l=t,typeof l[n.valueBlock.value[0].name]>"u"&&(l[n.valueBlock.value[0].name]=[]),l[n.valueBlock.value[0].name].push(e.valueBlock.value[c])}}else if(a=tt(t,e.valueBlock.value[c-i],n.valueBlock.value[c]),a.verified===!1)if(n.valueBlock.value[c].optional)i++;else return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,hl),n.name&&delete t[n.name]),a;if(a.verified===!1){const c={verified:!1,result:t};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,hl),n.name&&(delete t[n.name],c.name=n.name)),c}return{verified:!0,result:t}}if(n.primitiveSchema&&yle in e.valueBlock){const i=q7(e.valueBlock.valueHexView);if(i.offset===-1){const a={verified:!1,result:i.result};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,hl),n.name&&(delete t[n.name],a.name=n.name)),a}return tt(t,i.result,n.primitiveSchema)}return{verified:!0,result:t}}class Xs{constructor(e={}){if("view"in e)this.fromUint8Array(e.view);else if("buffer"in e)this.fromArrayBuffer(e.buffer);else if("string"in e)this.fromString(e.string);else if("hexstring"in e)this.fromHexString(e.hexstring);else if("length"in e&&e.length>0){if(this.length=e.length,e.stub)for(let n=0;n<this._view.length;n++)this._view[n]=e.stub}else this.length=0}set buffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(e){this._buffer=new ArrayBuffer(e.length),this._view=new Uint8Array(this._buffer),this._view.set(e)}get view(){return this._view}get length(){return this.view.byteLength}set length(e){this._buffer=new ArrayBuffer(e),this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0),this._view=new Uint8Array(this._buffer)}fromArrayBuffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}fromUint8Array(e){this.fromArrayBuffer(new Uint8Array(e).buffer)}fromString(e){const n=e.length;this.length=n;for(let r=0;r<n;r++)this.view[r]=e.charCodeAt(r)}toString(e=0,n=this.view.length-e){let r="";(e>=this.view.length||e<0)&&(e=0),(n>=this.view.length||n<0)&&(n=this.view.length-e);for(let s=e;s<e+n;s++)r+=String.fromCharCode(this.view[s]);return r}fromHexString(e){const n=e.length;this.buffer=new ArrayBuffer(n>>1),this.view=new Uint8Array(this.buffer);const r=new Map;r.set("0",0),r.set("1",1),r.set("2",2),r.set("3",3),r.set("4",4),r.set("5",5),r.set("6",6),r.set("7",7),r.set("8",8),r.set("9",9),r.set("A",10),r.set("a",10),r.set("B",11),r.set("b",11),r.set("C",12),r.set("c",12),r.set("D",13),r.set("d",13),r.set("E",14),r.set("e",14),r.set("F",15),r.set("f",15);let s=0,i=0;for(let a=0;a<n;a++)a%2?(i|=r.get(e.charAt(a)),this.view[s]=i,s++):i=r.get(e.charAt(a))<<4}toHexString(e=0,n=this.view.length-e){let r="";(e>=this.view.length||e<0)&&(e=0),(n>=this.view.length||n<0)&&(n=this.view.length-e);for(let s=e;s<e+n;s++){const i=this.view[s].toString(16).toUpperCase();r=r+(i.length==1?"0":"")+i}return r}copy(e=0,n=this.length-e){if(!e&&!this.length)return new Xs;if(e<0||e>this.length-1)throw new Error(`Wrong start position: ${e}`);return new Xs({buffer:this._buffer.slice(e,e+n)})}slice(e=0,n=this.length){if(!e&&!this.length)return new Xs;if(e<0||e>this.length-1)throw new Error(`Wrong start position: ${e}`);return new Xs({buffer:this._buffer.slice(e,n)})}realloc(e){const n=new ArrayBuffer(e),r=new Uint8Array(n);e>this._view.length?r.set(this._view):r.set(new Uint8Array(this._buffer,0,e)),this._buffer=n,this._view=new Uint8Array(this._buffer)}append(e){const n=this.length,r=e.length,s=e._view.subarray();this.realloc(n+r),this._view.set(s,n)}insert(e,n=0,r=this.length-n){return n>this.length-1?!1:(r>this.length-n&&(r=this.length-n),r>e.length&&(r=e.length),r==e.length?this._view.set(e._view,n):this._view.set(e._view.subarray(0,r),n),!0)}isEqual(e){if(this.length!=e.length)return!1;for(let n=0;n<e.length;n++)if(this.view[n]!=e.view[n])return!1;return!0}isEqualView(e){if(e.length!=this.view.length)return!1;for(let n=0;n<e.length;n++)if(this.view[n]!=e[n])return!1;return!0}findPattern(e,n,r,s){const{start:i,length:a,backward:o}=this.prepareFindParameters(n,r,s),c=e.length;if(c>a)return-1;const l=[];for(let u=0;u<c;u++)l.push(e.view[u]);for(let u=0;u<=a-c;u++){let f=!0;const d=o?i-c-u:i+u;for(let p=0;p<c;p++)if(this.view[p+d]!=l[p]){f=!1;break}if(f)return o?i-c-u:i+c+u}return-1}findFirstIn(e,n,r,s){const{start:i,length:a,backward:o}=this.prepareFindParameters(n,r,s),c={id:-1,position:o?0:i+a,length:0};for(let l=0;l<e.length;l++){const u=this.findPattern(e[l],i,a,o);if(u!=-1){let f=!1;const d=e[l].length;o?u-d>=c.position-c.length&&(f=!0):u-d<=c.position-c.length&&(f=!0),f&&(c.position=u,c.id=l,c.length=d)}}return c}findAllIn(e,n,r){let{start:s,length:i}=this.prepareFindParameters(n,r);const a=[];let o={id:-1,position:s};do{const c=o.position;if(o=this.findFirstIn(e,o.position,i),o.id==-1)break;i-=o.position-c,a.push({id:o.id,position:o.position})}while(!0);return a}findAllPatternIn(e,n,r){const{start:s,length:i}=this.prepareFindParameters(n,r),a=[],o=e.length;if(o>i)return-1;const c=Array.from(e.view);for(let l=0;l<=i-o;l++){let u=!0;const f=s+l;for(let d=0;d<o;d++)if(this.view[d+f]!=c[d]){u=!1;break}u&&(a.push(s+o+l),l+=o-1)}return a}findFirstNotIn(e,n,r,s){let{start:i,length:a,backward:o}=this.prepareFindParameters(n,r,s);const c={left:{id:-1,position:i},right:{id:-1,position:0},value:new Xs};let l=a;for(;l>0;){if(c.right=this.findFirstIn(e,o?i-a+l:i+a-l,l,o),c.right.id==-1){a=l,o?i-=a:i=c.left.position,c.value=new Xs({buffer:this._buffer.slice(i,i+a)});break}if(c.right.position!=(o?c.left.position-e[c.right.id].length:c.left.position+e[c.right.id].length)){o?(i=c.right.position+e[c.right.id].length,a=c.left.position-c.right.position-e[c.right.id].length):(i=c.left.position,a=c.right.position-c.left.position-e[c.right.id].length),c.value=new Xs({buffer:this._buffer.slice(i,i+a)});break}c.left=c.right,l-=e[c.right.id].length}if(o){const u=c.right;c.right=c.left,c.left=u}return c}findAllNotIn(e,n,r){let{start:s,length:i}=this.prepareFindParameters(n,r);const a=[];let o={left:{id:-1,position:s},right:{id:-1,position:s},value:new Xs};do{const c=o.right.position;o=this.findFirstNotIn(e,o.right.position,i),i-=o.right.position-c,a.push({left:{id:o.left.id,position:o.left.position},right:{id:o.right.id,position:o.right.position},value:o.value})}while(o.right.id!=-1);return a}findFirstSequence(e,n,r,s){let{start:i,length:a,backward:o}=this.prepareFindParameters(n,r,s);const c=this.skipNotPatterns(e,i,a,o);if(c==-1)return{position:-1,value:new Xs};const l=this.skipPatterns(e,c,a-(o?i-c:c-i),o);o?(i=l,a=c-l):(i=c,a=l-c);const u=new Xs({buffer:this._buffer.slice(i,i+a)});return{position:l,value:u}}findAllSequences(e,n,r){let{start:s,length:i}=this.prepareFindParameters(n,r);const a=[];let o={position:s,value:new Xs};do{const c=o.position;o=this.findFirstSequence(e,o.position,i),o.position!=-1&&(i-=o.position-c,a.push({position:o.position,value:o.value}))}while(o.position!=-1);return a}findPairedPatterns(e,n,r,s){const i=[];if(e.isEqual(n))return i;const{start:a,length:o}=this.prepareFindParameters(r,s);let c=0;const l=this.findAllPatternIn(e,a,o);if(!Array.isArray(l)||l.length==0)return i;const u=this.findAllPatternIn(n,a,o);if(!Array.isArray(u)||u.length==0)return i;for(;c<l.length&&u.length!=0;){if(l[0]==u[0]){i.push({left:l[0],right:u[0]}),l.splice(0,1),u.splice(0,1);continue}if(l[c]>u[0])break;for(;l[c]<u[0]&&(c++,!(c>=l.length)););i.push({left:l[c-1],right:u[0]}),l.splice(c-1,1),u.splice(0,1),c=0}return i.sort((f,d)=>f.left-d.left),i}findPairedArrays(e,n,r,s){const{start:i,length:a}=this.prepareFindParameters(r,s),o=[];let c=0;const l=this.findAllIn(e,i,a);if(l.length==0)return o;const u=this.findAllIn(n,i,a);if(u.length==0)return o;for(;c<l.length&&u.length!=0;){if(l[0].position==u[0].position){o.push({left:l[0],right:u[0]}),l.splice(0,1),u.splice(0,1);continue}if(l[c].position>u[0].position)break;for(;l[c].position<u[0].position&&(c++,!(c>=l.length)););o.push({left:l[c-1],right:u[0]}),l.splice(c-1,1),u.splice(0,1),c=0}return o.sort((f,d)=>f.left.position-d.left.position),o}replacePattern(e,n,r,s,i=null){let a=[],o;const c={status:-1,searchPatternPositions:[],replacePatternPositions:[]},{start:l,length:u}=this.prepareFindParameters(r,s);if(i==null){if(a=this.findAllIn([e],l,u),a.length==0)return c}else a=i;c.searchPatternPositions.push(...Array.from(a,g=>g.position));const f=e.length-n.length,d=new ArrayBuffer(this.view.length-a.length*f),p=new Uint8Array(d);for(p.set(new Uint8Array(this.buffer,0,l)),o=0;o<a.length;o++){const g=o==0?l:a[o-1].position;p.set(new Uint8Array(this.buffer,g,a[o].position-e.length-g),g-o*f),p.set(n.view,a[o].position-e.length-o*f),c.replacePatternPositions.push(a[o].position-e.length-o*f)}return o--,p.set(new Uint8Array(this.buffer,a[o].position,this.length-a[o].position),a[o].position-e.length+n.length-o*f),this.buffer=d,this.view=new Uint8Array(this.buffer),c.status=1,c}skipPatterns(e,n,r,s){const{start:i,length:a,backward:o}=this.prepareFindParameters(n,r,s);let c=i;for(let l=0;l<e.length;l++){const u=e[l].length,f=o?c-u:c;let d=!0;for(let p=0;p<u;p++)if(this.view[p+f]!=e[l].view[p]){d=!1;break}if(d){if(l=-1,o){if(c-=u,c<=0)return c}else if(c+=u,c>=i+a)return c}}return c}skipNotPatterns(e,n,r,s){const{start:i,length:a,backward:o}=this.prepareFindParameters(n,r,s);let c=-1;for(let l=0;l<a;l++){for(let u=0;u<e.length;u++){const f=e[u].length,d=o?i-l-f:i+l;let p=!0;for(let g=0;g<f;g++)if(this.view[g+d]!=e[u].view[g]){p=!1;break}if(p){c=o?i-l:i+l;break}}if(c!=-1)break}return c}prepareFindParameters(e=null,n=null,r=!1){return e===null&&(e=r?this.length:0),e>this.length&&(e=this.length),r?(n===null&&(n=e),n>e&&(n=e)):(n===null&&(n=this.length-e),n>this.length-e&&(n=this.length-e)),{start:e,length:n,backward:r}}}const qat=16777216;class Yw{constructor(e={}){this._stream=new Xs,this._length=0,this._start=0,this.backward=!1,this.appendBlock=0,this.prevLength=0,this.prevStart=0,"view"in e?this.stream=new Xs({view:e.view}):"buffer"in e?this.stream=new Xs({buffer:e.buffer}):"string"in e?this.stream=new Xs({string:e.string}):"hexstring"in e?this.stream=new Xs({hexstring:e.hexstring}):"stream"in e?this.stream=e.stream.slice():this.stream=new Xs,"backward"in e&&e.backward&&(this.backward=e.backward,this._start=this.stream.length),"length"in e&&e.length>0&&(this._length=e.length),"start"in e&&e.start&&e.start>0&&(this._start=e.start),"appendBlock"in e&&e.appendBlock&&e.appendBlock>0&&(this.appendBlock=e.appendBlock)}set stream(e){this._stream=e,this.prevLength=this._length,this._length=e.length,this.prevStart=this._start,this._start=0}get stream(){return this._stream}set length(e){this.prevLength=this._length,this._length=e}get length(){return this.appendBlock?this.start:this._length}set start(e){e>this.stream.length||(this.prevStart=this._start,this.prevLength=this._length,this._length-=this.backward?this._start-e:e-this._start,this._start=e)}get start(){return this._start}get buffer(){return this._stream.buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart,this._length=this.prevLength}findPattern(e,n=null){(n==null||n>this.length)&&(n=this.length);const r=this.stream.findPattern(e,this.start,this.length,this.backward);if(r==-1)return r;if(this.backward){if(r<this.start-e.length-n)return-1}else if(r>this.start+e.length+n)return-1;return this.start=r,r}findFirstIn(e,n=null){(n==null||n>this.length)&&(n=this.length);const r=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(r.id==-1)return r;if(this.backward){if(r.position<this.start-e[r.id].length-n)return{id:-1,position:this.backward?0:this.start+this.length}}else if(r.position>this.start+e[r.id].length+n)return{id:-1,position:this.backward?0:this.start+this.length};return this.start=r.position,r}findAllIn(e){const n=this.backward?this.start-this.length:this.start;return this.stream.findAllIn(e,n,this.length)}findFirstNotIn(e,n=null){(n==null||n>this._length)&&(n=this._length);const r=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(r.left.id==-1&&r.right.id==-1)return r;if(this.backward){if(r.right.id!=-1&&r.right.position<this._start-e[r.right.id].length-n)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new Xs}}else if(r.left.id!=-1&&r.left.position>this._start+e[r.left.id].length+n)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new Xs};return this.backward?r.left.id==-1?this.start=0:this.start=r.left.position:r.right.id==-1?this.start=this._start+this._length:this.start=r.right.position,r}findAllNotIn(e){const n=this.backward?this._start-this._length:this._start;return this._stream.findAllNotIn(e,n,this._length)}findFirstSequence(e,n=null,r=null){(n==null||n>this._length)&&(n=this._length),(r==null||r>n)&&(r=n);const s=this._stream.findFirstSequence(e,this._start,n,this.backward);if(s.value.length==0)return s;if(this.backward){if(s.position<this._start-s.value.length-r)return{position:-1,value:new Xs}}else if(s.position>this._start+s.value.length+r)return{position:-1,value:new Xs};return this.start=s.position,s}findAllSequences(e){const n=this.backward?this.start-this.length:this.start;return this.stream.findAllSequences(e,n,this.length)}findPairedPatterns(e,n,r=null){(r==null||r>this.length)&&(r=this.length);const s=this.backward?this.start-this.length:this.start,i=this.stream.findPairedPatterns(e,n,s,this.length);if(i.length){if(this.backward){if(i[0].right<this.start-n.length-r)return[]}else if(i[0].left>this.start+e.length+r)return[]}return i}findPairedArrays(e,n,r=null){(r==null||r>this.length)&&(r=this.length);const s=this.backward?this.start-this.length:this.start,i=this.stream.findPairedArrays(e,n,s,this.length);if(i.length){if(this.backward){if(i[0].right.position<this.start-n[i[0].right.id].length-r)return[]}else if(i[0].left.position>this.start+e[i[0].left.id].length+r)return[]}return i}replacePattern(e,n){const r=this.backward?this.start-this.length:this.start;return this.stream.replacePattern(e,n,r,this.length)}skipPatterns(e){const n=this.stream.skipPatterns(e,this.start,this.length,this.backward);return this.start=n,n}skipNotPatterns(e){const n=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);return n==-1?-1:(this.start=n,n)}append(e){this.beforeAppend(e.length),this._stream.view.set(e.view,this._start),this._length+=e.length*2,this.start=this._start+e.length,this.prevLength-=e.length*2}appendView(e){this.beforeAppend(e.length),this._stream.view.set(e,this._start),this._length+=e.length*2,this.start=this._start+e.length,this.prevLength-=e.length*2}appendChar(e){this.beforeAppend(1),this._stream.view[this._start]=e,this._length+=2,this.start=this._start+1,this.prevLength-=2}appendUint16(e){this.beforeAppend(2);const n=new Uint16Array([e]),r=new Uint8Array(n.buffer);this.stream.view[this._start]=r[1],this._stream.view[this._start+1]=r[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendUint24(e){this.beforeAppend(3);const n=new Uint32Array([e]),r=new Uint8Array(n.buffer);this._stream.view[this._start]=r[2],this._stream.view[this._start+1]=r[1],this._stream.view[this._start+2]=r[0],this._length+=6,this.start=this._start+3,this.prevLength-=6}appendUint32(e){this.beforeAppend(4);const n=new Uint32Array([e]),r=new Uint8Array(n.buffer);this._stream.view[this._start]=r[3],this._stream.view[this._start+1]=r[2],this._stream.view[this._start+2]=r[1],this._stream.view[this._start+3]=r[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}appendInt16(e){this.beforeAppend(2);const n=new Int16Array([e]),r=new Uint8Array(n.buffer);this._stream.view[this._start]=r[1],this._stream.view[this._start+1]=r[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendInt32(e){this.beforeAppend(4);const n=new Int32Array([e]),r=new Uint8Array(n.buffer);this._stream.view[this._start]=r[3],this._stream.view[this._start+1]=r[2],this._stream.view[this._start+2]=r[1],this._stream.view[this._start+3]=r[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}getBlock(e,n=!0){if(this._length<=0)return new Uint8Array(0);this._length<e&&(e=this._length);let r;if(this.backward){const s=this._stream.view.subarray(this._length-e,this._length);r=new Uint8Array(e);for(let i=0;i<e;i++)r[e-1-i]=s[i]}else r=this._stream.view.subarray(this._start,this._start+e);return n&&(this.start+=this.backward?-1*e:e),r}getUint16(e=!0){const n=this.getBlock(2,e);return n.length<2?0:n[0]<<8|n[1]}getInt16(e=!0){const n=this.getUint16(e),r=32768;return n&r?-(r-(n^r)):n}getUint24(e=!0){const n=this.getBlock(4,e);return n.length<3?0:n[0]<<16|n[1]<<8|n[2]}getUint32(e=!0){const n=this.getBlock(4,e);return n.length<4?0:n[0]*qat+(n[1]<<16)+(n[2]<<8)+n[3]}getInt32(e=!0){const n=this.getUint32(e),r=2147483648;return n&r?-(r-(n^r)):n}beforeAppend(e){this._start+e>this._stream.length&&(e>this.appendBlock&&(this.appendBlock=e+Yw.APPEND_BLOCK),this._stream.realloc(this._stream.length+this.appendBlock))}}Yw.APPEND_BLOCK=1e3;function Kat(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function A3e(t,...e){if(!Kat(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function ble(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Gat(t,e){A3e(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yj=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),kh=(t,e)=>t<<32-e|t>>>e,Qj=(t,e)=>t<<e|t>>>32-e>>>0;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Wat(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function S3e(t){return typeof t=="string"&&(t=Wat(t)),A3e(t),t}let zat=class{clone(){return this._cloneInto()}};function uU(t){const e=r=>t().update(S3e(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Jat(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}const I3e=(t,e,n)=>t&e^~t&n,C3e=(t,e,n)=>t&e^t&n^e&n;class hee extends zat{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Yj(this.buffer)}update(e){ble(this);const{view:n,buffer:r,blockLen:s}=this;e=S3e(e);const i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=Yj(e);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ble(this),Gat(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let f=a;f<s;f++)n[f]=0;Jat(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=Yj(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)o.setUint32(4*f,u[f],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return e.length=s,e.pos=o,e.finished=i,e.destroyed=a,s%n&&e.buffer.set(r),e}}const O8=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),Dm=new Uint32Array(80);let Yat=class extends hee{constructor(){super(64,20,8,!1),this.A=O8[0]|0,this.B=O8[1]|0,this.C=O8[2]|0,this.D=O8[3]|0,this.E=O8[4]|0}get(){const{A:e,B:n,C:r,D:s,E:i}=this;return[e,n,r,s,i]}set(e,n,r,s,i){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0}process(e,n){for(let c=0;c<16;c++,n+=4)Dm[c]=e.getUint32(n,!1);for(let c=16;c<80;c++)Dm[c]=Qj(Dm[c-3]^Dm[c-8]^Dm[c-14]^Dm[c-16],1);let{A:r,B:s,C:i,D:a,E:o}=this;for(let c=0;c<80;c++){let l,u;c<20?(l=I3e(s,i,a),u=1518500249):c<40?(l=s^i^a,u=1859775393):c<60?(l=C3e(s,i,a),u=2400959708):(l=s^i^a,u=3395469782);const f=Qj(r,5)+l+o+u+Dm[c]|0;o=a,a=i,i=Qj(s,30),s=r,r=f}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,this.set(r,s,i,a,o)}roundClean(){Dm.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}};const Qat=uU(()=>new Yat),Zat=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Lm=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Um=new Uint32Array(64);let Xat=class extends hee{constructor(){super(64,32,8,!1),this.A=Lm[0]|0,this.B=Lm[1]|0,this.C=Lm[2]|0,this.D=Lm[3]|0,this.E=Lm[4]|0,this.F=Lm[5]|0,this.G=Lm[6]|0,this.H=Lm[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:a,G:o,H:c}=this;return[e,n,r,s,i,a,o,c]}set(e,n,r,s,i,a,o,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,n){for(let f=0;f<16;f++,n+=4)Um[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const d=Um[f-15],p=Um[f-2],g=kh(d,7)^kh(d,18)^d>>>3,m=kh(p,17)^kh(p,19)^p>>>10;Um[f]=m+Um[f-7]+g+Um[f-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=kh(o,6)^kh(o,11)^kh(o,25),p=u+d+I3e(o,c,l)+Zat[f]+Um[f]|0,m=(kh(r,2)^kh(r,13)^kh(r,22))+C3e(r,s,i)|0;u=l,l=c,c=o,o=a+p|0,a=i,i=s,s=r,r=p+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,a,o,c,l,u)}roundClean(){Um.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const eot=uU(()=>new Xat),fO=BigInt(2**32-1),ez=BigInt(32);function T3e(t,e=!1){return e?{h:Number(t&fO),l:Number(t>>ez&fO)}:{h:Number(t>>ez&fO)|0,l:Number(t&fO)|0}}function tot(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:a}=T3e(t[s],e);[n[s],r[s]]=[i,a]}return[n,r]}const not=(t,e)=>BigInt(t>>>0)<<ez|BigInt(e>>>0),rot=(t,e,n)=>t>>>n,sot=(t,e,n)=>t<<32-n|e>>>n,iot=(t,e,n)=>t>>>n|e<<32-n,aot=(t,e,n)=>t<<32-n|e>>>n,oot=(t,e,n)=>t<<64-n|e>>>n-32,cot=(t,e,n)=>t>>>n-32|e<<64-n,lot=(t,e)=>e,uot=(t,e)=>t,fot=(t,e,n)=>t<<n|e>>>32-n,dot=(t,e,n)=>e<<n|t>>>32-n,hot=(t,e,n)=>e<<n-32|t>>>64-n,pot=(t,e,n)=>t<<n-32|e>>>64-n;function got(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const mot=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),yot=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,wot=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),bot=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,vot=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),xot=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,or={fromBig:T3e,split:tot,toBig:not,shrSH:rot,shrSL:sot,rotrSH:iot,rotrSL:aot,rotrBH:oot,rotrBL:cot,rotr32H:lot,rotr32L:uot,rotlSH:fot,rotlSL:dot,rotlBH:hot,rotlBL:pot,add:got,add3L:mot,add3H:yot,add4L:wot,add4H:bot,add5H:xot,add5L:vot},[Eot,Aot]=or.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Fm=new Uint32Array(80),Vm=new Uint32Array(80);let N3e=class extends hee{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:a,Dh:o,Dl:c,Eh:l,El:u,Fh:f,Fl:d,Gh:p,Gl:g,Hh:m,Hl:v}=this;return[e,n,r,s,i,a,o,c,l,u,f,d,p,g,m,v]}set(e,n,r,s,i,a,o,c,l,u,f,d,p,g,m,v){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=f|0,this.Fl=d|0,this.Gh=p|0,this.Gl=g|0,this.Hh=m|0,this.Hl=v|0}process(e,n){for(let I=0;I<16;I++,n+=4)Fm[I]=e.getUint32(n),Vm[I]=e.getUint32(n+=4);for(let I=16;I<80;I++){const B=Fm[I-15]|0,D=Vm[I-15]|0,V=or.rotrSH(B,D,1)^or.rotrSH(B,D,8)^or.shrSH(B,D,7),O=or.rotrSL(B,D,1)^or.rotrSL(B,D,8)^or.shrSL(B,D,7),U=Fm[I-2]|0,Q=Vm[I-2]|0,ie=or.rotrSH(U,Q,19)^or.rotrBH(U,Q,61)^or.shrSH(U,Q,6),G=or.rotrSL(U,Q,19)^or.rotrBL(U,Q,61)^or.shrSL(U,Q,6),R=or.add4L(O,G,Vm[I-7],Vm[I-16]),k=or.add4H(R,V,ie,Fm[I-7],Fm[I-16]);Fm[I]=k|0,Vm[I]=R|0}let{Ah:r,Al:s,Bh:i,Bl:a,Ch:o,Cl:c,Dh:l,Dl:u,Eh:f,El:d,Fh:p,Fl:g,Gh:m,Gl:v,Hh:A,Hl:S}=this;for(let I=0;I<80;I++){const B=or.rotrSH(f,d,14)^or.rotrSH(f,d,18)^or.rotrBH(f,d,41),D=or.rotrSL(f,d,14)^or.rotrSL(f,d,18)^or.rotrBL(f,d,41),V=f&p^~f&m,O=d&g^~d&v,U=or.add5L(S,D,O,Aot[I],Vm[I]),Q=or.add5H(U,A,B,V,Eot[I],Fm[I]),ie=U|0,G=or.rotrSH(r,s,28)^or.rotrBH(r,s,34)^or.rotrBH(r,s,39),R=or.rotrSL(r,s,28)^or.rotrBL(r,s,34)^or.rotrBL(r,s,39),k=r&i^r&o^i&o,b=s&a^s&c^a&c;A=m|0,S=v|0,m=p|0,v=g|0,p=f|0,g=d|0,{h:f,l:d}=or.add(l|0,u|0,Q|0,ie|0),l=o|0,u=c|0,o=i|0,c=a|0,i=r|0,a=s|0;const w=or.add3L(ie,R,b);r=or.add3H(w,Q,G,k),s=w|0}({h:r,l:s}=or.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:a}=or.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l:c}=or.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:l,l:u}=or.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:f,l:d}=or.add(this.Eh|0,this.El|0,f|0,d|0),{h:p,l:g}=or.add(this.Fh|0,this.Fl|0,p|0,g|0),{h:m,l:v}=or.add(this.Gh|0,this.Gl|0,m|0,v|0),{h:A,l:S}=or.add(this.Hh|0,this.Hl|0,A|0,S|0),this.set(r,s,i,a,o,c,l,u,f,d,p,g,m,v,A,S)}roundClean(){Fm.fill(0),Vm.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Sot=class extends N3e{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const Iot=uU(()=>new N3e),Cot=uU(()=>new Sot);/*!
 * Copyright (c) 2014, GlobalSign
 * Copyright (c) 2015-2019, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the {organization} nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */const Ci=new ArrayBuffer(0),ue="";class es extends TypeError{constructor(){super(...arguments),this.name=es.NAME}static isType(e,n){if(typeof n=="string"){if(n==="Array"&&Array.isArray(e))return!0;if(n==="ArrayBuffer"&&e instanceof ArrayBuffer)return!0;if(n==="ArrayBufferView"&&ArrayBuffer.isView(e))return!0;if(typeof e===n)return!0}else if(e instanceof n)return!0;return!1}static assert(e,n,...r){for(const i of r)if(this.isType(e,i))return;const s=r.map(i=>i instanceof Function&&"name"in i?i.name:`${i}`);throw new es(`Parameter '${n}' is not of type ${s.length>1?`(${s.join(" or ")})`:s[0]}`)}}es.NAME="ArgumentError";class Nr extends TypeError{static assert(...e){let n=null,r,s;typeof e[0]=="string"?(n=e[0],r=e[1],s=e.slice(2)):(r=e[0],s=e.slice(1)),es.assert(r,"parameters","object");for(const i of s){const a=r[i];if(a==null)throw new Nr(i,n)}}static assertEmpty(e,n,r){if(e==null)throw new Nr(n,r)}constructor(e,n=null,r){super(),this.name=Nr.NAME,this.field=e,n&&(this.target=n),r?this.message=r:this.message=`Absent mandatory parameter '${e}' ${n?` in '${n}'`:ue}`}}Nr.NAME="ParameterError";class Ge extends Error{static assertSchema(e,n){if(!e.verified)throw new Error(`Object's schema was not verified against input data for ${n}`)}static assert(e,n){if(e.offset===-1)throw new Ge(`Error during parsing of ASN.1 data. Data is not correct for '${n}'.`)}constructor(e){super(e),this.name="AsnError"}}class Ze{static blockName(){return this.CLASS_NAME}static fromBER(e){const n=ia(e);Ge.assert(n,this.name);try{return new this({schema:n.result})}catch{throw new Ge(`Cannot create '${this.CLASS_NAME}' from ASN.1 object`)}}static defaultValues(e){throw new Error(`Invalid member name for ${this.CLASS_NAME} class: ${e}`)}static schema(e={}){throw new Error(`Method '${this.CLASS_NAME}.schema' should be overridden`)}get className(){return this.constructor.CLASS_NAME}toString(e="hex"){let n;try{n=this.toSchema()}catch{n=this.toSchema(!0)}return pn.ToString(n.toBER(),e)}}Ze.CLASS_NAME="PkiObject";function Uy(t){let e=!1,n=ue;const r=t.trim();for(let s=0;s<r.length;s++)r.charCodeAt(s)===32?e===!1&&(e=!0):(e&&(n+=" ",e=!1),n+=r[s]);return n.toLowerCase()}const R8="type",Zj="value";class Iw extends Ze{constructor(e={}){super(),this.type=Z(e,R8,Iw.defaultValues(R8)),this.value=Z(e,Zj,Iw.defaultValues(Zj)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case R8:return ue;case Zj:return{};default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.type||ue}),new xn({name:n.value||ue})]})}fromSchema(e){st(e,[R8,"typeValue"]);const n=tt(e,e,Iw.schema({names:{type:R8,value:"typeValue"}}));Ge.assertSchema(n,this.className),this.type=n.result.type.valueBlock.toString(),this.value=n.result.typeValue}toSchema(){return new ve({value:[new Rt({value:this.type}),this.value]})}toJSON(){const e={type:this.type};return Object.keys(this.value).length!==0?e.value=this.value.toJSON():e.value=this.value,e}isEqual(e){const n=[ch.blockName(),Ak.blockName(),Sk.blockName(),U3.blockName(),qd.blockName(),Ik.blockName(),lee.blockName(),cU.blockName(),uee.blockName(),lU.blockName(),fee.blockName(),dee.blockName()];if(e instanceof ArrayBuffer)return fn.isEqual(this.value.valueBeforeDecodeView,e);if(e.constructor.blockName()===Iw.blockName()){if(this.type!==e.type)return!1;const r=[!1,!1],s=this.value.constructor.blockName();for(const a of n)s===a&&(r[0]=!0),e.value.constructor.blockName()===a&&(r[1]=!0);if(r[0]!==r[1])return!1;if(r[0]&&r[1]){const a=Uy(this.value.valueBlock.value),o=Uy(e.value.valueBlock.value);if(a.localeCompare(o)!==0)return!1}else if(!fn.isEqual(this.value.valueBeforeDecodeView,e.value.valueBeforeDecodeView))return!1;return!0}return!1}}Iw.CLASS_NAME="AttributeTypeAndValue";const c1="typesAndValues",dO="valueBeforeDecode",vle="RDN";class ns extends Ze{constructor(e={}){super(),this.typesAndValues=Z(e,c1,ns.defaultValues(c1)),this.valueBeforeDecode=Z(e,dO,ns.defaultValues(dO)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case c1:return[];case dO:return Ci;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case c1:return n.length===0;case dO:return n.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Dn({name:n.repeatedSequence||ue,value:new Ei({value:[new Dn({name:n.repeatedSet||ue,value:Iw.schema(n.typeAndValue||{})})]})})]})}fromSchema(e){st(e,[vle,c1]);const n=tt(e,e,ns.schema({names:{blockName:vle,repeatedSet:c1}}));Ge.assertSchema(n,this.className),c1 in n.result&&(this.typesAndValues=Array.from(n.result.typesAndValues,r=>new Iw({schema:r}))),this.valueBeforeDecode=n.result.RDN.valueBeforeDecodeView.slice().buffer}toSchema(){if(this.valueBeforeDecode.byteLength===0)return new ve({value:[new Ei({value:Array.from(this.typesAndValues,n=>n.toSchema())})]});const e=ia(this.valueBeforeDecode);if(Ge.assert(e,"RelativeDistinguishedNames"),!(e.result instanceof ve))throw new Error("ASN.1 result should be SEQUENCE");return e.result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,e=>e.toJSON())}}isEqual(e){if(e instanceof ns){if(this.typesAndValues.length!==e.typesAndValues.length)return!1;for(const[n,r]of this.typesAndValues.entries())if(r.isEqual(e.typesAndValues[n])===!1)return!1;return!0}return e instanceof ArrayBuffer?E5(this.valueBeforeDecode,e):!1}}ns.CLASS_NAME="RelativeDistinguishedNames";const SI="type",II="value";function Tot(t={},e=!1){const n=Z(t,"names",{});return new ve({optional:e,value:[new Re({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:n.country_name||ue,value:[new zs({value:[new U3,new qd]})]}),new Re({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:n.administration_domain_name||ue,value:[new zs({value:[new U3,new qd]})]}),new gn({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:n.network_address||ue,isHexOnly:!0}),new gn({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:n.terminal_identifier||ue,isHexOnly:!0}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:n.private_domain_name||ue,value:[new zs({value:[new U3,new qd]})]}),new gn({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:n.organization_name||ue,isHexOnly:!0}),new gn({optional:!0,name:n.numeric_user_identifier||ue,idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new Re({optional:!0,name:n.personal_name||ue,idBlock:{tagClass:3,tagNumber:5},value:[new gn({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new gn({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new gn({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new gn({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new Re({optional:!0,name:n.organizational_unit_names||ue,idBlock:{tagClass:3,tagNumber:6},value:[new Dn({value:new qd})]})]})}function Not(t=!1){return new ve({optional:t,value:[new qd,new qd]})}function kot(t=!1){return new Ei({optional:t,value:[new gn({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new xn]})]})}class Hr extends Ze{constructor(e={}){super(),this.type=Z(e,SI,Hr.defaultValues(SI)),this.value=Z(e,II,Hr.defaultValues(II)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case SI:return 9;case II:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case SI:return n===Hr.defaultValues(e);case II:return Object.keys(n).length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new zs({value:[new Re({idBlock:{tagClass:3,tagNumber:0},name:n.blockName||ue,value:[new Rt,new Re({idBlock:{tagClass:3,tagNumber:0},value:[new xn]})]}),new gn({name:n.blockName||ue,idBlock:{tagClass:3,tagNumber:1}}),new gn({name:n.blockName||ue,idBlock:{tagClass:3,tagNumber:2}}),new Re({idBlock:{tagClass:3,tagNumber:3},name:n.blockName||ue,value:[Tot(n.builtInStandardAttributes||{},!1),Not(!0),kot(!0)]}),new Re({idBlock:{tagClass:3,tagNumber:4},name:n.blockName||ue,value:[ns.schema(n.directoryName||{})]}),new Re({idBlock:{tagClass:3,tagNumber:5},name:n.blockName||ue,value:[new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new zs({value:[new Ik,new qd,new Sk,new ch,new Ak]})]}),new Re({idBlock:{tagClass:3,tagNumber:1},value:[new zs({value:[new Ik,new qd,new Sk,new ch,new Ak]})]})]}),new gn({name:n.blockName||ue,idBlock:{tagClass:3,tagNumber:6}}),new gn({name:n.blockName||ue,idBlock:{tagClass:3,tagNumber:7}}),new gn({name:n.blockName||ue,idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(e){st(e,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);const n=tt(e,e,Hr.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));switch(Ge.assertSchema(n,this.className),this.type=n.result.blockName.idBlock.tagNumber,this.type){case 0:this.value=n.result.blockName;break;case 1:case 2:case 6:{const r=n.result.blockName;r.idBlock.tagClass=1,r.idBlock.tagNumber=22;const s=r.toBER(!1),i=ia(s);Ge.assert(i,"GeneralName value"),this.value=i.result.valueBlock.value}break;case 3:this.value=n.result.blockName;break;case 4:this.value=new ns({schema:n.result.directoryName});break;case 5:this.value=n.result.ediPartyName;break;case 7:this.value=new ut({valueHex:n.result.blockName.valueBlock.valueHex});break;case 8:{const r=n.result.blockName;r.idBlock.tagClass=1,r.idBlock.tagNumber=6;const s=r.toBER(!1),i=ia(s);Ge.assert(i,"GeneralName registeredID"),this.value=i.result.valueBlock.toString()}break}}toSchema(){switch(this.type){case 0:case 3:case 5:return new Re({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:{const e=new cU({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 4:return new Re({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:{const e=this.value;return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 8:{const e=new Rt({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}default:return Hr.schema()}}toJSON(){const e={type:this.type,value:ue};if(typeof this.value=="string")e.value=this.value;else try{e.value=this.value.toJSON()}catch{}return e}}Hr.CLASS_NAME="GeneralName";const CI="accessMethod",TI="accessLocation",Pot=[CI,TI];class Fx extends Ze{constructor(e={}){super(),this.accessMethod=Z(e,CI,Fx.defaultValues(CI)),this.accessLocation=Z(e,TI,Fx.defaultValues(TI)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case CI:return ue;case TI:return new Hr;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.accessMethod||ue}),Hr.schema(n.accessLocation||{})]})}fromSchema(e){st(e,Pot);const n=tt(e,e,Fx.schema({names:{accessMethod:CI,accessLocation:{names:{blockName:TI}}}}));Ge.assertSchema(n,this.className),this.accessMethod=n.result.accessMethod.valueBlock.toString(),this.accessLocation=new Hr({schema:n.result.accessLocation})}toSchema(){return new ve({value:[new Rt({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}Fx.CLASS_NAME="AccessDescription";const Qm="seconds",Zm="millis",Xm="micros";class lu extends Ze{constructor(e={}){super(),Qm in e&&(this.seconds=Z(e,Qm,lu.defaultValues(Qm))),Zm in e&&(this.millis=Z(e,Zm,lu.defaultValues(Zm))),Xm in e&&(this.micros=Z(e,Xm,lu.defaultValues(Xm))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qm:case Zm:case Xm:return 0;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case Qm:case Zm:case Xm:return n===lu.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,optional:!0,value:[new $e({optional:!0,name:n.seconds||ue}),new gn({name:n.millis||ue,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new gn({name:n.micros||ue,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){st(e,[Qm,Zm,Xm]);const n=tt(e,e,lu.schema({names:{seconds:Qm,millis:Zm,micros:Xm}}));if(Ge.assertSchema(n,this.className),"seconds"in n.result&&(this.seconds=n.result.seconds.valueBlock.valueDec),"millis"in n.result){const r=new $e({valueHex:n.result.millis.valueBlock.valueHex});this.millis=r.valueBlock.valueDec}if("micros"in n.result){const r=new $e({valueHex:n.result.micros.valueBlock.valueHex});this.micros=r.valueBlock.valueDec}}toSchema(){const e=[];if(this.seconds!==void 0&&e.push(new $e({value:this.seconds})),this.millis!==void 0){const n=new $e({value:this.millis});e.push(new gn({idBlock:{tagClass:3,tagNumber:0},valueHex:n.valueBlock.valueHexView}))}if(this.micros!==void 0){const n=new $e({value:this.micros});e.push(new gn({idBlock:{tagClass:3,tagNumber:1},valueHex:n.valueBlock.valueHexView}))}return new ve({value:e})}toJSON(){const e={};return this.seconds!==void 0&&(e.seconds=this.seconds),this.millis!==void 0&&(e.millis=this.millis),this.micros!==void 0&&(e.micros=this.micros),e}}lu.CLASS_NAME="Accuracy";const hO="algorithmId",_8="algorithmParams",k3e="algorithm",tz="params",Oot=[k3e,tz];class Ve extends Ze{constructor(e={}){super(),this.algorithmId=Z(e,hO,Ve.defaultValues(hO)),_8 in e&&(this.algorithmParams=Z(e,_8,Ve.defaultValues(_8))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hO:return ue;case _8:return new xn;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case hO:return n===ue;case _8:return n instanceof xn;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,optional:n.optional||!1,value:[new Rt({name:n.algorithmIdentifier||ue}),new xn({name:n.algorithmParams||ue,optional:!0})]})}fromSchema(e){st(e,Oot);const n=tt(e,e,Ve.schema({names:{algorithmIdentifier:k3e,algorithmParams:tz}}));Ge.assertSchema(n,this.className),this.algorithmId=n.result.algorithm.valueBlock.toString(),tz in n.result&&(this.algorithmParams=n.result.params)}toSchema(){const e=[];return e.push(new Rt({value:this.algorithmId})),this.algorithmParams&&!(this.algorithmParams instanceof xn)&&e.push(this.algorithmParams),new ve({value:e})}toJSON(){const e={algorithmId:this.algorithmId};return this.algorithmParams&&!(this.algorithmParams instanceof xn)&&(e.algorithmParams=this.algorithmParams.toJSON()),e}isEqual(e){return!(e instanceof Ve)||this.algorithmId!==e.algorithmId?!1:this.algorithmParams?e.algorithmParams?JSON.stringify(this.algorithmParams)===JSON.stringify(e.algorithmParams):!1:!e.algorithmParams}}Ve.CLASS_NAME="AlgorithmIdentifier";const lA="altNames",Rot=[lA];class I5 extends Ze{constructor(e={}){super(),this.altNames=Z(e,lA,I5.defaultValues(lA)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case lA:return[];default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Dn({name:n.altNames||ue,value:Hr.schema()})]})}fromSchema(e){st(e,Rot);const n=tt(e,e,I5.schema({names:{altNames:lA}}));Ge.assertSchema(n,this.className),lA in n.result&&(this.altNames=Array.from(n.result.altNames,r=>new Hr({schema:r})))}toSchema(){return new ve({value:Array.from(this.altNames,e=>e.toSchema())})}toJSON(){return{altNames:Array.from(this.altNames,e=>e.toJSON())}}}I5.CLASS_NAME="AltName";const uA="type",fA="values",_ot=[uA,fA];class Fs extends Ze{constructor(e={}){super(),this.type=Z(e,uA,Fs.defaultValues(uA)),this.values=Z(e,fA,Fs.defaultValues(fA)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case uA:return ue;case fA:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case uA:return n===ue;case fA:return n.length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.type||ue}),new Ei({name:n.setName||ue,value:[new Dn({name:n.values||ue,value:new xn})]})]})}fromSchema(e){st(e,_ot);const n=tt(e,e,Fs.schema({names:{type:uA,values:fA}}));Ge.assertSchema(n,this.className),this.type=n.result.type.valueBlock.toString(),this.values=n.result.values}toSchema(){return new ve({value:[new Rt({value:this.type}),new Ei({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,e=>e.toJSON())}}}Fs.CLASS_NAME="Attribute";const NI="notBeforeTime",kI="notAfterTime",Bot=[NI,kI];class Xd extends Ze{constructor(e={}){super(),this.notBeforeTime=Z(e,NI,Xd.defaultValues(NI)),this.notAfterTime=Z(e,kI,Xd.defaultValues(kI)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case NI:case kI:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Gs({name:n.notBeforeTime||ue}),new Gs({name:n.notAfterTime||ue})]})}fromSchema(e){st(e,Bot);const n=tt(e,e,Xd.schema({names:{notBeforeTime:NI,notAfterTime:kI}}));Ge.assertSchema(n,this.className),this.notBeforeTime=n.result.notBeforeTime.toDate(),this.notAfterTime=n.result.notAfterTime.toDate()}toSchema(){return new ve({value:[new Gs({valueDate:this.notBeforeTime}),new Gs({valueDate:this.notAfterTime})]})}toJSON(){return{notBeforeTime:this.notBeforeTime,notAfterTime:this.notAfterTime}}}Xd.CLASS_NAME="AttCertValidityPeriod";const B8="names",xle="generalNames";class sa extends Ze{constructor(e={}){super(),this.names=Z(e,B8,sa.defaultValues(B8)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"names":return[];default:return super.defaultValues(e)}}static schema(e={},n=!1){const r=Z(e,B8,{});return new ve({optional:n,name:r.blockName||ue,value:[new Dn({name:r.generalNames||ue,value:Hr.schema()})]})}fromSchema(e){st(e,[B8,xle]);const n=tt(e,e,sa.schema({names:{blockName:B8,generalNames:xle}}));Ge.assertSchema(n,this.className),this.names=Array.from(n.result.generalNames,r=>new Hr({schema:r}))}toSchema(){return new ve({value:Array.from(this.names,e=>e.toSchema())})}toJSON(){return{names:Array.from(this.names,e=>e.toJSON())}}}sa.CLASS_NAME="GeneralNames";const Mot="2.5.29.9",Dot="2.5.29.14",Lot="2.5.29.15",Uot="2.5.29.16",P3e="2.5.29.17",O3e="2.5.29.18",pee="2.5.29.19",Fot="2.5.29.20",Vot="2.5.29.27",$ot="2.5.29.21",jot="2.5.29.24",R3e="2.5.29.28",_3e="2.5.29.29",B3e="2.5.29.30",M3e="2.5.29.31",gee="2.5.29.46",D3e="2.5.29.32",Ju="2.5.29.32.0",Hot="1.3.6.1.4.1.311.21.10",L3e="2.5.29.33",mee="2.5.29.35",U3e="2.5.29.36",qot="2.5.29.37",Kot="2.5.29.54",yee="1.3.6.1.5.5.7.1.1",Got="1.3.6.1.5.5.7.1.11",Wot="1.3.6.1.4.1.11129.2.4.2",zot="1.3.6.1.4.1.311.21.7",Jot="1.3.6.1.4.1.311.21.1",Yot="1.3.6.1.5.5.7.1.3",wee="1.2.840.113549.1.7.1",F3e="1.2.840.113549.1.7.2",V3e="1.2.840.113549.1.7.3",$3e="1.2.840.113549.1.7.6",Qot="1.2.840.113549.1.9.16.1.4",Ele="1.2.840.113549.1.9.22.1",Zot="1.2.840.113549.1.9.22.2",Ale="1.2.840.113549.1.9.22.3",Sle="1.2.840.113549.1.9.23.1",Xot="1.3.6.1.5.5.7",ect=`${Xot}.48`,WR=`${ect}.1.1`,A1="keyIdentifier",S1="authorityCertIssuer",I1="authorityCertSerialNumber",tct=[A1,S1,I1];class Cw extends Ze{constructor(e={}){super(),A1 in e&&(this.keyIdentifier=Z(e,A1,Cw.defaultValues(A1))),S1 in e&&(this.authorityCertIssuer=Z(e,S1,Cw.defaultValues(S1))),I1 in e&&(this.authorityCertSerialNumber=Z(e,I1,Cw.defaultValues(I1))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case A1:return new ut;case S1:return[];case I1:return new $e;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new gn({name:n.keyIdentifier||ue,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Dn({name:n.authorityCertIssuer||ue,value:Hr.schema()})]}),new gn({name:n.authorityCertSerialNumber||ue,optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(e){st(e,tct);const n=tt(e,e,Cw.schema({names:{keyIdentifier:A1,authorityCertIssuer:S1,authorityCertSerialNumber:I1}}));Ge.assertSchema(n,this.className),A1 in n.result&&(this.keyIdentifier=new ut({valueHex:n.result.keyIdentifier.valueBlock.valueHex})),S1 in n.result&&(this.authorityCertIssuer=Array.from(n.result.authorityCertIssuer,r=>new Hr({schema:r}))),I1 in n.result&&(this.authorityCertSerialNumber=new $e({valueHex:n.result.authorityCertSerialNumber.valueBlock.valueHex}))}toSchema(){const e=[];return this.keyIdentifier&&e.push(new gn({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHexView})),this.authorityCertIssuer&&e.push(new Re({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,n=>n.toSchema())})),this.authorityCertSerialNumber&&e.push(new gn({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHexView})),new ve({value:e})}toJSON(){const e={};return this.keyIdentifier&&(e.keyIdentifier=this.keyIdentifier.toJSON()),this.authorityCertIssuer&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,n=>n.toJSON())),this.authorityCertSerialNumber&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}Cw.CLASS_NAME="AuthorityKeyIdentifier";const l1="pathLenConstraint",u1="cA";class Vx extends Ze{constructor(e={}){super(),this.cA=Z(e,u1,!1),l1 in e&&(this.pathLenConstraint=Z(e,l1,0)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case u1:return!1;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new U0({optional:!0,name:n.cA||ue}),new $e({optional:!0,name:n.pathLenConstraint||ue})]})}fromSchema(e){st(e,[u1,l1]);const n=tt(e,e,Vx.schema({names:{cA:u1,pathLenConstraint:l1}}));Ge.assertSchema(n,this.className),u1 in n.result&&(this.cA=n.result.cA.valueBlock.value),l1 in n.result&&(n.result.pathLenConstraint.valueBlock.isHexOnly?this.pathLenConstraint=n.result.pathLenConstraint:this.pathLenConstraint=n.result.pathLenConstraint.valueBlock.valueDec)}toSchema(){const e=[];return this.cA!==Vx.defaultValues(u1)&&e.push(new U0({value:this.cA})),l1 in this&&(this.pathLenConstraint instanceof $e?e.push(this.pathLenConstraint):e.push(new $e({value:this.pathLenConstraint}))),new ve({value:e})}toJSON(){const e={};return this.cA!==Vx.defaultValues(u1)&&(e.cA=this.cA),l1 in this&&(this.pathLenConstraint instanceof $e?e.pathLenConstraint=this.pathLenConstraint.toJSON():e.pathLenConstraint=this.pathLenConstraint),e}}Vx.CLASS_NAME="BasicConstraints";const Xj="certificateIndex",eH="keyIndex";class Ck extends Ze{constructor(e={}){super(),this.certificateIndex=Z(e,Xj,Ck.defaultValues(Xj)),this.keyIndex=Z(e,eH,Ck.defaultValues(eH)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xj:case eH:return 0;default:return super.defaultValues(e)}}static schema(){return new $e}fromSchema(e){if(e.constructor.blockName()!==$e.blockName())throw new Error("Object's schema was not verified against input data for CAVersion");let n=e.valueBlock.valueHex.slice(0);const r=new Uint8Array(n);switch(!0){case n.byteLength<4:{const f=new ArrayBuffer(4);new Uint8Array(f).set(r,4-n.byteLength),n=f.slice(0)}break;case n.byteLength>4:{const f=new ArrayBuffer(4);new Uint8Array(f).set(r.slice(0,4)),n=f.slice(0)}break}const s=n.slice(0,2),i=new Uint8Array(s);let a=i[0];i[0]=i[1],i[1]=a;const o=new Uint16Array(s);this.keyIndex=o[0];const c=n.slice(2),l=new Uint8Array(c);a=l[0],l[0]=l[1],l[1]=a;const u=new Uint16Array(c);this.certificateIndex=u[0]}toSchema(){const e=new ArrayBuffer(2),n=new Uint16Array(e);n[0]=this.certificateIndex;const r=new Uint8Array(e);let s=r[0];r[0]=r[1],r[1]=s;const i=new ArrayBuffer(2),a=new Uint16Array(i);a[0]=this.keyIndex;const o=new Uint8Array(i);return s=o[0],o[0]=o[1],o[1]=s,new $e({valueHex:L3(i,e)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}Ck.CLASS_NAME="CAVersion";const PI="policyQualifierId",OI="qualifier",nct=[PI,OI];class $x extends Ze{constructor(e={}){super(),this.policyQualifierId=Z(e,PI,$x.defaultValues(PI)),this.qualifier=Z(e,OI,$x.defaultValues(OI)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case PI:return ue;case OI:return new xn;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.policyQualifierId||ue}),new xn({name:n.qualifier||ue})]})}fromSchema(e){st(e,nct);const n=tt(e,e,$x.schema({names:{policyQualifierId:PI,qualifier:OI}}));Ge.assertSchema(n,this.className),this.policyQualifierId=n.result.policyQualifierId.valueBlock.toString(),this.qualifier=n.result.qualifier}toSchema(){return new ve({value:[new Rt({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}$x.CLASS_NAME="PolicyQualifierInfo";const RI="policyIdentifier",C1="policyQualifiers",rct=[RI,C1];class jx extends Ze{constructor(e={}){super(),this.policyIdentifier=Z(e,RI,jx.defaultValues(RI)),C1 in e&&(this.policyQualifiers=Z(e,C1,jx.defaultValues(C1))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case RI:return ue;case C1:return[];default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.policyIdentifier||ue}),new ve({optional:!0,value:[new Dn({name:n.policyQualifiers||ue,value:$x.schema()})]})]})}fromSchema(e){st(e,rct);const n=tt(e,e,jx.schema({names:{policyIdentifier:RI,policyQualifiers:C1}}));Ge.assertSchema(n,this.className),this.policyIdentifier=n.result.policyIdentifier.valueBlock.toString(),C1 in n.result&&(this.policyQualifiers=Array.from(n.result.policyQualifiers,r=>new $x({schema:r})))}toSchema(){const e=[];return e.push(new Rt({value:this.policyIdentifier})),this.policyQualifiers&&e.push(new ve({value:Array.from(this.policyQualifiers,n=>n.toSchema())})),new ve({value:e})}toJSON(){const e={policyIdentifier:this.policyIdentifier};return this.policyQualifiers&&(e.policyQualifiers=Array.from(this.policyQualifiers,n=>n.toJSON())),e}}jx.CLASS_NAME="PolicyInformation";const _I="certificatePolicies",sct=[_I];class C5 extends Ze{constructor(e={}){super(),this.certificatePolicies=Z(e,_I,C5.defaultValues(_I)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case _I:return[];default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Dn({name:n.certificatePolicies||ue,value:jx.schema()})]})}fromSchema(e){st(e,sct);const n=tt(e,e,C5.schema({names:{certificatePolicies:_I}}));Ge.assertSchema(n,this.className),this.certificatePolicies=Array.from(n.result.certificatePolicies,r=>new jx({schema:r}))}toSchema(){return new ve({value:Array.from(this.certificatePolicies,e=>e.toSchema())})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,e=>e.toJSON())}}}C5.CLASS_NAME="CertificatePolicies";const BI="templateID",Np="templateMajorVersion",kp="templateMinorVersion",ict=[BI,Np,kp];class a3 extends Ze{constructor(e={}){super(),this.templateID=Z(e,BI,a3.defaultValues(BI)),Np in e&&(this.templateMajorVersion=Z(e,Np,a3.defaultValues(Np))),kp in e&&(this.templateMinorVersion=Z(e,kp,a3.defaultValues(kp))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case BI:return ue;case Np:case kp:return 0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.templateID||ue}),new $e({name:n.templateMajorVersion||ue,optional:!0}),new $e({name:n.templateMinorVersion||ue,optional:!0})]})}fromSchema(e){st(e,ict);const n=tt(e,e,a3.schema({names:{templateID:BI,templateMajorVersion:Np,templateMinorVersion:kp}}));Ge.assertSchema(n,this.className),this.templateID=n.result.templateID.valueBlock.toString(),Np in n.result&&(this.templateMajorVersion=n.result.templateMajorVersion.valueBlock.valueDec),kp in n.result&&(this.templateMinorVersion=n.result.templateMinorVersion.valueBlock.valueDec)}toSchema(){const e=[];return e.push(new Rt({value:this.templateID})),Np in this&&e.push(new $e({value:this.templateMajorVersion})),kp in this&&e.push(new $e({value:this.templateMinorVersion})),new ve({value:e})}toJSON(){const e={templateID:this.templateID};return Np in this&&(e.templateMajorVersion=this.templateMajorVersion),kp in this&&(e.templateMinorVersion=this.templateMinorVersion),e}}const T1="distributionPoint",j3e="distributionPointNames",N1="reasons",k1="cRLIssuer",H3e="cRLIssuerNames",act=[T1,j3e,N1,k1,H3e];class Tw extends Ze{constructor(e={}){super(),T1 in e&&(this.distributionPoint=Z(e,T1,Tw.defaultValues(T1))),N1 in e&&(this.reasons=Z(e,N1,Tw.defaultValues(N1))),k1 in e&&(this.cRLIssuer=Z(e,k1,Tw.defaultValues(k1))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case T1:return[];case N1:return new ur;case k1:return[];default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new zs({value:[new Re({name:n.distributionPoint||ue,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Dn({name:n.distributionPointNames||ue,value:Hr.schema()})]}),new Re({name:n.distributionPoint||ue,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:ns.schema().valueBlock.value})]})]}),new gn({name:n.reasons||ue,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new Re({name:n.cRLIssuer||ue,optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new Dn({name:n.cRLIssuerNames||ue,value:Hr.schema()})]})]})}fromSchema(e){st(e,act);const n=tt(e,e,Tw.schema({names:{distributionPoint:T1,distributionPointNames:j3e,reasons:N1,cRLIssuer:k1,cRLIssuerNames:H3e}}));Ge.assertSchema(n,this.className),T1 in n.result&&(n.result.distributionPoint.idBlock.tagNumber===0&&(this.distributionPoint=Array.from(n.result.distributionPointNames,r=>new Hr({schema:r}))),n.result.distributionPoint.idBlock.tagNumber===1&&(this.distributionPoint=new ns({schema:new ve({value:n.result.distributionPoint.valueBlock.value})}))),N1 in n.result&&(this.reasons=new ur({valueHex:n.result.reasons.valueBlock.valueHex})),k1 in n.result&&(this.cRLIssuer=Array.from(n.result.cRLIssuerNames,r=>new Hr({schema:r})))}toSchema(){const e=[];if(this.distributionPoint){let n;this.distributionPoint instanceof Array?n=new Re({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,r=>r.toSchema())}):n=new Re({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:[n]}))}return this.reasons&&e.push(new gn({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHexView})),this.cRLIssuer&&e.push(new Re({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,n=>n.toSchema())})),new ve({value:e})}toJSON(){const e={};return this.distributionPoint&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,n=>n.toJSON()):e.distributionPoint=this.distributionPoint.toJSON()),this.reasons&&(e.reasons=this.reasons.toJSON()),this.cRLIssuer&&(e.cRLIssuer=Array.from(this.cRLIssuer,n=>n.toJSON())),e}}Tw.CLASS_NAME="DistributionPoint";const MI="distributionPoints",oct=[MI];class T5 extends Ze{constructor(e={}){super(),this.distributionPoints=Z(e,MI,T5.defaultValues(MI)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case MI:return[];default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Dn({name:n.distributionPoints||ue,value:Tw.schema()})]})}fromSchema(e){st(e,oct);const n=tt(e,e,T5.schema({names:{distributionPoints:MI}}));Ge.assertSchema(n,this.className),this.distributionPoints=Array.from(n.result.distributionPoints,r=>new Tw({schema:r}))}toSchema(){return new ve({value:Array.from(this.distributionPoints,e=>e.toSchema())})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,e=>e.toJSON())}}}T5.CLASS_NAME="CRLDistributionPoints";const DI="keyPurposes",cct=[DI];class Tk extends Ze{constructor(e={}){super(),this.keyPurposes=Z(e,DI,Tk.defaultValues(DI)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case DI:return[];default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Dn({name:n.keyPurposes||ue,value:new Rt})]})}fromSchema(e){st(e,cct);const n=tt(e,e,Tk.schema({names:{keyPurposes:DI}}));Ge.assertSchema(n,this.className),this.keyPurposes=Array.from(n.result.keyPurposes,r=>r.valueBlock.toString())}toSchema(){return new ve({value:Array.from(this.keyPurposes,e=>new Rt({value:e}))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}Tk.CLASS_NAME="ExtKeyUsage";const M8="accessDescriptions";class N5 extends Ze{constructor(e={}){super(),this.accessDescriptions=Z(e,M8,N5.defaultValues(M8)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case M8:return[];default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Dn({name:n.accessDescriptions||ue,value:Fx.schema()})]})}fromSchema(e){st(e,[M8]);const n=tt(e,e,N5.schema({names:{accessDescriptions:M8}}));Ge.assertSchema(n,this.className),this.accessDescriptions=Array.from(n.result.accessDescriptions,r=>new Fx({schema:r}))}toSchema(){return new ve({value:Array.from(this.accessDescriptions,e=>e.toSchema())})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,e=>e.toJSON())}}}N5.CLASS_NAME="InfoAccess";const P1="distributionPoint",q3e="distributionPointNames",ey="onlyContainsUserCerts",ty="onlyContainsCACerts",ny="onlySomeReasons",ry="indirectCRL",sy="onlyContainsAttributeCerts",lct=[P1,q3e,ey,ty,ny,ry,sy];class _a extends Ze{constructor(e={}){super(),P1 in e&&(this.distributionPoint=Z(e,P1,_a.defaultValues(P1))),this.onlyContainsUserCerts=Z(e,ey,_a.defaultValues(ey)),this.onlyContainsCACerts=Z(e,ty,_a.defaultValues(ty)),ny in e&&(this.onlySomeReasons=Z(e,ny,_a.defaultValues(ny))),this.indirectCRL=Z(e,ry,_a.defaultValues(ry)),this.onlyContainsAttributeCerts=Z(e,sy,_a.defaultValues(sy)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case P1:return[];case ey:return!1;case ty:return!1;case ny:return 0;case ry:return!1;case sy:return!1;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new zs({value:[new Re({name:n.distributionPoint||ue,idBlock:{tagClass:3,tagNumber:0},value:[new Dn({name:n.distributionPointNames||ue,value:Hr.schema()})]}),new Re({name:n.distributionPoint||ue,idBlock:{tagClass:3,tagNumber:1},value:ns.schema().valueBlock.value})]})]}),new gn({name:n.onlyContainsUserCerts||ue,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new gn({name:n.onlyContainsCACerts||ue,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new gn({name:n.onlySomeReasons||ue,optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new gn({name:n.indirectCRL||ue,optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new gn({name:n.onlyContainsAttributeCerts||ue,optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(e){st(e,lct);const n=tt(e,e,_a.schema({names:{distributionPoint:P1,distributionPointNames:q3e,onlyContainsUserCerts:ey,onlyContainsCACerts:ty,onlySomeReasons:ny,indirectCRL:ry,onlyContainsAttributeCerts:sy}}));if(Ge.assertSchema(n,this.className),P1 in n.result)switch(!0){case n.result.distributionPoint.idBlock.tagNumber===0:this.distributionPoint=Array.from(n.result.distributionPointNames,r=>new Hr({schema:r}));break;case n.result.distributionPoint.idBlock.tagNumber===1:this.distributionPoint=new ns({schema:new ve({value:n.result.distributionPoint.valueBlock.value})});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if(ey in n.result){const r=new Uint8Array(n.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=r[0]!==0}if(ty in n.result){const r=new Uint8Array(n.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=r[0]!==0}if(ny in n.result){const r=new Uint8Array(n.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=r[0]}if(ry in n.result){const r=new Uint8Array(n.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=r[0]!==0}if(sy in n.result){const r=new Uint8Array(n.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=r[0]!==0}}toSchema(){const e=[];if(this.distributionPoint){let n;this.distributionPoint instanceof Array?n=new Re({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,r=>r.toSchema())}):(n=this.distributionPoint.toSchema(),n.idBlock.tagClass=3,n.idBlock.tagNumber=1),e.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:[n]}))}if(this.onlyContainsUserCerts!==_a.defaultValues(ey)&&e.push(new gn({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==_a.defaultValues(ty)&&e.push(new gn({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),this.onlySomeReasons!==void 0){const n=new ArrayBuffer(1),r=new Uint8Array(n);r[0]=this.onlySomeReasons,e.push(new gn({idBlock:{tagClass:3,tagNumber:3},valueHex:n}))}return this.indirectCRL!==_a.defaultValues(ry)&&e.push(new gn({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==_a.defaultValues(sy)&&e.push(new gn({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new ve({value:e})}toJSON(){const e={};return this.distributionPoint&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,n=>n.toJSON()):e.distributionPoint=this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==_a.defaultValues(ey)&&(e.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==_a.defaultValues(ty)&&(e.onlyContainsCACerts=this.onlyContainsCACerts),ny in this&&(e.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==_a.defaultValues(ry)&&(e.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==_a.defaultValues(sy)&&(e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),e}}_a.CLASS_NAME="IssuingDistributionPoint";const LI="base",dA="minimum",iy="maximum",uct=[LI,dA,iy];class p0 extends Ze{constructor(e={}){super(),this.base=Z(e,LI,p0.defaultValues(LI)),this.minimum=Z(e,dA,p0.defaultValues(dA)),iy in e&&(this.maximum=Z(e,iy,p0.defaultValues(iy))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case LI:return new Hr;case dA:return 0;case iy:return 0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[Hr.schema(n.base||{}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new $e({name:n.minimum||ue})]}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new $e({name:n.maximum||ue})]})]})}fromSchema(e){st(e,uct);const n=tt(e,e,p0.schema({names:{base:{names:{blockName:LI}},minimum:dA,maximum:iy}}));Ge.assertSchema(n,this.className),this.base=new Hr({schema:n.result.base}),dA in n.result&&(n.result.minimum.valueBlock.isHexOnly?this.minimum=n.result.minimum:this.minimum=n.result.minimum.valueBlock.valueDec),iy in n.result&&(n.result.maximum.valueBlock.isHexOnly?this.maximum=n.result.maximum:this.maximum=n.result.maximum.valueBlock.valueDec)}toSchema(){const e=[];if(e.push(this.base.toSchema()),this.minimum!==0){let n=0;this.minimum instanceof $e?n=this.minimum:n=new $e({value:this.minimum}),e.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[n]}))}if(iy in this){let n=0;this.maximum instanceof $e?n=this.maximum:n=new $e({value:this.maximum}),e.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[n]}))}return new ve({value:e})}toJSON(){const e={base:this.base.toJSON()};return this.minimum!==0&&(typeof this.minimum=="number"?e.minimum=this.minimum:e.minimum=this.minimum.toJSON()),this.maximum!==void 0&&(typeof this.maximum=="number"?e.maximum=this.maximum:e.maximum=this.maximum.toJSON()),e}}p0.CLASS_NAME="GeneralSubtree";const O1="permittedSubtrees",R1="excludedSubtrees",fct=[O1,R1];class F3 extends Ze{constructor(e={}){super(),O1 in e&&(this.permittedSubtrees=Z(e,O1,F3.defaultValues(O1))),R1 in e&&(this.excludedSubtrees=Z(e,R1,F3.defaultValues(R1))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case O1:case R1:return[];default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Dn({name:n.permittedSubtrees||ue,value:p0.schema()})]}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Dn({name:n.excludedSubtrees||ue,value:p0.schema()})]})]})}fromSchema(e){st(e,fct);const n=tt(e,e,F3.schema({names:{permittedSubtrees:O1,excludedSubtrees:R1}}));Ge.assertSchema(n,this.className),O1 in n.result&&(this.permittedSubtrees=Array.from(n.result.permittedSubtrees,r=>new p0({schema:r}))),R1 in n.result&&(this.excludedSubtrees=Array.from(n.result.excludedSubtrees,r=>new p0({schema:r})))}toSchema(){const e=[];return this.permittedSubtrees&&e.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,n=>n.toSchema())})),this.excludedSubtrees&&e.push(new Re({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,n=>n.toSchema())})),new ve({value:e})}toJSON(){const e={};return this.permittedSubtrees&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,n=>n.toJSON())),this.excludedSubtrees&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,n=>n.toJSON())),e}}F3.CLASS_NAME="NameConstraints";const Pp="requireExplicitPolicy",Op="inhibitPolicyMapping",dct=[Pp,Op];class V3 extends Ze{constructor(e={}){super(),Pp in e&&(this.requireExplicitPolicy=Z(e,Pp,V3.defaultValues(Pp))),Op in e&&(this.inhibitPolicyMapping=Z(e,Op,V3.defaultValues(Op))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Pp:return 0;case Op:return 0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new gn({name:n.requireExplicitPolicy||ue,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new gn({name:n.inhibitPolicyMapping||ue,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){st(e,dct);const n=tt(e,e,V3.schema({names:{requireExplicitPolicy:Pp,inhibitPolicyMapping:Op}}));if(Ge.assertSchema(n,this.className),Pp in n.result){const r=n.result.requireExplicitPolicy;r.idBlock.tagClass=1,r.idBlock.tagNumber=2;const s=r.toBER(!1),i=ia(s);Ge.assert(i,"Integer"),this.requireExplicitPolicy=i.result.valueBlock.valueDec}if(Op in n.result){const r=n.result.inhibitPolicyMapping;r.idBlock.tagClass=1,r.idBlock.tagNumber=2;const s=r.toBER(!1),i=ia(s);Ge.assert(i,"Integer"),this.inhibitPolicyMapping=i.result.valueBlock.valueDec}}toSchema(){const e=[];if(Pp in this){const n=new $e({value:this.requireExplicitPolicy});n.idBlock.tagClass=3,n.idBlock.tagNumber=0,e.push(n)}if(Op in this){const n=new $e({value:this.inhibitPolicyMapping});n.idBlock.tagClass=3,n.idBlock.tagNumber=1,e.push(n)}return new ve({value:e})}toJSON(){const e={};return Pp in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),Op in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}V3.CLASS_NAME="PolicyConstraints";const UI="issuerDomainPolicy",FI="subjectDomainPolicy",hct=[UI,FI];class Hx extends Ze{constructor(e={}){super(),this.issuerDomainPolicy=Z(e,UI,Hx.defaultValues(UI)),this.subjectDomainPolicy=Z(e,FI,Hx.defaultValues(FI)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case UI:return ue;case FI:return ue;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.issuerDomainPolicy||ue}),new Rt({name:n.subjectDomainPolicy||ue})]})}fromSchema(e){st(e,hct);const n=tt(e,e,Hx.schema({names:{issuerDomainPolicy:UI,subjectDomainPolicy:FI}}));Ge.assertSchema(n,this.className),this.issuerDomainPolicy=n.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=n.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new ve({value:[new Rt({value:this.issuerDomainPolicy}),new Rt({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}Hx.CLASS_NAME="PolicyMapping";const VI="mappings",pct=[VI];class Nk extends Ze{constructor(e={}){super(),this.mappings=Z(e,VI,Nk.defaultValues(VI)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case VI:return[];default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Dn({name:n.mappings||ue,value:Hx.schema()})]})}fromSchema(e){st(e,pct);const n=tt(e,e,Nk.schema({names:{mappings:VI}}));Ge.assertSchema(n,this.className),this.mappings=Array.from(n.result.mappings,r=>new Hx({schema:r}))}toSchema(){return new ve({value:Array.from(this.mappings,e=>e.toSchema())})}toJSON(){return{mappings:Array.from(this.mappings,e=>e.toJSON())}}}Nk.CLASS_NAME="PolicyMappings";const ay="notBefore",oy="notAfter",gct=[ay,oy];class $3 extends Ze{constructor(e={}){super(),ay in e&&(this.notBefore=Z(e,ay,$3.defaultValues(ay))),oy in e&&(this.notAfter=Z(e,oy,$3.defaultValues(oy))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ay:return new Date;case oy:return new Date;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new gn({name:n.notBefore||ue,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new gn({name:n.notAfter||ue,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){st(e,gct);const n=tt(e,e,$3.schema({names:{notBefore:ay,notAfter:oy}}));if(Ge.assertSchema(n,this.className),ay in n.result){const r=new Gs;r.fromBuffer(n.result.notBefore.valueBlock.valueHex),this.notBefore=r.toDate()}if(oy in n.result){const r=new Gs({valueHex:n.result.notAfter.valueBlock.valueHex});r.fromBuffer(n.result.notAfter.valueBlock.valueHex),this.notAfter=r.toDate()}}toSchema(){const e=[];return ay in this&&e.push(new gn({idBlock:{tagClass:3,tagNumber:0},valueHex:new Gs({valueDate:this.notBefore}).valueBlock.valueHexView})),oy in this&&e.push(new gn({idBlock:{tagClass:3,tagNumber:1},valueHex:new Gs({valueDate:this.notAfter}).valueBlock.valueHexView})),new ve({value:e})}toJSON(){const e={};return this.notBefore&&(e.notBefore=this.notBefore),this.notAfter&&(e.notAfter=this.notAfter),e}}$3.CLASS_NAME="PrivateKeyUsagePeriod";const hA="id",Rp="type",pA="values",mct=[hA,Rp],yct=[pA];class qx extends Ze{constructor(e={}){super(),this.id=Z(e,hA,qx.defaultValues(hA)),Rp in e&&(this.type=Z(e,Rp,qx.defaultValues(Rp))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hA:return ue;case Rp:return new xi;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case hA:return n===ue;case Rp:return n instanceof xi;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.id||ue}),new xn({name:n.type||ue,optional:!0})]})}fromSchema(e){st(e,mct);const n=tt(e,e,qx.schema({names:{id:hA,type:Rp}}));Ge.assertSchema(n,this.className),this.id=n.result.id.valueBlock.toString(),Rp in n.result&&(this.type=n.result.type)}toSchema(){const e=[new Rt({value:this.id})];return Rp in this&&e.push(this.type),new ve({value:e})}toJSON(){const e={id:this.id};return this.type&&(e.type=this.type.toJSON()),e}}qx.CLASS_NAME="QCStatement";class kk extends Ze{constructor(e={}){super(),this.values=Z(e,pA,kk.defaultValues(pA)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pA:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case pA:return n.length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Dn({name:n.values||ue,value:qx.schema(n.value||{})})]})}fromSchema(e){st(e,yct);const n=tt(e,e,kk.schema({names:{values:pA}}));Ge.assertSchema(n,this.className),this.values=Array.from(n.result.values,r=>new qx({schema:r}))}toSchema(){return new ve({value:Array.from(this.values,e=>e.toSchema())})}toJSON(){return{values:Array.from(this.values,e=>e.toJSON())}}}kk.CLASS_NAME="QCStatements";var _1;class Qw{static register(e,n,r){this.namedCurves[e.toLowerCase()]=this.namedCurves[n]={name:e,id:n,size:r}}static find(e){return this.namedCurves[e.toLowerCase()]||null}}_1=Qw;Qw.namedCurves={};_1.register("P-256","1.2.840.10045.3.1.7",32),_1.register("P-384","1.3.132.0.34",48),_1.register("P-521","1.3.132.0.35",66),_1.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32),_1.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48),_1.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64);const pO="x",gO="y",mO="namedCurve";class Nc extends Ze{constructor(e={}){super(),this.x=Z(e,pO,Nc.defaultValues(pO)),this.y=Z(e,gO,Nc.defaultValues(gO)),this.namedCurve=Z(e,mO,Nc.defaultValues(mO)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pO:case gO:return Ci;case mO:return ue;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case pO:case gO:return n instanceof ArrayBuffer&&E5(n,Nc.defaultValues(e));case mO:return typeof n=="string"&&n===Nc.defaultValues(e);default:return super.defaultValues(e)}}static schema(){return new vM}fromSchema(e){const n=fn.toUint8Array(e);if(n[0]!==4)throw new Error("Object's schema was not verified against input data for ECPublicKey");const r=Qw.find(this.namedCurve);if(!r)throw new Error(`Incorrect curve OID: ${this.namedCurve}`);const s=r.size;if(n.byteLength!==s*2+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.namedCurve=r.name,this.x=n.slice(1,s+1).buffer,this.y=n.slice(1+s,s*2+1).buffer}toSchema(){return new vM({data:L3(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){const e=Qw.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:QW(wM(this.x),!0,!0,!1),y:QW(wM(this.y),!0,!0,!1)}}fromJSON(e){Nr.assert("json",e,"crv","x","y");let n=0;const r=Qw.find(e.crv);r&&(this.namedCurve=r.id,n=r.size);const s=A5(xk(e.x,!0));if(s.byteLength<n){this.x=new ArrayBuffer(n);const a=new Uint8Array(this.x),o=new Uint8Array(s);a.set(o,1)}else this.x=s.slice(0,n);const i=A5(xk(e.y,!0));if(i.byteLength<n){this.y=new ArrayBuffer(n);const a=new Uint8Array(this.y),o=new Uint8Array(i);a.set(o,1)}else this.y=i.slice(0,n)}}Nc.CLASS_NAME="ECPublicKey";const $I="modulus",jI="publicExponent",wct=[$I,jI];class Kx extends Ze{constructor(e={}){super(),this.modulus=Z(e,$I,Kx.defaultValues($I)),this.publicExponent=Z(e,jI,Kx.defaultValues(jI)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $I:return new $e;case jI:return new $e;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.modulus||ue}),new $e({name:n.publicExponent||ue})]})}fromSchema(e){st(e,wct);const n=tt(e,e,Kx.schema({names:{modulus:$I,publicExponent:jI}}));Ge.assertSchema(n,this.className),this.modulus=n.result.modulus.convertFromDER(256),this.publicExponent=n.result.publicExponent}toSchema(){return new ve({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:pn.ToBase64Url(this.modulus.valueBlock.valueHexView),e:pn.ToBase64Url(this.publicExponent.valueBlock.valueHexView)}}fromJSON(e){Nr.assert("json",e,"n","e");const n=A5(xk(e.n,!0));this.modulus=new $e({valueHex:n.slice(0,Math.pow(2,Oat(n.byteLength)))}),this.publicExponent=new $e({valueHex:A5(xk(e.e,!0)).slice(0,3)})}}Kx.CLASS_NAME="RSAPublicKey";const HI="algorithm",qI="subjectPublicKey",bct=[HI,qI];class Vc extends Ze{get parsedKey(){if(this._parsedKey===void 0){switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm&&this.algorithm.algorithmParams.constructor.blockName()===Rt.blockName())try{this._parsedKey=new Nc({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHexView})}catch{}break;case"1.2.840.113549.1.1.1":{const e=ia(this.subjectPublicKey.valueBlock.valueHexView);if(e.offset!==-1)try{this._parsedKey=new Kx({schema:e.result})}catch{}}break}this._parsedKey||(this._parsedKey=null)}return this._parsedKey||void 0}set parsedKey(e){this._parsedKey=e}constructor(e={}){super(),this.algorithm=Z(e,HI,Vc.defaultValues(HI)),this.subjectPublicKey=Z(e,qI,Vc.defaultValues(qI));const n=Z(e,"parsedKey",null);n&&(this.parsedKey=n),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case HI:return new Ve;case qI:return new ur;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[Ve.schema(n.algorithm||{}),new ur({name:n.subjectPublicKey||ue})]})}fromSchema(e){st(e,bct);const n=tt(e,e,Vc.schema({names:{algorithm:{names:{blockName:HI}},subjectPublicKey:qI}}));Ge.assertSchema(n,this.className),this.algorithm=new Ve({schema:n.result.algorithm}),this.subjectPublicKey=n.result.subjectPublicKey}toSchema(){return new ve({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if(!this.parsedKey)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};const e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA";break}const n=this.parsedKey.toJSON();return Object.assign(e,n),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new Nc({json:e}),this.algorithm=new Ve({algorithmId:"1.2.840.10045.2.1",algorithmParams:new Rt({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new Kx({json:e}),this.algorithm=new Ve({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new xi});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.subjectPublicKey=new ur({valueHex:this.parsedKey.toSchema().toBER(!1)})}}async importKey(e,n=zn(!0)){try{if(!e)throw new Error("Need to provide publicKey input parameter");const r=await n.exportKey("spki",e),s=ia(r);try{this.fromSchema(s.result)}catch{throw new Error("Error during initializing object from schema")}}catch(r){const s=r instanceof Error?r.message:`${r}`;throw new Error(`Error during exporting public key: ${s}`)}}}Vc.CLASS_NAME="PublicKeyInfo";const gA="version",mA="privateKey",hd="namedCurve",cy="publicKey",vct=[gA,mA,hd,cy];class wf extends Ze{constructor(e={}){super(),this.version=Z(e,gA,wf.defaultValues(gA)),this.privateKey=Z(e,mA,wf.defaultValues(mA)),hd in e&&(this.namedCurve=Z(e,hd,wf.defaultValues(hd))),cy in e&&(this.publicKey=Z(e,cy,wf.defaultValues(cy))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gA:return 1;case mA:return new ut;case hd:return ue;case cy:return new Nc;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case gA:return n===wf.defaultValues(e);case mA:return n.isEqual(wf.defaultValues(e));case hd:return n===ue;case cy:return Nc.compareWithDefault(hd,n.namedCurve)&&Nc.compareWithDefault("x",n.x)&&Nc.compareWithDefault("y",n.y);default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.version||ue}),new ut({name:n.privateKey||ue}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Rt({name:n.namedCurve||ue})]}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new ur({name:n.publicKey||ue})]})]})}fromSchema(e){st(e,vct);const n=tt(e,e,wf.schema({names:{version:gA,privateKey:mA,namedCurve:hd,publicKey:cy}}));if(Ge.assertSchema(n,this.className),this.version=n.result.version.valueBlock.valueDec,this.privateKey=n.result.privateKey,hd in n.result&&(this.namedCurve=n.result.namedCurve.valueBlock.toString()),cy in n.result){const r={schema:n.result.publicKey.valueBlock.valueHex};hd in this&&(r.namedCurve=this.namedCurve),this.publicKey=new Nc(r)}}toSchema(){const e=[new $e({value:this.version}),this.privateKey];return this.namedCurve&&e.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:[new Rt({value:this.namedCurve})]})),this.publicKey&&e.push(new Re({idBlock:{tagClass:3,tagNumber:1},value:[new ur({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new ve({value:e})}toJSON(){if(!this.namedCurve||wf.compareWithDefault(hd,this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');const e=Qw.find(this.namedCurve),n={crv:e?e.name:this.namedCurve,d:pn.ToBase64Url(this.privateKey.valueBlock.valueHexView)};if(this.publicKey){const r=this.publicKey.toJSON();n.x=r.x,n.y=r.y}return n}fromJSON(e){Nr.assert("json",e,"crv","d");let n=0;const r=Qw.find(e.crv);r&&(this.namedCurve=r.id,n=r.size);const s=pn.FromBase64Url(e.d);if(s.byteLength<n){const i=new ArrayBuffer(n),a=new Uint8Array(i),o=new Uint8Array(s);a.set(o,1),this.privateKey=new ut({valueHex:i})}else this.privateKey=new ut({valueHex:s.slice(0,n)});e.x&&e.y&&(this.publicKey=new Nc({json:e}))}}wf.CLASS_NAME="ECPrivateKey";const KI="prime",GI="exponent",WI="coefficient",xct=[KI,GI,WI];class bg extends Ze{constructor(e={}){super(),this.prime=Z(e,KI,bg.defaultValues(KI)),this.exponent=Z(e,GI,bg.defaultValues(GI)),this.coefficient=Z(e,WI,bg.defaultValues(WI)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case KI:return new $e;case GI:return new $e;case WI:return new $e;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.prime||ue}),new $e({name:n.exponent||ue}),new $e({name:n.coefficient||ue})]})}fromSchema(e){st(e,xct);const n=tt(e,e,bg.schema({names:{prime:KI,exponent:GI,coefficient:WI}}));Ge.assertSchema(n,this.className),this.prime=n.result.prime.convertFromDER(),this.exponent=n.result.exponent.convertFromDER(),this.coefficient=n.result.coefficient.convertFromDER()}toSchema(){return new ve({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:pn.ToBase64Url(this.prime.valueBlock.valueHexView),d:pn.ToBase64Url(this.exponent.valueBlock.valueHexView),t:pn.ToBase64Url(this.coefficient.valueBlock.valueHexView)}}fromJSON(e){Nr.assert("json",e,"r","d","r"),this.prime=new $e({valueHex:pn.FromBase64Url(e.r)}),this.exponent=new $e({valueHex:pn.FromBase64Url(e.d)}),this.coefficient=new $e({valueHex:pn.FromBase64Url(e.t)})}}bg.CLASS_NAME="OtherPrimeInfo";const zI="version",JI="modulus",YI="publicExponent",QI="privateExponent",ZI="prime1",XI="prime2",eC="exponent1",tC="exponent2",nC="coefficient",B1="otherPrimeInfos",Ect=[zI,JI,YI,QI,ZI,XI,eC,tC,nC,B1];class Ac extends Ze{constructor(e={}){super(),this.version=Z(e,zI,Ac.defaultValues(zI)),this.modulus=Z(e,JI,Ac.defaultValues(JI)),this.publicExponent=Z(e,YI,Ac.defaultValues(YI)),this.privateExponent=Z(e,QI,Ac.defaultValues(QI)),this.prime1=Z(e,ZI,Ac.defaultValues(ZI)),this.prime2=Z(e,XI,Ac.defaultValues(XI)),this.exponent1=Z(e,eC,Ac.defaultValues(eC)),this.exponent2=Z(e,tC,Ac.defaultValues(tC)),this.coefficient=Z(e,nC,Ac.defaultValues(nC)),B1 in e&&(this.otherPrimeInfos=Z(e,B1,Ac.defaultValues(B1))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case zI:return 0;case JI:return new $e;case YI:return new $e;case QI:return new $e;case ZI:return new $e;case XI:return new $e;case eC:return new $e;case tC:return new $e;case nC:return new $e;case B1:return[];default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.version||ue}),new $e({name:n.modulus||ue}),new $e({name:n.publicExponent||ue}),new $e({name:n.privateExponent||ue}),new $e({name:n.prime1||ue}),new $e({name:n.prime2||ue}),new $e({name:n.exponent1||ue}),new $e({name:n.exponent2||ue}),new $e({name:n.coefficient||ue}),new ve({optional:!0,value:[new Dn({name:n.otherPrimeInfosName||ue,value:bg.schema(n.otherPrimeInfo||{})})]})]})}fromSchema(e){st(e,Ect);const n=tt(e,e,Ac.schema({names:{version:zI,modulus:JI,publicExponent:YI,privateExponent:QI,prime1:ZI,prime2:XI,exponent1:eC,exponent2:tC,coefficient:nC,otherPrimeInfo:{names:{blockName:B1}}}}));Ge.assertSchema(n,this.className),this.version=n.result.version.valueBlock.valueDec,this.modulus=n.result.modulus.convertFromDER(256),this.publicExponent=n.result.publicExponent,this.privateExponent=n.result.privateExponent.convertFromDER(256),this.prime1=n.result.prime1.convertFromDER(128),this.prime2=n.result.prime2.convertFromDER(128),this.exponent1=n.result.exponent1.convertFromDER(128),this.exponent2=n.result.exponent2.convertFromDER(128),this.coefficient=n.result.coefficient.convertFromDER(128),B1 in n.result&&(this.otherPrimeInfos=Array.from(n.result.otherPrimeInfos,r=>new bg({schema:r})))}toSchema(){const e=[];return e.push(new $e({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),this.otherPrimeInfos&&e.push(new ve({value:Array.from(this.otherPrimeInfos,n=>n.toSchema())})),new ve({value:e})}toJSON(){const e={n:pn.ToBase64Url(this.modulus.valueBlock.valueHexView),e:pn.ToBase64Url(this.publicExponent.valueBlock.valueHexView),d:pn.ToBase64Url(this.privateExponent.valueBlock.valueHexView),p:pn.ToBase64Url(this.prime1.valueBlock.valueHexView),q:pn.ToBase64Url(this.prime2.valueBlock.valueHexView),dp:pn.ToBase64Url(this.exponent1.valueBlock.valueHexView),dq:pn.ToBase64Url(this.exponent2.valueBlock.valueHexView),qi:pn.ToBase64Url(this.coefficient.valueBlock.valueHexView)};return this.otherPrimeInfos&&(e.oth=Array.from(this.otherPrimeInfos,n=>n.toJSON())),e}fromJSON(e){Nr.assert("json",e,"n","e","d","p","q","dp","dq","qi"),this.modulus=new $e({valueHex:pn.FromBase64Url(e.n)}),this.publicExponent=new $e({valueHex:pn.FromBase64Url(e.e)}),this.privateExponent=new $e({valueHex:pn.FromBase64Url(e.d)}),this.prime1=new $e({valueHex:pn.FromBase64Url(e.p)}),this.prime2=new $e({valueHex:pn.FromBase64Url(e.q)}),this.exponent1=new $e({valueHex:pn.FromBase64Url(e.dp)}),this.exponent2=new $e({valueHex:pn.FromBase64Url(e.dq)}),this.coefficient=new $e({valueHex:pn.FromBase64Url(e.qi)}),e.oth&&(this.otherPrimeInfos=Array.from(e.oth,n=>new bg({json:n})))}}Ac.CLASS_NAME="RSAPrivateKey";const rC="version",sC="privateKeyAlgorithm",iC="privateKey",M1="attributes",yO="parsedKey",Act=[rC,sC,iC,M1];class Sf extends Ze{constructor(e={}){super(),this.version=Z(e,rC,Sf.defaultValues(rC)),this.privateKeyAlgorithm=Z(e,sC,Sf.defaultValues(sC)),this.privateKey=Z(e,iC,Sf.defaultValues(iC)),M1 in e&&(this.attributes=Z(e,M1,Sf.defaultValues(M1))),yO in e&&(this.parsedKey=Z(e,yO,Sf.defaultValues(yO))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case rC:return 0;case sC:return new Ve;case iC:return new ut;case M1:return[];case yO:return{};default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.version||ue}),Ve.schema(n.privateKeyAlgorithm||{}),new ut({name:n.privateKey||ue}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Dn({name:n.attributes||ue,value:Fs.schema()})]})]})}fromSchema(e){st(e,Act);const n=tt(e,e,Sf.schema({names:{version:rC,privateKeyAlgorithm:{names:{blockName:sC}},privateKey:iC,attributes:M1}}));switch(Ge.assertSchema(n,this.className),this.version=n.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new Ve({schema:n.result.privateKeyAlgorithm}),this.privateKey=n.result.privateKey,M1 in n.result&&(this.attributes=Array.from(n.result.attributes,r=>new Fs({schema:r}))),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":{const r=ia(this.privateKey.valueBlock.valueHexView);r.offset!==-1&&(this.parsedKey=new Ac({schema:r.result}))}break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof Rt){const r=ia(this.privateKey.valueBlock.valueHexView);r.offset!==-1&&(this.parsedKey=new wf({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:r.result}))}break}}toSchema(){const e=[new $e({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return this.attributes&&e.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,n=>n.toSchema())})),new ve({value:e})}toJSON(){if(!this.parsedKey){const r={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return this.attributes&&(r.attributes=Array.from(this.attributes,s=>s.toJSON())),r}const e={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA";break}const n=this.parsedKey.toJSON();return Object.assign(e,n),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new wf({json:e}),this.privateKeyAlgorithm=new Ve({algorithmId:"1.2.840.10045.2.1",algorithmParams:new Rt({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new Ac({json:e}),this.privateKeyAlgorithm=new Ve({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new xi});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.privateKey=new ut({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}Sf.CLASS_NAME="PrivateKeyInfo";const yA="contentType",wA="contentEncryptionAlgorithm",D1="encryptedContent",Sct=[yA,wA,D1],Ile=1024;class Li extends Ze{constructor(e={}){if(super(),this.contentType=Z(e,yA,Li.defaultValues(yA)),this.contentEncryptionAlgorithm=Z(e,wA,Li.defaultValues(wA)),D1 in e&&e.encryptedContent&&(this.encryptedContent=e.encryptedContent,this.encryptedContent.idBlock.tagClass===1&&this.encryptedContent.idBlock.tagNumber===4&&this.encryptedContent.idBlock.isConstructed===!1&&!e.disableSplit)){const n=new ut({idBlock:{isConstructed:!0},isConstructed:!0});let r=0;const s=this.encryptedContent.valueBlock.valueHexView.slice().buffer;let i=s.byteLength;for(;i>0;){const a=new Uint8Array(s,r,r+Ile>s.byteLength?s.byteLength-r:Ile),o=new ArrayBuffer(a.length),c=new Uint8Array(o);for(let l=0;l<c.length;l++)c[l]=a[l];n.valueBlock.value.push(new ut({valueHex:o})),i-=a.length,r+=a.length}this.encryptedContent=n}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case yA:return ue;case wA:return new Ve;case D1:return new ut;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case yA:return n===ue;case wA:return n.algorithmId===ue&&!("algorithmParams"in n);case D1:return n.isEqual(Li.defaultValues(D1));default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.contentType||ue}),Ve.schema(n.contentEncryptionAlgorithm||{}),new zs({value:[new Re({name:n.encryptedContent||ue,idBlock:{tagClass:3,tagNumber:0},value:[new Dn({value:new ut})]}),new gn({name:n.encryptedContent||ue,idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(e){st(e,Sct);const n=tt(e,e,Li.schema({names:{contentType:yA,contentEncryptionAlgorithm:{names:{blockName:wA}},encryptedContent:D1}}));Ge.assertSchema(n,this.className),this.contentType=n.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new Ve({schema:n.result.contentEncryptionAlgorithm}),D1 in n.result&&(this.encryptedContent=n.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}toSchema(){const e={isIndefiniteForm:!1},n=[];if(n.push(new Rt({value:this.contentType})),n.push(this.contentEncryptionAlgorithm.toSchema()),this.encryptedContent){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;const r=this.encryptedContent;r.idBlock.tagClass=3,r.idBlock.tagNumber=0,r.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,n.push(r)}return new ve({lenBlock:e,value:n})}toJSON(){const e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return this.encryptedContent&&(e.encryptedContent=this.encryptedContent.toJSON()),e}getEncryptedContent(){if(!this.encryptedContent)throw new Error("Parameter 'encryptedContent' is undefined");return ut.prototype.getValue.call(this.encryptedContent)}}Li.CLASS_NAME="EncryptedContentInfo";const ly="hashAlgorithm",uy="maskGenAlgorithm",fy="saltLength",dy="trailerField",Ict=[ly,uy,fy,dy];class Ma extends Ze{constructor(e={}){super(),this.hashAlgorithm=Z(e,ly,Ma.defaultValues(ly)),this.maskGenAlgorithm=Z(e,uy,Ma.defaultValues(uy)),this.saltLength=Z(e,fy,Ma.defaultValues(fy)),this.trailerField=Z(e,dy,Ma.defaultValues(dy)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ly:return new Ve({algorithmId:"1.3.14.3.2.26",algorithmParams:new xi});case uy:return new Ve({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new Ve({algorithmId:"1.3.14.3.2.26",algorithmParams:new xi}).toSchema()});case fy:return 20;case dy:return 1;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Re({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[Ve.schema(n.hashAlgorithm||{})]}),new Re({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[Ve.schema(n.maskGenAlgorithm||{})]}),new Re({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new $e({name:n.saltLength||ue})]}),new Re({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new $e({name:n.trailerField||ue})]})]})}fromSchema(e){st(e,Ict);const n=tt(e,e,Ma.schema({names:{hashAlgorithm:{names:{blockName:ly}},maskGenAlgorithm:{names:{blockName:uy}},saltLength:fy,trailerField:dy}}));Ge.assertSchema(n,this.className),ly in n.result&&(this.hashAlgorithm=new Ve({schema:n.result.hashAlgorithm})),uy in n.result&&(this.maskGenAlgorithm=new Ve({schema:n.result.maskGenAlgorithm})),fy in n.result&&(this.saltLength=n.result.saltLength.valueBlock.valueDec),dy in n.result&&(this.trailerField=n.result.trailerField.valueBlock.valueDec)}toSchema(){const e=[];return this.hashAlgorithm.isEqual(Ma.defaultValues(ly))||e.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(Ma.defaultValues(uy))||e.push(new Re({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==Ma.defaultValues(fy)&&e.push(new Re({idBlock:{tagClass:3,tagNumber:2},value:[new $e({value:this.saltLength})]})),this.trailerField!==Ma.defaultValues(dy)&&e.push(new Re({idBlock:{tagClass:3,tagNumber:3},value:[new $e({value:this.trailerField})]})),new ve({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(Ma.defaultValues(ly))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(Ma.defaultValues(uy))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==Ma.defaultValues(fy)&&(e.saltLength=this.saltLength),this.trailerField!==Ma.defaultValues(dy)&&(e.trailerField=this.trailerField),e}}Ma.CLASS_NAME="RSASSAPSSParams";const bA="salt",aC="iterationCount",pd="keyLength",_p="prf",Cct=[bA,aC,pd,_p];class ec extends Ze{constructor(e={}){super(),this.salt=Z(e,bA,ec.defaultValues(bA)),this.iterationCount=Z(e,aC,ec.defaultValues(aC)),pd in e&&(this.keyLength=Z(e,pd,ec.defaultValues(pd))),_p in e&&(this.prf=Z(e,_p,ec.defaultValues(_p))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case bA:return{};case aC:return-1;case pd:return 0;case _p:return new Ve({algorithmId:"1.3.14.3.2.26",algorithmParams:new xi});default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new zs({value:[new ut({name:n.saltPrimitive||ue}),Ve.schema(n.saltConstructed||{})]}),new $e({name:n.iterationCount||ue}),new $e({name:n.keyLength||ue,optional:!0}),Ve.schema(n.prf||{names:{optional:!0}})]})}fromSchema(e){st(e,Cct);const n=tt(e,e,ec.schema({names:{saltPrimitive:bA,saltConstructed:{names:{blockName:bA}},iterationCount:aC,keyLength:pd,prf:{names:{blockName:_p,optional:!0}}}}));Ge.assertSchema(n,this.className),this.salt=n.result.salt,this.iterationCount=n.result.iterationCount.valueBlock.valueDec,pd in n.result&&(this.keyLength=n.result.keyLength.valueBlock.valueDec),_p in n.result&&(this.prf=new Ve({schema:n.result.prf}))}toSchema(){const e=[];return e.push(this.salt),e.push(new $e({value:this.iterationCount})),pd in this&&ec.defaultValues(pd)!==this.keyLength&&e.push(new $e({value:this.keyLength})),this.prf&&ec.defaultValues(_p).isEqual(this.prf)===!1&&e.push(this.prf.toSchema()),new ve({value:e})}toJSON(){const e={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return pd in this&&ec.defaultValues(pd)!==this.keyLength&&(e.keyLength=this.keyLength),this.prf&&ec.defaultValues(_p).isEqual(this.prf)===!1&&(e.prf=this.prf.toJSON()),e}}ec.CLASS_NAME="PBKDF2Params";const oC="keyDerivationFunc",cC="encryptionScheme",Tct=[oC,cC];class Gx extends Ze{constructor(e={}){super(),this.keyDerivationFunc=Z(e,oC,Gx.defaultValues(oC)),this.encryptionScheme=Z(e,cC,Gx.defaultValues(cC)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case oC:return new Ve;case cC:return new Ve;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[Ve.schema(n.keyDerivationFunc||{}),Ve.schema(n.encryptionScheme||{})]})}fromSchema(e){st(e,Tct);const n=tt(e,e,Gx.schema({names:{keyDerivationFunc:{names:{blockName:oC}},encryptionScheme:{names:{blockName:cC}}}}));Ge.assertSchema(n,this.className),this.keyDerivationFunc=new Ve({schema:n.result.keyDerivationFunc}),this.encryptionScheme=new Ve({schema:n.result.encryptionScheme})}toSchema(){return new ve({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}Gx.CLASS_NAME="PBES2Params";class Nct{constructor(e){this.crypto=e.crypto,this.subtle="webkitSubtle"in e.crypto?e.crypto.webkitSubtle:e.crypto.subtle,this.name=Z(e,"name",ue)}async encrypt(...e){return this.subtle.encrypt(...e)}async decrypt(...e){return this.subtle.decrypt(...e)}sign(...e){return this.subtle.sign(...e)}async verify(...e){return this.subtle.verify(...e)}async digest(...e){return this.subtle.digest(...e)}async generateKey(...e){return this.subtle.generateKey(...e)}async deriveKey(...e){return this.subtle.deriveKey(...e)}async deriveBits(...e){return this.subtle.deriveBits(...e)}async wrapKey(...e){return this.subtle.wrapKey(...e)}async unwrapKey(...e){return this.subtle.unwrapKey(...e)}exportKey(...e){return this.subtle.exportKey(...e)}importKey(...e){return this.subtle.importKey(...e)}getRandomValues(e){if(e===null)throw new Error('Argument "array" must not be null');return this.crypto.getRandomValues(e)}}async function Cle(t,e,n,r,s){let i,a,o;switch(t.toUpperCase()){case"SHA-1":i=20,a=64,o=Qat;break;case"SHA-256":i=32,a=64,o=eot;break;case"SHA-384":i=48,a=128,o=Cot;break;case"SHA-512":i=64,a=128,o=Iot;break;default:throw new Error("Unsupported hashing algorithm")}const c=new Uint8Array(n);let l=new TextDecoder().decode(n);new TextEncoder().encode(l).some((B,D)=>B!==c[D])&&(l=String.fromCharCode(...c));const f=new Uint8Array(l.length*2+2),d=new DataView(f.buffer);for(let B=0;B<l.length;B++)d.setUint16(B*2,l.charCodeAt(B),!1);d.setUint16(l.length*2,0,!1);const p=new Uint8Array(a).fill(3),g=new Uint8Array(r),m=new Uint8Array(a*Math.ceil(g.length/a)).map((B,D)=>g[D%g.length]),v=new Uint8Array(a*Math.ceil(f.length/a)).map((B,D)=>f[D%f.length]);let A=new Uint8Array(m.length+v.length);A.set(m),A.set(v,m.length);const S=Math.ceil((e>>3)/i),I=[];for(let B=0;B<S;B++){let D=new Uint8Array(p.length+A.length);D.set(p),D.set(A,p.length);for(let Q=0;Q<s;Q++)D=o(D);const V=new Uint8Array(a).map((Q,ie)=>D[ie%D.length]),O=Math.ceil(g.length/a)+Math.ceil(f.length/a),U=[];for(let Q=0;Q<O;Q++){const ie=Array.from(A.slice(Q*a,(Q+1)*a));let G=511;for(let R=V.length-1;R>=0;R--)G>>=8,G+=V[R]+(ie[R]||0),ie[R]=G&255;U.push(...ie)}A=new Uint8Array(U),I.push(...D)}return new Uint8Array(I.slice(0,e>>3)).buffer}function K3e(t){const e=typeof t=="string"?{name:t}:t;return"hash"in e?{...e,hash:K3e(e.hash)}:e}class xM extends Nct{async importKey(e,n,r,s,i){var a,o,c,l,u,f;let d={};const p=K3e(r);switch(e.toLowerCase()){case"raw":return this.subtle.importKey("raw",n,r,s,i);case"spki":{const g=ia(fn.toArrayBuffer(n));Ge.assert(g,"keyData");const m=new Vc;try{m.fromSchema(g.result)}catch{throw new es("Incorrect keyData")}switch(p.name.toUpperCase()){case"RSA-PSS":{if(!p.hash)throw new Nr("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(p.hash.name.toUpperCase()){case"SHA-1":d.alg="PS1";break;case"SHA-256":d.alg="PS256";break;case"SHA-384":d.alg="PS384";break;case"SHA-512":d.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${p.hash.name.toUpperCase()}`)}}case"RSASSA-PKCS1-V1_5":{if(i=["verify"],d.kty="RSA",d.ext=s,d.key_ops=i,m.algorithm.algorithmId!=="1.2.840.113549.1.1.1")throw new Error(`Incorrect public key algorithm: ${m.algorithm.algorithmId}`);if(!d.alg){if(!p.hash)throw new Nr("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(p.hash.name.toUpperCase()){case"SHA-1":d.alg="RS1";break;case"SHA-256":d.alg="RS256";break;case"SHA-384":d.alg="RS384";break;case"SHA-512":d.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${p.hash.name.toUpperCase()}`)}}const v=m.toJSON();Object.assign(d,v)}break;case"ECDSA":i=["verify"];case"ECDH":{if(d={kty:"EC",ext:s,key_ops:i},m.algorithm.algorithmId!=="1.2.840.10045.2.1")throw new Error(`Incorrect public key algorithm: ${m.algorithm.algorithmId}`);const v=m.toJSON();Object.assign(d,v)}break;case"RSA-OAEP":{if(d.kty="RSA",d.ext=s,d.key_ops=i,this.name.toLowerCase()==="safari")d.alg="RSA-OAEP";else{if(!p.hash)throw new Nr("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(p.hash.name.toUpperCase()){case"SHA-1":d.alg="RSA-OAEP";break;case"SHA-256":d.alg="RSA-OAEP-256";break;case"SHA-384":d.alg="RSA-OAEP-384";break;case"SHA-512":d.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${p.hash.name.toUpperCase()}`)}}const v=m.toJSON();Object.assign(d,v)}break;case"RSAES-PKCS1-V1_5":{d.kty="RSA",d.ext=s,d.key_ops=i,d.alg="PS1";const v=m.toJSON();Object.assign(d,v)}break;default:throw new Error(`Incorrect algorithm name: ${p.name.toUpperCase()}`)}}break;case"pkcs8":{const g=new Sf,m=ia(fn.toArrayBuffer(n));Ge.assert(m,"keyData");try{g.fromSchema(m.result)}catch{throw new Error("Incorrect keyData")}if(!g.parsedKey)throw new Error("Incorrect keyData");switch(p.name.toUpperCase()){case"RSA-PSS":switch((a=p.hash)===null||a===void 0?void 0:a.name.toUpperCase()){case"SHA-1":d.alg="PS1";break;case"SHA-256":d.alg="PS256";break;case"SHA-384":d.alg="PS384";break;case"SHA-512":d.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${(o=p.hash)===null||o===void 0?void 0:o.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(i=["sign"],d.kty="RSA",d.ext=s,d.key_ops=i,g.privateKeyAlgorithm.algorithmId!=="1.2.840.113549.1.1.1")throw new Error(`Incorrect private key algorithm: ${g.privateKeyAlgorithm.algorithmId}`);if(!("alg"in d))switch((c=p.hash)===null||c===void 0?void 0:c.name.toUpperCase()){case"SHA-1":d.alg="RS1";break;case"SHA-256":d.alg="RS256";break;case"SHA-384":d.alg="RS384";break;case"SHA-512":d.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${(l=p.hash)===null||l===void 0?void 0:l.name.toUpperCase()}`)}const v=g.toJSON();Object.assign(d,v)}break;case"ECDSA":i=["sign"];case"ECDH":{if(d={kty:"EC",ext:s,key_ops:i},g.privateKeyAlgorithm.algorithmId!=="1.2.840.10045.2.1")throw new Error(`Incorrect algorithm: ${g.privateKeyAlgorithm.algorithmId}`);const v=g.toJSON();Object.assign(d,v)}break;case"RSA-OAEP":{if(d.kty="RSA",d.ext=s,d.key_ops=i,this.name.toLowerCase()==="safari")d.alg="RSA-OAEP";else switch((u=p.hash)===null||u===void 0?void 0:u.name.toUpperCase()){case"SHA-1":d.alg="RSA-OAEP";break;case"SHA-256":d.alg="RSA-OAEP-256";break;case"SHA-384":d.alg="RSA-OAEP-384";break;case"SHA-512":d.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${(f=p.hash)===null||f===void 0?void 0:f.name.toUpperCase()}`)}const v=g.toJSON();Object.assign(d,v)}break;case"RSAES-PKCS1-V1_5":{i=["decrypt"],d.kty="RSA",d.ext=s,d.key_ops=i,d.alg="PS1";const v=g.toJSON();Object.assign(d,v)}break;default:throw new Error(`Incorrect algorithm name: ${p.name.toUpperCase()}`)}}break;case"jwk":d=n;break;default:throw new Error(`Incorrect format: ${e}`)}if(this.name.toLowerCase()==="safari")try{return this.subtle.importKey("jwk",A5(JSON.stringify(d)),r,s,i)}catch{return this.subtle.importKey("jwk",d,r,s,i)}return this.subtle.importKey("jwk",d,r,s,i)}async exportKey(e,n){let r=await this.subtle.exportKey("jwk",n);switch(this.name.toLowerCase()==="safari"&&r instanceof ArrayBuffer&&(r=JSON.parse(wM(r))),e.toLowerCase()){case"raw":return this.subtle.exportKey("raw",n);case"spki":{const s=new Vc;try{s.fromJSON(r)}catch{throw new Error("Incorrect key data")}return s.toSchema().toBER(!1)}case"pkcs8":{const s=new Sf;try{s.fromJSON(r)}catch{throw new Error("Incorrect key data")}return s.toSchema().toBER(!1)}case"jwk":return r;default:throw new Error(`Incorrect format: ${e}`)}}async convert(e,n,r,s,i,a){if(e.toLowerCase()===n.toLowerCase())return r;const o=await this.importKey(e,r,s,i,a);return this.exportKey(n,o)}getAlgorithmByOID(e,n=!1,r){switch(e){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}if(n)throw new Error(`Unsupported algorithm identifier ${r?`for ${r} `:ue}: ${e}`);return{}}getOIDByAlgorithm(e,n=!1,r){let s=ue;switch(e.name.toUpperCase()){case"RSAES-PKCS1-V1_5":s="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":s="1.2.840.113549.1.1.5";break;case"SHA-256":s="1.2.840.113549.1.1.11";break;case"SHA-384":s="1.2.840.113549.1.1.12";break;case"SHA-512":s="1.2.840.113549.1.1.13";break}break;case"RSA-PSS":s="1.2.840.113549.1.1.10";break;case"RSA-OAEP":s="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":s="1.2.840.10045.4.1";break;case"SHA-256":s="1.2.840.10045.4.3.2";break;case"SHA-384":s="1.2.840.10045.4.3.3";break;case"SHA-512":s="1.2.840.10045.4.3.4";break}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":s="1.3.133.16.840.63.0.2";break;case"SHA-256":s="1.3.132.1.11.1";break;case"SHA-384":s="1.3.132.1.11.2";break;case"SHA-512":s="1.3.132.1.11.3";break}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:s="2.16.840.1.101.3.4.1.2";break;case 192:s="2.16.840.1.101.3.4.1.22";break;case 256:s="2.16.840.1.101.3.4.1.42";break}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:s="2.16.840.1.101.3.4.1.6";break;case 192:s="2.16.840.1.101.3.4.1.26";break;case 256:s="2.16.840.1.101.3.4.1.46";break}break;case"AES-CFB":switch(e.length){case 128:s="2.16.840.1.101.3.4.1.4";break;case 192:s="2.16.840.1.101.3.4.1.24";break;case 256:s="2.16.840.1.101.3.4.1.44";break}break;case"AES-KW":switch(e.length){case 128:s="2.16.840.1.101.3.4.1.5";break;case 192:s="2.16.840.1.101.3.4.1.25";break;case 256:s="2.16.840.1.101.3.4.1.45";break}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":s="1.2.840.113549.2.7";break;case"SHA-256":s="1.2.840.113549.2.9";break;case"SHA-384":s="1.2.840.113549.2.10";break;case"SHA-512":s="1.2.840.113549.2.11";break}break;case"DH":s="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":s="1.3.14.3.2.26";break;case"SHA-256":s="2.16.840.1.101.3.4.2.1";break;case"SHA-384":s="2.16.840.1.101.3.4.2.2";break;case"SHA-512":s="2.16.840.1.101.3.4.2.3";break;case"CONCAT":break;case"HKDF":break;case"PBKDF2":s="1.2.840.113549.1.5.12";break;case"P-256":s="1.2.840.10045.3.1.7";break;case"P-384":s="1.3.132.0.34";break;case"P-521":s="1.3.132.0.35";break}if(!s&&n)throw new Error(`Unsupported algorithm ${r?`for ${r} `:ue}: ${e.name}`);return s}getAlgorithmParameters(e,n){let r={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(n.toLowerCase()){case"generatekey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(n.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":r={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(n.toLowerCase()){case"encrypt":case"decrypt":r={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":r={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":r={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(n.toLowerCase()){case"generatekey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":r={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(n.toLowerCase()){case"exportkey":case"importkey":case"generatekey":r={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":r={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(n.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(n.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(n.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(n.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":r={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(n.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(n.toLowerCase()){case"derivekey":r={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(n.toLowerCase()){case"derivekey":r={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}break}return r}getHashAlgorithm(e){let n=ue;switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":n="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":n="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":n="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":n="SHA-512";break;case"1.2.840.113549.1.1.10":try{const r=new Ma({schema:e.algorithmParams});if(r.hashAlgorithm){const s=this.getAlgorithmByOID(r.hashAlgorithm.algorithmId);if("name"in s)n=s.name;else return ue}else n="SHA-1"}catch{}break}return n}async encryptEncryptedContentInfo(e){Nr.assert(e,"password","contentEncryptionAlgorithm","hmacHashAlgorithm","iterationCount","contentToEncrypt","contentToEncrypt","contentType");const n=this.getOIDByAlgorithm(e.contentEncryptionAlgorithm,!0,"contentEncryptionAlgorithm"),r=this.getOIDByAlgorithm({name:"PBKDF2"},!0,"PBKDF2"),s=this.getOIDByAlgorithm({name:"HMAC",hash:{name:e.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),i=new ArrayBuffer(16),a=new Uint8Array(i);this.getRandomValues(a);const o=new ArrayBuffer(64),c=new Uint8Array(o);this.getRandomValues(c);const l=new Uint8Array(e.contentToEncrypt),u=new ec({salt:new ut({valueHex:o}),iterationCount:e.iterationCount,prf:new Ve({algorithmId:s,algorithmParams:new xi})}),f=new Uint8Array(e.password),d=await this.importKey("raw",f,"PBKDF2",!1,["deriveKey"]),p=await this.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:c,iterations:e.iterationCount},d,e.contentEncryptionAlgorithm,!1,["encrypt"]),g=await this.encrypt({name:e.contentEncryptionAlgorithm.name,iv:a},p,l),m=new Gx({keyDerivationFunc:new Ve({algorithmId:r,algorithmParams:u.toSchema()}),encryptionScheme:new Ve({algorithmId:n,algorithmParams:new ut({valueHex:i})})});return new Li({contentType:e.contentType,contentEncryptionAlgorithm:new Ve({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:m.toSchema()}),encryptedContent:new ut({valueHex:g})})}async decryptEncryptedContentInfo(e){if(Nr.assert(e,"password","encryptedContentInfo"),e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId!=="1.2.840.113549.1.5.13")throw new Error(`Unknown "contentEncryptionAlgorithm": ${e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);let n;try{n=new Gx({schema:e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "pbes2Parameters"')}let r;try{r=new ec({schema:n.keyDerivationFunc.algorithmParams})}catch{throw new Error('Incorrectly encoded "pbkdf2Params"')}const s=this.getAlgorithmByOID(n.encryptionScheme.algorithmId,!0),i=n.encryptionScheme.algorithmParams.valueBlock.valueHex,a=new Uint8Array(i),o=r.salt.valueBlock.valueHex,c=new Uint8Array(o),l=r.iterationCount;let u="SHA-1";r.prf&&(u=this.getAlgorithmByOID(r.prf.algorithmId,!0).hash.name);const f=await this.importKey("raw",e.password,"PBKDF2",!1,["deriveKey"]),d=await this.deriveKey({name:"PBKDF2",hash:{name:u},salt:c,iterations:l},f,s,!1,["decrypt"]),p=e.encryptedContentInfo.getEncryptedContent();return this.decrypt({name:s.name,iv:a},d,p)}async stampDataWithPassword(e){if(!(e instanceof Object))throw new Error('Parameters must have type "Object"');Nr.assert(e,"password","hashAlgorithm","iterationCount","salt","contentToStamp");let n;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":n=160;break;case"sha-256":n=256;break;case"sha-384":n=384;break;case"sha-512":n=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const r={name:"HMAC",length:n,hash:{name:e.hashAlgorithm}},s=await Cle(e.hashAlgorithm,n,e.password,e.salt,e.iterationCount),i=await this.importKey("raw",new Uint8Array(s),r,!1,["sign"]);return this.sign(r,i,new Uint8Array(e.contentToStamp))}async verifyDataStampedWithPassword(e){Nr.assert(e,"password","hashAlgorithm","salt","iterationCount","contentToVerify","signatureToVerify");let n=0;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":n=160;break;case"sha-256":n=256;break;case"sha-384":n=384;break;case"sha-512":n=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const r={name:"HMAC",length:n,hash:{name:e.hashAlgorithm}},s=await Cle(e.hashAlgorithm,n,e.password,e.salt,e.iterationCount),i=await this.importKey("raw",new Uint8Array(s),r,!1,["verify"]);return this.verify(r,i,new Uint8Array(e.signatureToVerify),new Uint8Array(e.contentToVerify))}async getSignatureParameters(e,n="SHA-1"){this.getOIDByAlgorithm({name:n},!0,"hashAlgorithm");const r=new Ve,s=this.getAlgorithmParameters(e.algorithm.name,"sign");if(!Object.keys(s.algorithm).length)throw new Error("Parameter 'algorithm' is empty");const i=s.algorithm;switch("hash"in e.algorithm&&e.algorithm.hash&&e.algorithm.hash.name?i.hash.name=e.algorithm.hash.name:i.hash.name=n,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":r.algorithmId=this.getOIDByAlgorithm(i,!0);break;case"RSA-PSS":{switch(i.hash.name.toUpperCase()){case"SHA-256":i.saltLength=32;break;case"SHA-384":i.saltLength=48;break;case"SHA-512":i.saltLength=64;break}const a={};if(i.hash.name.toUpperCase()!=="SHA-1"){const c=this.getOIDByAlgorithm({name:i.hash.name},!0,"hashAlgorithm");a.hashAlgorithm=new Ve({algorithmId:c,algorithmParams:new xi}),a.maskGenAlgorithm=new Ve({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:a.hashAlgorithm.toSchema()})}i.saltLength!==20&&(a.saltLength=i.saltLength);const o=new Ma(a);r.algorithmId="1.2.840.113549.1.1.10",r.algorithmParams=o.toSchema()}break;default:throw new Error(`Unsupported signature algorithm: ${e.algorithm.name}`)}return{signatureAlgorithm:r,parameters:s}}async signWithPrivateKey(e,n,r){const s=await this.sign(r.algorithm,n,e);return r.algorithm.name==="ECDSA"?Pct(s):s}fillPublicKeyParameters(e,n){const r={},s=this.getHashAlgorithm(n);if(s===ue)throw new Error(`Unsupported signature algorithm: ${n.algorithmId}`);let i;n.algorithmId==="1.2.840.113549.1.1.10"?i=n.algorithmId:i=e.algorithm.algorithmId;const a=this.getAlgorithmByOID(i,!0);if(r.algorithm=this.getAlgorithmParameters(a.name,"importKey"),"hash"in r.algorithm.algorithm&&(r.algorithm.algorithm.hash.name=s),a.name==="ECDSA"){const o=e.algorithm;if(!o.algorithmParams)throw new Error("Algorithm parameters for ECDSA public key are missed");const c=o.algorithmParams;if("idBlock"in o.algorithmParams&&!(c.idBlock.tagClass===1&&c.idBlock.tagNumber===6))throw new Error("Incorrect type for ECDSA public key parameters");const l=this.getAlgorithmByOID(c.valueBlock.toString(),!0);r.algorithm.algorithm.namedCurve=l.name}return r}async getPublicKey(e,n,r){r||(r=this.fillPublicKeyParameters(e,n));const s=e.toSchema().toBER(!1);return this.importKey("spki",s,r.algorithm.algorithm,!0,r.algorithm.usages)}async verifyWithPublicKey(e,n,r,s,i){let a;if(i){const l={};let u;s.algorithmId==="1.2.840.113549.1.1.10"?u=s.algorithmId:u=r.algorithm.algorithmId;const f=this.getAlgorithmByOID(u,!0);if(l.algorithm=this.getAlgorithmParameters(f.name,"importKey"),"hash"in l.algorithm.algorithm&&(l.algorithm.algorithm.hash.name=i),f.name==="ECDSA"){let d=!1;if("algorithmParams"in r.algorithm&&"idBlock"in r.algorithm.algorithmParams&&r.algorithm.algorithmParams.idBlock.tagClass===1&&r.algorithm.algorithmParams.idBlock.tagNumber===6&&(d=!0),d===!1)throw new Error("Incorrect type for ECDSA public key parameters");const p=this.getAlgorithmByOID(r.algorithm.algorithmParams.valueBlock.toString(),!0);l.algorithm.algorithm.namedCurve=p.name}a=await this.getPublicKey(r,null,l)}else{if(i=this.getHashAlgorithm(s),!i)throw new Error(`Unsupported signature algorithm: ${s.algorithmId}`);a=await this.getPublicKey(r,s)}const o=this.getAlgorithmParameters(a.algorithm.name,"verify");"hash"in o.algorithm&&(o.algorithm.hash.name=i);let c=n.valueBlock.valueHexView;if(a.algorithm.name==="ECDSA"){const l=Qw.find(a.algorithm.namedCurve);if(!l)throw new Error("Unsupported named curve in use");const u=ia(c);Ge.assert(u,"Signature value"),c=Oct(u.result,l.size)}if(a.algorithm.name==="RSA-PSS"){const l=new Ma({schema:s.algorithmParams});"saltLength"in l?o.algorithm.saltLength=l.saltLength:o.algorithm.saltLength=20;let u="SHA-1";"hashAlgorithm"in l&&(u=this.getAlgorithmByOID(l.hashAlgorithm.algorithmId,!0).name),o.algorithm.hash.name=u}return this.verify(o.algorithm,a,c,e)}}let G3e={name:"none",crypto:null};function Tle(t){return!!(t&&typeof t=="object"&&"crypto"in t)}function Nle(t,...e){let n=null;if(e.length<2)e.length?n=e[0]:n=typeof self<"u"&&self.crypto?new xM({name:"browser",crypto:self.crypto}):null;else{const r=e[0],s=e[1];Tle(s)?n=s:Tle(r)?n=r:"subtle"in r&&"getRandomValues"in r&&(n=new xM({crypto:r}))}if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){if(typeof global[process.pid]>"u")global[process.pid]={};else if(typeof global[process.pid]!="object")throw new Error(`Name global.${process.pid} already exists and it is not an object`);if(typeof global[process.pid].pkijs>"u")global[process.pid].pkijs={};else if(typeof global[process.pid].pkijs!="object")throw new Error(`Name global.${process.pid}.pkijs already exists and it is not an object`);global[process.pid].pkijs.engine={name:t,crypto:n}}else G3e={name:t,crypto:n}}function kct(){if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){let t;try{t=global[process.pid].pkijs.engine}catch{throw new Error("Please call 'setEngine' before call to 'getEngine'")}return t}return G3e}function zn(t=!1){const e=kct();if(!e.crypto&&t)throw new Error("Unable to create WebCrypto object");return e.crypto}function Pct(t){if(t.byteLength%2!==0)return Ci;const e=t.byteLength/2,n=new ArrayBuffer(e);new Uint8Array(n).set(new Uint8Array(t,0,e));const s=new $e({valueHex:n}),i=new ArrayBuffer(e);new Uint8Array(i).set(new Uint8Array(t,e,e));const o=new $e({valueHex:i});return new ve({value:[s.convertToDER(),o.convertToDER()]}).toBER(!1)}function Oct(t,e){if(!(t instanceof ve&&t.valueBlock.value.length===2&&t.valueBlock.value[0]instanceof $e&&t.valueBlock.value[1]instanceof $e))return Ci;const n=t.valueBlock.value[0].convertFromDER().valueBlock.valueHexView,r=t.valueBlock.value[1].convertFromDER().valueBlock.valueHexView,s=new Uint8Array(e*2);return s.set(n,e-n.byteLength),s.set(r,2*e-r.byteLength),s.buffer}async function Rct(t,e,n,r,s){switch(t.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:throw new es(`Unknown hash function: ${t}`)}if(es.assert(e,"zBuffer","ArrayBuffer"),e.byteLength===0)throw new es("'zBuffer' has zero length, error");if(es.assert(r,"SharedInfo","ArrayBuffer"),n>255)throw new es("Please set 'Counter' argument to value less or equal to 255");const i=new ArrayBuffer(4),a=new Uint8Array(i);a[0]=0,a[1]=0,a[2]=0,a[3]=n;let o=Ci;o=L3(o,e),o=L3(o,i),o=L3(o,r);const c=await s.digest({name:t},o);return{counter:n,result:c}}async function kle(t,e,n,r,s=zn(!0)){let i=0,a=1;switch(t.toUpperCase()){case"SHA-1":i=160;break;case"SHA-256":i=256;break;case"SHA-384":i=384;break;case"SHA-512":i=512;break;default:throw new es(`Unknown hash function: ${t}`)}if(es.assert(e,"Zbuffer","ArrayBuffer"),e.byteLength===0)throw new es("'Zbuffer' has zero length, error");es.assert(r,"SharedInfo","ArrayBuffer");const o=n/i;Math.floor(o)>0&&(a=Math.floor(o),o-a>0&&a++);const c=[];for(let d=1;d<=a;d++)c.push(await Rct(t,e,d,r,s));let l=Ci,u=1,f=!0;for(;f;){f=!1;for(const d of c)if(d.counter===u){l=L3(l,d.result),f=!0;break}u++}if(n>>=3,l.byteLength>n){const d=new ArrayBuffer(n),p=new Uint8Array(d),g=new Uint8Array(l);for(let m=0;m<n;m++)p[m]=g[m];return d}return l}const tH="version",nH="logID",rH="extensions",sH="timestamp",iH="hashAlgorithm",aH="signatureAlgorithm",oH="signature",Ple="none",Ole="md5",Rle="sha1",_le="sha224",Ble="sha256",Mle="sha384",Dle="sha512",Lle="anonymous",Ule="rsa",Fle="dsa",Vle="ecdsa";class Hh extends Ze{constructor(e={}){super(),this.version=Z(e,tH,Hh.defaultValues(tH)),this.logID=Z(e,nH,Hh.defaultValues(nH)),this.timestamp=Z(e,sH,Hh.defaultValues(sH)),this.extensions=Z(e,rH,Hh.defaultValues(rH)),this.hashAlgorithm=Z(e,iH,Hh.defaultValues(iH)),this.signatureAlgorithm=Z(e,aH,Hh.defaultValues(aH)),this.signature=Z(e,oH,Hh.defaultValues(oH)),"stream"in e&&e.stream&&this.fromStream(e.stream),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case tH:return 0;case nH:case rH:return Ci;case sH:return new Date(0);case iH:case aH:return ue;case oH:return Ci;default:return super.defaultValues(e)}}fromSchema(e){if(!(e instanceof vM))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");const n=new Yw({stream:new Xs({buffer:e.data})});this.fromStream(n)}fromStream(e){const n=e.getUint16();if(this.version=e.getBlock(1)[0],this.version===0){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0),this.timestamp=new Date(A2(new Uint8Array(e.getBlock(8)),8));const r=e.getUint16();switch(this.extensions=new Uint8Array(e.getBlock(r)).buffer.slice(0),e.getBlock(1)[0]){case 0:this.hashAlgorithm=Ple;break;case 1:this.hashAlgorithm=Ole;break;case 2:this.hashAlgorithm=Rle;break;case 3:this.hashAlgorithm=_le;break;case 4:this.hashAlgorithm=Ble;break;case 5:this.hashAlgorithm=Mle;break;case 6:this.hashAlgorithm=Dle;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm=Lle;break;case 1:this.signatureAlgorithm=Ule;break;case 2:this.signatureAlgorithm=Fle;break;case 3:this.signatureAlgorithm=Vle;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}const s=e.getUint16();if(this.signature=new Uint8Array(e.getBlock(s)).buffer.slice(0),n!==47+r+s)throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}toSchema(){const e=this.toStream();return new vM({data:e.stream.buffer})}toStream(){const e=new Yw;e.appendUint16(47+this.extensions.byteLength+this.signature.byteLength),e.appendChar(this.version),e.appendView(new Uint8Array(this.logID));const n=new ArrayBuffer(8),r=new Uint8Array(n),s=Wg(this.timestamp.valueOf(),8);r.set(new Uint8Array(s),8-s.byteLength),e.appendView(r),e.appendUint16(this.extensions.byteLength),this.extensions.byteLength&&e.appendView(new Uint8Array(this.extensions));let i;switch(this.hashAlgorithm.toLowerCase()){case Ple:i=0;break;case Ole:i=1;break;case Rle:i=2;break;case _le:i=3;break;case Ble:i=4;break;case Mle:i=5;break;case Dle:i=6;break;default:throw new Error(`Incorrect data for hashAlgorithm: ${this.hashAlgorithm}`)}e.appendChar(i);let a;switch(this.signatureAlgorithm.toLowerCase()){case Lle:a=0;break;case Ule:a=1;break;case Fle:a=2;break;case Vle:a=3;break;default:throw new Error(`Incorrect data for signatureAlgorithm: ${this.signatureAlgorithm}`)}return e.appendChar(a),e.appendUint16(this.signature.byteLength),e.appendView(new Uint8Array(this.signature)),e}toJSON(){return{version:this.version,logID:zj(this.logID),timestamp:this.timestamp,extensions:zj(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:zj(this.signature)}}async verify(e,n,r=0,s=zn(!0)){const i=QW(wM(this.logID));let a=null;const o=new Yw;for(const p of e)if(p.log_id===i){a=p.key;break}if(!a)throw new Error(`Public key not found for CT with logId: ${i}`);const c=A5(xk(a)),l=Vc.fromBER(c);o.appendChar(0),o.appendChar(0);const u=new ArrayBuffer(8),f=new Uint8Array(u),d=Wg(this.timestamp.valueOf(),8);return f.set(new Uint8Array(d),8-d.byteLength),o.appendView(f),o.appendUint16(r),r===0&&o.appendUint24(n.byteLength),o.appendView(new Uint8Array(n)),o.appendUint16(this.extensions.byteLength),this.extensions.byteLength!==0&&o.appendView(new Uint8Array(this.extensions)),s.verifyWithPublicKey(o.buffer.slice(0,o.length),new ut({valueHex:this.signature}),l,{algorithmId:ue},"SHA-256")}}Hh.CLASS_NAME="SignedCertificateTimestamp";const wO="timestamps";class fU extends Ze{constructor(e={}){super(),this.timestamps=Z(e,wO,fU.defaultValues(wO)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wO:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case wO:return n.length===0;default:return super.defaultValues(e)}}static schema(e={}){var n;const r=Z(e,"names",{});return(n=r.optional)!==null&&n!==void 0||(r.optional=!1),new ut({name:r.blockName||"SignedCertificateTimestampList",optional:r.optional})}fromSchema(e){if(!(e instanceof ut))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");const n=new Yw({stream:new Xs({buffer:e.valueBlock.valueHex})});if(n.getUint16()!==n.length)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");for(;n.length;)this.timestamps.push(new Hh({stream:n}))}toSchema(){const e=new Yw;let n=0;const r=[];for(const s of this.timestamps){const i=s.toStream();r.push(i),n+=i.stream.buffer.byteLength}e.appendUint16(n);for(const s of r)e.appendView(s.stream.view);return new ut({valueHex:e.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,e=>e.toJSON())}}}fU.CLASS_NAME="SignedCertificateTimestampList";const lC="attributes",_ct=[lC];class Pk extends Ze{constructor(e={}){super(),this.attributes=Z(e,lC,Pk.defaultValues(lC)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case lC:return[];default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Dn({name:n.attributes||ue,value:Fs.schema()})]})}fromSchema(e){st(e,_ct);const n=tt(e,e,Pk.schema({names:{attributes:lC}}));Ge.assertSchema(n,this.className),this.attributes=Array.from(n.result.attributes,r=>new Fs({schema:r}))}toSchema(){return new ve({value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){return{attributes:Array.from(this.attributes,e=>e.toJSON())}}}Pk.CLASS_NAME="SubjectDirectoryAttributes";class Qs{static getItems(){return this.types||(this.types={},Qs.register(P3e,"SubjectAltName",I5),Qs.register(O3e,"IssuerAltName",I5),Qs.register(mee,"AuthorityKeyIdentifier",Cw),Qs.register(pee,"BasicConstraints",Vx),Qs.register(Jot,"MicrosoftCaVersion",Ck),Qs.register(D3e,"CertificatePolicies",C5),Qs.register(Hot,"CertificatePoliciesMicrosoft",C5),Qs.register(zot,"MicrosoftCertTemplateV2",a3),Qs.register(M3e,"CRLDistributionPoints",T5),Qs.register(gee,"FreshestCRL",T5),Qs.register(qot,"ExtKeyUsage",Tk),Qs.register(_3e,"CertificateIssuer",sa),Qs.register(yee,"AuthorityInfoAccess",N5),Qs.register(Got,"SubjectInfoAccess",N5),Qs.register(R3e,"IssuingDistributionPoint",_a),Qs.register(B3e,"NameConstraints",F3),Qs.register(U3e,"PolicyConstraints",V3),Qs.register(L3e,"PolicyMappings",Nk),Qs.register(Uot,"PrivateKeyUsagePeriod",$3),Qs.register(Yot,"QCStatements",kk),Qs.register(Wot,"SignedCertificateTimestampList",fU),Qs.register(Mot,"SubjectDirectoryAttributes",Pk)),this.types}static fromBER(e,n){const r=ia(n);if(r.offset===-1)return null;const s=this.find(e);if(s)try{return new s.type({schema:r.result})}catch{const i=new s.type;return i.parsingError=`Incorrectly formatted value of extension ${s.name} (${e})`,i}return r.result}static find(e){return this.getItems()[e]||null}static register(e,n,r){this.getItems()[e]={name:n,type:r}}}const uC="extnID",hy="critical",fC="extnValue",bO="parsedValue",Bct=[uC,hy,fC];class ea extends Ze{get parsedValue(){if(this._parsedValue===void 0){const e=Qs.fromBER(this.extnID,this.extnValue.valueBlock.valueHexView);this._parsedValue=e}return this._parsedValue||void 0}set parsedValue(e){this._parsedValue=e}constructor(e={}){super(),this.extnID=Z(e,uC,ea.defaultValues(uC)),this.critical=Z(e,hy,ea.defaultValues(hy)),fC in e?this.extnValue=new ut({valueHex:e.extnValue}):this.extnValue=ea.defaultValues(fC),bO in e&&(this.parsedValue=Z(e,bO,ea.defaultValues(bO))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case uC:return ue;case hy:return!1;case fC:return new ut;case bO:return{};default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.extnID||ue}),new U0({name:n.critical||ue,optional:!0}),new ut({name:n.extnValue||ue})]})}fromSchema(e){st(e,Bct);const n=tt(e,e,ea.schema({names:{extnID:uC,critical:hy,extnValue:fC}}));Ge.assertSchema(n,this.className),this.extnID=n.result.extnID.valueBlock.toString(),hy in n.result&&(this.critical=n.result.critical.valueBlock.value),this.extnValue=n.result.extnValue}toSchema(){const e=[];return e.push(new Rt({value:this.extnID})),this.critical!==ea.defaultValues(hy)&&e.push(new U0({value:this.critical})),e.push(this.extnValue),new ve({value:e})}toJSON(){const e={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==ea.defaultValues(hy)&&(e.critical=this.critical),this.parsedValue&&this.parsedValue.toJSON&&(e.parsedValue=this.parsedValue.toJSON()),e}}ea.CLASS_NAME="Extension";const dC="extensions",Mct=[dC];class Ti extends Ze{constructor(e={}){super(),this.extensions=Z(e,dC,Ti.defaultValues(dC)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case dC:return[];default:return super.defaultValues(e)}}static schema(e={},n=!1){const r=Z(e,"names",{});return new ve({optional:n,name:r.blockName||ue,value:[new Dn({name:r.extensions||ue,value:ea.schema(r.extension||{})})]})}fromSchema(e){st(e,Mct);const n=tt(e,e,Ti.schema({names:{extensions:dC}}));Ge.assertSchema(n,this.className),this.extensions=Array.from(n.result.extensions,r=>new ea({schema:r}))}toSchema(){return new ve({value:Array.from(this.extensions,e=>e.toSchema())})}toJSON(){return{extensions:this.extensions.map(e=>e.toJSON())}}}Ti.CLASS_NAME="Extensions";const hC="issuer",pC="serialNumber",L1="issuerUID",Dct=[hC,pC,L1];class Bc extends Ze{constructor(e={}){super(),this.issuer=Z(e,hC,Bc.defaultValues(hC)),this.serialNumber=Z(e,pC,Bc.defaultValues(pC)),L1 in e&&(this.issuerUID=Z(e,L1,Bc.defaultValues(L1))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hC:return new sa;case pC:return new $e;case L1:return new ur;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[sa.schema(n.issuer||{}),new $e({name:n.serialNumber||ue}),new ur({optional:!0,name:n.issuerUID||ue})]})}fromSchema(e){st(e,Dct);const n=tt(e,e,Bc.schema({names:{issuer:{names:{blockName:hC}},serialNumber:pC,issuerUID:L1}}));Ge.assertSchema(n,this.className),this.issuer=new sa({schema:n.result.issuer}),this.serialNumber=n.result.serialNumber,L1 in n.result&&(this.issuerUID=n.result.issuerUID)}toSchema(){const e=new ve({value:[this.issuer.toSchema(),this.serialNumber]});return this.issuerUID&&e.valueBlock.value.push(this.issuerUID),e}toJSON(){const e={issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()};return this.issuerUID&&(e.issuerUID=this.issuerUID.toJSON()),e}}Bc.CLASS_NAME="IssuerSerial";const gC="version",U1="baseCertificateID",F1="subjectName",mC="issuer",yC="signature",wC="serialNumber",bC="attrCertValidityPeriod",vC="attributes",V1="issuerUniqueID",$1="extensions",Lct=[gC,U1,F1,mC,yC,wC,bC,vC,V1,$1];class Xo extends Ze{constructor(e={}){super(),this.version=Z(e,gC,Xo.defaultValues(gC)),U1 in e&&(this.baseCertificateID=Z(e,U1,Xo.defaultValues(U1))),F1 in e&&(this.subjectName=Z(e,F1,Xo.defaultValues(F1))),this.issuer=Z(e,mC,Xo.defaultValues(mC)),this.signature=Z(e,yC,Xo.defaultValues(yC)),this.serialNumber=Z(e,wC,Xo.defaultValues(wC)),this.attrCertValidityPeriod=Z(e,bC,Xo.defaultValues(bC)),this.attributes=Z(e,vC,Xo.defaultValues(vC)),V1 in e&&(this.issuerUniqueID=Z(e,V1,Xo.defaultValues(V1))),$1 in e&&(this.extensions=Z(e,$1,Xo.defaultValues($1))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gC:return 0;case U1:return new Bc;case F1:return new sa;case mC:return new sa;case yC:return new Ve;case wC:return new $e;case bC:return new Xd;case vC:return[];case V1:return new ur;case $1:return new Ti;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.version||ue}),new zs({value:[new Re({name:n.baseCertificateID||ue,idBlock:{tagClass:3,tagNumber:0},value:Bc.schema().valueBlock.value}),new Re({name:n.subjectName||ue,idBlock:{tagClass:3,tagNumber:1},value:sa.schema().valueBlock.value})]}),sa.schema({names:{blockName:n.issuer||ue}}),Ve.schema(n.signature||{}),new $e({name:n.serialNumber||ue}),Xd.schema(n.attrCertValidityPeriod||{}),new ve({name:n.attributes||ue,value:[new Dn({value:Fs.schema()})]}),new ur({optional:!0,name:n.issuerUniqueID||ue}),Ti.schema(n.extensions||{},!0)]})}fromSchema(e){st(e,Lct);const n=tt(e,e,Xo.schema({names:{version:gC,baseCertificateID:U1,subjectName:F1,issuer:mC,signature:{names:{blockName:yC}},serialNumber:wC,attrCertValidityPeriod:{names:{blockName:bC}},attributes:vC,issuerUniqueID:V1,extensions:{names:{blockName:$1}}}}));Ge.assertSchema(n,this.className),this.version=n.result.version.valueBlock.valueDec,U1 in n.result&&(this.baseCertificateID=new Bc({schema:new ve({value:n.result.baseCertificateID.valueBlock.value})})),F1 in n.result&&(this.subjectName=new sa({schema:new ve({value:n.result.subjectName.valueBlock.value})})),this.issuer=n.result.issuer,this.signature=new Ve({schema:n.result.signature}),this.serialNumber=n.result.serialNumber,this.attrCertValidityPeriod=new Xd({schema:n.result.attrCertValidityPeriod}),this.attributes=Array.from(n.result.attributes.valueBlock.value,r=>new Fs({schema:r})),V1 in n.result&&(this.issuerUniqueID=n.result.issuerUniqueID),$1 in n.result&&(this.extensions=new Ti({schema:n.result.extensions}))}toSchema(){const e=new ve({value:[new $e({value:this.version})]});return this.baseCertificateID&&e.valueBlock.value.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.subjectName&&e.valueBlock.value.push(new Re({idBlock:{tagClass:3,tagNumber:1},value:this.subjectName.toSchema().valueBlock.value})),e.valueBlock.value.push(this.issuer.toSchema()),e.valueBlock.value.push(this.signature.toSchema()),e.valueBlock.value.push(this.serialNumber),e.valueBlock.value.push(this.attrCertValidityPeriod.toSchema()),e.valueBlock.value.push(new ve({value:Array.from(this.attributes,n=>n.toSchema())})),this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.subjectName&&(e.subjectName=this.subjectName.toJSON()),e.issuer=this.issuer.toJSON(),e.signature=this.signature.toJSON(),e.serialNumber=this.serialNumber.toJSON(),e.attrCertValidityPeriod=this.attrCertValidityPeriod.toJSON(),e.attributes=Array.from(this.attributes,n=>n.toJSON()),this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}Xo.CLASS_NAME="AttributeCertificateInfoV1";const xC="acinfo",EC="signatureAlgorithm",AC="signatureValue",Uct=[xC,AC,EC];class vg extends Ze{constructor(e={}){super(),this.acinfo=Z(e,xC,vg.defaultValues(xC)),this.signatureAlgorithm=Z(e,EC,vg.defaultValues(EC)),this.signatureValue=Z(e,AC,vg.defaultValues(AC)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xC:return new Xo;case EC:return new Ve;case AC:return new ur;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[Xo.schema(n.acinfo||{}),Ve.schema(n.signatureAlgorithm||{}),new ur({name:n.signatureValue||ue})]})}fromSchema(e){st(e,Uct);const n=tt(e,e,vg.schema({names:{acinfo:{names:{blockName:xC}},signatureAlgorithm:{names:{blockName:EC}},signatureValue:AC}}));Ge.assertSchema(n,this.className),this.acinfo=new Xo({schema:n.result.acinfo}),this.signatureAlgorithm=new Ve({schema:n.result.signatureAlgorithm}),this.signatureValue=n.result.signatureValue}toSchema(){return new ve({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}vg.CLASS_NAME="AttributeCertificateV1";const SC="digestedObjectType",j1="otherObjectTypeID",IC="digestAlgorithm",CC="objectDigest",Fct=[SC,j1,IC,CC];class hu extends Ze{constructor(e={}){super(),this.digestedObjectType=Z(e,SC,hu.defaultValues(SC)),j1 in e&&(this.otherObjectTypeID=Z(e,j1,hu.defaultValues(j1))),this.digestAlgorithm=Z(e,IC,hu.defaultValues(IC)),this.objectDigest=Z(e,CC,hu.defaultValues(CC)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case SC:return new S2;case j1:return new Rt;case IC:return new Ve;case CC:return new ur;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new S2({name:n.digestedObjectType||ue}),new Rt({optional:!0,name:n.otherObjectTypeID||ue}),Ve.schema(n.digestAlgorithm||{}),new ur({name:n.objectDigest||ue})]})}fromSchema(e){st(e,Fct);const n=tt(e,e,hu.schema({names:{digestedObjectType:SC,otherObjectTypeID:j1,digestAlgorithm:{names:{blockName:IC}},objectDigest:CC}}));Ge.assertSchema(n,this.className),this.digestedObjectType=n.result.digestedObjectType,j1 in n.result&&(this.otherObjectTypeID=n.result.otherObjectTypeID),this.digestAlgorithm=new Ve({schema:n.result.digestAlgorithm}),this.objectDigest=n.result.objectDigest}toSchema(){const e=new ve({value:[this.digestedObjectType]});return this.otherObjectTypeID&&e.valueBlock.value.push(this.otherObjectTypeID),e.valueBlock.value.push(this.digestAlgorithm.toSchema()),e.valueBlock.value.push(this.objectDigest),e}toJSON(){const e={digestedObjectType:this.digestedObjectType.toJSON(),digestAlgorithm:this.digestAlgorithm.toJSON(),objectDigest:this.objectDigest.toJSON()};return this.otherObjectTypeID&&(e.otherObjectTypeID=this.otherObjectTypeID.toJSON()),e}}hu.CLASS_NAME="ObjectDigestInfo";const H1="issuerName",q1="baseCertificateID",K1="objectDigestInfo",Vct=[H1,q1,K1];class Nw extends Ze{constructor(e={}){super(),H1 in e&&(this.issuerName=Z(e,H1,Nw.defaultValues(H1))),q1 in e&&(this.baseCertificateID=Z(e,q1,Nw.defaultValues(q1))),K1 in e&&(this.objectDigestInfo=Z(e,K1,Nw.defaultValues(K1))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case H1:return new sa;case q1:return new Bc;case K1:return new hu;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[sa.schema({names:{blockName:n.issuerName}},!0),new Re({optional:!0,name:n.baseCertificateID||ue,idBlock:{tagClass:3,tagNumber:0},value:Bc.schema().valueBlock.value}),new Re({optional:!0,name:n.objectDigestInfo||ue,idBlock:{tagClass:3,tagNumber:1},value:hu.schema().valueBlock.value})]})}fromSchema(e){st(e,Vct);const n=tt(e,e,Nw.schema({names:{issuerName:H1,baseCertificateID:q1,objectDigestInfo:K1}}));Ge.assertSchema(n,this.className),H1 in n.result&&(this.issuerName=new sa({schema:n.result.issuerName})),q1 in n.result&&(this.baseCertificateID=new Bc({schema:new ve({value:n.result.baseCertificateID.valueBlock.value})})),K1 in n.result&&(this.objectDigestInfo=new hu({schema:new ve({value:n.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new ve;return this.issuerName&&e.valueBlock.value.push(this.issuerName.toSchema()),this.baseCertificateID&&e.valueBlock.value.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new Re({idBlock:{tagClass:3,tagNumber:1},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.issuerName&&(e.issuerName=this.issuerName.toJSON()),this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}Nw.CLASS_NAME="V2Form";const G1="baseCertificateID",W1="entityName",z1="objectDigestInfo",$ct=[G1,W1,z1];class xg extends Ze{constructor(e={}){super(),G1 in e&&(this.baseCertificateID=Z(e,G1,xg.defaultValues(G1))),W1 in e&&(this.entityName=Z(e,W1,xg.defaultValues(W1))),z1 in e&&(this.objectDigestInfo=Z(e,z1,xg.defaultValues(z1))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case G1:return new Bc;case W1:return new sa;case z1:return new hu;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Re({optional:!0,name:n.baseCertificateID||ue,idBlock:{tagClass:3,tagNumber:0},value:Bc.schema().valueBlock.value}),new Re({optional:!0,name:n.entityName||ue,idBlock:{tagClass:3,tagNumber:1},value:sa.schema().valueBlock.value}),new Re({optional:!0,name:n.objectDigestInfo||ue,idBlock:{tagClass:3,tagNumber:2},value:hu.schema().valueBlock.value})]})}fromSchema(e){st(e,$ct);const n=tt(e,e,xg.schema({names:{baseCertificateID:G1,entityName:W1,objectDigestInfo:z1}}));Ge.assertSchema(n,this.className),G1 in n.result&&(this.baseCertificateID=new Bc({schema:new ve({value:n.result.baseCertificateID.valueBlock.value})})),W1 in n.result&&(this.entityName=new sa({schema:new ve({value:n.result.entityName.valueBlock.value})})),z1 in n.result&&(this.objectDigestInfo=new hu({schema:new ve({value:n.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new ve;return this.baseCertificateID&&e.valueBlock.value.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.entityName&&e.valueBlock.value.push(new Re({idBlock:{tagClass:3,tagNumber:1},value:this.entityName.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new Re({idBlock:{tagClass:3,tagNumber:2},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.entityName&&(e.entityName=this.entityName.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}xg.CLASS_NAME="Holder";const TC="version",NC="holder",kC="issuer",PC="signature",OC="serialNumber",RC="attrCertValidityPeriod",_C="attributes",J1="issuerUniqueID",Y1="extensions",jct=[TC,NC,kC,PC,OC,RC,_C,J1,Y1];class Sc extends Ze{constructor(e={}){super(),this.version=Z(e,TC,Sc.defaultValues(TC)),this.holder=Z(e,NC,Sc.defaultValues(NC)),this.issuer=Z(e,kC,Sc.defaultValues(kC)),this.signature=Z(e,PC,Sc.defaultValues(PC)),this.serialNumber=Z(e,OC,Sc.defaultValues(OC)),this.attrCertValidityPeriod=Z(e,RC,Sc.defaultValues(RC)),this.attributes=Z(e,_C,Sc.defaultValues(_C)),J1 in e&&(this.issuerUniqueID=Z(e,J1,Sc.defaultValues(J1))),Y1 in e&&(this.extensions=Z(e,Y1,Sc.defaultValues(Y1))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case TC:return 1;case NC:return new xg;case kC:return{};case PC:return new Ve;case OC:return new $e;case RC:return new Xd;case _C:return[];case J1:return new ur;case Y1:return new Ti;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.version||ue}),xg.schema(n.holder||{}),new zs({value:[sa.schema({names:{blockName:n.issuer||ue}}),new Re({name:n.issuer||ue,idBlock:{tagClass:3,tagNumber:0},value:Nw.schema().valueBlock.value})]}),Ve.schema(n.signature||{}),new $e({name:n.serialNumber||ue}),Xd.schema(n.attrCertValidityPeriod||{}),new ve({name:n.attributes||ue,value:[new Dn({value:Fs.schema()})]}),new ur({optional:!0,name:n.issuerUniqueID||ue}),Ti.schema(n.extensions||{},!0)]})}fromSchema(e){st(e,jct);const n=tt(e,e,Sc.schema({names:{version:TC,holder:{names:{blockName:NC}},issuer:kC,signature:{names:{blockName:PC}},serialNumber:OC,attrCertValidityPeriod:{names:{blockName:RC}},attributes:_C,issuerUniqueID:J1,extensions:{names:{blockName:Y1}}}}));switch(Ge.assertSchema(n,this.className),this.version=n.result.version.valueBlock.valueDec,this.holder=new xg({schema:n.result.holder}),n.result.issuer.idBlock.tagClass){case 3:this.issuer=new Nw({schema:new ve({value:n.result.issuer.valueBlock.value})});break;case 1:default:throw new Error("Incorrect value for 'issuer' in AttributeCertificateInfoV2")}this.signature=new Ve({schema:n.result.signature}),this.serialNumber=n.result.serialNumber,this.attrCertValidityPeriod=new Xd({schema:n.result.attrCertValidityPeriod}),this.attributes=Array.from(n.result.attributes.valueBlock.value,r=>new Fs({schema:r})),J1 in n.result&&(this.issuerUniqueID=n.result.issuerUniqueID),Y1 in n.result&&(this.extensions=new Ti({schema:n.result.extensions}))}toSchema(){const e=new ve({value:[new $e({value:this.version}),this.holder.toSchema(),new Re({idBlock:{tagClass:3,tagNumber:0},value:this.issuer.toSchema().valueBlock.value}),this.signature.toSchema(),this.serialNumber,this.attrCertValidityPeriod.toSchema(),new ve({value:Array.from(this.attributes,n=>n.toSchema())})]});return this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version,holder:this.holder.toJSON(),issuer:this.issuer.toJSON(),signature:this.signature.toJSON(),serialNumber:this.serialNumber.toJSON(),attrCertValidityPeriod:this.attrCertValidityPeriod.toJSON(),attributes:Array.from(this.attributes,n=>n.toJSON())};return this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}Sc.CLASS_NAME="AttributeCertificateInfoV2";const BC="acinfo",MC="signatureAlgorithm",DC="signatureValue",Hct=[BC,MC,DC];class yu extends Ze{constructor(e={}){super(),this.acinfo=Z(e,BC,yu.defaultValues(BC)),this.signatureAlgorithm=Z(e,MC,yu.defaultValues(MC)),this.signatureValue=Z(e,DC,yu.defaultValues(DC)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case BC:return new Sc;case MC:return new Ve;case DC:return new ur;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[Sc.schema(n.acinfo||{}),Ve.schema(n.signatureAlgorithm||{}),new ur({name:n.signatureValue||ue})]})}fromSchema(e){st(e,Hct);const n=tt(e,e,yu.schema({names:{acinfo:{names:{blockName:BC}},signatureAlgorithm:{names:{blockName:MC}},signatureValue:DC}}));Ge.assertSchema(n,this.className),this.acinfo=new Sc({schema:n.result.acinfo}),this.signatureAlgorithm=new Ve({schema:n.result.signatureAlgorithm}),this.signatureValue=n.result.signatureValue}toSchema(){return new ve({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}yu.CLASS_NAME="AttributeCertificateV2";const Q1="contentType",vA="content",qct=[Q1,vA];class Is extends Ze{constructor(e={}){super(),this.contentType=Z(e,Q1,Is.defaultValues(Q1)),this.content=Z(e,vA,Is.defaultValues(vA)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Q1:return ue;case vA:return new xn;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case Q1:return typeof n=="string"&&n===this.defaultValues(Q1);case vA:return n instanceof xn;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return"optional"in n||(n.optional=!1),new ve({name:n.blockName||"ContentInfo",optional:n.optional,value:[new Rt({name:n.contentType||Q1}),new Re({idBlock:{tagClass:3,tagNumber:0},value:[new xn({name:n.content||vA})]})]})}fromSchema(e){st(e,qct);const n=tt(e,e,Is.schema());Ge.assertSchema(n,this.className),this.contentType=n.result.contentType.valueBlock.toString(),this.content=n.result.content}toSchema(){return new ve({value:[new Rt({value:this.contentType}),new Re({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}toJSON(){const e={contentType:this.contentType};return this.content instanceof xn||(e.content=this.content.toJSON()),e}}Is.CLASS_NAME="ContentInfo";Is.DATA=wee;Is.SIGNED_DATA=F3e;Is.ENVELOPED_DATA=V3e;Is.ENCRYPTED_DATA=$3e;const cH="type",lH="value",nz="utcTimeName",rz="generalTimeName",Kct=[nz,rz];var $le;(function(t){t[t.UTCTime=0]="UTCTime",t[t.GeneralizedTime=1]="GeneralizedTime",t[t.empty=2]="empty"})($le||($le={}));class Ki extends Ze{constructor(e={}){super(),this.type=Z(e,cH,Ki.defaultValues(cH)),this.value=Z(e,lH,Ki.defaultValues(lH)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case cH:return 0;case lH:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={},n=!1){const r=Z(e,"names",{});return new zs({optional:n,value:[new S5({name:r.utcTimeName||ue}),new Gs({name:r.generalTimeName||ue})]})}fromSchema(e){st(e,Kct);const n=tt(e,e,Ki.schema({names:{utcTimeName:nz,generalTimeName:rz}}));Ge.assertSchema(n,this.className),nz in n.result&&(this.type=0,this.value=n.result.utcTimeName.toDate()),rz in n.result&&(this.type=1,this.value=n.result.generalTimeName.toDate())}toSchema(){return this.type===0?new S5({valueDate:this.value}):this.type===1?new Gs({valueDate:this.value}):{}}toJSON(){return{type:this.type,value:this.value}}}Ki.CLASS_NAME="Time";const uH="tbs",py="version",zR="serialNumber",JR="signature",YR="issuer",QR="notBefore",ZR="notAfter",XR="subject",e_="subjectPublicKeyInfo",LC="issuerUniqueID",UC="subjectUniqueID",FC="extensions",VC="signatureAlgorithm",$C="signatureValue",_u="tbsCertificate",EM=`${_u}.${py}`,bee=`${_u}.${zR}`,vee=`${_u}.${JR}`,xee=`${_u}.${YR}`,AM=`${_u}.${QR}`,SM=`${_u}.${ZR}`,Eee=`${_u}.${XR}`,Aee=`${_u}.${e_}`,IM=`${_u}.${LC}`,CM=`${_u}.${UC}`,nN=`${_u}.${FC}`,Gct=[_u,EM,bee,vee,xee,AM,SM,Eee,Aee,IM,CM,nN,VC,$C];function Wct(t={}){const e=Z(t,"names",{});return new ve({name:e.blockName||_u,value:[new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new $e({name:e.tbsCertificateVersion||EM})]}),new $e({name:e.tbsCertificateSerialNumber||bee}),Ve.schema(e.signature||{names:{blockName:vee}}),ns.schema(e.issuer||{names:{blockName:xee}}),new ve({name:e.tbsCertificateValidity||"tbsCertificate.validity",value:[Ki.schema(e.notBefore||{names:{utcTimeName:AM,generalTimeName:AM}}),Ki.schema(e.notAfter||{names:{utcTimeName:SM,generalTimeName:SM}})]}),ns.schema(e.subject||{names:{blockName:Eee}}),Vc.schema(e.subjectPublicKeyInfo||{names:{blockName:Aee}}),new gn({name:e.tbsCertificateIssuerUniqueID||IM,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new gn({name:e.tbsCertificateSubjectUniqueID||CM,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[Ti.schema(e.extensions||{names:{blockName:nN}})]})]})}class _r extends Ze{get tbs(){return fn.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(Z(e,uH,_r.defaultValues(uH))),this.version=Z(e,py,_r.defaultValues(py)),this.serialNumber=Z(e,zR,_r.defaultValues(zR)),this.signature=Z(e,JR,_r.defaultValues(JR)),this.issuer=Z(e,YR,_r.defaultValues(YR)),this.notBefore=Z(e,QR,_r.defaultValues(QR)),this.notAfter=Z(e,ZR,_r.defaultValues(ZR)),this.subject=Z(e,XR,_r.defaultValues(XR)),this.subjectPublicKeyInfo=Z(e,e_,_r.defaultValues(e_)),LC in e&&(this.issuerUniqueID=Z(e,LC,_r.defaultValues(LC))),UC in e&&(this.subjectUniqueID=Z(e,UC,_r.defaultValues(UC))),FC in e&&(this.extensions=Z(e,FC,_r.defaultValues(FC))),this.signatureAlgorithm=Z(e,VC,_r.defaultValues(VC)),this.signatureValue=Z(e,$C,_r.defaultValues($C)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case uH:return Ci;case py:return 0;case zR:return new $e;case JR:return new Ve;case YR:return new ns;case QR:return new Ki;case ZR:return new Ki;case XR:return new ns;case e_:return new Vc;case LC:return Ci;case UC:return Ci;case FC:return[];case VC:return new Ve;case $C:return new ur;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[Wct(n.tbsCertificate),Ve.schema(n.signatureAlgorithm||{names:{blockName:VC}}),new ur({name:n.signatureValue||$C})]})}fromSchema(e){st(e,Gct);const n=tt(e,e,_r.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:nN}}}}}}));Ge.assertSchema(n,this.className),this.tbsView=n.result.tbsCertificate.valueBeforeDecodeView,EM in n.result&&(this.version=n.result[EM].valueBlock.valueDec),this.serialNumber=n.result[bee],this.signature=new Ve({schema:n.result[vee]}),this.issuer=new ns({schema:n.result[xee]}),this.notBefore=new Ki({schema:n.result[AM]}),this.notAfter=new Ki({schema:n.result[SM]}),this.subject=new ns({schema:n.result[Eee]}),this.subjectPublicKeyInfo=new Vc({schema:n.result[Aee]}),IM in n.result&&(this.issuerUniqueID=n.result[IM].valueBlock.valueHex),CM in n.result&&(this.subjectUniqueID=n.result[CM].valueBlock.valueHex),nN in n.result&&(this.extensions=Array.from(n.result[nN],r=>new ea({schema:r}))),this.signatureAlgorithm=new Ve({schema:n.result.signatureAlgorithm}),this.signatureValue=n.result.signatureValue}encodeTBS(){const e=[];return py in this&&this.version!==_r.defaultValues(py)&&e.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new $e({value:this.version})]})),e.push(this.serialNumber),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(new ve({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),e.push(this.subject.toSchema()),e.push(this.subjectPublicKeyInfo.toSchema()),this.issuerUniqueID&&e.push(new gn({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),this.subjectUniqueID&&e.push(new gn({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),this.extensions&&e.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new ve({value:Array.from(this.extensions,n=>n.toSchema())})]})),new ve({value:e})}toSchema(e=!1){let n;if(e===!1){if(!this.tbsView.byteLength)return _r.schema().value[0];const r=ia(this.tbsView);Ge.assert(r,"TBS Certificate"),n=r.result}else n=this.encodeTBS();return new ve({value:[n,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:pn.ToHex(this.tbsView),version:this.version,serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return py in this&&this.version!==_r.defaultValues(py)&&(e.version=this.version),this.issuerUniqueID&&(e.issuerUniqueID=pn.ToHex(this.issuerUniqueID)),this.subjectUniqueID&&(e.subjectUniqueID=pn.ToHex(this.subjectUniqueID)),this.extensions&&(e.extensions=Array.from(this.extensions,n=>n.toJSON())),e}async getPublicKey(e,n=zn(!0)){return n.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}async getKeyHash(e="SHA-1",n=zn(!0)){return n.digest({name:e},this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView)}async sign(e,n="SHA-1",r=zn(!0)){if(!e)throw new Error("Need to provide a private key for signing");const s=await r.getSignatureParameters(e,n),i=s.parameters;this.signature=s.signatureAlgorithm,this.signatureAlgorithm=s.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const a=await r.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new ur({valueHex:a})}async verify(e,n=zn(!0)){let r;if(e?r=e.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(r=this.subjectPublicKeyInfo),!(r instanceof Vc))throw new Error("Please provide issuer certificate as a parameter");return n.verifyWithPublicKey(this.tbsView,this.signatureValue,r,this.signatureAlgorithm)}}_r.CLASS_NAME="Certificate";function W3e(t,e=null){if(e&&t.issuer.isEqual(e.issuer)&&t.serialNumber.isEqual(e.serialNumber))return null;let n=!1;if(t.extensions){for(const r of t.extensions)if(r.extnID===pee&&r.parsedValue instanceof Vx&&r.parsedValue.cA){n=!0;break}}return n?t:null}const xA="certId",EA="certValue",HE="parsedValue",zct=[xA,EA];class Yv extends Ze{constructor(e={}){super(),this.certId=Z(e,xA,Yv.defaultValues(xA)),this.certValue=Z(e,EA,Yv.defaultValues(EA)),HE in e&&(this.parsedValue=Z(e,HE,Yv.defaultValues(HE))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xA:return ue;case EA:return new xn;case HE:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case xA:return n===ue;case EA:return n instanceof xn;case HE:return n instanceof Object&&Object.keys(n).length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.id||"id"}),new Re({idBlock:{tagClass:3,tagNumber:0},value:[new xn({name:n.value||"value"})]})]})}fromSchema(e){st(e,zct);const n=tt(e,e,Yv.schema({names:{id:xA,value:EA}}));Ge.assertSchema(n,this.className),this.certId=n.result.certId.valueBlock.toString(),this.certValue=n.result.certValue;const r=this.certValue.valueBlock.valueHexView;switch(this.certId){case Ele:try{this.parsedValue=_r.fromBER(r)}catch{yu.fromBER(r)}break;case Ale:this.parsedValue=yu.fromBER(r);break;case Zot:default:throw new Error(`Incorrect CERT_ID value in CertBag: ${this.certId}`)}}toSchema(){return HE in this&&("acinfo"in this.parsedValue?this.certId=Ale:this.certId=Ele,this.certValue=new ut({valueHex:this.parsedValue.toSchema().toBER(!1)})),new ve({value:[new Rt({value:this.certId}),new Re({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}toJSON(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}Yv.CLASS_NAME="CertBag";const jC="userCertificate",AA="revocationDate",Z1="crlEntryExtensions",Jct=[jC,AA,Z1];class Qv extends Ze{constructor(e={}){super(),this.userCertificate=Z(e,jC,Qv.defaultValues(jC)),this.revocationDate=Z(e,AA,Qv.defaultValues(AA)),Z1 in e&&(this.crlEntryExtensions=Z(e,Z1,Qv.defaultValues(Z1))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case jC:return new $e;case AA:return new Ki;case Z1:return new Ti;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.userCertificate||jC}),Ki.schema({names:{utcTimeName:n.revocationDate||AA,generalTimeName:n.revocationDate||AA}}),Ti.schema({names:{blockName:n.crlEntryExtensions||Z1}},!0)]})}fromSchema(e){st(e,Jct);const n=tt(e,e,Qv.schema());Ge.assertSchema(n,this.className),this.userCertificate=n.result.userCertificate,this.revocationDate=new Ki({schema:n.result.revocationDate}),Z1 in n.result&&(this.crlEntryExtensions=new Ti({schema:n.result.crlEntryExtensions}))}toSchema(){const e=[this.userCertificate,this.revocationDate.toSchema()];return this.crlEntryExtensions&&e.push(this.crlEntryExtensions.toSchema()),new ve({value:e})}toJSON(){const e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON()};return this.crlEntryExtensions&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}Qv.CLASS_NAME="RevokedCertificate";const fH="tbs",D8="version",dH="signature",hH="issuer",pH="thisUpdate",vO="nextUpdate",xO="revokedCertificates",EO="crlExtensions",HC="signatureAlgorithm",qC="signatureValue",im="tbsCertList",TM=`${im}.version`,See=`${im}.signature`,Iee=`${im}.issuer`,NM=`${im}.thisUpdate`,Ok=`${im}.nextUpdate`,kM=`${im}.revokedCertificates`,PM=`${im}.extensions`,Yct=[im,TM,See,Iee,NM,Ok,kM,PM,HC,qC];function Qct(t={}){const e=Z(t,"names",{});return new ve({name:e.blockName||im,value:[new $e({optional:!0,name:e.tbsCertListVersion||TM,value:2}),Ve.schema(e.signature||{names:{blockName:See}}),ns.schema(e.issuer||{names:{blockName:Iee}}),Ki.schema(e.tbsCertListThisUpdate||{names:{utcTimeName:NM,generalTimeName:NM}}),Ki.schema(e.tbsCertListNextUpdate||{names:{utcTimeName:Ok,generalTimeName:Ok}},!0),new ve({optional:!0,value:[new Dn({name:e.tbsCertListRevokedCertificates||kM,value:new ve({value:[new $e,Ki.schema(),Ti.schema({},!0)]})})]}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Ti.schema(e.crlExtensions||{names:{blockName:PM}})]})]})}const Zct=[mee,O3e,Fot,Vot,R3e,gee,yee,$ot,jot,_3e];class Qi extends Ze{get tbs(){return fn.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(Z(e,fH,Qi.defaultValues(fH))),this.version=Z(e,D8,Qi.defaultValues(D8)),this.signature=Z(e,dH,Qi.defaultValues(dH)),this.issuer=Z(e,hH,Qi.defaultValues(hH)),this.thisUpdate=Z(e,pH,Qi.defaultValues(pH)),vO in e&&(this.nextUpdate=Z(e,vO,Qi.defaultValues(vO))),xO in e&&(this.revokedCertificates=Z(e,xO,Qi.defaultValues(xO))),EO in e&&(this.crlExtensions=Z(e,EO,Qi.defaultValues(EO))),this.signatureAlgorithm=Z(e,HC,Qi.defaultValues(HC)),this.signatureValue=Z(e,qC,Qi.defaultValues(qC)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case fH:return Ci;case D8:return 0;case dH:return new Ve;case hH:return new ns;case pH:return new Ki;case vO:return new Ki;case xO:return[];case EO:return new Ti;case HC:return new Ve;case qC:return new ur;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||"CertificateList",value:[Qct(e),Ve.schema(n.signatureAlgorithm||{names:{blockName:HC}}),new ur({name:n.signatureValue||qC})]})}fromSchema(e){st(e,Yct);const n=tt(e,e,Qi.schema());Ge.assertSchema(n,this.className),this.tbsView=n.result.tbsCertList.valueBeforeDecodeView,TM in n.result&&(this.version=n.result[TM].valueBlock.valueDec),this.signature=new Ve({schema:n.result[See]}),this.issuer=new ns({schema:n.result[Iee]}),this.thisUpdate=new Ki({schema:n.result[NM]}),Ok in n.result&&(this.nextUpdate=new Ki({schema:n.result[Ok]})),kM in n.result&&(this.revokedCertificates=Array.from(n.result[kM],r=>new Qv({schema:r}))),PM in n.result&&(this.crlExtensions=new Ti({schema:n.result[PM]})),this.signatureAlgorithm=new Ve({schema:n.result.signatureAlgorithm}),this.signatureValue=n.result.signatureValue}encodeTBS(){const e=[];return this.version!==Qi.defaultValues(D8)&&e.push(new $e({value:this.version})),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(this.thisUpdate.toSchema()),this.nextUpdate&&e.push(this.nextUpdate.toSchema()),this.revokedCertificates&&e.push(new ve({value:Array.from(this.revokedCertificates,n=>n.toSchema())})),this.crlExtensions&&e.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new ve({value:e})}toSchema(e=!1){let n;if(e)n=this.encodeTBS();else{if(!this.tbsView.byteLength)return Qi.schema();const r=ia(this.tbsView);Ge.assert(r,"TBS Certificate Revocation List"),n=r.result}return new ve({value:[n,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:pn.ToHex(this.tbsView),version:this.version,signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==Qi.defaultValues(D8)&&(e.version=this.version),this.nextUpdate&&(e.nextUpdate=this.nextUpdate.toJSON()),this.revokedCertificates&&(e.revokedCertificates=Array.from(this.revokedCertificates,n=>n.toJSON())),this.crlExtensions&&(e.crlExtensions=this.crlExtensions.toJSON()),e}isCertificateRevoked(e){if(!this.issuer.isEqual(e.issuer)||!this.revokedCertificates)return!1;for(const n of this.revokedCertificates)if(n.userCertificate.isEqual(e.serialNumber))return!0;return!1}async sign(e,n="SHA-1",r=zn(!0)){if(!e)throw new Error("Need to provide a private key for signing");const s=await r.getSignatureParameters(e,n),{parameters:i}=s;this.signature=s.signatureAlgorithm,this.signatureAlgorithm=s.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const a=await r.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new ur({valueHex:a})}async verify(e={},n=zn(!0)){let r;if(e.issuerCertificate&&(r=e.issuerCertificate.subjectPublicKeyInfo,!this.issuer.isEqual(e.issuerCertificate.subject)))return!1;if(e.publicKeyInfo&&(r=e.publicKeyInfo),!r)throw new Error("Issuer's certificate must be provided as an input parameter");if(this.crlExtensions){for(const s of this.crlExtensions.extensions)if(s.critical&&!Zct.includes(s.extnID))return!1}return n.verifyWithPublicKey(this.tbsView,this.signatureValue,r,this.signatureAlgorithm)}}Qi.CLASS_NAME="CertificateRevocationList";const SA="crlId",IA="crlValue",L8="parsedValue",Xct=[SA,IA];class Zv extends Ze{constructor(e={}){super(),this.crlId=Z(e,SA,Zv.defaultValues(SA)),this.crlValue=Z(e,IA,Zv.defaultValues(IA)),L8 in e&&(this.parsedValue=Z(e,L8,Zv.defaultValues(L8))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case SA:return ue;case IA:return new xn;case L8:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case SA:return n===ue;case IA:return n instanceof xn;case L8:return n instanceof Object&&Object.keys(n).length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.id||"id"}),new Re({idBlock:{tagClass:3,tagNumber:0},value:[new xn({name:n.value||"value"})]})]})}fromSchema(e){st(e,Xct);const n=tt(e,e,Zv.schema({names:{id:SA,value:IA}}));switch(Ge.assertSchema(n,this.className),this.crlId=n.result.crlId.valueBlock.toString(),this.crlValue=n.result.crlValue,this.crlId){case Sle:this.parsedValue=Qi.fromBER(this.certValue.valueBlock.valueHex);break;default:throw new Error(`Incorrect CRL_ID value in CRLBag: ${this.crlId}`)}}toSchema(){return this.parsedValue&&(this.crlId=Sle,this.crlValue=new ut({valueHex:this.parsedValue.toSchema().toBER(!1)})),new ve({value:[new Rt({value:this.crlId}),new Re({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}toJSON(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}Zv.CLASS_NAME="CRLBag";const CA="version",TA="encryptedContentInfo",gy="unprotectedAttrs",elt=[CA,TA,gy];class g0 extends Ze{constructor(e={}){super(),this.version=Z(e,CA,g0.defaultValues(CA)),this.encryptedContentInfo=Z(e,TA,g0.defaultValues(TA)),gy in e&&(this.unprotectedAttrs=Z(e,gy,g0.defaultValues(gy))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case CA:return 0;case TA:return new Li;case gy:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case CA:return n===0;case TA:return Li.compareWithDefault("contentType",n.contentType)&&Li.compareWithDefault("contentEncryptionAlgorithm",n.contentEncryptionAlgorithm)&&Li.compareWithDefault("encryptedContent",n.encryptedContent);case gy:return n.length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.version||ue}),Li.schema(n.encryptedContentInfo||{}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Dn({name:n.unprotectedAttrs||ue,value:Fs.schema()})]})]})}fromSchema(e){st(e,elt);const n=tt(e,e,g0.schema({names:{version:CA,encryptedContentInfo:{names:{blockName:TA}},unprotectedAttrs:gy}}));Ge.assertSchema(n,this.className),this.version=n.result.version.valueBlock.valueDec,this.encryptedContentInfo=new Li({schema:n.result.encryptedContentInfo}),gy in n.result&&(this.unprotectedAttrs=Array.from(n.result.unprotectedAttrs,r=>new Fs({schema:r})))}toSchema(){const e=[];return e.push(new $e({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,n=>n.toSchema())})),new ve({value:e})}toJSON(){const e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,n=>n.toJSON())),e}async encrypt(e,n=zn(!0)){es.assert(e,"parameters","object");const r={...e,contentType:"1.2.840.113549.1.7.1"};this.encryptedContentInfo=await n.encryptEncryptedContentInfo(r)}async decrypt(e,n=zn(!0)){es.assert(e,"parameters","object");const r={...e,encryptedContentInfo:this.encryptedContentInfo};return n.decryptEncryptedContentInfo(r)}}g0.CLASS_NAME="EncryptedData";const X1="encryptionAlgorithm",my="encryptedData",U8="parsedValue",tlt=[X1,my];class Qy extends Ze{constructor(e={}){super(),this.encryptionAlgorithm=Z(e,X1,Qy.defaultValues(X1)),this.encryptedData=Z(e,my,Qy.defaultValues(my)),U8 in e&&(this.parsedValue=Z(e,U8,Qy.defaultValues(U8))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case X1:return new Ve;case my:return new ut;case U8:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case X1:return Ve.compareWithDefault("algorithmId",n.algorithmId)&&!("algorithmParams"in n);case my:return n.isEqual(Qy.defaultValues(e));case U8:return n instanceof Object&&Object.keys(n).length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[Ve.schema(n.encryptionAlgorithm||{names:{blockName:X1}}),new zs({value:[new ut({name:n.encryptedData||my}),new ut({idBlock:{isConstructed:!0},name:n.encryptedData||my})]})]})}fromSchema(e){st(e,tlt);const n=tt(e,e,Qy.schema({names:{encryptionAlgorithm:{names:{blockName:X1}},encryptedData:my}}));Ge.assertSchema(n,this.className),this.encryptionAlgorithm=new Ve({schema:n.result.encryptionAlgorithm}),this.encryptedData=n.result.encryptedData}toSchema(){return new ve({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}toJSON(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}async parseInternalValues(e,n=zn(!0)){const s=await new g0({encryptedContentInfo:new Li({contentEncryptionAlgorithm:this.encryptionAlgorithm,encryptedContent:this.encryptedData})}).decrypt(e,n);this.parsedValue=Sf.fromBER(s)}async makeInternalValues(e,n=zn(!0)){if(!this.parsedValue)throw new Error('Please initialize "parsedValue" first');const r=new g0,s={...e,contentToEncrypt:this.parsedValue.toSchema().toBER(!1)};if(await r.encrypt(s,n),!r.encryptedContentInfo.encryptedContent)throw new Error("The filed `encryptedContent` in EncryptedContentInfo is empty");this.encryptionAlgorithm=r.encryptedContentInfo.contentEncryptionAlgorithm,this.encryptedData=r.encryptedContentInfo.encryptedContent}}Qy.CLASS_NAME="PKCS8ShroudedKeyBag";const NA="secretTypeId",kA="secretValue",nlt=[NA,kA];class j3 extends Ze{constructor(e={}){super(),this.secretTypeId=Z(e,NA,j3.defaultValues(NA)),this.secretValue=Z(e,kA,j3.defaultValues(kA)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case NA:return ue;case kA:return new xn;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case NA:return n===ue;case kA:return n instanceof xn;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.id||"id"}),new Re({idBlock:{tagClass:3,tagNumber:0},value:[new xn({name:n.value||"value"})]})]})}fromSchema(e){st(e,nlt);const n=tt(e,e,j3.schema({names:{id:NA,value:kA}}));Ge.assertSchema(n,this.className),this.secretTypeId=n.result.secretTypeId.valueBlock.toString(),this.secretValue=n.result.secretValue}toSchema(){return new ve({value:[new Rt({value:this.secretTypeId}),new Re({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}toJSON(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}j3.CLASS_NAME="SecretBag";class Fy{static getItems(){return this.items||(this.items={},Fy.register("1.2.840.113549.1.12.10.1.1",Sf),Fy.register("1.2.840.113549.1.12.10.1.2",Qy),Fy.register("1.2.840.113549.1.12.10.1.3",Yv),Fy.register("1.2.840.113549.1.12.10.1.4",Zv),Fy.register("1.2.840.113549.1.12.10.1.5",j3),Fy.register("1.2.840.113549.1.12.10.1.6",Eg)),this.items}static register(e,n){this.getItems()[e]=n}static find(e){return this.getItems()[e]||null}}const ev="bagId",tv="bagValue",Bp="bagAttributes",rlt=[ev,tv,Bp];class kw extends Ze{constructor(e={}){super(),this.bagId=Z(e,ev,kw.defaultValues(ev)),this.bagValue=Z(e,tv,kw.defaultValues(tv)),Bp in e&&(this.bagAttributes=Z(e,Bp,kw.defaultValues(Bp))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ev:return ue;case tv:return new xn;case Bp:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case ev:return n===ue;case tv:return n instanceof xn;case Bp:return n.length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.bagId||ev}),new Re({idBlock:{tagClass:3,tagNumber:0},value:[new xn({name:n.bagValue||tv})]}),new Ei({optional:!0,value:[new Dn({name:n.bagAttributes||Bp,value:Fs.schema()})]})]})}fromSchema(e){st(e,rlt);const n=tt(e,e,kw.schema({names:{bagId:ev,bagValue:tv,bagAttributes:Bp}}));Ge.assertSchema(n,this.className),this.bagId=n.result.bagId.valueBlock.toString();const r=Fy.find(this.bagId);if(!r)throw new Error(`Invalid BAG_ID for SafeBag: ${this.bagId}`);this.bagValue=new r({schema:n.result.bagValue}),Bp in n.result&&(this.bagAttributes=Array.from(n.result.bagAttributes,s=>new Fs({schema:s})))}toSchema(){const e=[new Rt({value:this.bagId}),new Re({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return this.bagAttributes&&e.push(new Ei({value:Array.from(this.bagAttributes,n=>n.toSchema())})),new ve({value:e})}toJSON(){const e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return this.bagAttributes&&(e.bagAttributes=Array.from(this.bagAttributes,n=>n.toJSON())),e}}kw.CLASS_NAME="SafeBag";const qE="safeBags";class Eg extends Ze{constructor(e={}){super(),this.safeBags=Z(e,qE,Eg.defaultValues(qE)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case qE:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case qE:return n.length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Dn({name:n.safeBags||ue,value:kw.schema()})]})}fromSchema(e){st(e,[qE]);const n=tt(e,e,Eg.schema({names:{safeBags:qE}}));Ge.assertSchema(n,this.className),this.safeBags=Array.from(n.result.safeBags,r=>new kw({schema:r}))}toSchema(){return new ve({value:Array.from(this.safeBags,e=>e.toSchema())})}toJSON(){return{safeBags:Array.from(this.safeBags,e=>e.toJSON())}}}Eg.CLASS_NAME="SafeContents";const KC="otherCertFormat",GC="otherCert",slt=[KC,GC];class Zw extends Ze{constructor(e={}){super(),this.otherCertFormat=Z(e,KC,Zw.defaultValues(KC)),this.otherCert=Z(e,GC,Zw.defaultValues(GC)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case KC:return ue;case GC:return new xn;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.otherCertFormat||KC}),new xn({name:n.otherCert||GC})]})}fromSchema(e){st(e,slt);const n=tt(e,e,Zw.schema());Ge.assertSchema(n,this.className),this.otherCertFormat=n.result.otherCertFormat.valueBlock.toString(),this.otherCert=n.result.otherCert}toSchema(){return new ve({value:[new Rt({value:this.otherCertFormat}),this.otherCert]})}toJSON(){const e={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof xn||(e.otherCert=this.otherCert.toJSON()),e}}const WC="certificates",ilt=[WC];class E0 extends Ze{constructor(e={}){super(),this.certificates=Z(e,WC,E0.defaultValues(WC)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case WC:return[];default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new Ei({name:n.blockName||ue,value:[new Dn({name:n.certificates||WC,value:new zs({value:[_r.schema(),new Re({idBlock:{tagClass:3,tagNumber:0},value:[new xn]}),new Re({idBlock:{tagClass:3,tagNumber:1},value:[new ve]}),new Re({idBlock:{tagClass:3,tagNumber:2},value:yu.schema().valueBlock.value}),new Re({idBlock:{tagClass:3,tagNumber:3},value:Zw.schema().valueBlock.value})]})})]})}fromSchema(e){st(e,ilt);const n=tt(e,e,E0.schema());Ge.assertSchema(n,this.className),this.certificates=Array.from(n.result.certificates||[],r=>{const s=r.idBlock.tagNumber;if(r.idBlock.tagClass===1)return new _r({schema:r});const i=new ve({value:r.valueBlock.value});switch(s){case 1:return i.valueBlock.value[0].valueBlock.value[0].valueBlock.valueDec===1?new yu({schema:i}):new vg({schema:i});case 2:return new yu({schema:i});case 3:return new Zw({schema:i})}return r})}toSchema(){return new Ei({value:Array.from(this.certificates,e=>{switch(!0){case e instanceof _r:return e.toSchema();case e instanceof vg:return new Re({idBlock:{tagClass:3,tagNumber:1},value:e.toSchema().valueBlock.value});case e instanceof yu:return new Re({idBlock:{tagClass:3,tagNumber:2},value:e.toSchema().valueBlock.value});case e instanceof Zw:return new Re({idBlock:{tagClass:3,tagNumber:3},value:e.toSchema().valueBlock.value})}return e.toSchema()})})}toJSON(){return{certificates:Array.from(this.certificates,e=>e.toJSON())}}}E0.CLASS_NAME="CertificateSet";const zC="otherRevInfoFormat",JC="otherRevInfo",alt=[zC,JC];class _g extends Ze{constructor(e={}){super(),this.otherRevInfoFormat=Z(e,zC,_g.defaultValues(zC)),this.otherRevInfo=Z(e,JC,_g.defaultValues(JC)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case zC:return ue;case JC:return new xn;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.otherRevInfoFormat||zC}),new xn({name:n.otherRevInfo||JC})]})}fromSchema(e){st(e,alt);const n=tt(e,e,_g.schema());Ge.assertSchema(n,this.className),this.otherRevInfoFormat=n.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=n.result.otherRevInfo}toSchema(){return new ve({value:[new Rt({value:this.otherRevInfoFormat}),this.otherRevInfo]})}toJSON(){const e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof xn||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}_g.CLASS_NAME="OtherRevocationInfoFormat";const YC="crls",gH="otherRevocationInfos",olt=[YC];class Bg extends Ze{constructor(e={}){super(),this.crls=Z(e,YC,Bg.defaultValues(YC)),this.otherRevocationInfos=Z(e,gH,Bg.defaultValues(gH)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case YC:return[];case gH:return[];default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new Ei({name:n.blockName||ue,value:[new Dn({name:n.crls||ue,value:new zs({value:[Qi.schema(),new Re({idBlock:{tagClass:3,tagNumber:1},value:[new Rt,new xn]})]})})]})}fromSchema(e){st(e,olt);const n=tt(e,e,Bg.schema({names:{crls:YC}}));if(Ge.assertSchema(n,this.className),n.result.crls)for(const r of n.result.crls)r.idBlock.tagClass===1?this.crls.push(new Qi({schema:r})):this.otherRevocationInfos.push(new _g({schema:r}))}toSchema(){const e=[];return e.push(...Array.from(this.crls,n=>n.toSchema())),e.push(...Array.from(this.otherRevocationInfos,n=>{const r=n.toSchema();return r.idBlock.tagClass=3,r.idBlock.tagNumber=1,r})),new Ei({value:e})}toJSON(){return{crls:Array.from(this.crls,e=>e.toJSON()),otherRevocationInfos:Array.from(this.otherRevocationInfos,e=>e.toJSON())}}}Bg.CLASS_NAME="RevocationInfoChoices";const QC="certs",nv="crls",clt=[QC,nv];class Wx extends Ze{constructor(e={}){super(),this.crls=Z(e,nv,Wx.defaultValues(nv)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case QC:return new E0;case nv:return new Bg;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case QC:return n.certificates.length===0;case nv:return n.crls.length===0&&n.otherRevocationInfos.length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Re({name:n.certs||ue,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:E0.schema().valueBlock.value}),new Re({name:n.crls||ue,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Bg.schema().valueBlock.value})]})}fromSchema(e){st(e,clt);const n=tt(e,e,Wx.schema({names:{certs:QC,crls:nv}}));Ge.assertSchema(n,this.className),QC in n.result&&(this.certs=new E0({schema:new Ei({value:n.result.certs.valueBlock.value})})),nv in n.result&&(this.crls=new Bg({schema:new Ei({value:n.result.crls.valueBlock.value})}))}toSchema(){const e=[];return this.certs&&e.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value})),this.crls&&e.push(new Re({idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})),new ve({value:e})}toJSON(){const e={};return this.certs&&(e.certs=this.certs.toJSON()),this.crls&&(e.crls=this.crls.toJSON()),e}}Wx.CLASS_NAME="OriginatorInfo";const ZC="issuer",XC="serialNumber",llt=[ZC,XC];class Gi extends Ze{constructor(e={}){super(),this.issuer=Z(e,ZC,Gi.defaultValues(ZC)),this.serialNumber=Z(e,XC,Gi.defaultValues(XC)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ZC:return new ns;case XC:return new $e;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[ns.schema(n.issuer||{}),new $e({name:n.serialNumber||ue})]})}fromSchema(e){st(e,llt);const n=tt(e,e,Gi.schema({names:{issuer:{names:{blockName:ZC}},serialNumber:XC}}));Ge.assertSchema(n,this.className),this.issuer=new ns({schema:n.result.issuer}),this.serialNumber=n.result.serialNumber}toSchema(){return new ve({value:[this.issuer.toSchema(),this.serialNumber]})}toJSON(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}Gi.CLASS_NAME="IssuerAndSerialNumber";const AO="variant",F8="value",ult=["blockName"];class H3 extends Ze{constructor(e={}){super(),this.variant=Z(e,AO,H3.defaultValues(AO)),F8 in e&&(this.value=Z(e,F8,H3.defaultValues(F8))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case AO:return-1;case F8:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case AO:return n===-1;case F8:return Object.keys(n).length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new zs({value:[Gi.schema({names:{blockName:n.blockName||ue}}),new gn({name:n.blockName||ue,idBlock:{tagClass:3,tagNumber:0}})]})}fromSchema(e){st(e,ult);const n=tt(e,e,H3.schema({names:{blockName:"blockName"}}));Ge.assertSchema(n,this.className),n.result.blockName.idBlock.tagClass===1?(this.variant=1,this.value=new Gi({schema:n.result.blockName})):(this.variant=2,this.value=new ut({valueHex:n.result.blockName.valueBlock.valueHex}))}toSchema(){switch(this.variant){case 1:if(!(this.value instanceof Gi))throw new Error("Incorrect type of RecipientIdentifier.value. It should be IssuerAndSerialNumber.");return this.value.toSchema();case 2:if(!(this.value instanceof ut))throw new Error("Incorrect type of RecipientIdentifier.value. It should be ASN.1 OctetString.");return new gn({idBlock:{tagClass:3,tagNumber:0},valueHex:this.value.valueBlock.valueHexView});default:return new xn}}toJSON(){const e={variant:this.variant};return(this.variant===1||this.variant===2)&&this.value&&(e.value=this.value.toJSON()),e}}H3.CLASS_NAME="RecipientIdentifier";const rv="version",PA="rid",OA="keyEncryptionAlgorithm",RA="encryptedKey",SO="recipientCertificate",flt=[rv,PA,OA,RA];class ru extends Ze{constructor(e={}){super(),this.version=Z(e,rv,ru.defaultValues(rv)),this.rid=Z(e,PA,ru.defaultValues(PA)),this.keyEncryptionAlgorithm=Z(e,OA,ru.defaultValues(OA)),this.encryptedKey=Z(e,RA,ru.defaultValues(RA)),this.recipientCertificate=Z(e,SO,ru.defaultValues(SO)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case rv:return-1;case PA:return{};case OA:return new Ve;case RA:return new ut;case SO:return new _r;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case rv:return n===ru.defaultValues(rv);case PA:return Object.keys(n).length===0;case OA:case RA:return n.isEqual(ru.defaultValues(e));case SO:return!1;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.version||ue}),H3.schema(n.rid||{}),Ve.schema(n.keyEncryptionAlgorithm||{}),new ut({name:n.encryptedKey||ue})]})}fromSchema(e){st(e,flt);const n=tt(e,e,ru.schema({names:{version:rv,rid:{names:{blockName:PA}},keyEncryptionAlgorithm:{names:{blockName:OA}},encryptedKey:RA}}));Ge.assertSchema(n,this.className),this.version=n.result.version.valueBlock.valueDec,n.result.rid.idBlock.tagClass===3?this.rid=new ut({valueHex:n.result.rid.valueBlock.valueHex}):this.rid=new Gi({schema:n.result.rid}),this.keyEncryptionAlgorithm=new Ve({schema:n.result.keyEncryptionAlgorithm}),this.encryptedKey=n.result.encryptedKey}toSchema(){const e=[];return this.rid instanceof Gi?(this.version=0,e.push(new $e({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new $e({value:this.version})),e.push(new gn({idBlock:{tagClass:3,tagNumber:0},valueHex:this.rid.valueBlock.valueHexView}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new ve({value:e})}toJSON(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}ru.CLASS_NAME="KeyTransRecipientInfo";const _A="algorithm",BA="publicKey",dlt=[_A,BA];class Ag extends Ze{constructor(e={}){super(),this.algorithm=Z(e,_A,Ag.defaultValues(_A)),this.publicKey=Z(e,BA,Ag.defaultValues(BA)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case _A:return new Ve;case BA:return new ur;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case _A:case BA:return n.isEqual(Ag.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[Ve.schema(n.algorithm||{}),new ur({name:n.publicKey||ue})]})}fromSchema(e){st(e,dlt);const n=tt(e,e,Ag.schema({names:{algorithm:{names:{blockName:_A}},publicKey:BA}}));Ge.assertSchema(n,this.className),this.algorithm=new Ve({schema:n.result.algorithm}),this.publicKey=n.result.publicKey}toSchema(){return new ve({value:[this.algorithm.toSchema(),this.publicKey]})}toJSON(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}Ag.CLASS_NAME="OriginatorPublicKey";const IO="variant",V8="value",hlt=["blockName"];class Mg extends Ze{constructor(e={}){super(),this.variant=Z(e,IO,Mg.defaultValues(IO)),V8 in e&&(this.value=Z(e,V8,Mg.defaultValues(V8))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case IO:return-1;case V8:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case IO:return n===-1;case V8:return Object.keys(n).length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new zs({value:[Gi.schema({names:{blockName:n.blockName||ue}}),new gn({idBlock:{tagClass:3,tagNumber:0},name:n.blockName||ue}),new Re({idBlock:{tagClass:3,tagNumber:1},name:n.blockName||ue,value:Ag.schema().valueBlock.value})]})}fromSchema(e){st(e,hlt);const n=tt(e,e,Mg.schema({names:{blockName:"blockName"}}));Ge.assertSchema(n,this.className),n.result.blockName.idBlock.tagClass===1?(this.variant=1,this.value=new Gi({schema:n.result.blockName})):n.result.blockName.idBlock.tagNumber===0?(n.result.blockName.idBlock.tagClass=1,n.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=n.result.blockName):(this.variant=3,this.value=new Ag({schema:new ve({value:n.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:{const e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e}default:return new xn}}toJSON(){const e={variant:this.variant};return(this.variant===1||this.variant===2||this.variant===3)&&(e.value=this.value.toJSON()),e}}Mg.CLASS_NAME="OriginatorIdentifierOrKey";const MA="keyAttrId",Mh="keyAttr",plt=[MA,Mh];class eh extends Ze{constructor(e={}){super(),this.keyAttrId=Z(e,MA,eh.defaultValues(MA)),Mh in e&&(this.keyAttr=Z(e,Mh,eh.defaultValues(Mh))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case MA:return ue;case Mh:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case MA:return typeof n=="string"&&n===ue;case Mh:return Object.keys(n).length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({optional:n.optional||!0,name:n.blockName||ue,value:[new Rt({name:n.keyAttrId||ue}),new xn({optional:!0,name:n.keyAttr||ue})]})}fromSchema(e){st(e,plt);const n=tt(e,e,eh.schema({names:{keyAttrId:MA,keyAttr:Mh}}));Ge.assertSchema(n,this.className),this.keyAttrId=n.result.keyAttrId.valueBlock.toString(),Mh in n.result&&(this.keyAttr=n.result.keyAttr)}toSchema(){const e=[];return e.push(new Rt({value:this.keyAttrId})),Mh in this&&e.push(this.keyAttr),new ve({value:e})}toJSON(){const e={keyAttrId:this.keyAttrId};return Mh in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}eh.CLASS_NAME="OtherKeyAttribute";const sv="subjectKeyIdentifier",yy="date",wy="other",glt=[sv,yy,wy];class s0 extends Ze{constructor(e={}){super(),this.subjectKeyIdentifier=Z(e,sv,s0.defaultValues(sv)),yy in e&&(this.date=Z(e,yy,s0.defaultValues(yy))),wy in e&&(this.other=Z(e,wy,s0.defaultValues(wy))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case sv:return new ut;case yy:return new Gs;case wy:return new eh;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case sv:return n.isEqual(s0.defaultValues(sv));case yy:return n.year===0&&n.month===0&&n.day===0&&n.hour===0&&n.minute===0&&n.second===0&&n.millisecond===0;case wy:return n.keyAttrId===ue&&!("keyAttr"in n);default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new ut({name:n.subjectKeyIdentifier||ue}),new Gs({optional:!0,name:n.date||ue}),eh.schema(n.other||{})]})}fromSchema(e){st(e,glt);const n=tt(e,e,s0.schema({names:{subjectKeyIdentifier:sv,date:yy,other:{names:{blockName:wy}}}}));Ge.assertSchema(n,this.className),this.subjectKeyIdentifier=n.result.subjectKeyIdentifier,yy in n.result&&(this.date=n.result.date),wy in n.result&&(this.other=new eh({schema:n.result.other}))}toSchema(){const e=[];return e.push(this.subjectKeyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new ve({value:e})}toJSON(){const e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return this.date&&(e.date=this.date.toJSON()),this.other&&(e.other=this.other.toJSON()),e}}s0.CLASS_NAME="RecipientKeyIdentifier";const CO="variant",TO="value",mlt=["blockName"];class A0 extends Ze{constructor(e={}){super(),this.variant=Z(e,CO,A0.defaultValues(CO)),this.value=Z(e,TO,A0.defaultValues(TO)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case CO:return-1;case TO:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case CO:return n===-1;case TO:return Object.keys(n).length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new zs({value:[Gi.schema(n.issuerAndSerialNumber||{names:{blockName:n.blockName||ue}}),new Re({name:n.blockName||ue,idBlock:{tagClass:3,tagNumber:0},value:s0.schema(n.rKeyId||{names:{blockName:n.blockName||ue}}).valueBlock.value})]})}fromSchema(e){st(e,mlt);const n=tt(e,e,A0.schema({names:{blockName:"blockName"}}));Ge.assertSchema(n,this.className),n.result.blockName.idBlock.tagClass===1?(this.variant=1,this.value=new Gi({schema:n.result.blockName})):(this.variant=2,this.value=new s0({schema:new ve({value:n.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new Re({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new xn}}toJSON(){const e={variant:this.variant};return(this.variant===1||this.variant===2)&&(e.value=this.value.toJSON()),e}}A0.CLASS_NAME="KeyAgreeRecipientIdentifier";const DA="rid",iv="encryptedKey",ylt=[DA,iv];class Sg extends Ze{constructor(e={}){super(),this.rid=Z(e,DA,Sg.defaultValues(DA)),this.encryptedKey=Z(e,iv,Sg.defaultValues(iv)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case DA:return new A0;case iv:return new ut;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case DA:return n.variant===-1&&!("value"in n);case iv:return n.isEqual(Sg.defaultValues(iv));default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[A0.schema(n.rid||{}),new ut({name:n.encryptedKey||ue})]})}fromSchema(e){st(e,ylt);const n=tt(e,e,Sg.schema({names:{rid:{names:{blockName:DA}},encryptedKey:iv}}));Ge.assertSchema(n,this.className),this.rid=new A0({schema:n.result.rid}),this.encryptedKey=n.result.encryptedKey}toSchema(){return new ve({value:[this.rid.toSchema(),this.encryptedKey]})}toJSON(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}Sg.CLASS_NAME="RecipientEncryptedKey";const NO="encryptedKeys",z3e="RecipientEncryptedKeys",wlt=[z3e];class Xw extends Ze{constructor(e={}){super(),this.encryptedKeys=Z(e,NO,Xw.defaultValues(NO)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case NO:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case NO:return n.length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Dn({name:n.RecipientEncryptedKeys||ue,value:Sg.schema()})]})}fromSchema(e){st(e,wlt);const n=tt(e,e,Xw.schema({names:{RecipientEncryptedKeys:z3e}}));Ge.assertSchema(n,this.className),this.encryptedKeys=Array.from(n.result.RecipientEncryptedKeys,r=>new Sg({schema:r}))}toSchema(){return new ve({value:Array.from(this.encryptedKeys,e=>e.toSchema())})}toJSON(){return{encryptedKeys:Array.from(this.encryptedKeys,e=>e.toJSON())}}}Xw.CLASS_NAME="RecipientEncryptedKeys";const LA="version",UA="originator",Mp="ukm",FA="keyEncryptionAlgorithm",VA="recipientEncryptedKeys",kO="recipientCertificate",PO="recipientPublicKey",blt=[LA,UA,Mp,FA,VA];class ul extends Ze{constructor(e={}){super(),this.version=Z(e,LA,ul.defaultValues(LA)),this.originator=Z(e,UA,ul.defaultValues(UA)),Mp in e&&(this.ukm=Z(e,Mp,ul.defaultValues(Mp))),this.keyEncryptionAlgorithm=Z(e,FA,ul.defaultValues(FA)),this.recipientEncryptedKeys=Z(e,VA,ul.defaultValues(VA)),this.recipientCertificate=Z(e,kO,ul.defaultValues(kO)),this.recipientPublicKey=Z(e,PO,ul.defaultValues(PO)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case LA:return 0;case UA:return new Mg;case Mp:return new ut;case FA:return new Ve;case VA:return new Xw;case kO:return new _r;case PO:return null;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case LA:return n===0;case UA:return n.variant===-1&&!("value"in n);case Mp:return n.isEqual(ul.defaultValues(Mp));case FA:return n.algorithmId===ue&&!("algorithmParams"in n);case VA:return n.encryptedKeys.length===0;case kO:return!1;case PO:return!1;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.version||ue}),new Re({idBlock:{tagClass:3,tagNumber:0},value:[Mg.schema(n.originator||{})]}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new ut({name:n.ukm||ue})]}),Ve.schema(n.keyEncryptionAlgorithm||{}),Xw.schema(n.recipientEncryptedKeys||{})]})}fromSchema(e){st(e,blt);const n=tt(e,e,ul.schema({names:{version:LA,originator:{names:{blockName:UA}},ukm:Mp,keyEncryptionAlgorithm:{names:{blockName:FA}},recipientEncryptedKeys:{names:{blockName:VA}}}}));Ge.assertSchema(n,this.className),this.version=n.result.version.valueBlock.valueDec,this.originator=new Mg({schema:n.result.originator}),Mp in n.result&&(this.ukm=n.result.ukm),this.keyEncryptionAlgorithm=new Ve({schema:n.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new Xw({schema:n.result.recipientEncryptedKeys})}toSchema(){const e=[];return e.push(new $e({value:this.version})),e.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),this.ukm&&e.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new ve({value:e})}toJSON(){const e={version:this.version,originator:this.originator.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),recipientEncryptedKeys:this.recipientEncryptedKeys.toJSON()};return this.ukm&&(e.ukm=this.ukm.toJSON()),e}}ul.CLASS_NAME="KeyAgreeRecipientInfo";const av="keyIdentifier",by="date",vy="other",vlt=[av,by,vy];class Vd extends Ze{constructor(e={}){super(),this.keyIdentifier=Z(e,av,Vd.defaultValues(av)),by in e&&(this.date=Z(e,by,Vd.defaultValues(by))),vy in e&&(this.other=Z(e,vy,Vd.defaultValues(vy))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case av:return new ut;case by:return new Gs;case vy:return new eh;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case av:return n.isEqual(Vd.defaultValues(av));case by:return n.year===0&&n.month===0&&n.day===0&&n.hour===0&&n.minute===0&&n.second===0&&n.millisecond===0;case vy:return n.compareWithDefault("keyAttrId",n.keyAttrId)&&!("keyAttr"in n);default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new ut({name:n.keyIdentifier||ue}),new Gs({optional:!0,name:n.date||ue}),eh.schema(n.other||{})]})}fromSchema(e){st(e,vlt);const n=tt(e,e,Vd.schema({names:{keyIdentifier:av,date:by,other:{names:{blockName:vy}}}}));Ge.assertSchema(n,this.className),this.keyIdentifier=n.result.keyIdentifier,by in n.result&&(this.date=n.result.date),vy in n.result&&(this.other=new eh({schema:n.result.other}))}toSchema(){const e=[];return e.push(this.keyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new ve({value:e})}toJSON(){const e={keyIdentifier:this.keyIdentifier.toJSON()};return this.date&&(e.date=this.date),this.other&&(e.other=this.other.toJSON()),e}}Vd.CLASS_NAME="KEKIdentifier";const $A="version",jA="kekid",HA="keyEncryptionAlgorithm",ov="encryptedKey",OO="preDefinedKEK",xlt=[$A,jA,HA,ov];class su extends Ze{constructor(e={}){super(),this.version=Z(e,$A,su.defaultValues($A)),this.kekid=Z(e,jA,su.defaultValues(jA)),this.keyEncryptionAlgorithm=Z(e,HA,su.defaultValues(HA)),this.encryptedKey=Z(e,ov,su.defaultValues(ov)),this.preDefinedKEK=Z(e,OO,su.defaultValues(OO)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $A:return 0;case jA:return new Vd;case HA:return new Ve;case ov:return new ut;case OO:return Ci;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case"KEKRecipientInfo":return n===su.defaultValues($A);case jA:return n.compareWithDefault("keyIdentifier",n.keyIdentifier)&&!("date"in n)&&!("other"in n);case HA:return n.algorithmId===ue&&!("algorithmParams"in n);case ov:return n.isEqual(su.defaultValues(ov));case OO:return n.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.version||ue}),Vd.schema(n.kekid||{}),Ve.schema(n.keyEncryptionAlgorithm||{}),new ut({name:n.encryptedKey||ue})]})}fromSchema(e){st(e,xlt);const n=tt(e,e,su.schema({names:{version:$A,kekid:{names:{blockName:jA}},keyEncryptionAlgorithm:{names:{blockName:HA}},encryptedKey:ov}}));Ge.assertSchema(n,this.className),this.version=n.result.version.valueBlock.valueDec,this.kekid=new Vd({schema:n.result.kekid}),this.keyEncryptionAlgorithm=new Ve({schema:n.result.keyEncryptionAlgorithm}),this.encryptedKey=n.result.encryptedKey}toSchema(){return new ve({value:[new $e({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}toJSON(){return{version:this.version,kekid:this.kekid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}su.CLASS_NAME="KEKRecipientInfo";const qA="version",xy="keyDerivationAlgorithm",KA="keyEncryptionAlgorithm",cv="encryptedKey",RO="password",Elt=[qA,xy,KA,cv];class xf extends Ze{constructor(e={}){super(),this.version=Z(e,qA,xf.defaultValues(qA)),xy in e&&(this.keyDerivationAlgorithm=Z(e,xy,xf.defaultValues(xy))),this.keyEncryptionAlgorithm=Z(e,KA,xf.defaultValues(KA)),this.encryptedKey=Z(e,cv,xf.defaultValues(cv)),this.password=Z(e,RO,xf.defaultValues(RO)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case qA:return-1;case xy:return new Ve;case KA:return new Ve;case cv:return new ut;case RO:return Ci;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case qA:return n===-1;case xy:case KA:return n.algorithmId===ue&&!("algorithmParams"in n);case cv:return n.isEqual(xf.defaultValues(cv));case RO:return n.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.version||ue}),new Re({name:n.keyDerivationAlgorithm||ue,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Ve.schema().valueBlock.value}),Ve.schema(n.keyEncryptionAlgorithm||{}),new ut({name:n.encryptedKey||ue})]})}fromSchema(e){st(e,Elt);const n=tt(e,e,xf.schema({names:{version:qA,keyDerivationAlgorithm:xy,keyEncryptionAlgorithm:{names:{blockName:KA}},encryptedKey:cv}}));Ge.assertSchema(n,this.className),this.version=n.result.version.valueBlock.valueDec,xy in n.result&&(this.keyDerivationAlgorithm=new Ve({schema:new ve({value:n.result.keyDerivationAlgorithm.valueBlock.value})})),this.keyEncryptionAlgorithm=new Ve({schema:n.result.keyEncryptionAlgorithm}),this.encryptedKey=n.result.encryptedKey}toSchema(){const e=[];return e.push(new $e({value:this.version})),this.keyDerivationAlgorithm&&e.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new ve({value:e})}toJSON(){const e={version:this.version,keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()};return this.keyDerivationAlgorithm&&(e.keyDerivationAlgorithm=this.keyDerivationAlgorithm.toJSON()),e}}xf.CLASS_NAME="PasswordRecipientInfo";const GA="oriType",lv="oriValue",Alt=[GA,lv];class Pw extends Ze{constructor(e={}){super(),this.oriType=Z(e,GA,Pw.defaultValues(GA)),this.oriValue=Z(e,lv,Pw.defaultValues(lv)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case GA:return ue;case lv:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case GA:return n===ue;case lv:return Object.keys(n).length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.oriType||ue}),new xn({name:n.oriValue||ue})]})}fromSchema(e){st(e,Alt);const n=tt(e,e,Pw.schema({names:{oriType:GA,oriValue:lv}}));Ge.assertSchema(n,this.className),this.oriType=n.result.oriType.valueBlock.toString(),this.oriValue=n.result.oriValue}toSchema(){return new ve({value:[new Rt({value:this.oriType}),this.oriValue]})}toJSON(){const e={oriType:this.oriType};return Pw.compareWithDefault(lv,this.oriValue)||(e.oriValue=this.oriValue.toJSON()),e}}Pw.CLASS_NAME="OtherRecipientInfo";const _O="variant",$8="value",Slt=["blockName"];class If extends Ze{constructor(e={}){super(),this.variant=Z(e,_O,If.defaultValues(_O)),$8 in e&&(this.value=Z(e,$8,If.defaultValues($8))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case _O:return-1;case $8:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case _O:return n===If.defaultValues(e);case $8:return Object.keys(n).length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new zs({value:[ru.schema({names:{blockName:n.blockName||ue}}),new Re({name:n.blockName||ue,idBlock:{tagClass:3,tagNumber:1},value:ul.schema().valueBlock.value}),new Re({name:n.blockName||ue,idBlock:{tagClass:3,tagNumber:2},value:su.schema().valueBlock.value}),new Re({name:n.blockName||ue,idBlock:{tagClass:3,tagNumber:3},value:xf.schema().valueBlock.value}),new Re({name:n.blockName||ue,idBlock:{tagClass:3,tagNumber:4},value:Pw.schema().valueBlock.value})]})}fromSchema(e){st(e,Slt);const n=tt(e,e,If.schema({names:{blockName:"blockName"}}));if(Ge.assertSchema(n,this.className),n.result.blockName.idBlock.tagClass===1)this.variant=1,this.value=new ru({schema:n.result.blockName});else{const r=new ve({value:n.result.blockName.valueBlock.value});switch(n.result.blockName.idBlock.tagNumber){case 1:this.variant=2,this.value=new ul({schema:r});break;case 2:this.variant=3,this.value=new su({schema:r});break;case 3:this.variant=4,this.value=new xf({schema:r});break;case 4:this.variant=5,this.value=new Pw({schema:r});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}toSchema(){Nr.assertEmpty(this.value,"value","RecipientInfo");const e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new xn}}toJSON(){const e={variant:this.variant};return this.value&&this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}If.CLASS_NAME="RecipientInfo";const Ey="hashAlgorithm",Ay="maskGenAlgorithm",Sy="pSourceAlgorithm",Ilt=[Ey,Ay,Sy];class Ic extends Ze{constructor(e={}){super(),this.hashAlgorithm=Z(e,Ey,Ic.defaultValues(Ey)),this.maskGenAlgorithm=Z(e,Ay,Ic.defaultValues(Ay)),this.pSourceAlgorithm=Z(e,Sy,Ic.defaultValues(Sy)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ey:return new Ve({algorithmId:"1.3.14.3.2.26",algorithmParams:new xi});case Ay:return new Ve({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new Ve({algorithmId:"1.3.14.3.2.26",algorithmParams:new xi}).toSchema()});case Sy:return new Ve({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new ut({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Re({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[Ve.schema(n.hashAlgorithm||{})]}),new Re({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[Ve.schema(n.maskGenAlgorithm||{})]}),new Re({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[Ve.schema(n.pSourceAlgorithm||{})]})]})}fromSchema(e){st(e,Ilt);const n=tt(e,e,Ic.schema({names:{hashAlgorithm:{names:{blockName:Ey}},maskGenAlgorithm:{names:{blockName:Ay}},pSourceAlgorithm:{names:{blockName:Sy}}}}));Ge.assertSchema(n,this.className),Ey in n.result&&(this.hashAlgorithm=new Ve({schema:n.result.hashAlgorithm})),Ay in n.result&&(this.maskGenAlgorithm=new Ve({schema:n.result.maskGenAlgorithm})),Sy in n.result&&(this.pSourceAlgorithm=new Ve({schema:n.result.pSourceAlgorithm}))}toSchema(){const e=[];return this.hashAlgorithm.isEqual(Ic.defaultValues(Ey))||e.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(Ic.defaultValues(Ay))||e.push(new Re({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(Ic.defaultValues(Sy))||e.push(new Re({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new ve({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(Ic.defaultValues(Ey))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(Ic.defaultValues(Ay))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(Ic.defaultValues(Sy))||(e.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),e}}Ic.CLASS_NAME="RSAESOAEPParams";const WA="keyInfo",Iy="entityUInfo",zA="suppPubInfo",Clt=[WA,Iy,zA];class pg extends Ze{constructor(e={}){super(),this.keyInfo=Z(e,WA,pg.defaultValues(WA)),Iy in e&&(this.entityUInfo=Z(e,Iy,pg.defaultValues(Iy))),this.suppPubInfo=Z(e,zA,pg.defaultValues(zA)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case WA:return new Ve;case Iy:return new ut;case zA:return new ut;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case WA:case Iy:case zA:return n.isEqual(pg.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[Ve.schema(n.keyInfo||{}),new Re({name:n.entityUInfo||ue,idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new ut]}),new Re({name:n.suppPubInfo||ue,idBlock:{tagClass:3,tagNumber:2},value:[new ut]})]})}fromSchema(e){st(e,Clt);const n=tt(e,e,pg.schema({names:{keyInfo:{names:{blockName:WA}},entityUInfo:Iy,suppPubInfo:zA}}));Ge.assertSchema(n,this.className),this.keyInfo=new Ve({schema:n.result.keyInfo}),Iy in n.result&&(this.entityUInfo=n.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=n.result.suppPubInfo.valueBlock.value[0]}toSchema(){const e=[];return e.push(this.keyInfo.toSchema()),this.entityUInfo&&e.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new Re({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new ve({value:e})}toJSON(){const e={keyInfo:this.keyInfo.toJSON(),suppPubInfo:this.suppPubInfo.toJSON()};return this.entityUInfo&&(e.entityUInfo=this.entityUInfo.toJSON()),e}}pg.CLASS_NAME="ECCCMSSharedInfo";const JA="version",Cy="originatorInfo",YA="recipientInfos",QA="encryptedContentInfo",Ty="unprotectedAttrs",Tlt=[JA,Cy,YA,QA,Ty],jle={kdfAlgorithm:"SHA-512",kekEncryptionLength:256},Nlt={"P-256":256,"P-384":384,"P-521":528};class _d extends Ze{constructor(e={}){super(),this.version=Z(e,JA,_d.defaultValues(JA)),Cy in e&&(this.originatorInfo=Z(e,Cy,_d.defaultValues(Cy))),this.recipientInfos=Z(e,YA,_d.defaultValues(YA)),this.encryptedContentInfo=Z(e,QA,_d.defaultValues(QA)),Ty in e&&(this.unprotectedAttrs=Z(e,Ty,_d.defaultValues(Ty))),this.policy={disableSplit:!!e.disableSplit},e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case JA:return 0;case Cy:return new Wx;case YA:return[];case QA:return new Li;case Ty:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case JA:return n===_d.defaultValues(e);case Cy:return n.certs.certificates.length===0&&n.crls.crls.length===0;case YA:case Ty:return n.length===0;case QA:return Li.compareWithDefault("contentType",n.contentType)&&Li.compareWithDefault("contentEncryptionAlgorithm",n.contentEncryptionAlgorithm)&&Li.compareWithDefault("encryptedContent",n.encryptedContent);default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.version||ue}),new Re({name:n.originatorInfo||ue,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Wx.schema().valueBlock.value}),new Ei({value:[new Dn({name:n.recipientInfos||ue,value:If.schema()})]}),Li.schema(n.encryptedContentInfo||{}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Dn({name:n.unprotectedAttrs||ue,value:Fs.schema()})]})]})}fromSchema(e){st(e,Tlt);const n=tt(e,e,_d.schema({names:{version:JA,originatorInfo:Cy,recipientInfos:YA,encryptedContentInfo:{names:{blockName:QA}},unprotectedAttrs:Ty}}));Ge.assertSchema(n,this.className),this.version=n.result.version.valueBlock.valueDec,Cy in n.result&&(this.originatorInfo=new Wx({schema:new ve({value:n.result.originatorInfo.valueBlock.value})})),this.recipientInfos=Array.from(n.result.recipientInfos,r=>new If({schema:r})),this.encryptedContentInfo=new Li({schema:n.result.encryptedContentInfo}),Ty in n.result&&(this.unprotectedAttrs=Array.from(n.result.unprotectedAttrs,r=>new Fs({schema:r})))}toSchema(){const e=[];return e.push(new $e({value:this.version})),this.originatorInfo&&e.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new Ei({value:Array.from(this.recipientInfos,n=>n.toSchema())})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,n=>n.toSchema())})),new ve({value:e})}toJSON(){const e={version:this.version,recipientInfos:Array.from(this.recipientInfos,n=>n.toJSON()),encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.originatorInfo&&(e.originatorInfo=this.originatorInfo.toJSON()),this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,n=>n.toJSON())),e}addRecipientByCertificate(e,n,r,s=zn(!0)){const i=Object.assign({useOAEP:!0,oaepHashAlgorithm:"SHA-512"},jle,n||{});if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549")!==-1)r=1;else if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045")!==-1)r=2;else throw new Error(`Unknown type of certificate's public key: ${e.subjectPublicKeyInfo.algorithm.algorithmId}`);switch(r){case 1:{let a,o;if(i.useOAEP===!0){a=s.getOIDByAlgorithm({name:"RSA-OAEP"},!0,"keyEncryptionAlgorithm");const l=s.getOIDByAlgorithm({name:i.oaepHashAlgorithm},!0,"RSAES-OAEP-params"),u=new Ve({algorithmId:l,algorithmParams:new xi});o=new Ic({hashAlgorithm:u,maskGenAlgorithm:new Ve({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:u.toSchema()})}).toSchema()}else{if(a=s.getOIDByAlgorithm({name:"RSAES-PKCS1-v1_5"}),a===ue)throw new Error("Can not find OID for RSAES-PKCS1-v1_5");o=new xi}const c=new ru({version:0,rid:new Gi({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new Ve({algorithmId:a,algorithmParams:o}),recipientCertificate:e});this.recipientInfos.push(new If({variant:1,value:c}))}break;case 2:{const a=new A0({variant:1,value:new Gi({issuer:e.issuer,serialNumber:e.serialNumber})});this._addKeyAgreeRecipientInfo(a,i,{recipientCertificate:e},s)}break;default:throw new Error(`Unknown "variant" value: ${r}`)}return!0}addRecipientByPreDefinedData(e,n={},r,s=zn(!0)){if(es.assert(e,"preDefinedData","ArrayBuffer"),!e.byteLength)throw new Error("Pre-defined data could have zero length");if(!n.keyIdentifier){const i=new ArrayBuffer(16),a=new Uint8Array(i);s.getRandomValues(a),n.keyIdentifier=i}switch(n.hmacHashAlgorithm||(n.hmacHashAlgorithm="SHA-512"),n.iterationCount===void 0&&(n.iterationCount=2048),n.keyEncryptionAlgorithm||(n.keyEncryptionAlgorithm={name:"AES-KW",length:256}),n.keyEncryptionAlgorithmParams||(n.keyEncryptionAlgorithmParams=new xi),r){case 1:{const i=s.getOIDByAlgorithm(n.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),a=new su({version:4,kekid:new Vd({keyIdentifier:new ut({valueHex:n.keyIdentifier})}),keyEncryptionAlgorithm:new Ve({algorithmId:i,algorithmParams:n.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new If({variant:3,value:a}))}break;case 2:{const i=s.getOIDByAlgorithm({name:"PBKDF2"},!0,"keyDerivationAlgorithm"),a=new ArrayBuffer(64),o=new Uint8Array(a);s.getRandomValues(o);const c=s.getOIDByAlgorithm({name:"HMAC",hash:{name:n.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),l=new ec({salt:new ut({valueHex:a}),iterationCount:n.iterationCount,prf:new Ve({algorithmId:c,algorithmParams:new xi})}),u=s.getOIDByAlgorithm(n.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),f=new xf({version:0,keyDerivationAlgorithm:new Ve({algorithmId:i,algorithmParams:l.toSchema()}),keyEncryptionAlgorithm:new Ve({algorithmId:u,algorithmParams:n.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new If({variant:4,value:f}))}break;default:throw new Error(`Unknown value for "variant": ${r}`)}}addRecipientByKeyIdentifier(e,n,r,s=zn(!0)){const i=Object.assign({},jle,r||{}),a=new A0({variant:2,value:new s0({subjectKeyIdentifier:new ut({valueHex:n})})});this._addKeyAgreeRecipientInfo(a,i,{recipientPublicKey:e},s)}_addKeyAgreeRecipientInfo(e,n,r,s=zn(!0)){const i=new Sg({rid:e}),a=s.getOIDByAlgorithm({name:"AES-KW",length:n.kekEncryptionLength},!0,"keyEncryptionAlgorithm"),o=new Ve({algorithmId:a}),c=s.getOIDByAlgorithm({name:"ECDH",kdf:n.kdfAlgorithm},!0,"KeyAgreeRecipientInfo"),l=new ArrayBuffer(64),u=new Uint8Array(l);s.getRandomValues(u);const f={version:3,ukm:new ut({valueHex:l}),keyEncryptionAlgorithm:new Ve({algorithmId:c,algorithmParams:o.toSchema()}),recipientEncryptedKeys:new Xw({encryptedKeys:[i]})},d=new ul(Object.assign(f,r));this.recipientInfos.push(new If({variant:2,value:d}))}async encrypt(e,n,r=zn(!0)){const s=new ArrayBuffer(16),i=new Uint8Array(s);r.getRandomValues(i);const a=new Uint8Array(n),o=r.getOIDByAlgorithm(e,!0,"contentEncryptionAlgorithm"),c=await r.generateKey(e,!0,["encrypt"]),l=await r.encrypt({name:e.name,iv:i},c,a),u=await r.exportKey("raw",c);this.version=2,this.encryptedContentInfo=new Li({disableSplit:this.policy.disableSplit,contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new Ve({algorithmId:o,algorithmParams:new ut({valueHex:s})}),encryptedContent:new ut({valueHex:l})});const f=async v=>{const A=this.recipientInfos[v].value;let S,I;if(A.recipientPublicKey)S=A.recipientPublicKey.algorithm.namedCurve,I=A.recipientPublicKey;else if(A.recipientCertificate){const E=A.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(E.constructor.blockName()!==Rt.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${v}`);switch(E.valueBlock.toString()){case"1.2.840.10045.3.1.7":S="P-256";break;case"1.3.132.0.34":S="P-384";break;case"1.3.132.0.35":S="P-521";break;default:throw new Error(`Incorrect curve OID for index ${v}`)}I=await A.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:S},usages:[]}},r)}else throw new Error("Unsupported RecipientInfo");const B=Nlt[S],D=await r.generateKey({name:"ECDH",namedCurve:S},!0,["deriveBits"]),V=await r.exportKey("spki",D.publicKey),O=await r.deriveBits({name:"ECDH",public:I},D.privateKey,B),U=new Ve({schema:A.keyEncryptionAlgorithm.algorithmParams}),Q=r.getAlgorithmByOID(U.algorithmId,!0,"aesKWAlgorithm");let ie=Q.length;const G=new ArrayBuffer(4),R=new Uint8Array(G);for(let E=3;E>=0;E--)R[E]=ie,ie>>=8;const b=new pg({keyInfo:new Ve({algorithmId:U.algorithmId}),entityUInfo:A.ukm,suppPubInfo:new ut({valueHex:G})}).toSchema().toBER(!1),w=r.getAlgorithmByOID(A.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm"),N=await kle(w.kdf,O,Q.length,b,r),L=await r.importKey("raw",N,{name:"AES-KW"},!0,["wrapKey"]),C=await r.wrapKey("raw",c,L,{name:"AES-KW"}),T=new Mg;return T.variant=3,T.value=Ag.fromBER(V),A.originator=T,A.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new ut({valueHex:C}),{ecdhPrivateKey:D.privateKey}},d=async v=>{const A=this.recipientInfos[v].value,S=r.getAlgorithmByOID(A.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if(S.name==="RSA-OAEP"){const I=A.keyEncryptionAlgorithm.algorithmParams,B=new Ic({schema:I});if(S.hash=r.getAlgorithmByOID(B.hashAlgorithm.algorithmId),!("name"in S.hash))throw new Error(`Incorrect OID for hash algorithm: ${B.hashAlgorithm.algorithmId}`)}try{const I=await A.recipientCertificate.getPublicKey({algorithm:{algorithm:S,usages:["encrypt","wrapKey"]}},r),B=await r.encrypt(I.algorithm,I,u);A.encryptedKey=new ut({valueHex:B})}catch{}},p=async v=>{const A=this.recipientInfos[v].value,S=r.getAlgorithmByOID(A.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),I=await r.importKey("raw",new Uint8Array(A.preDefinedKEK),S,!0,["wrapKey"]),B=await r.wrapKey("raw",c,I,S);A.encryptedKey=new ut({valueHex:B})},g=async v=>{const A=this.recipientInfos[v].value;let S;if(!A.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!A.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{S=new ec({schema:A.keyDerivationAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const I=new Uint8Array(A.password),B=await r.importKey("raw",I,"PBKDF2",!1,["deriveKey"]),D=r.getAlgorithmByOID(A.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm");let V="SHA-1";S.prf&&(V=r.getAlgorithmByOID(S.prf.algorithmId,!0,"prfAlgorithm").hash.name);const O=new Uint8Array(S.salt.valueBlock.valueHex),U=S.iterationCount,Q=await r.deriveKey({name:"PBKDF2",hash:{name:V},salt:O,iterations:U},B,D,!0,["wrapKey"]),ie=await r.wrapKey("raw",c,Q,D);A.encryptedKey=new ut({valueHex:ie})},m=[];for(let v=0;v<this.recipientInfos.length;v++)switch(this.recipientInfos[v].variant){case 1:m.push(await d(v));break;case 2:m.push(await f(v));break;case 3:m.push(await p(v));break;case 4:m.push(await g(v));break;default:throw new Error(`Unknown recipient type in array with index ${v}`)}return m}async decrypt(e,n,r=zn(!0)){const s=n||{};if(e+1>this.recipientInfos.length)throw new Error(`Maximum value for "index" is: ${this.recipientInfos.length-1}`);const i=async m=>{const v=this.recipientInfos[m].value;let A,S,I;const B=v.originator;if(s.recipientCertificate){const w=s.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(w.constructor.blockName()!==Rt.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${m}`);A=w.valueBlock.toString()}else if(B.value.algorithm.algorithmParams){const w=B.value.algorithm.algorithmParams;if(w.constructor.blockName()!==Rt.blockName())throw new Error(`Incorrect originator for index ${m}`);A=w.valueBlock.toString()}else throw new Error('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo" if algorithm params are missing from originator');if(!s.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');switch(A){case"1.2.840.10045.3.1.7":S="P-256",I=256;break;case"1.3.132.0.34":S="P-384",I=384;break;case"1.3.132.0.35":S="P-521",I=528;break;default:throw new Error(`Incorrect curve OID for index ${m}`)}let D,V=r;fn.isBufferSource(s.recipientPrivateKey)?D=await r.importKey("pkcs8",s.recipientPrivateKey,{name:"ECDH",namedCurve:S},!0,["deriveBits"]):(D=s.recipientPrivateKey,"crypto"in s&&s.crypto&&(V=s.crypto.subtle)),"algorithmParams"in B.value.algorithm||(B.value.algorithm.algorithmParams=new Rt({value:A}));const O=B.value.toSchema().toBER(!1),U=await r.importKey("spki",O,{name:"ECDH",namedCurve:S},!0,[]),Q=await V.deriveBits({name:"ECDH",public:U},D,I);async function ie(w){w=w||!1;const N=new Ve({schema:v.keyEncryptionAlgorithm.algorithmParams}),L=r.getAlgorithmByOID(N.algorithmId,!0,"kwAlgorithm");let C=L.length;const T=new ArrayBuffer(4),E=new Uint8Array(T);for(let $=3;$>=0;$--)E[$]=C,C>>=8;const P={algorithmId:N.algorithmId};w&&(P.algorithmParams=new xi);const H=new pg({keyInfo:new Ve(P),entityUInfo:v.ukm,suppPubInfo:new ut({valueHex:T})}).toSchema().toBER(!1),ne=r.getAlgorithmByOID(v.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm");if(!ne.name)throw new Error(`Incorrect OID for key encryption algorithm: ${v.keyEncryptionAlgorithm.algorithmId}`);return kle(ne.kdf,Q,L.length,H,r)}const G=await ie(),R=async w=>r.importKey("raw",w,{name:"AES-KW"},!0,["unwrapKey"]),k=await R(G),b=async w=>{const N=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,L=r.getAlgorithmByOID(N,!0,"contentEncryptionAlgorithm");return r.unwrapKey("raw",v.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHexView,w,{name:"AES-KW"},L,!0,["decrypt"])};try{return await b(k)}catch{const w=await ie(!0),N=await R(w);return b(N)}},a=async m=>{const v=this.recipientInfos[m].value;if(!s.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');const A=r.getAlgorithmByOID(v.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if(A.name==="RSA-OAEP"){const O=v.keyEncryptionAlgorithm.algorithmParams,U=new Ic({schema:O});if(A.hash=r.getAlgorithmByOID(U.hashAlgorithm.algorithmId),!("name"in A.hash))throw new Error(`Incorrect OID for hash algorithm: ${U.hashAlgorithm.algorithmId}`)}let S,I=r;fn.isBufferSource(s.recipientPrivateKey)?S=await r.importKey("pkcs8",s.recipientPrivateKey,A,!0,["decrypt"]):(S=s.recipientPrivateKey,"crypto"in s&&s.crypto&&(I=s.crypto.subtle));const B=await I.decrypt(S.algorithm,S,v.encryptedKey.valueBlock.valueHexView),D=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,V=r.getAlgorithmByOID(D,!0,"contentEncryptionAlgorithm");if(!("name"in V))throw new Error(`Incorrect "contentEncryptionAlgorithm": ${D}`);return r.importKey("raw",B,V,!0,["decrypt"])},o=async m=>{const v=this.recipientInfos[m].value;if(!s.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');const A=r.getAlgorithmByOID(v.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),S=await r.importKey("raw",s.preDefinedData,A,!0,["unwrapKey"]),I=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,B=r.getAlgorithmByOID(I,!0,"contentEncryptionAlgorithm");if(!B.name)throw new Error(`Incorrect "contentEncryptionAlgorithm": ${I}`);return r.unwrapKey("raw",v.encryptedKey.valueBlock.valueHexView,S,A,B,!0,["decrypt"])},c=async m=>{const v=this.recipientInfos[m].value;let A;if(!s.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if(!v.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!v.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{A=new ec({schema:v.keyDerivationAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const S=await r.importKey("raw",s.preDefinedData,"PBKDF2",!1,["deriveKey"]),I=r.getAlgorithmByOID(v.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm"),B=A.prf?r.getAlgorithmByOID(A.prf.algorithmId,!0,"prfAlgorithm").hash.name:"SHA-1",D=new Uint8Array(A.salt.valueBlock.valueHex),V=A.iterationCount,O=await r.deriveKey({name:"PBKDF2",hash:{name:B},salt:D,iterations:V},S,I,!0,["unwrapKey"]),U=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,Q=r.getAlgorithmByOID(U,!0,"contentEncryptionAlgorithm");return r.unwrapKey("raw",v.encryptedKey.valueBlock.valueHexView,O,I,Q,!0,["decrypt"])};let l;switch(this.recipientInfos[e].variant){case 1:l=await a(e);break;case 2:l=await i(e);break;case 3:l=await o(e);break;case 4:l=await c(e);break;default:throw new Error(`Unknown recipient type in array with index ${e}`)}const u=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,f=r.getAlgorithmByOID(u,!0,"contentEncryptionAlgorithm"),d=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex,p=new Uint8Array(d);if(!this.encryptedContentInfo.encryptedContent)throw new Error("Required property `encryptedContent` is empty");const g=this.encryptedContentInfo.getEncryptedContent();return r.decrypt({name:f.name,iv:p},l,g)}}_d.CLASS_NAME="EnvelopedData";const KE="safeContents",j8="parsedValue",Hle="contentInfos";class zx extends Ze{constructor(e={}){super(),this.safeContents=Z(e,KE,zx.defaultValues(KE)),j8 in e&&(this.parsedValue=Z(e,j8,zx.defaultValues(j8))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case KE:return[];case j8:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case KE:return n.length===0;case j8:return n instanceof Object&&Object.keys(n).length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Dn({name:n.contentInfos||ue,value:Is.schema()})]})}fromSchema(e){st(e,[Hle]);const n=tt(e,e,zx.schema({names:{contentInfos:Hle}}));Ge.assertSchema(n,this.className),this.safeContents=Array.from(n.result.contentInfos,r=>new Is({schema:r}))}toSchema(){return new ve({value:Array.from(this.safeContents,e=>e.toSchema())})}toJSON(){return{safeContents:Array.from(this.safeContents,e=>e.toJSON())}}async parseInternalValues(e,n=zn(!0)){if(Nr.assert(e,KE),es.assert(e.safeContents,KE,"Array"),e.safeContents.length!==this.safeContents.length)throw new es('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');this.parsedValue={safeContents:[]};for(const[r,s]of this.safeContents.entries()){const i=e.safeContents[r],a=`parameters.safeContents[${r}]`;switch(s.contentType){case wee:{es.assert(s.content,"this.safeContents[j].content",ut);const o=s.content.getValue();this.parsedValue.safeContents.push({privacyMode:0,value:Eg.fromBER(o)})}break;case V3e:{const o=new _d({schema:s.content});Nr.assert(a,i,"recipientCertificate","recipientKey");const c=i,l=c.recipientCertificate,u=c.recipientKey,f=await o.decrypt(0,{recipientCertificate:l,recipientPrivateKey:u},n);this.parsedValue.safeContents.push({privacyMode:2,value:Eg.fromBER(f)})}break;case $3e:{const o=new g0({schema:s.content});Nr.assert(a,i,"password");const c=i.password,l=await o.decrypt({password:c},n);this.parsedValue.safeContents.push({privacyMode:1,value:Eg.fromBER(l)})}break;default:throw new Error(`Unknown "contentType" for AuthenticatedSafe: " ${s.contentType}`)}}}async makeInternalValues(e,n=zn(!0)){if(!this.parsedValue)throw new Error('Please run "parseValues" first or add "parsedValue" manually');if(es.assert(this.parsedValue,"this.parsedValue","object"),es.assert(this.parsedValue.safeContents,"this.parsedValue.safeContents","Array"),es.assert(e,"parameters","object"),Nr.assert(e,"safeContents"),es.assert(e.safeContents,"parameters.safeContents","Array"),e.safeContents.length!==this.parsedValue.safeContents.length)throw new es('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');this.safeContents=[];for(const[r,s]of this.parsedValue.safeContents.entries())switch(Nr.assert("content",s,"privacyMode","value"),es.assert(s.value,"content.value",Eg),s.privacyMode){case 0:{const i=s.value.toSchema().toBER(!1);this.safeContents.push(new Is({contentType:"1.2.840.113549.1.7.1",content:new ut({valueHex:i})}))}break;case 1:{const i=new g0,a=e.safeContents[r];a.contentToEncrypt=s.value.toSchema().toBER(!1),await i.encrypt(a,n),this.safeContents.push(new Is({contentType:"1.2.840.113549.1.7.6",content:i.toSchema()}))}break;case 2:{const i=new _d,a=s.value.toSchema().toBER(!1),o=e.safeContents[r];switch(Nr.assert(`parameters.safeContents[${r}]`,o,"encryptingCertificate","encryptionAlgorithm"),!0){case o.encryptionAlgorithm.name.toLowerCase()==="aes-cbc":case o.encryptionAlgorithm.name.toLowerCase()==="aes-gcm":break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": ${o.encryptionAlgorithm}`)}switch(!0){case o.encryptionAlgorithm.length===128:case o.encryptionAlgorithm.length===192:case o.encryptionAlgorithm.length===256:break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": ${o.encryptionAlgorithm.length}`)}const c=o.encryptionAlgorithm;i.addRecipientByCertificate(o.encryptingCertificate,{},void 0,n),await i.encrypt(c,a,n),this.safeContents.push(new Is({contentType:"1.2.840.113549.1.7.3",content:i.toSchema()}))}break;default:throw new Error(`Incorrect value for "content.privacyMode": ${s.privacyMode}`)}return this}}zx.CLASS_NAME="AuthenticatedSafe";const uv="hashAlgorithm",ZA="issuerNameHash",XA="issuerKeyHash",fv="serialNumber",klt=[uv,ZA,XA,fv];class Ui extends Ze{static async create(e,n,r=zn(!0)){const s=new Ui;return await s.createForCertificate(e,n,r),s}constructor(e={}){super(),this.hashAlgorithm=Z(e,uv,Ui.defaultValues(uv)),this.issuerNameHash=Z(e,ZA,Ui.defaultValues(ZA)),this.issuerKeyHash=Z(e,XA,Ui.defaultValues(XA)),this.serialNumber=Z(e,fv,Ui.defaultValues(fv)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case uv:return new Ve;case ZA:case XA:return new ut;case fv:return new $e;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case uv:return n.algorithmId===ue&&!("algorithmParams"in n);case ZA:case XA:case fv:return n.isEqual(Ui.defaultValues(fv));default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[Ve.schema(n.hashAlgorithmObject||{names:{blockName:n.hashAlgorithm||ue}}),new ut({name:n.issuerNameHash||ue}),new ut({name:n.issuerKeyHash||ue}),new $e({name:n.serialNumber||ue})]})}fromSchema(e){st(e,klt);const n=tt(e,e,Ui.schema({names:{hashAlgorithm:uv,issuerNameHash:ZA,issuerKeyHash:XA,serialNumber:fv}}));Ge.assertSchema(n,this.className),this.hashAlgorithm=new Ve({schema:n.result.hashAlgorithm}),this.issuerNameHash=n.result.issuerNameHash,this.issuerKeyHash=n.result.issuerKeyHash,this.serialNumber=n.result.serialNumber}toSchema(){return new ve({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}isEqual(e){return!(this.hashAlgorithm.algorithmId!==e.hashAlgorithm.algorithmId||!fn.isEqual(this.issuerNameHash.valueBlock.valueHexView,e.issuerNameHash.valueBlock.valueHexView)||!fn.isEqual(this.issuerKeyHash.valueBlock.valueHexView,e.issuerKeyHash.valueBlock.valueHexView)||!this.serialNumber.isEqual(e.serialNumber))}async createForCertificate(e,n,r=zn(!0)){Nr.assert(n,uv,"issuerCertificate");const s=r.getOIDByAlgorithm({name:n.hashAlgorithm},!0,"hashAlgorithm");this.hashAlgorithm=new Ve({algorithmId:s,algorithmParams:new xi});const i=n.issuerCertificate;this.serialNumber=e.serialNumber;const a=await r.digest({name:n.hashAlgorithm},i.subject.toSchema().toBER(!1));this.issuerNameHash=new ut({valueHex:a});const o=i.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,c=await r.digest({name:n.hashAlgorithm},o);this.issuerKeyHash=new ut({valueHex:c})}}Ui.CLASS_NAME="CertID";const eS="certID",tS="certStatus",nS="thisUpdate",Ny="nextUpdate",dv="singleExtensions",Plt=[eS,tS,nS,Ny,dv];class Bd extends Ze{constructor(e={}){super(),this.certID=Z(e,eS,Bd.defaultValues(eS)),this.certStatus=Z(e,tS,Bd.defaultValues(tS)),this.thisUpdate=Z(e,nS,Bd.defaultValues(nS)),Ny in e&&(this.nextUpdate=Z(e,Ny,Bd.defaultValues(Ny))),dv in e&&(this.singleExtensions=Z(e,dv,Bd.defaultValues(dv))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case eS:return new Ui;case tS:return{};case nS:case Ny:return new Date(0,0,0);case dv:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case eS:return Ui.compareWithDefault("hashAlgorithm",n.hashAlgorithm)&&Ui.compareWithDefault("issuerNameHash",n.issuerNameHash)&&Ui.compareWithDefault("issuerKeyHash",n.issuerKeyHash)&&Ui.compareWithDefault("serialNumber",n.serialNumber);case tS:return Object.keys(n).length===0;case nS:case Ny:return n===Bd.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[Ui.schema(n.certID||{}),new zs({value:[new gn({name:n.certStatus||ue,idBlock:{tagClass:3,tagNumber:0}}),new Re({name:n.certStatus||ue,idBlock:{tagClass:3,tagNumber:1},value:[new Gs,new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new S2]})]}),new gn({name:n.certStatus||ue,idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new Gs({name:n.thisUpdate||ue}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Gs({name:n.nextUpdate||ue})]}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Ti.schema(n.singleExtensions||{})]})]})}fromSchema(e){st(e,Plt);const n=tt(e,e,Bd.schema({names:{certID:{names:{blockName:eS}},certStatus:tS,thisUpdate:nS,nextUpdate:Ny,singleExtensions:{names:{blockName:dv}}}}));Ge.assertSchema(n,this.className),this.certID=new Ui({schema:n.result.certID}),this.certStatus=n.result.certStatus,this.thisUpdate=n.result.thisUpdate.toDate(),Ny in n.result&&(this.nextUpdate=n.result.nextUpdate.toDate()),dv in n.result&&(this.singleExtensions=Array.from(n.result.singleExtensions.valueBlock.value,r=>new ea({schema:r})))}toSchema(){const e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new Gs({valueDate:this.thisUpdate})),this.nextUpdate&&e.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:[new Gs({valueDate:this.nextUpdate})]})),this.singleExtensions&&e.push(new Re({idBlock:{tagClass:3,tagNumber:1},value:[new ve({value:Array.from(this.singleExtensions,n=>n.toSchema())})]})),new ve({value:e})}toJSON(){const e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return this.nextUpdate&&(e.nextUpdate=this.nextUpdate),this.singleExtensions&&(e.singleExtensions=Array.from(this.singleExtensions,n=>n.toJSON())),e}}Bd.CLASS_NAME="SingleResponse";const BO="tbs",hv="version",eT="responderID",tT="producedAt",nT="responses",rS="responseExtensions",W2="ResponseData",t_=`${W2}.${hv}`,sS=`${W2}.${eT}`,sz=`${W2}.${tT}`,iz=`${W2}.${nT}`,n_=`${W2}.${rS}`,Olt=[W2,t_,sS,sz,iz,n_];class wa extends Ze{get tbs(){return fn.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(Z(e,BO,wa.defaultValues(BO))),hv in e&&(this.version=Z(e,hv,wa.defaultValues(hv))),this.responderID=Z(e,eT,wa.defaultValues(eT)),this.producedAt=Z(e,tT,wa.defaultValues(tT)),this.responses=Z(e,nT,wa.defaultValues(nT)),rS in e&&(this.responseExtensions=Z(e,rS,wa.defaultValues(rS))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hv:return 0;case BO:return Ci;case eT:return{};case tT:return new Date(0,0,0);case nT:case rS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case BO:return n.byteLength===0;case eT:return Object.keys(n).length===0;case tT:return n===wa.defaultValues(e);case nT:case rS:return n.length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||W2,value:[new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new $e({name:n.version||t_})]}),new zs({value:[new Re({name:n.responderID||sS,idBlock:{tagClass:3,tagNumber:1},value:[ns.schema(n.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new Re({name:n.responderID||sS,idBlock:{tagClass:3,tagNumber:2},value:[new ut({name:n.ResponseDataByKey||"ResponseData.byKey"})]})]}),new Gs({name:n.producedAt||sz}),new ve({value:[new Dn({name:iz,value:Bd.schema(n.response||{})})]}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Ti.schema(n.extensions||{names:{blockName:n_}})]})]})}fromSchema(e){st(e,Olt);const n=tt(e,e,wa.schema());Ge.assertSchema(n,this.className),this.tbsView=n.result.ResponseData.valueBeforeDecodeView,t_ in n.result&&(this.version=n.result[t_].valueBlock.valueDec),n.result[sS].idBlock.tagNumber===1?this.responderID=new ns({schema:n.result[sS].valueBlock.value[0]}):this.responderID=n.result[sS].valueBlock.value[0],this.producedAt=n.result[sz].toDate(),this.responses=Array.from(n.result[iz],r=>new Bd({schema:r})),n_ in n.result&&(this.responseExtensions=Array.from(n.result[n_].valueBlock.value,r=>new ea({schema:r})))}toSchema(e=!1){let n;if(e===!1){if(!this.tbsView.byteLength)return wa.schema();const r=ia(this.tbsView);Ge.assert(r,"TBS Response Data"),n=r.result}else{const r=[];hv in this&&r.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:[new $e({value:this.version})]})),this.responderID instanceof ns?r.push(new Re({idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]})):r.push(new Re({idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),r.push(new Gs({valueDate:this.producedAt})),r.push(new ve({value:Array.from(this.responses,s=>s.toSchema())})),this.responseExtensions&&r.push(new Re({idBlock:{tagClass:3,tagNumber:1},value:[new ve({value:Array.from(this.responseExtensions,s=>s.toSchema())})]})),n=new ve({value:r})}return n}toJSON(){const e={};return hv in this&&(e.version=this.version),this.responderID&&(e.responderID=this.responderID),this.producedAt&&(e.producedAt=this.producedAt),this.responses&&(e.responses=Array.from(this.responses,n=>n.toJSON())),this.responseExtensions&&(e.responseExtensions=Array.from(this.responseExtensions,n=>n.toJSON())),e}}wa.CLASS_NAME="ResponseData";const mH="trustedCerts",yH="certs",wH="crls",bH="ocsps",vH="checkDate",xH="findOrigin",EH="findIssuer";var kv;(function(t){t[t.unknown=-1]="unknown",t[t.success=0]="success",t[t.noRevocation=11]="noRevocation",t[t.noPath=60]="noPath",t[t.noValidPath=97]="noValidPath"})(kv||(kv={}));class Zy extends Error{constructor(e,n){super(n),this.name=Zy.NAME,this.code=e,this.message=n}}Zy.NAME="ChainValidationError";function Rlt(t,e){for(let n=0;n<e.length;n++)if(fn.isEqual(t.tbsView,e[n].tbsView))return!0;return!1}class K7{constructor(e={}){this.trustedCerts=Z(e,mH,this.defaultValues(mH)),this.certs=Z(e,yH,this.defaultValues(yH)),this.crls=Z(e,wH,this.defaultValues(wH)),this.ocsps=Z(e,bH,this.defaultValues(bH)),this.checkDate=Z(e,vH,this.defaultValues(vH)),this.findOrigin=Z(e,xH,this.defaultValues(xH)),this.findIssuer=Z(e,EH,this.defaultValues(EH))}static defaultFindOrigin(e,n){e.tbsView.byteLength===0&&(e.tbsView=new Uint8Array(e.encodeTBS().toBER()));for(const r of n.certs)if(r.tbsView.byteLength===0&&(r.tbsView=new Uint8Array(r.encodeTBS().toBER())),fn.isEqual(e.tbsView,r.tbsView))return"Intermediate Certificates";for(const r of n.trustedCerts)if(r.tbsView.byteLength===0&&(r.tbsView=new Uint8Array(r.encodeTBS().toBER())),fn.isEqual(e.tbsView,r.tbsView))return"Trusted Certificates";return"Unknown"}async defaultFindIssuer(e,n,r=zn(!0)){const s=[];let i=null,a=null,o=null;if(e.subject.isEqual(e.issuer))try{if(await e.verify(void 0,r))return[e]}catch{}if(e.extensions){for(const l of e.extensions)if(l.extnID===mee&&l.parsedValue instanceof Cw){l.parsedValue.keyIdentifier?i=l.parsedValue.keyIdentifier:(l.parsedValue.authorityCertIssuer&&(a=l.parsedValue.authorityCertIssuer),l.parsedValue.authorityCertSerialNumber&&(o=l.parsedValue.authorityCertSerialNumber));break}}function c(l){if(i!==null&&l.extensions){let f=!1;for(const d of l.extensions)if(d.extnID===Dot&&d.parsedValue){f=!0,fn.isEqual(d.parsedValue.valueBlock.valueHex,i.valueBlock.valueHexView)&&s.push(l);break}if(f)return}let u=!1;o!==null&&(u=l.serialNumber.isEqual(o)),a!==null?l.subject.isEqual(a)&&u&&s.push(l):e.issuer.isEqual(l.subject)&&s.push(l)}for(const l of n.trustedCerts)c(l);for(const l of n.certs)c(l);for(let l=s.length-1;l>=0;l--)try{await e.verify(s[l],r)===!1&&s.splice(l,1)}catch{s.splice(l,1)}return s}defaultValues(e){switch(e){case mH:return[];case yH:return[];case wH:return[];case bH:return[];case vH:return new Date;case xH:return K7.defaultFindOrigin;case EH:return this.defaultFindIssuer;default:throw new Error(`Invalid member name for CertificateChainValidationEngine class: ${e}`)}}async sort(e=!1,n=zn(!0)){const r=[],s=async(g,m)=>{const v=[];function A(I){let B=!0;for(let D=0;D<I.length;D++){for(let V=0;V<I.length;V++)if(V!==D&&I[D]===I[V]){B=!1;break}if(!B)break}return B}if(Rlt(g,this.trustedCerts))return[[g]];const S=await this.findIssuer(g,this,m);if(S.length===0)throw new Error("No valid certificate paths found");for(let I=0;I<S.length;I++){if(fn.isEqual(S[I].tbsView,g.tbsView)){v.push([S[I]]);continue}const B=await s(S[I],m);for(let D=0;D<B.length;D++){const V=B[D].slice();V.splice(0,0,S[I]),A(V)?v.push(V):v.push(B[D])}}return v},i=async g=>{const m=[],v=[],A=[];if(m.push(...r.filter(S=>g.issuer.isEqual(S.subject))),m.length===0)return{status:1,statusMessage:"No certificate's issuers"};if(v.push(...this.crls.filter(S=>S.issuer.isEqual(g.issuer))),v.length===0)return{status:2,statusMessage:"No CRLs for specific certificate issuer"};for(let S=0;S<v.length;S++){const I=v[S];if(!(I.nextUpdate&&I.nextUpdate.value<this.checkDate))for(let B=0;B<m.length;B++)try{if(await v[S].verify({issuerCertificate:m[B]},n)){A.push({crl:v[S],certificate:m[B]});break}}catch{}}return A.length?{status:0,statusMessage:ue,result:A}:{status:3,statusMessage:"No valid CRLs found"}},a=async(g,m)=>{const v=n.getAlgorithmByOID(g.signatureAlgorithm.algorithmId);if(!v.name||!v.hash)return 1;for(let A=0;A<this.ocsps.length;A++){const I=await this.ocsps[A].getCertificateStatus(g,m,n);if(I.isForCertificate)return I.status===0?0:1}return 2};async function o(g,m=!1){let v=!1,A=!1,S=!1,I=!1;if(g.extensions){for(let B=0;B<g.extensions.length;B++){const D=g.extensions[B];if(D.critical&&!D.parsedValue)return{result:!1,resultCode:6,resultMessage:`Unable to parse critical certificate extension: ${D.extnID}`};if(D.extnID===Lot){S=!0;const V=new Uint8Array(D.parsedValue.valueBlock.valueHex);(V[0]&4)===4&&(A=!0),(V[0]&2)===2&&(I=!0)}D.extnID===pee&&"cA"in D.parsedValue&&D.parsedValue.cA===!0&&(v=!0)}if(A===!0&&v===!1)return{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstraints'};if(S===!0&&v===!0&&A===!1)return{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'};if(v===!0&&S===!0&&m&&I===!1)return{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'}}return v===!1?{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"}:{result:!0,resultCode:0,resultMessage:ue}}const c=async(g,m)=>{for(let v=0;v<g.length;v++)if(g[v].notBefore.value>m||g[v].notAfter.value<m)return{result:!1,resultCode:8,resultMessage:"The certificate is either not yet valid or expired"};if(g.length<2)return{result:!1,resultCode:9,resultMessage:"Too short certificate path"};for(let v=g.length-2;v>=0;v--)if(g[v].issuer.isEqual(g[v].subject)===!1&&g[v].issuer.isEqual(g[v+1].subject)===!1)return{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"};if(this.crls.length!==0||this.ocsps.length!==0)for(let v=0;v<g.length-1;v++){let A=2,S={status:0,statusMessage:ue};if(this.ocsps.length!==0)switch(A=await a(g[v],g[v+1]),A){case 0:continue;case 1:return{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"}}if(this.crls.length!==0){if(S=await i(g[v]),S.status===0&&S.result)for(let I=0;I<S.result.length;I++){if(S.result[I].crl.isCertificateRevoked(g[v]))return{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"};if((await o(S.result[I].certificate,!0)).result===!1)return{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"}}else if(e===!1)throw new Zy(kv.noRevocation,`No revocation values found for one of certificates: ${S.statusMessage}`)}else if(A===2)return{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"};if(A===2&&S.status===2&&e){const I=g[v+1];let B=!1;if(I.extensions)for(const D of I.extensions)switch(D.extnID){case M3e:case gee:case yee:B=!0;break}if(B)throw new Zy(kv.noRevocation,`No revocation values found for one of certificates: ${S.statusMessage}`)}}for(const[v,A]of g.entries()){if(!v)continue;if(!(await o(A)).result)return{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"}}return{result:!0}};r.push(...this.trustedCerts),r.push(...this.certs);for(let g=0;g<r.length;g++)for(let m=0;m<r.length;m++)if(g!==m&&fn.isEqual(r[g].tbsView,r[m].tbsView)){r.splice(m,1),g=0;break}const l=r[r.length-1];let u;const f=[l];if(u=await s(l,n),u.length===0)throw new Zy(kv.noPath,"Unable to find certificate path");for(let g=u.length-1;g>=0;g--){let m=!1;for(let v=0;v<u[g].length;v++){const A=u[g][v];for(let S=0;S<this.trustedCerts.length;S++)if(fn.isEqual(A.tbsView,this.trustedCerts[S].tbsView)){m=!0;break}if(m)break}m||u.splice(g,1)}if(u.length===0)throw new Zy(kv.noValidPath,"No valid certificate paths found");let d=u[0].length,p=0;for(let g=0;g<u.length;g++)u[g].length<d&&(d=u[g].length,p=g);for(let g=0;g<u[p].length;g++)f.push(u[p][g]);if(u=await c(f,this.checkDate),u.result===!1)throw u;return f}async verify(e={},n=zn(!0)){function r(c,l){const u=Uy(c),f=Uy(l),d=u.split("."),p=f.split("."),g=d.length,m=p.length;if(g===0||m===0||g<m)return!1;for(let v=0;v<g;v++)if(d[v].length===0)return!1;for(let v=0;v<m;v++)if(p[v].length===0){if(v===0){if(m===1)return!1;continue}return!1}for(let v=0;v<m;v++)if(p[m-1-v].length!==0&&d[g-1-v].localeCompare(p[m-1-v])!==0)return!1;return!0}function s(c,l){const u=Uy(c),f=Uy(l),d=u.split("@"),p=f.split("@");if(d.length===0||p.length===0||d.length<p.length)return!1;if(p.length===1){if(r(d[1],p[0])){const m=d[1].split("."),v=p[0].split(".");return v[0].length===0?!0:m.length===v.length}return!1}return u.localeCompare(f)===0}function i(c,l){let u=Uy(c);const f=Uy(l),d=u.split("/");if(f.split("/").length>1)return!1;if(d.length>1){for(let m=0;m<d.length;m++)if(d[m].length>0&&d[m].charAt(d[m].length-1)!==":"){u=d[m].split(":")[0];break}}if(r(u,f)){const m=u.split("."),v=f.split(".");return v[0].length===0?!0:m.length===v.length}return!1}function a(c,l){const u=c.valueBlock.valueHexView,f=l.valueBlock.valueHexView;if(u.length===4&&f.length===8){for(let d=0;d<4;d++)if((u[d]^f[d])&f[d+4])return!1;return!0}if(u.length===16&&f.length===32){for(let d=0;d<16;d++)if((u[d]^f[d])&f[d+16])return!1;return!0}return!1}function o(c,l){if(c.typesAndValues.length===0||l.typesAndValues.length===0)return!0;if(c.typesAndValues.length<l.typesAndValues.length)return!1;let u=!0,f=0;for(let d=0;d<l.typesAndValues.length;d++){let p=!1;for(let g=f;g<c.typesAndValues.length;g++)if(p=c.typesAndValues[g].isEqual(l.typesAndValues[d]),c.typesAndValues[g].type===l.typesAndValues[d].type&&(u=u&&p),p===!0)if(f===0||f===g){f=g+1;break}else return!1;if(p===!1)return!1}return f===0?!1:u}try{if(this.certs.length===0)throw new Error("Empty certificate array");const c=e.passedWhenNotRevValues||!1,l=e.initialPolicySet||[Ju],u=e.initialExplicitPolicy||!1,f=e.initialPolicyMappingInhibit||!1,d=e.initialInhibitPolicy||!1,p=e.initialPermittedSubtreesSet||[],g=e.initialExcludedSubtreesSet||[],m=e.initialRequiredNameForms||[];let v=u,A=f,S=d;const I=[!1,!1,!1];let B=0,D=0,V=0,O=p,U=g;const Q=m;let ie=1;this.certs=await this.sort(c,n);const G=[];G.push(Ju);const R=[],k=new Array(this.certs.length-1);for(let E=0;E<this.certs.length-1;E++)k[E]=!0;R.push(k);const b=new Array(this.certs.length-1),w=new Array(this.certs.length-1);let N=v?this.certs.length-1:-1;for(let E=this.certs.length-2;E>=0;E--,ie++){const P=this.certs[E];if(P.extensions){for(let _=0;_<P.extensions.length;_++){const H=P.extensions[_];if(H.extnID===D3e){w[E]=H.parsedValue;for(let ne=0;ne<G.length;ne++)if(G[ne]===Ju){delete R[ne][E];break}for(let ne=0;ne<H.parsedValue.certificatePolicies.length;ne++){let $=-1;const te=H.parsedValue.certificatePolicies[ne].policyIdentifier;for(let J=0;J<G.length;J++)if(te===G[J]){$=J;break}if($===-1){G.push(te);const J=new Array(this.certs.length-1);J[E]=!0,R.push(J)}else R[$][E]=!0}}if(H.extnID===L3e){if(A)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};b[E]=H.parsedValue}H.extnID===U3e&&v===!1&&(H.parsedValue.requireExplicitPolicy===0?(v=!0,N=E):I[0]===!1?(I[0]=!0,B=H.parsedValue.requireExplicitPolicy):B=B>H.parsedValue.requireExplicitPolicy?H.parsedValue.requireExplicitPolicy:B,H.parsedValue.inhibitPolicyMapping===0?A=!0:I[1]===!1?(I[1]=!0,D=H.parsedValue.inhibitPolicyMapping+1):D=D>H.parsedValue.inhibitPolicyMapping+1?H.parsedValue.inhibitPolicyMapping+1:D),H.extnID===Kot&&S===!1&&(H.parsedValue.valueBlock.valueDec===0?S=!0:I[2]===!1?(I[2]=!0,V=H.parsedValue.valueBlock.valueDec):V=V>H.parsedValue.valueBlock.valueDec?H.parsedValue.valueBlock.valueDec:V)}if(S===!0){let _=-1;for(let H=0;H<G.length;H++)if(G[H]===Ju){_=H;break}_!==-1&&delete R[0][E]}v===!1&&I[0]===!0&&(B--,B===0&&(v=!0,N=E,I[0]=!1)),A===!1&&I[1]===!0&&(D--,D===0&&(A=!0,I[1]=!1)),S===!1&&I[2]===!0&&(V--,V===0&&(S=!0,I[2]=!1))}}for(let E=0;E<this.certs.length-1;E++)if(E<this.certs.length-2&&typeof b[E+1]<"u")for(let P=0;P<b[E+1].mappings.length;P++){if(b[E+1].mappings[P].issuerDomainPolicy===Ju||b[E+1].mappings[P].subjectDomainPolicy===Ju)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};let _=-1,H=-1;for(let ne=0;ne<G.length;ne++)G[ne]===b[E+1].mappings[P].issuerDomainPolicy&&(_=ne),G[ne]===b[E+1].mappings[P].subjectDomainPolicy&&(H=ne);typeof R[_][E]<"u"&&delete R[_][E];for(let ne=0;ne<w[E].certificatePolicies.length;ne++)if(b[E+1].mappings[P].subjectDomainPolicy===w[E].certificatePolicies[ne].policyIdentifier&&_!==-1&&H!==-1)for(let $=0;$<=E;$++)typeof R[H][$]<"u"&&(R[_][$]=!0,delete R[H][$])}for(let E=0;E<G.length;E++)if(G[E]===Ju)for(let P=0;P<N;P++)delete R[E][P];const L=[];for(let E=0;E<R.length;E++){let P=!0;for(let _=0;_<this.certs.length-1;_++){let H=!1;if(_<N&&G[E]===Ju&&G.length>1){P=!1;break}if(typeof R[E][_]>"u"){if(_>=N){for(let ne=0;ne<G.length;ne++)if(G[ne]===Ju){R[ne][_]===!0&&(H=!0);break}}if(!H){P=!1;break}}}P===!0&&L.push(G[E])}let C=[];if(l.length===1&&l[0]===Ju&&v===!1)C=l;else if(L.length===1&&L[0]===Ju)C=l;else for(let E=0;E<L.length;E++)for(let P=0;P<l.length;P++)if(l[P]===L[E]||l[P]===Ju){C.push(L[E]);break}const T={result:C.length>0,resultCode:0,resultMessage:C.length>0?ue:'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:L,userConstrPolicies:C,explicitPolicyIndicator:v,policyMappings:b,certificatePath:this.certs};if(C.length===0||T.result===!1)return T;ie=1;for(let E=this.certs.length-2;E>=0;E--,ie++){const P=this.certs[E];let _=[],H=[],ne=[];if(P.extensions)for(let ee=0;ee<P.extensions.length;ee++){const X=P.extensions[ee];X.extnID===B3e&&("permittedSubtrees"in X.parsedValue&&(H=H.concat(X.parsedValue.permittedSubtrees)),"excludedSubtrees"in X.parsedValue&&(ne=ne.concat(X.parsedValue.excludedSubtrees))),X.extnID===P3e&&(_=_.concat(X.parsedValue.altNames))}let $=Q.length<=0;for(let ee=0;ee<Q.length;ee++)switch(Q[ee].base.type){case 4:{if(Q[ee].base.value.typesAndValues.length!==P.subject.typesAndValues.length)continue;$=!0;for(let X=0;X<P.subject.typesAndValues.length;X++)if(P.subject.typesAndValues[X].type!==Q[ee].base.value.typesAndValues[X].type){$=!1;break}if($===!0)break}break;default:}if($===!1)throw T.result=!1,T.resultCode=21,T.resultMessage="No necessary name form found",T;const te=[[],[],[],[],[]];for(let ee=0;ee<O.length;ee++)switch(O[ee].base.type){case 1:te[0].push(O[ee]);break;case 2:te[1].push(O[ee]);break;case 4:te[2].push(O[ee]);break;case 6:te[3].push(O[ee]);break;case 7:te[4].push(O[ee]);break;default:}for(let ee=0;ee<5;ee++){let X=!1,j=!1;const se=te[ee];for(let ye=0;ye<se.length;ye++){switch(ee){case 0:if(_.length>0)for(let Ce=0;Ce<_.length;Ce++)_[Ce].type===1&&(j=!0,X=X||s(_[Ce].value,se[ye].base.value));else for(let Ce=0;Ce<P.subject.typesAndValues.length;Ce++)(P.subject.typesAndValues[Ce].type==="1.2.840.113549.1.9.1"||P.subject.typesAndValues[Ce].type==="0.9.2342.19200300.100.1.3")&&(j=!0,X=X||s(P.subject.typesAndValues[Ce].value.valueBlock.value,se[ye].base.value));break;case 1:if(_.length>0)for(let Ce=0;Ce<_.length;Ce++)_[Ce].type===2&&(j=!0,X=X||r(_[Ce].value,se[ye].base.value));break;case 2:j=!0,X=o(P.subject,se[ye].base.value);break;case 3:if(_.length>0)for(let Ce=0;Ce<_.length;Ce++)_[Ce].type===6&&(j=!0,X=X||i(_[Ce].value,se[ye].base.value));break;case 4:if(_.length>0)for(let Ce=0;Ce<_.length;Ce++)_[Ce].type===7&&(j=!0,X=X||a(_[Ce].value,se[ye].base.value));break;default:}if(X)break}if(X===!1&&se.length>0&&j)throw T.result=!1,T.resultCode=41,T.resultMessage='Failed to meet "permitted sub-trees" name constraint',T}let J=!1;for(let ee=0;ee<U.length;ee++){switch(U[ee].base.type){case 1:if(_.length>=0)for(let X=0;X<_.length;X++)_[X].type===1&&(J=J||s(_[X].value,U[ee].base.value));else for(let X=0;X<P.subject.typesAndValues.length;X++)(P.subject.typesAndValues[X].type==="1.2.840.113549.1.9.1"||P.subject.typesAndValues[X].type==="0.9.2342.19200300.100.1.3")&&(J=J||s(P.subject.typesAndValues[X].value.valueBlock.value,U[ee].base.value));break;case 2:if(_.length>0)for(let X=0;X<_.length;X++)_[X].type===2&&(J=J||r(_[X].value,U[ee].base.value));break;case 4:J=J||o(P.subject,U[ee].base.value);break;case 6:if(_.length>0)for(let X=0;X<_.length;X++)_[X].type===6&&(J=J||i(_[X].value,U[ee].base.value));break;case 7:if(_.length>0)for(let X=0;X<_.length;X++)_[X].type===7&&(J=J||a(_[X].value,U[ee].base.value));break;default:}if(J)break}if(J===!0)throw T.result=!1,T.resultCode=42,T.resultMessage='Failed to meet "excluded sub-trees" name constraint',T;O=O.concat(H),U=U.concat(ne)}return T}catch(c){return c instanceof Error?c instanceof Zy?{result:!1,resultCode:c.code,resultMessage:c.message,error:c}:{result:!1,resultCode:kv.unknown,resultMessage:c.message,error:c}:c&&typeof c=="object"&&"resultMessage"in c?c:{result:!1,resultCode:-1,resultMessage:`${c}`}}}}const r_="tbsResponseData",rT="signatureAlgorithm",sT="signature",iS="certs",G7="BasicOCSPResponse",az=`${G7}.${r_}`,oz=`${G7}.${rT}`,cz=`${G7}.${sT}`,s_=`${G7}.${iS}`,_lt=[az,oz,cz,s_];class Cf extends Ze{constructor(e={}){super(),this.tbsResponseData=Z(e,r_,Cf.defaultValues(r_)),this.signatureAlgorithm=Z(e,rT,Cf.defaultValues(rT)),this.signature=Z(e,sT,Cf.defaultValues(sT)),iS in e&&(this.certs=Z(e,iS,Cf.defaultValues(iS))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case r_:return new wa;case rT:return new Ve;case sT:return new ur;case iS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case"type":{let r=wa.compareWithDefault("tbs",n.tbs)&&wa.compareWithDefault("responderID",n.responderID)&&wa.compareWithDefault("producedAt",n.producedAt)&&wa.compareWithDefault("responses",n.responses);return"responseExtensions"in n&&(r=r&&wa.compareWithDefault("responseExtensions",n.responseExtensions)),r}case rT:return n.algorithmId===ue&&!("algorithmParams"in n);case sT:return n.isEqual(Cf.defaultValues(e));case iS:return n.length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||G7,value:[wa.schema(n.tbsResponseData||{names:{blockName:az}}),Ve.schema(n.signatureAlgorithm||{names:{blockName:oz}}),new ur({name:n.signature||cz}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ve({value:[new Dn({name:s_,value:_r.schema(n.certs||{})})]})]})]})}fromSchema(e){st(e,_lt);const n=tt(e,e,Cf.schema());Ge.assertSchema(n,this.className),this.tbsResponseData=new wa({schema:n.result[az]}),this.signatureAlgorithm=new Ve({schema:n.result[oz]}),this.signature=n.result[cz],s_ in n.result&&(this.certs=Array.from(n.result[s_],r=>new _r({schema:r})))}toSchema(){const e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:[new ve({value:Array.from(this.certs,n=>n.toSchema())})]})),new ve({value:e})}toJSON(){const e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,n=>n.toJSON())),e}async getCertificateStatus(e,n,r=zn(!0)){const s={isForCertificate:!1,status:2},i={},a=[];for(const o of this.tbsResponseData.responses){const c=r.getAlgorithmByOID(o.certID.hashAlgorithm.algorithmId,!0,"CertID.hashAlgorithm");if(!i[c.name]){i[c.name]=1;const l=new Ui;a.push(l),await l.createForCertificate(e,{hashAlgorithm:c.name,issuerCertificate:n},r)}}for(const o of this.tbsResponseData.responses)for(const c of a)if(o.certID.isEqual(c)){s.isForCertificate=!0;try{switch(o.certStatus.idBlock.isConstructed){case!0:o.certStatus.idBlock.tagNumber===1&&(s.status=1);break;case!1:switch(o.certStatus.idBlock.tagNumber){case 0:s.status=0;break;case 2:s.status=2;break;default:}break;default:}}catch{}return s}return s}async sign(e,n="SHA-1",r=zn(!0)){if(!e)throw new Error("Need to provide a private key for signing");const s=await r.getSignatureParameters(e,n),i=s.parameters.algorithm;if(!("name"in i))throw new Error("Empty algorithm");this.signatureAlgorithm=s.signatureAlgorithm,this.tbsResponseData.tbsView=new Uint8Array(this.tbsResponseData.toSchema(!0).toBER());const a=await r.signWithPrivateKey(this.tbsResponseData.tbsView,e,{algorithm:i});this.signature=new ur({valueHex:a})}async verify(e={},n=zn(!0)){let r=null,s=-1;const i=e.trustedCerts||[];if(!this.certs)throw new Error("No certificates attached to the BasicOCSPResponse");switch(!0){case this.tbsResponseData.responderID instanceof ns:for(const[l,u]of this.certs.entries())if(u.subject.isEqual(this.tbsResponseData.responderID)){s=l;break}break;case this.tbsResponseData.responderID instanceof ut:for(const[l,u]of this.certs.entries()){const f=await n.digest({name:"sha-1"},u.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);if(E5(f,this.tbsResponseData.responderID.valueBlock.valueHex)){s=l;break}}break;default:throw new Error("Wrong value for responderID")}if(s===-1)throw new Error("Correct certificate was not found in OCSP response");r=this.certs[s];const a=[r];for(const l of this.certs){const u=await W3e(l,r);u&&a.push(u)}if(!(await new K7({certs:a,trustedCerts:i}).verify({},n)).result)throw new Error("Validation of signer's certificate failed");return n.verifyWithPublicKey(this.tbsResponseData.tbsView,this.signature,this.certs[s].subjectPublicKeyInfo,this.signatureAlgorithm)}}Cf.CLASS_NAME="BasicOCSPResponse";const AH="tbs",SH="version",IH="subject",CH="subjectPublicKeyInfo",GE="attributes",iT="signatureAlgorithm",aT="signatureValue",b4="CertificationRequestInfo",Cee=`${b4}.version`,Tee=`${b4}.subject`,Nee=`${b4}.subjectPublicKeyInfo`,OM=`${b4}.attributes`,Blt=[b4,Cee,Tee,Nee,OM,iT,aT];function Mlt(t={}){const e=Z(t,"names",{});return new ve({name:e.CertificationRequestInfo||b4,value:[new $e({name:e.CertificationRequestInfoVersion||Cee}),ns.schema(e.subject||{names:{blockName:Tee}}),Vc.schema({names:{blockName:Nee}}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Dn({optional:!0,name:e.CertificationRequestInfoAttributes||OM,value:Fs.schema(e.attributes||{})})]})]})}class vd extends Ze{get tbs(){return fn.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(Z(e,AH,vd.defaultValues(AH))),this.version=Z(e,SH,vd.defaultValues(SH)),this.subject=Z(e,IH,vd.defaultValues(IH)),this.subjectPublicKeyInfo=Z(e,CH,vd.defaultValues(CH)),GE in e&&(this.attributes=Z(e,GE,vd.defaultValues(GE))),this.signatureAlgorithm=Z(e,iT,vd.defaultValues(iT)),this.signatureValue=Z(e,aT,vd.defaultValues(aT)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case AH:return Ci;case SH:return 0;case IH:return new ns;case CH:return new Vc;case GE:return[];case iT:return new Ve;case aT:return new ur;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({value:[Mlt(n.certificationRequestInfo||{}),new ve({name:n.signatureAlgorithm||iT,value:[new Rt,new xn({optional:!0})]}),new ur({name:n.signatureValue||aT})]})}fromSchema(e){st(e,Blt);const n=tt(e,e,vd.schema());Ge.assertSchema(n,this.className),this.tbsView=n.result.CertificationRequestInfo.valueBeforeDecodeView,this.version=n.result[Cee].valueBlock.valueDec,this.subject=new ns({schema:n.result[Tee]}),this.subjectPublicKeyInfo=new Vc({schema:n.result[Nee]}),OM in n.result&&(this.attributes=Array.from(n.result[OM],r=>new Fs({schema:r}))),this.signatureAlgorithm=new Ve({schema:n.result.signatureAlgorithm}),this.signatureValue=n.result.signatureValue}encodeTBS(){const e=[new $e({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return GE in this&&e.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes||[],n=>n.toSchema())})),new ve({value:e})}toSchema(e=!1){let n;if(e===!1){if(this.tbsView.byteLength===0)return vd.schema();const r=ia(this.tbsView);Ge.assert(r,"PKCS#10 Certificate Request"),n=r.result}else n=this.encodeTBS();return new ve({value:[n,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:pn.ToHex(this.tbsView),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return GE in this&&(e.attributes=Array.from(this.attributes||[],n=>n.toJSON())),e}async sign(e,n="SHA-1",r=zn(!0)){if(!e)throw new Error("Need to provide a private key for signing");const s=await r.getSignatureParameters(e,n),i=s.parameters;this.signatureAlgorithm=s.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const a=await r.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new ur({valueHex:a})}async verify(e=zn(!0)){return e.verifyWithPublicKey(this.tbsView,this.signatureValue,this.subjectPublicKeyInfo,this.signatureAlgorithm)}async getPublicKey(e,n=zn(!0)){return n.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}}vd.CLASS_NAME="CertificationRequest";const pv="digestAlgorithm",gv="digest",Dlt=[pv,gv];class Nf extends Ze{constructor(e={}){super(),this.digestAlgorithm=Z(e,pv,Nf.defaultValues(pv)),this.digest=Z(e,gv,Nf.defaultValues(gv)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pv:return new Ve;case gv:return new ut;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case pv:return Ve.compareWithDefault("algorithmId",n.algorithmId)&&!("algorithmParams"in n);case gv:return n.isEqual(Nf.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[Ve.schema(n.digestAlgorithm||{names:{blockName:pv}}),new ut({name:n.digest||gv})]})}fromSchema(e){st(e,Dlt);const n=tt(e,e,Nf.schema({names:{digestAlgorithm:{names:{blockName:pv}},digest:gv}}));Ge.assertSchema(n,this.className),this.digestAlgorithm=new Ve({schema:n.result.digestAlgorithm}),this.digest=n.result.digest}toSchema(){return new ve({value:[this.digestAlgorithm.toSchema(),this.digest]})}toJSON(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}Nf.CLASS_NAME="DigestInfo";const aS="eContentType",gd="eContent",Llt=[aS,gd];class ml extends Ze{constructor(e={}){if(super(),this.eContentType=Z(e,aS,ml.defaultValues(aS)),gd in e&&(this.eContent=Z(e,gd,ml.defaultValues(gd)),this.eContent.idBlock.tagClass===1&&this.eContent.idBlock.tagNumber===4&&this.eContent.idBlock.isConstructed===!1)){const n=new ut({idBlock:{isConstructed:!0},isConstructed:!0});let r=0;const s=this.eContent.valueBlock.valueHexView.slice().buffer;let i=s.byteLength;for(;i>0;){const a=new Uint8Array(s,r,r+65536>s.byteLength?s.byteLength-r:65536),o=new ArrayBuffer(a.length),c=new Uint8Array(o);for(let l=0;l<c.length;l++)c[l]=a[l];n.valueBlock.value.push(new ut({valueHex:o})),i-=a.length,r+=a.length}this.eContent=n}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case aS:return ue;case gd:return new ut;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case aS:return n===ue;case gd:return n.idBlock.tagClass===1&&n.idBlock.tagNumber===4?n.isEqual(ml.defaultValues(gd)):!1;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.eContentType||ue}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new xn({name:n.eContent||ue})]})]})}fromSchema(e){st(e,Llt);const n=tt(e,e,ml.schema({names:{eContentType:aS,eContent:gd}}));Ge.assertSchema(n,this.className),this.eContentType=n.result.eContentType.valueBlock.toString(),gd in n.result&&(this.eContent=n.result.eContent)}toSchema(){const e=[];return e.push(new Rt({value:this.eContentType})),this.eContent&&ml.compareWithDefault(gd,this.eContent)===!1&&e.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new ve({value:e})}toJSON(){const e={eContentType:this.eContentType};return this.eContent&&ml.compareWithDefault(gd,this.eContent)===!1&&(e.eContent=this.eContent.toJSON()),e}}ml.CLASS_NAME="EncapsulatedContentInfo";const mv="mac",yv="macSalt",Dp="iterations",Ult=[mv,yv,Dp];class Tc extends Ze{constructor(e={}){super(),this.mac=Z(e,mv,Tc.defaultValues(mv)),this.macSalt=Z(e,yv,Tc.defaultValues(yv)),Dp in e&&(this.iterations=Z(e,Dp,Tc.defaultValues(Dp))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case mv:return new Nf;case yv:return new ut;case Dp:return 1;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case mv:return Nf.compareWithDefault("digestAlgorithm",n.digestAlgorithm)&&Nf.compareWithDefault("digest",n.digest);case yv:return n.isEqual(Tc.defaultValues(e));case Dp:return n===Tc.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,optional:n.optional||!0,value:[Nf.schema(n.mac||{names:{blockName:mv}}),new ut({name:n.macSalt||yv}),new $e({optional:!0,name:n.iterations||Dp})]})}fromSchema(e){st(e,Ult);const n=tt(e,e,Tc.schema({names:{mac:{names:{blockName:mv}},macSalt:yv,iterations:Dp}}));Ge.assertSchema(n,this.className),this.mac=new Nf({schema:n.result.mac}),this.macSalt=n.result.macSalt,Dp in n.result&&(this.iterations=n.result.iterations.valueBlock.valueDec)}toSchema(){const e=[this.mac.toSchema(),this.macSalt];return this.iterations!==void 0&&e.push(new $e({value:this.iterations})),new ve({value:e})}toJSON(){const e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return this.iterations!==void 0&&(e.iterations=this.iterations),e}}Tc.CLASS_NAME="MacData";const Pv="hashAlgorithm",Ov="hashedMessage",Flt=[Pv,Ov];class bo extends Ze{static async create(e,n,r=zn(!0)){const s=r.getOIDByAlgorithm({name:e},!0,"hashAlgorithm"),i=await r.digest(e,n);return new bo({hashAlgorithm:new Ve({algorithmId:s,algorithmParams:new xi}),hashedMessage:new ut({valueHex:i})})}constructor(e={}){super(),this.hashAlgorithm=Z(e,Pv,bo.defaultValues(Pv)),this.hashedMessage=Z(e,Ov,bo.defaultValues(Ov)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Pv:return new Ve;case Ov:return new ut;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case Pv:return n.algorithmId===ue&&!("algorithmParams"in n);case Ov:return n.isEqual(bo.defaultValues(e))===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[Ve.schema(n.hashAlgorithm||{}),new ut({name:n.hashedMessage||ue})]})}fromSchema(e){st(e,Flt);const n=tt(e,e,bo.schema({names:{hashAlgorithm:{names:{blockName:Pv}},hashedMessage:Ov}}));Ge.assertSchema(n,this.className),this.hashAlgorithm=new Ve({schema:n.result.hashAlgorithm}),this.hashedMessage=n.result.hashedMessage}toSchema(){return new ve({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}bo.CLASS_NAME="MessageImprint";const oS="reqCert",ky="singleRequestExtensions",Vlt=[oS,ky];let RM=class oT extends Ze{constructor(e={}){super(),this.reqCert=Z(e,oS,oT.defaultValues(oS)),ky in e&&(this.singleRequestExtensions=Z(e,ky,oT.defaultValues(ky))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case oS:return new Ui;case ky:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case oS:return n.isEqual(oT.defaultValues(e));case ky:return n.length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[Ui.schema(n.reqCert||{}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Ti.schema(n.extensions||{names:{blockName:n.singleRequestExtensions||ue}})]})]})}fromSchema(e){st(e,Vlt);const n=tt(e,e,oT.schema({names:{reqCert:{names:{blockName:oS}},extensions:{names:{blockName:ky}}}}));Ge.assertSchema(n,this.className),this.reqCert=new Ui({schema:n.result.reqCert}),ky in n.result&&(this.singleRequestExtensions=Array.from(n.result.singleRequestExtensions.valueBlock.value,r=>new ea({schema:r})))}toSchema(){const e=[];return e.push(this.reqCert.toSchema()),this.singleRequestExtensions&&e.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ve({value:Array.from(this.singleRequestExtensions,n=>n.toSchema())})]})),new ve({value:e})}toJSON(){const e={reqCert:this.reqCert.toJSON()};return this.singleRequestExtensions&&(e.singleRequestExtensions=Array.from(this.singleRequestExtensions,n=>n.toJSON())),e}};RM.CLASS_NAME="Request";const MO="tbs",cS="version",lS="requestorName",DO="requestList",uS="requestExtensions",v4="TBSRequest",i_=`${v4}.${cS}`,a_=`${v4}.${lS}`,lz=`${v4}.requests`,o_=`${v4}.${uS}`,$lt=[v4,i_,a_,lz,o_];class Ua extends Ze{get tbs(){return fn.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(e={}){super(),this.tbsView=new Uint8Array(Z(e,MO,Ua.defaultValues(MO))),cS in e&&(this.version=Z(e,cS,Ua.defaultValues(cS))),lS in e&&(this.requestorName=Z(e,lS,Ua.defaultValues(lS))),this.requestList=Z(e,DO,Ua.defaultValues(DO)),uS in e&&(this.requestExtensions=Z(e,uS,Ua.defaultValues(uS))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case MO:return Ci;case cS:return 0;case lS:return new Hr;case DO:case uS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case MO:return n.byteLength===0;case cS:return n===Ua.defaultValues(e);case lS:return n.type===Hr.defaultValues("type")&&Object.keys(n.value).length===0;case DO:case uS:return n.length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||v4,value:[new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new $e({name:n.TBSRequestVersion||i_})]}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Hr.schema(n.requestorName||{names:{blockName:a_}})]}),new ve({name:n.requestList||"TBSRequest.requestList",value:[new Dn({name:n.requests||lz,value:RM.schema(n.requestNames||{})})]}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[Ti.schema(n.extensions||{names:{blockName:n.requestExtensions||o_}})]})]})}fromSchema(e){st(e,$lt);const n=tt(e,e,Ua.schema());Ge.assertSchema(n,this.className),this.tbsView=n.result.TBSRequest.valueBeforeDecodeView,i_ in n.result&&(this.version=n.result[i_].valueBlock.valueDec),a_ in n.result&&(this.requestorName=new Hr({schema:n.result[a_]})),this.requestList=Array.from(n.result[lz],r=>new RM({schema:r})),o_ in n.result&&(this.requestExtensions=Array.from(n.result[o_].valueBlock.value,r=>new ea({schema:r})))}toSchema(e=!1){let n;if(e===!1){if(this.tbsView.byteLength===0)return Ua.schema();const r=ia(this.tbsView);if(Ge.assert(r,"TBS Request"),!(r.result instanceof ve))throw new Error("ASN.1 result should be SEQUENCE");n=r.result}else{const r=[];this.version!==void 0&&r.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:[new $e({value:this.version})]})),this.requestorName&&r.push(new Re({idBlock:{tagClass:3,tagNumber:1},value:[this.requestorName.toSchema()]})),r.push(new ve({value:Array.from(this.requestList,s=>s.toSchema())})),this.requestExtensions&&r.push(new Re({idBlock:{tagClass:3,tagNumber:2},value:[new ve({value:Array.from(this.requestExtensions,s=>s.toSchema())})]})),n=new ve({value:r})}return n}toJSON(){const e={};return this.version!=null&&(e.version=this.version),this.requestorName&&(e.requestorName=this.requestorName.toJSON()),e.requestList=Array.from(this.requestList,n=>n.toJSON()),this.requestExtensions&&(e.requestExtensions=Array.from(this.requestExtensions,n=>n.toJSON())),e}}Ua.CLASS_NAME="TBSRequest";const WE="signatureAlgorithm",zE="signature",$m="certs";let wv=class fS extends Ze{constructor(e={}){super(),this.signatureAlgorithm=Z(e,WE,fS.defaultValues(WE)),this.signature=Z(e,zE,fS.defaultValues(zE)),$m in e&&(this.certs=Z(e,$m,fS.defaultValues($m))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case WE:return new Ve;case zE:return new ur;case $m:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case WE:return n.algorithmId===ue&&!("algorithmParams"in n);case zE:return n.isEqual(fS.defaultValues(e));case $m:return n.length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[Ve.schema(n.signatureAlgorithm||{}),new ur({name:n.signature||ue}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ve({value:[new Dn({name:n.certs||ue,value:_r.schema({})})]})]})]})}fromSchema(e){st(e,[WE,zE,$m]);const n=tt(e,e,fS.schema({names:{signatureAlgorithm:{names:{blockName:WE}},signature:zE,certs:$m}}));Ge.assertSchema(n,this.className),this.signatureAlgorithm=new Ve({schema:n.result.signatureAlgorithm}),this.signature=n.result.signature,$m in n.result&&(this.certs=Array.from(n.result.certs,r=>new _r({schema:r})))}toSchema(){const e=[];return e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ve({value:Array.from(this.certs,n=>n.toSchema())})]})),new ve({value:e})}toJSON(){const e={signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,n=>n.toJSON())),e}};wv.CLASS_NAME="Signature";const dS="tbsRequest",Py="optionalSignature",jlt=[dS,Py];class rN extends Ze{constructor(e={}){super(),this.tbsRequest=Z(e,dS,rN.defaultValues(dS)),Py in e&&(this.optionalSignature=Z(e,Py,rN.defaultValues(Py))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case dS:return new Ua;case Py:return new wv;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case dS:return Ua.compareWithDefault("tbs",n.tbs)&&Ua.compareWithDefault("version",n.version)&&Ua.compareWithDefault("requestorName",n.requestorName)&&Ua.compareWithDefault("requestList",n.requestList)&&Ua.compareWithDefault("requestExtensions",n.requestExtensions);case Py:return wv.compareWithDefault("signatureAlgorithm",n.signatureAlgorithm)&&wv.compareWithDefault("signature",n.signature)&&wv.compareWithDefault("certs",n.certs);default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||"OCSPRequest",value:[Ua.schema(n.tbsRequest||{names:{blockName:dS}}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[wv.schema(n.optionalSignature||{names:{blockName:Py}})]})]})}fromSchema(e){st(e,jlt);const n=tt(e,e,rN.schema());Ge.assertSchema(n,this.className),this.tbsRequest=new Ua({schema:n.result.tbsRequest}),Py in n.result&&(this.optionalSignature=new wv({schema:n.result.optionalSignature}))}toSchema(e=!1){const n=[];return n.push(this.tbsRequest.toSchema(e)),this.optionalSignature&&n.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.optionalSignature.toSchema()]})),new ve({value:n})}toJSON(){const e={tbsRequest:this.tbsRequest.toJSON()};return this.optionalSignature&&(e.optionalSignature=this.optionalSignature.toJSON()),e}async createForCertificate(e,n,r=zn(!0)){const s=new Ui;await s.createForCertificate(e,n,r),this.tbsRequest.requestList.push(new RM({reqCert:s}))}async sign(e,n="SHA-1",r=zn(!0)){if(Nr.assertEmpty(e,"privateKey","OCSPRequest.sign method"),!this.optionalSignature)throw new Error('Need to create "optionalSignature" field before signing');const s=await r.getSignatureParameters(e,n),i=s.parameters;this.optionalSignature.signatureAlgorithm=s.signatureAlgorithm;const a=this.tbsRequest.toSchema(!0).toBER(!1),o=await r.signWithPrivateKey(a,e,i);this.optionalSignature.signature=new ur({valueHex:o})}verify(){}}rN.CLASS_NAME="OCSPRequest";const hS="responseType",pS="response",Hlt=[hS,pS];class $d extends Ze{constructor(e={}){super(),this.responseType=Z(e,hS,$d.defaultValues(hS)),this.response=Z(e,pS,$d.defaultValues(pS)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hS:return ue;case pS:return new ut;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case hS:return n===ue;case pS:return n.isEqual($d.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new Rt({name:n.responseType||ue}),new ut({name:n.response||ue})]})}fromSchema(e){st(e,Hlt);const n=tt(e,e,$d.schema({names:{responseType:hS,response:pS}}));Ge.assertSchema(n,this.className),this.responseType=n.result.responseType.valueBlock.toString(),this.response=n.result.response}toSchema(){return new ve({value:[new Rt({value:this.responseType}),this.response]})}toJSON(){return{responseType:this.responseType,response:this.response.toJSON()}}}$d.CLASS_NAME="ResponseBytes";const JE="responseStatus",Ap="responseBytes";class o3 extends Ze{constructor(e={}){super(),this.responseStatus=Z(e,JE,o3.defaultValues(JE)),Ap in e&&(this.responseBytes=Z(e,Ap,o3.defaultValues(Ap))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case JE:return new S2;case Ap:return new $d;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case JE:return n.isEqual(o3.defaultValues(e));case Ap:return $d.compareWithDefault("responseType",n.responseType)&&$d.compareWithDefault("response",n.response);default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||"OCSPResponse",value:[new S2({name:n.responseStatus||JE}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[$d.schema(n.responseBytes||{names:{blockName:Ap}})]})]})}fromSchema(e){st(e,[JE,Ap]);const n=tt(e,e,o3.schema());Ge.assertSchema(n,this.className),this.responseStatus=n.result.responseStatus,Ap in n.result&&(this.responseBytes=new $d({schema:n.result.responseBytes}))}toSchema(){const e=[];return e.push(this.responseStatus),this.responseBytes&&e.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:[this.responseBytes.toSchema()]})),new ve({value:e})}toJSON(){const e={responseStatus:this.responseStatus.toJSON()};return this.responseBytes&&(e.responseBytes=this.responseBytes.toJSON()),e}async getCertificateStatus(e,n,r=zn(!0)){let s;const i={isForCertificate:!1,status:2};if(!this.responseBytes||this.responseBytes.responseType!==WR)return i;try{const a=ia(this.responseBytes.response.valueBlock.valueHexView);Ge.assert(a,"Basic OCSP response"),s=new Cf({schema:a.result})}catch{return i}return s.getCertificateStatus(e,n,r)}async sign(e,n,r=zn(!0)){var s;if(this.responseBytes&&this.responseBytes.responseType===WR)return Cf.fromBER(this.responseBytes.response.valueBlock.valueHexView).sign(e,n,r);throw new Error(`Unknown ResponseBytes type: ${((s=this.responseBytes)===null||s===void 0?void 0:s.responseType)||"Unknown"}`)}async verify(e=null,n=zn(!0)){var r;if(!(Ap in this))throw new Error("Empty ResponseBytes field");if(this.responseBytes&&this.responseBytes.responseType===WR){const s=Cf.fromBER(this.responseBytes.response.valueBlock.valueHexView);return e!==null&&(s.certs||(s.certs=[]),s.certs.push(e)),s.verify({},n)}throw new Error(`Unknown ResponseBytes type: ${((r=this.responseBytes)===null||r===void 0?void 0:r.responseType)||"Unknown"}`)}}o3.CLASS_NAME="OCSPResponse";const f1="type",Lp="attributes",LO="encodedValue",qlt=[Lp];class Zs extends Ze{constructor(e={}){super(),this.type=Z(e,f1,Zs.defaultValues(f1)),this.attributes=Z(e,Lp,Zs.defaultValues(Lp)),this.encodedValue=Z(e,LO,Zs.defaultValues(LO)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case f1:return-1;case Lp:return[];case LO:return Ci;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case f1:return n===Zs.defaultValues(f1);case Lp:return n.length===0;case LO:return n.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new Re({name:n.blockName||ue,optional:!0,idBlock:{tagClass:3,tagNumber:n.tagNumber||0},value:[new Dn({name:n.attributes||ue,value:Fs.schema()})]})}fromSchema(e){st(e,qlt);const n=tt(e,e,Zs.schema({names:{tagNumber:this.type,attributes:Lp}}));Ge.assertSchema(n,this.className),this.type=n.result.idBlock.tagNumber,this.encodedValue=fn.toArrayBuffer(n.result.valueBeforeDecodeView);const r=new Uint8Array(this.encodedValue);if(r[0]=49,!(Lp in n.result)){if(this.type===0)throw new Error("Wrong structure of SignedUnsignedAttributes");return}this.attributes=Array.from(n.result.attributes,s=>new Fs({schema:s}))}toSchema(){if(Zs.compareWithDefault(f1,this.type)||Zs.compareWithDefault(Lp,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new Re({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){if(Zs.compareWithDefault(f1,this.type)||Zs.compareWithDefault(Lp,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,e=>e.toJSON())}}}Zs.CLASS_NAME="SignedAndUnsignedAttributes";const gS="version",bv="sid",mS="digestAlgorithm",Oy="signedAttrs",yS="signatureAlgorithm",cT="signature",Ry="unsignedAttrs",_b="SignerInfo",uz=`${_b}.${gS}`,lT=`${_b}.${bv}`,fz=`${_b}.${mS}`,c_=`${_b}.${Oy}`,dz=`${_b}.${yS}`,hz=`${_b}.${cT}`,l_=`${_b}.${Ry}`,Klt=[uz,lT,fz,c_,dz,hz,l_];class pi extends Ze{constructor(e={}){super(),this.version=Z(e,gS,pi.defaultValues(gS)),this.sid=Z(e,bv,pi.defaultValues(bv)),this.digestAlgorithm=Z(e,mS,pi.defaultValues(mS)),Oy in e&&(this.signedAttrs=Z(e,Oy,pi.defaultValues(Oy))),this.signatureAlgorithm=Z(e,yS,pi.defaultValues(yS)),this.signature=Z(e,cT,pi.defaultValues(cT)),Ry in e&&(this.unsignedAttrs=Z(e,Ry,pi.defaultValues(Ry))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gS:return 0;case bv:return new xn;case mS:return new Ve;case Oy:return new Zs({type:0});case yS:return new Ve;case cT:return new ut;case Ry:return new Zs({type:1});default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case gS:return pi.defaultValues(gS)===n;case bv:return n instanceof xn;case mS:return n instanceof Ve?n.isEqual(pi.defaultValues(mS)):!1;case Oy:return Zs.compareWithDefault("type",n.type)&&Zs.compareWithDefault("attributes",n.attributes)&&Zs.compareWithDefault("encodedValue",n.encodedValue);case yS:return n instanceof Ve?n.isEqual(pi.defaultValues(yS)):!1;case cT:case Ry:return Zs.compareWithDefault("type",n.type)&&Zs.compareWithDefault("attributes",n.attributes)&&Zs.compareWithDefault("encodedValue",n.encodedValue);default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:_b,value:[new $e({name:n.version||uz}),new zs({value:[Gi.schema(n.sidSchema||{names:{blockName:lT}}),new zs({value:[new Re({optional:!0,name:n.sid||lT,idBlock:{tagClass:3,tagNumber:0},value:[new ut]}),new gn({optional:!0,name:n.sid||lT,idBlock:{tagClass:3,tagNumber:0}})]})]}),Ve.schema(n.digestAlgorithm||{names:{blockName:fz}}),Zs.schema(n.signedAttrs||{names:{blockName:c_,tagNumber:0}}),Ve.schema(n.signatureAlgorithm||{names:{blockName:dz}}),new ut({name:n.signature||hz}),Zs.schema(n.unsignedAttrs||{names:{blockName:l_,tagNumber:1}})]})}fromSchema(e){st(e,Klt);const n=tt(e,e,pi.schema());Ge.assertSchema(n,this.className),this.version=n.result[uz].valueBlock.valueDec;const r=n.result[lT];r.idBlock.tagClass===1?this.sid=new Gi({schema:r}):this.sid=r,this.digestAlgorithm=new Ve({schema:n.result[fz]}),c_ in n.result&&(this.signedAttrs=new Zs({type:0,schema:n.result[c_]})),this.signatureAlgorithm=new Ve({schema:n.result[dz]}),this.signature=n.result[hz],l_ in n.result&&(this.unsignedAttrs=new Zs({type:1,schema:n.result[l_]}))}toSchema(){if(pi.compareWithDefault(bv,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e=[];return e.push(new $e({value:this.version})),this.sid instanceof Gi?e.push(this.sid.toSchema()):e.push(this.sid),e.push(this.digestAlgorithm.toSchema()),this.signedAttrs&&pi.compareWithDefault(Oy,this.signedAttrs)===!1&&e.push(this.signedAttrs.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.unsignedAttrs&&pi.compareWithDefault(Ry,this.unsignedAttrs)===!1&&e.push(this.unsignedAttrs.toSchema()),new ve({value:e})}toJSON(){if(pi.compareWithDefault(bv,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e={version:this.version,digestAlgorithm:this.digestAlgorithm.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.sid instanceof xn||(e.sid=this.sid.toJSON()),this.signedAttrs&&pi.compareWithDefault(Oy,this.signedAttrs)===!1&&(e.signedAttrs=this.signedAttrs.toJSON()),this.unsignedAttrs&&pi.compareWithDefault(Ry,this.unsignedAttrs)===!1&&(e.unsignedAttrs=this.unsignedAttrs.toJSON()),e}}pi.CLASS_NAME="SignerInfo";const uT="version",fT="policy",dT="messageImprint",hT="serialNumber",pT="genTime",vv="ordering",xv="nonce",wS="accuracy",bS="tsa",vS="extensions",ph="TSTInfo",pz=`${ph}.${uT}`,gz=`${ph}.${fT}`,mz=`${ph}.${dT}`,yz=`${ph}.${hT}`,wz=`${ph}.${pT}`,u_=`${ph}.${wS}`,f_=`${ph}.${vv}`,d_=`${ph}.${xv}`,h_=`${ph}.${bS}`,p_=`${ph}.${vS}`,Glt=[pz,gz,mz,yz,wz,u_,f_,d_,h_,p_];class Jo extends Ze{constructor(e={}){super(),this.version=Z(e,uT,Jo.defaultValues(uT)),this.policy=Z(e,fT,Jo.defaultValues(fT)),this.messageImprint=Z(e,dT,Jo.defaultValues(dT)),this.serialNumber=Z(e,hT,Jo.defaultValues(hT)),this.genTime=Z(e,pT,Jo.defaultValues(pT)),wS in e&&(this.accuracy=Z(e,wS,Jo.defaultValues(wS))),vv in e&&(this.ordering=Z(e,vv,Jo.defaultValues(vv))),xv in e&&(this.nonce=Z(e,xv,Jo.defaultValues(xv))),bS in e&&(this.tsa=Z(e,bS,Jo.defaultValues(bS))),vS in e&&(this.extensions=Z(e,vS,Jo.defaultValues(vS))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case uT:return 0;case fT:return ue;case dT:return new bo;case hT:return new $e;case pT:return new Date(0,0,0);case wS:return new lu;case vv:return!1;case xv:return new $e;case bS:return new Hr;case vS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case uT:case fT:case pT:case vv:return n===Jo.defaultValues(vv);case dT:return bo.compareWithDefault(Pv,n.hashAlgorithm)&&bo.compareWithDefault(Ov,n.hashedMessage);case hT:case xv:return n.isEqual(Jo.defaultValues(xv));case wS:return lu.compareWithDefault(Qm,n.seconds)&&lu.compareWithDefault(Zm,n.millis)&&lu.compareWithDefault(Xm,n.micros);case bS:return Hr.compareWithDefault(SI,n.type)&&Hr.compareWithDefault(II,n.value);case vS:return n.length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ph,value:[new $e({name:n.version||pz}),new Rt({name:n.policy||gz}),bo.schema(n.messageImprint||{names:{blockName:mz}}),new $e({name:n.serialNumber||yz}),new Gs({name:n.genTime||wz}),lu.schema(n.accuracy||{names:{blockName:u_}}),new U0({name:n.ordering||f_,optional:!0}),new $e({name:n.nonce||d_,optional:!0}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Hr.schema(n.tsa||{names:{blockName:h_}})]}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Dn({name:n.extensions||p_,value:ea.schema(n.extension||{})})]})]})}fromSchema(e){st(e,Glt);const n=tt(e,e,Jo.schema());Ge.assertSchema(n,this.className),this.version=n.result[pz].valueBlock.valueDec,this.policy=n.result[gz].valueBlock.toString(),this.messageImprint=new bo({schema:n.result[mz]}),this.serialNumber=n.result[yz],this.genTime=n.result[wz].toDate(),u_ in n.result&&(this.accuracy=new lu({schema:n.result[u_]})),f_ in n.result&&(this.ordering=n.result[f_].valueBlock.value),d_ in n.result&&(this.nonce=n.result[d_]),h_ in n.result&&(this.tsa=new Hr({schema:n.result[h_]})),p_ in n.result&&(this.extensions=Array.from(n.result[p_],r=>new ea({schema:r})))}toSchema(){const e=[];return e.push(new $e({value:this.version})),e.push(new Rt({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new Gs({valueDate:this.genTime})),this.accuracy&&e.push(this.accuracy.toSchema()),this.ordering!==void 0&&e.push(new U0({value:this.ordering})),this.nonce&&e.push(this.nonce),this.tsa&&e.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),this.extensions&&e.push(new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,n=>n.toSchema())})),new ve({value:e})}toJSON(){const e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return this.accuracy&&(e.accuracy=this.accuracy.toJSON()),this.ordering!==void 0&&(e.ordering=this.ordering),this.nonce&&(e.nonce=this.nonce.toJSON()),this.tsa&&(e.tsa=this.tsa.toJSON()),this.extensions&&(e.extensions=Array.from(this.extensions,n=>n.toJSON())),e}async verify(e,n=zn(!0)){if(!e.data)throw new Error('"data" is a mandatory attribute for TST_INFO verification');const r=e.data;if(e.notBefore&&this.genTime<e.notBefore)throw new Error("Generation time for TSTInfo object is less than notBefore value");if(e.notAfter&&this.genTime>e.notAfter)throw new Error("Generation time for TSTInfo object is more than notAfter value");const s=n.getAlgorithmByOID(this.messageImprint.hashAlgorithm.algorithmId,!0,"MessageImprint.hashAlgorithm"),i=await n.digest(s.name,new Uint8Array(r));return fn.isEqual(i,this.messageImprint.hashedMessage.valueBlock.valueHexView)}}Jo.CLASS_NAME="TSTInfo";const xS="version",gT="digestAlgorithms",mT="encapContentInfo",ES="certificates",AS="crls",yT="signerInfos",H8="ocsps",z2="SignedData",bz=`${z2}.${xS}`,g_=`${z2}.${gT}`,vz=`${z2}.${mT}`,m_=`${z2}.${ES}`,y_=`${z2}.${AS}`,w_=`${z2}.${yT}`,Wlt=[bz,g_,vz,m_,y_,w_];class Go extends Error{constructor({message:e,code:n=0,date:r=new Date,signatureVerified:s=null,signerCertificate:i=null,signerCertificateVerified:a=null,timestampSerial:o=null,certificatePath:c=[]}){super(e),this.name="SignedDataVerifyError",this.date=r,this.code=n,this.timestampSerial=o,this.signatureVerified=s,this.signerCertificate=i,this.signerCertificateVerified=a,this.certificatePath=c}}class po extends Ze{constructor(e={}){super(),this.version=Z(e,xS,po.defaultValues(xS)),this.digestAlgorithms=Z(e,gT,po.defaultValues(gT)),this.encapContentInfo=Z(e,mT,po.defaultValues(mT)),ES in e&&(this.certificates=Z(e,ES,po.defaultValues(ES))),AS in e&&(this.crls=Z(e,AS,po.defaultValues(AS))),H8 in e&&(this.ocsps=Z(e,H8,po.defaultValues(H8))),this.signerInfos=Z(e,yT,po.defaultValues(yT)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xS:return 0;case gT:return[];case mT:return new ml;case ES:return[];case AS:return[];case H8:return[];case yT:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case xS:return n===po.defaultValues(xS);case mT:return ml.compareWithDefault("eContentType",n.eContentType)&&ml.compareWithDefault("eContent",n.eContent);case gT:case ES:case AS:case H8:case yT:return n.length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return n.optional===void 0&&(n.optional=!1),new ve({name:n.blockName||z2,optional:n.optional,value:[new $e({name:n.version||bz}),new Ei({value:[new Dn({name:n.digestAlgorithms||g_,value:Ve.schema()})]}),ml.schema(n.encapContentInfo||{names:{blockName:vz}}),new Re({name:n.certificates||m_,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:E0.schema().valueBlock.value}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Bg.schema(n.crls||{names:{crls:y_}}).valueBlock.value}),new Ei({value:[new Dn({name:n.signerInfos||w_,value:pi.schema()})]})]})}fromSchema(e){st(e,Wlt);const n=tt(e,e,po.schema());if(Ge.assertSchema(n,this.className),this.version=n.result[bz].valueBlock.valueDec,g_ in n.result&&(this.digestAlgorithms=Array.from(n.result[g_],r=>new Ve({schema:r}))),this.encapContentInfo=new ml({schema:n.result[vz]}),m_ in n.result){const r=new E0({schema:new Ei({value:n.result[m_].valueBlock.value})});this.certificates=r.certificates.slice(0)}y_ in n.result&&(this.crls=Array.from(n.result[y_],r=>r.idBlock.tagClass===1?new Qi({schema:r}):(r.idBlock.tagClass=1,r.idBlock.tagNumber=16,new _g({schema:r})))),w_ in n.result&&(this.signerInfos=Array.from(n.result[w_],r=>new pi({schema:r})))}toSchema(e=!1){const n=[];if(this.certificates&&this.certificates.length&&this.certificates.some(r=>r instanceof Zw)||this.crls&&this.crls.length&&this.crls.some(r=>r instanceof _g)?this.version=5:this.certificates&&this.certificates.length&&this.certificates.some(r=>r instanceof yu)?this.version=4:this.certificates&&this.certificates.length&&this.certificates.some(r=>r instanceof vg)||this.signerInfos.some(r=>r.version===3)||this.encapContentInfo.eContentType!==po.ID_DATA?this.version=3:this.version=1,n.push(new $e({value:this.version})),n.push(new Ei({value:Array.from(this.digestAlgorithms,r=>r.toSchema())})),n.push(this.encapContentInfo.toSchema()),this.certificates){const s=new E0({certificates:this.certificates}).toSchema();n.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:s.valueBlock.value}))}return this.crls&&n.push(new Re({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,r=>{if(r instanceof _g){const s=r.toSchema();return s.idBlock.tagClass=3,s.idBlock.tagNumber=1,s}return r.toSchema(e)})})),n.push(new Ei({value:Array.from(this.signerInfos,r=>r.toSchema())})),new ve({value:n})}toJSON(){const e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,n=>n.toJSON()),encapContentInfo:this.encapContentInfo.toJSON(),signerInfos:Array.from(this.signerInfos,n=>n.toJSON())};return this.certificates&&(e.certificates=Array.from(this.certificates,n=>n.toJSON())),this.crls&&(e.crls=Array.from(this.crls,n=>n.toJSON())),e}async verify({signer:e=-1,data:n=Ci,trustedCerts:r=[],checkDate:s=new Date,checkChain:i=!1,passedWhenNotRevValues:a=!1,extendedMode:o=!1,findOrigin:c=null,findIssuer:l=null}={},u=zn(!0)){let f=null,d=null;try{let p=Ci,g=ue,m=[];const v=this.signerInfos[e];if(!v)throw new Go({date:s,code:1,message:"Unable to get signer by supplied index"});if(!this.certificates)throw new Go({date:s,code:2,message:"No certificates attached to this signed data"});if(v.sid instanceof Gi){for(const B of this.certificates)if(B instanceof _r&&B.issuer.isEqual(v.sid.issuer)&&B.serialNumber.isEqual(v.sid.serialNumber)){f=B;break}}else{const B=v.sid,D=B.idBlock.isConstructed?B.valueBlock.value[0].valueBlock.valueHex:B.valueBlock.valueHex;for(const V of this.certificates){if(!(V instanceof _r))continue;const O=await u.digest({name:"sha-1"},V.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);if(E5(O,D)){f=V;break}}}if(!f)throw new Go({date:s,code:3,message:"Unable to find signer certificate"});if(this.encapContentInfo.eContentType===Qot){if(!this.encapContentInfo.eContent)throw new Go({date:s,code:15,message:"Error during verification: TSTInfo eContent is empty",signatureVerified:null,signerCertificate:f,timestampSerial:d,signerCertificateVerified:!0});let B;try{B=Jo.fromBER(this.encapContentInfo.eContent.valueBlock.valueHexView)}catch{throw new Go({date:s,code:15,message:"Error during verification: TSTInfo wrong ASN.1 schema ",signatureVerified:null,signerCertificate:f,timestampSerial:d,signerCertificateVerified:!0})}if(s=B.genTime,d=B.serialNumber.valueBlock.valueHexView.slice().buffer,n.byteLength===0)throw new Go({date:s,code:4,message:"Missed detached data input array"});if(!await B.verify({data:n},u))throw new Go({date:s,code:15,message:"Error during verification: TSTInfo verification is failed",signatureVerified:!1,signerCertificate:f,timestampSerial:d,signerCertificateVerified:!0})}if(i){const B=this.certificates.filter(U=>U instanceof _r&&!!W3e(U,f)),D={checkDate:s,certs:B,trustedCerts:r};l&&(D.findIssuer=l),c&&(D.findOrigin=c);const V=new K7(D);if(V.certs.push(f),this.crls)for(const U of this.crls)"thisUpdate"in U?V.crls.push(U):U.otherRevInfoFormat===WR&&V.ocsps.push(new Cf({schema:U.otherRevInfo}));this.ocsps&&V.ocsps.push(...this.ocsps);const O=await V.verify({passedWhenNotRevValues:a},u).catch(U=>{throw new Go({date:s,code:5,message:`Validation of signer's certificate failed with error: ${U instanceof Object?U.resultMessage:U}`,signerCertificate:f,signerCertificateVerified:!1})});if(O.certificatePath&&(m=O.certificatePath),!O.result)throw new Go({date:s,code:5,message:`Validation of signer's certificate failed: ${O.resultMessage}`,signerCertificate:f,signerCertificateVerified:!1})}const A=u.getAlgorithmByOID(v.digestAlgorithm.algorithmId);if(!("name"in A))throw new Go({date:s,code:7,message:`Unsupported signature algorithm: ${v.digestAlgorithm.algorithmId}`,signerCertificate:f,signerCertificateVerified:!0});g=A.name;const S=this.encapContentInfo.eContent;if(S)S.idBlock.tagClass===1&&S.idBlock.tagNumber===4?n=S.getValue():n=S.valueBlock.valueBeforeDecodeView.slice().buffer;else if(n.byteLength===0)throw new Go({date:s,code:8,message:"Missed detached data input array",signerCertificate:f,signerCertificateVerified:!0});if(v.signedAttrs){let B=!1,D=!1;for(const V of v.signedAttrs.attributes)if(V.type==="1.2.840.113549.1.9.3"&&(B=!0),V.type==="1.2.840.113549.1.9.4"&&(D=!0,p=V.values[0].valueBlock.valueHex),B&&D)break;if(B===!1)throw new Go({date:s,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signerCertificate:f,signerCertificateVerified:!0});if(D===!1)throw new Go({date:s,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:f,signerCertificateVerified:!0})}if(v.signedAttrs){const B=await u.digest(g,new Uint8Array(n));if(!E5(B,p))throw new Go({date:s,code:15,message:"Error during verification: Message digest doesn't match",signatureVerified:null,signerCertificate:f,timestampSerial:d,signerCertificateVerified:!0});n=v.signedAttrs.encodedValue}const I=v.signatureAlgorithm.algorithmId==="1.2.840.113549.1.1.1"?await u.verifyWithPublicKey(n,v.signature,f.subjectPublicKeyInfo,v.signatureAlgorithm,g):await u.verifyWithPublicKey(n,v.signature,f.subjectPublicKeyInfo,v.signatureAlgorithm);return o?{date:s,code:14,message:ue,signatureVerified:I,signerCertificate:f,timestampSerial:d,signerCertificateVerified:!0,certificatePath:m}:I}catch(p){throw p instanceof Go?p:new Go({date:s,code:15,message:`Error during verification: ${p instanceof Error?p.message:p}`,signatureVerified:null,signerCertificate:f,timestampSerial:d,signerCertificateVerified:!0})}}async sign(e,n,r="SHA-1",s=Ci,i=zn(!0)){var a;if(!e)throw new Error("Need to provide a private key for signing");const o=this.signerInfos[n];if(!o)throw new RangeError("SignerInfo index is out of range");!(!((a=o.signedAttrs)===null||a===void 0)&&a.attributes.length)&&"hash"in e.algorithm&&"hash"in e.algorithm&&e.algorithm.hash&&(r=e.algorithm.hash.name);const c=i.getOIDByAlgorithm({name:r},!0,"hashAlgorithm");this.digestAlgorithms.filter(d=>d.algorithmId===c).length===0&&this.digestAlgorithms.push(new Ve({algorithmId:c,algorithmParams:new xi})),o.digestAlgorithm=new Ve({algorithmId:c,algorithmParams:new xi});const l=await i.getSignatureParameters(e,r),u=l.parameters;if(o.signatureAlgorithm=l.signatureAlgorithm,o.signedAttrs)if(o.signedAttrs.encodedValue.byteLength!==0)s=o.signedAttrs.encodedValue;else{s=o.signedAttrs.toSchema().toBER();const d=fn.toUint8Array(s);d[0]=49}else{const d=this.encapContentInfo.eContent;if(d)d.idBlock.tagClass===1&&d.idBlock.tagNumber===4?s=d.getValue():s=d.valueBlock.valueBeforeDecodeView.slice().buffer;else if(s.byteLength===0)throw new Error("Missed detached data input array")}const f=await i.signWithPrivateKey(s,e,u);o.signature=new ut({valueHex:f})}}po.CLASS_NAME="SignedData";po.ID_DATA=wee;const Ev="version",Av="authSafe",Up="macData",q8="parsedValue",zlt=[Ev,Av,Up];class Vy extends Ze{constructor(e={}){super(),this.version=Z(e,Ev,Vy.defaultValues(Ev)),this.authSafe=Z(e,Av,Vy.defaultValues(Av)),Up in e&&(this.macData=Z(e,Up,Vy.defaultValues(Up))),q8 in e&&(this.parsedValue=Z(e,q8,Vy.defaultValues(q8))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ev:return 3;case Av:return new Is;case Up:return new Tc;case q8:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case Ev:return n===Vy.defaultValues(e);case Av:return Is.compareWithDefault("contentType",n.contentType)&&Is.compareWithDefault("content",n.content);case Up:return Tc.compareWithDefault("mac",n.mac)&&Tc.compareWithDefault("macSalt",n.macSalt)&&Tc.compareWithDefault("iterations",n.iterations);case q8:return n instanceof Object&&Object.keys(n).length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.version||Ev}),Is.schema(n.authSafe||{names:{blockName:Av}}),Tc.schema(n.macData||{names:{blockName:Up,optional:!0}})]})}fromSchema(e){st(e,zlt);const n=tt(e,e,Vy.schema({names:{version:Ev,authSafe:{names:{blockName:Av}},macData:{names:{blockName:Up}}}}));Ge.assertSchema(n,this.className),this.version=n.result.version.valueBlock.valueDec,this.authSafe=new Is({schema:n.result.authSafe}),Up in n.result&&(this.macData=new Tc({schema:n.result.macData}))}toSchema(){const e=[new $e({value:this.version}),this.authSafe.toSchema()];return this.macData&&e.push(this.macData.toSchema()),new ve({value:e})}toJSON(){const e={version:this.version,authSafe:this.authSafe.toJSON()};return this.macData&&(e.macData=this.macData.toJSON()),e}async makeInternalValues(e={},n=zn(!0)){if(es.assert(e,"parameters","object"),!this.parsedValue)throw new Error('Please call "parseValues" function first in order to make "parsedValue" data');switch(Nr.assertEmpty(this.parsedValue.integrityMode,"integrityMode","parsedValue"),Nr.assertEmpty(this.parsedValue.authenticatedSafe,"authenticatedSafe","parsedValue"),this.parsedValue.integrityMode){case 0:{if(!("iterations"in e))throw new Nr("iterations");Nr.assertEmpty(e.pbkdf2HashAlgorithm,"pbkdf2HashAlgorithm"),Nr.assertEmpty(e.hmacHashAlgorithm,"hmacHashAlgorithm"),Nr.assertEmpty(e.password,"password");const r=new ArrayBuffer(64),s=new Uint8Array(r);n.getRandomValues(s);const i=this.parsedValue.authenticatedSafe.toSchema().toBER(!1);this.authSafe=new Is({contentType:Is.DATA,content:new ut({valueHex:i})});const a=await n.stampDataWithPassword({password:e.password,hashAlgorithm:e.hmacHashAlgorithm,salt:r,iterationCount:e.iterations,contentToStamp:i});this.macData=new Tc({mac:new Nf({digestAlgorithm:new Ve({algorithmId:n.getOIDByAlgorithm({name:e.hmacHashAlgorithm},!0,"hmacHashAlgorithm")}),digest:new ut({valueHex:a})}),macSalt:new ut({valueHex:r}),iterations:e.iterations})}break;case 1:{if(!("signingCertificate"in e))throw new Nr("signingCertificate");Nr.assertEmpty(e.privateKey,"privateKey"),Nr.assertEmpty(e.hashAlgorithm,"hashAlgorithm");const r=this.parsedValue.authenticatedSafe.toSchema().toBER(!1),s=new po({version:1,encapContentInfo:new ml({eContentType:"1.2.840.113549.1.7.1",eContent:new ut({valueHex:r})}),certificates:[e.signingCertificate]}),i=await n.digest({name:e.hashAlgorithm},new Uint8Array(r)),a=[];a.push(new Fs({type:"1.2.840.113549.1.9.3",values:[new Rt({value:"1.2.840.113549.1.7.1"})]})),a.push(new Fs({type:"1.2.840.113549.1.9.5",values:[new S5({valueDate:new Date})]})),a.push(new Fs({type:"1.2.840.113549.1.9.4",values:[new ut({valueHex:i})]})),s.signerInfos.push(new pi({version:1,sid:new Gi({issuer:e.signingCertificate.issuer,serialNumber:e.signingCertificate.serialNumber}),signedAttrs:new Zs({type:0,attributes:a})})),await s.sign(e.privateKey,0,e.hashAlgorithm,void 0,n),this.authSafe=new Is({contentType:"1.2.840.113549.1.7.2",content:s.toSchema(!0)})}break;default:throw new Error(`Parameter "integrityMode" has unknown value: ${this.parsedValue.integrityMode}`)}}async parseInternalValues(e,n=zn(!0)){switch(es.assert(e,"parameters","object"),e.checkIntegrity===void 0&&(e.checkIntegrity=!0),this.parsedValue={},this.authSafe.contentType){case Is.DATA:{Nr.assertEmpty(e.password,"password"),this.parsedValue.integrityMode=0,es.assert(this.authSafe.content,"authSafe.content",ut);const r=this.authSafe.content.getValue();if(this.parsedValue.authenticatedSafe=zx.fromBER(r),e.checkIntegrity){if(!this.macData)throw new Error('Absent "macData" value, can not check PKCS#12 data integrity');const s=n.getAlgorithmByOID(this.macData.mac.digestAlgorithm.algorithmId,!0,"digestAlgorithm");if(!await n.verifyDataStampedWithPassword({password:e.password,hashAlgorithm:s.name,salt:fn.toArrayBuffer(this.macData.macSalt.valueBlock.valueHexView),iterationCount:this.macData.iterations||1,contentToVerify:r,signatureToVerify:fn.toArrayBuffer(this.macData.mac.digest.valueBlock.valueHexView)}))throw new Error("Integrity for the PKCS#12 data is broken!")}}break;case Is.SIGNED_DATA:{this.parsedValue.integrityMode=1;const r=new po({schema:this.authSafe.content}),s=r.encapContentInfo.eContent;Nr.assert(s,"eContent","cmsSigned.encapContentInfo"),es.assert(s,"eContent",ut);const i=s.getValue();if(this.parsedValue.authenticatedSafe=zx.fromBER(i),!await r.verify({signer:0,checkChain:!1},n))throw new Error("Integrity for the PKCS#12 data is broken!")}break;default:throw new Error(`Incorrect value for "this.authSafe.contentType": ${this.authSafe.contentType}`)}}}Vy.CLASS_NAME="PFX";const SS="status",_y="statusStrings",By="failInfo",Jlt=[SS,_y,By];var qle;(function(t){t[t.granted=0]="granted",t[t.grantedWithMods=1]="grantedWithMods",t[t.rejection=2]="rejection",t[t.waiting=3]="waiting",t[t.revocationWarning=4]="revocationWarning",t[t.revocationNotification=5]="revocationNotification"})(qle||(qle={}));class Tf extends Ze{constructor(e={}){super(),this.status=Z(e,SS,Tf.defaultValues(SS)),_y in e&&(this.statusStrings=Z(e,_y,Tf.defaultValues(_y))),By in e&&(this.failInfo=Z(e,By,Tf.defaultValues(By))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case SS:return 2;case _y:return[];case By:return new ur;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case SS:return n===Tf.defaultValues(e);case _y:return n.length===0;case By:return n.isEqual(Tf.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||ue,value:[new $e({name:n.status||ue}),new ve({optional:!0,value:[new Dn({name:n.statusStrings||ue,value:new ch})]}),new ur({name:n.failInfo||ue,optional:!0})]})}fromSchema(e){st(e,Jlt);const n=tt(e,e,Tf.schema({names:{status:SS,statusStrings:_y,failInfo:By}}));Ge.assertSchema(n,this.className);const r=n.result.status;if(r.valueBlock.isHexOnly===!0||r.valueBlock.valueDec<0||r.valueBlock.valueDec>5)throw new Error('PKIStatusInfo "status" has invalid value');this.status=r.valueBlock.valueDec,_y in n.result&&(this.statusStrings=n.result.statusStrings),By in n.result&&(this.failInfo=n.result.failInfo)}toSchema(){const e=[];return e.push(new $e({value:this.status})),this.statusStrings&&e.push(new ve({optional:!0,value:this.statusStrings})),this.failInfo&&e.push(this.failInfo),new ve({value:e})}toJSON(){const e={status:this.status};return this.statusStrings&&(e.statusStrings=Array.from(this.statusStrings,n=>n.toJSON())),this.failInfo&&(e.failInfo=this.failInfo.toJSON()),e}}Tf.CLASS_NAME="PKIStatusInfo";const wT="version",bT="messageImprint",IS="reqPolicy",CS="nonce",Fp="certReq",TS="extensions",J2="TimeStampReq",xz=`${J2}.${wT}`,Ez=`${J2}.${bT}`,b_=`${J2}.${IS}`,v_=`${J2}.${CS}`,x_=`${J2}.${Fp}`,E_=`${J2}.${TS}`,Ylt=[xz,Ez,b_,v_,x_,E_];class Wl extends Ze{constructor(e={}){super(),this.version=Z(e,wT,Wl.defaultValues(wT)),this.messageImprint=Z(e,bT,Wl.defaultValues(bT)),IS in e&&(this.reqPolicy=Z(e,IS,Wl.defaultValues(IS))),CS in e&&(this.nonce=Z(e,CS,Wl.defaultValues(CS))),Fp in e&&(this.certReq=Z(e,Fp,Wl.defaultValues(Fp))),TS in e&&(this.extensions=Z(e,TS,Wl.defaultValues(TS))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wT:return 0;case bT:return new bo;case IS:return ue;case CS:return new $e;case Fp:return!1;case TS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case wT:case IS:case Fp:return n===Wl.defaultValues(e);case bT:return bo.compareWithDefault("hashAlgorithm",n.hashAlgorithm)&&bo.compareWithDefault("hashedMessage",n.hashedMessage);case CS:return n.isEqual(Wl.defaultValues(e));case TS:return n.length===0;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||J2,value:[new $e({name:n.version||xz}),bo.schema(n.messageImprint||{names:{blockName:Ez}}),new Rt({name:n.reqPolicy||b_,optional:!0}),new $e({name:n.nonce||v_,optional:!0}),new U0({name:n.certReq||x_,optional:!0}),new Re({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Dn({name:n.extensions||E_,value:ea.schema()})]})]})}fromSchema(e){st(e,Ylt);const n=tt(e,e,Wl.schema());Ge.assertSchema(n,this.className),this.version=n.result[xz].valueBlock.valueDec,this.messageImprint=new bo({schema:n.result[Ez]}),b_ in n.result&&(this.reqPolicy=n.result[b_].valueBlock.toString()),v_ in n.result&&(this.nonce=n.result[v_]),x_ in n.result&&(this.certReq=n.result[x_].valueBlock.value),E_ in n.result&&(this.extensions=Array.from(n.result[E_],r=>new ea({schema:r})))}toSchema(){const e=[];return e.push(new $e({value:this.version})),e.push(this.messageImprint.toSchema()),this.reqPolicy&&e.push(new Rt({value:this.reqPolicy})),this.nonce&&e.push(this.nonce),Fp in this&&Wl.compareWithDefault(Fp,this.certReq)===!1&&e.push(new U0({value:this.certReq})),this.extensions&&e.push(new Re({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.extensions,n=>n.toSchema())})),new ve({value:e})}toJSON(){const e={version:this.version,messageImprint:this.messageImprint.toJSON()};return this.reqPolicy!==void 0&&(e.reqPolicy=this.reqPolicy),this.nonce!==void 0&&(e.nonce=this.nonce.toJSON()),this.certReq!==void 0&&Wl.compareWithDefault(Fp,this.certReq)===!1&&(e.certReq=this.certReq),this.extensions&&(e.extensions=Array.from(this.extensions,n=>n.toJSON())),e}}Wl.CLASS_NAME="TimeStampReq";const NS="status",kS="timeStampToken",kee="TimeStampResp",Az=`${kee}.${NS}`,A_=`${kee}.${kS}`,Qlt=[Az,A_];class sN extends Ze{constructor(e={}){super(),this.status=Z(e,NS,sN.defaultValues(NS)),kS in e&&(this.timeStampToken=Z(e,kS,sN.defaultValues(kS))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case NS:return new Tf;case kS:return new Is;default:return super.defaultValues(e)}}static compareWithDefault(e,n){switch(e){case NS:return Tf.compareWithDefault(NS,n.status)&&!("statusStrings"in n)&&!("failInfo"in n);case kS:return n.contentType===ue&&n.content instanceof xn;default:return super.defaultValues(e)}}static schema(e={}){const n=Z(e,"names",{});return new ve({name:n.blockName||kee,value:[Tf.schema(n.status||{names:{blockName:Az}}),Is.schema(n.timeStampToken||{names:{blockName:A_,optional:!0}})]})}fromSchema(e){st(e,Qlt);const n=tt(e,e,sN.schema());Ge.assertSchema(n,this.className),this.status=new Tf({schema:n.result[Az]}),A_ in n.result&&(this.timeStampToken=new Is({schema:n.result[A_]}))}toSchema(){const e=[];return e.push(this.status.toSchema()),this.timeStampToken&&e.push(this.timeStampToken.toSchema()),new ve({value:e})}toJSON(){const e={status:this.status.toJSON()};return this.timeStampToken&&(e.timeStampToken=this.timeStampToken.toJSON()),e}async sign(e,n,r=zn(!0)){return this.assertContentType(),new po({schema:this.timeStampToken.content}).sign(e,0,n,void 0,r)}async verify(e={signer:0,trustedCerts:[],data:Ci},n=zn(!0)){return this.assertContentType(),new po({schema:this.timeStampToken.content}).verify(e,n)}assertContentType(){if(!this.timeStampToken)throw new Error("timeStampToken is absent in TSP response");if(this.timeStampToken.contentType!==F3e)throw new Error(`Wrong format of timeStampToken: ${this.timeStampToken.contentType}`)}}sN.CLASS_NAME="TimeStampResp";function Zlt(){if(typeof globalThis<"u"&&"crypto"in globalThis){let t="webcrypto";"webkitSubtle"in globalThis.crypto&&(t="safari"),Nle(t,new xM({name:t,crypto:globalThis.crypto}))}else if(typeof crypto<"u"&&"webcrypto"in crypto){const t="NodeJS ^15",e=crypto.webcrypto;Nle(t,new xM({name:t,crypto:e}))}}Zlt();function Xlt(t={}){const e={...t,rootCertFingerprint:"641a0321a3e244efe456463195d606317ed7cdcc3c1756e09893f3c68f79bb5b"};return async(n,r={})=>{let s="";{const u=new Uint8Array(12);crypto.getRandomValues(u),s=btoa(String.fromCharCode.apply(null,[...u])),r.headers={...r.headers,"x-attestation-nonce":s}}const a=await(e.fetch??window.fetch)(n,r),o=a.headers.get("x-attestation-document");if(!o)return console.warn("No attestation document found in response"),a;const c=performance.now(),l=Pee.fromDocument(o);if(l.nonce!==s)throw new Error("Invalid nonce");if(e.expectedPCRs)for(const[u,f]of e.expectedPCRs.entries()){const d=l.pcrs.get(u);if(!d)throw new Error(`Missing PCR${u}`);if(Array.isArray(f)){if(!f.includes(d))throw new Error(`Invalid PCR${u}: ${d}`)}else if(d!==f)throw new Error(`Invalid PCR${u}: ${d}`)}{if(!await l.verifyRootOfTrust(e.checkDate))throw new Error("Invalid root of trust");const f=await l.rootCertFingerprint();if(f!==e.rootCertFingerprint)throw new Error(`Invalid root certificate fingerprint: ${f}`)}if(!await l.verifySignature())throw new Error("Invalid signature");if(l.userData.startsWith("Sequence/1:")){const u=l.userData.split(":")[1],f=r.method??"GET";let d;if(n instanceof URL)d=n;else{const S=typeof n=="string"?n:n.url;d=new URL(S,window.location.origin)}const p=d.pathname,g=r.body??"",m=await a.clone().text(),v=new TextEncoder().encode(`${f} ${p}
${g}
${m}`),A=await crypto.subtle.digest("SHA-256",v);if(u!==btoa(String.fromCharCode.apply(null,[...new Uint8Array(A)])))throw new Error("Invalid user data hash")}if(e.logTiming){const f=performance.now()-c;console.log(`Attestation verification took ${f.toFixed(2)}ms`)}return a}}class eut{constructor(e){q(this,"raw");q(this,"cert");q(this,"intermediates");q(this,"rootCert");q(this,"pcrs");if(this.raw=e,!e.cabundle[0])throw new Error("Invalid attestation CA bundle");this.cert=_r.fromBER(e.certificate),this.rootCert=_r.fromBER(e.cabundle[0]),this.intermediates=e.cabundle.slice(1).map(n=>_r.fromBER(n)),this.pcrs=new Map(Array.from(e.pcrs.entries()).map(([n,r])=>[Number(n),Array.from(new Uint8Array(r)).map(s=>s.toString(16).padStart(2,"0")).join("")]))}get nonce(){return new TextDecoder().decode(this.raw.nonce)}get userData(){return new TextDecoder().decode(this.raw.user_data)}async verifyRootOfTrust(e){return(await new K7({certs:[...this.intermediates,this.cert],trustedCerts:[this.rootCert],checkDate:e}).verify()).result}async rootCertFingerprint(){const e=await window.crypto.subtle.digest("SHA-256",this.raw.cabundle[0]);return Array.from(new Uint8Array(e)).map(n=>n.toString(16).padStart(2,"0")).join("")}}class Pee extends eut{constructor(n,r){if(r.length!==4)throw new Error("Invalid COSE Sign1");super(n);q(this,"sign1");this.sign1=r}static fromDocument(n){const r=tut(n),s=ple(r);if(s.length!==4)throw new Error("Invalid COSE Sign1");const i=ple(s[2]);return new Pee(i,s)}async verifySignature(){const n=["Signature1",this.sign1[0],new Uint8Array,this.sign1[2]],r=v5(n),s=this.sign1[3],i=await this.cert.getPublicKey();return await crypto.subtle.verify({name:"ECDSA",hash:"SHA-384"},i,s,r)}}function tut(t){const e=atob(t);return Uint8Array.from(e,n=>n.codePointAt(0))}const Sz=(t,e)=>e.some(n=>t instanceof n);let Kle,Gle;function nut(){return Kle||(Kle=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rut(){return Gle||(Gle=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Iz=new WeakMap,TH=new WeakMap,dU=new WeakMap;function sut(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Jx(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return dU.set(e,t),e}function iut(t){if(Iz.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Iz.set(t,e)}let Cz={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Iz.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jx(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function J3e(t){Cz=t(Cz)}function aut(t){return rut().includes(t)?function(...e){return t.apply(Tz(this),e),Jx(this.request)}:function(...e){return Jx(t.apply(Tz(this),e))}}function out(t){return typeof t=="function"?aut(t):(t instanceof IDBTransaction&&iut(t),Sz(t,nut())?new Proxy(t,Cz):t)}function Jx(t){if(t instanceof IDBRequest)return sut(t);if(TH.has(t))return TH.get(t);const e=out(t);return e!==t&&(TH.set(t,e),dU.set(e,t)),e}const Tz=t=>dU.get(t);function cut(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=Jx(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Jx(a.result),c.oldVersion,c.newVersion,Jx(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}const lut=["get","getKey","getAll","getAllKeys","count"],uut=["put","add","delete","clear"],NH=new Map;function Wle(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(NH.get(e))return NH.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=uut.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||lut.includes(n)))return;const i=async function(a,...o){const c=this.transaction(a,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(o.shift())),(await Promise.all([l[n](...o),s&&c.done]))[0]};return NH.set(e,i),i}J3e(t=>({...t,get:(e,n,r)=>Wle(e,n)||t.get(e,n,r),has:(e,n)=>!!Wle(e,n)||t.has(e,n)}));const fut=["continue","continuePrimaryKey","advance"],zle={},Nz=new WeakMap,Y3e=new WeakMap,dut={get(t,e){if(!fut.includes(e))return t[e];let n=zle[e];return n||(n=zle[e]=function(...r){Nz.set(this,Y3e.get(this)[e](...r))}),n}};async function*hut(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,dut);for(Y3e.set(n,e),dU.set(n,Tz(e));e;)yield n,e=await(Nz.get(n)||e.continue()),Nz.delete(n)}function Jle(t,e){return e===Symbol.asyncIterator&&Sz(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&Sz(t,[IDBIndex,IDBObjectStore])}J3e(t=>({...t,get(e,n,r){return Jle(e,n)?hut:t.get(e,n,r)},has(e,n){return Jle(e,n)||t.has(e,n)}}));function Q3e(t,e){if(t===e)return!0;if(t===null||e===null||typeof t!="object"||typeof e!="object")return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n)if(!r.includes(s)||!Q3e(t[s],e[s]))return!1;return!0}class Bb{constructor(e,n,r,s=[]){q(this,"dbName");q(this,"storeName");q(this,"key");q(this,"migrations");q(this,"_db",null);q(this,"listeners",[]);q(this,"broadcastChannel");this.dbName=e,this.storeName=n,this.key=r,this.migrations=s,typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(this.dbName+"-observer"),this.broadcastChannel.onmessage=i=>{i.data&&i.data.keyValue!==void 0&&i.data.updateType&&this.listeners.forEach(a=>a(i.data.keyValue,i.data.updateType,i.data.oldItem,i.data.newItem))})}async openDB(){if(this._db)return this._db;const e=this.migrations.length+1;return this._db=await cut(this.dbName,e,{upgrade:(n,r,s,i,a)=>{if(s!==null)for(let o=r+1;o<=s;o++){const c=o-2;if(c>=0&&c<this.migrations.length){const l=this.migrations[c];if(l)l(n,i,a);else throw new Error(`Migration for schema version ${o} (using migrations[${c}]) not found but expected.`)}}},blocked:()=>{console.error(`IndexedDB ${this.dbName} upgrade blocked.`)},blocking:()=>{console.warn(`IndexedDB ${this.dbName} upgrade is being blocked by other connections. Closing this connection.`),this._db&&(this._db.close(),this._db=null)},terminated:()=>{console.warn(`IndexedDB ${this.dbName} connection terminated.`),this._db=null}}),await this.handleOpenDB(),this._db}async handleOpenDB(){}async getStore(e){return(await this.openDB()).transaction(this.storeName,e).objectStore(this.storeName)}async get(e){return(await this.getStore("readonly")).get(e)}async list(){return(await this.getStore("readonly")).getAll()}async set(e){const n=await this.openDB(),r=e[this.key],s=n.transaction(this.storeName,"readwrite"),i=s.objectStore(this.storeName),a=await i.get(r);await i.put(e,r),await s.done;let o=null;return a?Q3e(a,e)||(o="updated"):o="added",o&&this.notifyUpdate(r,o,a,e),r}async del(e){const n=await this.get(e),s=(await this.openDB()).transaction(this.storeName,"readwrite");await s.objectStore(this.storeName).delete(e),await s.done,n&&this.notifyUpdate(e,"removed",n,void 0)}notifyUpdate(e,n,r,s){this.listeners.forEach(i=>i(e,n,r,s)),this.broadcastChannel&&this.broadcastChannel.postMessage({keyValue:e,updateType:n,oldItem:r,newItem:s})}addListener(e){return this.listeners.push(e),()=>this.removeListener(e)}removeListener(e){this.listeners=this.listeners.filter(n=>n!==e)}async close(){this._db&&(this._db.close(),this._db=null),this.broadcastChannel&&(this.broadcastChannel.close(),this.broadcastChannel=void 0)}}const kH="auth-commitments";class put extends Bb{constructor(e="sequence-auth-commitments"){super(e,kH,"id",[(n,r,s)=>{n.objectStoreNames.contains(kH)||n.createObjectStore(kH)}])}}const PH="auth-keys";class Z3e extends Bb{constructor(n="sequence-auth-keys",r){super(n,PH,"address",[(s,i,a)=>{s.objectStoreNames.contains(PH)||s.createObjectStore(PH).createIndex("identitySigner","identitySigner",{unique:!0})}]);q(this,"env");q(this,"expirationTimers",new Map);this.env=r}async handleOpenDB(){const n=await this.list();for(const r of n)await this.scheduleExpiration(r)}async set(n){const r=await super.set({...n,address:n.address.toLowerCase(),identitySigner:n.identitySigner.toLowerCase()});return this.scheduleExpiration(n),r}async del(n){const r=await super.del(n.toLowerCase());return this.clearExpiration(n),r}async getBySigner(n,r=1){var o,c;const s=n.toLowerCase(),i=await this.getStore("readonly"),a=i.index("identitySigner");try{const l=await a.get(s);if(l!==void 0)return l;if(r<2){const u=((c=(o=this.env)==null?void 0:o.timers)==null?void 0:c.setTimeout)??globalThis.setTimeout;return u&&await new Promise(f=>u(f,50)),this.getBySigner(n,r+1)}else try{const u=await i.getAll();return u&&u.length>0?u.find(d=>d.identitySigner.toLowerCase()===s):void 0}catch(u){throw console.error(`[AuthKeys.getBySigner] Fallback: Error during getAll() for signer ${s}:`,u),u}}catch(l){throw console.error(`[AuthKeys.getBySigner attempt #${r}] Index query error for signer ${s}:`,l),l}}async delBySigner(n){const r=await this.getBySigner(n.toLowerCase());r&&await this.del(r.address.toLowerCase())}async scheduleExpiration(n){var o,c;this.clearExpiration(n.address.toLowerCase());const r=Date.now(),s=n.expiresAt.getTime()-r;if(s<=0){await this.del(n.address.toLowerCase());return}const i=((c=(o=this.env)==null?void 0:o.timers)==null?void 0:c.setTimeout)??globalThis.setTimeout;if(!i)return;const a=i(()=>{console.log("removing expired auth key",n),this.del(n.address.toLowerCase())},s);this.expirationTimers.set(n.address.toLowerCase(),a)}clearExpiration(n){var s,i;const r=this.expirationTimers.get(n.toLowerCase());if(r){const a=((i=(s=this.env)==null?void 0:s.timers)==null?void 0:i.clearTimeout)??globalThis.clearTimeout;a&&a(r),this.expirationTimers.delete(n.toLowerCase())}}}const OH="messages";let gut=class extends Bb{constructor(e="sequence-messages"){super(e,OH,"id",[(n,r,s)=>{n.objectStoreNames.contains(OH)||n.createObjectStore(OH)}])}};const RH="envelopes";let mut=class extends Bb{constructor(e="sequence-signature-requests"){super(e,RH,"id",[(n,r,s)=>{n.objectStoreNames.contains(RH)||n.createObjectStore(RH)}])}};const _H="transactions";let yut=class extends Bb{constructor(e="sequence-transactions"){super(e,_H,"id",[(n,r,s)=>{n.objectStoreNames.contains(_H)||n.createObjectStore(_H)}])}};const BH="wallets";let wut=class extends Bb{constructor(e="sequence-manager"){super(e,BH,"address",[(n,r,s)=>{n.objectStoreNames.contains(BH)||n.createObjectStore(BH)}])}};const MH="queued-recovery-payloads";let but=class extends Bb{constructor(e="sequence-recovery"){super(e,MH,"id",[(n,r,s)=>{n.objectStoreNames.contains(MH)||n.createObjectStore(MH)}])}};const DH="passkey-credentials";class vut extends Bb{constructor(e="sequence-passkey-credentials"){super(e,DH,"credentialId",[(n,r,s)=>{n.objectStoreNames.contains(DH)||n.createObjectStore(DH)}])}async getByCredentialId(e){return this.get(e)}async saveCredential(e,n,r){const s=new Date().toISOString(),i={credentialId:e,publicKey:n,walletAddress:r,createdAt:s,lastLoginAt:s};await this.set(i)}async updateCredential(e,{lastLoginAt:n,walletAddress:r}){const s=await this.getByCredentialId(e);if(s){const i={...s,lastLoginAt:n,walletAddress:r};await this.set(i)}}}function X3e(t){var i,a;const e=CX(t),n=globalThis,r=typeof window<"u"?window:n.window??{},s=r.location??n.location;return{...e,timers:(t==null?void 0:t.timers)??(typeof n.setTimeout=="function"?{setTimeout:n.setTimeout.bind(n),clearTimeout:n.clearTimeout.bind(n),setInterval:n.setInterval.bind(n),clearInterval:n.clearInterval.bind(n)}:void 0),locks:(t==null?void 0:t.locks)??((i=n.navigator)==null?void 0:i.locks)??((a=r.navigator)==null?void 0:a.locks),navigation:(t==null?void 0:t.navigation)??(s?{getPathname:()=>s.pathname,redirect:o=>{s.href=o}}:void 0),urlSearchParams:(t==null?void 0:t.urlSearchParams)??n.URLSearchParams??r.URLSearchParams}}class xut{constructor(e){q(this,"shared");q(this,"jobs",new Map);q(this,"checkInterval");q(this,"STORAGE_KEY","sequence-cron-jobs");q(this,"isStopping",!1);q(this,"currentCheckJobsPromise",Promise.resolve());q(this,"env");this.shared=e,this.env=e.env,this.start()}start(){var n;if(this.isStopping)return;this.executeCheckJobsChain();const e=((n=this.env.timers)==null?void 0:n.setInterval)??globalThis.setInterval;e&&(this.checkInterval=e(()=>this.executeCheckJobsChain(),60*1e3))}executeCheckJobsChain(){this.currentCheckJobsPromise=this.currentCheckJobsPromise.catch(()=>{}).then(()=>this.isStopping?Promise.resolve():this.checkJobs())}async stop(){var e;if(this.isStopping=!0,this.checkInterval){const n=((e=this.env.timers)==null?void 0:e.clearInterval)??globalThis.clearInterval;n&&n(this.checkInterval),this.checkInterval=void 0,this.shared.modules.logger.log("Cron: Interval cleared.")}await this.currentCheckJobsPromise.catch(n=>{console.error("Cron: Error during currentCheckJobsPromise settlement in stop():",n)})}registerJob(e,n,r){if(this.jobs.has(e))throw new Error(`Job with ID ${e} already exists`);const s={id:e,interval:n,lastRun:0,handler:r};this.jobs.set(e,s)}unregisterJob(e){this.jobs.delete(e)}async checkJobs(){var e;if(!this.isStopping)try{const n=this.env.locks??((e=globalThis.navigator)==null?void 0:e.locks);n!=null&&n.request?await n.request("sequence-cron-jobs",async r=>{this.isStopping||r&&await this.runJobs()}):await this.runJobs()}catch(n){this.isAbortError(n)?this.shared.modules.logger.log("Cron: navigator.locks.request was aborted."):console.error("Cron: Error in navigator.locks.request:",n)}}async runJobs(){var r;const e=Date.now(),n=await this.getStorageState();for(const[s,i]of this.jobs){if(this.isStopping)break;const a=((r=n.get(s))==null?void 0:r.lastRun)??i.lastRun;if(e-a>=i.interval)try{await i.handler(),this.isStopping||(i.lastRun=e,n.set(s,{lastRun:e}))}catch(c){this.isAbortError(c)?this.shared.modules.logger.log(`Cron: Job ${s} was aborted.`):console.error(`Cron job ${s} failed:`,c)}}this.isStopping||await this.syncWithStorage()}async getStorageState(){if(this.isStopping)return new Map;const e=this.env.storage;if(!e)return new Map;const n=e.getItem(this.STORAGE_KEY);return new Map(n?JSON.parse(n):[])}async syncWithStorage(){if(this.isStopping)return;const e=this.env.storage;if(!e)return;const n=Array.from(this.jobs.entries()).map(([r,s])=>[r,{lastRun:s.lastRun}]);e.setItem(this.STORAGE_KEY,JSON.stringify(n))}isAbortError(e){const n=globalThis.DOMException;return n&&e instanceof n?e.name==="AbortError":(e==null?void 0:e.name)==="AbortError"}}const ts={LocalDevice:"local-device",LoginPasskey:"login-passkey",LoginMnemonic:"login-mnemonic",LoginEmailOtp:"login-email-otp",LoginGooglePkce:"login-google-pkce",LoginApple:"login-apple",Recovery:"recovery-extension",Guard:"guard-extension",Unknown:"unknown"};class Eut{constructor(e){q(this,"shared");this.shared=e}async list(){return this.shared.databases.encryptedPks.listAddresses()}async has(e){return await this.shared.databases.encryptedPks.getEncryptedEntry(e)!==void 0}async create(){const e=await this.shared.databases.encryptedPks.generateAndStore(),n=await this.shared.databases.encryptedPks.getEncryptedPkStore(e.address);if(!n)throw new Error("Failed to create session");return this.shared.modules.logger.log("Created new session:",n.address),new MW(n)}async get(e){const n=await this.shared.databases.encryptedPks.getEncryptedPkStore(e);if(n)return new MW(n)}async witness(e,n){const r=await this.get(e);if(!r)throw new Error("Signer not found");await r.witness(this.shared.sequence.stateProvider,n,{signerKind:ts.LocalDevice})}async remove(e){await this.shared.databases.encryptedPks.remove(e)}}class Aut{constructor(e){q(this,"shared");this.shared=e}getByRole(e){const n=this.shared.sequence.guardAddresses[e];if(!n)throw new Error(`Guard address for role ${e} not found`);return new Hnt(new jnt(this.shared.sequence.guardUrl,n))}getByAddress(e){const n=Object.entries(this.shared.sequence.guardAddresses);for(const[r,s]of n)if(Mn(s,e))return[r,this.getByRole(r)]}topology(e){const n=this.shared.sequence.guardAddresses[e];if(!n)return;const r=$R(this.shared.sequence.defaultGuardTopology,pX,n);if(f0(Ai(r),Ai(this.shared.sequence.defaultGuardTopology)))throw new Error(`Guard address replacement failed for role ${e}`);return r}}const Sut=t=>{switch(t){case L0.Email:return"0x00000001";case L0.OIDC:return"0x00000002";default:return"0xffffffff"}};class Oee{constructor(e,n,r,s,i){q(this,"nitro");q(this,"authKeys");q(this,"signatures");q(this,"identityType");q(this,"env");this.nitro=e,this.authKeys=n,this.signatures=r,this.identityType=s,this.env=X3e(i)}onStatusChange(e){return this.authKeys.addListener(e)}async nitroCommitVerifier(e){await this.authKeys.delBySigner("");const n=await this.getAuthKey("");if(!n)throw new Error("no-auth-key");return await this.nitro.commitVerifier(UW(n,this.env.crypto),e)}async nitroCompleteAuth(e){const n=await this.getAuthKey("");if(!n)throw new Error("no-auth-key");const r=await this.nitro.completeAuth(UW(n,this.env.crypto),e);return n.identitySigner=r.signer.address,n.expiresAt=new Date(Date.now()+1e3*60*3),await this.authKeys.delBySigner(""),await this.authKeys.delBySigner(n.identitySigner),await this.authKeys.set(n),{signer:new Hce(this.nitro,n,this.env.crypto),email:r.identity.email}}async sign(e,n){const r=await e.sign(n.envelope.wallet,n.envelope.chainId,n.envelope.payload);await this.signatures.addSignature(n.id,{address:e.address,signature:r})}async getAuthKeySigner(e){const n=await this.getAuthKey(e);if(n)return new Hce(this.nitro,n,this.env.crypto)}async getAuthKey(e){let n=await this.authKeys.getBySigner(e);if(!e&&!n){const r=this.env.crypto??globalThis.crypto;if(!(r!=null&&r.subtle))throw new Error("crypto.subtle is not available");const s=await r.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign","verify"]),i=await r.subtle.exportKey("raw",s.publicKey);n={address:Un(new Uint8Array(i)),identitySigner:"",expiresAt:new Date(Date.now()+1e3*60*60),privateKey:s.privateKey},await this.authKeys.set(n)}return n}}class S_ extends Oee{constructor(n,r,s,i,a,o,c,l,u){super(a,l,o,L0.OIDC,u);q(this,"signupKind");q(this,"issuer");q(this,"oauthUrl");q(this,"audience");q(this,"commitments");q(this,"redirectUri","");this.signupKind=n,this.issuer=r,this.oauthUrl=s,this.audience=i,this.commitments=c}get kind(){return"login-"+this.signupKind}setRedirectUri(n){this.redirectUri=n}async commitAuth(n,r,s,i){s||(s=Un(ZZ(32))),await this.commitments.set({id:s,kind:this.signupKind,signer:i,target:n,metadata:{},isSignUp:r});const a=this.serializeQuery({client_id:this.audience,redirect_uri:this.redirectUri,response_type:"code",state:s,...this.signupKind==="apple"?{}:{scope:"openid profile email"}});return`${this.oauthUrl}?${a}`}async completeAuth(n,r){let s=new jX(this.issuer,this.audience,this.redirectUri,r);n.signer&&(s=s.withSigner({address:n.signer,keyType:db.Ethereum_Secp256k1})),await this.nitroCommitVerifier(s);const{signer:i,email:a}=await this.nitroCompleteAuth(s);return[i,{email:a}]}async status(n,r,s){const i=await this.getAuthKeySigner(n);return i?{address:n,handler:this,status:"ready",handle:async()=>(await this.sign(i,s),!0)}:{address:n,handler:this,status:"actionable",message:"request-redirect",handle:async()=>{const a=this.getNavigation(),o=await this.commitAuth(a.getPathname(),!1,s.id,n);return a.redirect(o),!0}}}serializeQuery(n){const r=this.env.urlSearchParams??globalThis.URLSearchParams;return r?new r(n).toString():Object.entries(n).map(([s,i])=>`${encodeURIComponent(s)}=${encodeURIComponent(i)}`).join("&")}getNavigation(){const n=this.env.navigation;if(!n)throw new Error("navigation is not available");return n}}class Iut{constructor(e,n){q(this,"signatures");q(this,"devices");q(this,"kind",ts.LocalDevice);this.signatures=e,this.devices=n}onStatusChange(e){return()=>{}}async status(e,n,r){const s=await this.devices.get(e);return s?{address:e,handler:this,status:"ready",handle:async()=>{const a=await s.sign(r.envelope.wallet,r.envelope.chainId,r.envelope.payload);return await this.signatures.addSignature(r.id,{address:e,signature:a}),!0}}:{address:e,handler:this,reason:"not-local-key",status:"unavailable"}}}class Cut{constructor(e,n,r,s){q(this,"signatures");q(this,"extensions");q(this,"stateReader");q(this,"passkeyProvider");q(this,"kind",ts.LoginPasskey);q(this,"readySigners",new Map);this.signatures=e,this.extensions=n,this.stateReader=r,this.passkeyProvider=s}onStatusChange(e){return()=>{}}addReadySigner(e){this.readySigners.set(e.credentialId,e)}async loadPasskey(e,n){try{return await this.passkeyProvider.loadFromWitness(this.stateReader,this.extensions,e,n)}catch(r){console.warn("Failed to load passkey:",r);return}}async status(e,n,r){const s={address:e,imageHash:n,handler:this};if(e!==this.extensions.passkeys)return console.warn("PasskeySigner: status address does not match passkey module address",e,this.extensions.passkeys),{...s,status:"unavailable",reason:"unknown-error"};let i;for(const o of this.readySigners.values())if(n&&o.imageHash===n){i=o;break}if(!i&&n&&(i=await this.loadPasskey(r.envelope.wallet,n)),!i)return console.warn("PasskeySigner: status failed to load passkey",e,n),{...s,status:"unavailable",reason:"unknown-error"};if(!n)throw new Error("imageHash is required for passkey operations");return{...s,status:"actionable",message:"request-interaction-with-passkey",imageHash:n,handle:async()=>{const c=await vtt(i.signSapient(r.envelope.wallet,r.envelope.chainId,r.envelope.payload,n)).signature;return await this.signatures.addSignature(r.id,{address:e,imageHash:n,signature:c}),!0}}}}class Tut extends Error{constructor(e="The provided answer is incorrect."){super(e),this.name="AnswerIncorrectError"}}class Nut extends Error{constructor(e="The challenge has expired."){super(e),this.name="ChallengeExpiredError"}}class kut extends Error{constructor(e="Too many incorrect attempts."){super(e),this.name="TooManyAttemptsError"}}class Put extends Oee{constructor(n,r,s,i){super(n,s,r,L0.Email,i);q(this,"kind",ts.LoginEmailOtp);q(this,"onPromptOtp")}registerUI(n){return this.onPromptOtp=n,()=>{this.onPromptOtp=void 0}}unregisterUI(){this.onPromptOtp=void 0}async getSigner(n){const r=this.onPromptOtp;if(!r)throw new Error("otp-handler-ui-not-registered");const s=M3.fromRecipient(this.identityType,n);return await this.handleAuth(s,r)}async status(n,r,s){const i=await this.getAuthKeySigner(n);if(i)return{address:n,handler:this,status:"ready",handle:async()=>(await this.sign(i,s),!0)};const a=this.onPromptOtp;return a?{address:n,handler:this,status:"actionable",message:"request-otp",handle:async()=>{const o=M3.fromSigner(this.identityType,{address:n,keyType:db.Ethereum_Secp256k1});try{return await this.handleAuth(o,a),!0}catch{return!1}}}:{address:n,handler:this,reason:"ui-not-registered",status:"unavailable"}}handleAuth(n,r){return new Promise(async(s,i)=>{try{const{loginHint:a,challenge:o}=await this.nitroCommitVerifier(n);await r(a,async l=>{try{const{signer:u,email:f}=await this.nitroCompleteAuth(n.withAnswer(o,l));s({signer:u,email:f})}catch(u){if(u instanceof mAe)throw new Tut;if(u instanceof wAe)throw i(u),new Nut;if(u instanceof vAe)throw i(u),new kut;i(u)}})}catch(a){i(a)}})}}class kz extends S_{constructor(e,n,r,s,i,a,o,c,l){super(e,n,r,s,i,a,o,c,l)}async commitAuth(e,n,r,s){let i=new yk(this.issuer,this.audience,this.redirectUri);s&&(i=i.withSigner({address:s,keyType:db.Ethereum_Secp256k1}));const{verifier:a,loginHint:o,challenge:c}=await this.nitroCommitVerifier(i);r||(r=Un(ZZ(32))),await this.commitments.set({id:r,kind:this.signupKind,verifier:a,challenge:c,target:e,metadata:{},isSignUp:n});const l=this.serializeQuery({code_challenge:c,code_challenge_method:"S256",client_id:this.audience,redirect_uri:this.redirectUri,login_hint:o,response_type:"code",scope:"openid profile email",state:r});return`${this.oauthUrl}?${l}`}async completeAuth(e,n){const r=new yk("","","");if(!e.verifier)throw new Error("Missing verifier in commitment");const{signer:s,email:i}=await this.nitroCompleteAuth(r.withAnswer(e.verifier,n));return await this.commitments.del(e.id),[s,{...e.metadata,email:i}]}}class k5{constructor(e){q(this,"signatures");q(this,"kind",ts.LoginMnemonic);q(this,"onPromptMnemonic");q(this,"readySigners",new Map);this.signatures=e}registerUI(e){return this.onPromptMnemonic=e,()=>{this.onPromptMnemonic=void 0}}unregisterUI(){this.onPromptMnemonic=void 0}addReadySigner(e){this.readySigners.set(e.address.toLowerCase(),e)}onStatusChange(e){return()=>{}}static toSigner(e){try{const n=ret(e);return new MW(Su(n))}catch{return}}async status(e,n,r){const s=this.readySigners.get(e.toLowerCase());if(s)return{address:e,handler:this,status:"ready",handle:async()=>{const a=await s.sign(r.envelope.wallet,r.envelope.chainId,r.envelope.payload);return await this.signatures.addSignature(r.id,{address:e,signature:a}),this.readySigners.delete(e.toLowerCase()),!0}};const i=this.onPromptMnemonic;return i?{address:e,handler:this,status:"actionable",message:"enter-mnemonic",handle:()=>new Promise(async(a,o)=>{await i(async l=>{const u=k5.toSigner(l);if(!u)return o("invalid-mnemonic");if(!Mn(u.address,e))return o("wrong-mnemonic");const f=await u.sign(r.envelope.wallet,r.envelope.chainId,r.envelope.payload);await this.signatures.addSignature(r.id,{address:e,signature:f}),a(!0)})})}:{address:e,handler:this,reason:"ui-not-registered",status:"unavailable"}}}const Pz={SessionUpdate:"session-update",AddRecoverySigner:"add-recovery-signer",RemoveRecoverySigner:"remove-recovery-signer"};class Out{constructor(e,n){q(this,"signatures");q(this,"recovery");q(this,"kind",ts.Recovery);this.signatures=e,this.recovery=n}onStatusChange(e){return this.recovery.onQueuedPayloadsUpdate(void 0,e)}async status(e,n,r){const s=await this.recovery.getQueuedRecoveryPayloads(r.wallet,r.envelope.chainId),i=Un(Fd(r.envelope.wallet,r.envelope.chainId,r.envelope.payload)),a=s.find(o=>o.payloadHash===i);if(!a)return{address:e,handler:this,status:"unavailable",reason:"no-recovery-payload-queued"};if(!n)return{address:e,handler:this,status:"unavailable",reason:"no-image-hash"};if(a.endTimestamp>Date.now()/1e3)return{address:e,handler:this,status:"unavailable",reason:"timelock-not-met"};try{const o=await this.recovery.encodeRecoverySignature(n,a.signer);return{address:e,handler:this,status:"ready",handle:async()=>(this.signatures.addSignature(r.id,{imageHash:n,signature:{address:e,data:Un(o),type:"sapient_compact"}}),!0)}}catch{return{address:e,handler:this,status:"unavailable",reason:"failed-to-encode-recovery-signature"}}}}let Rut=class{constructor(e){q(this,"shared");this.shared=e}log(...e){this.shared.verbose&&console.log(...e)}};const oo=[];for(let t=0;t<256;++t)oo.push((t+256).toString(16).slice(1));function _ut(t,e=0){return(oo[t[e+0]]+oo[t[e+1]]+oo[t[e+2]]+oo[t[e+3]]+"-"+oo[t[e+4]]+oo[t[e+5]]+"-"+oo[t[e+6]]+oo[t[e+7]]+"-"+oo[t[e+8]]+oo[t[e+9]]+"-"+oo[t[e+10]]+oo[t[e+11]]+oo[t[e+12]]+oo[t[e+13]]+oo[t[e+14]]+oo[t[e+15]]).toLowerCase()}let LH;const But=new Uint8Array(16);function Mut(){if(!LH){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");LH=crypto.getRandomValues.bind(crypto)}return LH(But)}const UH={};function c3(t,e,n){let r;{const s=Date.now(),i=Mut();Dut(UH,s,i),r=Lut(i,UH.msecs,UH.seq,e,n)}return e??_ut(r)}function Dut(t,e,n){return t.msecs??(t.msecs=-1/0),t.seq??(t.seq=0),e>t.msecs?(t.seq=n[6]<<23|n[7]<<16|n[8]<<8|n[9],t.msecs=e):(t.seq=t.seq+1|0,t.seq===0&&t.msecs++),t}function Lut(t,e,n,r,s=0){if(t.length<16)throw new Error("Random bytes length must be >= 16");if(!r)r=new Uint8Array(16),s=0;else if(s<0||s+16>r.length)throw new RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`);return e??(e=Date.now()),n??(n=t[6]*127<<24|t[7]<<16|t[8]<<8|t[9]),r[s++]=e/1099511627776&255,r[s++]=e/4294967296&255,r[s++]=e/16777216&255,r[s++]=e/65536&255,r[s++]=e/256&255,r[s++]=e&255,r[s++]=112|n>>>28&15,r[s++]=n>>>20&255,r[s++]=128|n>>>14&63,r[s++]=n>>>6&255,r[s++]=n<<2&255|t[10]&3,r[s++]=t[11],r[s++]=t[12],r[s++]=t[13],r[s++]=t[14],r[s++]=t[15],r}class Uut{constructor(e){q(this,"shared");this.shared=e}async list(){return this.shared.databases.messages.list()}async get(e){return this.getByMessageOrSignatureId(e)}async getByMessageOrSignatureId(e){const r=(await this.list()).find(s=>s.id===e||s.signatureId===e);if(!r)throw new Error(`Message ${e} not found`);return r}async request(e,n,r,s){const a=await new nu(e,{stateProvider:this.shared.sequence.stateProvider}).prepareMessageSignature(n,r??0),o=await this.shared.modules.signatures.request(a,"sign-message",{origin:s==null?void 0:s.source}),c=c3();return await this.shared.databases.messages.set({id:c,wallet:e,message:n,envelope:a,source:(s==null?void 0:s.source)??"unknown",status:"requested",signatureId:o}),o}async complete(e){const n=await this.getByMessageOrSignatureId(e);if(n.status==="signed")return n.messageSignature;const r=n.id,s=await this.shared.modules.signatures.get(n.signatureId);if(!s)throw new Error(`Signature ${n.signatureId} not found for message ${r}`);if(!uk(n.envelope.payload)||!uk(s.envelope.payload))throw new Error(`Message ${r} is not a message payload`);if(!eU(s.envelope))throw new Error(`Message ${r} is not signed`);const i=s.envelope,{weight:a,threshold:o}=Ww(i);if(a<o)throw new Error(`Message ${r} has insufficient weight`);let c;if(n.envelope.chainId!==0){const f=this.shared.sequence.networks.find(p=>p.chainId===n.envelope.chainId);if(!f)throw new Error(`Network not found for ${n.envelope.chainId}`);const d=Gw(f.rpcUrl);c=Kw(d)}const l=new nu(n.wallet,{stateProvider:this.shared.sequence.stateProvider}),u=Su(await l.buildMessageSignature(i,c));return await this.shared.databases.messages.set({...n,envelope:s.envelope,status:"signed",messageSignature:u}),await this.shared.modules.signatures.complete(s.id),u}onMessagesUpdate(e,n){const r=this.shared.databases.messages.addListener(()=>{this.list().then(s=>e(s))});return n&&this.list().then(s=>e(s)),r}onMessageUpdate(e,n,r){const s=this.shared.databases.messages.addListener(()=>{this.get(e).then(i=>n(i))});return r&&this.get(e).then(i=>n(i)),s}async delete(e){try{const n=await this.getByMessageOrSignatureId(e);await this.shared.databases.signatures.del(n.signatureId),await this.shared.databases.messages.del(n.id)}catch{}}}const Yle=Er(["function aggregate3((address target, bool allowFailure, bytes callData)[] calls) external payable returns ((bool success, bytes returnData)[])"])[0];let Fut=class{constructor(e){q(this,"shared");q(this,"fetchTotalQueuedPayloadsFallback",async(e,n,r,s)=>{const i=s.map(()=>0n);for(let a=0;a<s.length;a++){const o=s[a],c=await snt(e,n,r,o.address);i[a]=c}return i});this.shared=e}initialize(){this.shared.modules.cron.registerJob("update-queued-recovery-payloads",5*60*1e3,async()=>{this.shared.modules.logger.log("Running job: update-queued-recovery-payloads"),await this.updateQueuedPayloads()}),this.shared.modules.logger.log("Recovery module initialized and job registered.")}async updateRecoveryModule(e,n){const r=this.shared.sequence.extensions.recovery,s=e.findIndex(d=>Mn(d.sapientLeaf.address,r));if(s===-1)return;const i=e[s];if(!i)throw new Error("recovery-module-not-found");const a=await this.shared.sequence.stateProvider.getTree(i.sapientLeaf.imageHash);if(!a)throw new Error("recovery-module-tree-not-found");const o=eN(a),{leaves:c,isComplete:l}=XT(o);if(!l)throw new Error("recovery-module-tree-incomplete");const u=oM(n(c)),f=gk(u);if(await this.shared.sequence.stateProvider.saveTree(f),!e[s])throw new Error("recovery-module-not-found-(unreachable)");e[s].sapientLeaf.imageHash=Hd(f)}async initRecoveryModule(e,n){if(this.hasRecoveryModule(e))throw new Error("recovery-module-already-initialized");const r=oM([{type:"leaf",signer:n,requiredDeltaTime:this.shared.sequence.defaultRecoverySettings.requiredDeltaTime,minTimestamp:this.shared.sequence.defaultRecoverySettings.minTimestamp}]),s=gk(r);await this.shared.sequence.stateProvider.saveTree(s);const i=Hd(s);e.push({sapientLeaf:{type:"sapient-signer",address:this.shared.sequence.extensions.recovery,weight:255n,imageHash:i},weight:255n})}hasRecoveryModule(e){return e.some(n=>Mn(n.sapientLeaf.address,this.shared.sequence.extensions.recovery))}async addRecoverySignerToModules(e,n){if(!this.hasRecoveryModule(e))throw new Error("recovery-module-not-enabled");await this.updateRecoveryModule(e,r=>r.some(i=>Mn(i.signer,n))?r:[...r.filter(i=>!Mn(i.signer,x0)),{type:"leaf",signer:n,requiredDeltaTime:this.shared.sequence.defaultRecoverySettings.requiredDeltaTime,minTimestamp:this.shared.sequence.defaultRecoverySettings.minTimestamp}])}async removeRecoverySignerFromModules(e,n){if(!this.hasRecoveryModule(e))throw new Error("recovery-module-not-enabled");await this.updateRecoveryModule(e,r=>{const s=r.filter(i=>!Mn(i.signer,n));return s.length===0?[{type:"leaf",signer:x0,requiredDeltaTime:0n,minTimestamp:0n}]:s})}async addMnemonic(e,n){const r=k5.toSigner(n);if(!r)throw new Error("invalid-mnemonic");return await r.witness(this.shared.sequence.stateProvider,e,{isForRecovery:!0,signerKind:ts.LoginMnemonic}),this.addSigner(e,r.address)}async addSigner(e,n){const{modules:r}=await this.shared.modules.wallets.getConfigurationParts(e);return await this.addRecoverySignerToModules(r,n),this.shared.modules.wallets.requestConfigurationUpdate(e,{modules:r},Pz.AddRecoverySigner,"wallet-webapp")}async removeSigner(e,n){const{modules:r}=await this.shared.modules.wallets.getConfigurationParts(e);return await this.removeRecoverySignerFromModules(r,n),this.shared.modules.wallets.requestConfigurationUpdate(e,{modules:r},Pz.RemoveRecoverySigner,"wallet-webapp")}async completeUpdate(e){const n=await this.shared.modules.signatures.get(e);if(n.action!=="add-recovery-signer"&&n.action!=="remove-recovery-signer")throw new Error("invalid-recovery-update-action");return this.shared.modules.wallets.completeConfigurationUpdate(e)}async getSigners(e){const{raw:n}=await this.shared.modules.wallets.getConfiguration(e),r=n.modules.find(l=>Mn(l.sapientLeaf.address,this.shared.sequence.extensions.recovery));if(!r)return;const s=await this.shared.sequence.stateProvider.getTree(r.sapientLeaf.imageHash);if(!s)throw new Error("recovery-module-tree-not-found");const i=eN(s),{leaves:a,isComplete:o}=XT(i);if(!o)throw new Error("recovery-module-tree-incomplete");const c=await this.shared.modules.signers.resolveKinds(e,a.map(l=>l.signer));return a.filter(l=>!Mn(l.signer,x0)).map(l=>{var u;return{address:l.signer,kind:((u=c.find(f=>Mn(f.address,l.signer)))==null?void 0:u.kind)||"unknown",isRecovery:!0,minTimestamp:l.minTimestamp,requiredDeltaTime:l.requiredDeltaTime}})}async queuePayload(e,n,r){const s=await this.getSigners(e);if(!s)throw new Error("recovery-signers-not-found");const i=ctt(r),a=hk(s.map(c=>({type:"signer",address:c.address,weight:1n})));return await Promise.all([this.shared.sequence.stateProvider.savePayload(e,r,n),this.shared.sequence.stateProvider.savePayload(e,i,n)]),await this.shared.modules.signatures.request({wallet:e,chainId:n,configuration:{threshold:1n,checkpoint:0n,topology:a},payload:i},"recovery")}async completePayload(e){const n=await this.shared.modules.signatures.get(e);if(n.action!=="recovery"||!yX(n.envelope.payload))throw new Error("invalid-recovery-payload");if(!eU(n.envelope))throw new Error("recovery-payload-not-signed");const{weight:r,threshold:s}=Ww(n.envelope);if(r<s)throw new Error("recovery-payload-insufficient-weight");const i=n.envelope.signatures[0];if(y5(i))throw new Error("recovery-payload-sapient-signatures-not-supported");if(!i)throw new Error("recovery-payload-no-valid-signature");const a=rnt(n.wallet,n.envelope.payload,i.address,i.signature);return{to:this.shared.sequence.extensions.recovery,data:a}}async getQueuedRecoveryPayloads(e,n){return e?await this.shared.modules.wallets.get(e)?(await this.shared.databases.recovery.list()).filter(s=>Mn(s.wallet,e)):this.fetchQueuedPayloads(e,n):this.shared.databases.recovery.list()}onQueuedPayloadsUpdate(e,n,r){return r&&this.getQueuedRecoveryPayloads(e).then(n),this.shared.databases.recovery.addListener(()=>{this.getQueuedRecoveryPayloads(e).then(n)})}async updateQueuedPayloads(){const e=await this.shared.modules.wallets.list();for(const n of e){const r=await this.fetchQueuedPayloads(n.address);for(const a of r)await this.shared.databases.recovery.set(a);const s=new Set(r.map(a=>a.id)),i=await this.shared.databases.recovery.list();for(const a of i)s.has(a.id)||await this.shared.databases.recovery.del(a.id)}}async fetchQueuedPayloads(e,n){const r=this.shared.sequence.networks.filter(o=>n?o.chainId===n:this.shared.sequence.defaultRecoverySettings.includeTestnets?!0:o.type!=="testnet").map(o=>{var c;return{chainId:o.chainId,multicall3Address:(c=o.contracts)==null?void 0:c.multicall3,provider:Kw(Gw(o.rpcUrl))}}),s=await this.getSigners(e);if(!s||s.length===0)return[];const i=this.shared.sequence.extensions.recovery,a=[];return await Promise.all(r.map(async({chainId:o,provider:c,multicall3Address:l})=>{try{let u;if(l)try{u=await this.fetchTotalQueuedPayloadsBatched(c,i,e,s,l)}catch(f){console.error(`Recovery.fetchQueuedPayloads multicall3 failed for chainId ${o}, retrying with individual calls:`,f),u=await this.fetchTotalQueuedPayloadsFallback(c,i,e,s)}else u=await this.fetchTotalQueuedPayloadsFallback(c,i,e,s);for(let f=0;f<s.length;f++){const d=s[f],p=u[f];if(p!==0n)for(let g=0n;g<p;g++){const m=await int(c,i,e,d.address,g),v=await ant(c,i,e,d.address,m),A=await this.shared.sequence.stateProvider.getPayload(m);if(v<Date.now()/1e3&&A&&mX(A.payload)&&await this.shared.modules.wallets.getNonce(o,e,A.payload.space)>g)continue;const I={id:`${g}-${d.address}-${o}-${e}`,index:g,recoveryModule:i,wallet:e,signer:d.address,chainId:o,startTimestamp:v,endTimestamp:v+d.requiredDeltaTime,payloadHash:m,payload:A==null?void 0:A.payload};a.push(I)}}}catch(u){console.error(`Recovery.fetchQueuedPayloads error for chainId ${o}:`,u)}})),a}async fetchTotalQueuedPayloadsBatched(e,n,r,s,i){const a=s.map(l=>({target:n,allowFailure:!0,callData:Bs(cEe,[r,l.address])})),o=await e.request({method:"eth_call",params:[{to:i,data:Bs(Yle,[a])},"latest"]});return Cxe(Yle,o).map(l=>!l.success||l.returnData==="0x"?0n:w2(l.returnData))}async encodeRecoverySignature(e,n){const r=await this.shared.sequence.stateProvider.getTree(e);if(!r)throw new Error("recovery-module-tree-not-found");const s=eN(r);if(!XT(s).leaves.map(o=>o.signer).includes(n))throw new Error("signer-not-found-in-recovery-module");const a=_W(s,n);return BW(a)}},Vut=class{constructor(e){q(this,"shared");this.shared=e}async getTopology(e,n=!1){const{loginTopology:r,devicesTopology:s,modules:i}=await this.shared.modules.wallets.getConfigurationParts(e),a=i.find(l=>Mn(l.sapientLeaf.address,this.shared.sequence.extensions.sessions));if(!a){if(n){const l=[...FR([s,r])].filter(To);if(l.length===0)throw new Error("No signer leaves found");let u=RW(l[0].address);for(let g=1;g<l.length;g++)u=Rce(u,l[g].address);const f=bI(u);this.shared.sequence.stateProvider.saveTree(f);const d=Hd(f),p={...Wr.defaultSessionsTopology,address:this.shared.sequence.extensions.sessions,imageHash:d};return i.push({sapientLeaf:p,weight:255n}),jR(f)}throw new Error("Session manager not found")}const o=a.sapientLeaf.imageHash,c=await this.shared.sequence.stateProvider.getTree(o);if(!c)throw new Error("Session topology not found");return jR(c)}async updateSessionModule(e,n){const r=this.shared.sequence.extensions.sessions,s=e.findIndex(u=>Mn(u.sapientLeaf.address,r));if(s===-1)return;const i=e[s];if(!i)throw new Error("session-module-not-found");const a=await this.shared.sequence.stateProvider.getTree(i.sapientLeaf.imageHash);if(!a)throw new Error("session-module-tree-not-found");const o=jR(a),c=n(o),l=bI(c);if(await this.shared.sequence.stateProvider.saveTree(l),!e[s])throw new Error("session-module-not-found-(unreachable)");e[s].sapientLeaf.imageHash=Hd(l)}hasSessionModule(e){return e.some(n=>Mn(n.sapientLeaf.address,this.shared.sequence.extensions.sessions))}async initSessionModule(e,n,r){if(this.hasSessionModule(e))throw new Error("session-module-already-initialized");if(n.length===0)throw new Error("No identity signers provided");const s=RW(n),i=bI(s);this.shared.sequence.stateProvider.saveTree(i);const a=Hd(i),o={...Wr.defaultSessionsTopology,address:this.shared.sequence.extensions.sessions,imageHash:a};e.push({sapientLeaf:o,weight:255n,guardLeaf:r})}async addIdentitySignerToModules(e,n){if(!this.hasSessionModule(e))throw new Error("session-module-not-enabled");await this.updateSessionModule(e,r=>{const s=iM(r);return s!=null&&s.some(i=>Mn(i,n))?r:Rce(r,n)})}async removeIdentitySignerFromModules(e,n){if(!this.hasSessionModule(e))throw new Error("session-module-not-enabled");await this.updateSessionModule(e,r=>{const s=Ftt(r,n);if(!s)throw new Error("Cannot remove the last identity signer");return s})}async prepareAuthorizeImplicitSession(e,n,r){const s=await this.getTopology(e),i=iM(s);if(i.length===0)throw new Error("No identity signers found");let a,o;for(const g of i){const m=await this.shared.modules.signers.kindOf(e,g);if(!m){console.warn("No identity handler kind found for",g);continue}if(m===ts.LoginPasskey){console.warn("Implicit sessions do not support passkeys",g);continue}const v=this.shared.handlers.get(m);if(v){if(m===ts.LocalDevice&&!await this.shared.modules.devices.has(g)){console.warn("Identity signer not on this device, skipping",g);continue}a=v,o=g;break}}if(!a||!o)throw new Error("No identity handler or address found");let c,l="0x",u="0x";a instanceof Oee&&(c=a.identityType,a instanceof kz&&(l=xr(Il(a.issuer)),u=xr(Il(a.audience))));const f={approvedSigner:n,identityType:Lt(Sut(c),{size:4}),issuerHash:Lt(l,{size:32}),audienceHash:Lt(u,{size:32}),applicationData:Lt(r.applicationData??"0x"),authData:{redirectUrl:r.target,issuedAt:BigInt(Math.floor(Date.now()/1e3))}},p={payload:{type:"session-implicit-authorize",sessionAddress:n,attestation:f},wallet:e,chainId:0,configuration:{threshold:1n,checkpoint:0n,topology:{type:"signer",address:o,weight:1n}}};return this.shared.modules.signatures.request(p,"session-implicit-authorize",{origin:r.target})}async completeAuthorizeImplicitSession(e){const n=await this.shared.modules.signatures.get(e);if(n.action!=="session-implicit-authorize"||!QL(n.envelope.payload))throw new Error("Invalid action");if(!eU(n.envelope)||!fEe(n.envelope))throw new Error("Envelope not signed or threshold not reached");const r=n.envelope.signatures[0];if(!r||!cM(r))throw new Error("No valid signature found");if(r.signature.type!=="hash")throw new Error("Unsupported signature type");return await this.shared.modules.signatures.complete(e),{attestation:n.envelope.payload.attestation,signature:r.signature}}async addExplicitSession(e,n,r){const s=await this.getTopology(e,!0),i=Oce(s,{...n,signer:n.sessionAddress});return this.prepareSessionUpdate(e,i,r)}async modifyExplicitSession(e,n,r){const s=await this.getTopology(e,!0),i=Pce(s,n.sessionAddress);if(!i)throw new Error("Incomplete session topology");const a=Oce(i,{...n,signer:n.sessionAddress});return this.prepareSessionUpdate(e,a,r)}async removeExplicitSession(e,n,r){const s=await this.getTopology(e),i=Pce(s,n);if(!i)throw new Error("Incomplete session topology");return this.prepareSessionUpdate(e,i,r)}async addBlacklistAddress(e,n,r){const s=await this.getTopology(e,!0),i=Vtt(s,n);return this.prepareSessionUpdate(e,i,r)}async removeBlacklistAddress(e,n,r){const s=await this.getTopology(e),i=$tt(s,n);return this.prepareSessionUpdate(e,i,r)}async prepareSessionUpdate(e,n,r="wallet-webapp"){const s=bI(n);await this.shared.sequence.stateProvider.saveTree(s);const i=Hd(s),{modules:a}=await this.shared.modules.wallets.getConfigurationParts(e),o=a.find(c=>Mn(c.sapientLeaf.address,this.shared.sequence.extensions.sessions));return o?o.sapientLeaf.imageHash=i:a.push({sapientLeaf:{...Wr.defaultSessionsTopology,address:this.shared.sequence.extensions.sessions,imageHash:i},weight:255n}),this.shared.modules.wallets.requestConfigurationUpdate(e,{modules:a},Pz.SessionUpdate,r)}async complete(e){const n=await this.shared.modules.signatures.get(e);if(n.action!=="session-update"||!d5(n.envelope.payload))throw new Error("Invalid action");return this.shared.modules.wallets.completeConfigurationUpdate(e)}};class $ut{constructor(e){q(this,"shared");this.shared=e}initialize(){this.shared.modules.cron.registerJob("prune-signatures",10*60*1e3,async()=>{const e=await this.prune();e>0&&this.shared.modules.logger.log(`Pruned ${e} signatures`)}),this.shared.modules.logger.log("Signatures module initialized and job registered.")}async getBase(e){const n=await this.shared.databases.signatures.get(e);if(!n)throw new Error(`Request not found for ${e}`);return n}async list(){return this.shared.databases.signatures.list()}async get(e){const n=await this.getBase(e);if(n.status!=="pending"&&n.scheduledPruning<Date.now())throw await this.shared.databases.signatures.del(e),new Error(`Request not found for ${e}`);const r=zl(n.envelope.configuration.topology),s=await Promise.all([...r.signers.map(async o=>{const c=await this.shared.modules.signers.kindOf(n.wallet,o);return{address:o,imageHash:void 0,kind:c}}),...r.sapientSigners.map(async o=>{const c=await this.shared.modules.signers.kindOf(n.wallet,o.address,Su(o.imageHash));return{address:o.address,imageHash:o.imageHash,kind:c}})]),i=await Promise.all(s.map(async o=>{const c={address:o.address,imageHash:o.imageHash},l=n.envelope.signatures.some(f=>y5(f)?Mn(f.signature.address,o.address)&&f.imageHash===o.imageHash:Mn(f.address,o.address));if(!o.kind)return{...c,handler:void 0,reason:"unknown-signer-kind",status:"unavailable"};const u=this.shared.handlers.get(o.kind);return l?{...c,handler:u,status:"signed"}:u?u.status(o.address,o.imageHash,n):{...c,handler:void 0,reason:"no-handler",status:"unavailable"}}));return{...n,...Ww(n.envelope),signers:i}}onSignatureRequestUpdate(e,n,r,s){const i=this.shared.databases.signatures.addListener(()=>{this.get(e).then(o=>n(o)).catch(o=>r==null?void 0:r(o))}),a=Array.from(this.shared.handlers.values()).map(o=>o.onStatusChange(()=>{this.get(e).then(c=>n(c)).catch(c=>r==null?void 0:r(c))}));return s&&this.get(e).then(o=>n(o)).catch(o=>r==null?void 0:r(o)),()=>{i(),a.forEach(o=>o())}}onSignatureRequestsUpdate(e,n){const r=this.shared.databases.signatures.addListener(()=>{this.list().then(s=>e(s))});return n&&this.list().then(s=>e(s)),r}onSignatureRequestStatus(e,n,r){let s=!1;const i=this.onSignatureRequestUpdate(n,a=>{if(s)return;const o=a.status;(o==="completed"||o==="cancelled")&&(o===e&&r(a),s=!0,setTimeout(()=>i(),0))},void 0,!1);return()=>{s=!0,i()}}onComplete(e,n){return this.onSignatureRequestStatus("completed",e,n)}onCancel(e,n){return this.onSignatureRequestStatus("cancelled",e,n)}async complete(e){const n=await this.getBase(e);if((n==null?void 0:n.envelope.payload.type)==="config-update"){const s=(await this.shared.databases.signatures.list()).filter(i=>Mn(i.wallet,n.wallet)&&i.envelope.payload.type==="config-update"&&i.status==="pending"&&i.envelope.configuration.checkpoint<=n.envelope.configuration.checkpoint&&i.id!==e);await Promise.all(s.map(i=>this.shared.modules.signatures.cancel(i.id)))}await this.shared.databases.signatures.set({...n,status:"completed",scheduledPruning:Date.now()+this.shared.databases.pruningInterval})}async request(e,n,r={}){if(d5(e.payload)){const a=(await this.shared.databases.signatures.list()).filter(c=>Mn(c.wallet,e.wallet)&&d5(c.envelope.payload));console.warn("Deleting conflicting configuration updates for wallet",e.wallet,a.map(c=>c.id)),(await Promise.allSettled(a.map(c=>this.shared.modules.signatures.cancel(c.id)))).forEach((c,l)=>{var u;if(c.status==="rejected"){const f=(u=a[l])==null?void 0:u.id;console.error(`Failed to cancel conflicting signature request ${f||"unknown ID"} during logout preparation:`,c.reason)}})}const s=c3();return await this.shared.databases.signatures.set({id:s,wallet:e.wallet,envelope:fnt(e),origin:r.origin??"unknown",action:n,createdAt:new Date().toISOString(),status:"pending"}),s}async addSignature(e,n){const r=await this.getBase(e);dnt(r.envelope,n),await this.shared.databases.signatures.set(r)}async cancel(e){const n=await this.getBase(e);await this.shared.databases.signatures.set({...n,status:"cancelled",scheduledPruning:Date.now()+this.shared.databases.pruningInterval})}async prune(){const e=Date.now(),r=(await this.shared.databases.signatures.list()).filter(s=>s.status!=="pending"&&s.scheduledPruning<e);return await Promise.all(r.map(s=>this.shared.databases.signatures.del(s.id))),r.length}}function jut(t){return typeof t=="object"&&t!==null&&"signerKind"in t}function Hut(t){return t.startsWith("custom-")||Object.values(ts).includes(t)?t:(console.warn(`Unknown signer kind: ${t}`),ts.Unknown)}class qut{constructor(e){q(this,"shared");this.shared=e}async kindOf(e,n,r){if(Mn(this.shared.sequence.extensions.recovery,n))return ts.Recovery;if(Array.from(Object.values(this.shared.sequence.guardAddresses)).some(i=>Mn(i,n)))return ts.Guard;if(Mn(this.shared.sequence.extensions.passkeys,n))return ts.LoginPasskey;if(this.shared.sequence.nonWitnessableSigners.has(n.toLowerCase()))return;const s=await(r?this.shared.sequence.stateProvider.getWitnessForSapient(e,n,r):this.shared.sequence.stateProvider.getWitnessFor(e,n));if(s&&uk(s.payload))try{const i=JSON.parse(uxe(s.payload.message));if(jut(i))return Hut(i.signerKind)}catch{}}async resolveKinds(e,n){return Promise.all(n.map(async r=>{if(typeof r=="string"){const s=await this.kindOf(e,r);return{address:r,kind:s}}else{const s=await this.kindOf(e,r.address,r.imageHash);return{address:r.address,imageHash:r.imageHash,kind:s}}}))}}function Qle(t){return t.kind==="standard"}function Kut(t){return t.kind==="erc4337"}class Gut{constructor(e){q(this,"shared");this.shared=e}initialize(){this.shared.modules.cron.registerJob("update-transaction-status",1e3,async()=>{await this.refreshStatus()})}async refreshStatus(e){const n=await this.list(),r=30*60*1e3,s=Date.now();let i=0;for(const a of n)if(!(e&&a.id!==e)&&a.status==="relayed"){let o=this.shared.sequence.relayers.find(l=>l.id===a.relayerId);if(!o){const l=this.shared.sequence.bundlers.find(u=>u.id===a.relayerId);if(!l){console.warn("relayer or bundler not found",a.id,a.relayerId);continue}o=l}if(typeof a.relayedAt=="number"&&s-a.relayedAt>r){const l={status:"failed",reason:"timeout"};this.shared.databases.transactions.set({...a,opStatus:l,status:"final"}),i++;continue}const c=await o.status(a.opHash,a.envelope.chainId);c.status==="confirmed"||c.status==="failed"?(this.shared.databases.transactions.set({...a,opStatus:c,status:"final"}),i++):this.shared.databases.transactions.set({...a,opStatus:c,status:"relayed"})}return i}async list(){return this.shared.databases.transactions.list()}async get(e){const n=await this.shared.databases.transactions.get(e);if(!n)throw new Error(`Transaction ${e} not found`);return n}async request(e,n,r,s){const i=this.shared.sequence.networks.find(d=>d.chainId===n);if(!i)throw new Error(`Network not found for ${n}`);const a=Gw(i.rpcUrl),o=Kw(a),c=new nu(e,{stateProvider:this.shared.sequence.stateProvider}),l=r.map(d=>({to:d.to,value:d.value??0n,data:d.data??"0x",gasLimit:d.gasLimit??0n,delegateCall:!1,onlyFallback:!1,behaviorOnError:"revert"})),u=await c.prepareTransaction(o,l,{noConfigUpdate:s==null?void 0:s.noConfigUpdate,unsafe:s==null?void 0:s.unsafe,space:(s==null?void 0:s.space)!==void 0?s.space:BigInt(Math.floor(Date.now()/1e3))}),f=c3();return await this.shared.databases.transactions.set({id:f,wallet:e,requests:r,envelope:u,source:(s==null?void 0:s.source)??"unknown",status:"requested",timestamp:Date.now()}),f}async define(e,n){const r=await this.get(e);if(r.status!=="requested")throw new Error(`Transaction ${e} is not in the requested state`);if(n!=null&&n.nonce&&(r.envelope.payload.nonce=n.nonce),n!=null&&n.space&&(r.envelope.payload.space=n.space),n!=null&&n.calls){if(n.calls.length!==r.envelope.payload.calls.length)throw new Error(`Invalid number of calls for transaction ${e}`);for(let l=0;l<n.calls.length;l++)r.envelope.payload.calls[l].gasLimit=n.calls[l].gasLimit}const s=new nu(r.wallet,{stateProvider:this.shared.sequence.stateProvider}),i=this.shared.sequence.networks.find(l=>l.chainId===r.envelope.chainId);if(!i)throw new Error(`Network not found for ${r.envelope.chainId}`);const a=Kw(Gw(i.rpcUrl)),[o,c]=await Promise.all([Promise.all(this.shared.sequence.relayers.map(async l=>{if(!await l.isAvailable(r.wallet,r.envelope.chainId))return[];const d=(await s.getStatus(a)).isDeployed?s.address:s.guest,p=await l.feeOptions(r.wallet,r.envelope.chainId,d,r.envelope.payload.calls);if(p.options.length===0){const{name:g,icon:m}=l instanceof tSe?l.info:{};return[{kind:"standard",id:c3(),relayerType:l.type,relayerId:l.id,name:g,icon:m}]}return p.options.map(g=>({kind:"standard",id:c3(),feeOption:g,relayerType:l.type,relayerId:l.id,quote:p.quote}))})),(async()=>{const l=await s.get4337Entrypoint(a);return l?Promise.all(this.shared.sequence.bundlers.map(async u=>{if(!await u.isAvailable(l,r.envelope.chainId))return[];try{const d=await s.prepare4337Transaction(a,r.envelope.payload.calls,{space:r.envelope.payload.space});return(await u.estimateLimits(r.wallet,d.payload)).map(({speed:g,payload:m})=>({kind:"erc4337",id:c3(),relayerType:"erc4337",relayerId:u.id,alternativePayload:m,speed:g}))}catch(d){return console.error("error estimating limits 4337",d),[]}})):[]})()]);await this.shared.databases.transactions.set({...r,relayerOptions:[...o.flat(),...c.flat()],status:"defined"})}async selectRelayer(e,n){const r=await this.get(e);if(r.status!=="defined")throw new Error(`Transaction ${e} is not in the defined state`);const s=r.relayerOptions.find(a=>a.id===n);if(!s)throw new Error(`Relayer option ${n} not found for transaction ${e}`);if(Qle(s)){if(s.feeOption){const{token:a,to:o,value:c,gasLimit:l}=s.feeOption;if(xa(o),a.contractAddress===x0)r.envelope.payload.calls.unshift({to:o,value:BigInt(c),data:"0x",gasLimit:BigInt(l),delegateCall:!1,onlyFallback:!1,behaviorOnError:"revert"});else{const[u]=Er(["function transfer(address to, uint256 amount) returns (bool)"]);r.envelope.payload.calls.unshift({to:a.contractAddress,value:0n,data:Bs(u,[o,BigInt(c)]),gasLimit:BigInt(l),delegateCall:!1,onlyFallback:!1,behaviorOnError:"revert"})}}}else if(s.kind==="erc4337")r.envelope={...r.envelope,payload:s.alternativePayload};else throw new Error(`Invalid relayer option ${s.kind}`);const i=await this.shared.modules.signatures.request(r.envelope,"send-transaction",{origin:r.source});return await this.shared.databases.transactions.set({...r,relayerOptions:void 0,relayerOption:s,status:"formed",signatureId:i}),i}async relay(e){let n;try{n=await this.get(e)}catch{if(!await this.shared.modules.signatures.get(e))throw new Error(`Neither transaction nor signature found with ID ${e}`);if(n=(await this.list()).find(A=>A.status==="formed"&&"signatureId"in A&&A.signatureId===e),!n)throw new Error(`No transaction found for signature ${e}`)}const r=n.id;if(n.status!=="formed")throw new Error(`Transaction ${r} is not in the formed state`);const s=await this.shared.modules.signatures.get(n.signatureId);if(!s)throw new Error(`Signature ${n.signatureId} not found for transaction ${r}`);const i=this.shared.sequence.networks.find(g=>g.chainId===n.envelope.chainId);if(!i)throw new Error(`Network not found for ${n.envelope.chainId}`);const a=Gw(i.rpcUrl),o=Kw(a),c=new nu(n.wallet,{stateProvider:this.shared.sequence.stateProvider});if(!eU(s.envelope))throw new Error(`Transaction ${r} is not signed`);const{weight:l,threshold:u}=Ww(s.envelope);if(l<u)throw new Error(`Transaction ${r} has insufficient weight`);const f=[...this.shared.sequence.relayers,...this.shared.sequence.bundlers].find(g=>g.id===n.relayerOption.relayerId);if(!f)throw new Error(`Relayer ${n.relayerOption.relayerId} not found for transaction ${r}`);let d;if(Qle(n.relayerOption)){if(!Jit(f))throw new Error(`Relayer ${n.relayerOption.relayerId} is not a legacy relayer`);if(!mX(s.envelope.payload))throw new Error(`Transaction ${r} with legacy relayer is not a calls payload`);const g=await c.buildTransaction(o,{...s.envelope,payload:s.envelope.payload}),{opHash:m}=await f.relay(g.to,g.data,n.envelope.chainId,n.relayerOption.quote);d=m,await this.shared.databases.transactions.set({...n,status:"relayed",opHash:d,relayedAt:Date.now(),relayerId:n.relayerOption.relayerId}),await this.shared.modules.signatures.complete(s.id)}else if(Kut(n.relayerOption)){if(!Ert(f))throw new Error(`Relayer ${n.relayerOption.relayerId} is not a bundler`);if(!ott(s.envelope.payload))throw new Error(`Transaction ${r} with bundler is not a calls4337_07 payload`);const{operation:g,entrypoint:m}=await c.build4337Transaction(o,{...s.envelope,payload:s.envelope.payload}),{opHash:v}=await f.relay(m,g);d=v,await this.shared.databases.transactions.set({...n,status:"relayed",opHash:d,relayedAt:Date.now(),relayerId:n.relayerOption.relayerId})}else throw new Error(`Invalid relayer option ${n.relayerOption.kind}`);if(!d)throw new Error(`Relayer ${n.relayerOption.relayerId} did not return an op hash`);const p=setInterval(async()=>{await this.refreshStatus(n.id)>0&&clearInterval(p)},1e3);if(setTimeout(()=>clearInterval(p),30*1e3),!d)throw new Error(`Relayer ${n.relayerOption.relayerId} did not return an op hash`)}onTransactionsUpdate(e,n){const r=this.shared.databases.transactions.addListener(()=>{this.list().then(s=>e(s))});return n&&this.list().then(s=>e(s)),r}onTransactionUpdate(e,n,r){const s=this.shared.databases.transactions.addListener(()=>{this.get(e).then(i=>n(i))});return r&&this.get(e).then(i=>n(i)),s}async delete(e){const n=await this.get(e);await this.shared.databases.transactions.del(e),n.status==="formed"&&await this.shared.modules.signatures.cancel(n.signatureId)}}function Wut(t){return"wallet"in t}function zut(t){return"kind"in t&&t.kind==="mnemonic"}function Jut(t){return"kind"in t&&t.kind==="passkey"}function Yut(t){return"kind"in t&&(t.kind==="google-pkce"||t.kind==="apple")}function UO(t){const e=1n;return t.length===0?{type:"signer",address:x0,weight:0n}:t.length===1?t[0].imageHash?{type:"sapient-signer",address:t[0].address,imageHash:t[0].imageHash,weight:e}:{type:"signer",address:t[0].address,weight:e}:{type:"nested",weight:e,threshold:1n,tree:hk(t.map(n=>n.imageHash?{type:"sapient-signer",address:n.address,imageHash:n.imageHash,weight:1n}:{type:"signer",address:n.address,weight:1n}))}}function Zle(t,e,n,r,s){return s?{checkpoint:t,threshold:2n,topology:[[[e,n],s],Xle(r)]}:{checkpoint:t,threshold:1n,topology:[[e,n],Xle(r)]}}function Xle(t){if(t.length===0)return{type:"signer",address:x0,weight:0n};const e=t.map(n=>n.guardLeaf?{type:"nested",weight:n.weight,threshold:n.sapientLeaf.weight+B3(n.guardLeaf,()=>!0).maxWeight,tree:[n.sapientLeaf,n.guardLeaf]}:n.sapientLeaf);return hk(e)}function _M(t){let e=[];if(ti(t))e=[..._M(t[0]),..._M(t[1])];else if(za(t))e.push({sapientLeaf:t,weight:t.weight});else if(Cl(t)&&ti(t.tree)&&za(t.tree[0]))e.push({sapientLeaf:t.tree[0],weight:t.weight,guardLeaf:t.tree[1]});else{if(To(t))return[];throw new Error("unknown-modules-topology-format")}return e}function FO(t){if(t.threshold===1n){if(ti(t.topology)&&ti(t.topology[0]))return{loginTopology:t.topology[0][0],devicesTopology:t.topology[0][1],modules:_M(t.topology[1])};throw new Error("unknown-config-format")}else if(t.threshold===2n){if(ti(t.topology)&&ti(t.topology[0])&&ti(t.topology[0][0])&&dk(t.topology[0][1]))return{loginTopology:t.topology[0][0][0],devicesTopology:t.topology[0][0][1],guardTopology:t.topology[0][1],modules:_M(t.topology[1])};throw new Error("unknown-config-format")}throw new Error("unknown-config-format")}class Qut{constructor(e){q(this,"shared");q(this,"walletSelectionUiHandler",null);q(this,"pendingMnemonicOrPasskeyLogin");this.shared=e}async has(e){return this.get(e).then(n=>n!==void 0)}async get(e){const n=await this.shared.databases.manager.get(Zd(e));return n||this.shared.databases.manager.get(e.toLowerCase())}async list(){return this.shared.databases.manager.list()}async listDevices(e){const n=await this.get(e);if(!n)throw new Error("wallet-not-found");const r=n.device,{devices:s}=await this.getConfiguration(e);return s.map(i=>({address:i.address,isLocal:Mn(i.address,r)}))}registerWalletSelector(e){if(this.walletSelectionUiHandler)throw new Error("wallet-selector-already-registered");return this.walletSelectionUiHandler=e,()=>{this.unregisterWalletSelector(e)}}unregisterWalletSelector(e){if(e&&this.walletSelectionUiHandler!==e)throw new Error("wallet-selector-not-registered");this.walletSelectionUiHandler=null}onWalletsUpdate(e,n){const r=this.shared.databases.manager.addListener(()=>{this.list().then(s=>{e(s)})});return n&&this.list().then(s=>{e(s)}),r}async prepareSignUp(e){switch(e.kind){case"passkey":const n=await this.shared.passkeyProvider.create(this.shared.sequence.extensions,{stateProvider:this.shared.sequence.stateProvider,credentialName:e.name});return this.shared.modules.logger.log("Created new passkey signer:",n.address),{signer:n,extra:{signerKind:ts.LoginPasskey}};case"mnemonic":const r=k5.toSigner(e.mnemonic);if(!r)throw new Error("invalid-mnemonic");return this.shared.modules.logger.log("Created new mnemonic signer:",r.address),{signer:r,extra:{signerKind:ts.LoginMnemonic}};case"email-otp":{const s=this.shared.handlers.get(ts.LoginEmailOtp);if(!s)throw new Error("email-otp-handler-not-registered");const{signer:i,email:a}=await s.getSigner(e.email);return this.shared.modules.logger.log("Created new email otp signer:",i.address,"Email:",a),{signer:i,extra:{signerKind:ts.LoginEmailOtp},loginEmail:a}}case"google-pkce":case"apple":{const s=this.shared.handlers.get("login-"+e.kind);if(!s)throw new Error("handler-not-registered");const[i,a]=await s.completeAuth(e.commitment,e.code),o=a.email;return this.shared.modules.logger.log("Created new auth code pkce signer:",i.address),{signer:i,extra:{signerKind:"login-"+e.kind},loginEmail:o}}}if(e.kind.startsWith("custom-")){const n=this.shared.handlers.get(e.kind);if(!n)throw new Error("handler-not-registered");const[r,s]=await n.completeAuth(e.commitment,e.code);return{signer:r,extra:{signerKind:e.kind},loginEmail:s.email}}throw new Error("invalid-signup-kind")}async startSignUpWithRedirect(e){const n=e.kind.startsWith("custom-")?e.kind:"login-"+e.kind,r=this.shared.handlers.get(n);if(!r)throw new Error("handler-not-registered");return r.commitAuth(e.target,!0)}async completeRedirect(e){const n=await this.shared.databases.authCommitments.get(e.state);if(!n)throw new Error("invalid-state");if(n.isSignUp)await this.signUp({kind:n.kind,commitment:n,code:e.code,noGuard:e.noGuard,target:n.target,isRedirect:!0,use4337:e.use4337});else{const r=n.kind.startsWith("custom-")?n.kind:"login-"+n.kind,s=this.shared.handlers.get(r);if(!s)throw new Error("handler-not-registered");await s.completeAuth(n,e.code)}if(!n.target)throw new Error("invalid-state");return n.target}async signUp(e){var g,m,v,A,S;const n=await this.prepareSignUp(e);if((g=e.onStatusChange)==null||g.call(e,{type:"login-signer-created",address:await n.signer.address}),this.walletSelectionUiHandler){const I=await kj(this.shared.sequence.stateProvider,n.signer);if(I.length>0){for(const D of I){const V={address:D.wallet,status:"logging-in",loginEmail:n.loginEmail,loginType:n.extra.signerKind,loginDate:new Date().toISOString(),device:"",useGuard:!1};await this.shared.databases.manager.set(V)}const B=await this.walletSelectionUiHandler({existingWallets:I.map(D=>D.wallet),signerAddress:await n.signer.address,context:Yut(e)?{isRedirect:e.isRedirect,target:e.target}:{isRedirect:!1}});if(B==="abort-signup"){for(const D of I){const V=await this.shared.databases.manager.get(D.wallet);V&&!V.device&&await this.shared.databases.manager.del(D.wallet)}(m=e.onStatusChange)==null||m.call(e,{type:"signup-aborted"});return}if(B==="create-new")for(const D of I)await this.shared.databases.manager.del(D.wallet);else throw new Error("invalid-result-from-wallet-selector")}}else console.warn("No wallet selector registered, creating a new wallet");const r=await this.shared.modules.devices.create();if((v=e.onStatusChange)==null||v.call(e,{type:"device-signer-created",address:r.address}),!e.noGuard&&!this.shared.sequence.defaultGuardTopology)throw new Error("guard is required for signup");const s=await n.signer.address,i=UO([{address:s,imageHash:DW(n.signer)?await n.signer.imageHash:void 0}]),a=UO([{address:r.address}]),o=e.noGuard?void 0:this.shared.modules.guards.topology("wallet"),c=e.noGuard?void 0:this.shared.modules.guards.topology("sessions");let l=[];if(!e.noSessionManager){const I=[r.address];DW(n.signer)||I.unshift(s),await this.shared.modules.sessions.initSessionModule(l,I,c)}e.noRecovery||await this.shared.modules.recovery.initRecoveryModule(l,r.address);const u=Zle(0n,i,a,l,o);console.log("initialConfiguration",u);const f=e.use4337?this.shared.sequence.context4337:this.shared.sequence.context,d=await nu.fromConfiguration(u,{stateProvider:this.shared.sequence.stateProvider,guest:this.shared.sequence.guest,context:f});(A=e.onStatusChange)==null||A.call(e,{type:"wallet-created",address:d.address}),this.shared.modules.logger.log("Created new sequence wallet:",d.address),await this.shared.modules.devices.witness(r.address,d.address),await n.signer.witness(this.shared.sequence.stateProvider,d.address,n.extra);const p={address:d.address,status:"ready",loginDate:new Date().toISOString(),device:r.address,loginType:n.extra.signerKind,useGuard:!e.noGuard,loginEmail:n.loginEmail};try{await this.shared.databases.manager.set(p)}catch(I){throw console.error("[Wallets/signUp] Error saving new wallet entry:",I,"Entry was:",p),I}if(e.kind==="passkey"&&this.isPasskeySigner(n.signer))try{await this.shared.databases.passkeyCredentials.saveCredential(n.signer.credentialId,n.signer.publicKey,d.address),this.shared.modules.logger.log("Stored passkey credential mapping for wallet:",d.address)}catch(I){console.error("[Wallets/signUp] Error saving passkey mapping:",I)}return(S=e.onStatusChange)==null||S.call(e,{type:"signup-completed"}),d.address}async getConfigurationParts(e){const r=await new nu(e,{stateProvider:this.shared.sequence.stateProvider,guest:this.shared.sequence.guest}).getStatus();return FO(r.configuration)}async requestConfigurationUpdate(e,n,r,s){const i=new nu(e,{stateProvider:this.shared.sequence.stateProvider,guest:this.shared.sequence.guest}),a=await i.getStatus(),{loginTopology:o,devicesTopology:c,modules:l,guardTopology:u}=FO(a.configuration),f=n.loginTopology??o,d=n.devicesTopology??c,p=n.modules??l,g=n.guardTopology??u,m=await i.prepareUpdate(Zle(a.configuration.checkpoint+1n,f,d,p,g));return await this.shared.modules.signatures.request(m,r,{origin:s})}async completeConfigurationUpdate(e){const n=await this.shared.modules.signatures.get(e);if(!d5(n.envelope.payload))throw new Error("invalid-request-payload");if(!fEe(n.envelope))throw new Error("insufficient-weight");await new nu(n.wallet,{stateProvider:this.shared.sequence.stateProvider,guest:this.shared.sequence.guest}).submitUpdate(n.envelope),await this.shared.modules.signatures.complete(e)}async login(e){if(Wut(e))try{const n=await this.get(e.wallet);if((n==null?void 0:n.status)==="ready")throw new Error("wallet-already-logged-in");const r=await this.shared.modules.devices.create(),{devicesTopology:s,modules:i,guardTopology:a}=await this.getConfigurationParts(e.wallet);await this.shared.modules.devices.witness(r.address,e.wallet);const o=zl(s);if(o.sapientSigners.length>0)throw new Error("found-sapient-signer-in-devices-topology");if(!o.isComplete)throw new Error("devices-topology-incomplete");const c=UO([...o.signers.filter(f=>f!==x0).map(f=>({address:f})),...o.sapientSigners.map(f=>({address:f.address,imageHash:f.imageHash})),{address:r.address}]);this.shared.modules.recovery.hasRecoveryModule(i)&&await this.shared.modules.recovery.addRecoverySignerToModules(i,r.address),this.shared.modules.sessions.hasSessionModule(i)&&await this.shared.modules.sessions.addIdentitySignerToModules(i,r.address);const l={...n,address:e.wallet,status:"logging-in",loginDate:new Date().toISOString(),device:r.address,loginType:(n==null?void 0:n.loginType)||this.pendingMnemonicOrPasskeyLogin||"wallet",loginEmail:n==null?void 0:n.loginEmail,useGuard:a!==void 0};await this.shared.databases.manager.set(l);const u=await this.requestConfigurationUpdate(e.wallet,{devicesTopology:c,modules:i},"login","wallet-webapp");return this.shared.modules.signatures.onCancel(u,async f=>{this.shared.modules.logger.log("Login cancelled",f),await this.shared.databases.manager.del(e.wallet)}),u}catch(n){throw n}finally{this.pendingMnemonicOrPasskeyLogin=void 0}if(zut(e)){const n=k5.toSigner(e.mnemonic);if(!n)throw new Error("invalid-mnemonic");const r=await kj(this.shared.sequence.stateProvider,n);if(r.length===0)throw new Error("no-wallets-found");const s=await e.selectWallet(r.map(a=>a.wallet));if(!r.some(a=>Mn(a.wallet,s)))throw new Error("wallet-not-found");return this.shared.handlers.get(ts.LoginMnemonic).addReadySigner(n),this.pendingMnemonicOrPasskeyLogin=ts.LoginMnemonic,this.login({wallet:s})}if(Jut(e)){let n;if(e.credentialId){this.shared.modules.logger.log("Using provided credentialId for passkey login:",e.credentialId);const a=await this.shared.databases.passkeyCredentials.getByCredentialId(e.credentialId);if(!a)throw new Error("credential-not-found");n=this.shared.passkeyProvider.fromCredential({credentialId:a.credentialId,publicKey:a.publicKey,extensions:this.shared.sequence.extensions,embedMetadata:!1,metadata:{credentialId:a.credentialId}})}else{this.shared.modules.logger.log("No credentialId provided, using discovery method");const a=await this.shared.passkeyProvider.find(this.shared.sequence.stateProvider,this.shared.sequence.extensions);if(!a)throw new Error("no-passkey-found");n=a}const r=await kj(this.shared.sequence.stateProvider,n);if(r.length===0)throw new Error("no-wallets-found");const s=await e.selectWallet(r.map(a=>a.wallet));if(!r.some(a=>Mn(a.wallet,s)))throw new Error("wallet-not-found");try{await this.shared.databases.passkeyCredentials.getByCredentialId(n.credentialId)?await this.shared.databases.passkeyCredentials.updateCredential(n.credentialId,{lastLoginAt:new Date().toISOString(),walletAddress:s}):await this.shared.databases.passkeyCredentials.saveCredential(n.credentialId,n.publicKey,s)}catch(a){this.shared.modules.logger.log("Failed to store discovered passkey credential:",a)}return this.shared.handlers.get(ts.LoginPasskey).addReadySigner(n),this.pendingMnemonicOrPasskeyLogin=ts.LoginPasskey,this.login({wallet:s})}throw new Error("invalid-login-args")}isPasskeySigner(e){const n=this.shared.passkeyProvider.isSigner;return n?n(e):typeof e=="object"&&e!==null&&"credentialId"in e&&"publicKey"in e&&"imageHash"in e}async completeLogin(e){const n=await this.shared.modules.signatures.get(e),r=await this.shared.databases.manager.get(n.wallet);if(!r)throw new Error("login-for-wallet-not-found");await this.completeConfigurationUpdate(e),await this.shared.databases.manager.set({...r,status:"ready",loginDate:new Date().toISOString()})}async logout(e,n){const r=await this.shared.databases.manager.get(e);if(!r)throw new Error("wallet-not-found");if(n!=null&&n.skipRemoveDevice){await Promise.all([this.shared.databases.manager.del(e),this.shared.modules.devices.remove(r.device)]);return}if(r.status!=="ready")throw console.warn(`Logout called on wallet ${e} with status ${r.status}. Aborting.`),new Error(`Wallet is not in 'ready' state for logout (current: ${r.status})`);const s=await this.shared.modules.devices.get(r.device);if(!s)throw new Error("device-not-found");const i=await this._prepareDeviceRemovalUpdate(e,s.address,"logout");return await this.shared.databases.manager.set({...r,status:"logging-out"}),i}async remoteLogout(e,n){const r=await this.get(e);if(!r)throw new Error("wallet-not-found");if(Mn(r.device,n))throw new Error("cannot-remote-logout-from-local-device");return await this._prepareDeviceRemovalUpdate(e,n,"remote-logout")}async completeLogout(e,n){const r=await this.shared.modules.signatures.get(e),s=await this.shared.databases.manager.get(r.wallet);if(!s)throw new Error("wallet-not-found");s.status!=="logging-out"&&this.shared.modules.logger.log(`Warning: Wallet ${r.wallet} status was ${s.status} during completeLogout.`),await this.completeConfigurationUpdate(e),await this.shared.databases.manager.del(r.wallet),await this.shared.modules.devices.remove(s.device)}async getConfiguration(e){const r=await new nu(e,{stateProvider:this.shared.sequence.stateProvider,guest:this.shared.sequence.guest}).getStatus(),s=FO(r.configuration),i=zl(s.devicesTopology),a=zl(s.loginTopology),o=s.guardTopology?zl(s.guardTopology):void 0,c=(await Promise.all(s.modules.filter(l=>l.guardLeaf).map(l=>({moduleAddress:l.sapientLeaf.address,guardSigners:zl(l.guardLeaf).signers})).filter(({guardSigners:l})=>l&&l.length>0).map(async({moduleAddress:l,guardSigners:u})=>({moduleAddress:l,guardSigners:await this.shared.modules.signers.resolveKinds(e,u)})))).filter(({guardSigners:l})=>l&&l.length>0).map(({moduleAddress:l,guardSigners:u})=>[l,u[0]]);return{devices:await this.shared.modules.signers.resolveKinds(e,[...i.signers,...i.sapientSigners]),login:await this.shared.modules.signers.resolveKinds(e,[...a.signers,...a.sapientSigners]),walletGuard:o&&o.signers.length>0?(await this.shared.modules.signers.resolveKinds(e,o.signers))[0]:void 0,moduleGuards:new Map(c),raw:s}}async getNonce(e,n,r){const s=new nu(n,{stateProvider:this.shared.sequence.stateProvider,guest:this.shared.sequence.guest}),i=this.shared.sequence.networks.find(o=>o.chainId===e);if(!i)throw new Error("network-not-found");const a=Kw(Gw(i.rpcUrl));return s.getNonce(a,r)}async getOnchainConfiguration(e,n){const r=new nu(e,{stateProvider:this.shared.sequence.stateProvider,guest:this.shared.sequence.guest}),s=this.shared.sequence.networks.find(d=>d.chainId===n);if(!s)throw new Error("network-not-found");const i=Kw(Gw(s.rpcUrl)),a=await r.getStatus(i);if(!await this.shared.sequence.stateProvider.getConfiguration(a.onChainImageHash))throw new Error("onchain-configuration-not-found");const c=FO(a.configuration),l=zl(c.devicesTopology),u=zl(c.loginTopology),f=c.guardTopology?zl(c.guardTopology):void 0;return{devices:await this.shared.modules.signers.resolveKinds(e,[...l.signers,...l.sapientSigners]),login:await this.shared.modules.signers.resolveKinds(e,[...u.signers,...u.sapientSigners]),guard:f?await this.shared.modules.signers.resolveKinds(e,[...f.signers,...f.sapientSigners]):[],raw:c}}async isUpdatedOnchain(e,n){const r=new nu(e,{stateProvider:this.shared.sequence.stateProvider,guest:this.shared.sequence.guest}),s=this.shared.sequence.networks.find(o=>o.chainId===n);if(!s)throw new Error("network-not-found");const i=Kw(Gw(s.rpcUrl)),a=await r.getStatus(i);return a.imageHash===a.onChainImageHash}async _prepareDeviceRemovalUpdate(e,n,r){const{devicesTopology:s,modules:i}=await this.getConfigurationParts(e),a=UO([...zl(s).signers.filter(c=>c!==x0&&!Mn(c,n)).map(c=>({address:c})),...zl(s).sapientSigners]);return this.shared.modules.recovery.hasRecoveryModule(i)&&await this.shared.modules.recovery.removeRecoverySignerFromModules(i,n),this.shared.modules.sessions.hasSessionModule(i)&&await this.shared.modules.sessions.removeIdentitySignerFromModules(i,n),await this.requestConfigurationUpdate(e,{devicesTopology:a,modules:i},r,"wallet-webapp")}}class Zut{constructor(e,n){q(this,"signatures");q(this,"guards");q(this,"kind",ts.Guard);q(this,"onPromptCode");this.signatures=e,this.guards=n}registerUI(e){return this.onPromptCode=e,()=>{this.onPromptCode=void 0}}unregisterUI(){this.onPromptCode=void 0}onStatusChange(e){return()=>{}}async status(e,n,r){const s=this.guards.getByAddress(e);if(!s)return{address:e,handler:this,status:"unavailable",reason:"guard-not-found"};const[i,a]=s;if(i!=="wallet")return{address:e,handler:this,status:"unavailable",reason:"not-wallet-guard"};const o=this.onPromptCode;return o?r.envelope.signatures.length===0?{address:e,handler:this,status:"unavailable",reason:"must-not-sign-first"}:{address:e,handler:this,status:"ready",handle:()=>new Promise(async(c,l)=>{try{const u=await a.signEnvelope(r.envelope);await this.signatures.addSignature(r.id,u),c(!0)}catch(u){if(u instanceof mk){const f=async d=>{const p=await a.signEnvelope(r.envelope,d);await this.signatures.addSignature(r.id,p),c(!0)};await o(r,u.id,f)}else l(u)}})}:{address:e,handler:this,status:"unavailable",reason:"guard-ui-not-registered"}}}const Xut={create:(t,e)=>hg.create(t,e),find:(t,e,n)=>hg.find(t,e,n),loadFromWitness:(t,e,n,r,s)=>hg.loadFromWitness(t,e,n,r,s),fromCredential:({credentialId:t,publicKey:e,extensions:n,embedMetadata:r,metadata:s,webauthn:i})=>new hg({credentialId:t,publicKey:e,extensions:n,embedMetadata:r,metadata:s,webauthn:i}),isSigner:t=>t instanceof hg},Wr={verbose:!1,extensions:IX,context:rEe,context4337:sEe,guest:gX,encryptedPksDb:new dEe,managerDb:new wut,signaturesDb:new mut,transactionsDb:new yut,messagesDb:new gut,authCommitmentsDb:new put,recoveryDb:new but,authKeysDb:new Z3e,passkeyCredentialsDb:new vut,dbPruningInterval:1e3*60*60*24,passkeyProvider:Xut,stateProvider:typeof fetch<"u"?new b5(void 0,fetch):void 0,networks:lEe,relayers:()=>typeof window<"u"?[XAe.createFromWindow(window)].filter(t=>t!==void 0):[],bundlers:[],nonWitnessableSigners:[],guardUrl:"https://guard.sequence.app",guardAddresses:{wallet:"0x26f3D30F41FA897309Ae804A2AFf15CEb1dA5742",sessions:"0xF6Bc87F5F2edAdb66737E32D37b46423901dfEF1"},defaultGuardTopology:{type:"nested",weight:1n,threshold:1n,tree:[{type:"signer",address:pX,weight:1n},{type:"signer",address:"0x007a47e6BF40C1e0ed5c01aE42fDC75879140bc4",weight:1n}]},defaultSessionsTopology:{type:"sapient-signer",weight:1n},defaultRecoverySettings:{requiredDeltaTime:2592000n,minTimestamp:0n,includeTestnets:!1},multiInjectedProviderDiscovery:!0,identity:{url:"https://identity.sequence.app",fetch:typeof window<"u"?window.fetch:void 0,verifyAttestation:!0,email:{enabled:!1},google:{enabled:!1,clientId:""},apple:{enabled:!1,clientId:""}}};function eft(t){var l,u,f,d;const e=X3e(t==null?void 0:t.env),n={...Wr.identity,...t==null?void 0:t.identity,email:{...Wr.identity.email,...(l=t==null?void 0:t.identity)==null?void 0:l.email},google:{...Wr.identity.google,...(u=t==null?void 0:t.identity)==null?void 0:u.google},apple:{...Wr.identity.apple,...(f=t==null?void 0:t.identity)==null?void 0:f.apple}};!n.fetch&&e.fetch&&(n.fetch=e.fetch);let r=(t==null?void 0:t.encryptedPksDb)??Wr.encryptedPksDb;!(t!=null&&t.encryptedPksDb)&&(t!=null&&t.env)&&(r=new dEe(void 0,void 0,e));let s=(t==null?void 0:t.authKeysDb)??Wr.authKeysDb;!(t!=null&&t.authKeysDb)&&(t!=null&&t.env)&&(s=new Z3e(void 0,e));let i=(t==null?void 0:t.stateProvider)??Wr.stateProvider;if(!(t!=null&&t.stateProvider)&&((d=t==null?void 0:t.env)!=null&&d.fetch)?i=new b5(void 0,t.env.fetch):!i&&e.fetch&&(i=new b5(void 0,e.fetch)),!i)throw new Error("stateProvider is required. Provide ManagerOptions.stateProvider or env.fetch");const a=(t==null?void 0:t.extensions)??Wr.extensions,o=(t==null?void 0:t.defaultGuardTopology)??Wr.defaultGuardTopology,c=new Set;for(const p of Wr.nonWitnessableSigners??[])c.add(p.toLowerCase());for(const p of(t==null?void 0:t.nonWitnessableSigners)??[])c.add(p.toLowerCase());if(c.add(a.sessions.toLowerCase()),o){const p=zl(o);for(const g of p.signers)Mn(g,pX)||c.add(g.toLowerCase());for(const g of p.sapientSigners)c.add(g.address.toLowerCase())}return{verbose:(t==null?void 0:t.verbose)??Wr.verbose,extensions:a,context:(t==null?void 0:t.context)??Wr.context,context4337:(t==null?void 0:t.context4337)??Wr.context4337,guest:(t==null?void 0:t.guest)??Wr.guest,encryptedPksDb:r,managerDb:(t==null?void 0:t.managerDb)??Wr.managerDb,transactionsDb:(t==null?void 0:t.transactionsDb)??Wr.transactionsDb,signaturesDb:(t==null?void 0:t.signaturesDb)??Wr.signaturesDb,messagesDb:(t==null?void 0:t.messagesDb)??Wr.messagesDb,authCommitmentsDb:(t==null?void 0:t.authCommitmentsDb)??Wr.authCommitmentsDb,recoveryDb:(t==null?void 0:t.recoveryDb)??Wr.recoveryDb,authKeysDb:s,passkeyCredentialsDb:(t==null?void 0:t.passkeyCredentialsDb)??Wr.passkeyCredentialsDb,dbPruningInterval:(t==null?void 0:t.dbPruningInterval)??Wr.dbPruningInterval,env:e,passkeyProvider:(t==null?void 0:t.passkeyProvider)??Wr.passkeyProvider,stateProvider:i,networks:(t==null?void 0:t.networks)??Wr.networks,relayers:(t==null?void 0:t.relayers)??Wr.relayers,bundlers:(t==null?void 0:t.bundlers)??Wr.bundlers,guardUrl:(t==null?void 0:t.guardUrl)??Wr.guardUrl,guardAddresses:(t==null?void 0:t.guardAddresses)??Wr.guardAddresses,nonWitnessableSigners:Array.from(c),defaultGuardTopology:o,defaultRecoverySettings:(t==null?void 0:t.defaultRecoverySettings)??Wr.defaultRecoverySettings,multiInjectedProviderDiscovery:(t==null?void 0:t.multiInjectedProviderDiscovery)??Wr.multiInjectedProviderDiscovery,identity:n}}class tft{constructor(e){q(this,"shared");q(this,"mnemonicHandler");q(this,"devicesHandler");q(this,"passkeysHandler");q(this,"recoveryHandler");q(this,"guardHandler");q(this,"otpHandler");q(this,"wallets");q(this,"signatures");q(this,"transactions");q(this,"messages");q(this,"sessions");q(this,"recovery");var l,u,f,d;const n=eft(e);let r=[];if(n.multiInjectedProviderDiscovery)try{r.push(...zit())}catch(p){console.warn("Failed to initialize EIP-6963 relayers:",p)}const s=typeof n.relayers=="function"?n.relayers():n.relayers;r.push(...s);const i={verbose:n.verbose,sequence:{context:n.context,context4337:n.context4337,extensions:n.extensions,guest:n.guest,stateProvider:n.stateProvider,networks:n.networks,relayers:r,bundlers:n.bundlers,nonWitnessableSigners:new Set((n.nonWitnessableSigners??[]).map(p=>p.toLowerCase())),defaultGuardTopology:n.defaultGuardTopology,defaultRecoverySettings:n.defaultRecoverySettings,guardUrl:n.guardUrl,guardAddresses:n.guardAddresses},databases:{encryptedPks:n.encryptedPksDb,manager:n.managerDb,signatures:n.signaturesDb,transactions:n.transactionsDb,messages:n.messagesDb,authCommitments:n.authCommitmentsDb,authKeys:n.authKeysDb,recovery:n.recoveryDb,passkeyCredentials:n.passkeyCredentialsDb,pruningInterval:n.dbPruningInterval},env:n.env,passkeyProvider:n.passkeyProvider,modules:{},handlers:new Map},a={cron:new xut(i),logger:new Rut(i),devices:new Eut(i),guards:new Aut(i),wallets:new Qut(i),sessions:new Vut(i),signers:new qut(i),signatures:new $ut(i),transactions:new Gut(i),messages:new Uut(i),recovery:new Fut(i)};this.wallets=a.wallets,this.signatures=a.signatures,this.transactions=a.transactions,this.messages=a.messages,this.sessions=a.sessions,this.recovery=a.recovery,this.devicesHandler=new Iut(a.signatures,a.devices),i.handlers.set(ts.LocalDevice,this.devicesHandler),this.passkeysHandler=new Cut(a.signatures,i.sequence.extensions,i.sequence.stateProvider,i.passkeyProvider),i.handlers.set(ts.LoginPasskey,this.passkeysHandler),this.mnemonicHandler=new k5(a.signatures),i.handlers.set(ts.LoginMnemonic,this.mnemonicHandler),this.recoveryHandler=new Out(a.signatures,a.recovery),i.handlers.set(ts.Recovery,this.recoveryHandler),this.guardHandler=new Zut(a.signatures,a.guards),i.handlers.set(ts.Guard,this.guardHandler);const o=n.identity.verifyAttestation?Xlt({fetch:n.identity.fetch,expectedPCRs:n.identity.expectedPcr0?new Map([[0,n.identity.expectedPcr0]]):void 0,logTiming:!0}):n.identity.fetch,c=new Urt(n.identity.url,n.identity.scope,o);if((l=n.identity.email)!=null&&l.enabled&&(this.otpHandler=new Put(c,a.signatures,i.databases.authKeys,i.env),i.handlers.set(ts.LoginEmailOtp,this.otpHandler)),(u=n.identity.google)!=null&&u.enabled&&i.handlers.set(ts.LoginGooglePkce,new kz("google-pkce","https://accounts.google.com","https://accounts.google.com/o/oauth2/v2/auth",n.identity.google.clientId,c,a.signatures,i.databases.authCommitments,i.databases.authKeys,i.env)),(f=n.identity.apple)!=null&&f.enabled&&i.handlers.set(ts.LoginApple,new S_("apple","https://appleid.apple.com","https://appleid.apple.com/auth/authorize",n.identity.apple.clientId,c,a.signatures,i.databases.authCommitments,i.databases.authKeys,i.env)),(d=n.identity.customProviders)!=null&&d.length)for(const p of n.identity.customProviders)switch(p.authMethod){case"id-token":throw new Error("id-token is not supported yet");case"authcode":i.handlers.set(p.kind,new S_(p.kind,p.issuer,p.oauthUrl,p.clientId,c,a.signatures,i.databases.authCommitments,i.databases.authKeys,i.env));break;case"authcode-pkce":i.handlers.set(p.kind,new kz(p.kind,p.issuer,p.oauthUrl,p.clientId,c,a.signatures,i.databases.authCommitments,i.databases.authKeys,i.env));break;default:throw new Error("unsupported auth method")}i.modules=a,this.shared=i;for(const p of Object.values(a))"initialize"in p&&typeof p.initialize=="function"&&p.initialize()}registerMnemonicUI(e){return this.mnemonicHandler.registerUI(e)}registerOtpUI(e){var n;return((n=this.otpHandler)==null?void 0:n.registerUI(e))||(()=>{})}registerGuardUI(e){var n;return((n=this.guardHandler)==null?void 0:n.registerUI(e))||(()=>{})}async setRedirectPrefix(e){this.shared.handlers.forEach(n=>{n instanceof S_&&n.setRedirectUri(e+"/"+n.signupKind)})}getNetworks(){return this.shared.sequence.networks}getNetwork(e){return this.shared.sequence.networks.find(n=>n.chainId===e)}async getPasskeyCredentials(){return this.shared.databases.passkeyCredentials.list()}async stop(){await this.shared.modules.cron.stop(),await Promise.all([this.shared.databases.authKeys.close(),this.shared.databases.authCommitments.close(),this.shared.databases.manager.close(),this.shared.databases.recovery.close(),this.shared.databases.signatures.close(),this.shared.databases.transactions.close()])}}const Ld=new Map([[1,["mainnet","https://ethereum-rpc.publicnode.com"]],[11155111,["sepolia","https://ethereum-sepolia-rpc.publicnode.com"]],[137,["polygon","https://polygon-bor-rpc.publicnode.com"]],[143,["monad","https://monad-mainnet.drpc.org"]],[1868,["sonium","https://rpc.soneium.org"]],[80002,["polygon-amoy","https://rpc-amoy.polygon.technology"]],[1101,["polygon-zkevm","https://zkevm-rpc.com"]],[56,["bnb","https://bsc-rpc.publicnode.com"]],[97,["bnb-testnet","https://bsc-testnet-rpc.publicnode.com"]],[10,["optimism","https://optimism-rpc.publicnode.com"]],[11155420,["optimism-sepolia","https://sepolia.optimism.io"]],[42161,["arbitrum","https://arb1.arbitrum.io/rpc"]],[421614,["arbitrum-sepolia","https://sepolia-rollup.arbitrum.io/rpc"]],[127823,["etherlink-shadownet-testnet","https://127823.rpc.thirdweb.com"]],[747474,["katana","https://rpc.katana.network"]],[5042002,["arc-testnet","https://rpc.testnet.arc.network"]],[42170,["arbitrum-nova","https://arbitrum-nova.publicnode.com"]],[43114,["avalanche","https://avalanche-c-chain-rpc.publicnode.com"]],[5031,["somnia-mainnet","https://api.infra.mainnet.somnia.network/"]],[50312,["somnia-testnet","https://dream-rpc.somnia.network/"]],[10143,["monad-testnet","https://testnet-rpc.monad.xyz"]],[168587773,["blast-sepolia","https://sepolia.blast.io"]],[24101,["incentiv-mainnet","https://rpc.incentiv.io"]],[28802,["incentiv-testnet-v2","https://rpc.testnet.incentiv.io/"]],[43113,["avalanche-testnet","https://avalanche-fuji-c-chain-rpc.publicnode.com"]],[100,["gnosis","https://gnosis-pokt.nodies.app"]],[8453,["base","https://base.drpc.org"]],[84532,["base-sepolia","https://base-sepolia-rpc.publicnode.com"]],[19011,["homeverse","https://rpc.mainnet.oasys.homeverse.games"]],[40875,["homeverse-testnet","https://rpc.testnet.oasys.homeverse.games"]],[660279,["xai","https://xai-chain.net/rpc"]],[37714555429,["xai-testnet","https://testnet-v2.xai-chain.net/rpc"]],[3776,["astar-zkevm","https://rpc.startale.com/astar-zkevm"]],[6038361,["astar-zkyoto","https://rpc.startale.com/zkyoto"]],[2730,["xr-sepolia-testnet","https://xr-sepolia-testnet.rpc.caldera.xyz/http"]],[40,["telos","https://1rpc.io/telos/evm"]],[41,["telos-testnet","https://rpc.testnet.telos.net"]],[1946,["minato","https://rpc.minato.soneium.org"]],[7668,["rootnet","https://root.rootnet.live/archive"]],[8333,["b3","https://mainnet-rpc.b3.fun"]],[1993,["b3-testnet","https://sepolia.b3.fun"]],[13371,["immutable","https://rpc.immutable.com"]],[33139,["apechain","https://rpc.apechain.com"]],[81457,["blast","https://blast-rpc.publicnode.com"]],[33111,["curtis","https://rpc.curtis.apechain.com"]],[1482601649,["green-giddy-denebola","https://mainnet.skalenodes.com/v1/green-giddy-denebola"]],[37084624,["lanky-ill-funny-testnet","https://testnet.skalenodes.com/v1/lanky-ill-funny-testnet"]],[13473,["immutable","https://rpc.immutable.com"]],[7672,["porcini","https://porcini.rootnet.app/archive"]],[42793,["etherlink","https://node.mainnet.etherlink.com"]],[128123,["etherlink-ghostnet-testnet","https://rpc.ankr.com/etherlink_testnet"]],[1284,["moonbeam","https://moonbeam-rpc.publicnode.com"]],[1287,["moonbeam-alpha","https://moonbase-alpha.drpc.org"]]]),nft=new Set([31337,31338]);function rft(t){var n;const e=(n=Ld.get(t))==null?void 0:n[1];return e||""}const e6e=[je.MAINNET,je.SEPOLIA,je.POLYGON,je.POLYGON_ZKEVM,je.POLYGON_AMOY,je.BSC,je.BSC_TESTNET,je.OPTIMISM,je.OPTIMISM_SEPOLIA,je.ARBITRUM,je.ARBITRUM_SEPOLIA,je.ARBITRUM_NOVA,je.AVALANCHE,je.AVALANCHE_TESTNET,je.GNOSIS,je.BASE,je.BASE_SEPOLIA,je.XAI,je.TELOS,je.TELOS_TESTNET,je.B3,je.B3_SEPOLIA,je.APECHAIN,je.BLAST,je.BLAST_SEPOLIA,je.IMMUTABLE_ZKEVM,je.IMMUTABLE_ZKEVM_TESTNET,je.ETHERLINK,je.MOONBEAM,je.MOONBASE_ALPHA,je.MONAD_TESTNET,je.SOMNIA_TESTNET,je.KATANA,je.SONEIUM,je.SONEIUM_MINATO,je.HOMEVERSE,je.HOMEVERSE_TESTNET,je.TOY_TESTNET,je.INCENTIV_TESTNET_V2,je.SANDBOX_TESTNET,je.SOMNIA,je.MONAD,je.ARC_TESTNET].map(t=>{const e=y4(t);if(!e)throw new Error(`Network with chainId ${t} not found`);return{...e,rpcUrl:rft(e.chainId)}}),sft="https://sessions.sequence.app";let t6e;const ift=new Ynt(new Jnt("sequence-cache"));t6e=new Qnt({source:new b5(sft),cache:ift});const ba=new tft({networks:e6e,multiInjectedProviderDiscovery:!0,stateProvider:t6e,defaultRecoverySettings:{requiredDeltaTime:2592000n,minTimestamp:0n}});function aft(){const t=F.useRef(null),e=F.useCallback(()=>new Promise(r=>{t.current=r}),[]),n=F.useCallback(r=>{t.current&&(t.current(r),t.current=null)},[]);return F.useEffect(()=>{const r=ba.registerMnemonicUI(async s=>{const i=await e();if(i)try{await s(i)}catch(a){r(),alert("Error with mnemonic: "+a)}})},[]),{value:e,resolve:n}}const i0={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function n6e(t){return"init"in t}function Oz(t){return!!t.write}function eue(t){return"v"in t||"e"in t}function BM(t){if("e"in t)throw t.e;if((i0?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v}function MM(t){return typeof(t==null?void 0:t.then)=="function"}function r6e(t,e,n){if(!n.p.has(t)){n.p.add(t);const r=()=>n.p.delete(t);e.then(r,r)}}function s6e(t,e,n){var r;const s=new Set;for(const i of((r=n.get(t))==null?void 0:r.t)||[])s.add(i);for(const i of e.p)s.add(i);return s}const oft=(t,e,...n)=>e.read(...n),cft=(t,e,...n)=>e.write(...n),lft=(t,e)=>{var n;return(n=e.INTERNAL_onInit)==null?void 0:n.call(e,t)},uft=(t,e,n)=>{var r;return(r=e.onMount)==null?void 0:r.call(e,n)},fft=(t,e)=>{var n;const r=Ta(t),s=r[0],i=r[6],a=r[9];if((i0?"production":void 0)!=="production"&&!e)throw new Error("Atom is undefined or null");let o=s.get(e);return o||(o={d:new Map,p:new Set,n:0},s.set(e,o),(n=i.i)==null||n.call(i,e),a==null||a(t,e)),o},dft=t=>{const e=Ta(t),n=e[1],r=e[3],s=e[4],i=e[5],a=e[6],o=e[13],c=[],l=u=>{try{u()}catch(f){c.push(f)}};do{a.f&&l(a.f);const u=new Set,f=u.add.bind(u);r.forEach(d=>{var p;return(p=n.get(d))==null?void 0:p.l.forEach(f)}),r.clear(),i.forEach(f),i.clear(),s.forEach(f),s.clear(),u.forEach(l),r.size&&o(t)}while(r.size||i.size||s.size);if(c.length)throw new AggregateError(c)},hft=t=>{const e=Ta(t),n=e[1],r=e[2],s=e[3],i=e[11],a=e[14],o=e[17],c=[],l=new WeakSet,u=new WeakSet,f=Array.from(s);for(;f.length;){const d=f[f.length-1],p=i(t,d);if(u.has(d)){f.pop();continue}if(l.has(d)){if(r.get(d)===p.n)c.push([d,p]);else if((i0?"production":void 0)!=="production"&&r.has(d))throw new Error("[Bug] invalidated atom exists");u.add(d),f.pop();continue}l.add(d);for(const g of s6e(d,p,n))l.has(g)||f.push(g)}for(let d=c.length-1;d>=0;--d){const[p,g]=c[d];let m=!1;for(const v of g.d.keys())if(v!==p&&s.has(v)){m=!0;break}m&&(a(t,p),o(t,p)),r.delete(p)}},Rz=new WeakSet,pft=(t,e)=>{var n,r;const s=Ta(t),i=s[1],a=s[2],o=s[3],c=s[6],l=s[7],u=s[11],f=s[12],d=s[13],p=s[14],g=s[16],m=s[17],v=s[20],A=s[26],S=u(t,e);if(eue(S)){if(i.has(e)&&a.get(e)!==S.n)return S;let k=!1;for(const[b,w]of S.d)if(p(t,b).n!==w){k=!0;break}if(!k)return S}let I=!0;const B=new Set(S.d.keys()),D=new Map,V=()=>{for(const k of B)D.has(k)||S.d.delete(k)},O=()=>{if(i.has(e)){const k=!o.size;m(t,e),k&&(d(t),f(t))}},U=k=>{var b;if(k===e){const N=u(t,k);if(!eue(N))if(n6e(k))v(t,k,k.init);else throw new Error("no atom init");return BM(N)}const w=p(t,k);try{return BM(w)}finally{D.set(k,w.n),S.d.set(k,w.n),MM(S.v)&&r6e(e,S.v,w),i.has(e)&&((b=i.get(k))==null||b.t.add(e)),I||O()}};let Q,ie;const G={get signal(){return Q||(Q=new AbortController),Q.signal},get setSelf(){return(i0?"production":void 0)!=="production"&&console.warn("[DEPRECATED] setSelf is deprecated and will be removed in v3."),(i0?"production":void 0)!=="production"&&!Oz(e)&&console.warn("setSelf function cannot be used with read-only atom"),!ie&&Oz(e)&&(ie=(...k)=>{if((i0?"production":void 0)!=="production"&&I&&console.warn("setSelf function cannot be called in sync"),!I)try{return g(t,e,...k)}finally{d(t),f(t)}}),ie}},R=S.n;try{(i0?"production":void 0)!=="production"&&Rz.delete(t);const k=l(t,e,U,G);if((i0?"production":void 0)!=="production"&&Rz.has(t)&&console.warn("Detected store mutation during atom read. This is not supported."),v(t,e,k),MM(k)){A(t,k,()=>Q==null?void 0:Q.abort());const b=()=>{V(),O()};k.then(b,b)}else V();return(n=c.r)==null||n.call(c,e),S}catch(k){return delete S.v,S.e=k,++S.n,S}finally{I=!1,R!==S.n&&a.get(e)===R&&(a.set(e,S.n),o.add(e),(r=c.c)==null||r.call(c,e))}},gft=(t,e)=>{const n=Ta(t),r=n[1],s=n[2],i=n[11],a=[e];for(;a.length;){const o=a.pop(),c=i(t,o);for(const l of s6e(o,c,r)){const u=i(t,l);s.get(l)!==u.n&&(s.set(l,u.n),a.push(l))}}},mft=(t,e,...n)=>{const r=Ta(t),s=r[3],i=r[6],a=r[8],o=r[11],c=r[12],l=r[13],u=r[14],f=r[15],d=r[16],p=r[17],g=r[20];let m=!0;const v=S=>BM(u(t,S)),A=(S,...I)=>{var B;const D=o(t,S);try{if(S===e){if(!n6e(S))throw new Error("atom not writable");(i0?"production":void 0)!=="production"&&Rz.add(t);const V=D.n,O=I[0];g(t,S,O),p(t,S),V!==D.n&&(s.add(S),f(t,S),(B=i.c)==null||B.call(i,S));return}else return d(t,S,...I)}finally{m||(l(t),c(t))}};try{return a(t,e,v,A,...n)}finally{m=!1}},yft=(t,e)=>{var n;const r=Ta(t),s=r[1],i=r[3],a=r[6],o=r[11],c=r[15],l=r[18],u=r[19],f=o(t,e),d=s.get(e);if(d){for(const[p,g]of f.d)if(!d.d.has(p)){const m=o(t,p);l(t,p).t.add(e),d.d.add(p),g!==m.n&&(i.add(p),c(t,p),(n=a.c)==null||n.call(a,p))}for(const p of d.d)if(!f.d.has(p)){d.d.delete(p);const g=u(t,p);g==null||g.t.delete(e)}}},wft=(t,e)=>{var n;const r=Ta(t),s=r[1],i=r[4],a=r[6],o=r[10],c=r[11],l=r[12],u=r[13],f=r[14],d=r[16],p=r[18],g=c(t,e);let m=s.get(e);if(!m){f(t,e);for(const v of g.d.keys())p(t,v).t.add(e);if(m={l:new Set,d:new Set(g.d.keys()),t:new Set},s.set(e,m),Oz(e)){const v=()=>{let A=!0;const S=(...I)=>{try{return d(t,e,...I)}finally{A||(u(t),l(t))}};try{const I=o(t,e,S);I&&(m.u=()=>{A=!0;try{I()}finally{A=!1}})}finally{A=!1}};i.add(v)}(n=a.m)==null||n.call(a,e)}return m},bft=(t,e)=>{var n,r;const s=Ta(t),i=s[1],a=s[5],o=s[6],c=s[11],l=s[19],u=c(t,e);let f=i.get(e);if(!f||f.l.size)return f;let d=!1;for(const p of f.t)if((n=i.get(p))!=null&&n.d.has(e)){d=!0;break}if(!d){f.u&&a.add(f.u),f=void 0,i.delete(e);for(const p of u.d.keys()){const g=l(t,p);g==null||g.t.delete(e)}(r=o.u)==null||r.call(o,e);return}return f},vft=(t,e,n)=>{const r=Ta(t),s=r[11],i=r[27],a=s(t,e),o="v"in a,c=a.v;if(MM(n))for(const l of a.d.keys())r6e(e,n,s(t,l));a.v=n,delete a.e,(!o||!Object.is(c,a.v))&&(++a.n,MM(c)&&i(t,c))},xft=(t,e)=>{const n=Ta(t)[14];return BM(n(t,e))},Eft=(t,e,...n)=>{const r=Ta(t),s=r[12],i=r[13],a=r[16];try{return a(t,e,...n)}finally{i(t),s(t)}},Aft=(t,e,n)=>{const r=Ta(t),s=r[12],i=r[18],a=r[19],c=i(t,e).l;return c.add(n),s(t),()=>{c.delete(n),a(t,e),s(t)}},Sft=(t,e,n)=>{const s=Ta(t)[25];let i=s.get(e);if(!i){i=new Set,s.set(e,i);const a=()=>s.delete(e);e.then(a,a)}i.add(n)},Ift=(t,e)=>{const s=Ta(t)[25].get(e);s==null||s.forEach(i=>i())},i6e=new WeakMap,Ta=t=>{const e=i6e.get(t);if((i0?"production":void 0)!=="production"&&!e)throw new Error("Store must be created by buildStore to read its building blocks");return e};function Cft(t){const e=Ta(t),n=e[24];return n?n(e):e}function Tft(...t){const e={get(r){const s=Ta(e)[21];return s(e,r)},set(r,...s){const i=Ta(e)[22];return i(e,r,...s)},sub(r,s){const i=Ta(e)[23];return i(e,r,s)}},n=[new WeakMap,new WeakMap,new WeakMap,new Set,new Set,new Set,{},oft,cft,lft,uft,fft,dft,hft,pft,gft,mft,yft,wft,bft,vft,xft,Eft,Aft,void 0,new WeakMap,Sft,Ift].map((r,s)=>t[s]||r);return i6e.set(e,Object.freeze(n)),e}const a6e={};let Nft=0;function kft(t,e){const n=`atom${++Nft}`,r={toString(){return(a6e?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?r.read=t:(r.init=t,r.read=Pft,r.write=Oft),r}function Pft(t){return t(this)}function Oft(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}function Rft(){return Tft()}let K8;function _ft(){return K8||(K8=Rft(),(a6e?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=K8),globalThis.__JOTAI_DEFAULT_STORE__!==K8&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),K8}const Bft={},Mft=F.createContext(void 0);function o6e(t){return F.useContext(Mft)||_ft()}const _z=t=>typeof(t==null?void 0:t.then)=="function",Bz=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},Dft=bn.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(Bz(t),t)}),FH=new WeakMap,tue=(t,e,n)=>{const s=Cft(t)[26];let i=FH.get(e);return i||(i=new Promise((a,o)=>{let c=e;const l=d=>p=>{c===d&&a(p)},u=d=>p=>{c===d&&o(p)},f=()=>{try{const d=n();_z(d)?(FH.set(d,i),c=d,d.then(l(d),u(d)),s(t,d,f)):a(d)}catch(d){o(d)}};e.then(l(e),u(e)),s(t,e,f)}),FH.set(e,i)),i};function Lft(t,e){const{delay:n,unstable_promiseStatus:r=!bn.use}={},s=o6e(),[[i,a,o],c]=F.useReducer(u=>{const f=s.get(t);return Object.is(u[0],f)&&u[1]===s&&u[2]===t?u:[f,s,t]},void 0,()=>[s.get(t),s,t]);let l=i;if((a!==s||o!==t)&&(c(),l=s.get(t)),F.useEffect(()=>{const u=s.sub(t,()=>{if(r)try{const f=s.get(t);_z(f)&&Bz(tue(s,f,()=>s.get(t)))}catch{}if(typeof n=="number"){setTimeout(c,n);return}c()});return c(),u},[s,t,n,r]),F.useDebugValue(l),_z(l)){const u=tue(s,l,()=>s.get(t));return r&&Bz(u),Dft(u)}return l}function Uft(t,e){const n=o6e();return F.useCallback((...s)=>{if((Bft?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...s)},[n,t])}function Fft(t,e){return[Lft(t),Uft(t)]}const Vft=kft([]);function hU(){const[t,e]=Fft(Vft);function n(o){return t.find(c=>c.id===o||c.chainId===o)||void 0}function r(o,c){e(l=>{const u=[...l],f={id:o,chainId:c,status:"preparing"};return u.push(f),u})}function s(o,c){e(l=>{const u=[...l],f=u.findIndex(p=>p.id===o),d=u.find(p=>p.id===o);return u[f]={...d,...c},u})}function i(o){e(c=>{const l=[...c],u=l.findIndex(f=>f.id===o);return l.splice(u,1),l})}function a(o){const c=n(o);if(c)return c.status}return{values:t,set:e,get:n,status:a,add:r,update:s,remove:i}}const c6e="6.13.4";function $ft(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function Xi(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function tn(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&$ft(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function l3(t){if(t==null)return"null";if(Array.isArray(t))return"[ "+t.map(l3).join(", ")+" ]";if(t instanceof Uint8Array){const e="0123456789abcdef";let n="0x";for(let r=0;r<t.length;r++)n+=e[t[r]>>4],n+=e[t[r]&15];return n}if(typeof t=="object"&&typeof t.toJSON=="function")return l3(t.toJSON());switch(typeof t){case"boolean":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"number":return t.toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{ "+e.map(n=>`${l3(n)}: ${l3(t[n])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Ea(t,e){return t&&t.code===e}function Ree(t){return Ea(t,"CALL_EXCEPTION")}function gi(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${l3(n)}`);for(const a in n){if(a==="shortMessage")continue;const o=n[a];i.push(a+"="+l3(o))}}i.push(`code=${e}`),i.push(`version=${c6e}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return tn(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&tn(s,{shortMessage:r}),s}function Ye(t,e,n,r){if(!t)throw gi(e,n,r)}function Se(t,e,n,r){Ye(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function l6e(t,e,n){n==null&&(n=""),n&&(n=": "+n),Ye(t>=e,"missing arguemnt"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),Ye(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}const jft=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function u6e(t){Ye(jft.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function Mb(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),Ye(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function f6e(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}Se(!1,"invalid BytesLike value",e||"value",t)}function et(t,e){return f6e(t,e,!1)}function vo(t,e){return f6e(t,e,!0)}function rs(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function zg(t){return rs(t,!0)||t instanceof Uint8Array}const nue="0123456789abcdef";function Ke(t){const e=et(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=nue[(s&240)>>4]+nue[s&15]}return n}function Qr(t){return"0x"+t.map(e=>Ke(e).substring(2)).join("")}function Yx(t){return rs(t,!0)?(t.length-2)/2:et(t).length}function _s(t,e,n){const r=et(t);return n!=null&&n>r.length&&Ye(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Ke(r.slice(e??0,n??r.length))}function d6e(t,e,n){const r=et(t);Ye(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Ke(s)}function th(t,e){return d6e(t,e,!0)}function h6e(t,e){return d6e(t,e,!1)}const pU=BigInt(0),jd=BigInt(1),u3=9007199254740991;function DM(t,e){const n=gU(t,"value"),r=BigInt(er(e,"width"));if(Ye(n>>r===pU,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-jd){const s=(jd<<r)-jd;return-((~n&s)+jd)}return n}function _ee(t,e){let n=Yt(t,"value");const r=BigInt(er(e,"width")),s=jd<<r-jd;if(n<pU){n=-n,Ye(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(jd<<r)-jd;return(~n&i)+jd}else Ye(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Xv(t,e){const n=gU(t,"value"),r=BigInt(er(e,"bits"));return n&(jd<<r)-jd}function Yt(t,e){switch(typeof t){case"bigint":return t;case"number":return Se(Number.isInteger(t),"underflow",e||"value",t),Se(t>=-u3&&t<=u3,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Se(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Se(!1,"invalid BigNumberish value",e||"value",t)}function gU(t,e){const n=Yt(t,e);return Ye(n>=pU,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const rue="0123456789abcdef";function W7(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=rue[n>>4],e+=rue[n&15];return BigInt(e)}return Yt(t)}function er(t,e){switch(typeof t){case"bigint":return Se(t>=-u3&&t<=u3,"overflow",e||"value",t),Number(t);case"number":return Se(Number.isInteger(t),"underflow",e||"value",t),Se(t>=-u3&&t<=u3,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return er(BigInt(t),e)}catch(n){Se(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Se(!1,"invalid numeric value",e||"value",t)}function Hft(t){return er(W7(t))}function Mf(t,e){let r=gU(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=er(e,"width");for(Ye(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function xo(t){const e=gU(t,"value");if(e===pU)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function Kd(t){let e=Ke(zg(t)?t:xo(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const LM="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let VO=null;function qft(t){if(VO==null){VO={};for(let n=0;n<LM.length;n++)VO[LM[n]]=BigInt(n)}const e=VO[t];return Se(e!=null,"invalid base58 value","letter",t),e}const Kft=BigInt(0),Mz=BigInt(58);function p6e(t){const e=et(t);let n=W7(e),r="";for(;n;)r=LM[Number(n%Mz)]+r,n/=Mz;for(let s=0;s<e.length&&!e[s];s++)r=LM[0]+r;return r}function Gft(t){let e=Kft;for(let n=0;n<t.length;n++)e*=Mz,e+=qft(t[n]);return e}function Wft(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return et(e)}function zft(t){const e=et(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var a6;class g6e{constructor(e,n,r){q(this,"filter");q(this,"emitter");Le(this,a6);we(this,a6,n),tn(this,{emitter:e,filter:r})}async removeListener(){Y(this,a6)!=null&&await this.emitter.off(this.filter,Y(this,a6))}}a6=new WeakMap;function Jft(t,e,n,r,s){Se(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function m6e(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let a=e+1;a<n.length&&n[a]>>6===2;a++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function Yft(t,e,n,r,s){return t==="OVERLONG"?(Se(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),m6e(t,e,n))}const Qft=Object.freeze({error:Jft,ignore:m6e,replace:Yft});function Zft(t,e){e==null&&(e=Qft.error);const n=et(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let a=null,o=null;if((i&224)===192)a=1,o=127;else if((i&240)===224)a=2,o=2047;else if((i&248)===240)a=3,o=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+a>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-a-1)-1;for(let l=0;l<a;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-a,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-a,n,r,c);continue}if(c<=o){s+=e("OVERLONG",s-1-a,n,r,c);continue}r.push(c)}}return r}function aa(t,e){Se(typeof t=="string","invalid string value","str",t),e!=null&&(u6e(e),t=t.normalize(e));let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);Se(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const a=65536+((s&1023)<<10)+(i&1023);n.push(a>>18|240),n.push(a>>12&63|128),n.push(a>>6&63|128),n.push(a&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function Xft(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function I2(t,e){return Xft(Zft(t,e))}function y6e(t){async function e(n,r){Ye(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();Ye(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),Ye(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const a=new AbortController,o=setTimeout(()=>{i=gi("request timeout","TIMEOUT"),a.abort()},n.timeout);r&&r.addListener(()=>{i=gi("request cancelled","CANCELLED"),a.abort()});const c={method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:a.signal};let l;try{l=await fetch(n.url,c)}catch(p){throw clearTimeout(o),i||p}clearTimeout(o);const u={};l.headers.forEach((p,g)=>{u[g.toLowerCase()]=p});const f=await l.arrayBuffer(),d=f==null?null:new Uint8Array(f);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:d}}return e}const edt=12,tdt=250;let sue=y6e();const ndt=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),rdt=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let VH=!1;async function w6e(t,e){try{const n=t.match(ndt);if(!n)throw new Error("invalid data");return new eb(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?Wft(n[3]):idt(n[3]))}catch{return new eb(599,"BAD REQUEST (invalid data: URI)",{},null,new F0(t))}}function b6e(t){async function e(n,r){try{const s=n.match(rdt);if(!s)throw new Error("invalid link");return new F0(`${t}${s[2]}`)}catch{return new eb(599,"BAD REQUEST (invalid IPFS URI)",{},null,new F0(n))}}return e}const $O={data:w6e,ipfs:b6e("https://gateway.ipfs.io/ipfs/")},v6e=new WeakMap;var lx,nw;class sdt{constructor(e){Le(this,lx);Le(this,nw);we(this,lx,[]),we(this,nw,!1),v6e.set(e,()=>{if(!Y(this,nw)){we(this,nw,!0);for(const n of Y(this,lx))setTimeout(()=>{n()},0);we(this,lx,[])}})}addListener(e){Ye(!Y(this,nw),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),Y(this,lx).push(e)}get cancelled(){return Y(this,nw)}checkSignal(){Ye(!this.cancelled,"cancelled","CANCELLED",{})}}lx=new WeakMap,nw=new WeakMap;function jO(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var o6,c6,Td,eg,l6,u6,Ba,Ql,tg,ux,fx,dx,Wh,Nd,rw,hx,vT;const ND=class ND{constructor(e){Le(this,hx);Le(this,o6);Le(this,c6);Le(this,Td);Le(this,eg);Le(this,l6);Le(this,u6);Le(this,Ba);Le(this,Ql);Le(this,tg);Le(this,ux);Le(this,fx);Le(this,dx);Le(this,Wh);Le(this,Nd);Le(this,rw);we(this,u6,String(e)),we(this,o6,!1),we(this,c6,!0),we(this,Td,{}),we(this,eg,""),we(this,l6,3e5),we(this,Nd,{slotInterval:tdt,maxAttempts:edt}),we(this,rw,null)}get url(){return Y(this,u6)}set url(e){we(this,u6,String(e))}get body(){return Y(this,Ba)==null?null:new Uint8Array(Y(this,Ba))}set body(e){if(e==null)we(this,Ba,void 0),we(this,Ql,void 0);else if(typeof e=="string")we(this,Ba,aa(e)),we(this,Ql,"text/plain");else if(e instanceof Uint8Array)we(this,Ba,e),we(this,Ql,"application/octet-stream");else if(typeof e=="object")we(this,Ba,aa(JSON.stringify(e))),we(this,Ql,"application/json");else throw new Error("invalid body")}hasBody(){return Y(this,Ba)!=null}get method(){return Y(this,eg)?Y(this,eg):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),we(this,eg,String(e).toUpperCase())}get headers(){const e=Object.assign({},Y(this,Td));return Y(this,tg)&&(e.authorization=`Basic ${zft(aa(Y(this,tg)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&Y(this,Ql)&&(e["content-type"]=Y(this,Ql)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){Y(this,Td)[String(e).toLowerCase()]=String(n)}clearHeaders(){we(this,Td,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return Y(this,tg)||null}setCredentials(e,n){Se(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),we(this,tg,`${e}:${n}`)}get allowGzip(){return Y(this,c6)}set allowGzip(e){we(this,c6,!!e)}get allowInsecureAuthentication(){return!!Y(this,o6)}set allowInsecureAuthentication(e){we(this,o6,!!e)}get timeout(){return Y(this,l6)}set timeout(e){Se(e>=0,"timeout must be non-zero","timeout",e),we(this,l6,e)}get preflightFunc(){return Y(this,ux)||null}set preflightFunc(e){we(this,ux,e)}get processFunc(){return Y(this,fx)||null}set processFunc(e){we(this,fx,e)}get retryFunc(){return Y(this,dx)||null}set retryFunc(e){we(this,dx,e)}get getUrlFunc(){return Y(this,rw)||sue}set getUrlFunc(e){we(this,rw,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${Y(this,Ba)?Ke(Y(this,Ba)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(Y(this,Nd).slotInterval=e.slotInterval),e.maxAttempts!=null&&(Y(this,Nd).maxAttempts=e.maxAttempts)}send(){return Ye(Y(this,Wh)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),we(this,Wh,new sdt(this)),Fe(this,hx,vT).call(this,0,iue()+this.timeout,0,this,new eb(0,"",{},null,this))}cancel(){Ye(Y(this,Wh)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=v6e.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();Ye(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new ND(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,we(s,Td,Object.assign({},Y(this,Td))),Y(this,Ba)&&we(s,Ba,new Uint8Array(Y(this,Ba))),we(s,Ql,Y(this,Ql)),s}clone(){const e=new ND(this.url);return we(e,eg,Y(this,eg)),Y(this,Ba)&&we(e,Ba,Y(this,Ba)),we(e,Ql,Y(this,Ql)),we(e,Td,Object.assign({},Y(this,Td))),we(e,tg,Y(this,tg)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),we(e,ux,Y(this,ux)),we(e,fx,Y(this,fx)),we(e,dx,Y(this,dx)),we(e,Nd,Object.assign({},Y(this,Nd))),we(e,rw,Y(this,rw)),e}static lockConfig(){VH=!0}static getGateway(e){return $O[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(VH)throw new Error("gateways locked");$O[e]=n}static registerGetUrl(e){if(VH)throw new Error("gateways locked");sue=e}static createGetUrlFunc(e){return y6e()}static createDataGateway(){return w6e}static createIpfsGatewayFunc(e){return b6e(e)}};o6=new WeakMap,c6=new WeakMap,Td=new WeakMap,eg=new WeakMap,l6=new WeakMap,u6=new WeakMap,Ba=new WeakMap,Ql=new WeakMap,tg=new WeakMap,ux=new WeakMap,fx=new WeakMap,dx=new WeakMap,Wh=new WeakMap,Nd=new WeakMap,rw=new WeakMap,hx=new WeakSet,vT=async function(e,n,r,s,i){var u,f,d;if(e>=Y(this,Nd).maxAttempts)return i.makeServerError("exceeded maximum retry limit");Ye(iue()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await adt(r);let a=this.clone();const o=(a.url.split(":")[0]||"").toLowerCase();if(o in $O){const p=await $O[o](a.url,jO(Y(s,Wh)));if(p instanceof eb){let g=p;if(this.processFunc){jO(Y(s,Wh));try{g=await this.processFunc(a,g)}catch(m){(m.throttle==null||typeof m.stall!="number")&&g.makeServerError("error in post-processing function",m).assertOk()}}return g}a=p}this.preflightFunc&&(a=await this.preflightFunc(a));const c=await this.getUrlFunc(a,jO(Y(s,Wh)));let l=new eb(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const p=l.headers.location||"";return Fe(u=a.redirect(p),hx,vT).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(a,l,e))){const p=l.headers["retry-after"];let g=Y(this,Nd).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof p=="string"&&p.match(/^[1-9][0-9]*$/)&&(g=parseInt(p)),Fe(f=a.clone(),hx,vT).call(f,e+1,n,g,s,l)}if(this.processFunc){jO(Y(s,Wh));try{l=await this.processFunc(a,l)}catch(p){(p.throttle==null||typeof p.stall!="number")&&l.makeServerError("error in post-processing function",p).assertOk();let g=Y(this,Nd).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return p.stall>=0&&(g=p.stall),Fe(d=a.clone(),hx,vT).call(d,e+1,n,g,s,l)}}return l};let F0=ND;var e7,t7,n7,Zl,f6,px;const kne=class kne{constructor(e,n,r,s,i){Le(this,e7);Le(this,t7);Le(this,n7);Le(this,Zl);Le(this,f6);Le(this,px);we(this,e7,e),we(this,t7,n),we(this,n7,Object.keys(r).reduce((a,o)=>(a[o.toLowerCase()]=String(r[o]),a),{})),we(this,Zl,s==null?null:new Uint8Array(s)),we(this,f6,i||null),we(this,px,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${Y(this,Zl)?Ke(Y(this,Zl)):"null"}>`}get statusCode(){return Y(this,e7)}get statusMessage(){return Y(this,t7)}get headers(){return Object.assign({},Y(this,n7))}get body(){return Y(this,Zl)==null?null:new Uint8Array(Y(this,Zl))}get bodyText(){try{return Y(this,Zl)==null?"":I2(Y(this,Zl))}catch{Ye(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{Ye(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new kne(599,r,this.headers,this.body,Y(this,f6)||void 0);return we(s,px,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:Se(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw tn(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return Y(this,Zl)!=null}get request(){return Y(this,f6)}ok(){return Y(this,px).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=Y(this,px);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{Y(this,Zl)&&(s=I2(Y(this,Zl)))}catch{}Ye(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};e7=new WeakMap,t7=new WeakMap,n7=new WeakMap,Zl=new WeakMap,f6=new WeakMap,px=new WeakMap;let eb=kne;function iue(){return new Date().getTime()}function idt(t){return aa(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function adt(t){return new Promise(e=>setTimeout(e,t))}const odt=BigInt(-1),xd=BigInt(0),f3=BigInt(1),cdt=BigInt(5),YE={};let q3="0000";for(;q3.length<80;)q3+=q3;function d1(t){let e=q3;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function G8(t,e,n){const r=BigInt(e.width);if(e.signed){const s=f3<<r-f3;Ye(n==null||t>=-s&&t<s,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>xd?t=DM(Xv(t,r),r):t=-DM(Xv(-t,r),r)}else{const s=f3<<r;Ye(n==null||t>=0&&t<s,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%s+s)%s&s-f3}return t}function $H(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);Se(i,"invalid fixed format","format",t),e=i[1]!=="u",n=parseInt(i[2]),r=parseInt(i[3])}}else if(t){const i=t,a=(o,c,l)=>i[o]==null?l:(Se(typeof i[o]===c,"invalid fixed format ("+o+" not "+c+")","format."+o,i[o]),i[o]);e=a("signed","boolean",e),n=a("width","number",n),r=a("decimals","number",r)}Se(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),Se(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const s=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:s}}function ldt(t,e){let n="";t<xd&&(n="-",t*=odt);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=q3+r;const s=r.length-e;for(r=r.substring(0,s)+"."+r.substring(s);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var kd,vs,xc,ls,Sv,Vp,Dz,Lz,Uz,Fz;const Gy=class Gy{constructor(e,n,r){Le(this,ls);q(this,"format");Le(this,kd);Le(this,vs);Le(this,xc);q(this,"_value");Mb(e,YE,"FixedNumber"),we(this,vs,n),we(this,kd,r);const s=ldt(n,r.decimals);tn(this,{format:r.name,_value:s}),we(this,xc,d1(r.decimals))}get signed(){return Y(this,kd).signed}get width(){return Y(this,kd).width}get decimals(){return Y(this,kd).decimals}get value(){return Y(this,vs)}addUnsafe(e){return Fe(this,ls,Dz).call(this,e)}add(e){return Fe(this,ls,Dz).call(this,e,"add")}subUnsafe(e){return Fe(this,ls,Lz).call(this,e)}sub(e){return Fe(this,ls,Lz).call(this,e,"sub")}mulUnsafe(e){return Fe(this,ls,Uz).call(this,e)}mul(e){return Fe(this,ls,Uz).call(this,e,"mul")}mulSignal(e){Fe(this,ls,Sv).call(this,e);const n=Y(this,vs)*Y(e,vs);return Ye(n%Y(this,xc)===xd,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),Fe(this,ls,Vp).call(this,n/Y(this,xc),"mulSignal")}divUnsafe(e){return Fe(this,ls,Fz).call(this,e)}div(e){return Fe(this,ls,Fz).call(this,e,"div")}divSignal(e){Ye(Y(e,vs)!==xd,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Fe(this,ls,Sv).call(this,e);const n=Y(this,vs)*Y(this,xc);return Ye(n%Y(e,vs)===xd,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),Fe(this,ls,Vp).call(this,n/Y(e,vs),"divSignal")}cmp(e){let n=this.value,r=e.value;const s=this.decimals-e.decimals;return s>0?r*=d1(s):s<0&&(n*=d1(-s)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=Y(this,vs);return Y(this,vs)<xd&&(e-=Y(this,xc)-f3),e=Y(this,vs)/Y(this,xc)*Y(this,xc),Fe(this,ls,Vp).call(this,e,"floor")}ceiling(){let e=Y(this,vs);return Y(this,vs)>xd&&(e+=Y(this,xc)-f3),e=Y(this,vs)/Y(this,xc)*Y(this,xc),Fe(this,ls,Vp).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=cdt*d1(n-1);let s=this.value+r;const i=d1(n);return s=s/i*i,G8(s,Y(this,kd),"round"),new Gy(YE,s,Y(this,kd))}isZero(){return Y(this,vs)===xd}isNegative(){return Y(this,vs)<xd}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Gy.fromString(this.toString(),e)}static fromValue(e,n,r){const s=n==null?0:er(n),i=$H(r);let a=Yt(e,"value");const o=s-i.decimals;if(o>0){const c=d1(o);Ye(a%c===xd,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),a/=c}else o<0&&(a*=d1(-o));return G8(a,i,"fromValue"),new Gy(YE,a,i)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);Se(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const s=$H(n);let i=r[2]||"0",a=r[3]||"";for(;a.length<s.decimals;)a+=q3;Ye(a.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),a=a.substring(0,s.decimals);const o=BigInt(r[1]+i+a);return G8(o,s,"fromString"),new Gy(YE,o,s)}static fromBytes(e,n){let r=W7(et(e,"value"));const s=$H(n);return s.signed&&(r=DM(r,s.width)),G8(r,s,"fromBytes"),new Gy(YE,r,s)}};kd=new WeakMap,vs=new WeakMap,xc=new WeakMap,ls=new WeakSet,Sv=function(e){Se(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},Vp=function(e,n){return e=G8(e,Y(this,kd),n),new Gy(YE,e,Y(this,kd))},Dz=function(e,n){return Fe(this,ls,Sv).call(this,e),Fe(this,ls,Vp).call(this,Y(this,vs)+Y(e,vs),n)},Lz=function(e,n){return Fe(this,ls,Sv).call(this,e),Fe(this,ls,Vp).call(this,Y(this,vs)-Y(e,vs),n)},Uz=function(e,n){return Fe(this,ls,Sv).call(this,e),Fe(this,ls,Vp).call(this,Y(this,vs)*Y(e,vs)/Y(this,xc),n)},Fz=function(e,n){return Ye(Y(e,vs)!==xd,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Fe(this,ls,Sv).call(this,e),Fe(this,ls,Vp).call(this,Y(this,vs)*Y(this,xc)/Y(e,vs),n)};let UM=Gy;function udt(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function aue(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function oue(t,e,n,r){const s=[];for(;n<e+1+r;){const i=x6e(t,n);s.push(i.result),n+=i.consumed,Ye(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function x6e(t,e){Ye(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{Ye(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=aue(t,e+1,r);return n(e+1+r+s),oue(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),oue(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=aue(t,e+1,r);n(e+1+r+s);const i=Ke(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Ke(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:udt(t[e])}}function mU(t){const e=et(t,"data"),n=x6e(e,0);return Se(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function cue(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function E6e(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(E6e(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=cue(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(et(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=cue(e.length);return n.unshift(183+n.length),n.concat(e)}const lue="0123456789abcdef";function C2(t){let e="0x";for(const n of E6e(t))e+=lue[n>>4],e+=lue[n&15];return e}const A6e=["wei","kwei","mwei","gwei","szabo","finney","ether"];function gb(t,e){let n=18;if(typeof e=="string"){const r=A6e.indexOf(e);Se(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=er(e,"unit"));return UM.fromValue(t,n,{decimals:n,width:512}).toString()}function P5(t,e){Se(typeof t=="string","value must be a string","value",t);let n=18;if(typeof e=="string"){const r=A6e.indexOf(e);Se(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=er(e,"unit"));return UM.fromString(t,{decimals:n,width:512}).value}function fdt(t){return P5(t,18)}function ddt(t){const e=et(t,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=Ke(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}const Mc=32,Vz=new Uint8Array(Mc),hdt=["then"],HO={},S6e=new WeakMap;function Rv(t){return S6e.get(t)}function uue(t,e){S6e.set(t,e)}function W8(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function $z(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof O5?$z(Rv(r),r,n):r):t.reduce((r,s,i)=>{let a=e.getValue(s);return s in r||(n&&a instanceof O5&&(a=$z(Rv(a),a,n)),r[s]=a),r},{})}var d6;const m3=class m3 extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),a=!0;r!==HO&&(s=n,i=[],a=!1);super(s.length);Le(this,d6);s.forEach((l,u)=>{this[u]=l});const o=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(uue(this,Object.freeze(s.map((l,u)=>{const f=i[u];return f!=null&&o.get(f)===1?f:null}))),we(this,d6,[]),Y(this,d6)==null&&Y(this,d6),!a)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,f)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const p=er(u,"%index");if(p<0||p>=this.length)throw new RangeError("out of result range");const g=l[p];return g instanceof Error&&W8(`index ${p}`,g),g}if(hdt.indexOf(u)>=0)return Reflect.get(l,u,f);const d=l[u];if(d instanceof Function)return function(...p){return d.apply(this===f?l:this,p)};if(!(u in l))return l.getValue.apply(this===f?l:this,[u])}return Reflect.get(l,u,f)}});return uue(c,Rv(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&W8(`index ${i}`,s),n&&s instanceof m3&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=Rv(this);return r.reduce((s,i,a)=>(Ye(i!=null,`value at index ${a} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),$z(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=Rv(this),i=[],a=[];for(let o=n;o<r;o++)i.push(this[o]),a.push(s[o]);return new m3(HO,i,a)}filter(n,r){const s=Rv(this),i=[],a=[];for(let o=0;o<this.length;o++){const c=this[o];c instanceof Error&&W8(`index ${o}`,c),n.call(r,c,o,this)&&(i.push(c),a.push(s[o]))}return new m3(HO,i,a)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const a=this[i];a instanceof Error&&W8(`index ${i}`,a),s.push(n.call(r,a,i,this))}return s}getValue(n){const r=Rv(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&W8(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new m3(HO,n,r)}};d6=new WeakMap;let O5=m3;function fue(t){let e=xo(t);return Ye(e.length<=Mc,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Mc,offset:e.length}),e.length!==Mc&&(e=vo(Qr([Vz.slice(e.length%Mc),e]))),e}class am{constructor(e,n,r,s){q(this,"name");q(this,"type");q(this,"localName");q(this,"dynamic");tn(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){Se(!1,e,this.localName,n)}}var ng,gx,h6,I_;class jz{constructor(){Le(this,h6);Le(this,ng);Le(this,gx);we(this,ng,[]),we(this,gx,0)}get data(){return Qr(Y(this,ng))}get length(){return Y(this,gx)}appendWriter(e){return Fe(this,h6,I_).call(this,vo(e.data))}writeBytes(e){let n=vo(e);const r=n.length%Mc;return r&&(n=vo(Qr([n,Vz.slice(r)]))),Fe(this,h6,I_).call(this,n)}writeValue(e){return Fe(this,h6,I_).call(this,fue(e))}writeUpdatableValue(){const e=Y(this,ng).length;return Y(this,ng).push(Vz),we(this,gx,Y(this,gx)+Mc),n=>{Y(this,ng)[e]=fue(n)}}}ng=new WeakMap,gx=new WeakMap,h6=new WeakSet,I_=function(e){return Y(this,ng).push(e),we(this,gx,Y(this,gx)+e.length),e.length};var ol,Xl,mx,yx,sw,L2,qz,I6e;const Pne=class Pne{constructor(e,n,r){Le(this,L2);q(this,"allowLoose");Le(this,ol);Le(this,Xl);Le(this,mx);Le(this,yx);Le(this,sw);tn(this,{allowLoose:!!n}),we(this,ol,vo(e)),we(this,mx,0),we(this,yx,null),we(this,sw,r??1024),we(this,Xl,0)}get data(){return Ke(Y(this,ol))}get dataLength(){return Y(this,ol).length}get consumed(){return Y(this,Xl)}get bytes(){return new Uint8Array(Y(this,ol))}subReader(e){const n=new Pne(Y(this,ol).slice(Y(this,Xl)+e),this.allowLoose,Y(this,sw));return we(n,yx,this),n}readBytes(e,n){let r=Fe(this,L2,I6e).call(this,0,e,!!n);return Fe(this,L2,qz).call(this,e),we(this,Xl,Y(this,Xl)+r.length),r.slice(0,e)}readValue(){return W7(this.readBytes(Mc))}readIndex(){return Hft(this.readBytes(Mc))}};ol=new WeakMap,Xl=new WeakMap,mx=new WeakMap,yx=new WeakMap,sw=new WeakMap,L2=new WeakSet,qz=function(e){var n;if(Y(this,yx))return Fe(n=Y(this,yx),L2,qz).call(n,e);we(this,mx,Y(this,mx)+e),Ye(Y(this,sw)<1||Y(this,mx)<=Y(this,sw)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${Y(this,sw)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:vo(Y(this,ol)),offset:Y(this,Xl),length:e,info:{bytesRead:Y(this,mx),dataLength:this.dataLength}})},I6e=function(e,n,r){let s=Math.ceil(n/Mc)*Mc;return Y(this,Xl)+s>Y(this,ol).length&&(this.allowLoose&&r&&Y(this,Xl)+n<=Y(this,ol).length?s=n:Ye(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:vo(Y(this,ol)),length:Y(this,ol).length,offset:Y(this,Xl)+s})),Y(this,ol).slice(Y(this,Xl),Y(this,Xl)+s)};let Hz=Pne;function uu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Bee(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function C6e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");uu(t.outputLen),uu(t.blockLen)}function R5(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function T6e(t,e){Bee(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const jH=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const N6e=t=>t instanceof Uint8Array,C_=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),T_=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Ph=(t,e)=>t<<32-e|t>>>e,pdt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!pdt)throw new Error("Non little-endian hardware is not supported");const gdt=async()=>{};async function due(t,e,n){let r=Date.now();for(let s=0;s<t;s++){n(s);const i=Date.now()-r;i>=0&&i<e||(await gdt(),r+=i)}}function mdt(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function _5(t){if(typeof t=="string"&&(t=mdt(t)),!N6e(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function ydt(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!N6e(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class Mee{clone(){return this._cloneInto()}}const wdt={}.toString;function k6e(t,e){if(e!==void 0&&wdt.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function yU(t){const e=r=>t().update(_5(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function bdt(t=32){if(jH&&typeof jH.getRandomValues=="function")return jH.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}let P6e=class extends Mee{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,C6e(e);const r=_5(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(e){return R5(this),this.iHash.update(e),this}digestInto(e){R5(this),Bee(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:a,outputLen:o}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const wU=(t,e,n)=>new P6e(t,e).update(n).digest();wU.create=(t,e)=>new P6e(t,e);function vdt(t,e,n,r){C6e(t);const s=k6e({dkLen:32,asyncTick:10},r),{c:i,dkLen:a,asyncTick:o}=s;if(uu(i),uu(a),uu(o),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=_5(e),l=_5(n),u=new Uint8Array(a),f=wU.create(t,c),d=f._cloneInto().update(l);return{c:i,dkLen:a,asyncTick:o,DK:u,PRF:f,PRFSalt:d}}function xdt(t,e,n,r,s){return t.destroy(),e.destroy(),r&&r.destroy(),s.fill(0),n}function Dee(t,e,n,r){const{c:s,dkLen:i,DK:a,PRF:o,PRFSalt:c}=vdt(t,e,n,r);let l;const u=new Uint8Array(4),f=T_(u),d=new Uint8Array(o.outputLen);for(let p=1,g=0;g<i;p++,g+=o.outputLen){const m=a.subarray(g,g+o.outputLen);f.setInt32(0,p,!1),(l=c._cloneInto(l)).update(u).digestInto(d),m.set(d.subarray(0,m.length));for(let v=1;v<s;v++){o._cloneInto(l).update(d).digestInto(d);for(let A=0;A<m.length;A++)m[A]^=d[A]}}return xdt(o,c,a,l,d)}function Edt(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}class Lee extends Mee{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=T_(this.buffer)}update(e){R5(this);const{view:n,buffer:r,blockLen:s}=this;e=_5(e);const i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=T_(e);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){R5(this),T6e(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let f=a;f<s;f++)n[f]=0;Edt(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=T_(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)o.setUint32(4*f,u[f],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return e.length=s,e.pos=o,e.finished=i,e.destroyed=a,s%n&&e.buffer.set(r),e}}const Adt=(t,e,n)=>t&e^~t&n,Sdt=(t,e,n)=>t&e^t&n^e&n,Idt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),jm=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Hm=new Uint32Array(64);let Cdt=class extends Lee{constructor(){super(64,32,8,!1),this.A=jm[0]|0,this.B=jm[1]|0,this.C=jm[2]|0,this.D=jm[3]|0,this.E=jm[4]|0,this.F=jm[5]|0,this.G=jm[6]|0,this.H=jm[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:a,G:o,H:c}=this;return[e,n,r,s,i,a,o,c]}set(e,n,r,s,i,a,o,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,n){for(let f=0;f<16;f++,n+=4)Hm[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const d=Hm[f-15],p=Hm[f-2],g=Ph(d,7)^Ph(d,18)^d>>>3,m=Ph(p,17)^Ph(p,19)^p>>>10;Hm[f]=m+Hm[f-7]+g+Hm[f-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=Ph(o,6)^Ph(o,11)^Ph(o,25),p=u+d+Adt(o,c,l)+Idt[f]+Hm[f]|0,m=(Ph(r,2)^Ph(r,13)^Ph(r,22))+Sdt(r,s,i)|0;u=l,l=c,c=o,o=a+p|0,a=i,i=s,s=r,r=p+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,a,o,c,l,u)}roundClean(){Hm.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const x4=yU(()=>new Cdt),qO=BigInt(2**32-1),Kz=BigInt(32);function O6e(t,e=!1){return e?{h:Number(t&qO),l:Number(t>>Kz&qO)}:{h:Number(t>>Kz&qO)|0,l:Number(t&qO)|0}}function R6e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:a}=O6e(t[s],e);[n[s],r[s]]=[i,a]}return[n,r]}const Tdt=(t,e)=>BigInt(t>>>0)<<Kz|BigInt(e>>>0),Ndt=(t,e,n)=>t>>>n,kdt=(t,e,n)=>t<<32-n|e>>>n,Pdt=(t,e,n)=>t>>>n|e<<32-n,Odt=(t,e,n)=>t<<32-n|e>>>n,Rdt=(t,e,n)=>t<<64-n|e>>>n-32,_dt=(t,e,n)=>t>>>n-32|e<<64-n,Bdt=(t,e)=>e,Mdt=(t,e)=>t,_6e=(t,e,n)=>t<<n|e>>>32-n,B6e=(t,e,n)=>e<<n|t>>>32-n,M6e=(t,e,n)=>e<<n-32|t>>>64-n,D6e=(t,e,n)=>t<<n-32|e>>>64-n;function Ddt(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Ldt=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Udt=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Fdt=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Vdt=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,$dt=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),jdt=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,cr={fromBig:O6e,split:R6e,toBig:Tdt,shrSH:Ndt,shrSL:kdt,rotrSH:Pdt,rotrSL:Odt,rotrBH:Rdt,rotrBL:_dt,rotr32H:Bdt,rotr32L:Mdt,rotlSH:_6e,rotlSL:B6e,rotlBH:M6e,rotlBL:D6e,add:Ddt,add3L:Ldt,add3H:Udt,add4L:Fdt,add4H:Vdt,add5H:jdt,add5L:$dt},[Hdt,qdt]=cr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),qm=new Uint32Array(80),Km=new Uint32Array(80);let Kdt=class extends Lee{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:a,Dh:o,Dl:c,Eh:l,El:u,Fh:f,Fl:d,Gh:p,Gl:g,Hh:m,Hl:v}=this;return[e,n,r,s,i,a,o,c,l,u,f,d,p,g,m,v]}set(e,n,r,s,i,a,o,c,l,u,f,d,p,g,m,v){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=f|0,this.Fl=d|0,this.Gh=p|0,this.Gl=g|0,this.Hh=m|0,this.Hl=v|0}process(e,n){for(let I=0;I<16;I++,n+=4)qm[I]=e.getUint32(n),Km[I]=e.getUint32(n+=4);for(let I=16;I<80;I++){const B=qm[I-15]|0,D=Km[I-15]|0,V=cr.rotrSH(B,D,1)^cr.rotrSH(B,D,8)^cr.shrSH(B,D,7),O=cr.rotrSL(B,D,1)^cr.rotrSL(B,D,8)^cr.shrSL(B,D,7),U=qm[I-2]|0,Q=Km[I-2]|0,ie=cr.rotrSH(U,Q,19)^cr.rotrBH(U,Q,61)^cr.shrSH(U,Q,6),G=cr.rotrSL(U,Q,19)^cr.rotrBL(U,Q,61)^cr.shrSL(U,Q,6),R=cr.add4L(O,G,Km[I-7],Km[I-16]),k=cr.add4H(R,V,ie,qm[I-7],qm[I-16]);qm[I]=k|0,Km[I]=R|0}let{Ah:r,Al:s,Bh:i,Bl:a,Ch:o,Cl:c,Dh:l,Dl:u,Eh:f,El:d,Fh:p,Fl:g,Gh:m,Gl:v,Hh:A,Hl:S}=this;for(let I=0;I<80;I++){const B=cr.rotrSH(f,d,14)^cr.rotrSH(f,d,18)^cr.rotrBH(f,d,41),D=cr.rotrSL(f,d,14)^cr.rotrSL(f,d,18)^cr.rotrBL(f,d,41),V=f&p^~f&m,O=d&g^~d&v,U=cr.add5L(S,D,O,qdt[I],Km[I]),Q=cr.add5H(U,A,B,V,Hdt[I],qm[I]),ie=U|0,G=cr.rotrSH(r,s,28)^cr.rotrBH(r,s,34)^cr.rotrBH(r,s,39),R=cr.rotrSL(r,s,28)^cr.rotrBL(r,s,34)^cr.rotrBL(r,s,39),k=r&i^r&o^i&o,b=s&a^s&c^a&c;A=m|0,S=v|0,m=p|0,v=g|0,p=f|0,g=d|0,{h:f,l:d}=cr.add(l|0,u|0,Q|0,ie|0),l=o|0,u=c|0,o=i|0,c=a|0,i=r|0,a=s|0;const w=cr.add3L(ie,R,b);r=cr.add3H(w,Q,G,k),s=w|0}({h:r,l:s}=cr.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:a}=cr.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l:c}=cr.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:l,l:u}=cr.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:f,l:d}=cr.add(this.Eh|0,this.El|0,f|0,d|0),{h:p,l:g}=cr.add(this.Fh|0,this.Fl|0,p|0,g|0),{h:m,l:v}=cr.add(this.Gh|0,this.Gl|0,m|0,v|0),{h:A,l:S}=cr.add(this.Hh|0,this.Hl|0,A|0,S|0),this.set(r,s,i,a,o,c,l,u,f,d,p,g,m,v,A,S)}roundClean(){qm.fill(0),Km.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Uee=yU(()=>new Kdt);function Gdt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const hue=Gdt(),pue=hue.crypto||hue.msCrypto;function Wdt(t){switch(t){case"sha256":return x4.create();case"sha512":return Uee.create()}Se(!1,"invalid hashing algorithm name","algorithm",t)}function zdt(t,e){const n={sha256:x4,sha512:Uee}[t];return Se(n!=null,"invalid hmac algorithm","algorithm",t),wU.create(n,e)}function Jdt(t,e,n,r,s){const i={sha256:x4,sha512:Uee}[s];return Se(i!=null,"invalid pbkdf2 algorithm","algorithm",s),Dee(i,t,e,{c:n,dkLen:r})}function Ydt(t){Ye(pue!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),Se(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return pue.getRandomValues(e),e}let L6e=!1;const U6e=function(t,e,n){return zdt(t,e).update(n).digest()};let F6e=U6e;function E4(t,e,n){const r=et(e,"key"),s=et(n,"data");return Ke(F6e(t,r,s))}E4._=U6e;E4.lock=function(){L6e=!0};E4.register=function(t){if(L6e)throw new Error("computeHmac is locked");F6e=t};Object.freeze(E4);const[V6e,$6e,j6e]=[[],[],[]],Qdt=BigInt(0),z8=BigInt(1),Zdt=BigInt(2),Xdt=BigInt(7),eht=BigInt(256),tht=BigInt(113);for(let t=0,e=z8,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],V6e.push(2*(5*r+n)),$6e.push((t+1)*(t+2)/2%64);let s=Qdt;for(let i=0;i<7;i++)e=(e<<z8^(e>>Xdt)*tht)%eht,e&Zdt&&(s^=z8<<(z8<<BigInt(i))-z8);j6e.push(s)}const[nht,rht]=R6e(j6e,!0),gue=(t,e,n)=>n>32?M6e(t,e,n):_6e(t,e,n),mue=(t,e,n)=>n>32?D6e(t,e,n):B6e(t,e,n);function sht(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let a=0;a<10;a++)n[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,l=n[c],u=n[c+1],f=gue(l,u,1)^n[o],d=mue(l,u,1)^n[o+1];for(let p=0;p<50;p+=10)t[a+p]^=f,t[a+p+1]^=d}let s=t[2],i=t[3];for(let a=0;a<24;a++){const o=$6e[a],c=gue(s,i,o),l=mue(s,i,o),u=V6e[a];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)n[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~n[(o+2)%10]&n[(o+4)%10]}t[0]^=nht[r],t[1]^=rht[r]}n.fill(0)}class Fee extends Mee{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,uu(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=C_(this.state)}keccak(){sht(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){R5(this);const{blockLen:n,state:r}=this;e=_5(e);const s=e.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let o=0;o<a;o++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){R5(this,!1),Bee(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return uu(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(T6e(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return e||(e=new Fee(n,r,s,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}}const iht=(t,e,n)=>yU(()=>new Fee(e,t,n)),aht=iht(1,136,256/8);let H6e=!1;const q6e=function(t){return aht(t)};let K6e=q6e;function yr(t){const e=et(t,"data");return Ke(K6e(e))}yr._=q6e;yr.lock=function(){H6e=!0};yr.register=function(t){if(H6e)throw new TypeError("keccak256 is locked");K6e=t};Object.freeze(yr);const oht=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),G6e=Uint8Array.from({length:16},(t,e)=>e),cht=G6e.map(t=>(9*t+5)%16);let Vee=[G6e],$ee=[cht];for(let t=0;t<4;t++)for(let e of[Vee,$ee])e.push(e[t].map(n=>oht[n]));const W6e=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),lht=Vee.map((t,e)=>t.map(n=>W6e[e][n])),uht=$ee.map((t,e)=>t.map(n=>W6e[e][n])),fht=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),dht=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),KO=(t,e)=>t<<e|t>>>32-e;function yue(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const GO=new Uint32Array(16);let hht=class extends Lee{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:s,h4:i}=this;return[e,n,r,s,i]}set(e,n,r,s,i){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=s|0,this.h4=i|0}process(e,n){for(let p=0;p<16;p++,n+=4)GO[p]=e.getUint32(n,!0);let r=this.h0|0,s=r,i=this.h1|0,a=i,o=this.h2|0,c=o,l=this.h3|0,u=l,f=this.h4|0,d=f;for(let p=0;p<5;p++){const g=4-p,m=fht[p],v=dht[p],A=Vee[p],S=$ee[p],I=lht[p],B=uht[p];for(let D=0;D<16;D++){const V=KO(r+yue(p,i,o,l)+GO[A[D]]+m,I[D])+f|0;r=f,f=l,l=KO(o,10)|0,o=i,i=V}for(let D=0;D<16;D++){const V=KO(s+yue(g,a,c,u)+GO[S[D]]+v,B[D])+d|0;s=d,d=u,u=KO(c,10)|0,c=a,a=V}}this.set(this.h1+o+u|0,this.h2+l+d|0,this.h3+f+s|0,this.h4+r+a|0,this.h0+i+c|0)}roundClean(){GO.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};const pht=yU(()=>new hht);let z6e=!1;const J6e=function(t){return pht(t)};let Y6e=J6e;function A4(t){const e=et(t,"data");return Ke(Y6e(e))}A4._=J6e;A4.lock=function(){z6e=!0};A4.register=function(t){if(z6e)throw new TypeError("ripemd160 is locked");Y6e=t};Object.freeze(A4);let Q6e=!1;const Z6e=function(t,e,n,r,s){return Jdt(t,e,n,r,s)};let X6e=Z6e;function Db(t,e,n,r,s){const i=et(t,"password"),a=et(e,"salt");return Ke(X6e(i,a,n,r,s))}Db._=Z6e;Db.lock=function(){Q6e=!0};Db.register=function(t){if(Q6e)throw new Error("pbkdf2 is locked");X6e=t};Object.freeze(Db);let e5e=!1;const t5e=function(t){return new Uint8Array(Ydt(t))};let n5e=t5e;function Eu(t){return n5e(t)}Eu._=t5e;Eu.lock=function(){e5e=!0};Eu.register=function(t){if(e5e)throw new Error("randomBytes is locked");n5e=t};Object.freeze(Eu);const Jr=(t,e)=>t<<e|t>>>32-e;function wue(t,e,n,r,s,i){let a=t[e++]^n[r++],o=t[e++]^n[r++],c=t[e++]^n[r++],l=t[e++]^n[r++],u=t[e++]^n[r++],f=t[e++]^n[r++],d=t[e++]^n[r++],p=t[e++]^n[r++],g=t[e++]^n[r++],m=t[e++]^n[r++],v=t[e++]^n[r++],A=t[e++]^n[r++],S=t[e++]^n[r++],I=t[e++]^n[r++],B=t[e++]^n[r++],D=t[e++]^n[r++],V=a,O=o,U=c,Q=l,ie=u,G=f,R=d,k=p,b=g,w=m,N=v,L=A,C=S,T=I,E=B,P=D;for(let _=0;_<8;_+=2)ie^=Jr(V+C|0,7),b^=Jr(ie+V|0,9),C^=Jr(b+ie|0,13),V^=Jr(C+b|0,18),w^=Jr(G+O|0,7),T^=Jr(w+G|0,9),O^=Jr(T+w|0,13),G^=Jr(O+T|0,18),E^=Jr(N+R|0,7),U^=Jr(E+N|0,9),R^=Jr(U+E|0,13),N^=Jr(R+U|0,18),Q^=Jr(P+L|0,7),k^=Jr(Q+P|0,9),L^=Jr(k+Q|0,13),P^=Jr(L+k|0,18),O^=Jr(V+Q|0,7),U^=Jr(O+V|0,9),Q^=Jr(U+O|0,13),V^=Jr(Q+U|0,18),R^=Jr(G+ie|0,7),k^=Jr(R+G|0,9),ie^=Jr(k+R|0,13),G^=Jr(ie+k|0,18),L^=Jr(N+w|0,7),b^=Jr(L+N|0,9),w^=Jr(b+L|0,13),N^=Jr(w+b|0,18),C^=Jr(P+E|0,7),T^=Jr(C+P|0,9),E^=Jr(T+C|0,13),P^=Jr(E+T|0,18);s[i++]=a+V|0,s[i++]=o+O|0,s[i++]=c+U|0,s[i++]=l+Q|0,s[i++]=u+ie|0,s[i++]=f+G|0,s[i++]=d+R|0,s[i++]=p+k|0,s[i++]=g+b|0,s[i++]=m+w|0,s[i++]=v+N|0,s[i++]=A+L|0,s[i++]=S+C|0,s[i++]=I+T|0,s[i++]=B+E|0,s[i++]=D+P|0}function K3(t,e,n,r,s){let i=r+0,a=r+16*s;for(let o=0;o<16;o++)n[a+o]=t[e+(2*s-1)*16+o];for(let o=0;o<s;o++,i+=16,e+=16)wue(n,a,t,e,n,i),o>0&&(a+=16),wue(n,i,t,e+=16,n,a)}function r5e(t,e,n){const r=k6e({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:s,r:i,p:a,dkLen:o,asyncTick:c,maxmem:l,onProgress:u}=r;if(uu(s),uu(i),uu(a),uu(o),uu(c),uu(l),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const f=128*i,d=f/4;if(s<=1||s&s-1||s>=2**(f/8)||s>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(a<0||a>(2**32-1)*32/f)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(o<0||o>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const p=f*(s+a);if(p>l)throw new Error(`Scrypt: parameters too large, ${p} (128 * r * (N + p)) > ${l} (maxmem)`);const g=Dee(x4,t,e,{c:1,dkLen:f*a}),m=C_(g),v=C_(new Uint8Array(f*s)),A=C_(new Uint8Array(f));let S=()=>{};if(u){const I=2*s*a,B=Math.max(Math.floor(I/1e4),1);let D=0;S=()=>{D++,u&&(!(D%B)||D===I)&&u(D/I)}}return{N:s,r:i,p:a,dkLen:o,blockSize32:d,V:v,B32:m,B:g,tmp:A,blockMixCb:S,asyncTick:c}}function s5e(t,e,n,r,s){const i=Dee(x4,t,n,{c:1,dkLen:e});return n.fill(0),r.fill(0),s.fill(0),i}function ght(t,e,n){const{N:r,r:s,p:i,dkLen:a,blockSize32:o,V:c,B32:l,B:u,tmp:f,blockMixCb:d}=r5e(t,e,n);for(let p=0;p<i;p++){const g=o*p;for(let m=0;m<o;m++)c[m]=l[g+m];for(let m=0,v=0;m<r-1;m++)K3(c,v,c,v+=o,s),d();K3(c,(r-1)*o,l,g,s),d();for(let m=0;m<r;m++){const v=l[g+o-16]%r;for(let A=0;A<o;A++)f[A]=l[g+A]^c[v*o+A];K3(f,0,l,g,s),d()}}return s5e(t,a,u,c,f)}async function mht(t,e,n){const{N:r,r:s,p:i,dkLen:a,blockSize32:o,V:c,B32:l,B:u,tmp:f,blockMixCb:d,asyncTick:p}=r5e(t,e,n);for(let g=0;g<i;g++){const m=o*g;for(let A=0;A<o;A++)c[A]=l[m+A];let v=0;await due(r-1,p,()=>{K3(c,v,c,v+=o,s),d()}),K3(c,(r-1)*o,l,m,s),d(),await due(r,p,()=>{const A=l[m+o-16]%r;for(let S=0;S<o;S++)f[S]=l[m+S]^c[A*o+S];K3(f,0,l,m,s),d()})}return s5e(t,a,u,c,f)}let i5e=!1,a5e=!1;const o5e=async function(t,e,n,r,s,i,a){return await mht(t,e,{N:n,r,p:s,dkLen:i,onProgress:a})},c5e=function(t,e,n,r,s,i){return ght(t,e,{N:n,r,p:s,dkLen:i})};let l5e=o5e,u5e=c5e;async function S4(t,e,n,r,s,i,a){const o=et(t,"passwd"),c=et(e,"salt");return Ke(await l5e(o,c,n,r,s,i,a))}S4._=o5e;S4.lock=function(){a5e=!0};S4.register=function(t){if(a5e)throw new Error("scrypt is locked");l5e=t};Object.freeze(S4);function I4(t,e,n,r,s,i){const a=et(t,"passwd"),o=et(e,"salt");return Ke(u5e(a,o,n,r,s,i))}I4._=c5e;I4.lock=function(){i5e=!0};I4.register=function(t){if(i5e)throw new Error("scryptSync is locked");u5e=t};Object.freeze(I4);const f5e=function(t){return Wdt("sha256").update(t).digest()};let d5e=f5e,h5e=!1;function $f(t){const e=et(t,"data");return Ke(d5e(e))}$f._=f5e;$f.lock=function(){h5e=!0};$f.register=function(t){if(h5e)throw new Error("sha256 is locked");d5e=t};Object.freeze($f);Object.freeze($f);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const yht=BigInt(1),wht=BigInt(2),bU=t=>t instanceof Uint8Array,bht=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function B5(t){if(!bU(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=bht[t[n]];return e}function jee(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Rk(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");n[r]=a}return n}function Qx(t){return jee(B5(t))}function Hee(t){if(!bU(t))throw new Error("Uint8Array expected");return jee(B5(Uint8Array.from(t).reverse()))}function M5(t,e){return Rk(t.toString(16).padStart(e*2,"0"))}function qee(t,e){return M5(t,e).reverse()}function Sd(t,e,n){let r;if(typeof e=="string")try{r=Rk(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(bU(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function _k(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!bU(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}const Kee=t=>(wht<<BigInt(t-1))-yht,HH=t=>new Uint8Array(t),bue=t=>Uint8Array.from(t);function p5e(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=HH(t),s=HH(t),i=0;const a=()=>{r.fill(1),s.fill(0),i=0},o=(...f)=>n(s,r,...f),c=(f=HH())=>{s=o(bue([0]),f),r=o(),f.length!==0&&(s=o(bue([1]),f),r=o())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<e;){r=o();const p=r.slice();d.push(p),f+=r.length}return _k(...d)};return(f,d)=>{a(),c(f);let p;for(;!(p=d(l()));)c();return a(),p}}const vht={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function z7(t,e,n={}){const r=(s,i,a)=>{const o=vht[i];if(typeof o!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(a&&c===void 0)&&!o(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const xht=Object.freeze(Object.defineProperty({__proto__:null,bitMask:Kee,bytesToHex:B5,bytesToNumberBE:Qx,bytesToNumberLE:Hee,concatBytes:_k,createHmacDrbg:p5e,ensureBytes:Sd,hexToBytes:Rk,hexToNumber:jee,numberToBytesBE:M5,numberToBytesLE:qee,validateObject:z7},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $a=BigInt(0),$i=BigInt(1),_v=BigInt(2),Eht=BigInt(3),Gz=BigInt(4),vue=BigInt(5),xue=BigInt(8);BigInt(9);BigInt(16);function pl(t,e){const n=t%e;return n>=$a?n:e+n}function Aht(t,e,n){if(n<=$a||e<$a)throw new Error("Expected power/modulo > 0");if(n===$i)return $a;let r=$i;for(;e>$a;)e&$i&&(r=r*t%n),t=t*t%n,e>>=$i;return r}function Yu(t,e,n){let r=t;for(;e-- >$a;)r*=r,r%=n;return r}function Wz(t,e){if(t===$a||e<=$a)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=pl(t,e),r=e,s=$a,i=$i;for(;n!==$a;){const o=r/n,c=r%n,l=s-i*o;r=n,n=c,s=i,i=l}if(r!==$i)throw new Error("invert: does not exist");return pl(s,e)}function Sht(t){const e=(t-$i)/_v;let n,r,s;for(n=t-$i,r=0;n%_v===$a;n/=_v,r++);for(s=_v;s<t&&Aht(s,e,t)!==t-$i;s++);if(r===1){const a=(t+$i)/Gz;return function(c,l){const u=c.pow(l,a);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+$i)/_v;return function(o,c){if(o.pow(c,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let l=r,u=o.pow(o.mul(o.ONE,s),n),f=o.pow(c,i),d=o.pow(c,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let p=1;for(let m=o.sqr(d);p<l&&!o.eql(m,o.ONE);p++)m=o.sqr(m);const g=o.pow(u,$i<<BigInt(l-p-1));u=o.sqr(g),f=o.mul(f,g),d=o.mul(d,u),l=p}return f}}function Iht(t){if(t%Gz===Eht){const e=(t+$i)/Gz;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%xue===vue){const e=(t-vue)/xue;return function(r,s){const i=r.mul(s,_v),a=r.pow(i,e),o=r.mul(s,a),c=r.mul(r.mul(o,_v),a),l=r.mul(o,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return Sht(t)}const Cht=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Tht(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Cht.reduce((r,s)=>(r[s]="function",r),e);return z7(t,n)}function Nht(t,e,n){if(n<$a)throw new Error("Expected power > 0");if(n===$a)return t.ONE;if(n===$i)return e;let r=t.ONE,s=e;for(;n>$a;)n&$i&&(r=t.mul(r,s)),s=t.sqr(s),n>>=$i;return r}function kht(t,e){const n=new Array(e.length),r=e.reduce((i,a,o)=>t.is0(a)?i:(n[o]=i,t.mul(i,a)),t.ONE),s=t.inv(r);return e.reduceRight((i,a,o)=>t.is0(a)?i:(n[o]=t.mul(i,n[o]),t.mul(i,a)),s),n}function g5e(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Pht(t,e,n=!1,r={}){if(t<=$a)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=g5e(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=Iht(t),o=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:Kee(s),ZERO:$a,ONE:$i,create:c=>pl(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return $a<=c&&c<t},is0:c=>c===$a,isOdd:c=>(c&$i)===$i,neg:c=>pl(-c,t),eql:(c,l)=>c===l,sqr:c=>pl(c*c,t),add:(c,l)=>pl(c+l,t),sub:(c,l)=>pl(c-l,t),mul:(c,l)=>pl(c*l,t),pow:(c,l)=>Nht(o,c,l),div:(c,l)=>pl(c*Wz(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Wz(c,t),sqrt:r.sqrt||(c=>a(o,c)),invertBatch:c=>kht(o,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?qee(c,i):M5(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?Hee(c):Qx(c)}});return Object.freeze(o)}function m5e(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function y5e(t){const e=m5e(t);return e+Math.ceil(e/2)}function Oht(t,e,n=!1){const r=t.length,s=m5e(e),i=y5e(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const a=n?Qx(t):Hee(t),o=pl(a,e-$i)+$i;return n?qee(o,s):M5(o,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rht=BigInt(0),qH=BigInt(1);function _ht(t,e){const n=(s,i)=>{const a=i.negate();return s?a:i},r=s=>{const i=Math.ceil(e/s)+1,a=2**(s-1);return{windows:i,windowSize:a}};return{constTimeNegate:n,unsafeLadder(s,i){let a=t.ZERO,o=s;for(;i>Rht;)i&qH&&(a=a.add(o)),o=o.double(),i>>=qH;return a},precomputeWindow(s,i){const{windows:a,windowSize:o}=r(i),c=[];let l=s,u=l;for(let f=0;f<a;f++){u=l,c.push(u);for(let d=1;d<o;d++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,a){const{windows:o,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const f=BigInt(2**s-1),d=2**s,p=BigInt(s);for(let g=0;g<o;g++){const m=g*c;let v=Number(a&f);a>>=p,v>c&&(v-=d,a+=qH);const A=m,S=m+Math.abs(v)-1,I=g%2!==0,B=v<0;v===0?u=u.add(n(I,i[A])):l=l.add(n(B,i[S]))}return{p:l,f:u}},wNAFCached(s,i,a,o){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,o(l))),this.wNAF(c,l,a)}}}function w5e(t){return Tht(t.Fp),z7(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...g5e(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Bht(t){const e=w5e(t);z7(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Mht,hexToBytes:Dht}=xht,ex={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=ex;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Mht(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=ex,n=typeof t=="string"?Dht(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=ex._parseInt(n.subarray(2)),{d:a,l:o}=ex._parseInt(i);if(o.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:a}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,a=s.length/2,o=n(i),c=n(a);return`30${n(a+i+4)}02${c}${s}02${o}${r}`}},gg=BigInt(0),bf=BigInt(1);BigInt(2);const Eue=BigInt(3);BigInt(4);function Lht(t){const e=Bht(t),{Fp:n}=e,r=e.toBytes||((g,m,v)=>{const A=m.toAffine();return _k(Uint8Array.from([4]),n.toBytes(A.x),n.toBytes(A.y))}),s=e.fromBytes||(g=>{const m=g.subarray(1),v=n.fromBytes(m.subarray(0,n.BYTES)),A=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:v,y:A}});function i(g){const{a:m,b:v}=e,A=n.sqr(g),S=n.mul(A,g);return n.add(n.add(S,n.mul(g,m)),v)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return typeof g=="bigint"&&gg<g&&g<e.n}function o(g){if(!a(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(g){const{allowedPrivateKeyLengths:m,nByteLength:v,wrapPrivateKey:A,n:S}=e;if(m&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=B5(g)),typeof g!="string"||!m.includes(g.length))throw new Error("Invalid key");g=g.padStart(v*2,"0")}let I;try{I=typeof g=="bigint"?g:Qx(Sd("private key",g,v))}catch{throw new Error(`private key must be ${v} bytes, hex or bigint, not ${typeof g}`)}return A&&(I=pl(I,S)),o(I),I}const l=new Map;function u(g){if(!(g instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(m,v,A){if(this.px=m,this.py=v,this.pz=A,m==null||!n.isValid(m))throw new Error("x required");if(v==null||!n.isValid(v))throw new Error("y required");if(A==null||!n.isValid(A))throw new Error("z required")}static fromAffine(m){const{x:v,y:A}=m||{};if(!m||!n.isValid(v)||!n.isValid(A))throw new Error("invalid affine point");if(m instanceof f)throw new Error("projective point not allowed");const S=I=>n.eql(I,n.ZERO);return S(v)&&S(A)?f.ZERO:new f(v,A,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const v=n.invertBatch(m.map(A=>A.pz));return m.map((A,S)=>A.toAffine(v[S])).map(f.fromAffine)}static fromHex(m){const v=f.fromAffine(s(Sd("pointHex",m)));return v.assertValidity(),v}static fromPrivateKey(m){return f.BASE.multiply(c(m))}_setWindowSize(m){this._WINDOW_SIZE=m,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:m,y:v}=this.toAffine();if(!n.isValid(m)||!n.isValid(v))throw new Error("bad point: x or y not FE");const A=n.sqr(v),S=i(m);if(!n.eql(A,S))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){u(m);const{px:v,py:A,pz:S}=this,{px:I,py:B,pz:D}=m,V=n.eql(n.mul(v,D),n.mul(I,S)),O=n.eql(n.mul(A,D),n.mul(B,S));return V&&O}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:v}=e,A=n.mul(v,Eue),{px:S,py:I,pz:B}=this;let D=n.ZERO,V=n.ZERO,O=n.ZERO,U=n.mul(S,S),Q=n.mul(I,I),ie=n.mul(B,B),G=n.mul(S,I);return G=n.add(G,G),O=n.mul(S,B),O=n.add(O,O),D=n.mul(m,O),V=n.mul(A,ie),V=n.add(D,V),D=n.sub(Q,V),V=n.add(Q,V),V=n.mul(D,V),D=n.mul(G,D),O=n.mul(A,O),ie=n.mul(m,ie),G=n.sub(U,ie),G=n.mul(m,G),G=n.add(G,O),O=n.add(U,U),U=n.add(O,U),U=n.add(U,ie),U=n.mul(U,G),V=n.add(V,U),ie=n.mul(I,B),ie=n.add(ie,ie),U=n.mul(ie,G),D=n.sub(D,U),O=n.mul(ie,Q),O=n.add(O,O),O=n.add(O,O),new f(D,V,O)}add(m){u(m);const{px:v,py:A,pz:S}=this,{px:I,py:B,pz:D}=m;let V=n.ZERO,O=n.ZERO,U=n.ZERO;const Q=e.a,ie=n.mul(e.b,Eue);let G=n.mul(v,I),R=n.mul(A,B),k=n.mul(S,D),b=n.add(v,A),w=n.add(I,B);b=n.mul(b,w),w=n.add(G,R),b=n.sub(b,w),w=n.add(v,S);let N=n.add(I,D);return w=n.mul(w,N),N=n.add(G,k),w=n.sub(w,N),N=n.add(A,S),V=n.add(B,D),N=n.mul(N,V),V=n.add(R,k),N=n.sub(N,V),U=n.mul(Q,w),V=n.mul(ie,k),U=n.add(V,U),V=n.sub(R,U),U=n.add(R,U),O=n.mul(V,U),R=n.add(G,G),R=n.add(R,G),k=n.mul(Q,k),w=n.mul(ie,w),R=n.add(R,k),k=n.sub(G,k),k=n.mul(Q,k),w=n.add(w,k),G=n.mul(R,w),O=n.add(O,G),G=n.mul(N,w),V=n.mul(b,V),V=n.sub(V,G),G=n.mul(b,R),U=n.mul(N,U),U=n.add(U,G),new f(V,O,U)}subtract(m){return this.add(m.negate())}is0(){return this.equals(f.ZERO)}wNAF(m){return p.wNAFCached(this,l,m,v=>{const A=n.invertBatch(v.map(S=>S.pz));return v.map((S,I)=>S.toAffine(A[I])).map(f.fromAffine)})}multiplyUnsafe(m){const v=f.ZERO;if(m===gg)return v;if(o(m),m===bf)return this;const{endo:A}=e;if(!A)return p.unsafeLadder(this,m);let{k1neg:S,k1:I,k2neg:B,k2:D}=A.splitScalar(m),V=v,O=v,U=this;for(;I>gg||D>gg;)I&bf&&(V=V.add(U)),D&bf&&(O=O.add(U)),U=U.double(),I>>=bf,D>>=bf;return S&&(V=V.negate()),B&&(O=O.negate()),O=new f(n.mul(O.px,A.beta),O.py,O.pz),V.add(O)}multiply(m){o(m);let v=m,A,S;const{endo:I}=e;if(I){const{k1neg:B,k1:D,k2neg:V,k2:O}=I.splitScalar(v);let{p:U,f:Q}=this.wNAF(D),{p:ie,f:G}=this.wNAF(O);U=p.constTimeNegate(B,U),ie=p.constTimeNegate(V,ie),ie=new f(n.mul(ie.px,I.beta),ie.py,ie.pz),A=U.add(ie),S=Q.add(G)}else{const{p:B,f:D}=this.wNAF(v);A=B,S=D}return f.normalizeZ([A,S])[0]}multiplyAndAddUnsafe(m,v,A){const S=f.BASE,I=(D,V)=>V===gg||V===bf||!D.equals(S)?D.multiplyUnsafe(V):D.multiply(V),B=I(this,v).add(I(m,A));return B.is0()?void 0:B}toAffine(m){const{px:v,py:A,pz:S}=this,I=this.is0();m==null&&(m=I?n.ONE:n.inv(S));const B=n.mul(v,m),D=n.mul(A,m),V=n.mul(S,m);if(I)return{x:n.ZERO,y:n.ZERO};if(!n.eql(V,n.ONE))throw new Error("invZ was invalid");return{x:B,y:D}}isTorsionFree(){const{h:m,isTorsionFree:v}=e;if(m===bf)return!0;if(v)return v(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:v}=e;return m===bf?this:v?v(f,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return this.assertValidity(),r(f,this,m)}toHex(m=!0){return B5(this.toRawBytes(m))}}f.BASE=new f(e.Gx,e.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const d=e.nBitLength,p=_ht(f,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:a}}function Uht(t){const e=w5e(t);return z7(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Fht(t){const e=Uht(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function a(w){return gg<w&&w<n.ORDER}function o(w){return pl(w,r)}function c(w){return Wz(w,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:d}=Lht({...e,toBytes(w,N,L){const C=N.toAffine(),T=n.toBytes(C.x),E=_k;return L?E(Uint8Array.from([N.hasEvenY()?2:3]),T):E(Uint8Array.from([4]),T,n.toBytes(C.y))},fromBytes(w){const N=w.length,L=w[0],C=w.subarray(1);if(N===s&&(L===2||L===3)){const T=Qx(C);if(!a(T))throw new Error("Point is not on curve");const E=f(T);let P=n.sqrt(E);const _=(P&bf)===bf;return(L&1)===1!==_&&(P=n.neg(P)),{x:T,y:P}}else if(N===i&&L===4){const T=n.fromBytes(C.subarray(0,n.BYTES)),E=n.fromBytes(C.subarray(n.BYTES,2*n.BYTES));return{x:T,y:E}}else throw new Error(`Point of length ${N} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),p=w=>B5(M5(w,e.nByteLength));function g(w){const N=r>>bf;return w>N}function m(w){return g(w)?o(-w):w}const v=(w,N,L)=>Qx(w.slice(N,L));class A{constructor(N,L,C){this.r=N,this.s=L,this.recovery=C,this.assertValidity()}static fromCompact(N){const L=e.nByteLength;return N=Sd("compactSignature",N,L*2),new A(v(N,0,L),v(N,L,2*L))}static fromDER(N){const{r:L,s:C}=ex.toSig(Sd("DER",N));return new A(L,C)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(N){return new A(this.r,this.s,N)}recoverPublicKey(N){const{r:L,s:C,recovery:T}=this,E=O(Sd("msgHash",N));if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");const P=T===2||T===3?L+e.n:L;if(P>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const _=T&1?"03":"02",H=l.fromHex(_+p(P)),ne=c(P),$=o(-E*ne),te=o(C*ne),J=l.BASE.multiplyAndAddUnsafe(H,$,te);if(!J)throw new Error("point at infinify");return J.assertValidity(),J}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Rk(this.toDERHex())}toDERHex(){return ex.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Rk(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const S={isValidPrivateKey(w){try{return u(w),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const w=y5e(e.n);return Oht(e.randomBytes(w),e.n)},precompute(w=8,N=l.BASE){return N._setWindowSize(w),N.multiply(BigInt(3)),N}};function I(w,N=!0){return l.fromPrivateKey(w).toRawBytes(N)}function B(w){const N=w instanceof Uint8Array,L=typeof w=="string",C=(N||L)&&w.length;return N?C===s||C===i:L?C===2*s||C===2*i:w instanceof l}function D(w,N,L=!0){if(B(w))throw new Error("first arg must be private key");if(!B(N))throw new Error("second arg must be public key");return l.fromHex(N).multiply(u(w)).toRawBytes(L)}const V=e.bits2int||function(w){const N=Qx(w),L=w.length*8-e.nBitLength;return L>0?N>>BigInt(L):N},O=e.bits2int_modN||function(w){return o(V(w))},U=Kee(e.nBitLength);function Q(w){if(typeof w!="bigint")throw new Error("bigint expected");if(!(gg<=w&&w<U))throw new Error(`bigint expected < 2^${e.nBitLength}`);return M5(w,e.nByteLength)}function ie(w,N,L=G){if(["recovered","canonical"].some(X=>X in L))throw new Error("sign() legacy options not supported");const{hash:C,randomBytes:T}=e;let{lowS:E,prehash:P,extraEntropy:_}=L;E==null&&(E=!0),w=Sd("msgHash",w),P&&(w=Sd("prehashed msgHash",C(w)));const H=O(w),ne=u(N),$=[Q(ne),Q(H)];if(_!=null){const X=_===!0?T(n.BYTES):_;$.push(Sd("extraEntropy",X))}const te=_k(...$),J=H;function ee(X){const j=V(X);if(!d(j))return;const se=c(j),ye=l.BASE.multiply(j).toAffine(),Ce=o(ye.x);if(Ce===gg)return;const xe=o(se*o(J+Ce*ne));if(xe===gg)return;let De=(ye.x===Ce?0:2)|Number(ye.y&bf),qe=xe;return E&&g(xe)&&(qe=m(xe),De^=1),new A(Ce,qe,De)}return{seed:te,k2sig:ee}}const G={lowS:e.lowS,prehash:!1},R={lowS:e.lowS,prehash:!1};function k(w,N,L=G){const{seed:C,k2sig:T}=ie(w,N,L),E=e;return p5e(E.hash.outputLen,E.nByteLength,E.hmac)(C,T)}l.BASE._setWindowSize(8);function b(w,N,L,C=R){var ye;const T=w;if(N=Sd("msgHash",N),L=Sd("publicKey",L),"strict"in C)throw new Error("options.strict was renamed to lowS");const{lowS:E,prehash:P}=C;let _,H;try{if(typeof T=="string"||T instanceof Uint8Array)try{_=A.fromDER(T)}catch(Ce){if(!(Ce instanceof ex.Err))throw Ce;_=A.fromCompact(T)}else if(typeof T=="object"&&typeof T.r=="bigint"&&typeof T.s=="bigint"){const{r:Ce,s:xe}=T;_=new A(Ce,xe)}else throw new Error("PARSE");H=l.fromHex(L)}catch(Ce){if(Ce.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(E&&_.hasHighS())return!1;P&&(N=e.hash(N));const{r:ne,s:$}=_,te=O(N),J=c($),ee=o(te*J),X=o(ne*J),j=(ye=l.BASE.multiplyAndAddUnsafe(H,ee,X))==null?void 0:ye.toAffine();return j?o(j.x)===ne:!1}return{CURVE:e,getPublicKey:I,getSharedSecret:D,sign:k,verify:b,ProjectivePoint:l,Signature:A,utils:S}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Vht(t){return{hash:t,hmac:(e,...n)=>wU(t,e,ydt(...n)),randomBytes:bdt}}function $ht(t,e){const n=r=>Fht({...t,...Vht(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const b5e=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Aue=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),jht=BigInt(1),zz=BigInt(2),Sue=(t,e)=>(t+e/zz)/e;function Hht(t){const e=b5e,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,f=Yu(u,n,e)*u%e,d=Yu(f,n,e)*u%e,p=Yu(d,zz,e)*l%e,g=Yu(p,s,e)*p%e,m=Yu(g,i,e)*g%e,v=Yu(m,o,e)*m%e,A=Yu(v,c,e)*v%e,S=Yu(A,o,e)*m%e,I=Yu(S,n,e)*u%e,B=Yu(I,a,e)*g%e,D=Yu(B,r,e)*l%e,V=Yu(D,zz,e);if(!Jz.eql(Jz.sqr(V),t))throw new Error("Cannot find square root");return V}const Jz=Pht(b5e,void 0,void 0,{sqrt:Hht}),My=$ht({a:BigInt(0),b:BigInt(7),Fp:Jz,n:Aue,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Aue,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-jht*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),o=Sue(i*t,e),c=Sue(-r*t,e);let l=pl(t-o*n-c*s,e),u=pl(-o*r-c*i,e);const f=l>a,d=u>a;if(f&&(l=e-l),d&&(u=e-u),l>a||u>a)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:l,k2neg:d,k2:u}}}},x4);BigInt(0);My.ProjectivePoint;const $c="0x0000000000000000000000000000000000000000",Ow="0x0000000000000000000000000000000000000000000000000000000000000000",v5e=`Ethereum Signed Message:
`,Iue=BigInt(0),Cue=BigInt(1),Tue=BigInt(2),Nue=BigInt(27),kue=BigInt(28),WO=BigInt(35),QE={};function Pue(t){return th(xo(t),32)}var p6,g6,m6,wx,fl;let Jg=(fl=class{constructor(e,n,r,s){Le(this,p6);Le(this,g6);Le(this,m6);Le(this,wx);Mb(e,QE,"Signature"),we(this,p6,n),we(this,g6,r),we(this,m6,s),we(this,wx,null)}get r(){return Y(this,p6)}set r(e){Se(Yx(e)===32,"invalid r","value",e),we(this,p6,Ke(e))}get s(){return Y(this,g6)}set s(e){Se(Yx(e)===32,"invalid s","value",e);const n=Ke(e);Se(parseInt(n.substring(0,3))<8,"non-canonical s","value",n),we(this,g6,n)}get v(){return Y(this,m6)}set v(e){const n=er(e,"value");Se(n===27||n===28,"invalid v","v",e),we(this,m6,n)}get networkV(){return Y(this,wx)}get legacyChainId(){const e=this.networkV;return e==null?null:fl.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=et(this.s);return this.yParity&&(e[0]|=128),Ke(e)}get compactSerialized(){return Qr([this.r,this.yParityAndS])}get serialized(){return Qr([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new fl(QE,this.r,this.s,this.v);return this.networkV&&we(e,wx,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const n=Yt(e,"v");return n==Nue||n==kue?Iue:(Se(n>=WO,"invalid EIP-155 v","v",e),(n-WO)/Tue)}static getChainIdV(e,n){return Yt(e)*Tue+BigInt(35+n-27)}static getNormalizedV(e){const n=Yt(e);return n===Iue||n===Nue?27:n===Cue||n===kue?28:(Se(n>=WO,"invalid v","v",e),n&Cue?27:28)}static from(e){function n(l,u){Se(l,u,"signature",e)}if(e==null)return new fl(QE,Ow,Ow,27);if(typeof e=="string"){const l=et(e,"signature");if(l.length===64){const u=Ke(l.slice(0,32)),f=l.slice(32,64),d=f[0]&128?28:27;return f[0]&=127,new fl(QE,u,Ke(f),d)}if(l.length===65){const u=Ke(l.slice(0,32)),f=l.slice(32,64);n((f[0]&128)===0,"non-canonical s");const d=fl.getNormalizedV(l[64]);return new fl(QE,u,Ke(f),d)}n(!1,"invalid raw signature length")}if(e instanceof fl)return e.clone();const r=e.r;n(r!=null,"missing r");const s=Pue(r),i=function(l,u){if(l!=null)return Pue(l);if(u!=null){n(rs(u,32),"invalid yParityAndS");const f=et(u);return f[0]&=127,Ke(f)}n(!1,"missing s")}(e.s,e.yParityAndS);n((et(i)[0]&128)==0,"non-canonical s");const{networkV:a,v:o}=function(l,u,f){if(l!=null){const d=Yt(l);return{networkV:d>=WO?d:void 0,v:fl.getNormalizedV(d)}}if(u!=null)return n(rs(u,32),"invalid yParityAndS"),{v:et(u)[0]&128?28:27};if(f!=null){switch(er(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new fl(QE,s,i,o);return a&&we(c,wx,a),n(e.yParity==null||er(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}},p6=new WeakMap,g6=new WeakMap,m6=new WeakMap,wx=new WeakMap,fl);var rg,c0;let tb=(c0=class{constructor(e){Le(this,rg);Se(Yx(e)===32,"invalid private key","privateKey","[REDACTED]"),we(this,rg,Ke(e))}get privateKey(){return Y(this,rg)}get publicKey(){return c0.computePublicKey(Y(this,rg))}get compressedPublicKey(){return c0.computePublicKey(Y(this,rg),!0)}sign(e){Se(Yx(e)===32,"invalid digest length","digest",e);const n=My.sign(vo(e),vo(Y(this,rg)),{lowS:!0});return Jg.from({r:Mf(n.r,32),s:Mf(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=c0.computePublicKey(e);return Ke(My.getSharedSecret(vo(Y(this,rg)),et(n),!1))}static computePublicKey(e,n){let r=et(e,"key");if(r.length===32){const i=My.getPublicKey(r,!!n);return Ke(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=My.ProjectivePoint.fromHex(r);return Ke(s.toRawBytes(n))}static recoverPublicKey(e,n){Se(Yx(e)===32,"invalid digest length","digest",e);const r=Jg.from(n);let s=My.Signature.fromCompact(vo(Qr([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(vo(e));return Se(i!=null,"invalid signautre for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=My.ProjectivePoint.fromHex(c0.computePublicKey(e).substring(2)),i=My.ProjectivePoint.fromHex(c0.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}},rg=new WeakMap,c0);const qht=BigInt(0),Kht=BigInt(36);function Oue(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=et(yr(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const Gee={};for(let t=0;t<10;t++)Gee[String(t)]=String(t);for(let t=0;t<26;t++)Gee[String.fromCharCode(65+t)]=String(10+t);const Rue=15;function Ght(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>Gee[r]).join("");for(;e.length>=Rue;){let r=e.substring(0,Rue);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const Wht=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function zht(t){t=t.toLowerCase();let e=qht;for(let n=0;n<t.length;n++)e=e*Kht+Wht[t[n]];return e}function Fn(t){if(Se(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=Oue(t);return Se(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Se(t.substring(2,4)===Ght(t),"bad icap checksum","address",t);let e=zht(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return Oue("0x"+e)}Se(!1,"invalid address","address",t)}function Jht(t){const e=Fn(t.from);let r=Yt(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Fn(_s(yr(C2([e,r])),12))}function x5e(t){return t&&typeof t.getAddress=="function"}function FM(t){try{return Fn(t),!0}catch{}return!1}async function KH(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(Ye(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),Se(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Fn(n)}function Eo(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Fn(t):(Ye(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),KH(t,e.resolveName(t)));if(x5e(t))return KH(t,t.getAddress());if(t&&typeof t.then=="function")return KH(t,t);Se(!1,"unsupported addressable value","target",t)}const Kp={};function Kt(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new ac(Kp,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function Yr(t,e){return new ac(Kp,`bytes${e||""}`,t,{size:e})}const _ue=Symbol.for("_ethers_typed");var bx;const Gp=class Gp{constructor(e,n,r,s){q(this,"type");q(this,"value");Le(this,bx);q(this,"_typedSymbol");s==null&&(s=null),Mb(Kp,e,"Typed"),tn(this,{_typedSymbol:_ue,type:n,value:r}),we(this,bx,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return Y(this,bx)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return Y(this,bx)===!0?-1:Y(this,bx)===!1?this.value.length:null}static from(e,n){return new Gp(Kp,e,n)}static uint8(e){return Kt(e,8)}static uint16(e){return Kt(e,16)}static uint24(e){return Kt(e,24)}static uint32(e){return Kt(e,32)}static uint40(e){return Kt(e,40)}static uint48(e){return Kt(e,48)}static uint56(e){return Kt(e,56)}static uint64(e){return Kt(e,64)}static uint72(e){return Kt(e,72)}static uint80(e){return Kt(e,80)}static uint88(e){return Kt(e,88)}static uint96(e){return Kt(e,96)}static uint104(e){return Kt(e,104)}static uint112(e){return Kt(e,112)}static uint120(e){return Kt(e,120)}static uint128(e){return Kt(e,128)}static uint136(e){return Kt(e,136)}static uint144(e){return Kt(e,144)}static uint152(e){return Kt(e,152)}static uint160(e){return Kt(e,160)}static uint168(e){return Kt(e,168)}static uint176(e){return Kt(e,176)}static uint184(e){return Kt(e,184)}static uint192(e){return Kt(e,192)}static uint200(e){return Kt(e,200)}static uint208(e){return Kt(e,208)}static uint216(e){return Kt(e,216)}static uint224(e){return Kt(e,224)}static uint232(e){return Kt(e,232)}static uint240(e){return Kt(e,240)}static uint248(e){return Kt(e,248)}static uint256(e){return Kt(e,256)}static uint(e){return Kt(e,256)}static int8(e){return Kt(e,-8)}static int16(e){return Kt(e,-16)}static int24(e){return Kt(e,-24)}static int32(e){return Kt(e,-32)}static int40(e){return Kt(e,-40)}static int48(e){return Kt(e,-48)}static int56(e){return Kt(e,-56)}static int64(e){return Kt(e,-64)}static int72(e){return Kt(e,-72)}static int80(e){return Kt(e,-80)}static int88(e){return Kt(e,-88)}static int96(e){return Kt(e,-96)}static int104(e){return Kt(e,-104)}static int112(e){return Kt(e,-112)}static int120(e){return Kt(e,-120)}static int128(e){return Kt(e,-128)}static int136(e){return Kt(e,-136)}static int144(e){return Kt(e,-144)}static int152(e){return Kt(e,-152)}static int160(e){return Kt(e,-160)}static int168(e){return Kt(e,-168)}static int176(e){return Kt(e,-176)}static int184(e){return Kt(e,-184)}static int192(e){return Kt(e,-192)}static int200(e){return Kt(e,-200)}static int208(e){return Kt(e,-208)}static int216(e){return Kt(e,-216)}static int224(e){return Kt(e,-224)}static int232(e){return Kt(e,-232)}static int240(e){return Kt(e,-240)}static int248(e){return Kt(e,-248)}static int256(e){return Kt(e,-256)}static int(e){return Kt(e,-256)}static bytes1(e){return Yr(e,1)}static bytes2(e){return Yr(e,2)}static bytes3(e){return Yr(e,3)}static bytes4(e){return Yr(e,4)}static bytes5(e){return Yr(e,5)}static bytes6(e){return Yr(e,6)}static bytes7(e){return Yr(e,7)}static bytes8(e){return Yr(e,8)}static bytes9(e){return Yr(e,9)}static bytes10(e){return Yr(e,10)}static bytes11(e){return Yr(e,11)}static bytes12(e){return Yr(e,12)}static bytes13(e){return Yr(e,13)}static bytes14(e){return Yr(e,14)}static bytes15(e){return Yr(e,15)}static bytes16(e){return Yr(e,16)}static bytes17(e){return Yr(e,17)}static bytes18(e){return Yr(e,18)}static bytes19(e){return Yr(e,19)}static bytes20(e){return Yr(e,20)}static bytes21(e){return Yr(e,21)}static bytes22(e){return Yr(e,22)}static bytes23(e){return Yr(e,23)}static bytes24(e){return Yr(e,24)}static bytes25(e){return Yr(e,25)}static bytes26(e){return Yr(e,26)}static bytes27(e){return Yr(e,27)}static bytes28(e){return Yr(e,28)}static bytes29(e){return Yr(e,29)}static bytes30(e){return Yr(e,30)}static bytes31(e){return Yr(e,31)}static bytes32(e){return Yr(e,32)}static address(e){return new Gp(Kp,"address",e)}static bool(e){return new Gp(Kp,"bool",!!e)}static bytes(e){return new Gp(Kp,"bytes",e)}static string(e){return new Gp(Kp,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Gp(Kp,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===_ue}static dereference(e,n){if(Gp.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};bx=new WeakMap;let ac=Gp;class Yht extends am{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=ac.dereference(n,"string");try{r=Fn(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return Fn(Mf(e.readValue(),20))}}class Qht extends am{constructor(n){super(n.name,n.type,"_",n.dynamic);q(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function E5e(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return Ye(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),Ye(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else Se(!1,"invalid tuple value","tuple",n);Se(e.length===r.length,"types/value length mismatch","tuple",n);let s=new jz,i=new jz,a=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let f=i.length;c.encode(i,u);let d=s.writeUpdatableValue();a.push(p=>{d(p+f)})}else c.encode(s,u)}),a.forEach(c=>{c(s.length)});let o=t.appendWriter(s);return o+=t.appendWriter(i),o}function A5e(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let a=null;if(i.dynamic){let o=t.readIndex(),c=s.subReader(o);try{a=i.decode(c)}catch(l){if(Ea(l,"BUFFER_OVERRUN"))throw l;a=l,a.baseType=i.name,a.name=i.localName,a.type=i.type}}else try{a=i.decode(t)}catch(o){if(Ea(o,"BUFFER_OVERRUN"))throw o;a=o,a.baseType=i.name,a.name=i.localName,a.type=i.type}if(a==null)throw new Error("investigate");n.push(a),r.push(i.localName||null)}),O5.fromItems(n,r)}class Zht extends am{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",a=r===-1||n.dynamic;super("array",i,s,a);q(this,"coder");q(this,"length");tn(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=ac.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),l6e(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let a=[];for(let o=0;o<s.length;o++)a.push(this.coder);return E5e(n,a,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),Ye(r*Mc<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*Mc,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new Qht(this.coder));return A5e(n,s)}}class Xht extends am{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=ac.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class S5e extends am{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=vo(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class e0t extends S5e{constructor(e){super("bytes",e)}decode(e){return Ke(super.decode(e))}}class t0t extends am{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);q(this,"size");tn(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=vo(ac.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Ke(n.readBytes(this.size))}}const n0t=new Uint8Array([]);class r0t extends am{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(n0t)}decode(e){return e.readBytes(0),null}}const s0t=BigInt(0),i0t=BigInt(1),a0t=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class o0t extends am{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);q(this,"size");q(this,"signed");tn(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Yt(ac.dereference(r,this.type)),i=Xv(a0t,Mc*8);if(this.signed){let a=Xv(i,this.size*8-1);(s>a||s<-(a+i0t))&&this._throwError("value out-of-bounds",r),s=_ee(s,8*Mc)}else(s<s0t||s>Xv(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=Xv(n.readValue(),this.size*8);return this.signed&&(r=DM(r,this.size*8)),r}}class c0t extends S5e{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,aa(ac.dereference(n,"string")))}decode(e){return I2(super.decode(e))}}class zO extends am{constructor(n,r){let s=!1;const i=[];n.forEach(o=>{o.dynamic&&(s=!0),i.push(o.type)});const a="tuple("+i.join(",")+")";super("tuple",a,r,s);q(this,"coders");tn(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const a=i.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});return this.coders.forEach((s,i)=>{let a=s.localName;!a||r[a]!==1||(a==="length"&&(a="_length"),n[a]==null&&(n[a]=n[i]))}),Object.freeze(n)}encode(n,r){const s=ac.dereference(r,"tuple");return E5e(n,this.coders,s)}decode(n){return A5e(n,this.coders)}}function Tl(t){return yr(aa(t))}var l0t="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const Bue=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),Mue=4;function u0t(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let D=1;D<r;D++)i.push(s+=n());let a=n(),o=e;e+=a;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const f=31,d=2**f,p=d>>>1,g=p>>1,m=d-1;let v=0;for(let D=0;D<f;D++)v=v<<1|u();let A=[],S=0,I=d;for(;;){let D=Math.floor(((v-S+1)*s-1)/I),V=0,O=r;for(;O-V>1;){let ie=V+O>>>1;D<i[ie]?O=ie:V=ie}if(V==0)break;A.push(V);let U=S+Math.floor(I*i[V]/s),Q=S+Math.floor(I*i[V+1]/s)-1;for(;!((U^Q)&p);)v=v<<1&m|u(),U=U<<1&m,Q=Q<<1&m|1;for(;U&~Q&g;)v=v&p|v<<1&m>>>1|u(),U=U<<1^p,Q=(Q^p)<<1|p|1;S=U,I=1+Q-U}let B=r-4;return A.map(D=>{switch(D-B){case 3:return B+65792+(t[o++]<<16|t[o++]<<8|t[o++]);case 2:return B+256+(t[o++]<<8|t[o++]);case 1:return B+t[o++];default:return D-1}})}function f0t(t){let e=0;return()=>t[e++]}function I5e(t){return f0t(u0t(d0t(t)))}function d0t(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,a=0,o=0;s<n;s++)o=o<<6|e[t.charCodeAt(s)],a+=6,a>=8&&(r[i++]=o>>(a-=8));return r}function h0t(t){return t&1?~t>>1:t>>1}function p0t(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=h0t(e());return n}function Bk(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function C5e(t){return Mk(()=>{let e=Bk(t);if(e.length)return e})}function T5e(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(g0t(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(m0t(n,t))}return e.flat()}function Mk(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function N5e(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)p0t(t,n).forEach((i,a)=>r[a].push(i));return r}function g0t(t,e){let n=1+e(),r=e(),s=Mk(e);return N5e(s.length,1+t,e).flatMap((a,o)=>{let[c,...l]=a;return Array(s[o]).fill().map((u,f)=>{let d=f*r;return[c+f*n,l.map(p=>p+d)]})})}function m0t(t,e){let n=1+e();return N5e(n,1+t,e).map(s=>[s[0],s.slice(1)])}function y0t(t){let e=[],n=Bk(t);return s(r([]),[]),e;function r(i){let a=t(),o=Mk(()=>{let c=Bk(t).map(l=>n[l]);if(c.length)return r(c)});return{S:a,B:o,Q:i}}function s({S:i,B:a},o,c){if(!(i&4&&c===o[o.length-1])){i&2&&(c=o[o.length-1]),i&1&&e.push(o);for(let l of a)for(let u of l.Q)s(l,[...o,u],c)}}}function w0t(t){return t.toString(16).toUpperCase().padStart(2,"0")}function k5e(t){return`{${w0t(t)}}`}function b0t(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function D5(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function v0t(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var x0t="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Dk=44032,VM=4352,$M=4449,jM=4519,P5e=19,O5e=21,L5=28,HM=O5e*L5,E0t=P5e*HM,A0t=Dk+E0t,S0t=VM+P5e,I0t=$M+O5e,C0t=jM+L5;function xT(t){return t>>24&255}function R5e(t){return t&16777215}let Yz,Due,Qz,N_;function T0t(){let t=I5e(x0t);Yz=new Map(C5e(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),Due=new Set(Bk(t)),Qz=new Map,N_=new Map;for(let[e,n]of T5e(t)){if(!Due.has(e)&&n.length==2){let[r,s]=n,i=N_.get(r);i||(i=new Map,N_.set(r,i)),i.set(s,e)}Qz.set(e,n.reverse())}}function _5e(t){return t>=Dk&&t<A0t}function N0t(t,e){if(t>=VM&&t<S0t&&e>=$M&&e<I0t)return Dk+(t-VM)*HM+(e-$M)*L5;if(_5e(t)&&e>jM&&e<C0t&&(t-Dk)%L5==0)return t+(e-jM);{let n=N_.get(t);return n&&(n=n.get(e),n)?n:-1}}function B5e(t){Yz||T0t();let e=[],n=[],r=!1;function s(i){let a=Yz.get(i);a&&(r=!0,i|=a),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(_5e(i)){let a=i-Dk,o=a/HM|0,c=a%HM/L5|0,l=a%L5;s(VM+o),s($M+c),l>0&&s(jM+l)}else{let a=Qz.get(i);a?n.push(...a):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=xT(e[0]);for(let a=1;a<e.length;a++){let o=xT(e[a]);if(o==0||i<=o){i=o;continue}let c=a-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=xT(e[--c]),i<=o))break}i=xT(e[a])}}return e}function k0t(t){let e=[],n=[],r=-1,s=0;for(let i of t){let a=xT(i),o=R5e(i);if(r==-1)a==0?r=o:e.push(o);else if(s>0&&s>=a)a==0?(e.push(r,...n),n.length=0,r=o):n.push(o),s=a;else{let c=N0t(r,o);c>=0?r=c:s==0&&a==0?(e.push(r),r=o):(n.push(o),s=a)}}return r>=0&&e.push(r,...n),e}function M5e(t){return B5e(t).map(R5e)}function P0t(t){return k0t(B5e(t))}const Lue=45,D5e=".",L5e=65039,U5e=1,qM=t=>Array.from(t);function Lk(t,e){return t.P.has(e)||t.Q.has(e)}class O0t extends Array{get is_emoji(){return!0}}let Zz,F5e,tx,Xz,V5e,G3,GH,PS,Iv,Uue,eJ;function Wee(){if(Zz)return;let t=I5e(l0t);const e=()=>Bk(t),n=()=>new Set(e()),r=(u,f)=>f.forEach(d=>u.add(d));Zz=new Map(T5e(t)),F5e=n(),tx=e(),Xz=new Set(e().map(u=>tx[u])),tx=new Set(tx),V5e=n(),n();let s=C5e(t),i=t();const a=()=>{let u=new Set;return e().forEach(f=>r(u,s[f])),r(u,e()),u};G3=Mk(u=>{let f=Mk(t).map(d=>d+96);if(f.length){let d=u>=i;f[0]-=32,f=D5(f),d&&(f=`Restricted[${f}]`);let p=a(),g=a(),m=!t();return{N:f,P:p,Q:g,M:m,R:d}}}),GH=n(),PS=new Map;let o=e().concat(qM(GH)).sort((u,f)=>u-f);o.forEach((u,f)=>{let d=t(),p=o[f]=d?o[f-d]:{V:[],M:new Map};p.V.push(u),GH.has(u)||PS.set(u,p)});for(let{V:u,M:f}of new Set(PS.values())){let d=[];for(let g of u){let m=G3.filter(A=>Lk(A,g)),v=d.find(({G:A})=>m.some(S=>A.has(S)));v||(v={G:new Set,V:[]},d.push(v)),v.V.push(g),r(v.G,m)}let p=d.flatMap(g=>qM(g.G));for(let{G:g,V:m}of d){let v=new Set(p.filter(A=>!g.has(A)));for(let A of m)f.set(A,v)}}Iv=new Set;let c=new Set;const l=u=>Iv.has(u)?c.add(u):Iv.add(u);for(let u of G3){for(let f of u.P)l(f);for(let f of u.Q)l(f)}for(let u of Iv)!PS.has(u)&&!c.has(u)&&PS.set(u,U5e);r(Iv,M5e(Iv)),Uue=y0t(t).map(u=>O0t.from(u)).sort(v0t),eJ=new Map;for(let u of Uue){let f=[eJ];for(let d of u){let p=f.map(g=>{let m=g.get(d);return m||(m=new Map,g.set(d,m)),m});d===L5e?f.push(...p):f=p}for(let d of f)d.V=u}}function zee(t){return($5e(t)?"":`${Jee(vU([t]))} `)+k5e(t)}function Jee(t){return`"${t}"`}function R0t(t){if(t.length>=4&&t[2]==Lue&&t[3]==Lue)throw new Error(`invalid label extension: "${D5(t.slice(0,4))}"`)}function _0t(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function B0t(t){let e=t[0],n=Bue.get(e);if(n)throw iN(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let a=Bue.get(e);if(a){if(s==i)throw iN(`${n} + ${a}`);s=i+1,n=a}}if(s==r)throw iN(`trailing ${n}`)}function vU(t,e=1/0,n=k5e){let r=[];M0t(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let a=0;a<i;a++){let o=t[a];$5e(o)&&(r.push(D5(t.slice(s,a))),r.push(n(o)),s=a+1)}return r.push(D5(t.slice(s,i))),r.join("")}function M0t(t){return Wee(),tx.has(t)}function $5e(t){return Wee(),V5e.has(t)}function D0t(t){return V0t(L0t(t,P0t,H0t))}function L0t(t,e,n){if(!t)return[];Wee();let r=0;return t.split(D5e).map(s=>{let i=b0t(s),a={input:i,offset:r};r+=i.length+1;try{let o=a.tokens=j0t(i,e,n),c=o.length,l;if(!c)throw new Error("empty label");let u=a.output=o.flat();if(_0t(u),!(a.emoji=c>1||o[0].is_emoji)&&u.every(d=>d<128))R0t(u),l="ASCII";else{let d=o.flatMap(p=>p.is_emoji?[]:p);if(!d.length)l="Emoji";else{if(tx.has(u[0]))throw iN("leading combining mark");for(let m=1;m<c;m++){let v=o[m];if(!v.is_emoji&&tx.has(v[0]))throw iN(`emoji + combining mark: "${D5(o[m-1])} + ${vU([v[0]])}"`)}B0t(u);let p=qM(new Set(d)),[g]=F0t(p);$0t(g,d),U0t(g,p),l=g.N}}a.type=l}catch(o){a.error=o}return a})}function U0t(t,e){let n,r=[];for(let s of e){let i=PS.get(s);if(i===U5e)return;if(i){let a=i.M.get(s);if(n=n?n.filter(o=>a.has(o)):qM(a),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>Lk(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function F0t(t){let e=G3;for(let n of t){let r=e.filter(s=>Lk(s,n));if(!r.length)throw G3.some(s=>Lk(s,n))?H5e(e[0],n):j5e(n);if(e=r,r.length==1)break}return e}function V0t(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${Jee(vU(e,63))}: ${s}`)}return D5(r)}).join(D5e)}function j5e(t){return new Error(`disallowed character: ${zee(t)}`)}function H5e(t,e){let n=zee(e),r=G3.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function iN(t){return new Error(`illegal placement: ${t}`)}function $0t(t,e){for(let n of e)if(!Lk(t,n))throw H5e(t,n);if(t.M){let n=M5e(e);for(let r=1,s=n.length;r<s;r++)if(Xz.has(n[r])){let i=r+1;for(let a;i<s&&Xz.has(a=n[i]);i++)for(let o=r;o<i;o++)if(n[o]==a)throw new Error(`duplicate non-spacing marks: ${zee(a)}`);if(i-r>Mue)throw new Error(`excessive non-spacing marks: ${Jee(vU(n.slice(r-1,i)))} (${i-r}/${Mue})`);r=i}}}function j0t(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=q0t(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let a=t.pop();if(Iv.has(a))s.push(a);else{let o=Zz.get(a);if(o)s.push(...o);else if(!F5e.has(a))throw j5e(a)}}}return s.length&&r.push(e(s)),r}function H0t(t){return t.filter(e=>e!=L5e)}function q0t(t,e){let n=eJ,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const q5e=new Uint8Array(32);q5e.fill(0);function Fue(t){return Se(t.length!==0,"invalid ENS name; empty component","comp",t),t}function K5e(t){const e=aa(K0t(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(Fue(e.slice(r,s))),r=s+1);return Se(r<e.length,"invalid ENS name; empty component","name",t),n.push(Fue(e.slice(r))),n}function K0t(t){try{if(t.length===0)throw new Error("empty label");return D0t(t)}catch(e){Se(!1,`invalid ENS name (${e.message})`,"name",t)}}function tJ(t){Se(typeof t=="string","invalid ENS name; not a string","name",t),Se(t.length,"invalid ENS name (empty label)","name",t);let e=q5e;const n=K5e(t);for(;n.length;)e=yr(Qr([e,yr(n.pop())]));return Ke(e)}function G0t(t,e){const n=e;return Se(n<=255,"DNS encoded label cannot exceed 255","length",n),Ke(Qr(K5e(t).map(r=>{Se(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}function WH(t,e){return{address:Fn(t),storageKeys:e.map((n,r)=>(Se(rs(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function Y2(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(Se(n.length===2,"invalid slot set",`value[${r}]`,n),WH(n[0],n[1])):(Se(n!=null&&typeof n=="object","invalid address-slot set","value",t),WH(n.address,n.storageKeys)));Se(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return WH(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function J7(t){let e;return typeof t=="string"?e=tb.computePublicKey(t,!1):e=t.publicKey,Fn(yr("0x"+e.substring(4)).substring(26))}function KM(t,e){return J7(tb.recoverPublicKey(t,e))}const Fa=BigInt(0),W0t=BigInt(2),z0t=BigInt(27),J0t=BigInt(28),Y0t=BigInt(35),Q0t=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),zH=4096*32;function Vue(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=$f(e).substring(4),"0x"+n}function xU(t){return t==="0x"?null:Fn(t)}function Yee(t,e){try{return Y2(t)}catch(n){Se(!1,n.message,e,t)}}function Y7(t,e){return t==="0x"?0:er(t,e)}function ji(t,e){if(t==="0x")return Fa;const n=Yt(t,e);return Se(n<=Q0t,"value exceeds uint size",e,n),n}function Ks(t,e){const n=Yt(t,"value"),r=xo(n);return Se(r.length<=32,"value too large",`tx.${e}`,n),r}function Qee(t){return Y2(t).map(e=>[e.address,e.storageKeys])}function Z0t(t,e){Se(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)Se(rs(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function X0t(t){const e=mU(t);Se(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Y7(e[0],"nonce"),gasPrice:ji(e[1],"gasPrice"),gasLimit:ji(e[2],"gasLimit"),to:xU(e[3]),value:ji(e[4],"value"),data:Ke(e[5]),chainId:Fa};if(e.length===6)return n;const r=ji(e[6],"v"),s=ji(e[7],"r"),i=ji(e[8],"s");if(s===Fa&&i===Fa)n.chainId=r;else{let a=(r-Y0t)/W0t;a<Fa&&(a=Fa),n.chainId=a,Se(a!==Fa||r===z0t||r===J0t,"non-canonical legacy v","v",e[6]),n.signature=Jg.from({r:th(e[7],32),s:th(e[8],32),v:r})}return n}function ept(t,e){const n=[Ks(t.nonce,"nonce"),Ks(t.gasPrice||0,"gasPrice"),Ks(t.gasLimit,"gasLimit"),t.to||"0x",Ks(t.value,"value"),t.data];let r=Fa;if(t.chainId!=Fa)r=Yt(t.chainId,"tx.chainId"),Se(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==Fa&&(n.push(xo(r)),n.push("0x"),n.push("0x")),C2(n);let s=BigInt(27+e.yParity);return r!==Fa?s=Jg.getChainIdV(r,e.v):BigInt(e.v)!==s&&Se(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(xo(s)),n.push(xo(e.r)),n.push(xo(e.s)),C2(n)}function Zee(t,e){let n;try{if(n=Y7(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{Se(!1,"invalid yParity","yParity",e[0])}const r=th(e[1],32),s=th(e[2],32),i=Jg.from({r,s,yParity:n});t.signature=i}function tpt(t){const e=mU(et(t).slice(1));Se(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Ke(t));const n={type:2,chainId:ji(e[0],"chainId"),nonce:Y7(e[1],"nonce"),maxPriorityFeePerGas:ji(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ji(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ji(e[4],"gasLimit"),to:xU(e[5]),value:ji(e[6],"value"),data:Ke(e[7]),accessList:Yee(e[8],"accessList")};return e.length===9||Zee(n,e.slice(9)),n}function npt(t,e){const n=[Ks(t.chainId,"chainId"),Ks(t.nonce,"nonce"),Ks(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ks(t.maxFeePerGas||0,"maxFeePerGas"),Ks(t.gasLimit,"gasLimit"),t.to||"0x",Ks(t.value,"value"),t.data,Qee(t.accessList||[])];return e&&(n.push(Ks(e.yParity,"yParity")),n.push(xo(e.r)),n.push(xo(e.s))),Qr(["0x02",C2(n)])}function rpt(t){const e=mU(et(t).slice(1));Se(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Ke(t));const n={type:1,chainId:ji(e[0],"chainId"),nonce:Y7(e[1],"nonce"),gasPrice:ji(e[2],"gasPrice"),gasLimit:ji(e[3],"gasLimit"),to:xU(e[4]),value:ji(e[5],"value"),data:Ke(e[6]),accessList:Yee(e[7],"accessList")};return e.length===8||Zee(n,e.slice(8)),n}function spt(t,e){const n=[Ks(t.chainId,"chainId"),Ks(t.nonce,"nonce"),Ks(t.gasPrice||0,"gasPrice"),Ks(t.gasLimit,"gasLimit"),t.to||"0x",Ks(t.value,"value"),t.data,Qee(t.accessList||[])];return e&&(n.push(Ks(e.yParity,"recoveryParam")),n.push(xo(e.r)),n.push(xo(e.s))),Qr(["0x01",C2(n)])}function ipt(t){let e=mU(et(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],a=e[2],o=e[3];Se(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),Se(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),Se(Array.isArray(o),"invalid network format: proofs not an array","fields[3]",o),Se(i.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),Se(i.length===o.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:a[c],proof:o[c]});e=e[0]}Se(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Ke(t));const s={type:3,chainId:ji(e[0],"chainId"),nonce:Y7(e[1],"nonce"),maxPriorityFeePerGas:ji(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ji(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ji(e[4],"gasLimit"),to:xU(e[5]),value:ji(e[6],"value"),data:Ke(e[7]),accessList:Yee(e[8],"accessList"),maxFeePerBlobGas:ji(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),Se(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),Se(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)Se(rs(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||Zee(s,e.slice(11)),s}function apt(t,e,n){const r=[Ks(t.chainId,"chainId"),Ks(t.nonce,"nonce"),Ks(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ks(t.maxFeePerGas||0,"maxFeePerGas"),Ks(t.gasLimit,"gasLimit"),t.to||$c,Ks(t.value,"value"),t.data,Qee(t.accessList||[]),Ks(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Z0t(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(Ks(e.yParity,"yParity")),r.push(xo(e.r)),r.push(xo(e.s)),n)?Qr(["0x03",C2([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Qr(["0x03",C2(r)])}var zh,y6,w6,b6,v6,x6,E6,A6,S6,I6,C6,T6,vx,iw,sg,aw,N6,k_;const Wp=class Wp{constructor(){Le(this,N6);Le(this,zh);Le(this,y6);Le(this,w6);Le(this,b6);Le(this,v6);Le(this,x6);Le(this,E6);Le(this,A6);Le(this,S6);Le(this,I6);Le(this,C6);Le(this,T6);Le(this,vx);Le(this,iw);Le(this,sg);Le(this,aw);we(this,zh,null),we(this,y6,null),we(this,b6,0),we(this,v6,Fa),we(this,x6,null),we(this,E6,null),we(this,A6,null),we(this,w6,"0x"),we(this,S6,Fa),we(this,I6,Fa),we(this,C6,null),we(this,T6,null),we(this,vx,null),we(this,iw,null),we(this,aw,null),we(this,sg,null)}get type(){return Y(this,zh)}set type(e){switch(e){case null:we(this,zh,null);break;case 0:case"legacy":we(this,zh,0);break;case 1:case"berlin":case"eip-2930":we(this,zh,1);break;case 2:case"london":case"eip-1559":we(this,zh,2);break;case 3:case"cancun":case"eip-4844":we(this,zh,3);break;default:Se(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const e=Y(this,y6);return e==null&&this.type===3?$c:e}set to(e){we(this,y6,e==null?null:Fn(e))}get nonce(){return Y(this,b6)}set nonce(e){we(this,b6,er(e,"value"))}get gasLimit(){return Y(this,v6)}set gasLimit(e){we(this,v6,Yt(e))}get gasPrice(){const e=Y(this,x6);return e==null&&(this.type===0||this.type===1)?Fa:e}set gasPrice(e){we(this,x6,e==null?null:Yt(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=Y(this,E6);return e??(this.type===2||this.type===3?Fa:null)}set maxPriorityFeePerGas(e){we(this,E6,e==null?null:Yt(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=Y(this,A6);return e??(this.type===2||this.type===3?Fa:null)}set maxFeePerGas(e){we(this,A6,e==null?null:Yt(e,"maxFeePerGas"))}get data(){return Y(this,w6)}set data(e){we(this,w6,Ke(e))}get value(){return Y(this,S6)}set value(e){we(this,S6,Yt(e,"value"))}get chainId(){return Y(this,I6)}set chainId(e){we(this,I6,Yt(e))}get signature(){return Y(this,C6)||null}set signature(e){we(this,C6,e==null?null:Jg.from(e))}get accessList(){const e=Y(this,T6)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){we(this,T6,e==null?null:Y2(e))}get maxFeePerBlobGas(){const e=Y(this,vx);return e==null&&this.type===3?Fa:e}set maxFeePerBlobGas(e){we(this,vx,e==null?null:Yt(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=Y(this,iw);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Se(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)Se(rs(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}we(this,iw,e)}get blobs(){return Y(this,aw)==null?null:Y(this,aw).map(e=>Object.assign({},e))}set blobs(e){if(e==null){we(this,aw,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(zg(i)){Ye(Y(this,sg),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let a=et(i);if(Se(a.length<=zH,"blob is too large",`blobs[${s}]`,i),a.length!==zH){const l=new Uint8Array(zH);l.set(a),a=l}const o=Y(this,sg).blobToKzgCommitment(a),c=Ke(Y(this,sg).computeBlobKzgProof(a,o));n.push({data:Ke(a),commitment:Ke(o),proof:c}),r.push(Vue(1,o))}else{const a=Ke(i.commitment);n.push({data:Ke(i.data),commitment:a,proof:Ke(i.proof)}),r.push(Vue(1,a))}}we(this,aw,n),we(this,iw,r)}get kzg(){return Y(this,sg)}set kzg(e){we(this,sg,e)}get hash(){return this.signature==null?null:yr(Fe(this,N6,k_).call(this,!0,!1))}get unsignedHash(){return yr(this.unsignedSerialized)}get from(){return this.signature==null?null:KM(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:tb.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return Fe(this,N6,k_).call(this,!0,!0)}get unsignedSerialized(){return Fe(this,N6,k_).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=Y(this,vx)!=null||Y(this,iw);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Ye(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Ye(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Ye(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Wp.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Wp;if(typeof e=="string"){const r=et(e);if(r[0]>=127)return Wp.from(X0t(r));switch(r[0]){case 1:return Wp.from(rpt(r));case 2:return Wp.from(tpt(r));case 3:return Wp.from(ipt(r))}Ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Wp;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=Jg.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(Se(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Se(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Se(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Se(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};zh=new WeakMap,y6=new WeakMap,w6=new WeakMap,b6=new WeakMap,v6=new WeakMap,x6=new WeakMap,E6=new WeakMap,A6=new WeakMap,S6=new WeakMap,I6=new WeakMap,C6=new WeakMap,T6=new WeakMap,vx=new WeakMap,iw=new WeakMap,sg=new WeakMap,aw=new WeakMap,N6=new WeakSet,k_=function(e,n){Ye(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return ept(this,r);case 1:return spt(this,r);case 2:return npt(this,r);case 3:return apt(this,r,n?this.blobs:null)}Ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Uk=Wp;function EU(t){return typeof t=="string"&&(t=aa(t)),yr(Qr([aa(v5e),aa(String(t.length)),t]))}function opt(t,e){const n=EU(t);return KM(n,e)}const cpt=new RegExp("^bytes([0-9]+)$"),lpt=new RegExp("^(u?int)([0-9]*)$"),upt=new RegExp("^(.*)\\[([0-9]*)\\]$");function G5e(t,e,n){switch(t){case"address":return et(n?th(e,32):Fn(e));case"string":return aa(e);case"bytes":return et(e);case"bool":return e=e?"0x01":"0x00",et(n?th(e,32):e)}let r=t.match(lpt);if(r){let s=r[1]==="int",i=parseInt(r[2]||"256");return Se((!r[2]||r[2]===String(i))&&i%8===0&&i!==0&&i<=256,"invalid number type","type",t),n&&(i=256),s&&(e=_ee(e,i)),et(th(xo(e),i/8))}if(r=t.match(cpt),r){const s=parseInt(r[1]);return Se(String(s)===r[1]&&s!==0&&s<=32,"invalid bytes type","type",t),Se(Yx(e)===s,`invalid value for ${t}`,"value",e),n?et(h6e(e,32)):e}if(r=t.match(upt),r&&Array.isArray(e)){const s=r[1],i=parseInt(r[2]||String(e.length));Se(i===e.length,`invalid array length for ${t}`,"value",e);const a=[];return e.forEach(function(o){a.push(G5e(s,o,!0))}),et(Qr(a))}Se(!1,"invalid type","type",t)}function kr(t,e){Se(t.length===e.length,"wrong number of values; expected ${ types.length }","values",e);const n=[];return t.forEach(function(r,s){n.push(G5e(r,e[s]))}),Ke(Qr(n))}function Zx(t,e){return yr(kr(t,e))}const W5e=new Uint8Array(32);W5e.fill(0);const fpt=BigInt(-1),z5e=BigInt(0),J5e=BigInt(1),dpt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hpt(t){const e=et(t),n=e.length%32;return n?Qr([e,W5e.slice(n)]):Ke(e)}const ppt=Mf(J5e,32),gpt=Mf(z5e,32),$ue={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},JH=["name","version","chainId","verifyingContract","salt"];function jue(t){return function(e){return Se(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const mpt={name:jue("name"),version:jue("version"),chainId:function(t){const e=Yt(t,"domain.chainId");return Se(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Kd(e)},verifyingContract:function(t){try{return Fn(t).toLowerCase()}catch{}Se(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=et(t,"domain.salt");return Se(e.length===32,'invalid domain value "salt"',"domain.salt",t),Ke(e)}};function YH(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);Se(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=Xv(dpt,n?r-1:r),i=n?(s+J5e)*fpt:z5e;return function(a){const o=Yt(a,"value");return Se(o>=i&&o<=s,`value out-of-bounds for ${t}`,"value",o),Mf(n?_ee(o,256):o,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return Se(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=et(r);return Se(s.length===n,`invalid length for ${t}`,"value",r),hpt(r)}}}switch(t){case"address":return function(e){return th(Fn(e),32)};case"bool":return function(e){return e?ppt:gpt};case"bytes":return function(e){return yr(e)};case"string":return function(e){return Tl(e)}}return null}function Hue(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function JO(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var r7,ig,k6,kD,Y5e;const cf=class cf{constructor(e){Le(this,kD);q(this,"primaryType");Le(this,r7);Le(this,ig);Le(this,k6);we(this,ig,new Map),we(this,k6,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:f,index:d}=JO(u);return f==="int"&&!e.int&&(f="int256"),f==="uint"&&!e.uint&&(f="uint256"),{name:l,type:f+(d||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),we(this,r7,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){Se(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const f=JO(u.type).base;Se(f!==c,`circular type reference to ${JSON.stringify(f)}`,"types",e),!YH(f)&&(Se(r.has(f),`unknown type ${JSON.stringify(f)}`,"types",e),r.get(f).push(c),n.get(c).add(f))}}const a=Array.from(r.keys()).filter(c=>r.get(c).length===0);Se(a.length!==0,"missing primary type","types",e),Se(a.length===1,`ambiguous primary types or unused types: ${a.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),tn(this,{primaryType:a[0]});function o(c,l){Se(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){o(u,l);for(const f of l)s.get(f).add(u)}l.delete(c)}o(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),Y(this,ig).set(c,Hue(c,i[c])+u.map(f=>Hue(f,i[f])).join(""))}}get types(){return JSON.parse(Y(this,r7))}getEncoder(e){let n=Y(this,k6).get(e);return n||(n=Fe(this,kD,Y5e).call(this,e),Y(this,k6).set(e,n)),n}encodeType(e){const n=Y(this,ig).get(e);return Se(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return yr(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(YH(e))return r(e,n);const s=JO(e).array;if(s)return Se(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(a=>this._visit(s.prefix,a,r));const i=this.types[e];if(i)return i.reduce((a,{name:o,type:c})=>(a[o]=this._visit(c,n[o],r),a),{});Se(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new cf(e)}static getPrimaryType(e){return cf.from(e).primaryType}static hashStruct(e,n,r){return cf.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=$ue[r];Se(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>JH.indexOf(r.name)-JH.indexOf(s.name)),cf.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Qr(["0x1901",cf.hashDomain(e),cf.from(n).hash(r)])}static hash(e,n,r){return yr(cf.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const o in e)e[o]==null&&delete e[o];const i={};e.verifyingContract&&!rs(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const a=cf.from(n);a.visit(r,(o,c)=>(o==="address"&&!rs(c,20)&&(i[c]="0x"),c));for(const o in i)i[o]=await s(o);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=a.visit(r,(o,c)=>o==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){cf.hashDomain(e);const s={},i=[];JH.forEach(c=>{const l=e[c];l!=null&&(s[c]=mpt[c](l),i.push({name:c,type:$ue[c]}))});const a=cf.from(n);n=a.types;const o=Object.assign({},n);return Se(o.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),o.EIP712Domain=i,a.encode(r),{types:o,domain:s,primaryType:a.primaryType,message:a.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Ke(et(l));if(c.match(/^u?int/))return Yt(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return Se(typeof l=="string","invalid string","value",l),l}Se(!1,"unsupported type","type",c)})}}};r7=new WeakMap,ig=new WeakMap,k6=new WeakMap,kD=new WeakSet,Y5e=function(e){{const s=YH(e);if(s)return s}const n=JO(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return a=>{Se(n.count===-1||n.count===a.length,`array length mismatch; expected length ${n.count}`,"value",a);let o=a.map(i);return Y(this,ig).has(s)&&(o=o.map(yr)),yr(Qr(o))}}const r=this.types[e];if(r){const s=Tl(Y(this,ig).get(e));return i=>{const a=r.map(({name:o,type:c})=>{const l=this.getEncoder(c)(i[o]);return Y(this,ig).has(c)?yr(l):l});return a.unshift(s),Qr(a)}}Se(!1,`unknown type: ${e}`,"type",e)};let mb=cf;function Dc(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const ypt="external public payable override",wpt=Dc(ypt.split(" ")),Q5e="constant external internal payable private public pure view override",bpt=Dc(Q5e.split(" ")),Z5e="constructor error event fallback function receive struct",X5e=Dc(Z5e.split(" ")),e4e="calldata memory storage payable indexed",vpt=Dc(e4e.split(" ")),xpt="tuple returns",Ept=[Z5e,e4e,xpt,Q5e].join(" "),Apt=Dc(Ept.split(" ")),Spt={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Ipt=new RegExp("^(\\s*)"),Cpt=new RegExp("^([0-9]+)"),Tpt=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),t4e=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),n4e=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var uo,Pd,s7,nJ;const PD=class PD{constructor(e){Le(this,s7);Le(this,uo);Le(this,Pd);we(this,uo,0),we(this,Pd,e.slice())}get offset(){return Y(this,uo)}get length(){return Y(this,Pd).length-Y(this,uo)}clone(){return new PD(Y(this,Pd))}reset(){we(this,uo,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=Fe(this,s7,nJ).call(this,Y(this,uo)+1,e.match+1);return we(this,uo,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;Y(this,uo)<e.match-1;){const r=this.peek().linkNext;n.push(Fe(this,s7,nJ).call(this,Y(this,uo)+1,r)),we(this,uo,r)}return we(this,uo,e.match+1),n}peek(){if(Y(this,uo)>=Y(this,Pd).length)throw new Error("out-of-bounds");return Y(this,Pd)[Y(this,uo)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return _E(this,uo)._++,e}toString(){const e=[];for(let n=Y(this,uo);n<Y(this,Pd).length;n++){const r=Y(this,Pd)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};uo=new WeakMap,Pd=new WeakMap,s7=new WeakSet,nJ=function(e=0,n=0){return new PD(Y(this,Pd).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let lh=PD;function Lb(t){const e=[],n=a=>{const o=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${o} at ${i}: ${a}`)};let r=[],s=[],i=0;for(;i<t.length;){let a=t.substring(i),o=a.match(Ipt);o&&(i+=o[1].length,a=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=Spt[a[0]]||"";if(l){if(c.type=l,c.text=a[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;u=f+u,e[e.length-1].value=er(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(o=a.match(Tpt),o){if(c.text=o[1],i+=c.text.length,Apt.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(n4e)){c.type="TYPE";continue}c.type="ID";continue}if(o=a.match(Cpt),o){c.text=o[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${i}`)}return new lh(e.map(a=>Object.freeze(a)))}function que(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function AU(t,e){if(e.peekKeyword(X5e)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function Yg(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function r4e(t){let e=Yg(t,bpt);return que(e,Dc("constant payable nonpayable".split(" "))),que(e,Dc("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Dg(t,e){return t.popParams().map(n=>Io.from(n,e))}function s4e(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Yt(t.pop().text);throw new Error("invalid gas")}return null}function T2(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const Npt=new RegExp(/^(.*)\[([0-9]*)\]$/);function Kue(t){const e=t.match(n4e);if(Se(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);Se(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);Se(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const ai={},Nl=Symbol.for("_ethers_internal"),Gue="_ParamTypeInternal",Wue="_ErrorInternal",zue="_EventInternal",Jue="_ConstructorInternal",Yue="_FallbackInternal",Que="_FunctionInternal",Zue="_StructInternal";var P6,P_;const lf=class lf{constructor(e,n,r,s,i,a,o,c){Le(this,P6);q(this,"name");q(this,"type");q(this,"baseType");q(this,"indexed");q(this,"components");q(this,"arrayLength");q(this,"arrayChildren");if(Mb(e,ai,"ParamType"),Object.defineProperty(this,Nl,{value:Gue}),a&&(a=Object.freeze(a.slice())),s==="array"){if(o==null||c==null)throw new Error("")}else if(o!=null||c!=null)throw new Error("");if(s==="tuple"){if(a==null)throw new Error("")}else if(a!=null)throw new Error("");tn(this,{name:n,type:r,baseType:s,indexed:i,components:a,arrayLength:o,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return Fe(this,P6,P_).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(lf.isParamType(e))return e;if(typeof e=="string")try{return lf.from(Lb(e),n)}catch{Se(!1,"invalid param type","obj",e)}else if(e instanceof lh){let o="",c="",l=null;Yg(e,Dc(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(m=>lf.from(m)),o=`tuple(${l.map(m=>m.format()).join(",")})`):(o=Kue(e.popType("TYPE")),c=o);let u=null,f=null;for(;e.length&&e.peekType("BRACKET");){const m=e.pop();u=new lf(ai,"",o,c,null,l,f,u),f=m.value,o+=m.text,c="array",l=null}let d=null;if(Yg(e,vpt).has("indexed")){if(!n)throw new Error("");d=!0}const g=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new lf(ai,g,o,c,d,l,f,u)}const r=e.name;Se(!r||typeof r=="string"&&r.match(t4e),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(Se(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,a=i.match(Npt);if(a){const o=parseInt(a[2]||"-1"),c=lf.from({type:a[1],components:e.components});return new lf(ai,r||"",i,"array",s,null,o,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const o=e.components!=null?e.components.map(l=>lf.from(l)):null;return new lf(ai,r||"",i,"tuple",s,o,null,null)}return i=Kue(e.type),new lf(ai,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[Nl]===Gue}};P6=new WeakSet,P_=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const a=this.arrayChildren,o=n.slice();o.forEach((c,l)=>{var u;Fe(u=a,P6,P_).call(u,e,c,r,f=>{o[l]=f})}),s(o);return}if(this.isTuple()){const a=this.components;let o;if(Array.isArray(n))o=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");o=a.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(o.length!==this.components.length)throw new Error("array is wrong length");o.forEach((c,l)=>{var u;Fe(u=a[l],P6,P_).call(u,e,c,r,f=>{o[l]=f})}),s(o);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let Io=lf;class N2{constructor(e,n,r){q(this,"type");q(this,"inputs");Mb(e,ai,"Fragment"),r=Object.freeze(r.slice()),tn(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{N2.from(JSON.parse(e))}catch{}return N2.from(Lb(e))}if(e instanceof lh)switch(e.peekKeyword(X5e)){case"constructor":return Ig.from(e);case"error":return yl.from(e);case"event":return a0.from(e);case"fallback":case"receive":return Zp.from(e);case"function":return o0.from(e);case"struct":return Xx.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Ig.from(e);case"error":return yl.from(e);case"event":return a0.from(e);case"fallback":case"receive":return Zp.from(e);case"function":return o0.from(e);case"struct":return Xx.from(e)}Ye(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Se(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Ig.isFragment(e)}static isError(e){return yl.isFragment(e)}static isEvent(e){return a0.isFragment(e)}static isFunction(e){return o0.isFragment(e)}static isStruct(e){return Xx.isFragment(e)}}class SU extends N2{constructor(n,r,s,i){super(n,r,i);q(this,"name");Se(typeof s=="string"&&s.match(t4e),"invalid identifier","name",s),i=Object.freeze(i.slice()),tn(this,{name:s})}}function Fk(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class yl extends SU{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,Nl,{value:Wue})}get selector(){return Tl(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+Fk(e,this.inputs)),n.join(" ")}static from(e){if(yl.isFragment(e))return e;if(typeof e=="string")return yl.from(Lb(e));if(e instanceof lh){const n=AU("error",e),r=Dg(e);return T2(e),new yl(ai,n,r)}return new yl(ai,e.name,e.inputs?e.inputs.map(Io.from):[])}static isFragment(e){return e&&e[Nl]===Wue}}class a0 extends SU{constructor(n,r,s,i){super(n,"event",r,s);q(this,"anonymous");Object.defineProperty(this,Nl,{value:zue}),tn(this,{anonymous:i})}get topicHash(){return Tl(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+Fk(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>Io.from(i)),new a0(ai,n,r,!1).topicHash}static from(n){if(a0.isFragment(n))return n;if(typeof n=="string")try{return a0.from(Lb(n))}catch{Se(!1,"invalid event fragment","obj",n)}else if(n instanceof lh){const r=AU("event",n),s=Dg(n,!0),i=!!Yg(n,Dc(["anonymous"])).has("anonymous");return T2(n),new a0(ai,r,s,i)}return new a0(ai,n.name,n.inputs?n.inputs.map(r=>Io.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[Nl]===zue}}class Ig extends N2{constructor(n,r,s,i,a){super(n,r,s);q(this,"payable");q(this,"gas");Object.defineProperty(this,Nl,{value:Jue}),tn(this,{payable:i,gas:a})}format(n){if(Ye(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${Fk(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Ig.isFragment(n))return n;if(typeof n=="string")try{return Ig.from(Lb(n))}catch{Se(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof lh){Yg(n,Dc(["constructor"]));const r=Dg(n),s=!!Yg(n,wpt).has("payable"),i=s4e(n);return T2(n),new Ig(ai,"constructor",r,s,i)}return new Ig(ai,"constructor",n.inputs?n.inputs.map(Io.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Nl]===Jue}}class Zp extends N2{constructor(n,r,s){super(n,"fallback",r);q(this,"payable");Object.defineProperty(this,Nl,{value:Yue}),tn(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Zp.isFragment(n))return n;if(typeof n=="string")try{return Zp.from(Lb(n))}catch{Se(!1,"invalid fallback fragment","obj",n)}else if(n instanceof lh){const r=n.toString(),s=n.peekKeyword(Dc(["fallback","receive"]));if(Se(s,"type must be fallback or receive","obj",r),n.popKeyword(Dc(["fallback","receive"]))==="receive"){const c=Dg(n);return Se(c.length===0,"receive cannot have arguments","obj.inputs",c),Yg(n,Dc(["payable"])),T2(n),new Zp(ai,[],!0)}let a=Dg(n);a.length?Se(a.length===1&&a[0].type==="bytes","invalid fallback inputs","obj.inputs",a.map(c=>c.format("minimal")).join(", ")):a=[Io.from("bytes")];const o=r4e(n);if(Se(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),Yg(n,Dc(["returns"])).has("returns")){const c=Dg(n);Se(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return T2(n),new Zp(ai,a,o==="payable")}if(n.type==="receive")return new Zp(ai,[],!0);if(n.type==="fallback"){const r=[Io.from("bytes")],s=n.stateMutability==="payable";return new Zp(ai,r,s)}Se(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[Nl]===Yue}}class o0 extends SU{constructor(n,r,s,i,a,o){super(n,"function",r,i);q(this,"constant");q(this,"outputs");q(this,"stateMutability");q(this,"payable");q(this,"gas");Object.defineProperty(this,Nl,{value:Que}),a=Object.freeze(a.slice()),tn(this,{constant:s==="view"||s==="pure",gas:o,outputs:a,payable:s==="payable",stateMutability:s})}get selector(){return Tl(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+Fk(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(Fk(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>Io.from(i)),new o0(ai,n,"view",r,[],null).selector}static from(n){if(o0.isFragment(n))return n;if(typeof n=="string")try{return o0.from(Lb(n))}catch{Se(!1,"invalid function fragment","obj",n)}else if(n instanceof lh){const s=AU("function",n),i=Dg(n),a=r4e(n);let o=[];Yg(n,Dc(["returns"])).has("returns")&&(o=Dg(n));const c=s4e(n);return T2(n),new o0(ai,s,a,i,o,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new o0(ai,n.name,r,n.inputs?n.inputs.map(Io.from):[],n.outputs?n.outputs.map(Io.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Nl]===Que}}class Xx extends SU{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,Nl,{value:Zue})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Xx.from(Lb(e))}catch{Se(!1,"invalid struct fragment","obj",e)}else if(e instanceof lh){const n=AU("struct",e),r=Dg(e);return T2(e),new Xx(ai,n,r)}return new Xx(ai,e.name,e.inputs?e.inputs.map(Io.from):[])}static isFragment(e){return e&&e[Nl]===Zue}}const gh=new Map;gh.set(0,"GENERIC_PANIC");gh.set(1,"ASSERT_FALSE");gh.set(17,"OVERFLOW");gh.set(18,"DIVIDE_BY_ZERO");gh.set(33,"ENUM_RANGE_ERROR");gh.set(34,"BAD_STORAGE_DATA");gh.set(49,"STACK_UNDERFLOW");gh.set(50,"ARRAY_RANGE_ERROR");gh.set(65,"OUT_OF_MEMORY");gh.set(81,"UNINITIALIZED_FUNCTION_CALL");const kpt=new RegExp(/^bytes([0-9]*)$/),Ppt=new RegExp(/^(u?int)([0-9]*)$/);let QH=null,Xue=1024;function Opt(t,e,n,r){let s="missing revert data",i=null;const a=null;let o=null;if(n){s="execution reverted";const l=et(n);if(n=Ke(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Ke(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Ke(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${gh.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?Fn(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Fn(e.from)),gi(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:a,revert:o})}var ow,OS;const OD=class OD{constructor(){Le(this,ow)}getDefaultValue(e){const n=e.map(s=>Fe(this,ow,OS).call(this,Io.from(s)));return new zO(n,"_").defaultValue()}encode(e,n){l6e(n.length,e.length,"types/values length mismatch");const r=e.map(a=>Fe(this,ow,OS).call(this,Io.from(a))),s=new zO(r,"_"),i=new jz;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(a=>Fe(this,ow,OS).call(this,Io.from(a)));return new zO(s,"_").decode(new Hz(n,r,Xue))}static _setDefaultMaxInflation(e){Se(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),Xue=e}static defaultAbiCoder(){return QH==null&&(QH=new OD),QH}static getBuiltinCallException(e,n,r){return Opt(e,n,r,OD.defaultAbiCoder())}};ow=new WeakSet,OS=function(e){if(e.isArray())return new Zht(Fe(this,ow,OS).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new zO(e.components.map(r=>Fe(this,ow,OS).call(this,r)),e.name);switch(e.baseType){case"address":return new Yht(e.name);case"bool":return new Xht(e.name);case"string":return new c0t(e.name);case"bytes":return new e0t(e.name);case"":return new r0t(e.name)}let n=e.type.match(Ppt);if(n){let r=parseInt(n[2]||"256");return Se(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new o0t(r/8,n[1]==="int",e.name)}if(n=e.type.match(kpt),n){let r=parseInt(n[1]);return Se(r!==0&&r<=32,"invalid bytes length","param",e),new t0t(r,e.name)}Se(!1,"invalid type","type",e.type)};let uc=OD;class Rpt{constructor(e,n,r){q(this,"fragment");q(this,"name");q(this,"signature");q(this,"topic");q(this,"args");const s=e.name,i=e.format();tn(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class _pt{constructor(e,n,r,s){q(this,"fragment");q(this,"name");q(this,"args");q(this,"signature");q(this,"selector");q(this,"value");const i=e.name,a=e.format();tn(this,{fragment:e,name:i,args:r,signature:a,selector:n,value:s})}}class Bpt{constructor(e,n,r){q(this,"fragment");q(this,"name");q(this,"args");q(this,"signature");q(this,"selector");const s=e.name,i=e.format();tn(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class efe{constructor(e){q(this,"hash");q(this,"_isIndexed");tn(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const tfe={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},nfe={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&tfe[t.toString()]&&(e=tfe[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var Jh,Yh,Qh,Yo,k0,O_,R_;const Fv=class Fv{constructor(e){Le(this,k0);q(this,"fragments");q(this,"deploy");q(this,"fallback");q(this,"receive");Le(this,Jh);Le(this,Yh);Le(this,Qh);Le(this,Yo);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,we(this,Qh,new Map),we(this,Jh,new Map),we(this,Yh,new Map);const r=[];for(const a of n)try{r.push(N2.from(a))}catch(o){console.log(`[Warning] Invalid Fragment ${JSON.stringify(a)}:`,o.message)}tn(this,{fragments:Object.freeze(r)});let s=null,i=!1;we(this,Yo,this.getAbiCoder()),this.fragments.forEach((a,o)=>{let c;switch(a.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}tn(this,{deploy:a});return;case"fallback":a.inputs.length===0?i=!0:(Se(!s||a.payable!==s.payable,"conflicting fallback fragments",`fragments[${o}]`,a),s=a,i=s.payable);return;case"function":c=Y(this,Qh);break;case"event":c=Y(this,Yh);break;case"error":c=Y(this,Jh);break;default:return}const l=a.format();c.has(l)||c.set(l,a)}),this.deploy||tn(this,{deploy:Ig.from("constructor()")}),tn(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return uc.defaultAbiCoder()}getFunctionName(e){const n=Fe(this,k0,O_).call(this,e,null,!1);return Se(n,"no matching function","key",e),n.name}hasFunction(e){return!!Fe(this,k0,O_).call(this,e,null,!1)}getFunction(e,n){return Fe(this,k0,O_).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(Y(this,Qh).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(Y(this,Qh).get(s),r)}}getEventName(e){const n=Fe(this,k0,R_).call(this,e,null,!1);return Se(n,"no matching event","key",e),n.name}hasEvent(e){return!!Fe(this,k0,R_).call(this,e,null,!1)}getEvent(e,n){return Fe(this,k0,R_).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(Y(this,Yh).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(Y(this,Yh).get(s),r)}}getError(e,n){if(rs(e)){const s=e.toLowerCase();if(nfe[s])return yl.from(nfe[s].signature);for(const i of Y(this,Jh).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,a]of Y(this,Jh))i.split("(")[0]===e&&s.push(a);if(s.length===0)return e==="Error"?yl.from("error Error(string)"):e==="Panic"?yl.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(a=>JSON.stringify(a.format())).join(", ");Se(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=yl.from(e).format(),e==="Error(string)")return yl.from("error Error(string)");if(e==="Panic(uint256)")return yl.from("error Panic(uint256)");const r=Y(this,Jh).get(e);return r||null}forEachError(e){const n=Array.from(Y(this,Jh).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(Y(this,Jh).get(s),r)}}_decodeParams(e,n){return Y(this,Yo).decode(e,n)}_encodeParams(e,n){return Y(this,Yo).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Se(r,"unknown error","fragment",e),e=r}return Se(_s(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,_s(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Se(r,"unknown error","fragment",e),e=r}return Qr([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Se(r,"unknown function","fragment",e),e=r}return Se(_s(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,_s(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Se(r,"unknown function","fragment",e),e=r}return Qr([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);Se(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=vo(n);if(s.length%32===0)try{return Y(this,Yo).decode(e.outputs,s)}catch{r="could not decode result data"}Ye(!1,r,"BAD_DATA",{value:Ke(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=et(e,"data"),s=uc.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const o=Ke(r.slice(0,4)),c=this.getError(o);if(c)try{const l=Y(this,Yo).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const a=this.parseTransaction(n);return a&&(s.invocation={method:a.name,signature:a.signature,args:a.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);Se(r,"unknown function","fragment",e),e=r}return Ke(Y(this,Yo).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);Se(i,"unknown event","eventFragment",e),e=i}Ye(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,a)=>i.type==="string"?Tl(a):i.type==="bytes"?yr(Ke(a)):(i.type==="bool"&&typeof a=="boolean"?a=a?"0x01":"0x00":i.type.match(/^u?int/)?a=Mf(a):i.type.match(/^bytes/)?a=h6e(a,32):i.type==="address"&&Y(this,Yo).encode(["address"],[a]),th(Ke(a),32));for(n.forEach((i,a)=>{const o=e.inputs[a];if(!o.indexed){Se(i==null,"cannot filter non-indexed parameters; must be null","contract."+o.name,i);return}i==null?r.push(null):o.baseType==="array"||o.baseType==="tuple"?Se(!1,"filtering with tuples or arrays not supported","contract."+o.name,i):Array.isArray(i)?r.push(i.map(c=>s(o,c))):r.push(s(o,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const a=this.getEvent(e);Se(a,"unknown event","eventFragment",e),e=a}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),Se(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((a,o)=>{const c=n[o];if(a.indexed)if(a.type==="string")r.push(Tl(c));else if(a.type==="bytes")r.push(yr(c));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");r.push(Y(this,Yo).encode([a.type],[c]))}else s.push(a),i.push(c)}),{data:Y(this,Yo).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const p=this.getEvent(e);Se(p,"unknown event","eventFragment",e),e=p}if(r!=null&&!e.anonymous){const p=e.topicHash;Se(rs(r[0],32)&&r[0].toLowerCase()===p,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],a=[];e.inputs.forEach((p,g)=>{p.indexed?p.type==="string"||p.type==="bytes"||p.baseType==="tuple"||p.baseType==="array"?(s.push(Io.from({type:"bytes32",name:p.name})),a.push(!0)):(s.push(p),a.push(!1)):(i.push(p),a.push(!1))});const o=r!=null?Y(this,Yo).decode(s,Qr(r)):null,c=Y(this,Yo).decode(i,n,!0),l=[],u=[];let f=0,d=0;return e.inputs.forEach((p,g)=>{let m=null;if(p.indexed)if(o==null)m=new efe(null);else if(a[g])m=new efe(o[d++]);else try{m=o[d++]}catch(v){m=v}else try{m=c[f++]}catch(v){m=v}l.push(m),u.push(p.name||null)}),O5.fromItems(l,u)}parseTransaction(e){const n=et(e.data,"tx.data"),r=Yt(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Ke(n.slice(0,4)));if(!s)return null;const i=Y(this,Yo).decode(s.inputs,n.slice(4));return new _pt(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new Rpt(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Ke(e),r=this.getError(_s(n,0,4));if(!r)return null;const s=Y(this,Yo).decode(r.inputs,_s(n,4));return new Bpt(r,r.selector,s)}static from(e){return e instanceof Fv?e:typeof e=="string"?new Fv(JSON.parse(e)):typeof e.formatJson=="function"?new Fv(e.formatJson()):typeof e.format=="function"?new Fv(e.format("json")):new Fv(e)}};Jh=new WeakMap,Yh=new WeakMap,Qh=new WeakMap,Yo=new WeakMap,k0=new WeakSet,O_=function(e,n,r){if(rs(e)){const i=e.toLowerCase();for(const a of Y(this,Qh).values())if(i===a.selector)return a;return null}if(e.indexOf("(")===-1){const i=[];for(const[a,o]of Y(this,Qh))a.split("(")[0]===e&&i.push(o);if(n){const a=n.length>0?n[n.length-1]:null;let o=n.length,c=!0;ac.isTyped(a)&&a.type==="overrides"&&(c=!1,o--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==o&&(!c||u!==o-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let f=0;f<n.length;f++)if(ac.isTyped(n[f])){if(f>=u.length){if(n[f].type==="overrides")continue;i.splice(l,1);break}if(n[f].type!==u[f].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const a=n[n.length-1];(a==null||Array.isArray(a)||typeof a!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const a=i.map(o=>JSON.stringify(o.format())).join(", ");Se(!1,`ambiguous function description (i.e. matches ${a})`,"key",e)}return i[0]}const s=Y(this,Qh).get(o0.from(e).format());return s||null},R_=function(e,n,r){if(rs(e)){const i=e.toLowerCase();for(const a of Y(this,Yh).values())if(i===a.topicHash)return a;return null}if(e.indexOf("(")===-1){const i=[];for(const[a,o]of Y(this,Yh))a.split("(")[0]===e&&i.push(o);if(n){for(let a=i.length-1;a>=0;a--)i[a].inputs.length<n.length&&i.splice(a,1);for(let a=i.length-1;a>=0;a--){const o=i[a].inputs;for(let c=0;c<n.length;c++)if(ac.isTyped(n[c])&&n[c].type!==o[c].baseType){i.splice(a,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const a=i.map(o=>JSON.stringify(o.format())).join(", ");Se(!1,`ambiguous event description (i.e. matches ${a})`,"key",e)}return i[0]}const s=Y(this,Yh).get(a0.from(e).format());return s||null};let Ya=Fv;const i4e=BigInt(0);function W3(t){return t??null}function Fi(t){return t==null?null:t.toString()}class rfe{constructor(e,n,r){q(this,"gasPrice");q(this,"maxFeePerGas");q(this,"maxPriorityFeePerGas");tn(this,{gasPrice:W3(e),maxFeePerGas:W3(n),maxPriorityFeePerGas:W3(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Fi(e),maxFeePerGas:Fi(n),maxPriorityFeePerGas:Fi(r)}}}function Vk(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Ke(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Yt(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=er(t[s],`request.${s}`));return t.accessList&&(e.accessList=Y2(t.accessList)),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>zg(s)?Ke(s):Object.assign({},s))),e}var ag;class Mpt{constructor(e,n){q(this,"provider");q(this,"number");q(this,"hash");q(this,"timestamp");q(this,"parentHash");q(this,"parentBeaconBlockRoot");q(this,"nonce");q(this,"difficulty");q(this,"gasLimit");q(this,"gasUsed");q(this,"stateRoot");q(this,"receiptsRoot");q(this,"blobGasUsed");q(this,"excessBlobGas");q(this,"miner");q(this,"prevRandao");q(this,"extraData");q(this,"baseFeePerGas");Le(this,ag);we(this,ag,e.transactions.map(r=>typeof r!="string"?new $k(r,n):r)),tn(this,{provider:n,hash:W3(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:W3(e.prevRandao),extraData:e.extraData,baseFeePerGas:W3(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return Y(this,ag).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=Y(this,ag).slice();return e.length===0?[]:(Ye(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:a,miner:o,prevRandao:c,nonce:l,number:u,parentHash:f,parentBeaconBlockRoot:d,stateRoot:p,receiptsRoot:g,timestamp:m,transactions:v}=this;return{_type:"Block",baseFeePerGas:Fi(e),difficulty:Fi(n),extraData:r,gasLimit:Fi(s),gasUsed:Fi(i),blobGasUsed:Fi(this.blobGasUsed),excessBlobGas:Fi(this.excessBlobGas),hash:a,miner:o,prevRandao:c,nonce:l,number:u,parentHash:f,timestamp:m,parentBeaconBlockRoot:d,stateRoot:p,receiptsRoot:g,transactions:v}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return Y(this,ag).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=Y(this,ag)[e];else{const r=e.toLowerCase();for(const s of Y(this,ag))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash===r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;Se(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return Dpt(this)}}ag=new WeakMap;class Q7{constructor(e,n){q(this,"provider");q(this,"transactionHash");q(this,"blockHash");q(this,"blockNumber");q(this,"removed");q(this,"address");q(this,"data");q(this,"topics");q(this,"index");q(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());tn(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:a,topics:o,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:a,topics:o,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return Ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return Ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return Ye(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return Lpt(this)}}var i7;class a4e{constructor(e,n){q(this,"provider");q(this,"to");q(this,"from");q(this,"contractAddress");q(this,"hash");q(this,"index");q(this,"blockHash");q(this,"blockNumber");q(this,"logsBloom");q(this,"gasUsed");q(this,"blobGasUsed");q(this,"cumulativeGasUsed");q(this,"gasPrice");q(this,"blobGasPrice");q(this,"type");q(this,"status");q(this,"root");Le(this,i7);we(this,i7,Object.freeze(e.logs.map(s=>new Q7(s,n))));let r=i4e;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),tn(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return Y(this,i7)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:a,blockNumber:o,logsBloom:c,logs:l,status:u,root:f}=this;return{_type:"TransactionReceipt",blockHash:a,blockNumber:o,contractAddress:r,cumulativeGasUsed:Fi(this.cumulativeGasUsed),from:n,gasPrice:Fi(this.gasPrice),blobGasUsed:Fi(this.blobGasUsed),blobGasPrice:Fi(this.blobGasPrice),gasUsed:Fi(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:f,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return c4e(this)}reorderedEvent(e){return Ye(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),o4e(this,e)}}i7=new WeakMap;var cw;const One=class One{constructor(e,n){q(this,"provider");q(this,"blockNumber");q(this,"blockHash");q(this,"index");q(this,"hash");q(this,"type");q(this,"to");q(this,"from");q(this,"nonce");q(this,"gasLimit");q(this,"gasPrice");q(this,"maxPriorityFeePerGas");q(this,"maxFeePerGas");q(this,"maxFeePerBlobGas");q(this,"data");q(this,"value");q(this,"chainId");q(this,"signature");q(this,"accessList");q(this,"blobVersionedHashes");Le(this,cw);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,we(this,cw,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:a,from:o,nonce:c,data:l,signature:u,accessList:f,blobVersionedHashes:d}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:n,blobVersionedHashes:d,chainId:Fi(this.chainId),data:l,from:o,gasLimit:Fi(this.gasLimit),gasPrice:Fi(this.gasPrice),hash:s,maxFeePerGas:Fi(this.maxFeePerGas),maxPriorityFeePerGas:Fi(this.maxPriorityFeePerGas),maxFeePerBlobGas:Fi(this.maxFeePerBlobGas),nonce:c,signature:u,to:a,index:r,type:i,value:Fi(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await Xi({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=Y(this,cw),a=-1,o=i===-1;const c=async()=>{if(o)return null;const{blockNumber:d,nonce:p}=await Xi({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(p<this.nonce){i=d;return}if(o)return null;const g=await this.getTransaction();if(!(g&&g.blockNumber!=null))for(a===-1&&(a=i-3,a<Y(this,cw)&&(a=Y(this,cw)));a<=d;){if(o)return null;const m=await this.provider.getBlock(a,!0);if(m==null)return;for(const v of m)if(v===this.hash)return;for(let v=0;v<m.length;v++){const A=await m.getTransaction(v);if(A.from===this.from&&A.nonce===this.nonce){if(o)return null;const S=await this.provider.getTransactionReceipt(A.hash);if(S==null||d-S.blockNumber+1<r)return;let I="replaced";A.data===this.data&&A.to===this.to&&A.value===this.value?I="repriced":A.data==="0x"&&A.from===A.to&&A.value===i4e&&(I="cancelled"),Ye(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:I==="replaced"||I==="cancelled",reason:I,replacement:A.replaceableTransaction(i),hash:A.hash,receipt:S})}}a++}},l=d=>{if(d==null||d.status!==0)return d;Ye(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:d.to,from:d.from,data:""},receipt:d})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((d,p)=>{const g=[],m=()=>{g.forEach(A=>A())};if(g.push(()=>{o=!0}),s>0){const A=setTimeout(()=>{m(),p(gi("wait for transaction timeout","TIMEOUT"))},s);g.push(()=>{clearTimeout(A)})}const v=async A=>{if(await A.confirmations()>=r){m();try{d(l(A))}catch(S){p(S)}}};if(g.push(()=>{this.provider.off(this.hash,v)}),this.provider.on(this.hash,v),i>=0){const A=async()=>{try{await c()}catch(S){if(Ea(S,"TRANSACTION_REPLACED")){m(),p(S);return}}o||this.provider.once("block",A)};g.push(()=>{this.provider.off("block",A)}),this.provider.once("block",A)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return Ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),c4e(this)}reorderedEvent(e){return Ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ye(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),o4e(this,e)}replaceableTransaction(e){Se(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new One(this,this.provider);return we(n,cw,e),n}};cw=new WeakMap;let $k=One;function Dpt(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function o4e(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function c4e(t){return{orphan:"drop-transaction",tx:t}}function Lpt(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class Xee extends Q7{constructor(n,r,s){super(n,n.provider);q(this,"interface");q(this,"fragment");q(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);tn(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class l4e extends Q7{constructor(n,r){super(n,n.provider);q(this,"error");tn(this,{error:r})}}var O6;class Upt extends a4e{constructor(n,r,s){super(s,r);Le(this,O6);we(this,O6,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?Y(this,O6).getEvent(n.topics[0]):null;if(r)try{return new Xee(n,Y(this,O6),r)}catch(s){return new l4e(n,s)}return n})}}O6=new WeakMap;var a7;class ete extends $k{constructor(n,r,s){super(s,r);Le(this,a7);we(this,a7,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new Upt(Y(this,a7),this.provider,s)}}a7=new WeakMap;class u4e extends g6e{constructor(n,r,s,i){super(n,r,s);q(this,"log");tn(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Fpt extends u4e{constructor(e,n,r,s,i){super(e,n,r,new Xee(i,e.interface,s));const a=e.interface.decodeEventLog(s,this.log.data,this.log.topics);tn(this,{args:a,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const sfe=BigInt(0);function f4e(t){return t&&typeof t.call=="function"}function d4e(t){return t&&typeof t.estimateGas=="function"}function IU(t){return t&&typeof t.resolveName=="function"}function h4e(t){return t&&typeof t.sendTransaction=="function"}function p4e(t){if(t!=null){if(IU(t))return t;if(t.provider)return t.provider}}var o7;class Vpt{constructor(e,n,r){Le(this,o7);q(this,"fragment");if(tn(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=k2(e.runner,"resolveName"),i=IU(s)?s:null;we(this,o7,async function(){const a=await Promise.all(n.inputs.map((o,c)=>r[c]==null?null:o.walkAsync(r[c],(u,f)=>u==="address"?Array.isArray(f)?Promise.all(f.map(d=>Eo(d,i))):Eo(f,i):f)));return e.interface.encodeFilterTopics(n,a)}())}getTopicFilter(){return Y(this,o7)}}o7=new WeakMap;function k2(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function nx(t){return t==null?null:t.provider||null}async function g4e(t,e){const n=ac.dereference(t,"overrides");Se(typeof n=="object","invalid overrides parameter","overrides",t);const r=Vk(n);return Se(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Se(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function $pt(t,e,n){const r=k2(t,"resolveName"),s=IU(r)?r:null;return await Promise.all(e.map((i,a)=>i.walkAsync(n[a],(o,c)=>(c=ac.dereference(c,o),o==="address"?Eo(c,s):c))))}function jpt(t){const e=async function(a){const o=await g4e(a,["data"]);o.to=await t.getAddress(),o.from&&(o.from=await Eo(o.from,p4e(t.runner)));const c=t.interface,l=Yt(o.value||sfe,"overrides.value")===sfe,u=(o.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&Se(!1,"cannot send data to receive or send value to non-payable fallback","overrides",a),Se(c.fallback||u,"cannot send data to receive-only contract","overrides.data",o.data);const f=c.receive||c.fallback&&c.fallback.payable;return Se(f||l,"cannot send value to non-payable fallback","overrides.value",o.value),Se(c.fallback||u,"cannot send data to receive-only contract","overrides.data",o.data),o},n=async function(a){const o=k2(t.runner,"call");Ye(f4e(o),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(a);try{return await o.call(c)}catch(l){throw Ree(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(a){const o=t.runner;Ye(h4e(o),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await o.sendTransaction(await e(a)),l=nx(t.runner);return new ete(t.interface,l,c)},s=async function(a){const o=k2(t.runner,"estimateGas");return Ye(d4e(o),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await o.estimateGas(await e(a))},i=async a=>await r(a);return tn(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function Hpt(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return Ye(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let f={};if(u.inputs.length+1===l.length&&(f=await g4e(l.pop()),f.from&&(f.from=await Eo(f.from,p4e(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const d=await $pt(t.runner,u.inputs,l);return Object.assign({},f,await Xi({to:t.getAddress(),data:t.interface.encodeFunctionData(u,d)}))},s=async function(...l){const u=await o(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;Ye(h4e(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await u.sendTransaction(await r(...l)),d=nx(t.runner);return new ete(t.interface,d,f)},a=async function(...l){const u=k2(t.runner,"estimateGas");return Ye(d4e(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},o=async function(...l){const u=k2(t.runner,"call");Ye(f4e(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await r(...l);let d="0x";try{d=await u.call(f)}catch(g){throw Ree(g)&&g.data?t.interface.makeError(g.data,f):g}const p=n(...l);return t.interface.decodeFunctionResult(p,d)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return tn(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:a,populateTransaction:r,send:i,staticCall:s,staticCallResult:o}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return Ye(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function qpt(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return Ye(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new Vpt(t,n(...s),s)};return tn(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return Ye(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const GM=Symbol.for("_ethersInternal_contract"),m4e=new WeakMap;function Kpt(t,e){m4e.set(t[GM],e)}function Jl(t){return m4e.get(t[GM])}function Gpt(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function tte(t,e){let n,r=null;if(Array.isArray(e)){const i=function(a){if(rs(a,32))return a;const o=t.interface.getEvent(a);return Se(o,"unknown fragment","name",a),o.topicHash};n=e.map(a=>a==null?null:Array.isArray(a)?a.map(i):i(a))}else e==="*"?n=[null]:typeof e=="string"?rs(e,32)?n=[e]:(r=t.interface.getEvent(e),Se(r,"unknown fragment","event",e),n=[r.topicHash]):Gpt(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):Se(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const a=Array.from(new Set(i.map(o=>o.toLowerCase())).values());return a.length===1?a[0]:(a.sort(),a)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function ET(t,e){const{subs:n}=Jl(t);return n.get((await tte(t,e)).tag)||null}async function ife(t,e,n){const r=nx(t.runner);Ye(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:a}=await tte(t,n),{addr:o,subs:c}=Jl(t);let l=c.get(i);if(!l){const f={address:o||t,topics:a},d=v=>{let A=s;if(A==null)try{A=t.interface.getEvent(v.topics[0])}catch{}if(A){const S=A,I=s?t.interface.decodeEventLog(s,v.data,v.topics):[];sJ(t,n,I,B=>new Fpt(t,B,n,S,v))}else sJ(t,n,[],S=>new u4e(t,S,n,v))};let p=[];l={tag:i,listeners:[],start:()=>{p.length||p.push(r.on(f,d))},stop:async()=>{if(p.length==0)return;let v=p;p=[],await Promise.all(v),r.off(f,d)}},c.set(i,l)}return l}let rJ=Promise.resolve();async function Wpt(t,e,n,r){await rJ;const s=await ET(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:a,once:o})=>{const c=Array.from(n);r&&c.push(r(o?null:a));try{a.call(t,...c)}catch{}return!o}),s.listeners.length===0&&(s.stop(),Jl(t).subs.delete(s.tag)),i>0}async function sJ(t,e,n,r){try{await rJ}catch{}const s=Wpt(t,e,n,r);return rJ=s,await s}const YO=["then"];var q0e;q0e=GM;const vN=class vN{constructor(e,n,r,s){q(this,"target");q(this,"interface");q(this,"runner");q(this,"filters");q(this,q0e);q(this,"fallback");Se(typeof e=="string"||x5e(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=Ya.from(n);tn(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,GM,{value:{}});let a,o=null,c=null;if(s){const f=nx(r);c=new ete(this.interface,f,s)}let l=new Map;if(typeof e=="string")if(rs(e))o=e,a=Promise.resolve(e);else{const f=k2(r,"resolveName");if(!IU(f))throw gi("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});a=f.resolveName(e).then(d=>{if(d==null)throw gi("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Jl(this).addr=d,d})}else a=e.getAddress().then(f=>{if(f==null)throw new Error("TODO");return Jl(this).addr=f,f});Kpt(this,{addrPromise:a,addr:o,deployTx:c,subs:l});const u=new Proxy({},{get:(f,d,p)=>{if(typeof d=="symbol"||YO.indexOf(d)>=0)return Reflect.get(f,d,p);try{return this.getEvent(d)}catch(g){if(!Ea(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(f,d)=>YO.indexOf(d)>=0?Reflect.has(f,d):Reflect.has(f,d)||this.interface.hasEvent(String(d))});return tn(this,{filters:u}),tn(this,{fallback:i.receive||i.fallback?jpt(this):null}),new Proxy(this,{get:(f,d,p)=>{if(typeof d=="symbol"||d in f||YO.indexOf(d)>=0)return Reflect.get(f,d,p);try{return f.getFunction(d)}catch(g){if(!Ea(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(f,d)=>typeof d=="symbol"||d in f||YO.indexOf(d)>=0?Reflect.has(f,d):f.interface.hasFunction(d)})}connect(e){return new vN(this.target,this.interface,e)}attach(e){return new vN(e,this.interface,this.runner)}async getAddress(){return await Jl(this).addrPromise}async getDeployedCode(){const e=nx(this.runner);Ye(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=nx(this.runner);return Ye(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const a=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",a)}catch(o){i(o)}};a()})}deploymentTransaction(){return Jl(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),Hpt(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),qpt(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Jl(this),a=s||await i,{fragment:o,topics:c}=await tte(this,e),l={address:a,topics:c,fromBlock:n,toBlock:r},u=nx(this.runner);return Ye(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(f=>{let d=o;if(d==null)try{d=this.interface.getEvent(f.topics[0])}catch{}if(d)try{return new Xee(f,this.interface,d)}catch(p){return new l4e(f,p)}return new Q7(f,u)})}async on(e,n){const r=await ife(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await ife(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await sJ(this,e,n,null)}async listenerCount(e){if(e){const s=await ET(this,e);return s?s.listeners.length:0}const{subs:n}=Jl(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await ET(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=Jl(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await ET(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Jl(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await ET(this,e);if(!n)return this;n.stop(),Jl(this).subs.delete(n.tag)}else{const{subs:n}=Jl(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends vN{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let iJ=vN;function zpt(){return iJ}class Si extends zpt(){}function ZH(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Se(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class Jpt{constructor(e){q(this,"name");tn(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const y4e=new RegExp("^(ipfs)://(.*)$","i"),afe=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),y4e,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var lw,xx,uw,RS,RD,w4e;const y3=class y3{constructor(e,n,r){Le(this,uw);q(this,"provider");q(this,"address");q(this,"name");Le(this,lw);Le(this,xx);tn(this,{provider:e,address:n,name:r}),we(this,lw,null),we(this,xx,new Si(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return Y(this,lw)==null&&we(this,lw,(async()=>{try{return await Y(this,xx).supportsInterface("0x9061b923")}catch(e){if(Ea(e,"CALL_EXCEPTION"))return!1;throw we(this,lw,null),e}})()),await Y(this,lw)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await Fe(this,uw,RS).call(this,"addr(bytes32)");return i==null||i===$c?null:i}catch(i){if(Ea(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const a=await Fe(this,uw,RS).call(this,"addr(bytes32,uint)",[i]);if(rs(a,20))return Fn(a)}let n=null;for(const i of this.provider.plugins)if(i instanceof Jpt&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await Fe(this,uw,RS).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;Ye(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await Fe(this,uw,RS).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await Fe(this,uw,RS).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${p6e("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;Ye(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<afe.length;r++){const s=n.match(afe[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const a=ZH(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:a}),{linkage:e,url:a}}case"erc721":case"erc1155":{const a=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const o=await this.getAddress();if(o==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new Si(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const m=await u.ownerOf(l);if(o!==m)return e.push({type:"!owner",value:m}),{url:null,linkage:e};e.push({type:"owner",value:m})}else if(i==="erc1155"){const m=await u.balanceOf(o,l);if(!m)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:m.toString()})}let f=await u[a](l);if(f==null||f==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:f}),i==="erc1155"&&(f=f.replace("{id}",Mf(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=ZH(f)),e.push({type:"metadata-url",value:f});let d={};const p=await new F0(f).send();p.assertOk();try{d=p.bodyJson}catch{try{e.push({type:"!metadata",value:p.bodyText})}catch{const A=p.body;return A&&e.push({type:"!metadata",value:Ke(A)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!d)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(d)});let g=d.image;if(typeof g!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!g.match(/^(https:\/\/|data:)/i)){if(g.match(y4e)==null)return e.push({type:"!imageUrl-ipfs",value:g}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:g}),g=ZH(g)}return e.push({type:"url",value:g}),{linkage:e,url:g}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return Ye(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await Fe(s=y3,RD,w4e).call(s,e,r);if(i!=null){const a=new y3(e,i,n);return r!==n&&!await a.supportsWildcard()?null:a}r=r.split(".").slice(1).join(".")}}};lw=new WeakMap,xx=new WeakMap,uw=new WeakSet,RS=async function(e,n){n=(n||[]).slice();const r=Y(this,xx).interface;n.unshift(tJ(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),Ye(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[G0t(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await Y(this,xx)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Ea(i,"CALL_EXCEPTION"))throw i}return null},RD=new WeakSet,w4e=async function(e,n){const r=await y3.getEnsAddress(e);try{const i=await new Si(r,["function resolver(bytes32) view returns (address)"],e).resolver(tJ(n),{enableCcipRead:!0});return i===$c?null:i}catch(s){throw s}return null},Le(y3,RD);let WM=y3;const ofe=BigInt(0);function jr(t,e){return function(n){return n==null?e:t(n)}}function CU(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function Z7(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const a of e[s])if(a in n){i=a;break}}try{const a=t[s](n[i]);a!==void 0&&(r[s]=a)}catch(a){const o=a instanceof Error?a.message:"not-an-error";Ye(!1,`invalid value for value.${s} (${o})`,"BAD_DATA",{value:n})}}return r}}function Ypt(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}Se(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function U5(t){return Se(rs(t,!0),"invalid data","value",t),t}function yo(t){return Se(rs(t,32),"invalid hash","value",t),t}const Qpt=Z7({address:Fn,blockHash:yo,blockNumber:er,data:U5,index:er,removed:jr(Ypt,!1),topics:CU(yo),transactionHash:yo,transactionIndex:er},{index:["logIndex"]});function Zpt(t){return Qpt(t)}const Xpt=Z7({hash:jr(yo),parentHash:yo,parentBeaconBlockRoot:jr(yo,null),number:er,timestamp:er,nonce:jr(U5),difficulty:Yt,gasLimit:Yt,gasUsed:Yt,stateRoot:jr(yo,null),receiptsRoot:jr(yo,null),blobGasUsed:jr(Yt,null),excessBlobGas:jr(Yt,null),miner:jr(Fn),prevRandao:jr(yo,null),extraData:U5,baseFeePerGas:jr(Yt)},{prevRandao:["mixHash"]});function egt(t){const e=Xpt(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:b4e(n)),e}const tgt=Z7({transactionIndex:er,blockNumber:er,transactionHash:yo,address:Fn,topics:CU(yo),data:U5,index:er,blockHash:yo},{index:["logIndex"]});function ngt(t){return tgt(t)}const rgt=Z7({to:jr(Fn,null),from:jr(Fn,null),contractAddress:jr(Fn,null),index:er,root:jr(Ke),gasUsed:Yt,blobGasUsed:jr(Yt,null),logsBloom:jr(U5),blockHash:yo,hash:yo,logs:CU(ngt),blockNumber:er,cumulativeGasUsed:Yt,effectiveGasPrice:jr(Yt),blobGasPrice:jr(Yt,null),status:jr(er),type:jr(er,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function sgt(t){return rgt(t)}function b4e(t){t.to&&Yt(t.to)===ofe&&(t.to="0x0000000000000000000000000000000000000000");const e=Z7({hash:yo,index:jr(er,void 0),type:n=>n==="0x"||n==null?0:er(n),accessList:jr(Y2,null),blobVersionedHashes:jr(CU(yo,!0),null),blockHash:jr(yo,null),blockNumber:jr(er,null),transactionIndex:jr(er,null),from:Fn,gasPrice:jr(Yt),maxPriorityFeePerGas:jr(Yt),maxFeePerGas:jr(Yt),maxFeePerBlobGas:jr(Yt,null),gasLimit:Yt,to:jr(Fn,null),value:Yt,nonce:er,data:U5,creates:jr(Fn,null),chainId:jr(Yt,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=Jht(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=Jg.from(t.signature):e.signature=Jg.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Yt(e.blockHash)===ofe&&(e.blockHash=null),e}const igt="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class X7{constructor(e){q(this,"name");tn(this,{name:e})}clone(){return new X7(this.name)}}class TU extends X7{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);q(this,"effectiveBlock");q(this,"txBase");q(this,"txCreate");q(this,"txDataZero");q(this,"txDataNonzero");q(this,"txAccessListStorageKey");q(this,"txAccessListAddress");const s={effectiveBlock:n};function i(a,o){let c=(r||{})[a];c==null&&(c=o),Se(typeof c=="number",`invalud value for ${a}`,"costs",r),s[a]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),tn(this,s)}clone(){return new TU(this.effectiveBlock,this)}}class NU extends X7{constructor(n,r){super("org.ethers.plugins.network.Ens");q(this,"address");q(this,"targetNetwork");tn(this,{address:n||igt,targetNetwork:r??1})}clone(){return new NU(this.address,this.targetNetwork)}}var c7,l7;class agt extends X7{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Le(this,c7);Le(this,l7);we(this,c7,n),we(this,l7,r)}get url(){return Y(this,c7)}get processFunc(){return Y(this,l7)}clone(){return this}}c7=new WeakMap,l7=new WeakMap;const XH=new Map;var R6,_6,fw;const w3=class w3{constructor(e,n){Le(this,R6);Le(this,_6);Le(this,fw);we(this,R6,e),we(this,_6,Yt(n)),we(this,fw,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return Y(this,R6)}set name(e){we(this,R6,e)}get chainId(){return Y(this,_6)}set chainId(e){we(this,_6,Yt(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Yt(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Yt(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Yt(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(Y(this,fw).values())}attachPlugin(e){if(Y(this,fw).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return Y(this,fw).set(e.name,e.clone()),this}getPlugin(e){return Y(this,fw).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new w3(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new TU;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=Y2(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(ogt(),e==null)return w3.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=XH.get(e);if(n)return n();if(typeof e=="bigint")return new w3("unknown",e);Se(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Se(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new w3(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new NU(e.ensAddress,e.ensNetwork)),n}Se(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=XH.get(e);r&&Se(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),XH.set(e,n)}};R6=new WeakMap,_6=new WeakMap,fw=new WeakMap;let wu=w3;function cfe(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function lfe(t){return new agt(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,a]=await Promise.all([r.send(),e()]);s=i;const o=s.bodyJson.standard;return{gasPrice:a.gasPrice,maxFeePerGas:cfe(o.maxFee,9),maxPriorityFeePerGas:cfe(o.maxPriorityFee,9)}}catch(i){Ye(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let ufe=!1;function ogt(){if(ufe)return;ufe=!0;function t(e,n,r){const s=function(){const i=new wu(e,n);return r.ensNetwork!=null&&i.attachPlugin(new NU(null,r.ensNetwork)),i.attachPlugin(new TU),(r.plugins||[]).forEach(a=>{i.attachPlugin(a)}),i};wu.register(e,s),wu.register(n,s),r.altNames&&r.altNames.forEach(i=>{wu.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[lfe("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[lfe("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function aJ(t){return JSON.parse(JSON.stringify(t))}var og,hf,dw,Zh,B6,__;class cgt{constructor(e){Le(this,B6);Le(this,og);Le(this,hf);Le(this,dw);Le(this,Zh);we(this,og,e),we(this,hf,null),we(this,dw,4e3),we(this,Zh,-2)}get pollingInterval(){return Y(this,dw)}set pollingInterval(e){we(this,dw,e)}start(){Y(this,hf)||(we(this,hf,Y(this,og)._setTimeout(Fe(this,B6,__).bind(this),Y(this,dw))),Fe(this,B6,__).call(this))}stop(){Y(this,hf)&&(Y(this,og)._clearTimeout(Y(this,hf)),we(this,hf,null))}pause(e){this.stop(),e&&we(this,Zh,-2)}resume(){this.start()}}og=new WeakMap,hf=new WeakMap,dw=new WeakMap,Zh=new WeakMap,B6=new WeakSet,__=async function(){try{const e=await Y(this,og).getBlockNumber();if(Y(this,Zh)===-2){we(this,Zh,e);return}if(e!==Y(this,Zh)){for(let n=Y(this,Zh)+1;n<=e;n++){if(Y(this,hf)==null)return;await Y(this,og).emit("block",n)}we(this,Zh,e)}}catch{}Y(this,hf)!=null&&we(this,hf,Y(this,og)._setTimeout(Fe(this,B6,__).bind(this),Y(this,dw)))};var Ex,Ax,hw;class nte{constructor(e){Le(this,Ex);Le(this,Ax);Le(this,hw);we(this,Ex,e),we(this,hw,!1),we(this,Ax,n=>{this._poll(n,Y(this,Ex))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){Y(this,hw)||(we(this,hw,!0),Y(this,Ax).call(this,-2),Y(this,Ex).on("block",Y(this,Ax)))}stop(){Y(this,hw)&&(we(this,hw,!1),Y(this,Ex).off("block",Y(this,Ax)))}pause(e){this.stop()}resume(){this.start()}}Ex=new WeakMap,Ax=new WeakMap,hw=new WeakMap;var M6,cg;class lgt extends nte{constructor(n,r){super(n);Le(this,M6);Le(this,cg);we(this,M6,r),we(this,cg,-2)}pause(n){n&&we(this,cg,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(Y(this,M6));s!=null&&(Y(this,cg)===-2?we(this,cg,s.number):s.number>Y(this,cg)&&(r.emit(Y(this,M6),s.number),we(this,cg,s.number)))}}M6=new WeakMap,cg=new WeakMap;var _D;class ugt extends nte{constructor(n,r){super(n);Le(this,_D);we(this,_D,aJ(r))}async _poll(n,r){throw new Error("@TODO")}}_D=new WeakMap;var D6;class fgt extends nte{constructor(n,r){super(n);Le(this,D6);we(this,D6,r)}async _poll(n,r){const s=await r.getTransactionReceipt(Y(this,D6));s&&r.emit(Y(this,D6),s)}}D6=new WeakMap;var lg,L6,U6,pw,pf,BD,v4e;class rte{constructor(e,n){Le(this,BD);Le(this,lg);Le(this,L6);Le(this,U6);Le(this,pw);Le(this,pf);we(this,lg,e),we(this,L6,aJ(n)),we(this,U6,Fe(this,BD,v4e).bind(this)),we(this,pw,!1),we(this,pf,-2)}start(){Y(this,pw)||(we(this,pw,!0),Y(this,pf)===-2&&Y(this,lg).getBlockNumber().then(e=>{we(this,pf,e)}),Y(this,lg).on("block",Y(this,U6)))}stop(){Y(this,pw)&&(we(this,pw,!1),Y(this,lg).off("block",Y(this,U6)))}pause(e){this.stop(),e&&we(this,pf,-2)}resume(){this.start()}}lg=new WeakMap,L6=new WeakMap,U6=new WeakMap,pw=new WeakMap,pf=new WeakMap,BD=new WeakSet,v4e=async function(e){if(Y(this,pf)===-2)return;const n=aJ(Y(this,L6));n.fromBlock=Y(this,pf)+1,n.toBlock=e;const r=await Y(this,lg).getLogs(n);if(r.length===0){Y(this,pf)<e-60&&we(this,pf,e-60);return}for(const s of r)Y(this,lg).emit(Y(this,L6),s),we(this,pf,s.blockNumber)};const dgt=BigInt(2),hgt=10;function QO(t){return t&&typeof t.then=="function"}function B_(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,a)=>(i[a]=r[a],i),{})}return r})}class x4e{constructor(e){q(this,"name");tn(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function pgt(t){return JSON.parse(JSON.stringify(t))}function oJ(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function eq(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(rs(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:B_("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:B_("orphan",n),filter:pgt(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?oJ(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],a=o=>{rs(o)?s.push(o):i.push((async()=>{s.push(await Eo(o,e))})())};Array.isArray(n.address)?n.address.forEach(a):a(n.address),i.length&&await Promise.all(i),r.address=oJ(s.map(o=>o.toLowerCase()))}return{filter:r,tag:B_("event",r),type:"event"}}Se(!1,"unknown ProviderEvent","event",t)}function tq(){return new Date().getTime()}const ggt={cacheTimeout:250,pollingInterval:4e3};var Qo,gw,Zo,F6,eu,Sx,mw,ug,u7,gf,V6,$6,vr,Gl,cJ,lJ,AT,uJ,ST,M_;class E4e{constructor(e,n){Le(this,vr);Le(this,Qo);Le(this,gw);Le(this,Zo);Le(this,F6);Le(this,eu);Le(this,Sx);Le(this,mw);Le(this,ug);Le(this,u7);Le(this,gf);Le(this,V6);Le(this,$6);if(we(this,$6,Object.assign({},ggt,n||{})),e==="any")we(this,Sx,!0),we(this,eu,null);else if(e){const r=wu.from(e);we(this,Sx,!1),we(this,eu,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else we(this,Sx,!1),we(this,eu,null);we(this,ug,-1),we(this,mw,new Map),we(this,Qo,new Map),we(this,gw,new Map),we(this,Zo,null),we(this,F6,!1),we(this,u7,1),we(this,gf,new Map),we(this,V6,!1)}get pollingInterval(){return Y(this,$6).pollingInterval}get provider(){return this}get plugins(){return Array.from(Y(this,gw).values())}attachPlugin(e){if(Y(this,gw).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return Y(this,gw).set(e.name,e.connect(this)),this}getPlugin(e){return Y(this,gw).get(e)||null}get disableCcipRead(){return Y(this,V6)}set disableCcipRead(e){we(this,V6,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),a=[];for(let o=0;o<r.length;o++){const c=r[o],l=c.replace("{sender}",s).replace("{data}",i),u=new F0(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:o,urls:r});let f="unknown error",d;try{d=await u.send()}catch(p){a.push(p.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:p}});continue}try{const p=d.bodyJson;if(p.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:p}),p.data;p.message&&(f=p.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:p})}catch{}Ye(d.statusCode<400||d.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:f}}),a.push(f)}Ye(!1,`error encountered during CCIP fetch: ${a.map(o=>JSON.stringify(o)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:a}})}_wrapBlock(e,n){return new Mpt(egt(e),this)}_wrapLog(e,n){return new Q7(Zpt(e),this)}_wrapTransactionReceipt(e,n){return new a4e(sgt(e),this)}_wrapTransactionResponse(e,n){return new $k(b4e(e),this)}_detectNetwork(){Ye(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){Ye(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=er(await Fe(this,vr,Gl).call(this,{method:"getBlockNumber"}),"%response");return Y(this,ug)>=0&&we(this,ug,e),e}_getAddress(e){return Eo(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(rs(e))return rs(e,32)?e:Kd(e);if(typeof e=="bigint"&&(e=er(e,"blockTag")),typeof e=="number")return e>=0?Kd(e):Y(this,ug)>=0?Kd(Y(this,ug)+e):this.getBlockNumber().then(n=>Kd(n+e));Se(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?oJ(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let f;switch(c.length){case 0:break;case 1:f=c[0];break;default:c.sort(),f=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const d={};return f&&(d.address=f),n.length&&(d.topics=n),l&&(d.fromBlock=l),u&&(d.toBlock=u),r&&(d.blockHash=r),d};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let a;"fromBlock"in e&&(a=this._getBlockTag(e.fromBlock));let o;return"toBlock"in e&&(o=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||a!=null&&typeof a!="string"||o!=null&&typeof o!="string"?Promise.all([Promise.all(i),a,o]).then(c=>s(c[0],c[1],c[2])):s(i,a,o)}_getTransactionRequest(e){const n=Vk(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=Eo(n[s],this);QO(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);QO(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(Y(this,eu)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw Y(this,eu)===s&&we(this,eu,null),i}})();return we(this,eu,s),(await s).clone()}const e=Y(this,eu),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(Y(this,Sx)?(this.emit("network",r,n),Y(this,eu)===e&&we(this,eu,Promise.resolve(r))):Ye(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:a}=await Xi({_block:Fe(this,vr,uJ).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await Fe(this,vr,Gl).call(this,{method:"getGasPrice"});return Yt(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await Fe(this,vr,Gl).call(this,{method:"getPriorityFee"});return Yt(u,"%response")}catch{}return null})()});let o=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=a??BigInt("1000000000"),o=l.baseFeePerGas*dgt+c),new rfe(i,o,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new F0(r.url),i=await r.processFunc(n,this,s);return new rfe(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return QO(n)&&(n=await n),Yt(await Fe(this,vr,Gl).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await Xi({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await Fe(this,vr,lJ).call(this,Fe(this,vr,cJ).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Yt(await Fe(this,vr,AT).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return er(await Fe(this,vr,AT).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Ke(await Fe(this,vr,AT).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Yt(n,"position");return Ke(await Fe(this,vr,AT).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await Xi({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=Uk.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await Xi({network:this.getNetwork(),params:Fe(this,vr,uJ).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await Xi({network:this.getNetwork(),params:Fe(this,vr,Gl).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await Xi({network:this.getNetwork(),params:Fe(this,vr,Gl).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await Fe(this,vr,Gl).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await Xi({network:this.getNetwork(),result:Fe(this,vr,Gl).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Ke(n)}async getLogs(e){let n=this._getFilter(e);QO(n)&&(n=await n);const{network:r,params:s}=await Xi({network:this.getNetwork(),params:Fe(this,vr,Gl).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){Ye(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await WM.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=Fn(e);const n=tJ(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await WM.getEnsAddress(this),i=await new Si(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===$c)return null;const o=await new Si(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(o)!==e?null:o}catch(r){if(Ea(r,"BAD_DATA")&&r.value==="0x"||Ea(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,a)=>{let o=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),o&&(clearTimeout(o),o=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(o=setTimeout(()=>{o!=null&&(o=null,this.off("block",c),a(gi("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){Ye(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=Y(this,gf).get(e);n&&(n.timer&&clearTimeout(n.timer),Y(this,gf).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=_E(this,u7)._++,s=()=>{Y(this,gf).delete(r),e()};if(this.paused)Y(this,gf).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);Y(this,gf).set(r,{timer:i,func:s,time:tq()})}return r}_forEachSubscriber(e){for(const n of Y(this,Qo).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new x4e(e.type);case"block":{const n=new cgt(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new lgt(this,e.type);case"event":return new rte(this,e.filter);case"transaction":return new fgt(this,e.hash);case"orphan":return new ugt(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of Y(this,Qo).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),Y(this,Zo)!=null&&n.pause(Y(this,Zo));break}}async on(e,n){const r=await Fe(this,vr,M_).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,Y(this,Zo)!=null&&r.subscriber.pause(Y(this,Zo))),this}async once(e,n){const r=await Fe(this,vr,M_).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,Y(this,Zo)!=null&&r.subscriber.pause(Y(this,Zo))),this}async emit(e,...n){const r=await Fe(this,vr,ST).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:a})=>{const o=new g6e(this,a?null:i,e);try{i.call(this,...n,o)}catch{}return!a}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),Y(this,Qo).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await Fe(this,vr,ST).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of Y(this,Qo).values())n+=r.length;return n}async listeners(e){if(e){const r=await Fe(this,vr,ST).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of Y(this,Qo).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await Fe(this,vr,ST).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),Y(this,Qo).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await Fe(this,vr,M_).call(this,e);r&&s.stop(),Y(this,Qo).delete(n)}else for(const[n,{started:r,subscriber:s}]of Y(this,Qo))r&&s.stop(),Y(this,Qo).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return Y(this,F6)}destroy(){this.removeAllListeners();for(const e of Y(this,gf).keys())this._clearTimeout(e);we(this,F6,!0)}get paused(){return Y(this,Zo)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(we(this,ug,-1),Y(this,Zo)!=null){if(Y(this,Zo)==!!e)return;Ye(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),we(this,Zo,!!e);for(const n of Y(this,gf).values())n.timer&&clearTimeout(n.timer),n.time=tq()-n.time}resume(){if(Y(this,Zo)!=null){this._forEachSubscriber(e=>e.resume()),we(this,Zo,null);for(const e of Y(this,gf).values()){let n=e.time;n<0&&(n=0),e.time=tq(),setTimeout(e.func,n)}}}}Qo=new WeakMap,gw=new WeakMap,Zo=new WeakMap,F6=new WeakMap,eu=new WeakMap,Sx=new WeakMap,mw=new WeakMap,ug=new WeakMap,u7=new WeakMap,gf=new WeakMap,V6=new WeakMap,$6=new WeakMap,vr=new WeakSet,Gl=async function(e){const n=Y(this,$6).cacheTimeout;if(n<0)return await this._perform(e);const r=B_(e.method,e);let s=Y(this,mw).get(r);return s||(s=this._perform(e),Y(this,mw).set(r,s),setTimeout(()=>{Y(this,mw).get(r)===s&&Y(this,mw).delete(r)},n)),await s},cJ=async function(e,n,r){Ye(r<hgt,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=Vk(e);try{return Ke(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&Ree(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&_s(i.data,0,4)==="0x556f1830"){const a=i.data,o=await Eo(s.to,this);let c;try{c=vgt(_s(i.data,4))}catch(f){Ye(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:a}})}Ye(c.sender.toLowerCase()===o.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:a,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);Ye(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:o,data:Qr([c.selector,bgt([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const f=await Fe(this,vr,cJ).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:f}),f}}throw i}},lJ=async function(e){const{value:n}=await Xi({network:this.getNetwork(),value:e});return n},AT=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await Fe(this,vr,lJ).call(this,Fe(this,vr,Gl).call(this,Object.assign(e,{address:s,blockTag:i})))},uJ=async function(e,n){if(rs(e,32))return await Fe(this,vr,Gl).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await Fe(this,vr,Gl).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},ST=async function(e,n){let r=await eq(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await eq({orphan:"drop-log",log:n[0]},this)),Y(this,Qo).get(r.tag)||null},M_=async function(e){const n=await eq(e,this),r=n.tag;let s=Y(this,Qo).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},Y(this,Qo).set(r,s)),s};function mgt(t,e){try{const n=fJ(t,e);if(n)return I2(n)}catch{}return null}function fJ(t,e){if(t==="0x")return null;try{const n=er(_s(t,e,e+32)),r=er(_s(t,n,n+32));return _s(t,n+32,n+32+r)}catch{}return null}function ffe(t){const e=xo(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function ygt(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const wgt=new Uint8Array([]);function bgt(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(wgt),n+=32;for(let r=0;r<t.length;r++){const s=et(t[r]);e[r]=ffe(n),e.push(ffe(s.length)),e.push(ygt(s)),n+=32+Math.ceil(s.length/32)*32}return Qr(e)}const dfe="0x0000000000000000000000000000000000000000000000000000000000000000";function vgt(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Ye(Yx(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=_s(t,0,32);Ye(_s(n,0,12)===_s(dfe,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=_s(n,12);try{const r=[],s=er(_s(t,32,64)),i=er(_s(t,s,s+32)),a=_s(t,s+32);for(let o=0;o<i;o++){const c=mgt(a,o*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{Ye(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=fJ(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{Ye(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Ye(_s(t,100,128)===_s(dfe,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=_s(t,96,100);try{const r=fJ(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{Ye(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function ZE(t,e){if(t.provider)return t.provider;Ye(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function hfe(t,e){let n=Vk(e);if(n.to!=null&&(n.to=Eo(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Eo(r,t)]).then(([s,i])=>(Se(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await Xi(n)}class kU{constructor(e){q(this,"provider");tn(this,{provider:e||null})}async getNonce(e){return ZE(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await hfe(this,e)}async populateTransaction(e){const n=ZE(this,"populateTransaction"),r=await hfe(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const a=Yt(r.chainId);Se(a===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?Se(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&Se(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const a=await n.getFeeData();Ye(a.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=a.gasPrice)}else{const a=await n.getFeeData();if(r.type==null)if(a.maxFeePerGas!=null&&a.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const o=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=o,r.maxPriorityFeePerGas=o}else r.maxFeePerGas==null&&(r.maxFeePerGas=a.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=a.maxPriorityFeePerGas);else a.gasPrice!=null?(Ye(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=a.gasPrice),r.type=0):Ye(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=a.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=a.maxPriorityFeePerGas))}return await Xi(r)}async estimateGas(e){return ZE(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return ZE(this,"call").call(await this.populateCall(e))}async resolveName(e){return await ZE(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=ZE(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=Uk.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}}var j6,D_;const Rne=class Rne extends kU{constructor(n,r){super(r);Le(this,j6);q(this,"address");tn(this,{address:n})}async getAddress(){return this.address}connect(n){return new Rne(this.address,n)}async signTransaction(n){Fe(this,j6,D_).call(this,"transactions","signTransaction")}async signMessage(n){Fe(this,j6,D_).call(this,"messages","signMessage")}async signTypedData(n,r,s){Fe(this,j6,D_).call(this,"typed-data","signTypedData")}};j6=new WeakSet,D_=function(n,r){Ye(!1,`VoidSigner cannot sign ${n}`,"UNSUPPORTED_OPERATION",{operation:r})};let dJ=Rne;function xgt(t){return JSON.parse(JSON.stringify(t))}var Ec,Xh,Ix,yw,Cx,H6,Ab,hJ,pJ;class A4e{constructor(e){Le(this,Ab);Le(this,Ec);Le(this,Xh);Le(this,Ix);Le(this,yw);Le(this,Cx);Le(this,H6);we(this,Ec,e),we(this,Xh,null),we(this,Ix,Fe(this,Ab,hJ).bind(this)),we(this,yw,!1),we(this,Cx,null),we(this,H6,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){Y(this,yw)||(we(this,yw,!0),Fe(this,Ab,hJ).call(this,-2))}stop(){Y(this,yw)&&(we(this,yw,!1),we(this,H6,!0),Fe(this,Ab,pJ).call(this),Y(this,Ec).off("block",Y(this,Ix)))}pause(e){e&&Fe(this,Ab,pJ).call(this),Y(this,Ec).off("block",Y(this,Ix))}resume(){this.start()}}Ec=new WeakMap,Xh=new WeakMap,Ix=new WeakMap,yw=new WeakMap,Cx=new WeakMap,H6=new WeakMap,Ab=new WeakSet,hJ=async function(e){try{Y(this,Xh)==null&&we(this,Xh,this._subscribe(Y(this,Ec)));let n=null;try{n=await Y(this,Xh)}catch(i){if(!Ea(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){we(this,Xh,null),Y(this,Ec)._recoverSubscriber(this,this._recover(Y(this,Ec)));return}const r=await Y(this,Ec).getNetwork();if(Y(this,Cx)||we(this,Cx,r),Y(this,Cx).chainId!==r.chainId)throw new Error("chaid changed");if(Y(this,H6))return;const s=await Y(this,Ec).send("eth_getFilterChanges",[n]);await this._emitResults(Y(this,Ec),s)}catch(n){console.log("@TODO",n)}Y(this,Ec).once("block",Y(this,Ix))},pJ=function(){const e=Y(this,Xh);e&&(we(this,Xh,null),e.then(n=>{Y(this,Ec).destroyed||Y(this,Ec).send("eth_uninstallFilter",[n])}))};var Tx;class Egt extends A4e{constructor(n,r){super(n);Le(this,Tx);we(this,Tx,xgt(r))}_recover(n){return new rte(n,Y(this,Tx))}async _subscribe(n){return await n.send("eth_newFilter",[Y(this,Tx)])}async _emitResults(n,r){for(const s of r)n.emit(Y(this,Tx),n._wrapLog(s,n._network))}}Tx=new WeakMap;class Agt extends A4e{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const Sgt="bigint,boolean,function,number,string,symbol".split(/,/g);function L_(t){if(t==null||Sgt.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(L_);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function Igt(t){return new Promise(e=>{setTimeout(e,t)})}function XE(t){return t&&t.toLowerCase()}function pfe(t){return t&&typeof t.pollingInterval=="number"}const S4e={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class nq extends kU{constructor(n,r){super(n);q(this,"address");r=Fn(r),tn(this,{address:r})}connect(n){Ye(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=L_(n),s=[];if(r.from){const a=r.from;s.push((async()=>{const o=await Eo(a,this.provider);Se(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=o})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const a=r.to;s.push((async()=>{r.to=await Eo(a,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,a)=>{const o=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(Ea(u,"CANCELLED")||Ea(u,"BAD_DATA")||Ea(u,"NETWORK_ERROR")||Ea(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,a(u);return}if(Ea(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){a(u);return}this.provider.emit("error",gi("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},o.pop()||4e3)};l()})}async signTransaction(n){const r=L_(n);if(r.from){const i=await Eo(r.from,this.provider);Se(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?aa(n):n;return await this.provider.send("personal_sign",[Ke(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=L_(s),a=await mb.resolveNames(n,r,i,async o=>{const c=await Eo(o);return Se(c!=null,"TypedData does not support null address","value",o),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(mb.getPayload(a.domain,r,a.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?aa(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Ke(r)])}}var Nx,q6,fg,e0,Od,mf,cl,f7,gJ;class Cgt extends E4e{constructor(n,r){super(n,r);Le(this,f7);Le(this,Nx);Le(this,q6);Le(this,fg);Le(this,e0);Le(this,Od);Le(this,mf);Le(this,cl);we(this,q6,1),we(this,Nx,Object.assign({},S4e,r||{})),we(this,fg,[]),we(this,e0,null),we(this,mf,null),we(this,cl,null);{let i=null;const a=new Promise(o=>{i=o});we(this,Od,{promise:a,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(Se(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&we(this,mf,wu.from(n))):s&&(Se(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),we(this,mf,s))}_getOption(n){return Y(this,Nx)[n]}get _network(){return Ye(Y(this,mf),"network is not available yet","NETWORK_ERROR"),Y(this,mf)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Yt(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(Y(this,mf))return Y(this,mf)}else return n;return Y(this,cl)?await Y(this,cl):this.ready?(we(this,cl,(async()=>{try{const r=wu.from(Yt(await this.send("eth_chainId",[])));return we(this,cl,null),r}catch(r){throw we(this,cl,null),r}})()),await Y(this,cl)):(we(this,cl,(async()=>{const r={id:_E(this,q6)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],we(this,cl,null)}catch(i){throw we(this,cl,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return wu.from(Yt(s.result));throw this.getRpcError(r,s)})()),await Y(this,cl))}_start(){Y(this,Od)==null||Y(this,Od).resolve==null||(Y(this,Od).resolve(),we(this,Od,null),(async()=>{for(;Y(this,mf)==null&&!this.destroyed;)try{we(this,mf,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",gi("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await Igt(1e3)}Fe(this,f7,gJ).call(this)})())}async _waitUntilReady(){if(Y(this,Od)!=null)return await Y(this,Od).promise}_getSubscriber(n){return n.type==="pending"?new Agt(this):n.type==="event"?this._getOption("polling")?new rte(this,n.filter):new Egt(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new x4e("orphan"):super._getSubscriber(n)}get ready(){return Y(this,Od)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=Kd(Yt(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Ke(n[s]))}),n.accessList&&(r.accessList=Y2(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[XE(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[XE(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[XE(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[XE(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(XE):n.filter.address=XE(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return gi("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=mJ(i),l=uc.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const a=JSON.stringify(Ngt(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return gi("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(a.match(/insufficient funds|base fee exceeds gas limit/i))return gi("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(a.match(/nonce/i)&&a.match(/too low/i))return gi("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(a.match(/replacement transaction/i)&&a.match(/underpriced/i))return gi("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(a.match(/only replay-protected/i))return gi("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let o=!!a.match(/the method .* does not exist/i);return o||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(o=!0),o?gi("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):gi("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(gi("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=_E(this,q6)._++,i=new Promise((a,o)=>{Y(this,fg).push({resolve:a,reject:o,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return Fe(this,f7,gJ).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new nq(this,i[n])}const{accounts:s}=await Xi({network:this.getNetwork(),accounts:r});n=Fn(n);for(const i of s)if(Fn(i)===n)return new nq(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new nq(this,r))}destroy(){Y(this,e0)&&(clearTimeout(Y(this,e0)),we(this,e0,null));for(const{payload:n,reject:r}of Y(this,fg))r(gi("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));we(this,fg,[]),super.destroy()}}Nx=new WeakMap,q6=new WeakMap,fg=new WeakMap,e0=new WeakMap,Od=new WeakMap,mf=new WeakMap,cl=new WeakMap,f7=new WeakSet,gJ=function(){if(Y(this,e0))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");we(this,e0,setTimeout(()=>{we(this,e0,null);const r=Y(this,fg);for(we(this,fg,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==Y(this,Nx).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(a=>a.payload)).length>Y(this,Nx).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(a=>a.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const a=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:a});for(const{resolve:o,reject:c,payload:l}of s){if(this.destroyed){c(gi("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=a.filter(f=>f.id===l.id)[0];if(u==null){const f=gi("missing response for request","BAD_DATA",{value:a,info:{payload:l}});this.emit("error",f),c(f);continue}if("error"in u){c(this.getRpcError(l,u));continue}o(u.result)}}catch(a){this.emit("debug",{action:"receiveRpcError",error:a});for(const{reject:o}of s)o(a)}})()}},n))};var ww;class Tgt extends Cgt{constructor(n,r){super(n,r);Le(this,ww);let s=this._getOption("pollingInterval");s==null&&(s=S4e.pollingInterval),we(this,ww,s)}_getSubscriber(n){const r=super._getSubscriber(n);return pfe(r)&&(r.pollingInterval=Y(this,ww)),r}get pollingInterval(){return Y(this,ww)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");we(this,ww,n),this._forEachSubscriber(r=>{pfe(r)&&(r.pollingInterval=Y(this,ww))})}}ww=new WeakMap;var K6,K0e;let P2=(K0e=class extends Tgt{constructor(n,r,s){n==null&&(n="http://localhost:8545");super(r,s);Le(this,K6);typeof n=="string"?we(this,K6,new F0(n)):we(this,K6,n.clone())}_getConnection(){return Y(this,K6).clone()}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){const r=this._getConnection();r.body=JSON.stringify(n),r.setHeader("content-type","application/json");const s=await r.send();s.assertOk();let i=s.bodyJson;return Array.isArray(i)||(i=[i]),i}},K6=new WeakMap,K0e);function mJ(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&rs(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=mJ(t[e]);if(n)return n}return null}if(typeof t=="string")try{return mJ(JSON.parse(t))}catch{}return null}function yJ(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)yJ(t[n],e);if(typeof t=="string")try{return yJ(JSON.parse(t),e)}catch{}}}function Ngt(t){const e=[];return yJ(t,e),e}var G6;const _ne=class _ne extends kU{constructor(n,r){super(r);q(this,"address");Le(this,G6);Se(n&&typeof n.sign=="function","invalid private key","privateKey","[ REDACTED ]"),we(this,G6,n);const s=J7(this.signingKey.publicKey);tn(this,{address:s})}get signingKey(){return Y(this,G6)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(n){return new _ne(Y(this,G6),n)}async signTransaction(n){n=Vk(n);const{to:r,from:s}=await Xi({to:n.to?Eo(n.to,this.provider):void 0,from:n.from?Eo(n.from,this.provider):void 0});r!=null&&(n.to=r),s!=null&&(n.from=s),n.from!=null&&(Se(Fn(n.from)===this.address,"transaction from address mismatch","tx.from",n.from),delete n.from);const i=Uk.from(n);return i.signature=this.signingKey.sign(i.unsignedHash),i.serialized}async signMessage(n){return this.signMessageSync(n)}signMessageSync(n){return this.signingKey.sign(EU(n)).serialized}async signTypedData(n,r,s){const i=await mb.resolveNames(n,r,s,async a=>{Ye(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:a}});const o=await this.provider.resolveName(a);return Ye(o!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:a}),o});return this.signingKey.sign(mb.hash(i.domain,r,i.value)).serialized}};G6=new WeakMap;let zM=_ne;const JM=" !#$%&'()*+,-./<=>?@[]^_`{|}~",kgt=/^[a-z]*$/i;function gfe(t,e){let n=97;return t.reduce((r,s)=>(s===e?n++:s.match(kgt)?r.push(String.fromCharCode(n)+s):(n=97,r.push(s)),r),[])}function Pgt(t,e){for(let s=JM.length-1;s>=0;s--)t=t.split(JM[s]).join(e.substring(2*s,2*s+2));const n=[],r=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(s,i,a,o)=>{if(a)for(let c=parseInt(a);c>=0;c--)n.push(";");else n.push(i.toLowerCase());return""});if(r)throw new Error(`leftovers: ${JSON.stringify(r)}`);return gfe(gfe(n,";"),":")}function Ogt(t){return Se(t[0]==="0","unsupported auwl data","data",t),Pgt(t.substring(1+2*JM.length),t.substring(1,1+2*JM.length))}class Rgt{constructor(e){q(this,"locale");tn(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var W6,d7,kx,h7,wJ;class _gt extends Rgt{constructor(n,r,s){super(n);Le(this,h7);Le(this,W6);Le(this,d7);Le(this,kx);we(this,W6,r),we(this,d7,s),we(this,kx,null)}get _data(){return Y(this,W6)}_decodeWords(){return Ogt(Y(this,W6))}getWord(n){const r=Fe(this,h7,wJ).call(this);return Se(n>=0&&n<r.length,`invalid word index: ${n}`,"index",n),r[n]}getWordIndex(n){return Fe(this,h7,wJ).call(this).indexOf(n)}}W6=new WeakMap,d7=new WeakMap,kx=new WeakMap,h7=new WeakSet,wJ=function(){if(Y(this,kx)==null){const n=this._decodeWords();if(Tl(n.join(`
`)+`
`)!==Y(this,d7))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);we(this,kx,n)}return Y(this,kx)};const Bgt="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",Mgt="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let rq=null;class O2 extends _gt{constructor(){super("en",Bgt,Mgt)}static wordlist(){return rq==null&&(rq=new O2),rq}}function I4e(t){return(1<<t)-1<<8-t&255}function Dgt(t){return(1<<t)-1&255}function sq(t,e){u6e("NFKD"),e==null&&(e=O2.wordlist());const n=e.split(t);Se(n.length%3===0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const r=new Uint8Array(Math.ceil(11*n.length/8));let s=0;for(let l=0;l<n.length;l++){let u=e.getWordIndex(n[l].normalize("NFKD"));Se(u>=0,`invalid mnemonic word at index ${l}`,"mnemonic","[ REDACTED ]");for(let f=0;f<11;f++)u&1<<10-f&&(r[s>>3]|=1<<7-s%8),s++}const i=32*n.length/3,a=n.length/3,o=I4e(a),c=et($f(r.slice(0,i/8)))[0]&o;return Se(c===(r[r.length-1]&o),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),Ke(r.slice(0,i/8))}function iq(t,e){Se(t.length%4===0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=O2.wordlist());const n=[0];let r=11;for(let a=0;a<t.length;a++)r>8?(n[n.length-1]<<=8,n[n.length-1]|=t[a],r-=8):(n[n.length-1]<<=r,n[n.length-1]|=t[a]>>8-r,n.push(t[a]&Dgt(8-r)),r+=3);const s=t.length/4,i=parseInt($f(t).substring(2,4),16)&I4e(s);return n[n.length-1]<<=s,n[n.length-1]|=i>>8-s,e.join(n.map(a=>e.getWord(a)))}const aq={};class F5{constructor(e,n,r,s,i){q(this,"phrase");q(this,"password");q(this,"wordlist");q(this,"entropy");s==null&&(s=""),i==null&&(i=O2.wordlist()),Mb(e,aq,"Mnemonic"),tn(this,{phrase:r,password:s,wordlist:i,entropy:n})}computeSeed(){const e=aa("mnemonic"+this.password,"NFKD");return Db(aa(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,n,r){const s=sq(e,r);return e=iq(et(s),r),new F5(aq,s,e,n,r)}static fromEntropy(e,n,r){const s=et(e,"entropy"),i=iq(s,r);return new F5(aq,Ke(s),i,n,r)}static entropyToPhrase(e,n){const r=et(e,"entropy");return iq(r,n)}static phraseToEntropy(e,n){return sq(e,n)}static isValidMnemonic(e,n){try{return sq(e,n),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var io=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},oq=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},U_,sf,Dh;const Lgt={16:10,24:12,32:14},Ugt=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Qu=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ZO=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],Fgt=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],Vgt=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],$gt=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],jgt=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],Hgt=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],qgt=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],Kgt=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],Ggt=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],Wgt=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],zgt=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Jgt=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],Ygt=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function cq(t){const e=[];for(let n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}class ste{get key(){return io(this,U_,"f").slice()}constructor(e){if(U_.set(this,void 0),sf.set(this,void 0),Dh.set(this,void 0),!(this instanceof ste))throw Error("AES must be instanitated with `new`");oq(this,U_,new Uint8Array(e),"f");const n=Lgt[this.key.length];if(n==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");oq(this,Dh,[],"f"),oq(this,sf,[],"f");for(let u=0;u<=n;u++)io(this,Dh,"f").push([0,0,0,0]),io(this,sf,"f").push([0,0,0,0]);const r=(n+1)*4,s=this.key.length/4,i=cq(this.key);let a;for(let u=0;u<s;u++)a=u>>2,io(this,Dh,"f")[a][u%4]=i[u],io(this,sf,"f")[n-a][u%4]=i[u];let o=0,c=s,l;for(;c<r;){if(l=i[s-1],i[0]^=Qu[l>>16&255]<<24^Qu[l>>8&255]<<16^Qu[l&255]<<8^Qu[l>>24&255]^Ugt[o]<<24,o+=1,s!=8)for(let p=1;p<s;p++)i[p]^=i[p-1];else{for(let p=1;p<s/2;p++)i[p]^=i[p-1];l=i[s/2-1],i[s/2]^=Qu[l&255]^Qu[l>>8&255]<<8^Qu[l>>16&255]<<16^Qu[l>>24&255]<<24;for(let p=s/2+1;p<s;p++)i[p]^=i[p-1]}let u=0,f,d;for(;u<s&&c<r;)f=c>>2,d=c%4,io(this,Dh,"f")[f][d]=i[u],io(this,sf,"f")[n-f][d]=i[u++],c++}for(let u=1;u<n;u++)for(let f=0;f<4;f++)l=io(this,sf,"f")[u][f],io(this,sf,"f")[u][f]=Wgt[l>>24&255]^zgt[l>>16&255]^Jgt[l>>8&255]^Ygt[l&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const n=io(this,Dh,"f").length-1,r=[0,0,0,0];let s=cq(e);for(let o=0;o<4;o++)s[o]^=io(this,Dh,"f")[0][o];for(let o=1;o<n;o++){for(let c=0;c<4;c++)r[c]=Fgt[s[c]>>24&255]^Vgt[s[(c+1)%4]>>16&255]^$gt[s[(c+2)%4]>>8&255]^jgt[s[(c+3)%4]&255]^io(this,Dh,"f")[o][c];s=r.slice()}const i=new Uint8Array(16);let a=0;for(let o=0;o<4;o++)a=io(this,Dh,"f")[n][o],i[4*o]=(Qu[s[o]>>24&255]^a>>24)&255,i[4*o+1]=(Qu[s[(o+1)%4]>>16&255]^a>>16)&255,i[4*o+2]=(Qu[s[(o+2)%4]>>8&255]^a>>8)&255,i[4*o+3]=(Qu[s[(o+3)%4]&255]^a)&255;return i}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const n=io(this,sf,"f").length-1,r=[0,0,0,0];let s=cq(e);for(let o=0;o<4;o++)s[o]^=io(this,sf,"f")[0][o];for(let o=1;o<n;o++){for(let c=0;c<4;c++)r[c]=Hgt[s[c]>>24&255]^qgt[s[(c+3)%4]>>16&255]^Kgt[s[(c+2)%4]>>8&255]^Ggt[s[(c+1)%4]&255]^io(this,sf,"f")[o][c];s=r.slice()}const i=new Uint8Array(16);let a=0;for(let o=0;o<4;o++)a=io(this,sf,"f")[n][o],i[4*o]=(ZO[s[o]>>24&255]^a>>24)&255,i[4*o+1]=(ZO[s[(o+3)%4]>>16&255]^a>>16)&255,i[4*o+2]=(ZO[s[(o+2)%4]>>8&255]^a>>8)&255,i[4*o+3]=(ZO[s[(o+1)%4]&255]^a)&255;return i}}U_=new WeakMap,sf=new WeakMap,Dh=new WeakMap;class C4e{constructor(e,n,r){if(r&&!(this instanceof r))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new ste(n)},name:{enumerable:!0,value:e}})}}var XO=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},eA=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},IT,$p;class ite extends C4e{constructor(e,n){if(super("ECC",e,ite),IT.set(this,void 0),$p.set(this,void 0),n){if(n.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");XO(this,IT,new Uint8Array(n),"f")}else XO(this,IT,new Uint8Array(16),"f");XO(this,$p,this.iv,"f")}get iv(){return new Uint8Array(eA(this,IT,"f"))}encrypt(e){if(e.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const n=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){for(let s=0;s<16;s++)eA(this,$p,"f")[s]^=e[r+s];XO(this,$p,this.aes.encrypt(eA(this,$p,"f")),"f"),n.set(eA(this,$p,"f"),r)}return n}decrypt(e){if(e.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const n=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){const s=this.aes.decrypt(e.subarray(r,r+16));for(let i=0;i<16;i++)n[r+i]=s[i]^eA(this,$p,"f")[i],eA(this,$p,"f")[i]=e[r+i]}return n}}IT=new WeakMap,$p=new WeakMap;var tA=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},Zu=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},CT,Cv,af;class V5 extends C4e{constructor(e,n){super("CTR",e,V5),CT.set(this,void 0),Cv.set(this,void 0),af.set(this,void 0),tA(this,af,new Uint8Array(16),"f"),Zu(this,af,"f").fill(0),tA(this,CT,Zu(this,af,"f"),"f"),tA(this,Cv,16,"f"),n==null&&(n=1),typeof n=="number"?this.setCounterValue(n):this.setCounterBytes(n)}get counter(){return new Uint8Array(Zu(this,af,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let n=15;n>=0;--n)Zu(this,af,"f")[n]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");Zu(this,af,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(Zu(this,af,"f")[e]===255)Zu(this,af,"f")[e]=0;else{Zu(this,af,"f")[e]++;break}}encrypt(e){var n,r;const s=new Uint8Array(e);for(let i=0;i<s.length;i++)Zu(this,Cv,"f")===16&&(tA(this,CT,this.aes.encrypt(Zu(this,af,"f")),"f"),tA(this,Cv,0,"f"),this.increment()),s[i]^=Zu(this,CT,"f")[tA(this,Cv,(r=Zu(this,Cv,"f"),n=r++,r),"f"),n];return s}decrypt(e){return this.encrypt(e)}}CT=new WeakMap,Cv=new WeakMap,af=new WeakMap;function Qgt(t){if(t.length<16)throw new TypeError("PKCS#7 invalid length");const e=t[t.length-1];if(e>16)throw new TypeError("PKCS#7 padding byte out of range");const n=t.length-e;for(let r=0;r<e;r++)if(t[n+r]!==e)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(t.subarray(0,n))}function T4e(t){return typeof t=="string"&&!t.startsWith("0x")&&(t="0x"+t),vo(t)}function J8(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function e9(t){return typeof t=="string"?aa(t,"NFKC"):vo(t)}function Bi(t,e){const n=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);Se(n!=null,"invalid path","path",e);const r=n[1],s=n[3],i=n[4]==="!";let a=t;for(const o of r.toLowerCase().split(".")){if(Array.isArray(a)){if(!o.match(/^[0-9]+$/))break;a=a[parseInt(o)]}else if(typeof a=="object"){let c=null;for(const l in a)if(l.toLowerCase()===o){c=a[l];break}a=c}else a=null;if(a==null)break}if(Se(!i||a!=null,"missing required value","path",r),s&&a!=null){if(s==="int"){if(typeof a=="string"&&a.match(/^-?[0-9]+$/))return parseInt(a);if(Number.isSafeInteger(a))return a}if(s==="number"&&typeof a=="string"&&a.match(/^-?[0-9.]*$/))return parseFloat(a);if(s==="data"&&typeof a=="string")return T4e(a);if(s==="array"&&Array.isArray(a)||s===typeof a)return a;Se(!1,`wrong type found for ${s} `,"path",r)}return a}const N4e="m/44'/60'/0'/0/0";function mfe(t){try{const e=JSON.parse(t);if((e.version!=null?parseInt(e.version):0)===3)return!0}catch{}return!1}function Zgt(t,e,n){if(Bi(t,"crypto.cipher:string")==="aes-128-ctr"){const s=Bi(t,"crypto.cipherparams.iv:data!"),i=new V5(e,s);return Ke(i.decrypt(n))}Ye(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function YM(t,e){const n=et(e),r=Bi(t,"crypto.ciphertext:data!"),s=Ke(yr(Qr([n.slice(16,32),r]))).substring(2);Se(s===Bi(t,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const i=Zgt(t,n.slice(0,16),r),a=J7(i);if(t.address){let l=t.address.toLowerCase();l.startsWith("0x")||(l="0x"+l),Se(Fn(l)===a,"keystore address/privateKey mismatch","address",t.address)}const o={address:a,privateKey:i};if(Bi(t,"x-ethers.version:string")==="0.1"){const l=n.slice(32,64),u=Bi(t,"x-ethers.mnemonicCiphertext:data!"),f=Bi(t,"x-ethers.mnemonicCounter:data!"),d=new V5(l,f);o.mnemonic={path:Bi(t,"x-ethers.path:string")||N4e,locale:Bi(t,"x-ethers.locale:string")||"en",entropy:Ke(et(d.decrypt(u)))}}return o}function k4e(t){const e=Bi(t,"crypto.kdf:string");if(e&&typeof e=="string"){if(e.toLowerCase()==="scrypt"){const n=Bi(t,"crypto.kdfparams.salt:data!"),r=Bi(t,"crypto.kdfparams.n:int!"),s=Bi(t,"crypto.kdfparams.r:int!"),i=Bi(t,"crypto.kdfparams.p:int!");Se(r>0&&(r&r-1)===0,"invalid kdf.N","kdf.N",r),Se(s>0&&i>0,"invalid kdf","kdf",e);const a=Bi(t,"crypto.kdfparams.dklen:int!");return Se(a===32,"invalid kdf.dklen","kdf.dflen",a),{name:"scrypt",salt:n,N:r,r:s,p:i,dkLen:64}}else if(e.toLowerCase()==="pbkdf2"){const n=Bi(t,"crypto.kdfparams.salt:data!"),r=Bi(t,"crypto.kdfparams.prf:string!"),s=r.split("-").pop();Se(s==="sha256"||s==="sha512","invalid kdf.pdf","kdf.pdf",r);const i=Bi(t,"crypto.kdfparams.c:int!"),a=Bi(t,"crypto.kdfparams.dklen:int!");return Se(a===32,"invalid kdf.dklen","kdf.dklen",a),{name:"pbkdf2",salt:n,count:i,dkLen:a,algorithm:s}}}Se(!1,"unsupported key-derivation function","kdf",e)}function Xgt(t,e){const n=JSON.parse(t),r=e9(e),s=k4e(n);if(s.name==="pbkdf2"){const{salt:f,count:d,dkLen:p,algorithm:g}=s,m=Db(r,f,d,p,g);return YM(n,m)}Ye(s.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:i,N:a,r:o,p:c,dkLen:l}=s,u=I4(r,i,a,o,c,l);return YM(n,u)}function yfe(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}async function emt(t,e,n){const r=JSON.parse(t),s=e9(e),i=k4e(r);if(i.name==="pbkdf2"){n&&(n(0),await yfe(0));const{salt:d,count:p,dkLen:g,algorithm:m}=i,v=Db(s,d,p,g,m);return n&&(n(1),await yfe(0)),YM(r,v)}Ye(i.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:a,N:o,r:c,p:l,dkLen:u}=i,f=await S4(s,a,o,c,l,u,n);return YM(r,f)}function P4e(t){const e=t.salt!=null?et(t.salt,"options.salt"):Eu(32);let n=1<<17,r=8,s=1;return t.scrypt&&(t.scrypt.N&&(n=t.scrypt.N),t.scrypt.r&&(r=t.scrypt.r),t.scrypt.p&&(s=t.scrypt.p)),Se(typeof n=="number"&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),Se(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt r parameter","options.r",r),Se(typeof s=="number"&&s>0&&Number.isSafeInteger(s),"invalid scrypt p parameter","options.p",s),{name:"scrypt",dkLen:32,salt:e,N:n,r,p:s}}function O4e(t,e,n,r){const s=et(n.privateKey,"privateKey"),i=r.iv!=null?et(r.iv,"options.iv"):Eu(16);Se(i.length===16,"invalid options.iv length","options.iv",r.iv);const a=r.uuid!=null?et(r.uuid,"options.uuid"):Eu(16);Se(a.length===16,"invalid options.uuid length","options.uuid",r.iv);const o=t.slice(0,16),c=t.slice(16,32),l=new V5(o,i),u=et(l.encrypt(s)),f=yr(Qr([c,u])),d={address:n.address.substring(2).toLowerCase(),id:ddt(a),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:Ke(i).substring(2)},ciphertext:Ke(u).substring(2),kdf:"scrypt",kdfparams:{salt:Ke(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:f.substring(2)}};if(n.mnemonic){const p=r.client!=null?r.client:`ethers/${c6e}`,g=n.mnemonic.path||N4e,m=n.mnemonic.locale||"en",v=t.slice(32,64),A=et(n.mnemonic.entropy,"account.mnemonic.entropy"),S=Eu(16),I=new V5(v,S),B=et(I.encrypt(A)),D=new Date,O="UTC--"+(D.getUTCFullYear()+"-"+J8(D.getUTCMonth()+1,2)+"-"+J8(D.getUTCDate(),2)+"T"+J8(D.getUTCHours(),2)+"-"+J8(D.getUTCMinutes(),2)+"-"+J8(D.getUTCSeconds(),2)+".0Z")+"--"+d.address;d["x-ethers"]={client:p,gethFilename:O,path:g,locale:m,mnemonicCounter:Ke(S).substring(2),mnemonicCiphertext:Ke(B).substring(2),version:"0.1"}}return JSON.stringify(d)}function R4e(t,e,n){n==null&&(n={});const r=e9(e),s=P4e(n),i=I4(r,s.salt,s.N,s.r,s.p,64);return O4e(et(i),s,t,n)}async function _4e(t,e,n){n==null&&(n={});const r=e9(e),s=P4e(n),i=await S4(r,s.salt,s.N,s.r,s.p,64,n.progressCallback);return O4e(et(i),s,t,n)}const lq="m/44'/60'/0'/0/0",tmt=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),nb=2147483648,nmt=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),rmt="0123456789abcdef";function QM(t,e){let n="";for(;t;)n=rmt[t%16]+n,t=Math.trunc(t/16);for(;n.length<e*2;)n="0"+n;return"0x"+n}function bJ(t){const e=et(t),n=_s($f($f(e)),0,4),r=Qr([e,n]);return p6e(r)}const qh={};function B4e(t,e,n,r){const s=new Uint8Array(37);t&nb?(Ye(r!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),s.set(et(r),1)):s.set(et(n));for(let a=24;a>=0;a-=8)s[33+(a>>3)]=t>>24-a&255;const i=et(E4("sha512",e,s));return{IL:i.slice(0,32),IR:i.slice(32)}}function M4e(t,e){const n=e.split("/");Se(n.length>0,"invalid path","path",e),n[0]==="m"&&(Se(t.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${t.depth}`,"path",e),n.shift());let r=t;for(let s=0;s<n.length;s++){const i=n[s];if(i.match(/^[0-9]+'$/)){const a=parseInt(i.substring(0,i.length-1));Se(a<nb,"invalid path index",`path[${s}]`,i),r=r.deriveChild(nb+a)}else if(i.match(/^[0-9]+$/)){const a=parseInt(i);Se(a<nb,"invalid path index",`path[${s}]`,i),r=r.deriveChild(a)}else Se(!1,"invalid path component",`path[${s}]`,i)}return r}var p7,vJ,Px,TT;const Ed=class Ed extends zM{constructor(n,r,s,i,a,o,c,l,u){super(r,u);Le(this,p7);q(this,"publicKey");q(this,"fingerprint");q(this,"parentFingerprint");q(this,"mnemonic");q(this,"chainCode");q(this,"path");q(this,"index");q(this,"depth");Mb(n,qh,"HDNodeWallet"),tn(this,{publicKey:r.compressedPublicKey});const f=_s(A4($f(this.publicKey)),0,4);tn(this,{parentFingerprint:s,fingerprint:f,chainCode:i,path:a,index:o,depth:c}),tn(this,{mnemonic:l})}connect(n){return new Ed(qh,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,n)}async encrypt(n,r){return await _4e(Fe(this,p7,vJ).call(this),n,{progressCallback:r})}encryptSync(n){return R4e(Fe(this,p7,vJ).call(this),n)}get extendedKey(){return Ye(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),bJ(Qr(["0x0488ADE4",QM(this.depth,1),this.parentFingerprint,QM(this.index,4),this.chainCode,Qr(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new jk(qh,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(n){const r=er(n,"index");Se(r<=4294967295,"invalid index","index",r);let s=this.path;s&&(s+="/"+(r&~nb),r&nb&&(s+="'"));const{IR:i,IL:a}=B4e(r,this.chainCode,this.publicKey,this.privateKey),o=new tb(Mf((W7(a)+BigInt(this.privateKey))%nmt,32));return new Ed(qh,o,this.fingerprint,Ke(i),s,r,this.depth+1,this.mnemonic,this.provider)}derivePath(n){return M4e(this,n)}static fromExtendedKey(n){const r=xo(Gft(n));Se(r.length===82||bJ(r.slice(0,78))===n,"invalid extended key","extendedKey","[ REDACTED ]");const s=r[4],i=Ke(r.slice(5,9)),a=parseInt(Ke(r.slice(9,13)).substring(2),16),o=Ke(r.slice(13,45)),c=r.slice(45,78);switch(Ke(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const l=Ke(c);return new jk(qh,J7(l),l,i,o,null,a,s,null)}case"0x0488ade4":case"0x04358394 ":if(c[0]!==0)break;return new Ed(qh,new tb(c.slice(1)),i,o,null,a,s,null,null)}Se(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(n,r,s){var a;n==null&&(n=""),r==null&&(r=lq),s==null&&(s=O2.wordlist());const i=F5.fromEntropy(Eu(16),n,s);return Fe(a=Ed,Px,TT).call(a,i.computeSeed(),i).derivePath(r)}static fromMnemonic(n,r){var s;return r||(r=lq),Fe(s=Ed,Px,TT).call(s,n.computeSeed(),n).derivePath(r)}static fromPhrase(n,r,s,i){var o;r==null&&(r=""),s==null&&(s=lq),i==null&&(i=O2.wordlist());const a=F5.fromPhrase(n,r,i);return Fe(o=Ed,Px,TT).call(o,a.computeSeed(),a).derivePath(s)}static fromSeed(n){var r;return Fe(r=Ed,Px,TT).call(r,n,null)}};p7=new WeakSet,vJ=function(){const n={address:this.address,privateKey:this.privateKey},r=this.mnemonic;return this.path&&r&&r.wordlist.locale==="en"&&r.password===""&&(n.mnemonic={path:this.path,locale:"en",entropy:r.entropy}),n},Px=new WeakSet,TT=function(n,r){Se(zg(n),"invalid seed","seed","[REDACTED]");const s=et(n,"seed");Se(s.length>=16&&s.length<=64,"invalid seed","seed","[REDACTED]");const i=et(E4("sha512",tmt,s)),a=new tb(Ke(i.slice(0,32)));return new Ed(qh,a,"0x00000000",Ke(i.slice(32)),"m",0,0,r,null)},Le(Ed,Px);let aN=Ed;class jk extends dJ{constructor(n,r,s,i,a,o,c,l,u){super(r,u);q(this,"publicKey");q(this,"fingerprint");q(this,"parentFingerprint");q(this,"chainCode");q(this,"path");q(this,"index");q(this,"depth");Mb(n,qh,"HDNodeVoidWallet"),tn(this,{publicKey:s});const f=_s(A4($f(s)),0,4);tn(this,{publicKey:s,fingerprint:f,parentFingerprint:i,chainCode:a,path:o,index:c,depth:l})}connect(n){return new jk(qh,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,n)}get extendedKey(){return Ye(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),bJ(Qr(["0x0488B21E",QM(this.depth,1),this.parentFingerprint,QM(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(n){const r=er(n,"index");Se(r<=4294967295,"invalid index","index",r);let s=this.path;s&&(s+="/"+(r&~nb),r&nb&&(s+="'"));const{IR:i,IL:a}=B4e(r,this.chainCode,this.publicKey,null),o=tb.addPoints(a,this.publicKey,!0),c=J7(o);return new jk(qh,c,o,this.fingerprint,Ke(i),s,r,this.depth+1,this.provider)}derivePath(n){return M4e(this,n)}}function wfe(t){try{if(JSON.parse(t).encseed)return!0}catch{}return!1}function bfe(t,e){const n=JSON.parse(t),r=e9(e),s=Fn(Bi(n,"ethaddr:string!")),i=T4e(Bi(n,"encseed:string!"));Se(i&&i.length%16===0,"invalid encseed","json",t);const a=et(Db(r,r,2e3,32,"sha256")).slice(0,16),o=i.slice(0,16),c=i.slice(16),l=new ite(a,o),u=Qgt(et(l.decrypt(c)));let f="";for(let d=0;d<u.length;d++)f+=String.fromCharCode(u[d]);return{address:s,privateKey:Tl(f)}}function vfe(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}var g7,m0,xJ;let ZM=(m0=class extends zM{constructor(e,n){typeof e=="string"&&!e.startsWith("0x")&&(e="0x"+e);let r=typeof e=="string"?new tb(e):e;super(r,n)}connect(e){return new m0(this.signingKey,e)}async encrypt(e,n){const r={address:this.address,privateKey:this.privateKey};return await _4e(r,e,{progressCallback:n})}encryptSync(e){const n={address:this.address,privateKey:this.privateKey};return R4e(n,e)}static async fromEncryptedJson(e,n,r){var i;let s=null;return mfe(e)?s=await emt(e,n,r):wfe(e)&&(r&&(r(0),await vfe(0)),s=bfe(e,n),r&&(r(1),await vfe(0))),Fe(i=m0,g7,xJ).call(i,s)}static fromEncryptedJsonSync(e,n){var s;let r=null;return mfe(e)?r=Xgt(e,n):wfe(e)?r=bfe(e,n):Se(!1,"invalid JSON wallet","json","[ REDACTED ]"),Fe(s=m0,g7,xJ).call(s,r)}static createRandom(e){const n=aN.createRandom();return e?n.connect(e):n}static fromPhrase(e,n){const r=aN.fromPhrase(e);return n?r.connect(n):r}},g7=new WeakSet,xJ=function(e){if(Se(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&e.mnemonic.locale==="en"){const r=F5.fromEntropy(e.mnemonic.entropy),s=aN.fromMnemonic(r,e.mnemonic.path);if(s.address===e.address&&s.privateKey===e.privateKey)return s;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const n=new m0(e.privateKey);return Se(n.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),n},Le(m0,g7),m0);const smt=[{type:"function",name:"isValidSignature",constant:!0,inputs:[{type:"bytes32"},{type:"bytes"}],outputs:[{type:"bytes4"}],payable:!1,stateMutability:"view"}],imt={isValidSignatureBytes32:"0x1626ba7e"};var amt=Object.freeze({__proto__:null,abi:smt,returns:imt});const omt=[{type:"function",name:"deploy",constant:!1,inputs:[{type:"address"},{type:"bytes32"}],outputs:[],payable:!0,stateMutability:"payable"}];var cmt=Object.freeze({__proto__:null,abi:omt});const lmt=[{type:"function",name:"nonce",constant:!0,inputs:[],outputs:[{type:"uint256"}],payable:!1,stateMutability:"view"},{type:"function",name:"readNonce",constant:!0,inputs:[{type:"uint256"}],outputs:[{type:"uint256"}],payable:!1,stateMutability:"view"},{type:"function",name:"updateImplementation",constant:!1,inputs:[{type:"address"}],outputs:[],payable:!1,stateMutability:"nonpayable"},{type:"function",name:"selfExecute",constant:!1,inputs:[{components:[{type:"bool",name:"delegateCall"},{type:"bool",name:"revertOnError"},{type:"uint256",name:"gasLimit"},{type:"address",name:"target"},{type:"uint256",name:"value"},{type:"bytes",name:"data"}],type:"tuple[]"}],outputs:[],payable:!1,stateMutability:"nonpayable"},{type:"function",name:"execute",constant:!1,inputs:[{components:[{type:"bool",name:"delegateCall"},{type:"bool",name:"revertOnError"},{type:"uint256",name:"gasLimit"},{type:"address",name:"target"},{type:"uint256",name:"value"},{type:"bytes",name:"data"}],type:"tuple[]"},{type:"uint256"},{type:"bytes"}],outputs:[],payable:!1,stateMutability:"nonpayable"},{type:"function",name:"createContract",inputs:[{type:"bytes"}],payable:!0,stateMutability:"payable"},{type:"function",name:"setExtraImageHash",constant:!1,inputs:[{type:"bytes32",name:"imageHash"},{type:"uint256",name:"expiration"}],outputs:[],payable:!1,stateMutability:"nonpayable"}];var umt=Object.freeze({__proto__:null,abi:lmt});const fmt=[{type:"function",name:"updateImageHash",constant:!0,inputs:[{type:"bytes32"}],outputs:[],payable:!1,stateMutability:"view"},{type:"function",name:"imageHash",constant:!0,inputs:[],outputs:[{type:"bytes32"}],payable:!1,stateMutability:"view"}];var dmt=Object.freeze({__proto__:null,abi:fmt});const hmt=[{inputs:[{internalType:"bytes4",name:"_signature",type:"bytes4"}],name:"HookAlreadyExists",type:"error"},{inputs:[{internalType:"bytes4",name:"_signature",type:"bytes4"}],name:"HookDoesNotExist",type:"error"},{inputs:[{internalType:"address",name:"_sender",type:"address"},{internalType:"address",name:"_self",type:"address"}],name:"OnlySelfAuth",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes4",name:"_signature",type:"bytes4"},{indexed:!1,internalType:"address",name:"_implementation",type:"address"}],name:"DefinedHook",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[{internalType:"bytes4",name:"_signature",type:"bytes4"},{internalType:"address",name:"_implementation",type:"address"}],name:"addHook",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155BatchReceived",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"_signature",type:"bytes4"}],name:"readHook",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"_signature",type:"bytes4"}],name:"removeHook",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"_interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{stateMutability:"payable",type:"receive"}];var pmt=Object.freeze({__proto__:null,abi:hmt});const gmt=[{type:"function",name:"PROXY_getImplementation",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"}];var mmt=Object.freeze({__proto__:null,abi:gmt});const qa={erc1271:amt,factory:cmt,mainModule:umt,mainModuleUpgradable:dmt,moduleHooks:pmt,walletProxyHook:mmt},D4e="3.7.8",ymt=D4e,C4=typeof Buffer=="function",xfe=typeof TextDecoder=="function"?new TextDecoder:void 0,Efe=typeof TextEncoder=="function"?new TextEncoder:void 0,wmt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",NT=Array.prototype.slice.call(wmt),eR=(t=>{let e={};return t.forEach((n,r)=>e[n]=r),e})(NT),bmt=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,go=String.fromCharCode.bind(String),Afe=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),L4e=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),U4e=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),F4e=t=>{let e,n,r,s,i="";const a=t.length%3;for(let o=0;o<t.length;){if((n=t.charCodeAt(o++))>255||(r=t.charCodeAt(o++))>255||(s=t.charCodeAt(o++))>255)throw new TypeError("invalid character found");e=n<<16|r<<8|s,i+=NT[e>>18&63]+NT[e>>12&63]+NT[e>>6&63]+NT[e&63]}return a?i.slice(0,a-3)+"===".substring(a):i},ate=typeof btoa=="function"?t=>btoa(t):C4?t=>Buffer.from(t,"binary").toString("base64"):F4e,EJ=C4?t=>Buffer.from(t).toString("base64"):t=>{let n=[];for(let r=0,s=t.length;r<s;r+=4096)n.push(go.apply(null,t.subarray(r,r+4096)));return ate(n.join(""))},F_=(t,e=!1)=>e?L4e(EJ(t)):EJ(t),vmt=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?go(192|e>>>6)+go(128|e&63):go(224|e>>>12&15)+go(128|e>>>6&63)+go(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return go(240|e>>>18&7)+go(128|e>>>12&63)+go(128|e>>>6&63)+go(128|e&63)}},xmt=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,V4e=t=>t.replace(xmt,vmt),Sfe=C4?t=>Buffer.from(t,"utf8").toString("base64"):Efe?t=>EJ(Efe.encode(t)):t=>ate(V4e(t)),z3=(t,e=!1)=>e?L4e(Sfe(t)):Sfe(t),Ife=t=>z3(t,!0),Emt=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Amt=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return go((n>>>10)+55296)+go((n&1023)+56320);case 3:return go((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return go((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},$4e=t=>t.replace(Emt,Amt),j4e=t=>{if(t=t.replace(/\s+/g,""),!bmt.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n,r,s=[];for(let i=0;i<t.length;)e=eR[t.charAt(i++)]<<18|eR[t.charAt(i++)]<<12|(n=eR[t.charAt(i++)])<<6|(r=eR[t.charAt(i++)]),n===64?s.push(go(e>>16&255)):r===64?s.push(go(e>>16&255,e>>8&255)):s.push(go(e>>16&255,e>>8&255,e&255));return s.join("")},ote=typeof atob=="function"?t=>atob(U4e(t)):C4?t=>Buffer.from(t,"base64").toString("binary"):j4e,H4e=C4?t=>Afe(Buffer.from(t,"base64")):t=>Afe(ote(t).split("").map(e=>e.charCodeAt(0))),q4e=t=>H4e(K4e(t)),Smt=C4?t=>Buffer.from(t,"base64").toString("utf8"):xfe?t=>xfe.decode(H4e(t)):t=>$4e(ote(t)),K4e=t=>U4e(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),AJ=t=>Smt(K4e(t)),Imt=t=>{if(typeof t!="string")return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},G4e=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),W4e=function(){const t=(e,n)=>Object.defineProperty(String.prototype,e,G4e(n));t("fromBase64",function(){return AJ(this)}),t("toBase64",function(e){return z3(this,e)}),t("toBase64URI",function(){return z3(this,!0)}),t("toBase64URL",function(){return z3(this,!0)}),t("toUint8Array",function(){return q4e(this)})},z4e=function(){const t=(e,n)=>Object.defineProperty(Uint8Array.prototype,e,G4e(n));t("toBase64",function(e){return F_(this,e)}),t("toBase64URI",function(){return F_(this,!0)}),t("toBase64URL",function(){return F_(this,!0)})},Cmt=()=>{W4e(),z4e()},Cfe={version:D4e,VERSION:ymt,atob:ote,atobPolyfill:j4e,btoa:ate,btoaPolyfill:F4e,fromBase64:AJ,toBase64:z3,encode:z3,encodeURI:Ife,encodeURL:Ife,utob:V4e,btou:$4e,decode:AJ,isValid:Imt,fromUint8Array:F_,toUint8Array:q4e,extendString:W4e,extendUint8Array:z4e,extendBuiltins:Cmt},Tmt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Nmt=t=>t!=null&&(typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||rs(t)||typeof t=="bigint"),J3=t=>{const e=t.toString(16);return`${e.length%2===0?"0x":"0x0"}${e}`},kT=(t,e)=>typeof e=="bigint"?{$bigint:e.toString()}:e,kmt=t=>et(typeof t=="string"?Tl(t):yr(t)),Pmt=(t,e,n)=>kr(["string","uint256","address","bytes32"],["",e,t,n]),Tfe=(t,e,n)=>yr(Pmt(t,e,n));function XM(){return XM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XM.apply(null,arguments)}var md=function(t){return t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.DISABLED=5]="DISABLED",t}(md||{});let Omt=class{constructor(e){this.config=e,this.logLevel=void 0,this.configure(e)}configure(e){switch(this.config=XM({},this.config,e),this.config.logLevel){case"DEBUG":this.logLevel=md.DEBUG;break;case"INFO":this.logLevel=md.INFO;break;case"WARN":this.logLevel=md.WARN;break;case"ERROR":this.logLevel=md.ERROR;break;case"DISABLED":this.logLevel=md.DISABLED;break;default:this.logLevel=md.INFO;break}this.config.silence===void 0&&(this.config.silence=!1)}debug(e,...n){this.config.silence!==!0&&this.logLevel===md.DEBUG&&console.log(e,...n)}info(e,...n){this.config.silence!==!0&&this.logLevel<=md.INFO&&console.log(e,...n)}warn(e,...n){this.config.silence!==!0&&this.logLevel<=md.WARN&&(console.warn(e,...n),this.config.onwarn&&this.config.onwarn(e,n))}error(e,...n){this.config.silence!==!0&&this.logLevel<=md.ERROR&&(console.error(e,...n),this.config.onerror&&this.config.onerror(e,n))}};const ya=new Omt({logLevel:"INFO",silence:!0}),J4e=(t,e,n)=>{const r=new F0(t);return n&&r.setHeader("Authorization",`BEARER ${n}`),e&&r.setHeader("X-Access-Key",e),r},Rmt=t=>{const e=XM({},t.types);return delete e.EIP712Domain,mb.hash(t.domain,e,t.message)},cte=t=>et(Rmt(t));function Ao(){return Ao=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ao.apply(null,arguments)}function t9(t){return Zx(["bytes","uint256","address","bytes32"],["0x1901",t.chainId,t.address,t.digest])}function Y4e(t){return t.digest!==void 0&&t.chainId!==void 0&&t.address!==void 0}var _mt=Object.freeze({__proto__:null,subdigestOf:t9,isSignedPayload:Y4e});const Bmt="0x1626ba7e",Mmt=[{inputs:[{internalType:"bytes32",type:"bytes32"},{internalType:"bytes",type:"bytes"}],name:"isValidSignature",outputs:[{internalType:"bytes4",type:"bytes4"}],stateMutability:"view",type:"function"}];async function Q4e(t,e,n,r){return await new Si(t,Mmt,r).isValidSignature(e,n)===Bmt}var Dmt=Object.freeze({__proto__:null,isValidEIP1271Signature:Q4e});let rb=function(t){return t[t.EIP712=1]="EIP712",t[t.ETH_SIGN=2]="ETH_SIGN",t[t.WALLET_BYTES32=3]="WALLET_BYTES32",t}({});function Lmt(t){const e=et(t),n=e[e.length-1];return n===rb.EIP712||n===rb.ETH_SIGN}function n9(t,e){const n=et(e),r=et(t),s=n[n.length-1],i=Ke(n.slice(0,32)),a=Ke(n.slice(32,64)),o=Number(Ke(n.slice(64,65))),c={r:i,s:a,v:o};if(s===rb.EIP712)return KM(r,c);if(s===rb.ETH_SIGN)return KM(EU(r),c);throw new Error(`Unsupported signature type: ${s}`)}function lte(t,e,n,r){const s=et(n),i=s[s.length-1];if(i===rb.EIP712||i===rb.ETH_SIGN)return t===n9(e,n);if(i===rb.WALLET_BYTES32)return Q4e(t,Ke(e),s.slice(0,-1),r);throw new Error(`Unsupported signature type: ${i}`)}function Umt(t,e){const n=et(e);if(n.length===66)try{return n9(t,n)}catch{}}var Fmt=Object.freeze({__proto__:null,SigType:rb,canRecover:Lmt,recoverSigner:n9,isValidSignature:lte,tryRecoverSigner:Umt});let e2=function(t){return t[t.EOASignature=0]="EOASignature",t[t.Address=1]="Address",t[t.DynamicSignature=2]="DynamicSignature",t}({});function ute(t){return t.address!==void 0&&!Z4e(t)}function Z4e(t){return t.signature!==void 0&&t.weight!==void 0&&t.isDynamic!==void 0}function X4e(t){return t.threshold!==void 0&&t.signers!==void 0}function e8e(t){const e=et(t),n=e[0]<<8|e[1],r=[];for(let s=2;s<e.length;){const i=e[s++],a=e[s++];switch(i){case e2.EOASignature:r.push({unrecovered:!0,weight:a,signature:Ke(e.slice(s,s+66)),isDynamic:!1}),s+=66;break;case e2.Address:r.push({weight:a,address:Fn(Ke(e.slice(s,s+20)))}),s+=20;break;case e2.DynamicSignature:const o=Fn(Ke(e.slice(s,s+20)));s+=20;const c=e[s]<<8|e[s+1];s+=2,r.push({unrecovered:!0,weight:a,signature:Ke(e.slice(s,s+c)),address:o,isDynamic:!0}),s+=c;break;default:throw new Error(`Unknown signature part type: ${i}`)}}return{version:1,threshold:n,signers:r}}function fte(t){if(zg(t))return Ke(t);const{signers:e,threshold:n}=X4e(t)?t:t.config,r=e.map(s=>{if(ute(s))return kr(["uint8","uint8","address"],[e2.Address,s.weight,s.address]);if(s.isDynamic){const i=et(s.signature);return kr(["uint8","uint8","address","uint16","bytes"],[e2.DynamicSignature,s.weight,s.address,i.length,i])}return kr(["uint8","uint8","bytes"],[e2.EOASignature,s.weight,s.signature])});return kr(["uint16",...new Array(r.length).fill("bytes")],[n,...r])}async function t8e(t,e,n){const r=t9(e),s=await Promise.all(t.signers.map(async i=>{if(ute(i))return i;if(i.isDynamic){if(!i.address)throw new Error("Dynamic signature part must have address");if(!lte(i.address,r,i.signature,n))throw new Error(`Invalid dynamic signature part ${i.address}`);return{address:i.address,weight:i.weight,signature:i.signature}}else return{address:n9(r,i.signature),weight:i.weight,signature:i.signature}}));return{version:1,payload:e,subdigest:r,config:{version:1,threshold:t.threshold,signers:s}}}function oN(t,e,n,r){if(n.length!==0)throw new Error("Explicit subdigests not supported on v1");let s=0n;const i=t.signers.map(o=>{if(!e.has(o.address))return o;const c=e.get(o.address),l=et(c.signature);return s+=BigInt(o.weight),c.isDynamic||l.length!==66?Ao({},o,{isDynamic:!0,signature:c.signature,address:o.address}):Ao({},o,{isDynamic:!1,signature:c.signature})});return{encoded:fte({version:1,threshold:t.threshold,signers:i}),weight:s}}const dte={decode:t=>e8e(t),encode:t=>fte(t),trim:async t=>t,supportsNoChainId:!0,recover:(t,e,n)=>t8e(t,e,n),encodeSigners:(t,e,n,r)=>oN(t,e,n),hasEnoughSigningPower:(t,e)=>{const{weight:n}=dte.encodeSigners(t,e,[],0);return n>=BigInt(t.threshold)},chainSignatures:(t,e)=>{throw new Error("Signature chaining not supported on v1")},hashSetImageHash:function(t){throw new Error("Image hash not supported on v1")},signaturesOf(t){return t.signers.filter(e=>e.signature!==void 0).map(e=>({address:e.address,signature:e.signature}))},signaturesOfDecoded:function(t){return t.signers.map(e=>e.signature).filter(e=>e!==void 0)}};var Vmt=Object.freeze({__proto__:null,SignaturePartType:e2,isAddressMember:ute,isUnrecoveredSignatureMember:Z4e,isUnrecoveredSignature:X4e,decodeSignature:e8e,encodeSignature:fte,recoverSignature:t8e,encodeSigners:oN,SignatureCoder:dte});const hte={isWalletConfig:t=>t.version===1&&t.threshold!==void 0&&t.signers!==void 0,imageHashOf:t=>t.signers.reduce((e,n)=>yr(uc.defaultAbiCoder().encode(["bytes32","uint8","address"],[e,n.weight,n.address])),kr(["uint256"],[t.threshold])),hasSubdigest:(t,e)=>!1,isComplete:t=>!0,checkpointOf:t=>0n,signersOf:t=>t.signers.map(e=>({address:e.address,weight:Number(e.weight)})),fromSimple:t=>{if(BigInt(t.checkpoint)!==0n)throw new Error("v1 wallet config does not support checkpoint");if(t.subdigests&&t.subdigests.length>0)throw new Error("v1 wallet config does not support subdigests");return{version:1,threshold:t.threshold,signers:t.signers}},update:{isKindUsed:!0,buildTransaction:(t,e,n,r)=>{const s=new Ya([...qa.mainModule.abi,...qa.mainModuleUpgradable.abi]),i=[];return(!r||r==="first")&&i.push({to:t,data:s.encodeFunctionData(s.getFunction("updateImplementation"),[n.mainModuleUpgradable]),gasLimit:0,delegateCall:!1,revertOnError:!0,value:0}),i.push({to:t,data:s.encodeFunctionData(s.getFunction("updateImageHash"),[hte.imageHashOf(e)]),gasLimit:0,delegateCall:!1,revertOnError:!0,value:0}),{entrypoint:t,transactions:i}},decodeTransaction:function(t){throw new Error("Function not implemented.")}},toJSON:function(t){const e=t.signers.map(n=>({weight:BigInt(n.weight).toString(),address:n.address}));return JSON.stringify({version:t.version,threshold:BigInt(t.threshold).toString(),signers:e})},fromJSON:function(t){const e=JSON.parse(t),n=e.signers.map(r=>({weight:BigInt(r.weight),address:r.address}));return{version:e.version,threshold:BigInt(e.threshold),signers:n}},editConfig:function(t,e){var n;const r=t.signers.slice();if(e.checkpoint&&BigInt(e.checkpoint)!==0n)throw new Error("v1 wallet config does not support checkpoint");if(e.add)for(const s of e.add)r.find(i=>i.address===s.address)||r.push({weight:s.weight,address:s.address});if(e.remove)for(const s of e.remove){const i=r.findIndex(a=>a.address===s);i>=0&&r.splice(i,1)}return{version:t.version,threshold:(n=e.threshold)!=null?n:t.threshold,signers:r}},buildStubSignature:function(t,e){const n=new Map;for(const[s,i]of e.entries()){n.set(s,{signature:i,isDynamic:!0});const{encoded:a,weight:o}=oN(t,n,[]);if(o>=BigInt(t.threshold))return a}const r=t.signers;for(const{address:s}of r.sort(({weight:i},{weight:a})=>Number(i)-Number(a))){n.set(s,{signature:"0x4e82f02f388a12b5f9d29eaf2452dd040c0ee5804b4e504b4dd64e396c6c781f2c7624195acba242dd825bfd25a290912e3c230841fd55c9a734c4de8d9899451b02",isDynamic:!1});const{encoded:a,weight:o}=oN(t,n,[]);if(o>=BigInt(t.threshold))return a}return oN(t,n,[]).encoded}};var $mt=Object.freeze({__proto__:null,ConfigCoder:hte}),jmt=Object.freeze({__proto__:null});const n8e=1,r8e={version:n8e,factory:"0xf9D09D634Fb818b05149329C1dcCFAeA53639d96",guestModule:"0x02390F3E6E5FD1C6786CB78FD3027C117a9955A7",mainModule:"0xd01F11855bCcb95f88D7A48492F66410d4637313",mainModuleUpgradable:"0x7EFE6cE415956c5f80C6530cC6cc81b4808F6118",walletCreationCode:"0x603a600e3d39601a805130553df3363d3d373d3d3d363d30545af43d82803e903d91601857fd5bf3"};var Bv=Object.freeze({__proto__:null,config:$mt,context:jmt,signature:Vmt,version:n8e,DeployedWalletContext:r8e});const pte="0x8713a7c4465f6fbee2b6e9d6646d1d9f83fec929edfc4baf661f3c865bdd04d1";function s8e(t){return yr(i8e(t))}function i8e(t){return kr(["bytes32","bytes32"],[pte,t])}function a8e(t){const e=et(t);if(e.length===64&&Ke(e.slice(0,32))===pte)return Ke(e.slice(32,64))}function Hmt(t){return a8e(t)!==void 0}var qmt=Object.freeze({__proto__:null,SetImageHashPrefix:pte,hashSetImageHash:s8e,messageSetImageHash:i8e,decodeMessageSetImageHash:a8e,isMessageSetImageHash:Hmt});let Va=function(t){return t[t.Legacy=0]="Legacy",t[t.Dynamic=1]="Dynamic",t[t.NoChainIdDynamic=2]="NoChainIdDynamic",t[t.Chained=3]="Chained",t}({}),bi=function(t){return t[t.Signature=0]="Signature",t[t.Address=1]="Address",t[t.DynamicSignature=2]="DynamicSignature",t[t.Node=3]="Node",t[t.Branch=4]="Branch",t[t.Subdigest=5]="Subdigest",t[t.Nested=6]="Nested",t}({});const eD=66;function R2(t){return t.left!==void 0&&t.right!==void 0}function T4(t){return t.tree!==void 0}function r9(t){return t.unrecovered&&t.signature!==void 0&&t.isDynamic!==void 0}function tD(t){let e=et(t),n;const r=(s,i)=>s?s.right?{left:s,right:i}:{left:s.left,right:i}:{left:i};for(;e.length>0;){const s=e[0];switch(e=e.slice(1),s){case bi.Signature:{const i=e[0],a=Ke(e.slice(1,eD+1));n=r(n,{signature:a,weight:i,unrecovered:!0,isDynamic:!1}),e=e.slice(eD+1)}break;case bi.Address:{const i=e[0],a=Fn(Ke(e.slice(1,21)));n=r(n,{address:a,weight:i}),e=e.slice(21)}break;case bi.DynamicSignature:{const i=e[0],a=Fn(Ke(e.slice(1,21))),o=e[21]<<16|e[22]<<8|e[23],c=Ke(e.slice(24,24+o));n=r(n,{address:a,signature:c,weight:i,unrecovered:!0,isDynamic:!0}),e=e.slice(24+o)}break;case bi.Node:{const i=Ke(e.slice(0,32));n=r(n,{nodeHash:i}),e=e.slice(32)}break;case bi.Branch:{const i=e[0]<<16|e[1]<<8|e[2],a=tD(e.slice(3,3+i));n=r(n,a),e=e.slice(3+i)}break;case bi.Subdigest:{const i=Ke(e.slice(0,32));n=r(n,{subdigest:i}),e=e.slice(32)}break;case bi.Nested:{const i=e[0],a=e[1]<<8|e[2],o=e[3]<<16|e[4]<<8|e[5],c=tD(e.slice(6,6+o));n=r(n,{weight:i,threshold:a,tree:c}),e=e.slice(6+o)}break;default:throw new Error(`Unknown signature part type: ${s}: ${Ke(e)}`)}}if(!n)throw new Error("Empty signature tree");return n.right?n:n.left}class o8e extends Error{constructor(e){super(`Invalid signature leaf: ${JSON.stringify(e)}`),this.leaf=e}}async function t2(t,e,n){if(R2(t)){const[r,s]=await Promise.all([t2(t.left,e,n),t2(t.right,e,n)]);return{left:r,right:s}}if(T4(t))return{weight:t.weight,threshold:t.threshold,tree:await t2(t.tree,e,n)};if(r9(t))if(t.isDynamic){if(!t.address)throw new Error("Dynamic signature leaf without address");if(!await lte(t.address,e,t.signature,n))throw new o8e(t);return{weight:t.weight,address:t.address,signature:t.signature,subdigest:e}}else return{weight:t.weight,address:n9(e,t.signature),signature:t.signature,subdigest:e};return t}const zo={concat:(t,e)=>kr(["bytes","bytes"],[t,e]),node:t=>kr(["uint8","bytes32"],[bi.Node,t]),branch:t=>{const e=et(t);return kr(["uint8","uint24","bytes"],[bi.Branch,e.length,e])},nested:(t,e,n)=>{const r=et(n);return kr(["uint8","uint8","uint16","uint24","bytes"],[bi.Nested,t,e,r.length,r])},subdigest:t=>kr(["uint8","bytes32"],[bi.Subdigest,t]),signature:(t,e)=>kr(["uint8","uint8","bytes"],[bi.Signature,t,e]),dynamicSignature:(t,e,n)=>{const r=et(n);return kr(["uint8","uint8","address","uint24","bytes"],[bi.DynamicSignature,t,e,r.length,r])},address:(t,e)=>kr(["uint8","uint8","address"],[bi.Address,t,e])};function cN(t,e,n,r,s={}){const i=lN(t.tree,e,n,s);return BigInt(r)===0n?{encoded:kr(["uint8","uint16","uint32","bytes"],[Va.NoChainIdDynamic,t.threshold,t.checkpoint,i.encoded]),weight:i.weight}:BigInt(t.threshold)>255n?{encoded:kr(["uint8","uint16","uint32","bytes"],[Va.Dynamic,t.threshold,t.checkpoint,i.encoded]),weight:i.weight}:{encoded:kr(["uint8","uint8","uint32","bytes"],[Va.Legacy,t.threshold,t.checkpoint,i.encoded]),weight:i.weight}}function lN(t,e,n,r={}){const s=!r.disableTrim;if(uh(t)){const i=lN(t.left,e,n),a=lN(t.right,e,n),o=jc(t.left),c=jc(t.right);return s&&i.weight===0n&&a.weight===0n&&!o&&!c?{encoded:zo.node(kf(t)),weight:0n}:s&&a.weight===0n&&!c?{encoded:zo.concat(i.encoded,zo.node(kf(t.right))),weight:i.weight}:s&&i.weight===0n&&!o?{encoded:zo.concat(zo.node(kf(t.left)),zo.branch(a.encoded)),weight:a.weight}:{encoded:zo.concat(i.encoded,zo.branch(a.encoded)),weight:i.weight+a.weight}}if(cm(t)){const i=lN(t.tree,e,n);return s&&i.weight===0n?{encoded:zo.node(kf(t)),weight:0n}:{encoded:zo.nested(t.weight,t.threshold,i.encoded),weight:i.weight}}if(lm(t))return{encoded:zo.node(kf(t)),weight:0n};if(om(t)){const i=n.includes(t.subdigest);return{encoded:zo.subdigest(t.subdigest),weight:i?Tmt:0n}}if(jc(t))if(e.has(t.address)){const a=e.get(t.address),o=a.signature;return r.forceDynamicEncoding||a.isDynamic?{encoded:zo.dynamicSignature(t.weight,t.address,o),weight:BigInt(t.weight)}:{encoded:zo.signature(t.weight,o),weight:BigInt(t.weight)}}else return{encoded:zo.address(t.weight,t.address),weight:0n};throw new Error(`Invalid topology - unknown error: ${JSON.stringify(t)}`)}function gte(t){return yte(t)?gte(t.suffix[t.suffix.length-1]):t.config}function mte(t){return t.type!==void 0&&t.decoded!==void 0&&t.version!==void 0&&t.version===2}function s9(t){return t.suffix!==void 0&&Array.isArray(t.suffix)&&t.suffix.every(mte)}function c8e(t){return t.type!==void 0&&t.config!==void 0&&t.digest!==void 0&&t.version!==void 0&&t.version===2}function yte(t){return t.chain!==void 0&&Array.isArray(t.chain)&&t.chain.every(c8e)}function PU(t){const e=et(t),n=e[0];switch(n){case Va.Legacy:return{version:2,type:Va.Legacy,decoded:V_(e)};case Va.Dynamic:return{version:2,type:Va.Dynamic,decoded:V_(e.slice(1))};case Va.NoChainIdDynamic:return{version:2,type:Va.NoChainIdDynamic,decoded:V_(e.slice(1))};case Va.Chained:return l8e(e);default:throw new Error(`Invalid signature type: ${n}`)}}function V_(t){const e=et(t),n=e[0]<<8|e[1],r=e[2]<<24|e[3]<<16|e[4]<<8|e[5],s=tD(e.slice(6));return{threshold:n,checkpoint:r,tree:s}}function l8e(t){const e=et(t),n=e[0];if(n!==Va.Chained)throw new Error(`Expected chained signature type: ${n}`);const r=[];let s=1;for(;s<e.length;){const o=e[s]<<16|e[s+1]<<8|e[s+2];s+=3;const c=PU(e.slice(s,s+o));r.push(c),s+=o}const i=r[0];if(s9(i))throw new Error("Expected first link of chained signature to be a simple signature (not chained)");const a=r.slice(1);return Ao({},i,{suffix:a})}function u8e(t){return kr(["bytes32","bytes32"],[Zx(["string"],["SetImageHash(bytes32 imageHash)"]),t])}async function wte(t,e,n){const r=e.subdigest===void 0?e:void 0;t.type===Va.NoChainIdDynamic&&r&&(r.chainId=0);const i=r?t9(r):e.subdigest;if(!s9(t)){const u=await t2(t.decoded.tree,i,n);return{version:2,type:t.type,subdigest:i,config:Ao({version:2},t.decoded,{tree:u})}}if(!Y4e(r))throw new Error("Chained signature recovery requires detailed signed payload, subdigest is not enough");const a=[];let o=r;for(const u of[Ao({},t,{suffix:void 0}),...t.suffix]){const f=await wte(u,o,n);a.unshift(f);const d=u8e(vte(gte(f)));o=Ao({},o,{message:d,digest:yr(d)})}const c=a[0],l=a.slice(1);return Ao({},c,{suffix:l})}function OU(t,e){const r=[t,...e||[]].map(i=>et(sb(i))),s=kr(r.map(()=>["uint24","bytes"]).flat(),r.map(i=>[i.length,i]).flat());return kr(["uint8","bytes"],[Va.Chained,s])}function sb(t){if(zg(t))return Ke(t);if(s9(t)||yte(t))return OU(sb(t),(t.suffix||[]).map(sb));const e=mte(t)?t.decoded:t.config;switch(t.type){case Va.Legacy:if(BigInt(e.threshold)>255n)throw new Error(`Legacy signature threshold is too large: ${e.threshold} (max 255)`);return SJ(e);case Va.NoChainIdDynamic:case Va.Dynamic:return kr(["uint8","bytes"],[t.type,SJ(e)]);case Va.Chained:throw new Error("Unreachable code: Chained signature should be handled above");default:throw new Error(`Invalid signature type: ${t.type}`)}}function SJ(t){return kr(["uint16","uint32","bytes"],[t.threshold,t.checkpoint,uN(t.tree)])}function uN(t){if(uh(t)||R2(t)){const e=et(uN(t.right)),n=et(uN(t.left));return uh(t.right)||R2(t.right)?kr(["bytes","uint8","uint24","bytes"],[n,bi.Branch,e.length,e]):kr(["bytes","bytes"],[n,e])}if(cm(t)||T4(t)){const e=et(uN(t.tree));return kr(["uint8","uint8","uint16","uint24","bytes"],[bi.Nested,t.weight,t.threshold,e.length,e])}if(r9(t)||jc(t)&&t.signature!==void 0){const e=et(t.signature);if(t.isDynamic||e.length!==eD){if(!t.address)throw new Error("Dynamic signature leaf must have address");return kr(["uint8","uint8","address","uint24","bytes"],[bi.DynamicSignature,t.weight,t.address,e.length,e])}else return kr(["uint8","uint8","bytes"],[bi.Signature,t.weight,e])}if(jc(t))return kr(["uint8","uint8","address"],[bi.Address,t.weight,t.address]);if(lm(t))return kr(["uint8","bytes32"],[bi.Node,t.nodeHash]);if(om(t))return kr(["uint8","bytes32"],[bi.Subdigest,t.subdigest]);throw new Error(`Unknown signature tree type: ${t}`)}function fN(t){return uh(t)?[...fN(t.left),...fN(t.right)]:cm(t)?fN(t.tree):jc(t)&&t.signature?[{address:t.address,signature:t.signature}]:[]}function dN(t){return R2(t)?[...dN(t.left),...dN(t.right)]:T4(t)?dN(t.tree):r9(t)?[t.signature]:[]}function $_(t){return R2(t)?[...$_(t.left),...$_(t.right)]:T4(t)?$_(t.tree):om(t)?[t.subdigest]:[]}async function nD(t){const e=typeof t=="string"?PU(t):t;if(s9(e)){const r=await Promise.all([nD(Ao({},e,{suffix:void 0})),...e.suffix.map(s=>nD(s))]);return OU(r[0],r.slice(1))}const{trimmed:n}=await hN(e.decoded.tree);return sb(Ao({},e,{decoded:Ao({},e.decoded,{tree:n})}))}async function hN(t,e=!0){if(R2(t)){const[n,r]=await Promise.all([hN(t.left),hN(t.right)]);if(n.weight===0&&r.weight===0)try{const s=await t2(t,Ow,void 0);return{weight:0,trimmed:{nodeHash:kf(s)}}}catch{}else return{weight:n.weight+r.weight,trimmed:{left:n.trimmed,right:r.trimmed}}}if(T4(t)){const n=await hN(t.tree);if(n.weight===0)try{const r=await t2(t,Ow,void 0);return{weight:0,trimmed:{nodeHash:kf(r)}}}catch{}return{weight:n.weight,trimmed:{weight:t.weight,threshold:t.threshold,tree:n.trimmed}}}return lm(t)&&h8e(t.nodeHash)?{weight:0,trimmed:Ao({},d8e(t.nodeHash))}:r9(t)||jc(t)&&t.signature!==void 0?{weight:Number(t.weight),trimmed:t}:!e&&om(t)?{weight:1/0,trimmed:t}:{weight:0,trimmed:t}}const RU={decode:t=>PU(t),encode:t=>sb(t),trim:t=>nD(t),supportsNoChainId:!0,recover:(t,e,n)=>wte(t,e,n),encodeSigners:(t,e,n,r)=>cN(t,e,n,r),hasEnoughSigningPower:(t,e)=>{const{weight:n}=RU.encodeSigners(t,e,[],0);return n>=BigInt(t.threshold)},chainSignatures:(t,e)=>{const n=e.reverse(),r=zg(t)?t:sb(t),s=n.map(i=>zg(i)?i:sb(i));return OU(r,s)},hashSetImageHash:function(t){return s8e(t)},signaturesOf(t){return fN(t.tree)},signaturesOfDecoded:function(t){return dN(t.decoded.tree)}};var Kmt=Object.freeze({__proto__:null,SignatureType:Va,SignaturePartType:bi,SignaturePartTypeLength:eD,isUnrecoveredNode:R2,isUnrecoveredNestedLeaf:T4,isUnrecoveredSignatureLeaf:r9,decodeSignatureTree:tD,InvalidSignatureLeafError:o8e,recoverTopology:t2,partEncoder:zo,encodeSigners:cN,encodeTree:lN,deepestConfigOfSignature:gte,isUnrecoveredSignature:mte,isUnrecoveredChainedSignature:s9,isSignature:c8e,isChainedSignature:yte,decodeSignature:PU,decodeSignatureBody:V_,decodeChainedSignature:l8e,setImageHashStruct:u8e,recoverSignature:wte,encodeChain:OU,encodeSignature:sb,encodeSignatureBody:SJ,encodeSignatureTree:uN,signaturesOf:fN,signaturesOfDecoded:dN,subdigestsOfDecoded:$_,trimSignature:nD,trimUnrecoveredTree:hN,SignatureCoder:RU});function jc(t){return t.address!==void 0&&t.weight!==void 0}function om(t){return t.subdigest!==void 0&&t.address===void 0}function pN(t){return uh(t)?JSON.stringify({left:pN(t.left),right:pN(t.right)}):cm(t)?JSON.stringify({weight:BigInt(t.weight).toString(),threshold:BigInt(t.threshold).toString(),tree:pN(t.tree)}):jc(t)?JSON.stringify({address:t.address,weight:BigInt(t.weight).toString()}):JSON.stringify(t)}function gN(t){const e=typeof t=="string"?JSON.parse(t):t;return e.left!==void 0&&e.right!==void 0?{left:gN(e.left),right:gN(e.right)}:e.weight!==void 0&&e.threshold!==void 0&&e.tree!==void 0?{weight:BigInt(e.weight),threshold:BigInt(e.threshold),tree:gN(e.tree)}:e.address!==void 0&&e.weight!==void 0?{address:e.address,weight:BigInt(e.weight)}:e}function cm(t){return t.tree!==void 0&&t.weight!==void 0&&t.threshold!==void 0}function lm(t){return t.nodeHash!==void 0}function bte(t){return jc(t)||om(t)||cm(t)||lm(t)}function uh(t){return t.left!==void 0&&t.right!==void 0}function Gmt(t){return uh(t)||bte(t)}function f8e(t){return kr(["uint96","address"],[t.weight,t.address])}function d8e(t){const e=et(t);if(e.length!==32)throw new Error("Invalid encoded string length");const n=BigInt(Ke(e.slice(0,12))),r=Fn(Ke(e.slice(12)));return{weight:n,address:r}}function h8e(t){const e=et(t);return e.length!==32?!1:e.slice(0,11).every(r=>r===0)}function kf(t){if(jc(t))return f8e(t);if(om(t))return Zx(["string","bytes32"],[`Sequence static digest:
`,t.subdigest]);if(cm(t)){const e=kf(t.tree);return Zx(["string","bytes32","uint256","uint256"],[`Sequence nested config:
`,e,t.threshold,t.weight])}return lm(t)?t.nodeHash:Zx(["bytes32","bytes32"],[kf(t.left),kf(t.right)])}function Wmt(t){const e=[];let n=t;for(;!bte(n);)e.unshift(n.right),n=n.left;return e.unshift(n),e}function zmt(t){return t.threshold!==void 0&&t.checkpoint!==void 0&&t.tree!==void 0&&t.version!==void 0&&t.version===2}function vte(t){return Zx(["bytes32","uint256"],[Zx(["bytes32","uint256"],[kf(t.tree),t.threshold]),t.checkpoint])}function p8e(t){return t.threshold!==void 0&&t.weight!==void 0&&t.members!==void 0}function Y3(t){return jc(t)||om(t)?[t]:cm(t)?[{threshold:t.threshold,weight:t.weight,members:Y3(t.tree)}]:lm(t)?[]:[...Y3(t.left),...Y3(t.right)]}function IJ(t){return lm(t)?!0:uh(t)?IJ(t.left)||IJ(t.right):!1}function Jmt(t){return{threshold:t.threshold,checkpoint:t.checkpoint,members:Y3(t.tree)}}const g8e=(t,e)=>t.map(n=>p8e(n)?{tree:e(n.members),threshold:n.threshold,weight:n.weight}:n);function xte(t){if(t.length===0)throw new Error("Empty members array");return g8e(t,xte).reduce((n,r)=>({left:n,right:r}))}function Ete(t){if(t.length===0)throw new Error("Empty members array");const e=g8e(t,Ete);for(let n=e.length;n>1;n=n/2)for(let r=0;r<n/2;r++){const s=r*2,i=s+1;i>=n?e[r]=e[s]:e[r]={left:e[s],right:e[i]}}return e[0]}function Ate(t){return t.length>8?Ete(t):xte(t)}function m8e(t,e=Ate){return{version:2,threshold:t.threshold,checkpoint:t.checkpoint,tree:e(t.members)}}function rD(t,e){return om(t)?t.subdigest===e:uh(t)?rD(t.left,e)||rD(t.right,e):!1}function CJ(t){const e=[t],n=new Set;for(;e.length>0;){const r=e.pop();cm(r)?e.push(r.tree):uh(r)?(e.push(r.left),e.push(r.right)):jc(r)&&n.add({address:r.address,weight:Number(r.weight)})}return Array.from(n)}function sD(t){return uh(t)?sD(t.left)&&sD(t.right):!lm(t)}const _U={isWalletConfig:t=>t.version===2&&t.threshold!==void 0&&t.tree!==void 0,imageHashOf:t=>vte(t),hasSubdigest:(t,e)=>rD(t.tree,e),checkpointOf:t=>BigInt(t.checkpoint),signersOf:t=>CJ(t.tree),fromSimple:t=>{var e;return m8e(Ao({},t,{members:[...t.signers,...((e=t.subdigests)!=null?e:[]).map(n=>({subdigest:n}))]}))},isComplete:t=>sD(t.tree),update:{isKindUsed:!0,buildTransaction:(t,e,n,r)=>{const s=new Ya(qa.mainModuleUpgradable.abi);return{entrypoint:t,transactions:[{to:t,data:s.encodeFunctionData(s.getFunction("updateImageHash"),[_U.imageHashOf(e)]),gasLimit:0,delegateCall:!1,revertOnError:!0,value:0}]}},decodeTransaction:function(t){var e,n,r,s;const i=new Ya(qa.mainModuleUpgradable.abi);if(t.transactions.length!==1)throw new Error("Invalid transaction bundle, expected 1 transaction");const a=t.transactions[0].data;if(!a)throw new Error("Invalid transaction bundle, expected data");const o=i.decodeFunctionData(i.getFunction("updateImageHash"),a);if(!o)throw new Error("Invalid transaction bundle, expected valid data");if(t.transactions[0].to!==t.entrypoint)throw new Error("Invalid transaction bundle, expected to be sent to entrypoint");if(t.transactions[0].delegateCall)throw new Error("Invalid transaction bundle, expected not to be a delegateCall");if(!t.transactions[0].revertOnError)throw new Error("Invalid transaction bundle, expected revertOnError");if(BigInt((e=(n=t.transactions[0])==null?void 0:n.value)!=null?e:0)!==0n)throw new Error("Invalid transaction bundle, expected value to be 0");if(BigInt((r=(s=t.transactions[0])==null?void 0:s.gasLimit)!=null?r:0)!==0n)throw new Error("Invalid transaction bundle, expected value to be 0");return{address:t.entrypoint,newImageHash:o[0],kind:void 0}}},toJSON:function(t){return JSON.stringify({version:t.version,threshold:BigInt(t.threshold).toString(),checkpoint:BigInt(t.checkpoint).toString(),tree:pN(t.tree)})},fromJSON:function(t){const e=JSON.parse(t);return{version:e.version,threshold:BigInt(e.threshold),checkpoint:BigInt(e.checkpoint),tree:gN(e.tree)}},editConfig:function(t,e){var n,r;const s=Y3(t.tree);if(e.add)for(const i of e.add)s.find(a=>jc(a)&&a.address===i.address)||s.push({address:i.address,weight:i.weight});if(e.remove)for(const i of e.remove){const a=s.findIndex(o=>jc(o)&&o.address===i);a>=0&&s.splice(a,1)}return{version:t.version,threshold:(n=e.threshold)!=null?n:t.threshold,checkpoint:(r=e.checkpoint)!=null?r:t.checkpoint,tree:Ate(s)}},buildStubSignature:function(t,e){const n=new Map;for(const[s,i]of e.entries()){n.set(s,{signature:i,isDynamic:!0});const{encoded:a,weight:o}=cN(t,n,[],0);if(o>=BigInt(t.threshold))return a}const r=CJ(t.tree);for(const{address:s}of r.sort(({weight:i},{weight:a})=>i-a)){n.set(s,{signature:"0x4e82f02f388a12b5f9d29eaf2452dd040c0ee5804b4e504b4dd64e396c6c781f2c7624195acba242dd825bfd25a290912e3c230841fd55c9a734c4de8d9899451b02",isDynamic:!1});const{encoded:a,weight:o}=cN(t,n,[],0);if(o>=BigInt(t.threshold))return a}return cN(t,n,[],0).encoded}};var Ymt=Object.freeze({__proto__:null,isSignerLeaf:jc,isSubdigestLeaf:om,topologyToJSON:pN,topologyFromJSON:gN,isNestedLeaf:cm,isNodeLeaf:lm,isLeaf:bte,isNode:uh,isTopology:Gmt,encodeSignerLeaf:f8e,decodeSignerLeaf:d8e,isEncodedSignerLeaf:h8e,hashNode:kf,leftFace:Wmt,isWalletConfig:zmt,imageHash:vte,isSimpleNestedMember:p8e,topologyToMembers:Y3,hasUnknownNodes:IJ,toSimpleWalletConfig:Jmt,legacyTopologyBuilder:xte,merkleTopologyBuilder:Ete,optimized2SignersTopologyBuilder:Ate,toWalletConfig:m8e,hasSubdigest:rD,signersOf:CJ,isComplete:sD,ConfigCoder:_U}),Qmt=Object.freeze({__proto__:null});const Zmt={config:_U,signature:RU},y8e=2,w8e={version:y8e,factory:"0xFaA5c0b14d1bED5C888Ca655B9a8A5911F78eF4A",guestModule:"0xfea230Ee243f88BC698dD8f1aE93F8301B6cdfaE",mainModule:"0xfBf8f1A5E00034762D928f46d438B947f5d4065d",mainModuleUpgradable:"0x4222dcA3974E39A8b41c411FeDDE9b09Ae14b911",walletCreationCode:"0x603a600e3d39601a805130553df3363d3d373d3d3d363d30545af43d82803e903d91601857fd5bf3",proxyImplementationHook:"0x1f56dbAD5e8319F0DE9a323E24A31b5077dEB1a4"};var Xn=Object.freeze({__proto__:null,config:Ymt,signature:Kmt,context:Qmt,chained:qmt,coders:Zmt,version:y8e,DeployedWalletContext:w8e}),Xmt=Object.freeze({__proto__:null});function TJ(t,e){const n=yr(kr(["bytes","bytes32"],[t.walletCreationCode,th(t.mainModule,32)])),r=yr(kr(["bytes1","address","bytes32","bytes32"],["0xff",t.factory,e,n]));return Fn(_s(r,12))}async function eyt(t,e,n,r,s,i){return(await Promise.all(Eyt.map(async o=>{try{const c=o.signature.SignatureCoder.decode(Ke(n)),l=await o.signature.SignatureCoder.recover(c,{address:t,digest:Ke(e),chainId:r},s),u=o.config.ConfigCoder.imageHashOf(l.config);if(TJ(i[o.version],u).toLowerCase()===t.toLowerCase())return!0;const d=await o.signature.SignatureCoder.recover(c,{address:t,digest:Ke(e),chainId:r},s),p=o.config.ConfigCoder.imageHashOf(d.config);return TJ(i[o.version],p).toLowerCase()===t.toLowerCase()}catch{}return!1}))).some(o=>o)}function tyt(t){const e=Object.keys(t).length;for(let n=1;n<=e;n++){const r=t[n];if(!r||r.version!==n)return!1}return!0}function nyt(t){const e=Object.keys(t).length;return t[e]}const ryt={1:r8e,2:w8e};var syt=Object.freeze({__proto__:null,addressOf:TJ,isValidCounterfactual:eyt,isValidVersionedContext:tyt,latestContext:nyt,defaultContexts:ryt});const BU=`tuple(
  bool delegateCall,
  bool revertOnError,
  uint256 gasLimit,
  address target,
  uint256 value,
  bytes data
)[]`;function iyt(t,e,n,r){return Ao({},t,{chainId:n,intent:{id:r,wallet:e}})}function ayt(t){return yr(uc.defaultAbiCoder().encode(["address","uint256","bytes32"],[t.intent.wallet,t.chainId,t.intent.id]))}function oyt(t){const e=uc.defaultAbiCoder().decode(["uint256",BU],t);if(e.length!==2||!e[0]||!e[1])throw new Error("Invalid meta transaction data");return[e[0],e[1]]}function b8e(t,e){return uc.defaultAbiCoder().encode(["uint256",BU],[t,Hk(e)])}function v8e(t,e){return yr(b8e(t,e))}function cyt(t,e,n,r){return t9({address:t,chainId:e,digest:v8e(n,r)})}function lyt(t,e,n){return t9({address:t,chainId:e,digest:yr(uc.defaultAbiCoder().encode(["string",BU],["guest:",Hk(n)]))})}function x8e(t,e){return e.map(n=>Ste(t,n))}function Ste(t,e){if(e.to&&e.to!==$c)return{nonce:mN(e.nonce)?void 0:BigInt(e.nonce),transaction:{delegateCall:!1,revertOnError:!1,gasLimit:mN(e.gasLimit)?void 0:BigInt(e.gasLimit),to:e.to,value:BigInt(e.value||0),data:e.data||"0x"}};{const n=new Ya(qa.mainModule.abi),r=n.encodeFunctionData(n.getFunction("createContract"),[e.data]);return{nonce:typeof e.nonce=="number"?BigInt(e.nonce):void 0,transaction:{delegateCall:!1,revertOnError:!1,gasLimit:mN(e.gasLimit)?void 0:BigInt(e.gasLimit),to:t,value:BigInt(e.value||0),data:r}}}}function MU(t){return t.delegateCall!==void 0||t.revertOnError!==void 0}function E8e(t){return t.every(MU)}function Hk(t){return t.map(e=>{var n;return{delegateCall:e.delegateCall===!0,revertOnError:e.revertOnError===!0,gasLimit:mN(e.gasLimit)?0n:BigInt(e.gasLimit),target:(n=e.to)!=null?n:$c,value:mN(e.value)?0n:e.value,data:e.data||"0x"}})}function uyt(t){return t.map(e=>({delegateCall:e.delegateCall,revertOnError:e.revertOnError,gasLimit:e.gasLimit,to:e.target,value:e.value,data:e.data}))}function fyt(t,e){const n=BigInt(t),r=BigInt(e),s=2n**96n;if(r/s!==0n)throw new Error("Space already encoded");return r+n*s}function dyt(t){const e=BigInt(t),n=2n**96n;return[e/n,e%n]}function hyt(t,e){return Array.isArray(e)?E8e(e)?e:x8e(t,e).map(r=>r.transaction):MU(e)?[e]:[Ste(t,e).transaction]}function A8e(t){return t!==void 0&&t.entrypoint!==void 0&&t.chainId!==void 0&&t.transactions!==void 0&&t.nonce!==void 0&&t.intent!==void 0&&t.intent.id!==void 0&&t.intent.wallet!==void 0&&Array.isArray(t.transactions)&&t.transactions.reduce((e,n)=>e&&MU(n),!0)}function S8e(t){return t!==void 0&&t.signature!==void 0&&t.signature!==""&&A8e(t)}function pyt(t){const e=new Ya(qa.mainModule.abi);return e.encodeFunctionData(e.getFunction("execute"),S8e(t)?[Hk(t.transactions),t.nonce,t.signature]:[Hk(t.transactions),0,new Uint8Array([])])}const I8e="0x61c2926c",C8e=`tuple(
  bool delegateCall,
  bool revertOnError,
  uint256 gasLimit,
  address target,
  uint256 value,
  bytes data
)[]`,NJ=(t,e)=>{const n=[],r=new Ya(qa.mainModule.abi);for(const s of e){const i=et(s.data||"0x");if(s.to===t&&Ke(i.slice(0,4))===I8e){const a=i.slice(4),o=uc.defaultAbiCoder().decode([C8e],a)[0];n.push(...NJ(s.to,o.map(c=>Ao({},c,{to:c.target}))))}else try{const a=r.decodeFunctionData("execute",i)[0],o=NJ(t,a.map(c=>Ao({},c.toObject(),{to:c.target})));n.push(...o)}catch{n.push(s)}}return n},mN=t=>t==null;var gyt=Object.freeze({__proto__:null,MetaTransactionsType:BU,intendTransactionBundle:iyt,intendedTransactionID:ayt,unpackMetaTransactionsData:oyt,packMetaTransactionsData:b8e,digestOfTransactions:v8e,subdigestOfTransactions:cyt,subdigestOfGuestModuleTransactions:lyt,toSequenceTransactions:x8e,toSequenceTransaction:Ste,isSequenceTransaction:MU,hasSequenceTransactions:E8e,sequenceTxAbiEncode:Hk,fromTxAbiEncode:uyt,encodeNonce:fyt,decodeNonce:dyt,fromTransactionish:hyt,isTransactionBundle:A8e,isSignedTransactionBundle:S8e,encodeBundleExecData:pyt,selfExecuteSelector:I8e,selfExecuteAbi:C8e,unwind:NJ});const T8e="0x608060405234801561001057600080fd5b5060405161124a38038061124a83398101604081905261002f91610124565b600060405161003d906100dd565b604051809103906000f080158015610059573d6000803e3d6000fd5b5090506000816001600160a01b0316638f0684308686866040518463ffffffff1660e01b815260040161008e939291906101fb565b6020604051808303816000875af11580156100ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906100d19190610244565b9050806000526001601ff35b610fdc8061026e83390190565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561011b578181015183820152602001610103565b50506000910152565b60008060006060848603121561013957600080fd5b83516001600160a01b038116811461015057600080fd5b6020850151604086015191945092506001600160401b038082111561017457600080fd5b818601915086601f83011261018857600080fd5b81518181111561019a5761019a6100ea565b604051601f8201601f19908116603f011681019083821181831017156101c2576101c26100ea565b816040528281528960208487010111156101db57600080fd5b6101ec836020830160208801610100565b80955050505050509250925092565b60018060a01b0384168152826020820152606060408201526000825180606084015261022e816080850160208701610100565b601f01601f191691909101608001949350505050565b60006020828403121561025657600080fd5b8151801515811461026657600080fd5b939250505056fe608060405234801561001057600080fd5b50610fbc806100206000396000f3fe608060405234801561001057600080fd5b50600436106100675760003560e01c806376be4cea1161005057806376be4cea146100a65780638f068430146100b957806398ef1ed8146100cc57600080fd5b80631c6453271461006c5780633d787b6314610093575b600080fd5b61007f61007a366004610ad4565b6100df565b604051901515815260200160405180910390f35b61007f6100a1366004610ad4565b61023d565b61007f6100b4366004610b3e565b61031e565b61007f6100c7366004610ad4565b6108e1565b61007f6100da366004610ad4565b61096e565b6040517f76be4cea00000000000000000000000000000000000000000000000000000000815260009030906376be4cea9061012890889088908890889088908190600401610bc3565b6020604051808303816000875af1925050508015610181575060408051601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016820190925261017e91810190610c45565b60015b610232573d8080156101af576040519150601f19603f3d011682016040523d82523d6000602084013e6101b4565b606091505b508051600181900361022757816000815181106101d3576101d3610c69565b6020910101517fff00000000000000000000000000000000000000000000000000000000000000167f0100000000000000000000000000000000000000000000000000000000000000149250610235915050565b600092505050610235565b90505b949350505050565b6040517f76be4cea00000000000000000000000000000000000000000000000000000000815260009030906376be4cea906102879088908890889088906001908990600401610bc3565b6020604051808303816000875af19250505080156102e0575060408051601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe01682019092526102dd91810190610c45565b60015b610232573d80801561030e576040519150601f19603f3d011682016040523d82523d6000602084013e610313565b606091505b506000915050610235565b600073ffffffffffffffffffffffffffffffffffffffff87163b6060827f64926492649264926492649264926492649264926492649264926492649264928888610369602082610c98565b610375928b9290610cd8565b61037e91610d02565b1490508015610484576000606089828a610399602082610c98565b926103a693929190610cd8565b8101906103b39190610e18565b955090925090508415806103c45750865b1561047d576000808373ffffffffffffffffffffffffffffffffffffffff16836040516103f19190610eb2565b6000604051808303816000865af19150503d806000811461042e576040519150601f19603f3d011682016040523d82523d6000602084013e610433565b606091505b50915091508161047a57806040517f9d0d6e2d0000000000000000000000000000000000000000000000000000000081526004016104719190610f18565b60405180910390fd5b50505b50506104be565b87878080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509294505050505b80806104ca5750600083115b156106bb576040517f1626ba7e00000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff8b1690631626ba7e90610523908c908690600401610f2b565b602060405180830381865afa92505050801561057a575060408051601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016820190925261057791810190610f44565b60015b61060f573d8080156105a8576040519150601f19603f3d011682016040523d82523d6000602084013e6105ad565b606091505b50851580156105bc5750600084115b156105db576105d08b8b8b8b8b600161031e565b9450505050506108d7565b806040517f6f2a95990000000000000000000000000000000000000000000000000000000081526004016104719190610f18565b7fffffffff0000000000000000000000000000000000000000000000000000000081167f1626ba7e000000000000000000000000000000000000000000000000000000001480158161065f575086155b801561066b5750600085115b1561068b5761067f8c8c8c8c8c600161031e565b955050505050506108d7565b841580156106965750825b80156106a0575087155b156106af57806000526001601ffd5b94506108d79350505050565b6041871461074b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f5369676e617475726556616c696461746f72237265636f7665725369676e657260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610471565b600061075a6020828a8c610cd8565b61076391610d02565b90506000610775604060208b8d610cd8565b61077e91610d02565b905060008a8a604081811061079557610795610c69565b919091013560f81c915050601b81148015906107b557508060ff16601c14155b15610842576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602d60248201527f5369676e617475726556616c696461746f723a20696e76616c6964207369676e60448201527f617475726520762076616c7565000000000000000000000000000000000000006064820152608401610471565b6040805160008152602081018083528e905260ff831691810191909152606081018490526080810183905273ffffffffffffffffffffffffffffffffffffffff8e169060019060a0016020604051602081039080840390855afa1580156108ad573d6000803e3d6000fd5b5050506020604051035173ffffffffffffffffffffffffffffffffffffffff161496505050505050505b9695505050505050565b6040517f76be4cea00000000000000000000000000000000000000000000000000000000815260009030906376be4cea9061092b9088908890889088906001908990600401610bc3565b6020604051808303816000875af115801561094a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102329190610c45565b6040517f76be4cea00000000000000000000000000000000000000000000000000000000815260009030906376be4cea906109b790889088908890889088908190600401610bc3565b6020604051808303816000875af1925050508015610a10575060408051601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0168201909252610a0d91810190610c45565b60015b610232573d808015610a3e576040519150601f19603f3d011682016040523d82523d6000602084013e610a43565b606091505b5080516001819003610a6257816000815181106101d3576101d3610c69565b8082fd5b73ffffffffffffffffffffffffffffffffffffffff81168114610a8857600080fd5b50565b60008083601f840112610a9d57600080fd5b50813567ffffffffffffffff811115610ab557600080fd5b602083019150836020828501011115610acd57600080fd5b9250929050565b60008060008060608587031215610aea57600080fd5b8435610af581610a66565b935060208501359250604085013567ffffffffffffffff811115610b1857600080fd5b610b2487828801610a8b565b95989497509550505050565b8015158114610a8857600080fd5b60008060008060008060a08789031215610b5757600080fd5b8635610b6281610a66565b955060208701359450604087013567ffffffffffffffff811115610b8557600080fd5b610b9189828a01610a8b565b9095509350506060870135610ba581610b30565b91506080870135610bb581610b30565b809150509295509295509295565b73ffffffffffffffffffffffffffffffffffffffff8716815285602082015260a060408201528360a0820152838560c0830137600060c085830181019190915292151560608201529015156080820152601f9092017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016909101019392505050565b600060208284031215610c5757600080fd5b8151610c6281610b30565b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b81810381811115610cd2577f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b92915050565b60008085851115610ce857600080fd5b83861115610cf557600080fd5b5050820193919092039150565b80356020831015610cd2577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff602084900360031b1b1692915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f830112610d7e57600080fd5b813567ffffffffffffffff80821115610d9957610d99610d3e565b604051601f83017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f01168101908282118183101715610ddf57610ddf610d3e565b81604052838152866020858801011115610df857600080fd5b836020870160208301376000602085830101528094505050505092915050565b600080600060608486031215610e2d57600080fd5b8335610e3881610a66565b9250602084013567ffffffffffffffff80821115610e5557600080fd5b610e6187838801610d6d565b93506040860135915080821115610e7757600080fd5b50610e8486828701610d6d565b9150509250925092565b60005b83811015610ea9578181015183820152602001610e91565b50506000910152565b60008251610ec4818460208701610e8e565b9190910192915050565b60008151808452610ee6816020860160208601610e8e565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b602081526000610c626020830184610ece565b8281526040602082015260006102356040830184610ece565b600060208284031215610f5657600080fd5b81517fffffffff0000000000000000000000000000000000000000000000000000000081168114610c6257600080fdfea26469706673582212201a72aed4b15ffb05b6502997a9bb655992e06590bd26b336dfbb153d7ff6f34b64736f6c63430008120033",myt="0x6492649264926492649264926492649264926492649264926492649264926492";async function N8e(t,e,n,r){try{return await t.call({data:Qr([T8e,uc.defaultAbiCoder().encode(["address","bytes32","bytes"],[e,n,r])])})==="0x01"}catch{return!1}}var yyt=Object.freeze({__proto__:null,EIP_6492_OFFCHAIN_DEPLOY_CODE:T8e,EIP_6492_SUFFIX:myt,validateEIP6492Offchain:N8e});class wyt{constructor(e){this.provider=e,this.isDeployedCache=new Set}module(e){return new Si(e,[...qa.mainModuleUpgradable.abi,...qa.mainModule.abi,...qa.erc1271.abi],this.provider)}async isDeployed(e){if(this.isDeployedCache.has(e))return!0;const r=(await this.provider.getCode(e).then(s=>et(s))).length!==0;return r&&this.isDeployedCache.add(e),r}async implementation(e){const n=uc.defaultAbiCoder().encode(["address"],[e]),r=await this.provider.getStorage(e,n).then(s=>et(s));if(r.length===20)return Fn(Ke(r));if(r.length===32)return uc.defaultAbiCoder().decode(["address"],r)[0]}async imageHash(e){try{return await this.module(e).imageHash()}catch{}}async nonce(e,n=0){try{return await this.module(e).readNonce(n)}catch(r){if(!await this.isDeployed(e))return 0;throw r}}async isValidSignature(e,n,r){return N8e(this.provider,e,n,r)}}var byt=Object.freeze({__proto__:null,OnChainReader:wyt});function vyt(t){return t&&t.address&&t.digest&&t.chainId!==void 0&&t.config}var Mt=Object.freeze({__proto__:null,config:Xmt,signature:_mt,context:syt,signer:Fmt,EIP1271:Dmt,transaction:gyt,reader:byt,EIP6492:yyt,isWalletSignRequestMetadata:vyt});const kJ=[{config:hte,signature:dte},{config:_U,signature:RU}];function k8e(t){const e=t-1;if(e<0||e>=kJ.length)throw new Error(`No coder for version: ${t}`);return kJ[e]}function xyt(t){return k8e(t)}var tc=Object.freeze({__proto__:null,ALL_CODERS:kJ,coderFor:k8e,genericCoderFor:xyt});const Eyt=[Bv,Xn];var Ms={},PJ={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.UnavailableError=t.InvalidArgumentError=t.TimeoutError=t.AtLeastOneKeyError=t.MaxAccessKeysError=t.NoDefaultKeyError=t.RateLimitError=t.QuotaExceededError=t.UnauthorizedUserError=t.InvalidServiceError=t.InvalidOriginError=t.AccessKeyMismatchError=t.AccessKeyNotFoundError=t.ProjectNotFoundError=t.RateLimitedError=t.GeoblockedError=t.AbortedError=t.RequestConflictError=t.MethodNotFoundError=t.SessionExpiredError=t.PermissionDeniedError=t.UnauthorizedError=t.WebrpcStreamFinishedError=t.WebrpcStreamLostError=t.WebrpcClientDisconnectedError=t.WebrpcInternalErrorError=t.WebrpcServerPanicError=t.WebrpcBadResponseError=t.WebrpcBadRequestError=t.WebrpcBadMethodError=t.WebrpcBadRouteError=t.WebrpcRequestFailedError=t.WebrpcEndpointError=t.WebrpcError=t.Indexer=t.ContractVerificationStatus=t.SortOrder=t.TransactionType=t.TransactionStatus=t.TxnTransferType=t.OrderStatus=t.EventLogDataType=t.EventLogType=t.ContractType=t.ResourceStatus=t.WebRPCSchemaHash=t.WebRPCSchemaVersion=t.WebRPCVersion=t.WebrpcHeaderValue=t.WebrpcHeader=void 0,t.errors=t.MetadataCallFailedError=t.NotFoundError=t.ResourceExhaustedError=t.QueryFailedError=void 0,t.VersionFromHeader=e,t.WebrpcHeader="Webrpc",t.WebrpcHeaderValue="webrpc@v0.21.1;gen-typescript@v0.15.1;sequence-indexer@v0.4.0",t.WebRPCVersion="v1",t.WebRPCSchemaVersion="v0.4.0",t.WebRPCSchemaHash="546b527de7002f409ffa602ad35b5a3abe979088";function e(de){const oe=de.get(t.WebrpcHeader);return oe?n(oe):{webrpcGenVersion:"",codeGenName:"",codeGenVersion:"",schemaName:"",schemaVersion:""}}function n(de){const oe=de.split(";");if(oe.length<3)return{webrpcGenVersion:"",codeGenName:"",codeGenVersion:"",schemaName:"",schemaVersion:""};const[fe,ce]=oe[0].split("@"),[ae,Ie]=oe[1].split("@"),[nt,yt]=oe[2].split("@");return{webrpcGenVersion:ce,codeGenName:ae,codeGenVersion:Ie,schemaName:nt,schemaVersion:yt}}var r;(function(de){de.NOT_AVAILABLE="NOT_AVAILABLE",de.REFRESHING="REFRESHING",de.AVAILABLE="AVAILABLE"})(r||(t.ResourceStatus=r={}));var s;(function(de){de.UNKNOWN="UNKNOWN",de.NATIVE="NATIVE",de.ERC20="ERC20",de.ERC721="ERC721",de.ERC1155="ERC1155",de.SEQUENCE_WALLET="SEQUENCE_WALLET",de.ERC20_BRIDGE="ERC20_BRIDGE",de.ERC721_BRIDGE="ERC721_BRIDGE",de.ERC1155_BRIDGE="ERC1155_BRIDGE",de.SEQ_MARKETPLACE="SEQ_MARKETPLACE"})(s||(t.ContractType=s={}));var i;(function(de){de.UNKNOWN="UNKNOWN",de.BLOCK_ADDED="BLOCK_ADDED",de.BLOCK_REMOVED="BLOCK_REMOVED"})(i||(t.EventLogType=i={}));var a;(function(de){de.EVENT="EVENT",de.TOKEN_TRANSFER="TOKEN_TRANSFER",de.NATIVE_TOKEN_TRANSFER="NATIVE_TOKEN_TRANSFER",de.SEQUENCE_TXN="SEQUENCE_TXN"})(a||(t.EventLogDataType=a={}));var o;(function(de){de.OPEN="OPEN",de.CLOSED="CLOSED",de.CANCELLED="CANCELLED"})(o||(t.OrderStatus=o={}));var c;(function(de){de.UNKNOWN="UNKNOWN",de.SEND="SEND",de.RECEIVE="RECEIVE"})(c||(t.TxnTransferType=c={}));var l;(function(de){de.FAILED="FAILED",de.SUCCESSFUL="SUCCESSFUL"})(l||(t.TransactionStatus=l={}));var u;(function(de){de.LegacyTxnType="LegacyTxnType",de.AccessListTxnType="AccessListTxnType",de.DynamicFeeTxnType="DynamicFeeTxnType"})(u||(t.TransactionType=u={}));var f;(function(de){de.DESC="DESC",de.ASC="ASC"})(f||(t.SortOrder=f={}));var d;(function(de){de.VERIFIED="VERIFIED",de.UNVERIFIED="UNVERIFIED",de.ALL="ALL"})(d||(t.ContractVerificationStatus=d={}));class p{constructor(oe,fe){q(this,"hostname");q(this,"fetch");q(this,"path","/rpc/Indexer/");q(this,"ping",(oe,fe)=>this.fetch(this.url("Ping"),m({},oe,fe)).then(ce=>v(ce).then(ae=>({status:ae.status})),ce=>{throw I.new({cause:`fetch(): ${ce.message||""}`})}));q(this,"version",(oe,fe)=>this.fetch(this.url("Version"),m({},oe,fe)).then(ce=>v(ce).then(ae=>({version:ae.version})),ce=>{throw I.new({cause:`fetch(): ${ce.message||""}`})}));q(this,"runtimeStatus",(oe,fe)=>this.fetch(this.url("RuntimeStatus"),m({},oe,fe)).then(ce=>v(ce).then(ae=>({status:ae.status})),ce=>{throw I.new({cause:`fetch(): ${ce.message||""}`})}));q(this,"getChainID",(oe,fe)=>this.fetch(this.url("GetChainID"),m({},oe,fe)).then(ce=>v(ce).then(ae=>({chainID:ae.chainID})),ce=>{throw I.new({cause:`fetch(): ${ce.message||""}`})}));q(this,"getEtherBalance",(oe,fe,ce)=>this.fetch(this.url("GetEtherBalance"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({balance:Ie.balance})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"getNativeTokenBalance",(oe,fe,ce)=>this.fetch(this.url("GetNativeTokenBalance"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({balance:Ie.balance})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"getTokenBalancesSummary",(oe,fe,ce)=>this.fetch(this.url("GetTokenBalancesSummary"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({page:Ie.page,nativeBalances:Ie.nativeBalances,balances:Ie.balances})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"getTokenBalancesDetails",(oe,fe,ce)=>this.fetch(this.url("GetTokenBalancesDetails"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({page:Ie.page,nativeBalances:Ie.nativeBalances,balances:Ie.balances})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"getTokenBalancesByContract",(oe,fe,ce)=>this.fetch(this.url("GetTokenBalancesByContract"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({page:Ie.page,balances:Ie.balances})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"getTokenBalances",(oe,fe,ce)=>this.fetch(this.url("GetTokenBalances"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({page:Ie.page,balances:Ie.balances})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"getTokenSupplies",(oe,fe,ce)=>this.fetch(this.url("GetTokenSupplies"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({page:Ie.page,contractType:Ie.contractType,tokenIDs:Ie.tokenIDs})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"getTokenSuppliesMap",(oe,fe,ce)=>this.fetch(this.url("GetTokenSuppliesMap"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({supplies:Ie.supplies})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"getTokenIDs",(oe,fe,ce)=>this.fetch(this.url("GetTokenIDs"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({page:Ie.page,contractType:Ie.contractType,tokenIDs:Ie.tokenIDs})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"getTokenIDRanges",(oe,fe,ce)=>this.fetch(this.url("GetTokenIDRanges"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({contractType:Ie.contractType,tokenIDRanges:Ie.tokenIDRanges,moreRanges:Ie.moreRanges})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"getBalanceUpdates",(oe,fe,ce)=>this.fetch(this.url("GetBalanceUpdates"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({page:Ie.page,balances:Ie.balances})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"getTransactionHistory",(oe,fe,ce)=>this.fetch(this.url("GetTransactionHistory"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({page:Ie.page,transactions:Ie.transactions})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"fetchTransactionReceipt",(oe,fe,ce)=>this.fetch(this.url("FetchTransactionReceipt"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({receipt:Ie.receipt})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"fetchTransactionReceiptWithFilter",(oe,fe,ce)=>this.fetch(this.url("FetchTransactionReceiptWithFilter"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({receipt:Ie.receipt})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"subscribeReceipts",(oe,fe)=>{const ce=()=>this.fetch(this.url("SubscribeReceipts"),m(oe,fe.headers,fe.signal)).then(async ae=>{await g(ae,fe,ce)},ae=>{fe.onError(ae,ce)});return ce()});q(this,"subscribeEvents",(oe,fe)=>{const ce=()=>this.fetch(this.url("SubscribeEvents"),m(oe,fe.headers,fe.signal)).then(async ae=>{await g(ae,fe,ce)},ae=>{fe.onError(ae,ce)});return ce()});q(this,"subscribeBalanceUpdates",(oe,fe)=>{const ce=()=>this.fetch(this.url("SubscribeBalanceUpdates"),m(oe,fe.headers,fe.signal)).then(async ae=>{await g(ae,fe,ce)},ae=>{fe.onError(ae,ce)});return ce()});q(this,"syncBalance",(oe,fe,ce)=>this.fetch(this.url("SyncBalance"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"getAllWebhookListeners",(oe,fe,ce)=>this.fetch(this.url("GetAllWebhookListeners"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({listeners:Ie.listeners})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"getWebhookListener",(oe,fe,ce)=>this.fetch(this.url("GetWebhookListener"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({listener:Ie.listener})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"addWebhookListener",(oe,fe,ce)=>this.fetch(this.url("AddWebhookListener"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({status:Ie.status,listener:Ie.listener})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"updateWebhookListener",(oe,fe,ce)=>this.fetch(this.url("UpdateWebhookListener"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({status:Ie.status})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"removeWebhookListener",(oe,fe,ce)=>this.fetch(this.url("RemoveWebhookListener"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({status:Ie.status})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"removeAllWebhookListeners",(oe,fe,ce)=>this.fetch(this.url("RemoveAllWebhookListeners"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({status:Ie.status})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"toggleWebhookListener",(oe,fe,ce)=>this.fetch(this.url("ToggleWebhookListener"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({webhookListener:Ie.webhookListener})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"pauseAllWebhookListeners",(oe,fe,ce)=>this.fetch(this.url("PauseAllWebhookListeners"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({status:Ie.status})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"resumeAllWebhookListeners",(oe,fe,ce)=>this.fetch(this.url("ResumeAllWebhookListeners"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({status:Ie.status})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"getOrderbookOrders",(oe,fe,ce)=>this.fetch(this.url("GetOrderbookOrders"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({page:Ie.page,orders:Ie.orders})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));q(this,"getTopOrders",(oe,fe,ce)=>this.fetch(this.url("GetTopOrders"),m(oe,fe,ce)).then(ae=>v(ae).then(Ie=>({orders:Ie.orders})),ae=>{throw I.new({cause:`fetch(): ${ae.message||""}`})}));this.hostname=oe.replace(/\/*$/,""),this.fetch=(ce,ae)=>fe(ce,ae)}url(oe){return this.hostname+this.path+oe}}t.Indexer=p;const g=async(de,oe,fe)=>{const{onMessage:ce,onOpen:ae,onClose:Ie,onError:nt}=oe;if(!de.ok){try{await v(de)}catch(Pt){nt(Pt,fe)}return}if(!de.body){nt(O.new({status:de.status,cause:"Invalid response, missing body"}),fe);return}ae&&ae();const yt=de.body.getReader(),Tt=new TextDecoder;let at="",It=Date.now();const _t=11*1e3;let pt=!1;const $t=setInterval(()=>{Date.now()-It>_t&&(pt=!0,clearInterval($t),yt.releaseLock())},_t);for(;;){let Pt,jt;try{if({value:Pt,done:jt}=await yt.read(),pt)throw new Error("Timeout, no data or heartbeat received");It=Date.now(),at+=Tt.decode(Pt,{stream:!0})}catch(An){let At="";An instanceof Error&&(At=An.message),An instanceof DOMException&&An.name==="AbortError"?nt(I.new({message:"AbortError",cause:`AbortError: ${At}`}),()=>{throw new Error("Abort signal cannot be used to reconnect")}):nt(G.new({cause:`reader.read(): ${At}`}),fe);return}let En=at.split(`
`);for(let An=0;An<En.length-1;An++){if(En[An].length==0)continue;let At;try{if(At=JSON.parse(En[An]),At.hasOwnProperty("webrpcError")){const Sn=At.webrpcError,Hn=typeof Sn.code=="number"?Sn.code:0;nt((Be[Hn]||A).new(Sn),fe);return}}catch(Sn){if(Sn instanceof Error&&Sn.message==="Abort signal cannot be used to reconnect")throw Sn;nt(O.new({status:de.status,cause:`JSON.parse(): ${Sn.message}`}),fe)}ce(At)}if(!jt){at=En[En.length-1];continue}Ie&&Ie();return}},m=(de={},oe={},fe=null)=>{const ce={...oe,"Content-Type":"application/json"};return ce[t.WebrpcHeader]=t.WebrpcHeaderValue,{method:"POST",headers:ce,body:JSON.stringify(de||{}),signal:fe}},v=de=>de.text().then(oe=>{let fe;try{fe=JSON.parse(oe)}catch(ce){let ae="";throw ce instanceof Error&&(ae=ce.message),O.new({status:de.status,cause:`JSON.parse(): ${ae}: response text: ${oe}`})}if(!de.ok){const ce=typeof fe.code=="number"?fe.code:0;throw(Be[ce]||A).new(fe)}return fe});class A extends Error{constructor(fe,ce,ae,Ie,nt){super(ae);q(this,"name");q(this,"code");q(this,"message");q(this,"status");q(this,"cause");q(this,"msg");this.name=fe||"WebrpcError",this.code=typeof ce=="number"?ce:0,this.message=ae||`endpoint error ${this.code}`,this.msg=this.message,this.status=typeof Ie=="number"?Ie:0,this.cause=nt,Object.setPrototypeOf(this,A.prototype)}static new(fe){return new this(fe.error,fe.code,fe.message||fe.msg,fe.status,fe.cause)}}t.WebrpcError=A;class S extends A{constructor(oe="WebrpcEndpoint",fe=0,ce="endpoint error",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,S.prototype)}}t.WebrpcEndpointError=S;class I extends A{constructor(oe="WebrpcRequestFailed",fe=-1,ce="request failed",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,I.prototype)}}t.WebrpcRequestFailedError=I;class B extends A{constructor(oe="WebrpcBadRoute",fe=-2,ce="bad route",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,B.prototype)}}t.WebrpcBadRouteError=B;class D extends A{constructor(oe="WebrpcBadMethod",fe=-3,ce="bad method",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,D.prototype)}}t.WebrpcBadMethodError=D;class V extends A{constructor(oe="WebrpcBadRequest",fe=-4,ce="bad request",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,V.prototype)}}t.WebrpcBadRequestError=V;class O extends A{constructor(oe="WebrpcBadResponse",fe=-5,ce="bad response",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,O.prototype)}}t.WebrpcBadResponseError=O;class U extends A{constructor(oe="WebrpcServerPanic",fe=-6,ce="server panic",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,U.prototype)}}t.WebrpcServerPanicError=U;class Q extends A{constructor(oe="WebrpcInternalError",fe=-7,ce="internal error",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,Q.prototype)}}t.WebrpcInternalErrorError=Q;class ie extends A{constructor(oe="WebrpcClientDisconnected",fe=-8,ce="client disconnected",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,ie.prototype)}}t.WebrpcClientDisconnectedError=ie;class G extends A{constructor(oe="WebrpcStreamLost",fe=-9,ce="stream lost",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,G.prototype)}}t.WebrpcStreamLostError=G;class R extends A{constructor(oe="WebrpcStreamFinished",fe=-10,ce="stream finished",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,R.prototype)}}t.WebrpcStreamFinishedError=R;class k extends A{constructor(oe="Unauthorized",fe=1e3,ce="Unauthorized access",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,k.prototype)}}t.UnauthorizedError=k;class b extends A{constructor(oe="PermissionDenied",fe=1001,ce="Permission denied",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,b.prototype)}}t.PermissionDeniedError=b;class w extends A{constructor(oe="SessionExpired",fe=1002,ce="Session expired",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,w.prototype)}}t.SessionExpiredError=w;class N extends A{constructor(oe="MethodNotFound",fe=1003,ce="Method not found",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,N.prototype)}}t.MethodNotFoundError=N;class L extends A{constructor(oe="RequestConflict",fe=1004,ce="Conflict with target resource",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,L.prototype)}}t.RequestConflictError=L;class C extends A{constructor(oe="Aborted",fe=1005,ce="Request aborted",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,C.prototype)}}t.AbortedError=C;class T extends A{constructor(oe="Geoblocked",fe=1006,ce="Geoblocked region",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,T.prototype)}}t.GeoblockedError=T;class E extends A{constructor(oe="RateLimited",fe=1007,ce="Rate-limited. Please slow down.",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,E.prototype)}}t.RateLimitedError=E;class P extends A{constructor(oe="ProjectNotFound",fe=1100,ce="Project not found",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,P.prototype)}}t.ProjectNotFoundError=P;class _ extends A{constructor(oe="AccessKeyNotFound",fe=1101,ce="Access key not found",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,_.prototype)}}t.AccessKeyNotFoundError=_;class H extends A{constructor(oe="AccessKeyMismatch",fe=1102,ce="Access key mismatch",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,H.prototype)}}t.AccessKeyMismatchError=H;class ne extends A{constructor(oe="InvalidOrigin",fe=1103,ce="Invalid origin for Access Key",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,ne.prototype)}}t.InvalidOriginError=ne;class $ extends A{constructor(oe="InvalidService",fe=1104,ce="Service not enabled for Access key",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,$.prototype)}}t.InvalidServiceError=$;class te extends A{constructor(oe="UnauthorizedUser",fe=1105,ce="Unauthorized user",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,te.prototype)}}t.UnauthorizedUserError=te;class J extends A{constructor(oe="QuotaExceeded",fe=1200,ce="Quota exceeded",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,J.prototype)}}t.QuotaExceededError=J;class ee extends A{constructor(oe="RateLimit",fe=1201,ce="Rate limit exceeded",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,ee.prototype)}}t.RateLimitError=ee;class X extends A{constructor(oe="NoDefaultKey",fe=1300,ce="No default access key found",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,X.prototype)}}t.NoDefaultKeyError=X;class j extends A{constructor(oe="MaxAccessKeys",fe=1301,ce="Access keys limit reached",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,j.prototype)}}t.MaxAccessKeysError=j;class se extends A{constructor(oe="AtLeastOneKey",fe=1302,ce="You need at least one Access Key",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,se.prototype)}}t.AtLeastOneKeyError=se;class ye extends A{constructor(oe="Timeout",fe=1900,ce="Request timed out",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,ye.prototype)}}t.TimeoutError=ye;class Ce extends A{constructor(oe="InvalidArgument",fe=2001,ce="Invalid argument",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,Ce.prototype)}}t.InvalidArgumentError=Ce;class xe extends A{constructor(oe="Unavailable",fe=2002,ce="Unavailable resource",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,xe.prototype)}}t.UnavailableError=xe;class De extends A{constructor(oe="QueryFailed",fe=2003,ce="Query failed",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,De.prototype)}}t.QueryFailedError=De;class qe extends A{constructor(oe="ResourceExhausted",fe=2004,ce="Resource exhausted",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,qe.prototype)}}t.ResourceExhaustedError=qe;class ze extends A{constructor(oe="NotFound",fe=3e3,ce="Resource not found",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,ze.prototype)}}t.NotFoundError=ze;class ft extends A{constructor(oe="MetadataCallFailed",fe=3003,ce="Metadata service call failed",ae=0,Ie){super(oe,fe,ce,ae,Ie),Object.setPrototypeOf(this,ft.prototype)}}t.MetadataCallFailedError=ft;var mt;(function(de){de.WebrpcEndpoint="WebrpcEndpoint",de.WebrpcRequestFailed="WebrpcRequestFailed",de.WebrpcBadRoute="WebrpcBadRoute",de.WebrpcBadMethod="WebrpcBadMethod",de.WebrpcBadRequest="WebrpcBadRequest",de.WebrpcBadResponse="WebrpcBadResponse",de.WebrpcServerPanic="WebrpcServerPanic",de.WebrpcInternalError="WebrpcInternalError",de.WebrpcClientDisconnected="WebrpcClientDisconnected",de.WebrpcStreamLost="WebrpcStreamLost",de.WebrpcStreamFinished="WebrpcStreamFinished",de.Unauthorized="Unauthorized",de.PermissionDenied="PermissionDenied",de.SessionExpired="SessionExpired",de.MethodNotFound="MethodNotFound",de.RequestConflict="RequestConflict",de.Aborted="Aborted",de.Geoblocked="Geoblocked",de.RateLimited="RateLimited",de.ProjectNotFound="ProjectNotFound",de.AccessKeyNotFound="AccessKeyNotFound",de.AccessKeyMismatch="AccessKeyMismatch",de.InvalidOrigin="InvalidOrigin",de.InvalidService="InvalidService",de.UnauthorizedUser="UnauthorizedUser",de.QuotaExceeded="QuotaExceeded",de.RateLimit="RateLimit",de.NoDefaultKey="NoDefaultKey",de.MaxAccessKeys="MaxAccessKeys",de.AtLeastOneKey="AtLeastOneKey",de.Timeout="Timeout",de.InvalidArgument="InvalidArgument",de.Unavailable="Unavailable",de.QueryFailed="QueryFailed",de.ResourceExhausted="ResourceExhausted",de.NotFound="NotFound",de.MetadataCallFailed="MetadataCallFailed"})(mt||(t.errors=mt={}));const Be={0:S,[-1]:I,[-2]:B,[-3]:D,[-4]:V,[-5]:O,[-6]:U,[-7]:Q,[-8]:ie,[-9]:G,[-10]:R,1e3:k,1001:b,1002:w,1003:N,1004:L,1005:C,1006:T,1007:E,1100:P,1101:_,1102:H,1103:ne,1104:$,1105:te,1200:J,1201:ee,1300:X,1301:j,1302:se,1900:ye,2001:Ce,2002:xe,2003:De,2004:qe,3e3:ze,3003:ft}})(PJ);var OJ={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.UnavailableError=t.InvalidArgumentError=t.TimeoutError=t.AtLeastOneKeyError=t.MaxAccessKeysError=t.NoDefaultKeyError=t.RateLimitError=t.QuotaExceededError=t.UnauthorizedUserError=t.InvalidServiceError=t.InvalidOriginError=t.AccessKeyMismatchError=t.AccessKeyNotFoundError=t.ProjectNotFoundError=t.RateLimitedError=t.GeoblockedError=t.AbortedError=t.RequestConflictError=t.MethodNotFoundError=t.SessionExpiredError=t.PermissionDeniedError=t.UnauthorizedError=t.WebrpcStreamFinishedError=t.WebrpcStreamLostError=t.WebrpcClientDisconnectedError=t.WebrpcInternalErrorError=t.WebrpcServerPanicError=t.WebrpcBadResponseError=t.WebrpcBadRequestError=t.WebrpcBadMethodError=t.WebrpcBadRouteError=t.WebrpcRequestFailedError=t.WebrpcEndpointError=t.WebrpcError=t.IndexerGateway=t.ContractVerificationStatus=t.SortOrder=t.TransactionType=t.TransactionStatus=t.TxnTransferType=t.OrderStatus=t.EventLogDataType=t.EventLogType=t.ContractType=t.ResourceStatus=t.WebRPCSchemaHash=t.WebRPCSchemaVersion=t.WebRPCVersion=t.WebrpcHeaderValue=t.WebrpcHeader=void 0,t.errors=t.MetadataCallFailedError=t.NotFoundError=t.ResourceExhaustedError=t.QueryFailedError=void 0,t.VersionFromHeader=e,t.WebrpcHeader="Webrpc",t.WebrpcHeaderValue="webrpc@v0.21.1;gen-typescript@v0.15.1;sequence-indexer@v0.4.0",t.WebRPCVersion="v1",t.WebRPCSchemaVersion="v0.4.0",t.WebRPCSchemaHash="5be4a3e78d9c7e0cc378c675ec01c518e83772e3";function e(Be){const de=Be.get(t.WebrpcHeader);return de?n(de):{webrpcGenVersion:"",codeGenName:"",codeGenVersion:"",schemaName:"",schemaVersion:""}}function n(Be){const de=Be.split(";");if(de.length<3)return{webrpcGenVersion:"",codeGenName:"",codeGenVersion:"",schemaName:"",schemaVersion:""};const[oe,fe]=de[0].split("@"),[ce,ae]=de[1].split("@"),[Ie,nt]=de[2].split("@");return{webrpcGenVersion:fe,codeGenName:ce,codeGenVersion:ae,schemaName:Ie,schemaVersion:nt}}var r;(function(Be){Be.NOT_AVAILABLE="NOT_AVAILABLE",Be.REFRESHING="REFRESHING",Be.AVAILABLE="AVAILABLE"})(r||(t.ResourceStatus=r={}));var s;(function(Be){Be.UNKNOWN="UNKNOWN",Be.NATIVE="NATIVE",Be.ERC20="ERC20",Be.ERC721="ERC721",Be.ERC1155="ERC1155",Be.SEQUENCE_WALLET="SEQUENCE_WALLET",Be.ERC20_BRIDGE="ERC20_BRIDGE",Be.ERC721_BRIDGE="ERC721_BRIDGE",Be.ERC1155_BRIDGE="ERC1155_BRIDGE",Be.SEQ_MARKETPLACE="SEQ_MARKETPLACE"})(s||(t.ContractType=s={}));var i;(function(Be){Be.UNKNOWN="UNKNOWN",Be.BLOCK_ADDED="BLOCK_ADDED",Be.BLOCK_REMOVED="BLOCK_REMOVED"})(i||(t.EventLogType=i={}));var a;(function(Be){Be.EVENT="EVENT",Be.TOKEN_TRANSFER="TOKEN_TRANSFER",Be.NATIVE_TOKEN_TRANSFER="NATIVE_TOKEN_TRANSFER",Be.SEQUENCE_TXN="SEQUENCE_TXN"})(a||(t.EventLogDataType=a={}));var o;(function(Be){Be.OPEN="OPEN",Be.CLOSED="CLOSED",Be.CANCELLED="CANCELLED"})(o||(t.OrderStatus=o={}));var c;(function(Be){Be.UNKNOWN="UNKNOWN",Be.SEND="SEND",Be.RECEIVE="RECEIVE"})(c||(t.TxnTransferType=c={}));var l;(function(Be){Be.FAILED="FAILED",Be.SUCCESSFUL="SUCCESSFUL"})(l||(t.TransactionStatus=l={}));var u;(function(Be){Be.LegacyTxnType="LegacyTxnType",Be.AccessListTxnType="AccessListTxnType",Be.DynamicFeeTxnType="DynamicFeeTxnType"})(u||(t.TransactionType=u={}));var f;(function(Be){Be.DESC="DESC",Be.ASC="ASC"})(f||(t.SortOrder=f={}));var d;(function(Be){Be.VERIFIED="VERIFIED",Be.UNVERIFIED="UNVERIFIED",Be.ALL="ALL"})(d||(t.ContractVerificationStatus=d={}));class p{constructor(de,oe){q(this,"hostname");q(this,"fetch");q(this,"path","/rpc/IndexerGateway/");q(this,"getNativeTokenBalance",(de,oe,fe)=>this.fetch(this.url("GetNativeTokenBalance"),g(de,oe,fe)).then(ce=>m(ce).then(ae=>({balances:ae.balances})),ce=>{throw S.new({cause:`fetch(): ${ce.message||""}`})}));q(this,"getTokenBalances",(de,oe,fe)=>this.fetch(this.url("GetTokenBalances"),g(de,oe,fe)).then(ce=>m(ce).then(ae=>({page:ae.page,balances:ae.balances})),ce=>{throw S.new({cause:`fetch(): ${ce.message||""}`})}));q(this,"getTokenBalancesSummary",(de,oe,fe)=>this.fetch(this.url("GetTokenBalancesSummary"),g(de,oe,fe)).then(ce=>m(ce).then(ae=>({page:ae.page,nativeBalances:ae.nativeBalances,balances:ae.balances})),ce=>{throw S.new({cause:`fetch(): ${ce.message||""}`})}));q(this,"getTokenBalancesDetails",(de,oe,fe)=>this.fetch(this.url("GetTokenBalancesDetails"),g(de,oe,fe)).then(ce=>m(ce).then(ae=>({page:ae.page,nativeBalances:ae.nativeBalances,balances:ae.balances})),ce=>{throw S.new({cause:`fetch(): ${ce.message||""}`})}));q(this,"getTokenBalancesByContract",(de,oe,fe)=>this.fetch(this.url("GetTokenBalancesByContract"),g(de,oe,fe)).then(ce=>m(ce).then(ae=>({page:ae.page,balances:ae.balances})),ce=>{throw S.new({cause:`fetch(): ${ce.message||""}`})}));q(this,"getBalanceUpdates",(de,oe,fe)=>this.fetch(this.url("GetBalanceUpdates"),g(de,oe,fe)).then(ce=>m(ce).then(ae=>({page:ae.page,balances:ae.balances})),ce=>{throw S.new({cause:`fetch(): ${ce.message||""}`})}));q(this,"ping",(de,oe)=>this.fetch(this.url("Ping"),g({},de,oe)).then(fe=>m(fe).then(ce=>({status:ce.status})),fe=>{throw S.new({cause:`fetch(): ${fe.message||""}`})}));q(this,"version",(de,oe)=>this.fetch(this.url("Version"),g({},de,oe)).then(fe=>m(fe).then(ce=>({version:ce.version})),fe=>{throw S.new({cause:`fetch(): ${fe.message||""}`})}));q(this,"runtimeStatus",(de,oe)=>this.fetch(this.url("RuntimeStatus"),g({},de,oe)).then(fe=>m(fe).then(ce=>({status:ce.status})),fe=>{throw S.new({cause:`fetch(): ${fe.message||""}`})}));this.hostname=de.replace(/\/*$/,""),this.fetch=(fe,ce)=>oe(fe,ce)}url(de){return this.hostname+this.path+de}}t.IndexerGateway=p;const g=(Be={},de={},oe=null)=>{const fe={...de,"Content-Type":"application/json"};return fe[t.WebrpcHeader]=t.WebrpcHeaderValue,{method:"POST",headers:fe,body:JSON.stringify(Be||{}),signal:oe}},m=Be=>Be.text().then(de=>{let oe;try{oe=JSON.parse(de)}catch(fe){let ce="";throw fe instanceof Error&&(ce=fe.message),V.new({status:Be.status,cause:`JSON.parse(): ${ce}: response text: ${de}`})}if(!Be.ok){const fe=typeof oe.code=="number"?oe.code:0;throw(mt[fe]||v).new(oe)}return oe});class v extends Error{constructor(oe,fe,ce,ae,Ie){super(ce);q(this,"name");q(this,"code");q(this,"message");q(this,"status");q(this,"cause");q(this,"msg");this.name=oe||"WebrpcError",this.code=typeof fe=="number"?fe:0,this.message=ce||`endpoint error ${this.code}`,this.msg=this.message,this.status=typeof ae=="number"?ae:0,this.cause=Ie,Object.setPrototypeOf(this,v.prototype)}static new(oe){return new this(oe.error,oe.code,oe.message||oe.msg,oe.status,oe.cause)}}t.WebrpcError=v;class A extends v{constructor(de="WebrpcEndpoint",oe=0,fe="endpoint error",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,A.prototype)}}t.WebrpcEndpointError=A;class S extends v{constructor(de="WebrpcRequestFailed",oe=-1,fe="request failed",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,S.prototype)}}t.WebrpcRequestFailedError=S;class I extends v{constructor(de="WebrpcBadRoute",oe=-2,fe="bad route",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,I.prototype)}}t.WebrpcBadRouteError=I;class B extends v{constructor(de="WebrpcBadMethod",oe=-3,fe="bad method",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,B.prototype)}}t.WebrpcBadMethodError=B;class D extends v{constructor(de="WebrpcBadRequest",oe=-4,fe="bad request",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,D.prototype)}}t.WebrpcBadRequestError=D;class V extends v{constructor(de="WebrpcBadResponse",oe=-5,fe="bad response",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,V.prototype)}}t.WebrpcBadResponseError=V;class O extends v{constructor(de="WebrpcServerPanic",oe=-6,fe="server panic",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,O.prototype)}}t.WebrpcServerPanicError=O;class U extends v{constructor(de="WebrpcInternalError",oe=-7,fe="internal error",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,U.prototype)}}t.WebrpcInternalErrorError=U;class Q extends v{constructor(de="WebrpcClientDisconnected",oe=-8,fe="client disconnected",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,Q.prototype)}}t.WebrpcClientDisconnectedError=Q;class ie extends v{constructor(de="WebrpcStreamLost",oe=-9,fe="stream lost",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,ie.prototype)}}t.WebrpcStreamLostError=ie;class G extends v{constructor(de="WebrpcStreamFinished",oe=-10,fe="stream finished",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,G.prototype)}}t.WebrpcStreamFinishedError=G;class R extends v{constructor(de="Unauthorized",oe=1e3,fe="Unauthorized access",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,R.prototype)}}t.UnauthorizedError=R;class k extends v{constructor(de="PermissionDenied",oe=1001,fe="Permission denied",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,k.prototype)}}t.PermissionDeniedError=k;class b extends v{constructor(de="SessionExpired",oe=1002,fe="Session expired",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,b.prototype)}}t.SessionExpiredError=b;class w extends v{constructor(de="MethodNotFound",oe=1003,fe="Method not found",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,w.prototype)}}t.MethodNotFoundError=w;class N extends v{constructor(de="RequestConflict",oe=1004,fe="Conflict with target resource",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,N.prototype)}}t.RequestConflictError=N;class L extends v{constructor(de="Aborted",oe=1005,fe="Request aborted",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,L.prototype)}}t.AbortedError=L;class C extends v{constructor(de="Geoblocked",oe=1006,fe="Geoblocked region",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,C.prototype)}}t.GeoblockedError=C;class T extends v{constructor(de="RateLimited",oe=1007,fe="Rate-limited. Please slow down.",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,T.prototype)}}t.RateLimitedError=T;class E extends v{constructor(de="ProjectNotFound",oe=1100,fe="Project not found",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,E.prototype)}}t.ProjectNotFoundError=E;class P extends v{constructor(de="AccessKeyNotFound",oe=1101,fe="Access key not found",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,P.prototype)}}t.AccessKeyNotFoundError=P;class _ extends v{constructor(de="AccessKeyMismatch",oe=1102,fe="Access key mismatch",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,_.prototype)}}t.AccessKeyMismatchError=_;class H extends v{constructor(de="InvalidOrigin",oe=1103,fe="Invalid origin for Access Key",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,H.prototype)}}t.InvalidOriginError=H;class ne extends v{constructor(de="InvalidService",oe=1104,fe="Service not enabled for Access key",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,ne.prototype)}}t.InvalidServiceError=ne;class $ extends v{constructor(de="UnauthorizedUser",oe=1105,fe="Unauthorized user",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,$.prototype)}}t.UnauthorizedUserError=$;class te extends v{constructor(de="QuotaExceeded",oe=1200,fe="Quota exceeded",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,te.prototype)}}t.QuotaExceededError=te;class J extends v{constructor(de="RateLimit",oe=1201,fe="Rate limit exceeded",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,J.prototype)}}t.RateLimitError=J;class ee extends v{constructor(de="NoDefaultKey",oe=1300,fe="No default access key found",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,ee.prototype)}}t.NoDefaultKeyError=ee;class X extends v{constructor(de="MaxAccessKeys",oe=1301,fe="Access keys limit reached",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,X.prototype)}}t.MaxAccessKeysError=X;class j extends v{constructor(de="AtLeastOneKey",oe=1302,fe="You need at least one Access Key",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,j.prototype)}}t.AtLeastOneKeyError=j;class se extends v{constructor(de="Timeout",oe=1900,fe="Request timed out",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,se.prototype)}}t.TimeoutError=se;class ye extends v{constructor(de="InvalidArgument",oe=2001,fe="Invalid argument",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,ye.prototype)}}t.InvalidArgumentError=ye;class Ce extends v{constructor(de="Unavailable",oe=2002,fe="Unavailable resource",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,Ce.prototype)}}t.UnavailableError=Ce;class xe extends v{constructor(de="QueryFailed",oe=2003,fe="Query failed",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,xe.prototype)}}t.QueryFailedError=xe;class De extends v{constructor(de="ResourceExhausted",oe=2004,fe="Resource exhausted",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,De.prototype)}}t.ResourceExhaustedError=De;class qe extends v{constructor(de="NotFound",oe=3e3,fe="Resource not found",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,qe.prototype)}}t.NotFoundError=qe;class ze extends v{constructor(de="MetadataCallFailed",oe=3003,fe="Metadata service call failed",ce=0,ae){super(de,oe,fe,ce,ae),Object.setPrototypeOf(this,ze.prototype)}}t.MetadataCallFailedError=ze;var ft;(function(Be){Be.WebrpcEndpoint="WebrpcEndpoint",Be.WebrpcRequestFailed="WebrpcRequestFailed",Be.WebrpcBadRoute="WebrpcBadRoute",Be.WebrpcBadMethod="WebrpcBadMethod",Be.WebrpcBadRequest="WebrpcBadRequest",Be.WebrpcBadResponse="WebrpcBadResponse",Be.WebrpcServerPanic="WebrpcServerPanic",Be.WebrpcInternalError="WebrpcInternalError",Be.WebrpcClientDisconnected="WebrpcClientDisconnected",Be.WebrpcStreamLost="WebrpcStreamLost",Be.WebrpcStreamFinished="WebrpcStreamFinished",Be.Unauthorized="Unauthorized",Be.PermissionDenied="PermissionDenied",Be.SessionExpired="SessionExpired",Be.MethodNotFound="MethodNotFound",Be.RequestConflict="RequestConflict",Be.Aborted="Aborted",Be.Geoblocked="Geoblocked",Be.RateLimited="RateLimited",Be.ProjectNotFound="ProjectNotFound",Be.AccessKeyNotFound="AccessKeyNotFound",Be.AccessKeyMismatch="AccessKeyMismatch",Be.InvalidOrigin="InvalidOrigin",Be.InvalidService="InvalidService",Be.UnauthorizedUser="UnauthorizedUser",Be.QuotaExceeded="QuotaExceeded",Be.RateLimit="RateLimit",Be.NoDefaultKey="NoDefaultKey",Be.MaxAccessKeys="MaxAccessKeys",Be.AtLeastOneKey="AtLeastOneKey",Be.Timeout="Timeout",Be.InvalidArgument="InvalidArgument",Be.Unavailable="Unavailable",Be.QueryFailed="QueryFailed",Be.ResourceExhausted="ResourceExhausted",Be.NotFound="NotFound",Be.MetadataCallFailed="MetadataCallFailed"})(ft||(t.errors=ft={}));const mt={0:A,[-1]:S,[-2]:I,[-3]:B,[-4]:D,[-5]:V,[-6]:O,[-7]:U,[-8]:Q,[-9]:ie,[-10]:G,1e3:R,1001:k,1002:b,1003:w,1004:N,1005:L,1006:C,1007:T,1100:E,1101:P,1102:_,1103:H,1104:ne,1105:$,1200:te,1201:J,1300:ee,1301:X,1302:j,1900:se,2001:ye,2002:Ce,2003:xe,2004:De,3e3:qe,3003:ze}})(OJ);(function(t){var e=cs&&cs.__createBinding||(Object.create?function(l,u,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(u,f);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[f]}}),Object.defineProperty(l,d,p)}:function(l,u,f,d){d===void 0&&(d=f),l[d]=u[f]}),n=cs&&cs.__setModuleDefault||(Object.create?function(l,u){Object.defineProperty(l,"default",{enumerable:!0,value:u})}:function(l,u){l.default=u}),r=cs&&cs.__exportStar||function(l,u){for(var f in l)f!=="default"&&!Object.prototype.hasOwnProperty.call(u,f)&&e(u,l,f)},s=cs&&cs.__importStar||function(){var l=function(u){return l=Object.getOwnPropertyNames||function(f){var d=[];for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(d[d.length]=p);return d},l(u)};return function(u){if(u&&u.__esModule)return u;var f={};if(u!=null)for(var d=l(u),p=0;p<d.length;p++)d[p]!=="default"&&e(f,u,d[p]);return n(f,u),f}}();Object.defineProperty(t,"__esModule",{value:!0}),t.SequenceIndexerGateway=t.SequenceIndexer=t.IndexerGateway=void 0,r(PJ,t),t.IndexerGateway=s(OJ);const i=PJ,a=OJ;class o extends i.Indexer{constructor(f,d,p){super(f.endsWith("/")?f.slice(0,-1):f,fetch);q(this,"projectAccessKey");q(this,"jwtAuth");q(this,"_fetch",(f,d)=>{const p={},g=this.jwtAuth,m=this.projectAccessKey;return g&&g.length>0&&(p.Authorization=`BEARER ${g}`),m&&m.length>0&&(p["X-Access-Key"]=m),d.headers={...d.headers,...p},fetch(f,d)});this.projectAccessKey=d,this.jwtAuth=p,this.fetch=this._fetch}}t.SequenceIndexer=o;class c extends a.IndexerGateway{constructor(f,d,p){super(f.endsWith("/")?f.slice(0,-1):f,fetch);q(this,"projectAccessKey");q(this,"jwtAuth");q(this,"_fetch",(f,d)=>{const p={},g=this.jwtAuth,m=this.projectAccessKey;return g&&g.length>0&&(p.Authorization=`BEARER ${g}`),m&&m.length>0&&(p["X-Access-Key"]=m),d.headers={...d.headers,...p},fetch(f,d)});this.projectAccessKey=d,this.jwtAuth=p,this.fetch=this._fetch}}t.SequenceIndexerGateway=c})(Ms);var P8e={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */(function(t,e){(function(n){var r=Object.hasOwnProperty,s=Array.isArray?Array.isArray:function(T){return Object.prototype.toString.call(T)==="[object Array]"},i=10,a=typeof process=="object"&&typeof process.nextTick=="function",o=typeof Symbol=="function",c=typeof Reflect=="object",l=typeof setImmediate=="function",u=l?setImmediate:setTimeout,f=o?c&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(C){var T=Object.getOwnPropertyNames(C);return T.push.apply(T,Object.getOwnPropertySymbols(C)),T}:Object.keys;function d(){this._events={},this._conf&&p.call(this,this._conf)}function p(C){C&&(this._conf=C,C.delimiter&&(this.delimiter=C.delimiter),C.maxListeners!==n&&(this._maxListeners=C.maxListeners),C.wildcard&&(this.wildcard=C.wildcard),C.newListener&&(this._newListener=C.newListener),C.removeListener&&(this._removeListener=C.removeListener),C.verboseMemoryLeak&&(this.verboseMemoryLeak=C.verboseMemoryLeak),C.ignoreErrors&&(this.ignoreErrors=C.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function g(C,T){var E="(node) warning: possible EventEmitter memory leak detected. "+C+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(E+=" Event name: "+T+"."),typeof process<"u"&&process.emitWarning){var P=new Error(E);P.name="MaxListenersExceededWarning",P.emitter=this,P.count=C,process.emitWarning(P)}else console.error(E),console.trace&&console.trace()}var m=function(C,T,E){var P=arguments.length;switch(P){case 0:return[];case 1:return[C];case 2:return[C,T];case 3:return[C,T,E];default:for(var _=new Array(P);P--;)_[P]=arguments[P];return _}};function v(C,T){for(var E={},P,_=C.length,H=0,ne=0;ne<_;ne++)P=C[ne],E[P]=ne<H?T[ne]:n;return E}function A(C,T,E){this._emitter=C,this._target=T,this._listeners={},this._listenersCount=0;var P,_;if((E.on||E.off)&&(P=E.on,_=E.off),T.addEventListener?(P=T.addEventListener,_=T.removeEventListener):T.addListener?(P=T.addListener,_=T.removeListener):T.on&&(P=T.on,_=T.off),!P&&!_)throw Error("target does not implement any known event API");if(typeof P!="function")throw TypeError("on method must be a function");if(typeof _!="function")throw TypeError("off method must be a function");this._on=P,this._off=_;var H=C._observers;H?H.push(this):C._observers=[this]}Object.assign(A.prototype,{subscribe:function(C,T,E){var P=this,_=this._target,H=this._emitter,ne=this._listeners,$=function(){var te=m.apply(null,arguments),J={data:te,name:T,original:C};if(E){var ee=E.call(_,J);ee!==!1&&H.emit.apply(H,[J.name].concat(te));return}H.emit.apply(H,[T].concat(te))};if(ne[C])throw Error("Event '"+C+"' is already listening");this._listenersCount++,H._newListener&&H._removeListener&&!P._onNewListener?(this._onNewListener=function(te){te===T&&ne[C]===null&&(ne[C]=$,P._on.call(_,C,$))},H.on("newListener",this._onNewListener),this._onRemoveListener=function(te){te===T&&!H.hasListeners(te)&&ne[C]&&(ne[C]=null,P._off.call(_,C,$))},ne[C]=null,H.on("removeListener",this._onRemoveListener)):(ne[C]=$,P._on.call(_,C,$))},unsubscribe:function(C){var T=this,E=this._listeners,P=this._emitter,_,H,ne=this._off,$=this._target,te;if(C&&typeof C!="string")throw TypeError("event must be a string");function J(){T._onNewListener&&(P.off("newListener",T._onNewListener),P.off("removeListener",T._onRemoveListener),T._onNewListener=null,T._onRemoveListener=null);var ee=U.call(P,T);P._observers.splice(ee,1)}if(C){if(_=E[C],!_)return;ne.call($,C,_),delete E[C],--this._listenersCount||J()}else{for(H=f(E),te=H.length;te-- >0;)C=H[te],ne.call($,C,E[C]);this._listeners={},this._listenersCount=0,J()}}});function S(C,T,E,P){var _=Object.assign({},T);if(!C)return _;if(typeof C!="object")throw TypeError("options must be an object");var H=Object.keys(C),ne=H.length,$,te,J;function ee(j){throw Error('Invalid "'+$+'" option value'+(j?". Reason: "+j:""))}for(var X=0;X<ne;X++){if($=H[X],!r.call(T,$))throw Error('Unknown "'+$+'" option');te=C[$],te!==n&&(J=E[$],_[$]=J?J(te,ee):te)}return _}function I(C,T){return(typeof C!="function"||!C.hasOwnProperty("prototype"))&&T("value must be a constructor"),C}function B(C){var T="value must be type of "+C.join("|"),E=C.length,P=C[0],_=C[1];return E===1?function(H,ne){if(typeof H===P)return H;ne(T)}:E===2?function(H,ne){var $=typeof H;if($===P||$===_)return H;ne(T)}:function(H,ne){for(var $=typeof H,te=E;te-- >0;)if($===C[te])return H;ne(T)}}var D=B(["function"]),V=B(["object","function"]);function O(C,T,E){var P,_,H=0,ne,$=new C(function(te,J,ee){E=S(E,{timeout:0,overload:!1},{timeout:function(ye,Ce){return ye*=1,(typeof ye!="number"||ye<0||!Number.isFinite(ye))&&Ce("timeout must be a positive number"),ye}}),P=!E.overload&&typeof C.prototype.cancel=="function"&&typeof ee=="function";function X(){_&&(_=null),H&&(clearTimeout(H),H=0)}var j=function(ye){X(),te(ye)},se=function(ye){X(),J(ye)};P?T(j,se,ee):(_=[function(ye){se(ye||Error("canceled"))}],T(j,se,function(ye){if(ne)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof ye!="function")throw TypeError("onCancel callback must be a function");_.push(ye)}),ne=!0),E.timeout>0&&(H=setTimeout(function(){var ye=Error("timeout");ye.code="ETIMEDOUT",H=0,$.cancel(ye),J(ye)},E.timeout))});return P||($.cancel=function(te){if(_){for(var J=_.length,ee=1;ee<J;ee++)_[ee](te);_[0](te),_=null}}),$}function U(C){var T=this._observers;if(!T)return-1;for(var E=T.length,P=0;P<E;P++)if(T[P]._target===C)return P;return-1}function Q(C,T,E,P,_){if(!E)return null;if(P===0){var H=typeof T;if(H==="string"){var ne,$,te=0,J=0,ee=this.delimiter,X=ee.length;if(($=T.indexOf(ee))!==-1){ne=new Array(5);do ne[te++]=T.slice(J,$),J=$+X;while(($=T.indexOf(ee,J))!==-1);ne[te++]=T.slice(J),T=ne,_=te}else T=[T],_=1}else H==="object"?_=T.length:(T=[T],_=1)}var j=null,se,ye,Ce,xe,De,qe=T[P],ze=T[P+1],ft,mt;if(P===_)E._listeners&&(typeof E._listeners=="function"?(C&&C.push(E._listeners),j=[E]):(C&&C.push.apply(C,E._listeners),j=[E]));else if(qe==="*"){for(ft=f(E),$=ft.length;$-- >0;)se=ft[$],se!=="_listeners"&&(mt=Q(C,T,E[se],P+1,_),mt&&(j?j.push.apply(j,mt):j=mt));return j}else if(qe==="**"){for(De=P+1===_||P+2===_&&ze==="*",De&&E._listeners&&(j=Q(C,T,E,_,_)),ft=f(E),$=ft.length;$-- >0;)se=ft[$],se!=="_listeners"&&(se==="*"||se==="**"?(E[se]._listeners&&!De&&(mt=Q(C,T,E[se],_,_),mt&&(j?j.push.apply(j,mt):j=mt)),mt=Q(C,T,E[se],P,_)):se===ze?mt=Q(C,T,E[se],P+2,_):mt=Q(C,T,E[se],P,_),mt&&(j?j.push.apply(j,mt):j=mt));return j}else E[qe]&&(j=Q(C,T,E[qe],P+1,_));if(ye=E["*"],ye&&Q(C,T,ye,P+1,_),Ce=E["**"],Ce)if(P<_)for(Ce._listeners&&Q(C,T,Ce,_,_),ft=f(Ce),$=ft.length;$-- >0;)se=ft[$],se!=="_listeners"&&(se===ze?Q(C,T,Ce[se],P+2,_):se===qe?Q(C,T,Ce[se],P+1,_):(xe={},xe[se]=Ce[se],Q(C,T,{"**":xe},P+1,_)));else Ce._listeners?Q(C,T,Ce,_,_):Ce["*"]&&Ce["*"]._listeners&&Q(C,T,Ce["*"],_,_);return j}function ie(C,T,E){var P=0,_=0,H,ne=this.delimiter,$=ne.length,te;if(typeof C=="string")if((H=C.indexOf(ne))!==-1){te=new Array(5);do te[P++]=C.slice(_,H),_=H+$;while((H=C.indexOf(ne,_))!==-1);te[P++]=C.slice(_)}else te=[C],P=1;else te=C,P=C.length;if(P>1){for(H=0;H+1<P;H++)if(te[H]==="**"&&te[H+1]==="**")return}var J=this.listenerTree,ee;for(H=0;H<P;H++)if(ee=te[H],J=J[ee]||(J[ee]={}),H===P-1)return J._listeners?(typeof J._listeners=="function"&&(J._listeners=[J._listeners]),E?J._listeners.unshift(T):J._listeners.push(T),!J._listeners.warned&&this._maxListeners>0&&J._listeners.length>this._maxListeners&&(J._listeners.warned=!0,g.call(this,J._listeners.length,ee))):J._listeners=T,!0;return!0}function G(C,T,E,P){for(var _=f(C),H=_.length,ne,$,te,J=C._listeners,ee;H-- >0;)$=_[H],ne=C[$],$==="_listeners"?te=E:te=E?E.concat($):[$],ee=P||typeof $=="symbol",J&&T.push(ee?te:te.join(this.delimiter)),typeof ne=="object"&&G.call(this,ne,T,te,ee);return T}function R(C){for(var T=f(C),E=T.length,P,_,H;E-- >0;)_=T[E],P=C[_],P&&(H=!0,_!=="_listeners"&&!R(P)&&delete C[_]);return H}function k(C,T,E){this.emitter=C,this.event=T,this.listener=E}k.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function b(C,T,E){if(E===!0)_=!0;else if(E===!1)P=!0;else{if(!E||typeof E!="object")throw TypeError("options should be an object or true");var P=E.async,_=E.promisify,H=E.nextTick,ne=E.objectify}if(P||H||_){var $=T,te=T._origin||T;if(H&&!a)throw Error("process.nextTick is not supported");_===n&&(_=T.constructor.name==="AsyncFunction"),T=function(){var J=arguments,ee=this,X=this.event;return _?H?Promise.resolve():new Promise(function(j){u(j)}).then(function(){return ee.event=X,$.apply(ee,J)}):(H?process.nextTick:u)(function(){ee.event=X,$.apply(ee,J)})},T._async=!0,T._origin=te}return[T,ne?new k(this,C,T):this]}function w(C){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,p.call(this,C)}w.EventEmitter2=w,w.prototype.listenTo=function(C,T,E){if(typeof C!="object")throw TypeError("target musts be an object");var P=this;E=S(E,{on:n,off:n,reducers:n},{on:D,off:D,reducers:V});function _(H){if(typeof H!="object")throw TypeError("events must be an object");var ne=E.reducers,$=U.call(P,C),te;$===-1?te=new A(P,C,E):te=P._observers[$];for(var J=f(H),ee=J.length,X,j=typeof ne=="function",se=0;se<ee;se++)X=J[se],te.subscribe(X,H[X]||X,j?ne:ne&&ne[X])}return s(T)?_(v(T)):_(typeof T=="string"?v(T.split(/\s+/)):T),this},w.prototype.stopListeningTo=function(C,T){var E=this._observers;if(!E)return!1;var P=E.length,_,H=!1;if(C&&typeof C!="object")throw TypeError("target should be an object");for(;P-- >0;)_=E[P],(!C||_._target===C)&&(_.unsubscribe(T),H=!0);return H},w.prototype.delimiter=".",w.prototype.setMaxListeners=function(C){C!==n&&(this._maxListeners=C,this._conf||(this._conf={}),this._conf.maxListeners=C)},w.prototype.getMaxListeners=function(){return this._maxListeners},w.prototype.event="",w.prototype.once=function(C,T,E){return this._once(C,T,!1,E)},w.prototype.prependOnceListener=function(C,T,E){return this._once(C,T,!0,E)},w.prototype._once=function(C,T,E,P){return this._many(C,1,T,E,P)},w.prototype.many=function(C,T,E,P){return this._many(C,T,E,!1,P)},w.prototype.prependMany=function(C,T,E,P){return this._many(C,T,E,!0,P)},w.prototype._many=function(C,T,E,P,_){var H=this;if(typeof E!="function")throw new Error("many only accepts instances of Function");function ne(){return--T===0&&H.off(C,ne),E.apply(this,arguments)}return ne._origin=E,this._on(C,ne,P,_)},w.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var C=arguments[0],T,E=this.wildcard,P,_,H,ne,$;if(C==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(E&&(T=C,C!=="newListener"&&C!=="removeListener"&&typeof C=="object")){if(_=C.length,o){for(H=0;H<_;H++)if(typeof C[H]=="symbol"){$=!0;break}}$||(C=C.join(this.delimiter))}var te=arguments.length,J;if(this._all&&this._all.length)for(J=this._all.slice(),H=0,_=J.length;H<_;H++)switch(this.event=C,te){case 1:J[H].call(this,C);break;case 2:J[H].call(this,C,arguments[1]);break;case 3:J[H].call(this,C,arguments[1],arguments[2]);break;default:J[H].apply(this,arguments)}if(E)J=[],Q.call(this,J,T,this.listenerTree,0,_);else if(J=this._events[C],typeof J=="function"){switch(this.event=C,te){case 1:J.call(this);break;case 2:J.call(this,arguments[1]);break;case 3:J.call(this,arguments[1],arguments[2]);break;default:for(P=new Array(te-1),ne=1;ne<te;ne++)P[ne-1]=arguments[ne];J.apply(this,P)}return!0}else J&&(J=J.slice());if(J&&J.length){if(te>3)for(P=new Array(te-1),ne=1;ne<te;ne++)P[ne-1]=arguments[ne];for(H=0,_=J.length;H<_;H++)switch(this.event=C,te){case 1:J[H].call(this);break;case 2:J[H].call(this,arguments[1]);break;case 3:J[H].call(this,arguments[1],arguments[2]);break;default:J[H].apply(this,P)}return!0}else if(!this.ignoreErrors&&!this._all&&C==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},w.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var C=arguments[0],T=this.wildcard,E,P,_,H,ne,$;if(C==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(T&&(E=C,C!=="newListener"&&C!=="removeListener"&&typeof C=="object")){if(H=C.length,o){for(ne=0;ne<H;ne++)if(typeof C[ne]=="symbol"){P=!0;break}}P||(C=C.join(this.delimiter))}var te=[],J=arguments.length,ee;if(this._all)for(ne=0,H=this._all.length;ne<H;ne++)switch(this.event=C,J){case 1:te.push(this._all[ne].call(this,C));break;case 2:te.push(this._all[ne].call(this,C,arguments[1]));break;case 3:te.push(this._all[ne].call(this,C,arguments[1],arguments[2]));break;default:te.push(this._all[ne].apply(this,arguments))}if(T?(ee=[],Q.call(this,ee,E,this.listenerTree,0)):ee=this._events[C],typeof ee=="function")switch(this.event=C,J){case 1:te.push(ee.call(this));break;case 2:te.push(ee.call(this,arguments[1]));break;case 3:te.push(ee.call(this,arguments[1],arguments[2]));break;default:for(_=new Array(J-1),$=1;$<J;$++)_[$-1]=arguments[$];te.push(ee.apply(this,_))}else if(ee&&ee.length){if(ee=ee.slice(),J>3)for(_=new Array(J-1),$=1;$<J;$++)_[$-1]=arguments[$];for(ne=0,H=ee.length;ne<H;ne++)switch(this.event=C,J){case 1:te.push(ee[ne].call(this));break;case 2:te.push(ee[ne].call(this,arguments[1]));break;case 3:te.push(ee[ne].call(this,arguments[1],arguments[2]));break;default:te.push(ee[ne].apply(this,_))}}else if(!this.ignoreErrors&&!this._all&&C==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(te)},w.prototype.on=function(C,T,E){return this._on(C,T,!1,E)},w.prototype.prependListener=function(C,T,E){return this._on(C,T,!0,E)},w.prototype.onAny=function(C){return this._onAny(C,!1)},w.prototype.prependAny=function(C){return this._onAny(C,!0)},w.prototype.addListener=w.prototype.on,w.prototype._onAny=function(C,T){if(typeof C!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),T?this._all.unshift(C):this._all.push(C),this},w.prototype._on=function(C,T,E,P){if(typeof C=="function")return this._onAny(C,T),this;if(typeof T!="function")throw new Error("on only accepts instances of Function");this._events||d.call(this);var _=this,H;return P!==n&&(H=b.call(this,C,T,P),T=H[0],_=H[1]),this._newListener&&this.emit("newListener",C,T),this.wildcard?(ie.call(this,C,T,E),_):(this._events[C]?(typeof this._events[C]=="function"&&(this._events[C]=[this._events[C]]),E?this._events[C].unshift(T):this._events[C].push(T),!this._events[C].warned&&this._maxListeners>0&&this._events[C].length>this._maxListeners&&(this._events[C].warned=!0,g.call(this,this._events[C].length,C))):this._events[C]=T,_)},w.prototype.off=function(C,T){if(typeof T!="function")throw new Error("removeListener only takes instances of Function");var E,P=[];if(this.wildcard){var _=typeof C=="string"?C.split(this.delimiter):C.slice();if(P=Q.call(this,null,_,this.listenerTree,0),!P)return this}else{if(!this._events[C])return this;E=this._events[C],P.push({_listeners:E})}for(var H=0;H<P.length;H++){var ne=P[H];if(E=ne._listeners,s(E)){for(var $=-1,te=0,J=E.length;te<J;te++)if(E[te]===T||E[te].listener&&E[te].listener===T||E[te]._origin&&E[te]._origin===T){$=te;break}if($<0)continue;return this.wildcard?ne._listeners.splice($,1):this._events[C].splice($,1),E.length===0&&(this.wildcard?delete ne._listeners:delete this._events[C]),this._removeListener&&this.emit("removeListener",C,T),this}else(E===T||E.listener&&E.listener===T||E._origin&&E._origin===T)&&(this.wildcard?delete ne._listeners:delete this._events[C],this._removeListener&&this.emit("removeListener",C,T))}return this.listenerTree&&R(this.listenerTree),this},w.prototype.offAny=function(C){var T=0,E=0,P;if(C&&this._all&&this._all.length>0){for(P=this._all,T=0,E=P.length;T<E;T++)if(C===P[T])return P.splice(T,1),this._removeListener&&this.emit("removeListenerAny",C),this}else{if(P=this._all,this._removeListener)for(T=0,E=P.length;T<E;T++)this.emit("removeListenerAny",P[T]);this._all=[]}return this},w.prototype.removeListener=w.prototype.off,w.prototype.removeAllListeners=function(C){if(C===n)return!this._events||d.call(this),this;if(this.wildcard){var T=Q.call(this,null,C,this.listenerTree,0),E,P;if(!T)return this;for(P=0;P<T.length;P++)E=T[P],E._listeners=null;this.listenerTree&&R(this.listenerTree)}else this._events&&(this._events[C]=null);return this},w.prototype.listeners=function(C){var T=this._events,E,P,_,H,ne;if(C===n){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!T)return[];for(E=f(T),H=E.length,_=[];H-- >0;)P=T[E[H]],typeof P=="function"?_.push(P):_.push.apply(_,P);return _}else{if(this.wildcard){if(ne=this.listenerTree,!ne)return[];var $=[],te=typeof C=="string"?C.split(this.delimiter):C.slice();return Q.call(this,$,te,ne,0),$}return T?(P=T[C],P?typeof P=="function"?[P]:P:[]):[]}},w.prototype.eventNames=function(C){var T=this._events;return this.wildcard?G.call(this,this.listenerTree,[],null,C):T?f(T):[]},w.prototype.listenerCount=function(C){return this.listeners(C).length},w.prototype.hasListeners=function(C){if(this.wildcard){var T=[],E=typeof C=="string"?C.split(this.delimiter):C.slice();return Q.call(this,T,E,this.listenerTree,0),T.length>0}var P=this._events,_=this._all;return!!(_&&_.length||P&&(C===n?f(P).length:P[C]))},w.prototype.listenersAny=function(){return this._all?this._all:[]},w.prototype.waitFor=function(C,T){var E=this,P=typeof T;return P==="number"?T={timeout:T}:P==="function"&&(T={filter:T}),T=S(T,{timeout:0,filter:n,handleError:!1,Promise,overload:!1},{filter:D,Promise:I}),O(T.Promise,function(_,H,ne){function $(){var te=T.filter;if(!(te&&!te.apply(E,arguments)))if(E.off(C,$),T.handleError){var J=arguments[0];J?H(J):_(m.apply(null,arguments).slice(1))}else _(m.apply(null,arguments))}ne(function(){E.off(C,$)}),E._on(C,$,!1)},{timeout:T.timeout,overload:T.overload})};function N(C,T,E){E=S(E,{Promise,timeout:0,overload:!1},{Promise:I});var P=E.Promise;return O(P,function(_,H,ne){var $;if(typeof C.addEventListener=="function"){$=function(){_(m.apply(null,arguments))},ne(function(){C.removeEventListener(T,$)}),C.addEventListener(T,$,{once:!0});return}var te=function(){J&&C.removeListener("error",J),_(m.apply(null,arguments))},J;T!=="error"&&(J=function(ee){C.removeListener(T,te),H(ee)},C.once("error",J)),ne(function(){J&&C.removeListener("error",J),C.removeListener(T,te)}),C.once(T,te)},{timeout:E.timeout,overload:E.overload})}var L=w.prototype;Object.defineProperties(w,{defaultMaxListeners:{get:function(){return L._maxListeners},set:function(C){if(typeof C!="number"||C<0||Number.isNaN(C))throw TypeError("n must be a non-negative number");L._maxListeners=C},enumerable:!0},once:{value:N,writable:!0,configurable:!0}}),Object.defineProperties(L,{_maxListeners:{value:i,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),t.exports=w})()})(P8e);var Ayt=P8e.exports;let Et=function(t){return t.MAINNET="mainnet",t.TESTNET="testnet",t}({}),ge=function(t){return t[t.MAINNET=1]="MAINNET",t[t.ROPSTEN=3]="ROPSTEN",t[t.RINKEBY=4]="RINKEBY",t[t.GOERLI=5]="GOERLI",t[t.KOVAN=42]="KOVAN",t[t.SEPOLIA=11155111]="SEPOLIA",t[t.POLYGON=137]="POLYGON",t[t.POLYGON_MUMBAI=80001]="POLYGON_MUMBAI",t[t.POLYGON_ZKEVM=1101]="POLYGON_ZKEVM",t[t.POLYGON_AMOY=80002]="POLYGON_AMOY",t[t.BSC=56]="BSC",t[t.BSC_TESTNET=97]="BSC_TESTNET",t[t.OPTIMISM=10]="OPTIMISM",t[t.OPTIMISM_KOVAN=69]="OPTIMISM_KOVAN",t[t.OPTIMISM_GOERLI=420]="OPTIMISM_GOERLI",t[t.OPTIMISM_SEPOLIA=11155420]="OPTIMISM_SEPOLIA",t[t.ARBITRUM=42161]="ARBITRUM",t[t.ARBITRUM_GOERLI=421613]="ARBITRUM_GOERLI",t[t.ARBITRUM_SEPOLIA=421614]="ARBITRUM_SEPOLIA",t[t.ARBITRUM_NOVA=42170]="ARBITRUM_NOVA",t[t.AVALANCHE=43114]="AVALANCHE",t[t.AVALANCHE_TESTNET=43113]="AVALANCHE_TESTNET",t[t.GNOSIS=100]="GNOSIS",t[t.BASE=8453]="BASE",t[t.BASE_GOERLI=84531]="BASE_GOERLI",t[t.BASE_SEPOLIA=84532]="BASE_SEPOLIA",t[t.HOMEVERSE_TESTNET=40875]="HOMEVERSE_TESTNET",t[t.HOMEVERSE=19011]="HOMEVERSE",t[t.XAI=660279]="XAI",t[t.XAI_SEPOLIA=37714555429]="XAI_SEPOLIA",t[t.TELOS=40]="TELOS",t[t.TELOS_TESTNET=41]="TELOS_TESTNET",t[t.B3=8333]="B3",t[t.B3_SEPOLIA=1993]="B3_SEPOLIA",t[t.APECHAIN=33139]="APECHAIN",t[t.APECHAIN_TESTNET=33111]="APECHAIN_TESTNET",t[t.BLAST=81457]="BLAST",t[t.BLAST_SEPOLIA=168587773]="BLAST_SEPOLIA",t[t.BORNE_TESTNET=94984]="BORNE_TESTNET",t[t.SKALE_NEBULA=1482601649]="SKALE_NEBULA",t[t.SKALE_NEBULA_TESTNET=37084624]="SKALE_NEBULA_TESTNET",t[t.SONEIUM_MINATO=1946]="SONEIUM_MINATO",t[t.SONEIUM=1868]="SONEIUM",t[t.TOY_TESTNET=21e6]="TOY_TESTNET",t[t.IMMUTABLE_ZKEVM=13371]="IMMUTABLE_ZKEVM",t[t.IMMUTABLE_ZKEVM_TESTNET=13473]="IMMUTABLE_ZKEVM_TESTNET",t[t.HARDHAT=31337]="HARDHAT",t[t.HARDHAT_2=31338]="HARDHAT_2",t[t.ETHERLINK=42793]="ETHERLINK",t[t.ETHERLINK_TESTNET=128123]="ETHERLINK_TESTNET",t[t.ETHERLINK_SHADOWNET_TESTNET=127823]="ETHERLINK_SHADOWNET_TESTNET",t[t.MOONBEAM=1284]="MOONBEAM",t[t.MOONBASE_ALPHA=1287]="MOONBASE_ALPHA",t[t.MONAD_TESTNET=10143]="MONAD_TESTNET",t[t.MONAD=143]="MONAD",t[t.SOMNIA_TESTNET=50312]="SOMNIA_TESTNET",t[t.SOMNIA=5031]="SOMNIA",t[t.INCENTIV_TESTNET=11690]="INCENTIV_TESTNET",t[t.INCENTIV_TESTNET_V2=28802]="INCENTIV_TESTNET_V2",t[t.INCENTIV=24101]="INCENTIV",t[t.KATANA=747474]="KATANA",t[t.SANDBOX_TESTNET=6252]="SANDBOX_TESTNET",t[t.ARC_TESTNET=5042002]="ARC_TESTNET",t[t.HYPEREVM=999]="HYPEREVM",t[t.SONIC=146]="SONIC",t[t.BERACHAIN=80094]="BERACHAIN",t}({});const qk={[ge.MAINNET]:{chainId:ge.MAINNET,type:Et.MAINNET,name:"mainnet",title:"Ethereum",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.MAINNET}.webp`,blockExplorer:{name:"Etherscan",rootUrl:"https://etherscan.io/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},[ge.ROPSTEN]:{chainId:ge.ROPSTEN,type:Et.TESTNET,name:"ropsten",title:"Ropsten",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.ROPSTEN}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Ropsten)",rootUrl:"https://ropsten.etherscan.io/"},nativeToken:{symbol:"roETH",name:"Ropsten Ether",decimals:18},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",deprecated:!0},[ge.RINKEBY]:{chainId:ge.RINKEBY,type:Et.TESTNET,name:"rinkeby",title:"Rinkeby",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.RINKEBY}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Rinkeby)",rootUrl:"https://rinkeby.etherscan.io/"},nativeToken:{symbol:"rETH",name:"Rinkeby Ether",decimals:18},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",deprecated:!0},[ge.GOERLI]:{chainId:ge.GOERLI,type:Et.TESTNET,name:"goerli",title:"Goerli",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.GOERLI}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Goerli)",rootUrl:"https://goerli.etherscan.io/"},nativeToken:{symbol:"gETH",name:"Goerli Ether",decimals:18},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",deprecated:!0},[ge.KOVAN]:{chainId:ge.KOVAN,type:Et.TESTNET,name:"kovan",title:"Kovan",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.KOVAN}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Kovan)",rootUrl:"https://kovan.etherscan.io/"},nativeToken:{symbol:"kETH",name:"Kovan Ether",decimals:18},deprecated:!0},[ge.SEPOLIA]:{chainId:ge.SEPOLIA,type:Et.TESTNET,name:"sepolia",title:"Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Sepolia)",rootUrl:"https://sepolia.etherscan.io/"},nativeToken:{symbol:"sETH",name:"Sepolia Ether",decimals:18}},[ge.POLYGON]:{chainId:ge.POLYGON,type:Et.MAINNET,name:"polygon",title:"Polygon",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.POLYGON}.webp`,blockExplorer:{name:"Polygonscan",rootUrl:"https://polygonscan.com/"},nativeToken:{symbol:"POL",name:"POL",decimals:18}},[ge.POLYGON_MUMBAI]:{chainId:ge.POLYGON_MUMBAI,type:Et.TESTNET,name:"mumbai",title:"Polygon Mumbai",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.POLYGON_MUMBAI}.webp`,testnet:!0,blockExplorer:{name:"Polygonscan (Mumbai)",rootUrl:"https://mumbai.polygonscan.com/"},nativeToken:{symbol:"mMATIC",name:"Mumbai Polygon",decimals:18},deprecated:!0},[ge.POLYGON_AMOY]:{chainId:ge.POLYGON_AMOY,type:Et.TESTNET,name:"amoy",title:"Polygon Amoy",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.POLYGON_AMOY}.webp`,testnet:!0,blockExplorer:{name:"OKLink (Amoy)",rootUrl:"https://www.oklink.com/amoy/"},nativeToken:{symbol:"aPOL",name:"Amoy POL",decimals:18}},[ge.POLYGON_ZKEVM]:{chainId:ge.POLYGON_ZKEVM,type:Et.MAINNET,name:"polygon-zkevm",title:"Polygon zkEVM",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.POLYGON_ZKEVM}.webp`,blockExplorer:{name:"Polygonscan (zkEVM)",rootUrl:"https://zkevm.polygonscan.com/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ge.BSC]:{chainId:ge.BSC,type:Et.MAINNET,name:"bsc",title:"BNB Smart Chain",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.BSC}.webp`,blockExplorer:{name:"BSCScan",rootUrl:"https://bscscan.com/"},nativeToken:{symbol:"BNB",name:"BNB",decimals:18}},[ge.BSC_TESTNET]:{chainId:ge.BSC_TESTNET,type:Et.TESTNET,name:"bsc-testnet",title:"BNB Smart Chain Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.BSC_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"BSCScan (Testnet)",rootUrl:"https://testnet.bscscan.com/"},nativeToken:{symbol:"tBNB",name:"Testnet BNB",decimals:18}},[ge.OPTIMISM]:{chainId:ge.OPTIMISM,type:Et.MAINNET,name:"optimism",title:"Optimism",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.OPTIMISM}.webp`,blockExplorer:{name:"Etherscan (Optimism)",rootUrl:"https://optimistic.etherscan.io/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ge.OPTIMISM_KOVAN]:{chainId:ge.OPTIMISM_KOVAN,type:Et.TESTNET,name:"optimism-kovan",title:"Optimism Kovan",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.OPTIMISM_KOVAN}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Optimism Kovan)",rootUrl:"https://kovan-optimistic.etherscan.io/"},nativeToken:{symbol:"kETH",name:"Kovan Ether",decimals:18},deprecated:!0},[ge.OPTIMISM_GOERLI]:{chainId:ge.OPTIMISM_GOERLI,type:Et.TESTNET,name:"optimism-goerli",title:"Optimism Goerli",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.OPTIMISM_GOERLI}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Optimism Goerli)",rootUrl:"https://goerli-optimistic.etherscan.io/"},nativeToken:{symbol:"gETH",name:"Goerli Ether",decimals:18},deprecated:!0},[ge.OPTIMISM_SEPOLIA]:{chainId:ge.OPTIMISM_SEPOLIA,type:Et.TESTNET,name:"optimism-sepolia",title:"Optimism Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.OPTIMISM_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Optimism Sepolia)",rootUrl:"https://sepolia-optimistic.etherscan.io/"},nativeToken:{symbol:"sETH",name:"Sepolia Ether",decimals:18}},[ge.ARBITRUM]:{chainId:ge.ARBITRUM,type:Et.MAINNET,name:"arbitrum",title:"Arbitrum One",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.ARBITRUM}.webp`,blockExplorer:{name:"Arbiscan",rootUrl:"https://arbiscan.io/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ge.ARBITRUM_GOERLI]:{chainId:ge.ARBITRUM_GOERLI,type:Et.TESTNET,name:"arbitrum-goerli",title:"Arbitrum Goerli",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.ARBITRUM_GOERLI}.webp`,testnet:!0,blockExplorer:{name:"Arbiscan (Goerli Testnet)",rootUrl:"https://testnet.arbiscan.io/"},nativeToken:{symbol:"gETH",name:"Goerli Ether",decimals:18},deprecated:!0},[ge.ARBITRUM_SEPOLIA]:{chainId:ge.ARBITRUM_SEPOLIA,type:Et.TESTNET,name:"arbitrum-sepolia",title:"Arbitrum Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.ARBITRUM_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Arbiscan (Sepolia Testnet)",rootUrl:"https://sepolia.arbiscan.io/"},nativeToken:{symbol:"sETH",name:"Sepolia Ether",decimals:18}},[ge.ARBITRUM_NOVA]:{chainId:ge.ARBITRUM_NOVA,type:Et.MAINNET,name:"arbitrum-nova",title:"Arbitrum Nova",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.ARBITRUM_NOVA}.webp`,blockExplorer:{name:"Arbiscan Nova",rootUrl:"https://nova.arbiscan.io/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ge.AVALANCHE]:{chainId:ge.AVALANCHE,type:Et.MAINNET,name:"avalanche",title:"Avalanche",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.AVALANCHE}.webp`,blockExplorer:{name:"Snowtrace",rootUrl:"https://subnets.avax.network/c-chain/"},nativeToken:{symbol:"AVAX",name:"AVAX",decimals:18}},[ge.AVALANCHE_TESTNET]:{chainId:ge.AVALANCHE_TESTNET,type:Et.TESTNET,name:"avalanche-testnet",title:"Avalanche Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.AVALANCHE_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Snowtrace (Testnet)",rootUrl:"https://subnets-test.avax.network/c-chain/"},nativeToken:{symbol:"tAVAX",name:"Testnet AVAX",decimals:18}},[ge.GNOSIS]:{chainId:ge.GNOSIS,type:Et.MAINNET,name:"gnosis",title:"Gnosis Chain",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.GNOSIS}.webp`,blockExplorer:{name:"Gnosis Chain Explorer",rootUrl:"https://blockscout.com/xdai/mainnet/"},nativeToken:{symbol:"XDAI",name:"XDAI",decimals:18}},[ge.BASE]:{chainId:ge.BASE,type:Et.MAINNET,name:"base",title:"Base (Coinbase)",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.BASE}.webp`,blockExplorer:{name:"Base Explorer",rootUrl:"https://basescan.org/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ge.BASE_GOERLI]:{chainId:ge.BASE_GOERLI,type:Et.TESTNET,name:"base-goerli",title:"Base Goerli",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.BASE_GOERLI}.webp`,testnet:!0,blockExplorer:{name:"Base Goerli Explorer",rootUrl:"https://goerli.basescan.org/"},nativeToken:{symbol:"gETH",name:"Goerli Ether",decimals:18},deprecated:!0},[ge.BASE_SEPOLIA]:{chainId:ge.BASE_SEPOLIA,type:Et.TESTNET,name:"base-sepolia",title:"Base Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.BASE_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Base Sepolia Explorer",rootUrl:"https://base-sepolia.blockscout.com/"},nativeToken:{symbol:"sETH",name:"Sepolia Ether",decimals:18}},[ge.HOMEVERSE]:{chainId:ge.HOMEVERSE,type:Et.MAINNET,name:"homeverse",title:"Oasys Homeverse",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.HOMEVERSE}.webp`,blockExplorer:{name:"Oasys Homeverse Explorer",rootUrl:"https://explorer.oasys.homeverse.games/"},nativeToken:{symbol:"OAS",name:"OAS",decimals:18}},[ge.HOMEVERSE_TESTNET]:{chainId:ge.HOMEVERSE_TESTNET,type:Et.TESTNET,name:"homeverse-testnet",title:"Oasys Homeverse Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.HOMEVERSE_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Oasys Homeverse Explorer (Testnet)",rootUrl:"https://explorer.testnet.oasys.homeverse.games/"},nativeToken:{symbol:"tOAS",name:"Testnet OAS",decimals:18}},[ge.XAI]:{chainId:ge.XAI,type:Et.MAINNET,name:"xai",title:"Xai",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.XAI}.webp`,blockExplorer:{name:"Xai Explorer",rootUrl:"https://explorer.xai-chain.net/"},nativeToken:{symbol:"XAI",name:"XAI",decimals:18}},[ge.XAI_SEPOLIA]:{chainId:ge.XAI_SEPOLIA,type:Et.TESTNET,name:"xai-sepolia",title:"Xai Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.XAI_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Xai Sepolia Explorer",rootUrl:"https://testnet-explorer-v2.xai-chain.net/"},nativeToken:{symbol:"sXAI",name:"Sepolia XAI",decimals:18}},[ge.B3]:{chainId:ge.B3,type:Et.MAINNET,name:"b3",title:"B3",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.B3}.webp`,testnet:!1,blockExplorer:{name:"B3 Explorer",rootUrl:"https://explorer.b3.fun/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ge.B3_SEPOLIA]:{chainId:ge.B3_SEPOLIA,type:Et.TESTNET,name:"b3-sepolia",title:"B3 Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.B3_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"B3 Sepolia Explorer",rootUrl:"https://sepolia.explorer.b3.fun/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ge.APECHAIN]:{chainId:ge.APECHAIN,type:Et.MAINNET,name:"apechain",title:"APE Chain",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.APECHAIN}.webp`,testnet:!1,blockExplorer:{name:"APE Chain Explorer",rootUrl:"https://apechain.calderaexplorer.xyz/"},nativeToken:{symbol:"APE",name:"ApeCoin",decimals:18}},[ge.APECHAIN_TESTNET]:{chainId:ge.APECHAIN_TESTNET,type:Et.TESTNET,name:"apechain-testnet",title:"APE Chain Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.APECHAIN_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"APE Chain Explorer",rootUrl:"https://curtis.explorer.caldera.xyz/"},nativeToken:{symbol:"APE",name:"ApeCoin",decimals:18}},[ge.BLAST]:{chainId:ge.BLAST,type:Et.MAINNET,name:"blast",title:"Blast",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.BLAST}.webp`,blockExplorer:{name:"Blast Explorer",rootUrl:"https://blastscan.io/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ge.BLAST_SEPOLIA]:{chainId:ge.BLAST_SEPOLIA,type:Et.TESTNET,name:"blast-sepolia",title:"Blast Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.BLAST_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Blast Sepolia Explorer",rootUrl:"https://sepolia.blastexplorer.io/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ge.TELOS]:{chainId:ge.TELOS,type:Et.MAINNET,name:"telos",title:"Telos",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.TELOS}.webp`,blockExplorer:{name:"Telos Explorer",rootUrl:"https://explorer.telos.net/network/"},nativeToken:{symbol:"TLOS",name:"TLOS",decimals:18}},[ge.TELOS_TESTNET]:{chainId:ge.TELOS_TESTNET,type:Et.TESTNET,name:"telos-testnet",title:"Telos Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.TELOS_TESTNET}.webp`,blockExplorer:{name:"Telos Testnet Explorer",rootUrl:"https://explorer-test.telos.net/network"},nativeToken:{symbol:"TLOS",name:"TLOS",decimals:18}},[ge.BORNE_TESTNET]:{chainId:ge.BORNE_TESTNET,type:Et.TESTNET,name:"borne-testnet",title:"Borne Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.BORNE_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Borne Testnet Explorer",rootUrl:"https://subnets-test.avax.network/bornegfdn"},nativeToken:{symbol:"BORNE",name:"BORNE",decimals:18},deprecated:!0},[ge.SKALE_NEBULA]:{chainId:ge.SKALE_NEBULA,type:Et.MAINNET,name:"skale-nebula",title:"SKALE Nebula Gaming Hub",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.SKALE_NEBULA}.webp`,testnet:!1,blockExplorer:{name:"SKALE Nebula Gaming Hub Explorer",rootUrl:"https://green-giddy-denebola.explorer.mainnet.skalenodes.com/"},nativeToken:{symbol:"sFUEL",name:"SKALE Fuel",decimals:18}},[ge.SKALE_NEBULA_TESTNET]:{chainId:ge.SKALE_NEBULA_TESTNET,type:Et.TESTNET,name:"skale-nebula-testnet",title:"SKALE Nebula Gaming Hub Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.SKALE_NEBULA_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"SKALE Nebula Gaming Hub Testnet Explorer",rootUrl:"https://lanky-ill-funny-testnet.explorer.testnet.skalenodes.com/"},nativeToken:{symbol:"sFUEL",name:"SKALE Fuel",decimals:18}},[ge.SONEIUM]:{chainId:ge.SONEIUM,type:Et.MAINNET,name:"soneium",title:"Soneium",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.SONEIUM}.webp`,testnet:!1,blockExplorer:{name:"Soneium Explorer",rootUrl:"https://soneium.blockscout.com/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ge.SONEIUM_MINATO]:{chainId:ge.SONEIUM_MINATO,type:Et.TESTNET,name:"soneium-minato",title:"Soneium Minato (Testnet)",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.SONEIUM_MINATO}.webp`,testnet:!0,blockExplorer:{name:"Soneium Minato Explorer",rootUrl:"https://explorer-testnet.soneium.org/"},nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ge.TOY_TESTNET]:{chainId:ge.TOY_TESTNET,type:Et.TESTNET,name:"toy-testnet",title:"TOY (Testnet)",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.TOY_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"TOY Testnet Explorer",rootUrl:"https://toy-chain-testnet.explorer.caldera.xyz/"},nativeToken:{symbol:"TOY",name:"TOY",decimals:18}},[ge.IMMUTABLE_ZKEVM]:{chainId:ge.IMMUTABLE_ZKEVM,type:Et.MAINNET,name:"immutable-zkevm",title:"Immutable zkEVM",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.IMMUTABLE_ZKEVM}.webp`,testnet:!1,blockExplorer:{name:"Immutable zkEVM Explorer",rootUrl:"https://explorer.immutable.com/"},nativeToken:{symbol:"IMX",name:"IMX",decimals:18}},[ge.IMMUTABLE_ZKEVM_TESTNET]:{chainId:ge.IMMUTABLE_ZKEVM_TESTNET,type:Et.TESTNET,name:"immutable-zkevm-testnet",title:"Immutable zkEVM Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.IMMUTABLE_ZKEVM_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Immutable zkEVM Testnet Explorer",rootUrl:"https://explorer.testnet.immutable.com/"},nativeToken:{symbol:"IMX",name:"IMX",decimals:18}},[ge.HARDHAT]:{chainId:ge.HARDHAT,name:"hardhat",title:"Hardhat (local testnet)",nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ge.HARDHAT_2]:{chainId:ge.HARDHAT_2,name:"hardhat2",title:"Hardhat (local testnet)",nativeToken:{symbol:"ETH",name:"Ether",decimals:18}},[ge.MOONBEAM]:{chainId:ge.MOONBEAM,type:Et.MAINNET,name:"moonbeam",title:"Moonbeam",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.MOONBEAM}.webp`,testnet:!1,blockExplorer:{name:"Moonscan",rootUrl:"https://moonscan.io/"},nativeToken:{symbol:"GLMR",name:"GLMR",decimals:18}},[ge.MOONBASE_ALPHA]:{chainId:ge.MOONBASE_ALPHA,type:Et.TESTNET,name:"moonbase-alpha",title:"Moonbase Alpha",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.MOONBASE_ALPHA}.webp`,testnet:!0,blockExplorer:{name:"Moonscan (Moonbase Alpha)",rootUrl:"https://moonbase.moonscan.io/"},nativeToken:{symbol:"GLMR",name:"GLMR",decimals:18}},[ge.ETHERLINK]:{chainId:ge.ETHERLINK,type:Et.MAINNET,name:"etherlink",title:"Etherlink",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.ETHERLINK}.webp`,testnet:!1,blockExplorer:{name:"Etherlink Explorer",rootUrl:"https://explorer.etherlink.com/"},nativeToken:{symbol:"XTZ",name:"Tez",decimals:18}},[ge.ETHERLINK_TESTNET]:{chainId:ge.ETHERLINK_TESTNET,type:Et.TESTNET,name:"etherlink-testnet",title:"Etherlink Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.ETHERLINK_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Etherlink Testnet Explorer",rootUrl:"https://testnet.explorer.etherlink.com/"},nativeToken:{symbol:"XTZ",name:"Tez",decimals:18}},[ge.ETHERLINK_SHADOWNET_TESTNET]:{chainId:ge.ETHERLINK_SHADOWNET_TESTNET,type:Et.TESTNET,name:"etherlink-shadownet-testnet",title:"Etherlink Shadownet Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.ETHERLINK_SHADOWNET_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Etherlink Shadownet Testnet Explorer",rootUrl:"https://shadownet.explorer.etherlink.com/"},nativeToken:{symbol:"XTZ",name:"Tez",decimals:18}},[ge.MONAD_TESTNET]:{chainId:ge.MONAD_TESTNET,type:Et.TESTNET,name:"monad-testnet",title:"Monad Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.MONAD_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Monad Testnet Explorer",rootUrl:"https://testnet.monadexplorer.com/"},nativeToken:{symbol:"MON",name:"MON",decimals:18}},[ge.MONAD]:{chainId:ge.MONAD,type:Et.MAINNET,name:"monad",title:"Monad",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.MONAD}.webp`,testnet:!1,blockExplorer:{name:"Monad Explorer",rootUrl:"https://monvision.io/"},nativeToken:{symbol:"MON",name:"MON",decimals:18}},[ge.SOMNIA_TESTNET]:{chainId:ge.SOMNIA_TESTNET,type:Et.TESTNET,name:"somnia-testnet",title:"Somnia Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.SOMNIA_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Somnia Testnet Explorer",rootUrl:"https://shannon-explorer.somnia.network/"},nativeToken:{symbol:"STT",name:"STT",decimals:18}},[ge.INCENTIV_TESTNET]:{chainId:ge.INCENTIV_TESTNET,type:Et.TESTNET,name:"incentiv-testnet",title:"Incentiv Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.INCENTIV_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Incentiv Testnet Explorer",rootUrl:"https://explorer.testnet.incentiv.net/"},nativeToken:{symbol:"CENT",name:"CENT",decimals:18},deprecated:!0},[ge.INCENTIV_TESTNET_V2]:{chainId:ge.INCENTIV_TESTNET_V2,type:Et.TESTNET,name:"incentiv-testnet-v2",title:"Incentiv Testnet v2",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.INCENTIV_TESTNET_V2}.webp`,testnet:!0,blockExplorer:{name:"Incentiv Testnet Explorer v2",rootUrl:"https://explorer-testnet.incentiv.io/"},nativeToken:{symbol:"TCENT",name:"TCENT",decimals:18}},[ge.INCENTIV]:{chainId:ge.INCENTIV,type:Et.MAINNET,name:"incentiv",title:"Incentiv",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.INCENTIV}.webp`,testnet:!0,blockExplorer:{name:"Incentiv",rootUrl:"https://explorer.incentiv.io/"},nativeToken:{symbol:"CENT",name:"CENT",decimals:18}},[ge.SOMNIA]:{chainId:ge.SOMNIA,type:Et.MAINNET,name:"somnia",title:"Somnia",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.SOMNIA}.webp`,testnet:!1,blockExplorer:{name:"Somnia Explorer",rootUrl:"https://mainnet.somnia.w3us.site/"},nativeToken:{symbol:"SOMI",name:"SOMI",decimals:18}},[ge.KATANA]:{chainId:ge.KATANA,type:Et.MAINNET,name:"katana",title:"Katana",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.KATANA}.webp`,testnet:!1,blockExplorer:{name:"Katana",rootUrl:"https://katanascan.com/"},nativeToken:{symbol:"ETH",name:"ETH",decimals:18}},[ge.SANDBOX_TESTNET]:{chainId:ge.SANDBOX_TESTNET,type:Et.TESTNET,name:"sandbox-testnet",title:"Sandbox Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.SANDBOX_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Sandbox Testnet Explorer",rootUrl:"https://sandbox-testnet.explorer.caldera.xyz/"},nativeToken:{symbol:"SAND",name:"SAND",decimals:18}},[ge.ARC_TESTNET]:{chainId:ge.ARC_TESTNET,type:Et.TESTNET,name:"arc-testnet",title:"Arc Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.ARC_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Arc Testnet Explorer",rootUrl:"https://testnet.arcscan.app/"},nativeToken:{symbol:"USDC",name:"USDC",decimals:18}},[ge.HYPEREVM]:{chainId:ge.HYPEREVM,type:Et.MAINNET,name:"hyperevm",title:"HyperEVM",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.HYPEREVM}.webp`,testnet:!1,blockExplorer:{name:"HyperEVM",rootUrl:"https://www.hyperscan.com/"},nativeToken:{symbol:"HYPE",name:"HYPE",decimals:18}},[ge.SONIC]:{chainId:ge.SONIC,type:Et.MAINNET,name:"sonic",title:"Sonic",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.SONIC}.webp`,testnet:!1,blockExplorer:{name:"Sonic",rootUrl:"https://sonicscan.org/"},nativeToken:{symbol:"Sonic",name:"Sonic",decimals:18}},[ge.BERACHAIN]:{chainId:ge.BERACHAIN,type:Et.MAINNET,name:"berachain",title:"Berachain",logoURI:`https://assets.sequence.info/images/networks/medium/${ge.BERACHAIN}.webp`,testnet:!1,blockExplorer:{name:"Berachain",rootUrl:"https://berascan.com/"},nativeToken:{symbol:"Berachain",name:"Berachain",decimals:18}}};function $5(){return $5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$5.apply(null,arguments)}const Nfe=t=>typeof t=="number"?t:t.chainId?t.chainId:Number(t),Syt=(t,e=!1,n=!1)=>{if(!t)throw new Error("invalid network config: empty config");const r=[];if(Array.isArray(t)?r.push(...t):r.push(t),r.length===0){if(e)throw new Error("invalid network config: empty config");return!1}const s=r.map(l=>l.chainId).sort(),i=s.filter((l,u)=>s.indexOf(l)!==u);if(i.length>0){if(e)throw new Error(`invalid network config: duplicate chainIds ${i}`);return!1}r.forEach(l=>l.name=l.name.toLowerCase());const a=r.map(l=>l.name).sort(),o=a.filter((l,u)=>a.indexOf(l)!==u);if(o.length>0){if(e)throw new Error(`invalid network config: duplicate network names ${o}`);return!1}let c=!1;for(let l=0;l<r.length;l++){const u=r[l];if((!u.rpcUrl||u.rpcUrl==="")&&!u.provider){if(e)throw new Error(`invalid network config for chainId ${u.chainId}: rpcUrl or provider must be provided`);return!1}if(!n&&!u.relayer){if(e)throw new Error(`invalid network config for chainId ${u.chainId}: relayer must be provided`);return!1}if(u.isDefaultChain){if(c){if(e)throw new Error(`invalid network config for chainId ${u.chainId}: DefaultChain is already set by another config`);return!1}c=!0}}if(!c){if(e)throw new Error("invalid network config: DefaultChain must be set");return!1}return!0},Iyt=(t,e=!1)=>(Syt(t,!0,e),t),Cyt=t=>Iyt(Tyt(t)),Kk=(t,e)=>{if(typeof e=="string")if(e.startsWith("0x")){const n=Number(e);return t.find(r=>r.chainId===n)}else return t.find(n=>n.name===e||`${n.chainId}`===e);else{if(typeof e=="number")return t.find(n=>n.chainId===e);if(e.chainId)return t.find(n=>n.chainId===e.chainId);if(typeof e=="bigint"){const n=Number(e);return t.find(r=>r.chainId===n)}else return}},Tyt=t=>{if(!t)return[];const e=t.sort((r,s)=>r.chainId===s.chainId?0:r.chainId<s.chainId?-1:1),n=e.findIndex(r=>r.isDefaultChain);return n>0&&e.splice(0,0,e.splice(n,1)[0]),e},Ite=(t,e)=>typeof t=="string"?(e=e||{},t.replace(/\$\{\s*([$#@\-\d\w]+)\s*\}/gim,function(n,r){let s=e[r];return typeof s=="function"?s=s():s==null?s="":typeof s=="object"||typeof s=="symbol"?s=s.toString():s=s.valueOf(),s})):"",Nyt=t=>Ite("https://${network}-indexer.sequence.app",{network:t}),kyt=t=>Ite("https://${network}-relayer.sequence.app",{network:t}),Pyt=t=>Ite("https://nodes.sequence.app/${network}",{network:t});function Oyt(t){return Kk(O8e,t)}function Ryt(t){return typeof t=="bigint"?t:Nmt(t)?BigInt(t):BigInt(t.chainId)}const cn=(t,e)=>{const n=qk[t];if(!n)throw new Error(`Network with chainId ${t} not found`);const r=Pyt(n.name);return $5({},n,{rpcUrl:r,indexerUrl:Nyt(n.name),relayer:{url:kyt(n.name),provider:{url:r}}},e)},_yt=[$5({},qk[ge.HARDHAT],{rpcUrl:"http://localhost:8545",relayer:{url:"http://localhost:3000",provider:{url:"http://localhost:8545"}}}),$5({},qk[ge.HARDHAT_2],{rpcUrl:"http://localhost:9545",relayer:{url:"http://localhost:3000",provider:{url:"http://localhost:9545"}}})],O8e=Cyt([$5({},cn(ge.POLYGON),{isDefaultChain:!0,isAuthChain:!0}),cn(ge.MAINNET),cn(ge.BSC),cn(ge.AVALANCHE),cn(ge.ARBITRUM),cn(ge.ARBITRUM_NOVA),cn(ge.OPTIMISM),cn(ge.OPTIMISM_SEPOLIA),cn(ge.POLYGON_ZKEVM),cn(ge.GNOSIS),cn(ge.RINKEBY,{disabled:!0}),cn(ge.GOERLI,{disabled:!0}),cn(ge.SEPOLIA),cn(ge.POLYGON_MUMBAI,{disabled:!0}),cn(ge.POLYGON_AMOY),cn(ge.BSC_TESTNET),cn(ge.ARBITRUM_SEPOLIA),cn(ge.BASE),cn(ge.BASE_SEPOLIA),cn(ge.HOMEVERSE),cn(ge.HOMEVERSE_TESTNET),cn(ge.XAI),cn(ge.XAI_SEPOLIA),cn(ge.AVALANCHE_TESTNET),cn(ge.B3),cn(ge.B3_SEPOLIA),cn(ge.APECHAIN),cn(ge.APECHAIN_TESTNET),cn(ge.BLAST),cn(ge.BLAST_SEPOLIA),cn(ge.TELOS),cn(ge.TELOS_TESTNET),cn(ge.BORNE_TESTNET),cn(ge.SKALE_NEBULA),cn(ge.SKALE_NEBULA_TESTNET),cn(ge.SONEIUM),cn(ge.SONEIUM_MINATO),cn(ge.TOY_TESTNET),cn(ge.IMMUTABLE_ZKEVM),cn(ge.IMMUTABLE_ZKEVM_TESTNET),cn(ge.MOONBEAM),cn(ge.MOONBASE_ALPHA),cn(ge.ETHERLINK),cn(ge.ETHERLINK_TESTNET,{disabled:!0}),cn(ge.ETHERLINK_SHADOWNET_TESTNET),cn(ge.SOMNIA),cn(ge.SOMNIA_TESTNET),cn(ge.MONAD),cn(ge.MONAD_TESTNET),cn(ge.INCENTIV_TESTNET,{disabled:!0}),cn(ge.INCENTIV_TESTNET_V2),cn(ge.INCENTIV),cn(ge.KATANA),cn(ge.SANDBOX_TESTNET),cn(ge.ARC_TESTNET),cn(ge.HYPEREVM),cn(ge.BERACHAIN),cn(ge.SONIC),..._yt]);var RJ=function(){return RJ=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},RJ.apply(this,arguments)};function Mv(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?i(u.value):s(u.value).then(o,c)}l((r=r.apply(t,[])).next())})}function Dv(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(n=0)),n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var Byt=function(t){return mb.hash(t.domain,t.types,t.message)},R8e="1",_J="eth",Myt={name:"ETHAuth",version:R8e},_8e=function(){function t(e){this.prefix=_J,this.address=e!=null&&e.address?e.address.toLowerCase():"",this.claims=e!=null&&e.claims?e.claims:{app:"",iat:0,exp:0,v:R8e},this.signature=e!=null&&e.signature?e.signature:"",this.extra=e!=null&&e.extra?e.extra:""}return t.prototype.setIssuedAtNow=function(){this.claims.iat=Math.round(new Date().getTime()/1e3)},t.prototype.setExpiryIn=function(e){this.claims.exp=Math.round(new Date().getTime()/1e3)+e},t.prototype.validateClaims=function(){return Dyt(this.claims)},t.prototype.messageDigest=function(){var e=this.validateClaims();if(e.err)throw e.err;return et(Byt(this.messageTypedData()))},t.prototype.messageTypedData=function(){var e=RJ({},Myt),n={Claims:[]},r={},s={domain:e,types:n,message:r};return this.claims.app&&this.claims.app.length>0&&(s.types.Claims.push({name:"app",type:"string"}),s.message.app=this.claims.app),this.claims.iat&&this.claims.iat>0&&(s.types.Claims.push({name:"iat",type:"int64"}),s.message.iat=this.claims.iat),this.claims.exp&&this.claims.exp>0&&(s.types.Claims.push({name:"exp",type:"int64"}),s.message.exp=this.claims.exp),this.claims.n&&this.claims.n>0&&(s.types.Claims.push({name:"n",type:"uint64"}),s.message.n=this.claims.n),this.claims.typ&&this.claims.typ.length>0&&(s.types.Claims.push({name:"typ",type:"string"}),s.message.typ=this.claims.typ),this.claims.ogn&&this.claims.ogn.length>0&&(s.types.Claims.push({name:"ogn",type:"string"}),s.message.ogn=this.claims.ogn),this.claims.v&&this.claims.v.length>0&&(s.types.Claims.push({name:"v",type:"string"}),s.message.v=this.claims.v),s},t}(),Dyt=function(t){if(t.app==="")return{ok:!1,err:new Error("claims: app is empty")};var e=Math.round(new Date().getTime()/1e3),n=5*60,r=60*60*24*365+n;return t.v===""?{ok:!1,err:new Error("claims: ethauth version is empty")}:t.iat&&t.iat!==0&&(t.iat>e+n||t.iat<e-r)?{ok:!1,err:new Error("claims: iat is invalid")}:t.exp<e-n||t.exp>e+r?{ok:!1,err:new Error("claims: token has expired")}:{ok:!0}},Lyt=function(t,e,n){return Mv(void 0,void 0,void 0,function(){var r,s;return Dv(this,function(i){return r=n.messageDigest(),s=opt(r,n.signature),s.slice(0,2)==="0x"&&s.length===42&&s.toLowerCase()===n.address.toLowerCase()?[2,{isValid:!0,address:n.address}]:[2,{isValid:!1}]})})},Uyt=function(t,e,n){return Mv(void 0,void 0,void 0,function(){var r,s,i,a,o;return Dv(this,function(c){switch(c.label){case 0:return!t||t===void 0?[2,{isValid:!1}]:(r=n.messageDigest(),[4,t.getCode(n.address)]);case 1:if(s=c.sent(),s==="0x"||s.length<=2)throw new Error("ValidateContractAccountProof failed. unable to fetch wallet contract code");return i=["function isValidSignature(bytes32, bytes) public view returns (bytes4)"],a=new Si(n.address,i,t),[4,a.isValidSignature(r,et(n.signature))];case 2:return o=c.sent(),o===Fyt?[2,{isValid:!0,address:n.address}]:[2,{isValid:!1}]}})})},Fyt="0x1626ba7e",Vyt=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this;this.configJsonRpcProvider=function(s){return Mv(r,void 0,void 0,function(){var i;return Dv(this,function(a){switch(a.label){case 0:return this.provider=new P2(s),[4,this.provider.send("net_version",[])];case 1:if(i=a.sent(),this.chainId=parseInt(i),!this.chainId)throw new Error("ethauth: unable to get chainId");return this.ethereumJsonRpcURL=s,[2]}})})},this.configValidators=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if(s.length==0)throw new Error("validators list is empty");r.validators=s},this.encodeProof=function(s,i){return i===void 0&&(i=!1),Mv(r,void 0,void 0,function(){var a,o,c;return Dv(this,function(l){switch(l.label){case 0:if(s.address.length!==42||s.address.slice(0,2)!=="0x")throw new Error("ethauth: invalid address");if(s.signature===""||s.signature.slice(0,2)!=="0x")throw new Error("ethauth: invalid signature");if(s.extra&&s.extra.slice(0,2)!=="0x")throw new Error("ethauth: invalid extra encoding, expecting hex data");return[4,this.validateProof(s,i)];case 1:if(a=l.sent(),!a)throw new Error("ethauth: proof is invalid");return o=JSON.stringify(s.claims),c=_J+"."+s.address.toLowerCase()+"."+Cfe.encode(o,!0)+"."+s.signature,s.extra&&s.extra.length>0&&(c+="."+s.extra),[2,c]}})})},this.decodeProof=function(s,i){return i===void 0&&(i=!1),Mv(r,void 0,void 0,function(){var a,o,c,l,u,f,d,p,g,m;return Dv(this,function(v){switch(v.label){case 0:if(a=s.split("."),a.length<4||a.length>5)throw new Error("ethauth: invalid proof string");if(o=a[0],c=a[1],l=a[2],u=a[3],f=a[4],o!==_J)throw new Error("ethauth: not an ethauth proof");return d=Cfe.decode(l),p=JSON.parse(d),g=new _8e({address:c,claims:p,signature:u,extra:f}),[4,this.validateProof(g,i)];case 1:if(m=v.sent(),!m)throw new Error("ethauth: proof is invalid");return[2,g]}})})},this.validateProof=function(s,i){return i===void 0&&(i=!1),Mv(r,void 0,void 0,function(){var a,o;return Dv(this,function(c){switch(c.label){case 0:if(a=this.validateProofClaims(s),a.err)throw new Error("ethauth: proof claims are invalid ".concat(a.err));return i===!0?[3,2]:[4,this.validateProofSignature(s)];case 1:if(o=c.sent(),o!==!0)throw new Error("ethauth: proof signature is invalid");c.label=2;case 2:return[2,!0]}})})},this.validateProofSignature=function(s){return Mv(r,void 0,void 0,function(){var i,c,a,o,c;return Dv(this,function(l){switch(l.label){case 0:i=[],c=0,l.label=1;case 1:if(!(c<this.validators.length))return[3,6];l.label=2;case 2:return l.trys.push([2,4,,5]),a=this.validators[c],[4,a(this.provider,this.chainId,s)];case 3:return o=l.sent().isValid,o===!0?[2,!0]:(i.push(o),[3,5]);case 4:return l.sent(),i.push(!1),[3,5];case 5:return c++,[3,1];case 6:for(c=0;c<i.length;c++)if(i[c])return[2,!0];return[2,!1]}})})},this.validateProofClaims=function(s){return s.validateClaims()},e.length==0?this.validators=[Lyt,Uyt]:this.validators=e}return t}();function $yt(t,e,n){for(let r=0;r<n.length;r++)if(Mt.context.addressOf(n[r],e)===t)return n[r].version;throw new Error("Could not find version for counterfactual address")}var jyt=Object.freeze({__proto__:null,counterfactualVersion:$yt});class Hyt{constructor(){this.version=2,this.configCoder=Xn.config.ConfigCoder,this.signatureCoder=Xn.signature.SignatureCoder}buildTransaction(e,n,r){if(!Xn.config.ConfigCoder.isWalletConfig(r)){const c=Xn.config.toWalletConfig({threshold:r.threshold,members:r.signers,checkpoint:0});return this.buildTransaction(e,n,c)}const s=n[2],i=new Ya(qa.mainModule.abi),a=Xn.config.ConfigCoder.update.buildTransaction(e,r,s,"first");return{tx:{entrypoint:e,nonce:Mt.transaction.encodeNonce(BJ,0),transactions:[{to:e,value:0,gasLimit:0,revertOnError:!0,delegateCall:!1,data:i.encodeFunctionData(i.getFunction("updateImplementation"),[s.mainModuleUpgradable])},...a.transactions]},fromVersion:this.version-1,toVersion:this.version,toConfig:r}}decodeTransaction(e,n){const r=e.entrypoint;if(e.transactions.length<2)throw new Error("Invalid transaction bundle size");if(!e.nonce||Mt.transaction.encodeNonce(BJ,0)!==BigInt(e.nonce))throw new Error("Invalid transaction bundle nonce");if(e.transactions[0].to!==r||e.transactions[1].to!==r||e.transactions[0].delegateCall||e.transactions[1].delegateCall||!e.transactions[0].revertOnError||!e.transactions[1].revertOnError||e.transactions[0].value&&BigInt(e.transactions[0].value)!==0n||e.transactions[1].value&&BigInt(e.transactions[1].value)!==0n||e.transactions[0].gasLimit&&BigInt(e.transactions[0].gasLimit)!==0n||e.transactions[1].gasLimit&&BigInt(e.transactions[1].gasLimit)!==0n)throw new Error("Invalid transaction bundle format");const s=n[2],i=new Ya(qa.mainModule.abi),a=Ke(e.transactions[0].data||new Uint8Array),o=Ke(i.encodeFunctionData(i.getFunction("updateImplementation"),[s.mainModuleUpgradable]));if(a!==o)throw new Error("Invalid new implementation on transaction");const c=Xn.config.ConfigCoder.update.decodeTransaction({entrypoint:r,transactions:[e.transactions[1]]});if(c.address!==r)throw new Error("Invalid transaction bundle address");return c}}const BJ="0xa04263acf755e8bd19c0d7e20eea39a9ff3729eb",B8e=new Hyt;var qyt=Object.freeze({__proto__:null,MIGRATION_NONCE_SPACE:BJ,v1v2:B8e});function MJ(){return MJ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MJ.apply(null,arguments)}function Kyt(t){for(const[e,n]of Object.entries(t))if(e!==String(n.version-1))throw new Error(`Migration with key ${e} has version ${n.version}, expected version to be key + 1`)}class Gyt{constructor(e,n,r){this.tracker=e,this.migrations=n,this.contexts=r,Kyt(n)}lastMigration(){let e;for(const n of Object.values(this.migrations))(e===void 0||n.version>e.version)&&(e=n);if(e===void 0)throw new Error("No migrations");return e}async getAllMigratePresignedTransaction(e){const{address:n,fromImageHash:r,fromVersion:s,chainId:i}=e;let a=r,o=s;const c=Object.values(this.contexts),l=[];for(let u=1;u<c.length;u++){const f=await this.tracker.getMigration(n,a,o,i);if(!f)return{signedMigrations:l,missing:!0,lastImageHash:a,lastVersion:o};l.push(f);const d=this.migrations[o];if(!d)throw new Error(`No migration found for version ${o}`);const p=d.decodeTransaction(f.tx,this.contexts);if(p.address!==n)throw new Error("Migration transaction address does not match expected address");a=p.newImageHash,o+=1}return{signedMigrations:l,missing:!1,lastImageHash:a,lastVersion:o}}async signNextMigration(e,n,r,s){const i=this.migrations[n];if(!i)return;const a=i.buildTransaction(e,this.contexts,s),o=await r.signTransactionBundle(a.tx);return MJ({},a,{tx:o})}}var kfe=Object.freeze({__proto__:null,Migrator:Gyt});const Wyt={1:B8e};var Pfe=Object.freeze({__proto__:null,DefaultMigrations:Wyt});function Lg(){return Lg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lg.apply(null,arguments)}const Ofe=800000n,zyt={waitPollRate:1e3,deltaBlocksLog:12,fromBlockLog:-1024};class Jyt{constructor(e){this.provider=void 0,this.waitPollRate=void 0,this.deltaBlocksLog=void 0,this.fromBlockLog=void 0;const n=Lg({},zyt,e);this.provider=n.provider,this.waitPollRate=n.waitPollRate,this.deltaBlocksLog=n.deltaBlocksLog,this.fromBlockLog=n.fromBlockLog}async simulate(e,...n){var r=this;return(await Promise.all(n.map(async function(s){if(s.gasLimit&&BigInt(s.gasLimit||0)!==0n)return s.gasLimit;if(s.delegateCall||s.to===e&&await r.provider.getCode(e).then(i=>et(i).length===0))return Ofe;if(!r.provider)throw new Error("signer.provider is not set, but is required");return r.provider.estimateGas({from:e,to:s.to,data:s.data,value:s.value})}))).map(s=>({executed:!0,succeeded:!0,gasUsed:Number(s),gasLimit:Number(s)}))}async getNonce(e,n,r){if(!this.provider)throw new Error("provider is not set");if(await this.provider.getCode(e)==="0x")return 0;n===void 0&&(n=0);const i=await new Si(e,qa.mainModule.abi,this.provider).readNonce(n,{blockTag:r});return Mt.transaction.encodeNonce(n,i)}async wait(e,n,r=this.waitPollRate,s=5){var i=this;typeof e!="string"&&(e=Mt.transaction.intendedTransactionID(e));let a=!1;const o=async function(u,f){let d=0;for(;!a;){try{return await u()}catch(p){if(d++,s!==void 0&&d>=s)throw ya.error(`giving up after ${d} failed attempts${f?`: ${f}`:""}`,p),p;ya.warn(`attempt #${d} failed${f?`: ${f}`:""}`,p)}r>0&&await new Promise(p=>setTimeout(p,r))}throw new Error(`timed out after ${d} failed attempts${f?`: ${f}`:""}`)},c=async function(){let u=i.fromBlockLog;if(u<0&&(u=await o(()=>i.provider.getBlockNumber(),"unable to get latest block number")+u),typeof e!="string")throw new Error("impossible");const f=e.replace("0x","");for(;!a;){const d=await o(()=>i.provider.getBlockNumber(),"unable to get latest block number"),p=await o(()=>i.provider.getLogs({fromBlock:Math.max(0,u-i.deltaBlocksLog),toBlock:d,topics:["0x1f180c27086c7a39ea2a7b25239d1ab92348f07ca7bb59d1438fcf527568f881"]}),`unable to get NonceChange logs for blocks ${Math.max(0,u-i.deltaBlocksLog)} to ${d}`);u=d;const m=(await Promise.all(p.map(v=>o(()=>i.provider.getTransactionReceipt(v.transactionHash),`unable to get receipt for transaction ${v.transactionHash}`)))).find(v=>v==null?void 0:v.logs.find(A=>A.topics.length===0&&A.data.replace("0x","")===f||A.topics.length===1&&A.topics[0]==="0x3dbd1590ea96dd3253a91f24e64e3a502e1225d602a5731357bc12643070ccd7"&&A.data.length>=64&&A.data.replace("0x","").startsWith(f)));if(m){const v=await o(()=>i.provider.getTransaction(m.hash),`unable to get transaction ${m.hash}`);if(!v)throw new Error(`Transaction response not found for  ${e}`);const A=v;return A.receipt=m,A}a||await new Promise(v=>setTimeout(v,r))}throw new Error(`Timeout waiting for transaction receipt ${e}`)};return n!==void 0?Promise.race([c(),new Promise((l,u)=>setTimeout(()=>{a=!0,u(`Timeout waiting for transaction receipt ${e}`)},n))]):c()}}class Rfe extends Jyt{constructor(e){if(super(_fe(e)?{provider:e.provider}:Lg({},e,{provider:e.signer.provider})),this.signer=void 0,this.txnOptions=void 0,this.signer=_fe(e)?e:e.signer,!this.signer.provider)throw new Error("Signer must have a provider")}async getFeeOptions(e,...n){return{options:[]}}async getFeeOptionsRaw(e,n,r){return{options:[]}}async gasRefundOptions(e,...n){const{options:r}=await this.getFeeOptions(e,...n);return r}setTransactionOptions(e){this.txnOptions=e}async relay(e,n,r=!0){n!==void 0&&ya.warn("LocalRelayer doesn't accept fee quotes");const s=Mt.transaction.encodeBundleExecData(e),i=this.signer.sendTransaction(Lg({to:e.entrypoint,data:s},this.txnOptions,{gasLimit:9e6}));if(r){const a=await i;return a.receipt=await a.wait(),a}else return i}async getMetaTransactions(e,n){return{page:{page:0,pageSize:100},transactions:[]}}async getTransactionCost(e,n,r){return{cost:0}}async listGasSponsors(e){return{page:{page:0,pageSize:100},gasSponsors:[]}}async addGasSponsor(e){return{status:!0,gasSponsor:{}}}async updateGasSponsor(e){return{status:!0,gasSponsor:{}}}async removeGasSponsor(e){return{status:!0}}}function _fe(t){return t&&typeof t=="object"&&typeof t.provider=="object"&&typeof t.getAddress=="function"&&typeof t.connect=="function"}const Yyt="v1",Qyt="v0.4.1",Zyt="7f8a4b83b00e0b6849c76c2ff0e23931e26b3d9f";let Rw=function(t){return t.UNKNOWN="UNKNOWN",t.DROPPED="DROPPED",t.QUEUED="QUEUED",t.SENT="SENT",t.SUCCEEDED="SUCCEEDED",t.PARTIALLY_FAILED="PARTIALLY_FAILED",t.FAILED="FAILED",t.PENDING_PRECONDITION="PENDING_PRECONDITION",t}({}),Xyt=function(t){return t.SEND="SEND",t.RECEIVE="RECEIVE",t.BRIDGE_DEPOSIT="BRIDGE_DEPOSIT",t.BRIDGE_WITHDRAW="BRIDGE_WITHDRAW",t.BURN="BURN",t.UNKNOWN="UNKNOWN",t}({}),ewt=function(t){return t.SKIPPED="SKIPPED",t.SUCCEEDED="SUCCEEDED",t.FAILED="FAILED",t.ABORTED="ABORTED",t.REVERTED="REVERTED",t.NOT_ENOUGH_GAS="NOT_ENOUGH_GAS",t}({}),twt=function(t){return t.UNKNOWN="UNKNOWN",t.ERC20_TOKEN="ERC20_TOKEN",t.ERC1155_TOKEN="ERC1155_TOKEN",t}({}),nwt=function(t){return t.DESC="DESC",t.ASC="ASC",t}({});class M8e{constructor(e,n){this.hostname=void 0,this.fetch=void 0,this.path="/rpc/Relayer/",this.queryKey={ping:()=>["Relayer","ping"],version:()=>["Relayer","version"],runtimeStatus:()=>["Relayer","runtimeStatus"],getSequenceContext:()=>["Relayer","getSequenceContext"],getChainID:()=>["Relayer","getChainID"],sendMetaTxn:r=>["Relayer","sendMetaTxn",r],getMetaTxnNonce:r=>["Relayer","getMetaTxnNonce",r],getMetaTxnReceipt:r=>["Relayer","getMetaTxnReceipt",r],simulate:r=>["Relayer","simulate",r],simulateV3:r=>["Relayer","simulateV3",r],updateMetaTxnGasLimits:r=>["Relayer","updateMetaTxnGasLimits",r],feeTokens:()=>["Relayer","feeTokens"],feeOptions:r=>["Relayer","feeOptions",r],getMetaTxnNetworkFeeOptions:r=>["Relayer","getMetaTxnNetworkFeeOptions",r],getMetaTransactions:r=>["Relayer","getMetaTransactions",r],getTransactionCost:r=>["Relayer","getTransactionCost",r],sentTransactions:r=>["Relayer","sentTransactions",r],pendingTransactions:r=>["Relayer","pendingTransactions",r],getGasTank:r=>["Relayer","getGasTank",r],addGasTank:r=>["Relayer","addGasTank",r],updateGasTank:r=>["Relayer","updateGasTank",r],nextGasTankBalanceAdjustmentNonce:r=>["Relayer","nextGasTankBalanceAdjustmentNonce",r],adjustGasTankBalance:r=>["Relayer","adjustGasTankBalance",r],getGasTankBalanceAdjustment:r=>["Relayer","getGasTankBalanceAdjustment",r],listGasTankBalanceAdjustments:r=>["Relayer","listGasTankBalanceAdjustments",r],listGasSponsors:r=>["Relayer","listGasSponsors",r],getGasSponsor:r=>["Relayer","getGasSponsor",r],addGasSponsor:r=>["Relayer","addGasSponsor",r],updateGasSponsor:r=>["Relayer","updateGasSponsor",r],removeGasSponsor:r=>["Relayer","removeGasSponsor",r],addressGasSponsors:r=>["Relayer","addressGasSponsors",r],getProjectBalance:r=>["Relayer","getProjectBalance",r],adjustProjectBalance:r=>["Relayer","adjustProjectBalance",r]},this.ping=(r,s)=>this.fetch(this.url("Ping"),Kr("{}",r,s)).then(i=>Gr(i).then(a=>$r(a,"PingReturn")),i=>{throw Ur.new({cause:`fetch(): ${i instanceof Error?i.message:String(i)}`})}),this.version=(r,s)=>this.fetch(this.url("Version"),Kr("{}",r,s)).then(i=>Gr(i).then(a=>$r(a,"VersionReturn")),i=>{throw Ur.new({cause:`fetch(): ${i instanceof Error?i.message:String(i)}`})}),this.runtimeStatus=(r,s)=>this.fetch(this.url("RuntimeStatus"),Kr("{}",r,s)).then(i=>Gr(i).then(a=>$r(a,"RuntimeStatusReturn")),i=>{throw Ur.new({cause:`fetch(): ${i instanceof Error?i.message:String(i)}`})}),this.getSequenceContext=(r,s)=>this.fetch(this.url("GetSequenceContext"),Kr("{}",r,s)).then(i=>Gr(i).then(a=>$r(a,"GetSequenceContextReturn")),i=>{throw Ur.new({cause:`fetch(): ${i instanceof Error?i.message:String(i)}`})}),this.getChainID=(r,s)=>this.fetch(this.url("GetChainID"),Kr("{}",r,s)).then(i=>Gr(i).then(a=>$r(a,"GetChainIDReturn")),i=>{throw Ur.new({cause:`fetch(): ${i instanceof Error?i.message:String(i)}`})}),this.sendMetaTxn=(r,s,i)=>this.fetch(this.url("SendMetaTxn"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"SendMetaTxnReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.getMetaTxnNonce=(r,s,i)=>this.fetch(this.url("GetMetaTxnNonce"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"GetMetaTxnNonceReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.getMetaTxnReceipt=(r,s,i)=>this.fetch(this.url("GetMetaTxnReceipt"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"GetMetaTxnReceiptReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.simulate=(r,s,i)=>this.fetch(this.url("Simulate"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"SimulateReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.simulateV3=(r,s,i)=>this.fetch(this.url("SimulateV3"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"SimulateV3Return")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.updateMetaTxnGasLimits=(r,s,i)=>this.fetch(this.url("UpdateMetaTxnGasLimits"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"UpdateMetaTxnGasLimitsReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.feeTokens=(r,s)=>this.fetch(this.url("FeeTokens"),Kr("{}",r,s)).then(i=>Gr(i).then(a=>$r(a,"FeeTokensReturn")),i=>{throw Ur.new({cause:`fetch(): ${i instanceof Error?i.message:String(i)}`})}),this.feeOptions=(r,s,i)=>this.fetch(this.url("FeeOptions"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"FeeOptionsReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.getMetaTxnNetworkFeeOptions=(r,s,i)=>this.fetch(this.url("GetMetaTxnNetworkFeeOptions"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"GetMetaTxnNetworkFeeOptionsReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.getMetaTransactions=(r,s,i)=>this.fetch(this.url("GetMetaTransactions"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"GetMetaTransactionsReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.getTransactionCost=(r,s,i)=>this.fetch(this.url("GetTransactionCost"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"GetTransactionCostReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.sentTransactions=(r,s,i)=>this.fetch(this.url("SentTransactions"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"SentTransactionsReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.pendingTransactions=(r,s,i)=>this.fetch(this.url("PendingTransactions"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"PendingTransactionsReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.getGasTank=(r,s,i)=>this.fetch(this.url("GetGasTank"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"GetGasTankReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.addGasTank=(r,s,i)=>this.fetch(this.url("AddGasTank"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"AddGasTankReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.updateGasTank=(r,s,i)=>this.fetch(this.url("UpdateGasTank"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"UpdateGasTankReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.nextGasTankBalanceAdjustmentNonce=(r,s,i)=>this.fetch(this.url("NextGasTankBalanceAdjustmentNonce"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"NextGasTankBalanceAdjustmentNonceReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.adjustGasTankBalance=(r,s,i)=>this.fetch(this.url("AdjustGasTankBalance"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"AdjustGasTankBalanceReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.getGasTankBalanceAdjustment=(r,s,i)=>this.fetch(this.url("GetGasTankBalanceAdjustment"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"GetGasTankBalanceAdjustmentReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.listGasTankBalanceAdjustments=(r,s,i)=>this.fetch(this.url("ListGasTankBalanceAdjustments"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"ListGasTankBalanceAdjustmentsReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.listGasSponsors=(r,s,i)=>this.fetch(this.url("ListGasSponsors"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"ListGasSponsorsReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.getGasSponsor=(r,s,i)=>this.fetch(this.url("GetGasSponsor"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"GetGasSponsorReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.addGasSponsor=(r,s,i)=>this.fetch(this.url("AddGasSponsor"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"AddGasSponsorReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.updateGasSponsor=(r,s,i)=>this.fetch(this.url("UpdateGasSponsor"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"UpdateGasSponsorReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.removeGasSponsor=(r,s,i)=>this.fetch(this.url("RemoveGasSponsor"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"RemoveGasSponsorReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.addressGasSponsors=(r,s,i)=>this.fetch(this.url("AddressGasSponsors"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"AddressGasSponsorsReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.getProjectBalance=(r,s,i)=>this.fetch(this.url("GetProjectBalance"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"GetProjectBalanceReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.adjustProjectBalance=(r,s,i)=>this.fetch(this.url("AdjustProjectBalance"),Kr(bs(r),s,i)).then(a=>Gr(a).then(o=>$r(o,"AdjustProjectBalanceReturn")),a=>{throw Ur.new({cause:`fetch(): ${a instanceof Error?a.message:String(a)}`})}),this.hostname=e.replace(/\/*$/,""),this.fetch=(r,s)=>n(r,s)}url(e){return this.hostname+this.path+e}}const Kr=(t="{}",e={},n=null)=>({method:"POST",headers:Lg({},e,{"Content-Type":"application/json",[Cte]:aIe}),body:t,signal:n}),Gr=t=>t.text().then(e=>{let n;try{n=JSON.parse(e)}catch(r){throw j5.new({status:t.status,cause:`JSON.parse(): ${r instanceof Error?r.message:String(r)}: response text: ${e}`})}if(!t.ok){const r=typeof n.code=="number"?n.code:0;throw(iIe[r]||fr).new(n)}return n}),rwt={SendMetaTxnArgs:[["preconditions","TransactionPrecondition[]"]],TransactionPrecondition:["minAmount"],Transactions:[["preconditions","TransactionPrecondition[]"]]};function j_(t,e){if(e==null||typeof e!="object")return e;const n=rwt[t]||[];if(!n.length)return e;for(const r of n){if(Array.isArray(r)){const[i,a]=r;if(i.endsWith("[]")){const o=i.slice(0,-2),c=e[o];if(Array.isArray(c))for(let l=0;l<c.length;l++)c[l]=j_(a,c[l])}else if(e[i])if(a.endsWith("[]")){const o=a.slice(0,-2),c=e[i];if(Array.isArray(c))for(let l=0;l<c.length;l++)c[l]=j_(o,c[l])}else e[i]=j_(a,e[i]);continue}if(r.endsWith("[]")){const i=r.slice(0,-2),a=e[i];if(Array.isArray(a))for(let o=0;o<a.length;o++){const c=a[o];if(typeof c=="string")try{a[o]=BigInt(c)}catch{throw j5.new({cause:`Invalid bigint value for ${i}[${o}]: ${c}`})}}continue}const s=e[r];if(typeof s=="string")try{e[r]=BigInt(s)}catch{throw j5.new({cause:`Invalid bigint value for ${r}: ${s}`})}}return e}const bs=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString():n),$r=(t,e="")=>{let n=t;if(typeof t=="string")try{n=JSON.parse(t)}catch(r){throw j5.new({cause:`JsonDecode: JSON.parse failed: ${r.message}`})}return j_(e,n)};let fr=class D8e extends Error{constructor(e={}){super(e.message),this.code=void 0,this.status=void 0,this.name=e.name||"WebrpcEndpointError",this.code=typeof e.code=="number"?e.code:0,this.message=e.message||"endpoint error",this.status=typeof e.status=="number"?e.status:400,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,D8e.prototype)}static new(e){return new this({message:e.message,code:e.code,status:e.status,cause:e.cause})}},L8e=class U8e extends fr{constructor(e={}){super(e),this.name=e.name||"WebrpcEndpoint",this.code=typeof e.code=="number"?e.code:0,this.message=e.message||"endpoint error",this.status=typeof e.status=="number"?e.status:400,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,U8e.prototype)}},Ur=class F8e extends fr{constructor(e={}){super(e),this.name=e.name||"WebrpcRequestFailed",this.code=typeof e.code=="number"?e.code:-1,this.message=e.message||"request failed",this.status=typeof e.status=="number"?e.status:400,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,F8e.prototype)}},V8e=class $8e extends fr{constructor(e={}){super(e),this.name=e.name||"WebrpcBadRoute",this.code=typeof e.code=="number"?e.code:-2,this.message=e.message||"bad route",this.status=typeof e.status=="number"?e.status:404,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,$8e.prototype)}},j8e=class H8e extends fr{constructor(e={}){super(e),this.name=e.name||"WebrpcBadMethod",this.code=typeof e.code=="number"?e.code:-3,this.message=e.message||"bad method",this.status=typeof e.status=="number"?e.status:405,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,H8e.prototype)}},q8e=class K8e extends fr{constructor(e={}){super(e),this.name=e.name||"WebrpcBadRequest",this.code=typeof e.code=="number"?e.code:-4,this.message=e.message||"bad request",this.status=typeof e.status=="number"?e.status:400,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,K8e.prototype)}},j5=class G8e extends fr{constructor(e={}){super(e),this.name=e.name||"WebrpcBadResponse",this.code=typeof e.code=="number"?e.code:-5,this.message=e.message||"bad response",this.status=typeof e.status=="number"?e.status:500,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,G8e.prototype)}},W8e=class z8e extends fr{constructor(e={}){super(e),this.name=e.name||"WebrpcServerPanic",this.code=typeof e.code=="number"?e.code:-6,this.message=e.message||"server panic",this.status=typeof e.status=="number"?e.status:500,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,z8e.prototype)}},J8e=class Y8e extends fr{constructor(e={}){super(e),this.name=e.name||"WebrpcInternalError",this.code=typeof e.code=="number"?e.code:-7,this.message=e.message||"internal error",this.status=typeof e.status=="number"?e.status:500,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,Y8e.prototype)}};class DU extends fr{constructor(e={}){super(e),this.name=e.name||"WebrpcClientAborted",this.code=typeof e.code=="number"?e.code:-8,this.message=e.message||"request aborted by client",this.status=typeof e.status=="number"?e.status:400,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,DU.prototype)}}let Q8e=class Z8e extends fr{constructor(e={}){super(e),this.name=e.name||"WebrpcStreamLost",this.code=typeof e.code=="number"?e.code:-9,this.message=e.message||"stream lost",this.status=typeof e.status=="number"?e.status:400,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,Z8e.prototype)}},X8e=class eIe extends fr{constructor(e={}){super(e),this.name=e.name||"WebrpcStreamFinished",this.code=typeof e.code=="number"?e.code:-10,this.message=e.message||"stream finished",this.status=typeof e.status=="number"?e.status:200,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,eIe.prototype)}};class LU extends fr{constructor(e={}){super(e),this.name=e.name||"Unauthorized",this.code=typeof e.code=="number"?e.code:1e3,this.message=e.message||"Unauthorized access",this.status=typeof e.status=="number"?e.status:401,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,LU.prototype)}}class UU extends fr{constructor(e={}){super(e),this.name=e.name||"PermissionDenied",this.code=typeof e.code=="number"?e.code:1001,this.message=e.message||"Permission denied",this.status=typeof e.status=="number"?e.status:403,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,UU.prototype)}}class FU extends fr{constructor(e={}){super(e),this.name=e.name||"SessionExpired",this.code=typeof e.code=="number"?e.code:1002,this.message=e.message||"Session expired",this.status=typeof e.status=="number"?e.status:403,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,FU.prototype)}}class VU extends fr{constructor(e={}){super(e),this.name=e.name||"MethodNotFound",this.code=typeof e.code=="number"?e.code:1003,this.message=e.message||"Method not found",this.status=typeof e.status=="number"?e.status:404,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,VU.prototype)}}class $U extends fr{constructor(e={}){super(e),this.name=e.name||"RequestConflict",this.code=typeof e.code=="number"?e.code:1004,this.message=e.message||"Conflict with target resource",this.status=typeof e.status=="number"?e.status:409,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,$U.prototype)}}class jU extends fr{constructor(e={}){super(e),this.name=e.name||"Aborted",this.code=typeof e.code=="number"?e.code:1005,this.message=e.message||"Request aborted",this.status=typeof e.status=="number"?e.status:400,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,jU.prototype)}}class HU extends fr{constructor(e={}){super(e),this.name=e.name||"Geoblocked",this.code=typeof e.code=="number"?e.code:1006,this.message=e.message||"Geoblocked region",this.status=typeof e.status=="number"?e.status:451,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,HU.prototype)}}class qU extends fr{constructor(e={}){super(e),this.name=e.name||"RateLimited",this.code=typeof e.code=="number"?e.code:1007,this.message=e.message||"Rate-limited. Please slow down.",this.status=typeof e.status=="number"?e.status:429,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,qU.prototype)}}class KU extends fr{constructor(e={}){super(e),this.name=e.name||"ProjectNotFound",this.code=typeof e.code=="number"?e.code:1008,this.message=e.message||"Project not found",this.status=typeof e.status=="number"?e.status:401,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,KU.prototype)}}class GU extends fr{constructor(e={}){super(e),this.name=e.name||"AccessKeyNotFound",this.code=typeof e.code=="number"?e.code:1101,this.message=e.message||"Access key not found",this.status=typeof e.status=="number"?e.status:401,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,GU.prototype)}}class WU extends fr{constructor(e={}){super(e),this.name=e.name||"AccessKeyMismatch",this.code=typeof e.code=="number"?e.code:1102,this.message=e.message||"Access key mismatch",this.status=typeof e.status=="number"?e.status:409,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,WU.prototype)}}class zU extends fr{constructor(e={}){super(e),this.name=e.name||"InvalidOrigin",this.code=typeof e.code=="number"?e.code:1103,this.message=e.message||"Invalid origin for Access Key",this.status=typeof e.status=="number"?e.status:403,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,zU.prototype)}}class JU extends fr{constructor(e={}){super(e),this.name=e.name||"InvalidService",this.code=typeof e.code=="number"?e.code:1104,this.message=e.message||"Service not enabled for Access key",this.status=typeof e.status=="number"?e.status:403,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,JU.prototype)}}class YU extends fr{constructor(e={}){super(e),this.name=e.name||"UnauthorizedUser",this.code=typeof e.code=="number"?e.code:1105,this.message=e.message||"Unauthorized user",this.status=typeof e.status=="number"?e.status:403,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,YU.prototype)}}class QU extends fr{constructor(e={}){super(e),this.name=e.name||"QuotaExceeded",this.code=typeof e.code=="number"?e.code:1200,this.message=e.message||"Quota request exceeded",this.status=typeof e.status=="number"?e.status:429,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,QU.prototype)}}class ZU extends fr{constructor(e={}){super(e),this.name=e.name||"QuotaRateLimit",this.code=typeof e.code=="number"?e.code:1201,this.message=e.message||"Quota rate limit exceeded",this.status=typeof e.status=="number"?e.status:429,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,ZU.prototype)}}class XU extends fr{constructor(e={}){super(e),this.name=e.name||"NoDefaultKey",this.code=typeof e.code=="number"?e.code:1300,this.message=e.message||"No default access key found",this.status=typeof e.status=="number"?e.status:403,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,XU.prototype)}}class eF extends fr{constructor(e={}){super(e),this.name=e.name||"MaxAccessKeys",this.code=typeof e.code=="number"?e.code:1301,this.message=e.message||"Access keys limit reached",this.status=typeof e.status=="number"?e.status:403,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,eF.prototype)}}class tF extends fr{constructor(e={}){super(e),this.name=e.name||"AtLeastOneKey",this.code=typeof e.code=="number"?e.code:1302,this.message=e.message||"You need at least one Access Key",this.status=typeof e.status=="number"?e.status:403,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,tF.prototype)}}class nF extends fr{constructor(e={}){super(e),this.name=e.name||"Timeout",this.code=typeof e.code=="number"?e.code:1900,this.message=e.message||"Request timed out",this.status=typeof e.status=="number"?e.status:408,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,nF.prototype)}}let tIe=class nIe extends fr{constructor(e={}){super(e),this.name=e.name||"InvalidArgument",this.code=typeof e.code=="number"?e.code:2001,this.message=e.message||"Invalid argument",this.status=typeof e.status=="number"?e.status:400,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,nIe.prototype)}};class rF extends fr{constructor(e={}){super(e),this.name=e.name||"Unavailable",this.code=typeof e.code=="number"?e.code:2002,this.message=e.message||"Unavailable resource",this.status=typeof e.status=="number"?e.status:400,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,rF.prototype)}}class sF extends fr{constructor(e={}){super(e),this.name=e.name||"QueryFailed",this.code=typeof e.code=="number"?e.code:2003,this.message=e.message||"Query failed",this.status=typeof e.status=="number"?e.status:400,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,sF.prototype)}}let rIe=class sIe extends fr{constructor(e={}){super(e),this.name=e.name||"NotFound",this.code=typeof e.code=="number"?e.code:3e3,this.message=e.message||"Resource not found",this.status=typeof e.status=="number"?e.status:400,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,sIe.prototype)}};class iF extends fr{constructor(e={}){super(e),this.name=e.name||"InsufficientFee",this.code=typeof e.code=="number"?e.code:3004,this.message=e.message||"Insufficient fee",this.status=typeof e.status=="number"?e.status:402,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,iF.prototype)}}class aF extends fr{constructor(e={}){super(e),this.name=e.name||"NotEnoughBalance",this.code=typeof e.code=="number"?e.code:3005,this.message=e.message||"Not enough balance",this.status=typeof e.status=="number"?e.status:402,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,aF.prototype)}}class oF extends fr{constructor(e={}){super(e),this.name=e.name||"SimulationFailed",this.code=typeof e.code=="number"?e.code:3006,this.message=e.message||"Simulation failed",this.status=typeof e.status=="number"?e.status:400,e.cause!==void 0&&(this.cause=e.cause),Object.setPrototypeOf(this,oF.prototype)}}let swt=function(t){return t.WebrpcEndpoint="WebrpcEndpoint",t.WebrpcRequestFailed="WebrpcRequestFailed",t.WebrpcBadRoute="WebrpcBadRoute",t.WebrpcBadMethod="WebrpcBadMethod",t.WebrpcBadRequest="WebrpcBadRequest",t.WebrpcBadResponse="WebrpcBadResponse",t.WebrpcServerPanic="WebrpcServerPanic",t.WebrpcInternalError="WebrpcInternalError",t.WebrpcClientAborted="WebrpcClientAborted",t.WebrpcStreamLost="WebrpcStreamLost",t.WebrpcStreamFinished="WebrpcStreamFinished",t.Unauthorized="Unauthorized",t.PermissionDenied="PermissionDenied",t.SessionExpired="SessionExpired",t.MethodNotFound="MethodNotFound",t.RequestConflict="RequestConflict",t.Aborted="Aborted",t.Geoblocked="Geoblocked",t.RateLimited="RateLimited",t.ProjectNotFound="ProjectNotFound",t.AccessKeyNotFound="AccessKeyNotFound",t.AccessKeyMismatch="AccessKeyMismatch",t.InvalidOrigin="InvalidOrigin",t.InvalidService="InvalidService",t.UnauthorizedUser="UnauthorizedUser",t.QuotaExceeded="QuotaExceeded",t.QuotaRateLimit="QuotaRateLimit",t.NoDefaultKey="NoDefaultKey",t.MaxAccessKeys="MaxAccessKeys",t.AtLeastOneKey="AtLeastOneKey",t.Timeout="Timeout",t.InvalidArgument="InvalidArgument",t.Unavailable="Unavailable",t.QueryFailed="QueryFailed",t.NotFound="NotFound",t.InsufficientFee="InsufficientFee",t.NotEnoughBalance="NotEnoughBalance",t.SimulationFailed="SimulationFailed",t}({}),iwt=function(t){return t[t.WebrpcEndpoint=0]="WebrpcEndpoint",t[t.WebrpcRequestFailed=-1]="WebrpcRequestFailed",t[t.WebrpcBadRoute=-2]="WebrpcBadRoute",t[t.WebrpcBadMethod=-3]="WebrpcBadMethod",t[t.WebrpcBadRequest=-4]="WebrpcBadRequest",t[t.WebrpcBadResponse=-5]="WebrpcBadResponse",t[t.WebrpcServerPanic=-6]="WebrpcServerPanic",t[t.WebrpcInternalError=-7]="WebrpcInternalError",t[t.WebrpcClientAborted=-8]="WebrpcClientAborted",t[t.WebrpcStreamLost=-9]="WebrpcStreamLost",t[t.WebrpcStreamFinished=-10]="WebrpcStreamFinished",t[t.Unauthorized=1e3]="Unauthorized",t[t.PermissionDenied=1001]="PermissionDenied",t[t.SessionExpired=1002]="SessionExpired",t[t.MethodNotFound=1003]="MethodNotFound",t[t.RequestConflict=1004]="RequestConflict",t[t.Aborted=1005]="Aborted",t[t.Geoblocked=1006]="Geoblocked",t[t.RateLimited=1007]="RateLimited",t[t.ProjectNotFound=1008]="ProjectNotFound",t[t.AccessKeyNotFound=1101]="AccessKeyNotFound",t[t.AccessKeyMismatch=1102]="AccessKeyMismatch",t[t.InvalidOrigin=1103]="InvalidOrigin",t[t.InvalidService=1104]="InvalidService",t[t.UnauthorizedUser=1105]="UnauthorizedUser",t[t.QuotaExceeded=1200]="QuotaExceeded",t[t.QuotaRateLimit=1201]="QuotaRateLimit",t[t.NoDefaultKey=1300]="NoDefaultKey",t[t.MaxAccessKeys=1301]="MaxAccessKeys",t[t.AtLeastOneKey=1302]="AtLeastOneKey",t[t.Timeout=1900]="Timeout",t[t.InvalidArgument=2001]="InvalidArgument",t[t.Unavailable=2002]="Unavailable",t[t.QueryFailed=2003]="QueryFailed",t[t.NotFound=3e3]="NotFound",t[t.InsufficientFee=3004]="InsufficientFee",t[t.NotEnoughBalance=3005]="NotEnoughBalance",t[t.SimulationFailed=3006]="SimulationFailed",t}({});const iIe={0:L8e,[-1]:Ur,[-2]:V8e,[-3]:j8e,[-4]:q8e,[-5]:j5,[-6]:W8e,[-7]:J8e,[-8]:DU,[-9]:Q8e,[-10]:X8e,1e3:LU,1001:UU,1002:FU,1003:VU,1004:$U,1005:jU,1006:HU,1007:qU,1008:KU,1101:GU,1102:WU,1103:zU,1104:JU,1105:YU,1200:QU,1201:ZU,1300:XU,1301:eF,1302:tF,1900:nF,2001:tIe,2002:rF,2003:sF,3e3:rIe,3004:iF,3005:aF,3006:oF},Cte="Webrpc",aIe="webrpc@v0.31.2;gen-typescript@v0.23.1;sequence-relayer@v0.4.1";function awt(t){const e=t.get(Cte);return e?owt(e):{WebrpcGenVersion:"",codeGenName:"",codeGenVersion:"",schemaName:"",schemaVersion:""}}function owt(t){const e=t.split(";");if(e.length<3)return{WebrpcGenVersion:"",codeGenName:"",codeGenVersion:"",schemaName:"",schemaVersion:""};const[n,r]=e[0].split("@"),[s,i]=e[1].split("@"),[a,o]=e[2].split("@");return{WebrpcGenVersion:r??"",codeGenName:s??"",codeGenVersion:i??"",schemaName:a??"",schemaVersion:o??""}}var iD=Object.freeze({__proto__:null,WebrpcVersion:Yyt,WebrpcSchemaVersion:Qyt,WebrpcSchemaHash:Zyt,ETHTxnStatus:Rw,TransferType:Xyt,SimulateStatus:ewt,FeeTokenType:twt,SortOrder:nwt,Relayer:M8e,JsonEncode:bs,JsonDecode:$r,WebrpcError:fr,WebrpcEndpointError:L8e,WebrpcRequestFailedError:Ur,WebrpcBadRouteError:V8e,WebrpcBadMethodError:j8e,WebrpcBadRequestError:q8e,WebrpcBadResponseError:j5,WebrpcServerPanicError:W8e,WebrpcInternalErrorError:J8e,WebrpcClientAbortedError:DU,WebrpcStreamLostError:Q8e,WebrpcStreamFinishedError:X8e,UnauthorizedError:LU,PermissionDeniedError:UU,SessionExpiredError:FU,MethodNotFoundError:VU,RequestConflictError:$U,AbortedError:jU,GeoblockedError:HU,RateLimitedError:qU,ProjectNotFoundError:KU,AccessKeyNotFoundError:GU,AccessKeyMismatchError:WU,InvalidOriginError:zU,InvalidServiceError:JU,UnauthorizedUserError:YU,QuotaExceededError:QU,QuotaRateLimitError:ZU,NoDefaultKeyError:XU,MaxAccessKeysError:eF,AtLeastOneKeyError:tF,TimeoutError:nF,InvalidArgumentError:tIe,UnavailableError:rF,QueryFailedError:sF,NotFoundError:rIe,InsufficientFeeError:iF,NotEnoughBalanceError:aF,SimulationFailedError:oF,errors:swt,WebrpcErrorCodes:iwt,webrpcErrorByCode:iIe,WebrpcHeader:Cte,WebrpcHeaderValue:aIe,VersionFromHeader:awt});const cwt=[Rw.DROPPED,Rw.SUCCEEDED,Rw.PARTIALLY_FAILED,Rw.FAILED],lwt=[Rw.DROPPED,Rw.PARTIALLY_FAILED,Rw.FAILED];class uwt{constructor(e){if(this.options=e,this.service=void 0,this.provider=void 0,this._fetch=(n,r)=>{const s={},{jwtAuth:i,projectAccessKey:a}=this.options;return i&&i.length>0&&(s.Authorization=`BEARER ${i}`),a&&a.length>0&&(s["X-Access-Key"]=a),r.headers=Lg({},s,r.headers),fetch(n,r)},this.service=new M8e(e.url,this._fetch),dwt(e.provider))this.provider=e.provider;else{const{jwtAuth:n,projectAccessKey:r}=this.options,s=J4e(e.provider.url,r,n);this.provider=new P2(s,void 0,{staticNetwork:!0})}}async waitReceipt(e,n=1e3,r=5,s){typeof e!="string"&&(e=Mt.transaction.intendedTransactionID(e)),ya.info(`[rpc-relayer/waitReceipt] waiting for ${e}`);let i=0;for(;s===void 0||!s();){try{const{receipt:a}=await this.service.getMetaTxnReceipt({metaTxID:e});if(a&&a.txnReceipt&&a.txnReceipt!=="null"&&cwt.includes(a.status))return{receipt:a}}catch(a){if(i++,i===r)throw a}(s===void 0||!s())&&await new Promise(a=>setTimeout(a,n))}throw new Error(`Cancelled waiting for transaction receipt ${e}`)}async simulate(e,...n){const s=uc.defaultAbiCoder().encode([Mt.transaction.MetaTransactionsType],[Mt.transaction.sequenceTxAbiEncode(n)]);return(await this.service.simulate({wallet:e,transactions:s})).results}async getFeeOptions(e,...n){const r=await this.service.feeTokens();if(r.isFeeRequired){const s=r.tokens.map(c=>c.symbol).join(", ");ya.info(`[rpc-relayer/getFeeOptions] relayer fees are required, accepted tokens are ${s}`);const i=await this.getNonce(e);if(!this.provider)throw ya.warn("[rpc-relayer/getFeeOptions] provider not set, needed for stub signature"),new Error("provider is not set");const{options:a,quote:o}=await this.service.feeOptions({wallet:e,to:e,data:Mt.transaction.encodeBundleExecData({entrypoint:e,transactions:n,nonce:i})});return ya.info(`[rpc-relayer/getFeeOptions] got refund options ${JSON.stringify(a,kT)}`),{options:a,quote:{_tag:"FeeQuote",_quote:o}}}else return ya.info("[rpc-relayer/getFeeOptions] relayer fees are not required"),{options:[]}}async getFeeOptionsRaw(e,n,r){const{options:s,quote:i}=await this.service.feeOptions({wallet:e,to:e,data:Ke(n),simulate:r==null?void 0:r.simulate},Lg({},r!=null&&r.projectAccessKey?{"X-Access-Key":r.projectAccessKey}:void 0));return{options:s,quote:{_tag:"FeeQuote",_quote:i}}}async gasRefundOptions(e,...n){const{options:r}=await this.getFeeOptions(e,...n);return r}async getNonce(e,n){ya.info(`[rpc-relayer/getNonce] get nonce for wallet ${e} space: ${n}`);const r=n!==void 0?J3(BigInt(n)):void 0,s=await this.service.getMetaTxnNonce({walletContractAddress:e,space:r}),i=BigInt(s.nonce),[a,o]=Mt.transaction.decodeNonce(i);return ya.info(`[rpc-relayer/getNonce] got next nonce for wallet ${e} ${o} space: ${a}`),i}async relay(e,n,r=!0,s){var i=this;ya.info(`[rpc-relayer/relay] relaying signed meta-transactions ${JSON.stringify(e,kT)} with quote ${JSON.stringify(n,kT)}`);let a;if(n!==void 0&&(typeof n._quote=="string"?a=n._quote:ya.warn("[rpc-relayer/relay] ignoring invalid fee quote")),!this.provider)throw ya.warn("[rpc-relayer/relay] provider not set, failed relay"),new Error("provider is not set");const o=Mt.transaction.encodeBundleExecData(e),c=await this.service.sendMetaTxn({call:{walletAddress:e.intent.wallet,contract:e.entrypoint,input:o},quote:a},Lg({},s?{"X-Access-Key":s}:void 0));if(ya.info(`[rpc-relayer/relay] got relay result ${JSON.stringify(c,kT)}`),r)return this.wait(e.intent.id);{const l={hash:e.intent.id,confirmations:0,from:e.intent.wallet,wait:f=>Promise.reject(new Error("impossible"))},u=async function(d){var p;if(!i.provider)throw new Error("cannot wait for receipt, relayer has no provider set");const g=await i.wait(e.intent.id),m=(p=g.receipt)==null?void 0:p.transactionHash;if(!m)throw new Error("cannot wait for receipt, unknown native transaction hash");return Object.assign(l,g),i.provider.waitForTransaction(m,d)};return l.wait=u,l}}async wait(e,n,r=1e3,s=5){var i=this;let a=!1;const{receipt:o}=await(n!==void 0?Promise.race([this.waitReceipt(e,r,s,()=>a),new Promise((l,u)=>setTimeout(()=>{a=!0,u(`Timeout waiting for transaction receipt ${e}`)},n))]):this.waitReceipt(e,r,s));if(!o.txnReceipt||lwt.includes(o.status))throw new fwt(o);const c=JSON.parse(o.txnReceipt);return{blockHash:c.blockHash,blockNumber:Number(c.blockNumber),confirmations:1,from:typeof e=="string"?void 0:e.intent.wallet,hash:c.transactionHash,raw:o.txnReceipt,receipt:c,wait:async function(l){return i.provider.waitForTransaction(c.transactionHash,l)}}}async getMetaTransactions(e,n){return this.service.getMetaTransactions({projectId:e,page:n})}async getTransactionCost(e,n,r){return this.service.getTransactionCost({projectId:e,from:n,to:r})}async listGasSponsors(e){return this.service.listGasSponsors(e)}async addGasSponsor(e){return this.service.addGasSponsor(e)}async updateGasSponsor(e){return this.service.updateGasSponsor(e)}async removeGasSponsor(e){return this.service.removeGasSponsor(e)}}class fwt{constructor(e){this.receipt=e}}function dwt(t){return t&&typeof t=="object"&&typeof t.getNetwork=="function"&&typeof t.getBlockNumber=="function"}function hwt(t){return typeof t=="object"&&typeof t.simulate=="function"&&typeof t.getFeeOptions=="function"&&typeof t.gasRefundOptions=="function"&&typeof t.getNonce=="function"&&typeof t.relay=="function"&&typeof t.wait=="function"}function pwt(t){return t.getAddress!==void 0&&t.buildDeployTransaction!==void 0&&t.predecorateSignedTransactions!==void 0&&t.decorateTransactions!==void 0&&t.sign!==void 0&&t.notifyStatusChange!==void 0}class gwt{constructor(e,n=!0){this.signer=e,this.eoa=n}getAddress(){return this.signer.getAddress()}async buildDeployTransaction(e){}async predecorateSignedTransactions(e){return[]}async decorateTransactions(e,n){return e}sign(e){return this.signer.signMessage(e)}notifyStatusChange(e,n,r){}suffix(){return new Uint8Array([2])}}let rx=function(t){return t[t.INITIAL=0]="INITIAL",t[t.SIGNING=1]="SIGNING",t[t.SIGNED=2]="SIGNED",t[t.ERROR=3]="ERROR",t}({});function mwt(t){return t===void 0||t.state===rx.INITIAL||t.state===rx.SIGNING}class cF{constructor(e,n=cF.randomTag()){this.tag=n,this.observers=[],this.signers=[],this.count=0,this.setSigners(e)}static randomTag(){return`default-${Ke(Eu(8)).slice(2)}`}pullId(){return`${this.tag}-${this.count++}`}setSigners(e){this.signers=e.map(n=>pwt(n)?n:new gwt(n))}async getSigners(){return Promise.all(this.signers.map(async function(e){return e.getAddress()}))}subscribe(e){return this.observers.push(e),()=>{this.observers=this.observers.filter(n=>n!==e)}}async notifyObservers(e,n,r){await Promise.all([...this.signers.map(async function(s){return s.notifyStatusChange(e,n,r)}),...this.observers.map(async function(s){return s(n,r)})])}async buildDeployTransaction(e){let n;for(const r of this.signers){const s=await r.buildDeployTransaction(e);n===void 0?n=s:s!=null&&s.transactions&&(n.transactions=s.transactions.concat(n.transactions))}return n}async predecorateSignedTransactions(e){const n=[];for(const r of this.signers)n.push(...await r.predecorateSignedTransactions(e??{}));return n}async decorateTransactions(e,n){for(const r of this.signers)e=await r.decorateTransactions(e,n??{});return e}signMessage(e){var n=this;const r=this.pullId();return new Promise(async function(s){const{message:i,metadata:a,callback:o,candidates:c}=e,l={ended:!1,message:i,signers:{}};let u=a??{};const f=m=>{u=m,n.notifyObservers(r,l,u)},d=()=>{try{n.notifyObservers(r,l,u);const m=Object.entries(l.signers).filter(([v,A])=>mwt(A));if(o&&o(l,f)||m.length===0){l.ended=!0,s(l),n.notifyObservers(r,l,u);return}}catch(m){console.error("Error while notifying observers",m)}};let p=n.signers;if(c){const m=await Promise.all(n.signers.map(async function(v){return v.getAddress()}));p=n.signers.filter((v,A)=>c.includes(m[A]))}const g=await Promise.allSettled(p.map(async function(m){const v=await m.getAddress();l.signers[v]={state:rx.SIGNING,request:m.sign(i,a??{}).then(A=>{const S=m.suffix();return l.signers[v]={state:rx.SIGNED,signature:A,suffix:S},d(),A}).catch(A=>{throw l.signers[v]={state:rx.ERROR,error:A},d(),A})}}));for(let m=0;m<g.length;m++){const v=n.signers[m],A=g[m];if(A.status==="rejected"){const S=await v.getAddress();console.warn(`signer ${S} rejected the request: ${A.reason}`),l.signers[S]={state:rx.ERROR,error:new Error(`signer ${S} rejected the request: ${A.reason}`)}}}d()})}}function $y(){return $y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$y.apply(null,arguments)}async function Bfe(t){return Array.isArray(t)?Promise.all(t.map(e=>Xi(e))):Xi(t)}const Mfe=t=>{const e=new Map;for(const n of Object.keys(t.signers)){const r=t.signers[n];if(r.state===rx.SIGNED){const s=et(r.suffix),i=kr(["bytes","bytes"],[r.signature,s]);e.set(n,{signature:i,isDynamic:s.length!==1||s[0]!==2})}}return e};class Q3 extends kU{constructor(e){var n;const r=BigInt(e.chainId);if(r===0n&&!e.coders.signature.supportsNoChainId)throw new Error(`Sequence version ${e.config.version} doesn't support chainId 0`);super((n=e.provider)!=null?n:null),this.context=void 0,this.config=void 0,this.address=void 0,this.chainId=void 0,this.relayer=void 0,this.coders=void 0,this.orchestrator=void 0,this._reader=void 0,this.context=e.context,this.config=e.config,this.orchestrator=e.orchestrator,this.coders=e.coders,this.address=e.address,this.chainId=r,this.relayer=e.relayer,this._reader=e.reader}static newWallet(e){const n=Mt.context.addressOf(e.context,e.coders.config.imageHashOf(e.config));return new Q3($y({},e,{address:n}))}reader(){if(this._reader)return this._reader;if(!this.provider)throw new Error("Wallet status provider requires a provider");return new Mt.reader.OnChainReader(this.provider)}setConfig(e){this.config=e}setOrchestrator(e){this.orchestrator=e}setAddress(e){this.address=e}getSigners(){return this.orchestrator.getSigners()}async getAddress(){return this.address}async decorateTransactions(e){const n=await this.orchestrator.decorateTransactions(e);if(await this.reader().isDeployed(this.address))return n;const r=[{to:n.entrypoint,data:Mt.transaction.encodeBundleExecData(n),revertOnError:!0}],s=await this.buildDeployTransaction();return s&&r.unshift(...s.transactions),{entrypoint:this.context.guestModule,chainId:this.chainId,intent:n.intent,transactions:r}}async buildDeployTransaction(e){if(e!=null&&e.ignoreDeployed&&await this.reader().isDeployed(this.address))return;const n=this.coders.config.imageHashOf(this.config);if(Mt.context.addressOf(this.context,n)!==this.address)throw new Error(`First address of config ${n} doesn't match wallet address ${this.address}`);let r;switch(this.chainId){case BigInt(ge.SKALE_NEBULA):r=10000000n;break;case BigInt(ge.SOMNIA_TESTNET):r=10000000n;break;case BigInt(ge.SOMNIA):r=10000000n;break}const s=Q3.buildDeployTransaction(this.context,n,r);if(e!=null&&e.includeChildren){const i=await this.orchestrator.buildDeployTransaction(e);i&&(s.transactions=i.transactions.concat(s.transactions))}return s}async deploy(e){const n=await this.buildDeployTransaction(e);if(n!==void 0){if(!this.relayer)throw new Error("Wallet deploy requires a relayer");return this.relayer.relay($y({},n,{chainId:this.chainId,intent:{id:Ke(Eu(32)),wallet:this.address}}))}}static buildDeployTransaction(e,n,r=100000n){const s=new Ya(qa.factory.abi);return{entrypoint:e.guestModule,transactions:[{to:e.factory,data:s.encodeFunctionData(s.getFunction("deploy"),[e.mainModule,n]),gasLimit:r,delegateCall:!1,revertOnError:!0,value:0}]}}async buildUpdateConfigurationTransaction(e){if(this.coders.config.update.isKindUsed){const n=await this.reader().implementation(this.address),r=n&&n===this.context.mainModuleUpgradable;return this.coders.config.update.buildTransaction(this.address,e,this.context,r?"later":"first")}return this.coders.config.update.buildTransaction(this.address,e,this.context)}async getNonce(e=0){const n=await this.reader().nonce(this.address,e);if(n===void 0)throw new Error("Unable to determine nonce");return Number(n)}async signDigest(e,n){const r=Tfe(this.address,this.chainId,e);if(this.coders.config.hasSubdigest(this.config,r))return this.coders.signature.encodeSigners(this.config,new Map,[r],this.chainId).encoded;const s=$y({},n,{digest:e,chainId:this.chainId,address:this.address,config:this.config}),i=et(r),a=await this.orchestrator.signMessage({candidates:this.coders.config.signersOf(this.config).map(c=>c.address),message:i,metadata:s,callback:(c,l)=>{const u=Mfe(c),f=$y({},s,{parts:u});return l(f),this.coders.signature.hasEnoughSigningPower(this.config,u)}}),o=Mfe(a);return this.coders.signature.encodeSigners(this.config,o,[],this.chainId).encoded}signMessage(e){return this.signDigest(yr(e),{message:e})}signTypedData(e,n,r){const s=cte({domain:e,types:n,message:r});return this.signDigest(s)}signTransactionBundle(e){if(e.entrypoint!==this.address)throw new Error(`Invalid entrypoint: ${e.entrypoint} !== ${this.address}`);return this.signTransactions(e.transactions,e.nonce)}async fetchNonceOrSpace(e){let n;if(e&&e.space!==void 0)n=BigInt(e.space);else{if(e===void 0)return this.randomNonce();if(e&&e.serial===!0)n=0;else return e}const r=await this.reader().nonce(this.address,n);if(r===void 0)throw new Error("Unable to determine nonce");return Mt.transaction.encodeNonce(n,r)}randomNonce(){const e=BigInt(Ke(Eu(12)));return Mt.transaction.encodeNonce(e,0)}async signTransactions(e,n,r){const s=await Bfe(e),i=Mt.transaction.fromTransactionish(this.address,s);i.length===0&&i.push({to:this.address,data:"0x",value:0,gasLimit:0,delegateCall:!1,revertOnError:!0});const a=await this.fetchNonceOrSpace(n),o=Mt.transaction.digestOfTransactions(a,i),c=$y({digest:o,transactions:i},r),l=await this.signDigest(o,c);return{intent:{id:Tfe(this.address,this.chainId,o),wallet:this.address},chainId:this.chainId,transactions:i,entrypoint:this.address,nonce:a,signature:l}}async sendSignedTransaction(e,n){if(!this.relayer)throw new Error("Wallet sendTransaction requires a relayer");return this.relayer.relay(e,n)}async sendTransaction(e,n){let r;(n==null?void 0:n.nonce)!==void 0?r=n.nonce:n!=null&&n.serial?r={serial:!0}:r=this.randomNonce();const s=await this.signTransactions(e,r),i=await this.decorateTransactions(s);return this.sendSignedTransaction(i,n==null?void 0:n.quote)}async fillGasLimits(e){const n=await Bfe(e),r=Mt.transaction.fromTransactionish(this.address,n),s=this.relayer;if(!s)throw new Error("Wallet fillGasLimits requires a relayer");const i=await s.simulate(this.address,...r);return r.map((a,o)=>{const c=a.gasLimit?Number(a.gasLimit):i[o].gasLimit;return $y({},a,i[o],{gasLimit:c})})}connect(e,n){return new Q3({coders:this.coders,context:this.context,config:this.config,chainId:this.chainId,address:this.address,orchestrator:this.orchestrator,reader:this._reader,provider:e,relayer:n??this.relayer})}signTransaction(e){throw new Error("Method not implemented.")}}function Kh(){return Kh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kh.apply(null,arguments)}function ywt(t){if(!t)return[];const e=BigInt(t.value);switch(t.token.type){case iD.FeeTokenType.UNKNOWN:return[{delegateCall:!1,revertOnError:!0,gasLimit:t.gasLimit,to:t.to,value:J3(e),data:"0x"}];case iD.FeeTokenType.ERC20_TOKEN:if(!t.token.contractAddress)throw new Error("No contract address for ERC-20 fee option");return[{delegateCall:!1,revertOnError:!0,gasLimit:t.gasLimit,to:t.token.contractAddress,value:0,data:new Ya([{constant:!1,inputs:[{type:"address"},{type:"uint256"}],name:"transfer",outputs:[],type:"function"}]).encodeFunctionData("transfer",[t.to,J3(e)])}];default:throw new Error(`Unhandled fee token type ${t.token.type}`)}}class wwt{constructor(e,n,r){this.account=e,this.chainId=n,this.options=r}get provider(){return this.account.providerFor(this.chainId)}async getAddress(){return this.account.address}signMessage(e){var n,r;return this.account.signMessage(e,this.chainId,(n=(r=this.options)==null?void 0:r.cantValidateBehavior)!=null?n:"throw")}signTypedData(e,n,r){var s,i;return this.account.signTypedData(e,n,r,this.chainId,(s=(i=this.options)==null?void 0:i.cantValidateBehavior)!=null?s:"throw")}async defaultSelectFee(e,n){if(n.length===0)return;const r=[{constant:!0,inputs:[{type:"address"}],name:"balanceOf",outputs:[{type:"uint256"}],type:"function"}];for(const s of n)if(s.token.type===iD.FeeTokenType.UNKNOWN){if(await this.getBalance()>=BigInt(s.value))return s}else if(s.token.contractAddress&&s.token.type===iD.FeeTokenType.ERC20_TOKEN&&await new Si(s.token.contractAddress,r,this.provider).balanceOf(this.account.address)>=BigInt(s.value))return s;throw new Error("No fee option available - not enough balance")}async sendTransaction(e,n){var r,s,i,a,o;const c=await this.account.prepareTransactions({txs:e,chainId:this.chainId,stubSignatureOverrides:(r=(s=this.options)==null?void 0:s.stubSignatureOverrides)!=null?r:new Map,simulateForFeeOptions:n==null?void 0:n.simulateForFeeOptions}),u=await((i=(a=this.options)==null?void 0:a.selectFee)!=null?i:this.defaultSelectFee.bind(this))(e,c.feeOptions),f=[...c.transactions,...ywt(u)];return this.account.sendTransaction(f,this.chainId,c.feeQuote,void 0,void 0,{nonceSpace:(o=this.options)==null?void 0:o.nonceSpace,projectAccessKey:n==null?void 0:n.projectAccessKey,waitForReceipt:n==null?void 0:n.waitForReceipt})}getBalance(e){return this.provider.getBalance(this.account.address,e)}call(e,n){return this.provider.call(Kh({},e,{blockTag:n}))}async resolveName(e){const n=await this.provider.resolveName(e);if(!n)throw new Error(`Could not resolve name ${e}`);return n}connect(e){throw new Error("Method not implemented.")}signTransaction(e){throw new Error("Method not implemented.")}getTransactionCount(e){throw new Error("Method not implemented.")}estimateGas(e){throw new Error("Method not implemented.")}getChainId(){return Promise.resolve(Number(this.chainId))}getGasPrice(){throw new Error("Method not implemented.")}getFeeData(){throw new Error("Method not implemented.")}getNonce(e){throw new Error("Method not implemented.")}populateCall(e){throw new Error("Method not implemented.")}checkTransaction(e){throw new Error("Method not implemented.")}async populateTransaction(e){throw new Error("Method not implemented.")}_checkProvider(e){throw new Error("Method not implemented.")}}class bwt{async isDeployed(e){return!1}async implementation(e){}async imageHash(e){}async nonce(e,n){return 0n}async isValidSignature(e,n,r){throw new Error("Method not supported.")}}class i9{constructor(e){this.address=void 0,this.networks=void 0,this.tracker=void 0,this.contexts=void 0,this.migrator=void 0,this.migrations=void 0,this.orchestrator=void 0,this.jwt=void 0,this.projectAccessKey=void 0,this.address=Fn(e.address),this.contexts=e.contexts,this.tracker=e.tracker,this.networks=e.networks,this.orchestrator=e.orchestrator,this.jwt=e.jwt,this.projectAccessKey=e.projectAccessKey,this.migrations=e.migrations||Pfe.DefaultMigrations,this.migrator=new kfe.Migrator(e.tracker,this.migrations,this.contexts)}getSigner(e,n){return new wwt(this,e,n)}static async new(e){var n;const s=new kfe.Migrator(e.tracker,(n=e.migrations)!=null?n:Pfe.DefaultMigrations,e.contexts).lastMigration(),i=s.configCoder,a=i.fromSimple(e.config),o=i.imageHashOf(a),c=e.contexts[s.version],l=Mt.context.addressOf(c,o);return await e.tracker.saveCounterfactualWallet({config:a,context:Object.values(e.contexts)}),new i9({address:l,tracker:e.tracker,contexts:e.contexts,networks:e.networks,orchestrator:e.orchestrator,migrations:e.migrations,projectAccessKey:e.projectAccessKey})}getAddress(){return Promise.resolve(this.address)}get version(){return this.migrator.lastMigration().version}get coders(){const e=this.migrator.lastMigration();return{signature:e.signatureCoder,config:e.configCoder}}network(e){const n=BigInt(e),r=this.networks.find(s=>n===BigInt(s.chainId));if(!r)throw new Error(`Network not found for chainId ${e}`);return r}providerFor(e){const n=this.network(e);if(!n.provider&&!n.rpcUrl)throw new Error(`Provider not found for chainId ${e}`);const r=new wu(n.name,n.chainId);return n.provider||new P2(J4e(n.rpcUrl,this.projectAccessKey,this.jwt),r,{staticNetwork:r})}reader(e){return BigInt(e)===0n?new bwt:new Mt.reader.OnChainReader(this.providerFor(e))}relayer(e){const n=this.network(e);if(!n.relayer)throw new Error(`Relayer not found for chainId ${e}`);return hwt(n.relayer)?n.relayer:new uwt(Kh({},n.relayer,{projectAccessKey:this.projectAccessKey,jwtAuth:this.jwt}))}setOrchestrator(e){this.orchestrator=e}setJwt(e){this.jwt=e}contextFor(e){const n=this.contexts[e];if(!n)throw new Error(`Context not found for version ${e}`);return n}walletForStatus(e,n){const r=tc.coderFor(n.version);return this.walletFor(e,this.contextFor(n.version),n.config,r)}walletFor(e,n,r,s){const i=BigInt(e)===0n;return new Q3({config:r,context:n,chainId:e,coders:s,relayer:i?void 0:this.relayer(e),address:this.address,orchestrator:this.orchestrator,reader:this.reader(e)})}async status(e,n=!1){var r=this;const s=this.reader(e).isDeployed(this.address),i=this.tracker.imageHashOfCounterfactualWallet({wallet:this.address}).then(D=>{if(!D)throw new Error(`Counterfactual imageHash not found for wallet ${this.address}`);return D}),a=i.then(D=>jyt.counterfactualVersion(this.address,D.imageHash,Object.values(this.contexts))),o=async function(){if(!await s)return a;const V=await r.reader(e).implementation(r.address);if(!V)throw new Error(`Implementation not found for wallet ${r.address}`);const O=Object.values(r.contexts);for(let U=0;U<O.length;U++)if(O[U].mainModule===V||O[U].mainModuleUpgradable===V)return O[U].version;throw new Error(`Version not found for implementation ${V}`)}(),c=async function(){const D=await r.reader(e).imageHash(r.address);if(D)return D;const V=await i;if(V)return V.imageHash;throw new Error(`On-chain imageHash not found for wallet ${r.address}`)}(),l=async function(){const D=await c,V=await r.tracker.configOfImageHash({imageHash:D});if(V)return V;throw new Error(`On-chain config not found for imageHash ${D}`)}(),u=await o,f=await c;let d=f,p=u,g=[];if(u!==this.version){const D=await this.migrator.getAllMigratePresignedTransaction({address:this.address,fromImageHash:f,fromVersion:u,chainId:e});d=D.lastImageHash,p=D.lastVersion,g=D.signedMigrations}const m=await this.tracker.loadPresignedConfiguration({wallet:this.address,fromImageHash:d,longestPath:n}),v=m&&m.length>0?m[m.length-1].nextImageHash:d,A=await this.tracker.configOfImageHash({imageHash:v});if(!A)throw new Error(`Config not found for imageHash ${v}`);const S=await s,I=await i,B=tc.coderFor(p).config.checkpointOf(A);return{original:Kh({},I,{version:await a}),onChain:{imageHash:f,config:await l,version:u,deployed:S},fullyMigrated:p===this.version,signedMigrations:g,version:p,presignedConfigurations:m,imageHash:v,config:A,checkpoint:B,canOnchainValidate:u===this.version&&S}}mustBeFullyMigrated(e){if(!e.fullyMigrated)throw new Error(`Wallet ${this.address} is not fully migrated`)}async predecorateSignedTransactions(e,n){const r=await this.orchestrator.predecorateSignedTransactions({chainId:n}),s=await this.predecorateTransactions([],e,n);return Mt.transaction.fromTransactionish(this.address,s).length>0&&r.push(await this.signTransactions(s,n)),r}async predecorateTransactions(e,n,r){if(e=Array.isArray(e)?e:[e],n.onChain.imageHash!==n.imageHash){const a=await this.walletForStatus(r,n).buildUpdateConfigurationTransaction(n.config);e=[...e,...a.transactions]}const{proxyImplementationHook:s}=this.contexts[n.config.version];if(s&&(r===ge.IMMUTABLE_ZKEVM||r===ge.IMMUTABLE_ZKEVM_TESTNET)){const i=this.providerFor(r);if(i){const a=new Si(this.address,qa.walletProxyHook.abi,i);let o;try{o=await a.PROXY_getImplementation()}catch(c){console.log("Error getting implementation address",c)}if(!o||o===$c){console.log("Adding wallet proxy hook");const c=new Ya(qa.moduleHooks.abi);e=[{to:this.address,data:c.encodeFunctionData(c.getFunction("addHook"),["0x90611127",s]),gasLimit:5e4,delegateCall:!1,revertOnError:!1,value:0},...e]}}}return e}async decorateTransactions(e,n,r){var s,i;if(!Array.isArray(e))return this.decorateTransactions([e],n,r);r=(s=r)!=null?s:e[0].chainId;const a=await this.buildBootstrapTransactions(n,r),o=a.transactions.length>0;if(!o&&e.length===1)return e[0];const{entrypoint:c}=o?a:e[0],l={entrypoint:c,chainId:r,intent:(i=e[0])==null?void 0:i.intent,transactions:[...a.transactions,...e.map(u=>({to:u.entrypoint,data:Mt.transaction.encodeBundleExecData(u),gasLimit:0,delegateCall:!1,revertOnError:!0,value:0}))]};if(!n.onChain.deployed){const u=Mt.transaction.subdigestOfGuestModuleTransactions(this.contexts[this.version].guestModule,r,l.transactions);l.intent===void 0?l.intent={id:u,wallet:this.address}:l.intent.id=u}return l}async decorateSignature(e,n){if(!n.presignedConfigurations||n.presignedConfigurations.length===0)return e;const r=this.coders.signature,s=n.presignedConfigurations.map(a=>a.signature),i=r.chainSignatures(e,s);return r.trim(i)}async publishWitnessFor(e,n=0){const r=Tl(`This is a Sequence account woo! ${Date.now()}`),s=await this.status(n),i=this.coders.config.fromSimple({threshold:e.length,checkpoint:0,signers:e.map(u=>({address:u,weight:1}))}),o=await this.walletFor(n,s.original.context,i,this.coders).signDigest(r),c=this.coders.signature.decode(o),l=this.coders.signature.signaturesOfDecoded(c);if(l.length===0)throw new Error("No signatures found");return this.tracker.saveWitnesses({wallet:this.address,digest:r,chainId:n,signatures:l})}async publishWitness(){const e=Tl(`This is a Sequence account woo! ${Date.now()}`),n=await this.signDigest(e,0,!1),r=this.coders.signature.decode(n),s=this.coders.signature.signaturesOfDecoded(r);return this.tracker.saveWitnesses({wallet:this.address,digest:e,chainId:0,signatures:s})}async signDigest(e,n,r=!0,s="ignore",i){const a=BigInt(n)===0n?this.networks[0].chainId:n,o=await this.status(a);if(this.mustBeFullyMigrated(o),!o.canOnchainValidate&&s==="throw")throw new Error("Wallet cannot validate onchain");const l=await this.walletForStatus(n,o).signDigest(e,i),u=r?this.decorateSignature(l,o):l;if(!o.canOnchainValidate)switch(s){case"ignore":return u;case"eip6492":return this.buildEIP6492Signature(await u,o,n)}return u}buildOnChainSignature(e){const n=Mt.signature.subdigestOf({digest:Ke(e),chainId:0,address:this.address}),r=Ke(n),s=this.coders.config.fromSimple({threshold:32768,checkpoint:0,signers:[],subdigests:[r]}),i=new Ya(qa.mainModule.abi),a={entrypoint:this.address,transactions:[{to:this.address,data:i.encodeFunctionData("setExtraImageHash",[this.coders.config.imageHashOf(s),"57896044618658097711785492504343953926634992332820282019728792003956564819968"]),gasLimit:25e4}]};this.tracker.saveWalletConfig({config:s});const o=this.coders.signature.encodeSigners(s,new Map,[r],0).encoded;return{bundle:a,signature:o}}async buildEIP6492Signature(e,n,r){const s=await this.buildBootstrapTransactions(n,r);if(s.transactions.length===0)throw new Error("Cannot build EIP-6492 signature without bootstrap transactions");const i=uc.defaultAbiCoder().encode(["address","bytes","bytes"],[s.entrypoint,Mt.transaction.encodeBundleExecData(s),e]);return kr(["bytes","bytes32"],[i,Mt.EIP6492.EIP_6492_SUFFIX])}async editConfig(e){const n=await this.status(0).then(s=>s.config),r=this.coders.config.editConfig(n,Kh({},e,{checkpoint:this.coders.config.checkpointOf(n)+1n}));return this.updateConfig(r)}async updateConfig(e){if(!this.coders.config.isWalletConfig(e))throw new Error(`Invalid config for wallet ${this.address}`);const n=this.coders.config.imageHashOf(e),r=this.coders.signature.hashSetImageHash(n),s=await this.signDigest(r,0,!1);await this.tracker.savePresignedConfiguration({wallet:this.address,nextConfig:e,signature:s,referenceChainId:1});const i=await this.tracker.configOfImageHash({imageHash:n,noCache:!0});if(!i||this.coders.config.imageHashOf(i)!==n)throw Error(`Reverse lookup failed for imageHash ${n}`)}async buildBootstrapTransactions(e,n){var r;const s=await this.orchestrator.buildDeployTransaction({chainId:n}),i=(r=s==null?void 0:s.transactions)!=null?r:[];if(!e.onChain.deployed){let c;switch(BigInt(n)){case BigInt(ge.SKALE_NEBULA):c=10000000n;break;case BigInt(ge.SOMNIA_TESTNET):c=10000000n;break;case BigInt(ge.SOMNIA):c=10000000n;break}const l=Q3.buildDeployTransaction(e.original.context,e.original.imageHash,c);i.push(...l.transactions)}i.push(...e.signedMigrations.map(c=>({to:c.tx.entrypoint,data:Mt.transaction.encodeBundleExecData(c.tx),value:0,gasLimit:0,revertOnError:!0,delegateCall:!1})));const a=e.signedMigrations.length>0?e.signedMigrations[0].tx.intent.id:Mt.transaction.subdigestOfGuestModuleTransactions(this.contexts[this.version].guestModule,n,i),{guestModule:o}=this.contextFor(e.version);return{entrypoint:o,transactions:i,chainId:n,intent:{id:a,wallet:this.address}}}async bootstrapTransactions(e,n){const r=n||await this.status(e);return this.buildBootstrapTransactions(r,e)}async doBootstrap(e,n,r){const s=await this.bootstrapTransactions(e,r);return this.relayer(e).relay(Kh({},s,{chainId:e}),n)}signMessage(e,n,r="ignore"){const s=Ke(e),i=Ke(aa(v5e));let a;return s.substring(2).startsWith(i.substring(2))?a=yr(e):a=EU(e),this.signDigest(a,n,!0,r)}async signTransactions(e,n,r,s){const i=r||await this.status(n);this.mustBeFullyMigrated(i);const a=this.walletForStatus(n,i),o={address:this.address,digest:"",chainId:n,config:{version:this.version},decorate:!0,cantValidateBehavior:"ignore"},c=s!=null&&s.serial?{serial:!0}:(s==null?void 0:s.nonceSpace)!==void 0?{space:s.nonceSpace}:void 0,l=await a.signTransactions(e,c,o);return Kh({},l,{signature:await this.decorateSignature(l.signature,i)})}async signMigrations(e,n){const r=await this.status(e);if(r.fullyMigrated)return!1;const s=this.walletForStatus(e,r),i=n(s.config),a=await this.migrator.signNextMigration(this.address,r.version,s,i);if(!a)return!1;await this.tracker.saveWalletConfig({config:i});const o=tc.coderFor(i.version).config,c=o.imageHashOf(i),l=await this.tracker.configOfImageHash({imageHash:c,noCache:!0});if(!l||o.imageHashOf(l)!==c)throw Error(`Reverse lookup failed for imageHash ${c}`);return await this.tracker.saveMigration(this.address,a,this.contexts),!0}async signAllMigrations(e){var n=this;const r=[];return{signedMigrations:(await Promise.all(this.networks.map(async function(a){try{return await n.signMigrations(a.chainId,e)}catch(o){return console.warn(`Failed to sign migrations for chain ${a.chainId}`,o),r.push(a.chainId),null}}))).filter(a=>a!==null),failedChains:r}}async isMigratedAllChains(){var e=this;const n=[];return{migratedAllChains:(await Promise.all(this.networks.map(async function(i){try{return await e.status(i.chainId)}catch(a){return n.push(i.chainId),console.warn(`Failed to get status for chain ${i.chainId}`,a),{fullyMigrated:!0}}}))).every(i=>i.fullyMigrated),failedChains:n}}async sendSignedTransactions(e,n,r,s,i,a,o){if(!Array.isArray(e))return this.sendSignedTransactions([e],n,r,s,i,a);const c=s||await this.status(n);this.mustBeFullyMigrated(c);const l=await this.decorateTransactions(e,c,n);return i==null||i(l),this.relayer(n).relay(l,r,o,a)}async fillGasLimits(e,n,r){return this.walletForStatus(n,r||await this.status(n)).fillGasLimits(e)}async gasRefundQuotes(e,n,r,s,i){const a=s||await this.status(n),o=this.walletForStatus(n,a),c=await this.predecorateTransactions(e,a,n),l=Mt.transaction.fromTransactionish(this.address,c),u=o.coders.config.buildStubSignature(o.config,r),f=Ke(Eu(32)),d={chainId:n,intent:{id:f,wallet:this.address},signature:u,transactions:l,entrypoint:this.address,nonce:0},p=await this.decorateTransactions(d,a),g=Mt.transaction.encodeBundleExecData(p),m=await this.relayer(n).getFeeOptionsRaw(p.entrypoint,g,i);return Kh({},m,{decorated:p})}async prepareTransactions(e){const n=await this.status(e.chainId),r=await this.fillGasLimits(e.txs,e.chainId,n),s=await this.gasRefundQuotes(r,e.chainId,e.stubSignatureOverrides,n,{simulate:e.simulateForFeeOptions,projectAccessKey:e.projectAccessKey}),i=Mt.transaction.unwind(this.address,s.decorated.transactions);return{transactions:r,flatDecorated:i,feeOptions:s.options,feeQuote:s.quote}}async sendTransaction(e,n,r,s=!1,i,a){const o=await this.status(n),c=s?e:await this.predecorateTransactions(e,o,n),u=Mt.transaction.fromTransactionish(this.address,c).length>0?await this.signTransactions(c,n,void 0,a):void 0,f=await this.orchestrator.predecorateSignedTransactions({chainId:n}),d=[];return u!==void 0&&u.transactions.length>0&&d.push(u),d.push(...f.filter(p=>p.transactions.length>0)),this.sendSignedTransactions(d,n,r,void 0,i,a==null?void 0:a.projectAccessKey,a==null?void 0:a.waitForReceipt)}async signTypedData(e,n,r,s,i="ignore"){const a=cte({domain:e,types:n,message:r});return this.signDigest(a,s,!0,i)}async getSigners(){var e=this;const n=r=>r.length?r[r.length-1]:void 0;return(await Promise.all(this.networks.map(async function({chainId:r,name:s}){try{var i;const a=await e.status(r);let o=(i=n(a.presignedConfigurations))==null?void 0:i.nextImageHash;if(!o&&a.onChain.version!==a.version){const f=n(a.signedMigrations);if(f){const{toVersion:d,toConfig:p}=f;o=tc.genericCoderFor(d).config.imageHashOf(p)}}o||(o=a.onChain.imageHash);const c=await e.tracker.configOfImageHash({imageHash:o});if(!c)throw new Error(`unable to find config for image hash ${o}`);return tc.genericCoderFor(c.version).config.signersOf(c).map(f=>Kh({},f,{network:r}))}catch(a){return console.warn(`unable to get signers on network ${r} ${s}`,a),[]}}))).flat()}async getAllSigners(){var e=this;const n=[];return await Promise.all(this.networks.map(async function(r){const s=r.chainId,i=await e.status(s,!0),a=[i.onChain.imageHash,...i.onChain.version!==i.version?i.signedMigrations.map(o=>tc.coderFor(o.toVersion).config.imageHashOf(o.toConfig)):[],...i.presignedConfigurations.map(o=>o.nextImageHash)];return Promise.all(a.map(async function(o,c){const l=c===a.length-1,u=await e.tracker.configOfImageHash({imageHash:o});if(!u){console.warn(`AllSigners may be incomplete, config not found for imageHash ${o}`);return}tc.genericCoderFor(u.version).config.signersOf(u).forEach(p=>{const g=n.find(m=>m.address===p.address&&m.network===s);if(g&&l&&g.flaggedForRemoval){g.flaggedForRemoval=!1;return}g||n.push({address:p.address,weight:p.weight,network:s,flaggedForRemoval:!l})})}))})),n}}function vwt(t,e){const n=t.replace("ipfs://ipfs/","").replace("ipfs://","");return t.startsWith("ipfs://")?`${e}${n}`:t}function xwt(t){return t.startsWith("ipfs://")}class oIe{constructor(e,n,r=1e3){this.provider=e,this.solver=n,this.window=r,this.pending=new Map}async runByEIP5719(e,n,r){const s=`${e}-${n}-${r}`,i=Date.now();if(this.pending.has(s)&&i-this.pending.get(s).timestamp<this.window)return this.pending.get(s).promise;const a=cIe(e,this.provider,n,r,this.solver);return this.pending.set(s,{timestamp:i,promise:a}),a}}function Ewt(t,e){const n=[{inputs:[{internalType:"bytes32",type:"bytes32"}],name:"getAlternativeSignature",outputs:[{internalType:"string",type:"string"}],stateMutability:"view",type:"function"}];return new Si(t,n,e)}async function Awt(t){try{return await t}catch{return}}async function cIe(t,e,n,r,s,i=0){if(i>10)throw new Error("EIP5719 - Too many tries");if(Mt.signer.canRecover(r)){const c=Mt.signer.recoverSigner(n,r);if(c&&c.toLowerCase()===t.toLowerCase())return r}try{if(await Mt.signer.isValidSignature(t,n,r,e))return r}catch{}const a=await Awt(Ewt(t,e).getAlternativeSignature(n));if(!a||a==="")throw new Error("EIP5719 - Invalid signature and no alternative signature");const o=Ke(await(s||new Swt).resolve(a));if(!o||o==="")throw new Error("EIP5719 - Empty alternative signature");if(o===Ke(r))throw new Error("EIP5719 - Alternative signature is invalid or the same");return cIe(t,e,n,o,s,i+1)}class Swt{constructor(e="https://cloudflare-ipfs.com/ipfs/"){var n=this;this.gateway=e,this.uri=r=>xwt(r)?vwt(r,this.gateway):r,this.resolve=async function(r){const s=n.uri(r),i=await fetch(s);if(!i.ok)throw new Error(`URISolverIPFS - Failed to fetch ${s}`);return await i.text()}}}const Iwt=(t,e)=>e.some(n=>t instanceof n);let Dfe,Lfe;function Cwt(){return Dfe||(Dfe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Twt(){return Lfe||(Lfe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lIe=new WeakMap,DJ=new WeakMap,uIe=new WeakMap,uq=new WeakMap,Tte=new WeakMap;function Nwt(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(ib(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&lIe.set(n,t)}).catch(()=>{}),Tte.set(e,t),e}function kwt(t){if(DJ.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});DJ.set(t,e)}let LJ={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return DJ.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uIe.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ib(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Pwt(t){LJ=t(LJ)}function Owt(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fq(this),e,...n);return uIe.set(r,e.sort?e.sort():[e]),ib(r)}:Twt().includes(t)?function(...e){return t.apply(fq(this),e),ib(lIe.get(this))}:function(...e){return ib(t.apply(fq(this),e))}}function Rwt(t){return typeof t=="function"?Owt(t):(t instanceof IDBTransaction&&kwt(t),Iwt(t,Cwt())?new Proxy(t,LJ):t)}function ib(t){if(t instanceof IDBRequest)return Nwt(t);if(uq.has(t))return uq.get(t);const e=Rwt(t);return e!==t&&(uq.set(t,e),Tte.set(e,t)),e}const fq=t=>Tte.get(t);function _wt(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=ib(a);return r&&a.addEventListener("upgradeneeded",c=>{r(ib(a.result),c.oldVersion,c.newVersion,ib(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}const Bwt=["get","getKey","getAll","getAllKeys","count"],Mwt=["put","add","delete","clear"],dq=new Map;function Ufe(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(dq.get(e))return dq.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Mwt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Bwt.includes(n)))return;const i=async function(a,...o){const c=this.transaction(a,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(o.shift())),(await Promise.all([l[n](...o),s&&c.done]))[0]};return dq.set(e,i),i}Pwt(t=>({...t,get:(e,n,r)=>Ufe(e,n)||t.get(e,n,r),has:(e,n)=>!!Ufe(e,n)||t.has(e,n)}));function V0(){return V0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V0.apply(null,arguments)}const Dwt=["function execute((bool delegateCall, bool revertOnError, uint256 gasLimit, address target, uint256 value, bytes data)[] calldata transactions, uint256 nonce, bytes calldata signature)"],n2={namespace:"Sequence-Sessions",owners:["AZ6R2mG8zxW9q7--iZXGrBknjegHoPzmG5IG-nxvMaM"],arweaveUrl:"https://arweave.net",graphqlUrl:"https://arweave.net/graphql",eip5719Provider:void 0,rateLimitRetryDelayMs:5*60*1e3};class Lwt{constructor(e=n2){this.options=e,this.configs=new Map,this.eip5719=void 0,e.eip5719Provider&&(this.eip5719=new oIe(e.eip5719Provider))}async loadPresignedConfiguration(e){var n=this;const r=Fn(e.wallet),s=await this.configOfImageHash({imageHash:e.fromImageHash});if(!s)throw new Error(`unable to find from config ${e.fromImageHash}`);if(!Xn.config.isWalletConfig(s))throw new Error(`from config ${e.fromImageHash} is not v2`);const i=BigInt(s.checkpoint),a=Object.entries(await Y8({Type:"config update",Wallet:r},this.options)).flatMap(([u,f])=>{try{const{Signer:d,Subdigest:p,Digest:g,"To-Config":m}=f;let v;switch(f["Signature-Type"]){case"eip-712":case"eth_sign":case"erc-1271":v=f["Signature-Type"];break;default:throw new Error(`unknown signature type ${f["Signature-Type"]}`)}let A;try{A=BigInt(f["To-Checkpoint"])}catch{throw new Error(`to checkpoint is not a number: ${f["To-Checkpoint"]}`)}if(A<=i)return[];if(!FM(d))throw new Error(`signer is not an address: ${d}`);if(!rs(p,32))throw new Error(`subdigest is not a hash: ${p}`);if(!rs(g,32))throw new Error(`digest is not a hash: ${g}`);let S;try{S=BigInt(f["Chain-ID"])}catch{throw new Error(`chain id is not a number: ${f["Chain-ID"]}`)}if(!rs(m,32))throw new Error(`to config is not a hash: ${m}`);return[{id:u,signatureType:v,signer:d,subdigest:p,digest:g,chainId:S,toImageHash:m,toCheckpoint:A}]}catch(d){return console.warn(`invalid wallet ${r} config update ${u}:`,d),[]}}),o=new Map;let c=[];for(const u of a){let f=o.get(u.toImageHash);f||(f=new Map,o.set(u.toImageHash,f),c.push(u)),f.set(u.signer,u)}e.longestPath?c.sort(({toCheckpoint:u},{toCheckpoint:f})=>u===f?0:u<f?-1:1):c.sort(({toCheckpoint:u},{toCheckpoint:f})=>u===f?0:u<f?1:-1);const l=[];for(let u=s;c.length;){const f=Xn.config.imageHash(u);let d,p,g=[];for(const v of c){p=o.get(v.toImageHash),g=Array.from(p.keys());const{weight:A}=Xn.signature.encodeSigners(u,new Map(g.map(S=>[S,{signature:"0x",isDynamic:!1}])),[],0);if(A>=BigInt(u.threshold)){d=v;break}}if(!d){console.warn(`unreachable configs with checkpoint > ${u.checkpoint} from config ${f}`);break}const m=d.toImageHash;try{const v=await this.configOfImageHash({imageHash:m});if(!v)throw new Error(`unable to find config ${m}`);if(!Xn.config.isWalletConfig(v))throw new Error(`config ${m} is not v2`);const A=new Map((await Promise.all(g.map(async function(B){const{id:D,subdigest:V,signatureType:O}=p.get(B);try{let U=await(await tR(D,n.options.rateLimitRetryDelayMs,n.options.arweaveUrl)).text();switch(O){case"eip-712":U+="01";break;case"eth_sign":U+="02";break;case"erc-1271":U+="03";break}if(n.eip5719)try{U=Ke(await n.eip5719.runByEIP5719(B,V,U))}catch{console.warn(`unable to run eip-5719 on config update ${D}`)}const Q=Mt.signer.tryRecoverSigner(V,U);return[[B,{signature:U,isDynamic:Q!==B}]]}catch(U){return console.warn(`unable to fetch signer ${B} config update ${D}:`,U),[]}}))).flat()),{encoded:S,weight:I}=Xn.signature.encodeSigners(u,A,[],0);if(I<BigInt(u.threshold))throw new Error(`insufficient signing power ${I.toString()} < ${u.threshold}`);l.push({wallet:r,signature:S,nextImageHash:m}),u=v,c=c.filter(({toCheckpoint:B})=>B>BigInt(u.checkpoint))}catch(v){console.warn(`unable to reconstruct wallet ${r} update from config ${f} to config ${m}:`,v),c=c.filter(({toImageHash:A})=>A!==m)}}return l}savePresignedConfiguration(e){throw new Error("arweave backend does not support saving config updates")}saveWitnesses(e){throw new Error("arweave backend does not support saving signatures")}async configOfImageHash(e){var n=this;if(!e.noCache){const s=this.configs.get(e.imageHash);if(s)try{return await s}catch{const a=this.configs.get(e.imageHash);if(a)return a}}const r=async function(s){const i=Object.entries(await Y8({Type:"config",Config:s},n.options)).flatMap(([a,o])=>{try{const c=Number(o.Version);if(!c)throw new Error(`invalid version: ${o.Version}`);return[{id:a,version:c}]}catch(c){return console.warn(`config ${s} at ${a} invalid:`,c),[]}});switch(i.length){case 0:n.configs.set(s,Promise.resolve(void 0));return;case 1:break;default:console.warn(`multiple configs ${s} at ${i.map(({id:a})=>a).join(", ")}`);break}for(const{id:a,version:o}of i)try{const c=V0({},await(await tR(a,n.options.rateLimitRetryDelayMs,n.options.arweaveUrl)).json(),{version:o});c.tree&&(c.tree=_S(c.tree));const l=tc.coderFor(o).config.imageHashOf(c);if(l!==s)throw new Error(`image hash is ${l}, expected ${s}`);return n.configs.set(s,Promise.resolve(c)),c}catch(c){console.warn(`config at ${a} invalid:`,c)}n.configs.set(s,Promise.resolve(void 0))}(e.imageHash);return e.noCache||this.configs.set(e.imageHash,r),r}saveWalletConfig(e){throw new Error("arweave backend does not support saving configs")}async imageHashOfCounterfactualWallet(e){const n=Fn(e.wallet),r=Object.entries(await Y8({Type:"wallet",Wallet:n},this.options)).flatMap(([s,i])=>{try{const{"Deploy-Config":a}=i,o=Number(i["Deploy-Version"]);if(!o)throw new Error(`invalid version: ${i["Deploy-Version"]}`);if(!a)throw new Error("no deploy config");const c=Mt.context.defaultContexts[o];if(!c)throw new Error(`unknown version: ${o}`);if(Mt.context.addressOf(c,a)!==n)throw new Error(`incorrect v${o} deploy config: ${a}`);return[{id:s,imageHash:a,context:c}]}catch(a){return console.warn(`wallet ${n} at ${s} invalid:`,a),[]}});switch(r.length){case 0:return;case 1:break;default:console.warn(`multiple deploy configs for wallet ${n} at ${r.map(({id:s})=>s).join(", ")}, using first`);break}return r[0]}saveCounterfactualWallet(e){throw new Error("arweave backend does not support saving wallets")}async walletsOfSigner(e){var n=this;const r=Fn(e.signer),s=new Map;for(const[i,a]of Object.entries(await Y8({Type:["signature","config update"],Signer:r,Witness:e.allSignatures?void 0:"true"},this.options))){const{Wallet:o,Subdigest:c,Digest:l,"Chain-ID":u}=a;try{if(s.has(o))continue;let f;switch(a["Signature-Type"]){case"eip-712":f="01";break;case"eth_sign":f="02";break;case"erc-1271":f="03";break;default:throw new Error(`unknown signature type ${a["Signature-Type"]}`)}if(c!==Mt.signature.subdigestOf({digest:l,chainId:u,address:o}))throw new Error("incorrect subdigest");const d=tR(i,this.options.rateLimitRetryDelayMs,this.options.arweaveUrl).then(async function(p){const g=await p.text()+f;if(n.eip5719)try{return Ke(await n.eip5719.runByEIP5719(r,c,g))}catch{console.warn(`unable to run eip-5719 on signature ${i}`)}return g});s.set(o,{digest:l,chainId:BigInt(u),signature:d})}catch(f){console.warn(`signer ${r} signature ${i} of wallet ${o} invalid:`,f)}}return Promise.all([...s.entries()].map(async function([i,{digest:a,chainId:o,signature:c}]){return{wallet:i,proof:{digest:a,chainId:o,signature:await c}}}))}async getMigration(e,n,r,s){const i=Fn(e),a=Object.entries(await Y8({Type:"migration",Migration:i,"Chain-ID":BigInt(s).toString(),"From-Version":`${r}`,"From-Config":n},this.options)).flatMap(([I,B])=>{try{const{"To-Config":D,Executor:V}=B,O=Number(B["To-Version"]);if(!O)throw new Error(`invalid version: ${B["To-Version"]}`);if(!rs(D,32))throw new Error(`to config is not a hash: ${D}`);if(!FM(V))throw new Error(`executor is not an address: ${V}`);return{id:I,toVersion:O,toImageHash:D,executor:V}}catch(D){return console.warn(`chain ${s} migration ${I} for v${r} wallet ${i} from config ${n} invalid:`,D),[]}});switch(a.length){case 0:return;case 1:break;default:console.warn(`multiple chain ${s} migrations for v${r} wallet ${i} from config ${n} at ${a.map(({id:I})=>I).join(", ")}, using first`);break}const{id:o,toVersion:c,toImageHash:l,executor:u}=a[0],[f,d]=await Promise.all([tR(o,this.options.rateLimitRetryDelayMs,this.options.arweaveUrl).then(I=>I.text()),this.configOfImageHash({imageHash:l})]);if(!d)throw new Error(`unable to find to config ${l} for migration`);const p=new Ya(Dwt),[g,m,v]=p.decodeFunctionData("execute",f),A=Mt.transaction.fromTxAbiEncode(g),S=Mt.transaction.subdigestOfTransactions(i,s,m,A);return{tx:{entrypoint:u,transactions:A,nonce:m,chainId:s,intent:{id:S,wallet:i},signature:v},fromVersion:r,toVersion:Number(c),toConfig:d}}saveMigration(e,n,r){throw new Error("arweave backend does not support saving migrations")}}async function Y8(t,e){var n,r,s,i;const a=(n=e==null?void 0:e.namespace)!=null?n:n2.namespace,o=e==null?void 0:e.owners,c=(r=e==null?void 0:e.graphqlUrl)!=null?r:n2.graphqlUrl,l=(s=e==null?void 0:e.rateLimitRetryDelayMs)!=null?s:n2.rateLimitRetryDelayMs,u=(i=e==null?void 0:e.pageSize)!=null?i:100,f=e==null?void 0:e.maxResults,d=Object.entries(t).flatMap(([g,m])=>m===void 0?[]:[`{ name: "${a?`${a}-${g}`:g}", values: [${typeof m=="string"?`"${m}"`:m.map(v=>`"${v}"`).join(", ")}] }`]),p=[];for(let g=!0;g&&(f===void 0||p.length<f);){const m=`
      query {
        transactions(sort: HEIGHT_DESC, ${p.length?`first: ${u}, after: "${p[p.length-1].cursor}"`:`first: ${u}`}, tags: [${d.join(", ")}]${o===void 0?"":`, owners: [${o.map(S=>`"${S}"`).join(", ")}]`}) {
          pageInfo {
            hasNextPage
          }
          edges {
            cursor
            node {
              id
              tags {
                name
                value
              }
            }
          }
        }
      }
    `;let v;for(;v=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:m}),redirect:"follow"}),v.status===429;)console.warn(`rate limited by ${c}, trying again in ${l/1e3} seconds at ${new Date(Date.now()+l).toLocaleTimeString()}`),await new Promise(S=>setTimeout(S,l));const{data:{transactions:A}}=await v.json();p.push(...A.edges),g=A.pageInfo.hasNextPage}return Object.fromEntries(p.map(({node:{id:g,tags:m}})=>[g,Object.fromEntries(m.map(({name:v,value:A})=>[a&&v.startsWith(`${a}-`)?v.slice(a.length+1):v,A]))]))}async function tR(t,e=n2.rateLimitRetryDelayMs,n=n2.arweaveUrl){for(;;){const r=await fetch(`${n}/${t}`,{redirect:"follow"});if(r.status!==429)return r;console.warn(`rate limited by ${n}, trying again in ${e/1e3} seconds at ${new Date(Date.now()+e).toLocaleTimeString()}`),await new Promise(s=>setTimeout(s,e))}}function _S(t){return typeof t=="string"?{nodeHash:t}:typeof t=="object"&&(t==null?void 0:t.node)!==void 0?{nodeHash:t.node}:t instanceof Array&&t.length===2?{left:_S(t[0]),right:_S(t[1])}:Xn.config.isNode(t)?{left:_S(t.left),right:_S(t.right)}:Xn.config.isNestedLeaf(t)?V0({},t,{tree:_S(t.tree)}):t}var Uwt=Object.freeze({__proto__:null,defaults:n2,ArweaveReader:Lwt});class Fwt{constructor(e){this.tracker=e}async loadPresignedConfiguration(e){return console.debug("? loadPresignedConfiguration"),wc(e,"? "),wc(await this.tracker.loadPresignedConfiguration(e),"! ")}savePresignedConfiguration(e){return console.debug("? savePresignedConfiguration"),wc(e,"? "),this.tracker.savePresignedConfiguration(e)}saveWitnesses(e){return console.debug("? saveWitnesses"),wc(e,"? "),this.tracker.saveWitnesses(e)}async configOfImageHash(e){return console.debug("? configOfImageHash"),wc(e,"? "),wc(await this.tracker.configOfImageHash(e),"! ")}saveWalletConfig(e){return console.debug("? saveWalletConfig"),wc(e,"? "),this.tracker.saveWalletConfig(e)}async imageHashOfCounterfactualWallet(e){return console.debug("? imageHashOfCounterfactualWallet"),wc(e,"? "),wc(await this.tracker.imageHashOfCounterfactualWallet(e),"! ")}saveCounterfactualWallet(e){return console.debug("? saveCounterfactualWallet"),wc(e,"? "),this.tracker.saveCounterfactualWallet(e)}async walletsOfSigner(e){return console.debug("? walletsOfSigner"),wc(e,"? "),wc(await this.tracker.walletsOfSigner(e),"! ")}async getMigration(e,n,r,s){return console.debug("? getMigration"),wc({address:e,fromImageHash:n,fromVersion:r,chainId:s},"? "),wc(await this.tracker.getMigration(e,n,r,s),"! ")}saveMigration(e,n,r){return console.debug("? saveMigration"),wc({address:e,signed:n,contexts:r},"? "),this.tracker.saveMigration(e,n,r)}}function wc(t,e=""){switch(t){case void 0:console.debug(e+"undefined");break;default:JSON.stringify(t,kT,2).split(`
`).map(n=>e+n).forEach(n=>console.debug(n));break}return t}var Vwt=Object.freeze({__proto__:null,DebugConfigTracker:Fwt});class fIe{constructor(){this.configs={},this.v2Nodes={},this.counterfactualWallets={},this.payloads={},this.signatures={},this.migrations={},this.loadConfig=e=>Promise.resolve(this.configs[e]),this.saveConfig=(e,n)=>(this.configs[e]=n,Promise.resolve()),this.loadV2Node=e=>Promise.resolve(this.v2Nodes[e]),this.saveV2Node=(e,n)=>(this.v2Nodes[e]=n,Promise.resolve()),this.loadCounterfactualWallet=e=>Promise.resolve(this.counterfactualWallets[e]),this.saveCounterfactualWallet=(e,n,r)=>(this.counterfactualWallets[e]={imageHash:n,context:r},Promise.resolve()),this.loadPayloadOfSubdigest=e=>Promise.resolve(this.payloads[e]),this.savePayloadOfSubdigest=(e,n)=>(this.payloads[e]=n,Promise.resolve()),this.loadSubdigestsOfSigner=e=>Promise.resolve(Object.keys(this.signatures[e]||{})),this.loadSignatureOfSubdigest=(e,n)=>{var r;return Promise.resolve((r=this.signatures[e])==null?void 0:r[n])},this.saveSignatureOfSubdigest=(e,n,r)=>(this.signatures[e]||(this.signatures[e]={}),this.signatures[e][n]=r,Promise.resolve()),this.loadMigrationsSubdigest=(e,n,r)=>{var s;return Promise.resolve(((s=this.migrations[e])==null||(s=s[n])==null?void 0:s[r])||[])},this.saveMigrationsSubdigest=(e,n,r,s,i)=>(this.migrations[e]||(this.migrations[e]={}),this.migrations[e][n]||(this.migrations[e][n]={}),this.migrations[e][n][r]||(this.migrations[e][n][r]=[]),this.migrations[e][n][r].push({subdigest:s,toImageHash:i}),Promise.resolve())}}function Z3(t){if(t===void 0)return;const e={};for(const n of Object.keys(t)){const r=t[n];r._isBigNumber===!0&&r._hex!==void 0&&typeof r._hex=="string"&&r._hex.length!==""?e[n]=BigInt(r._hex):Array.isArray(r)?e[n]=r.map(s=>Z3(s)):typeof r=="object"&&r!==null?e[n]=Z3(r):e[n]=r}return e}class $wt{constructor(e){var n=this;this.dbName=e,this._lazyDb=void 0,this.loadConfig=async function(r){return(await n.getDb()).get("configs",r).then(i=>Z3(i))},this.saveConfig=async function(r,s){await(await n.getDb()).put("configs",s,r)},this.loadV2Node=async function(r){return(await n.getDb()).get("v2Nodes",r).then(i=>Z3(i))},this.saveV2Node=async function(r,s){await(await n.getDb()).put("v2Nodes",s,r)},this.loadCounterfactualWallet=async function(r){return(await n.getDb()).get("counterfactualWallets",r)},this.saveCounterfactualWallet=async function(r,s,i){await(await n.getDb()).put("counterfactualWallets",{imageHash:s,context:i},r)},this.loadPayloadOfSubdigest=async function(r){return(await n.getDb()).get("payloads",r).then(i=>Z3(i))},this.savePayloadOfSubdigest=async function(r,s){await(await n.getDb()).put("payloads",s,r)},this.loadSubdigestsOfSigner=async function(r){return(await(await n.getDb()).getAllKeysFromIndex("signatures","signer",IDBKeyRange.only(r))).map(a=>a.split("-")[0])},this.loadSignatureOfSubdigest=async function(r,s){const a=await(await n.getDb()).get("signatures",[s,r].join("-"));return a==null?void 0:a.signature},this.saveSignatureOfSubdigest=async function(r,s,i){await(await n.getDb()).put("signatures",{signature:i,signer:r},[s,r].join("-"))},this.loadMigrationsSubdigest=async function(r,s,i){return(await(await n.getDb()).getAllFromIndex("migrations","jump",IDBKeyRange.only([r,s,i]))).map(c=>({subdigest:c.subdigest,toImageHash:c.toImageHash}))},this.saveMigrationsSubdigest=async function(r,s,i,a,o){await(await n.getDb()).put("migrations",{wallet:r,fromVersion:s,toVersion:i,subdigest:a,toImageHash:o},a)}}async getDb(){if(this._lazyDb)return this._lazyDb;const e=this.dbName;return this._lazyDb=await _wt(e,1,{upgrade(n,r,s,i){console.log(`upgrading ${e} from ${r} to ${s} - ${i}`),r===0&&(n.createObjectStore("configs"),n.createObjectStore("v2Nodes"),n.createObjectStore("counterfactualWallets"),n.createObjectStore("payloads"),n.createObjectStore("signatures").createIndex("signer","signer",{unique:!1}),n.createObjectStore("migrations").createIndex("jump",["wallet","fromVersion","toVersion"]))}}),this._lazyDb}}function dIe(t){return t.left!==void 0&&t.right!==void 0}function hIe(t){return t.weight!==void 0&&t.threshold!==void 0&&t.tree!==void 0}function UJ(t){return t.version===2&&t.threshold!==void 0&&t.checkpoint!==void 0&&t.tree!==void 0&&typeof t.tree=="string"}var jwt=Object.freeze({__proto__:null,isPlainNode:dIe,isPlainNested:hIe,isPlainV2Config:UJ,MemoryTrackerStore:fIe,recreateBigNumbers:Z3,IndexedDBStore:$wt});class Nte{constructor(e,n=new fIe,r=!1){var s=this;this.provider=e,this.store=n,this.useEIP5719=r,this.cachedEIP5719=void 0,this.loadTopology=async function(i){const a=await s.store.loadV2Node(i);if(!a)return{nodeHash:i};if(dIe(a)){const[o,c]=await Promise.all([s.loadTopology(a.left),s.loadTopology(a.right)]);return{left:o,right:c}}return hIe(a)?{weight:BigInt(a.weight),threshold:BigInt(a.threshold),tree:await s.loadTopology(a.tree)}:a},this.saveTopology=async function(i){if(Xn.config.isNodeLeaf(i))return;const a=Xn.config.hashNode(i);if(Xn.config.isNode(i)){const o=s.saveTopology(i.left),c=s.saveTopology(i.right),l=s.store.saveV2Node(a,{left:Xn.config.hashNode(i.left),right:Xn.config.hashNode(i.right)});await Promise.all([o,c,l]);return}if(Xn.config.isNestedLeaf(i)){const o=s.saveTopology(i.tree),c=s.store.saveV2Node(a,{weight:BigInt(i.weight).toString(),threshold:BigInt(i.threshold).toString(),tree:Xn.config.hashNode(i.tree)});await Promise.all([o,c]);return}if(Xn.config.isSignerLeaf(i))return s.store.saveV2Node(a,{address:i.address,weight:i.weight});if(Xn.config.isSubdigestLeaf(i))return s.store.saveV2Node(a,{subdigest:i.subdigest});throw new Error(`Unknown topology type: ${i}`)},this.saveWalletConfig=async function(i){const{config:a}=i;if(Bv.config.ConfigCoder.isWalletConfig(a)){const o=Bv.config.ConfigCoder.imageHashOf(a);return s.store.saveConfig(o,a)}if(Xn.config.ConfigCoder.isWalletConfig(a)){const o=Xn.config.ConfigCoder.imageHashOf(a);if(Xn.config.isComplete(a.tree))return s.store.saveConfig(o,a)}},this.configOfImageHashCache={},this.configOfImageHash=async function(i){const{imageHash:a}=i;if(s.configOfImageHashCache[i.imageHash])return s.configOfImageHashCache[i.imageHash];const o=await s.store.loadConfig(a);if(o){if(o.version===1||o.version===2&&!UJ(o))return s.configOfImageHashCache[i.imageHash]=o,o;if(UJ(o)){const c={version:2,threshold:BigInt(o.threshold),checkpoint:BigInt(o.checkpoint),tree:await s.loadTopology(o.tree)};return s.configOfImageHashCache[i.imageHash]=c,c}throw new Error(`Unknown config type: ${o}`)}},this.saveCounterfactualWallet=async function(i){const{config:a,context:o}=i,c=tc.genericCoderFor(a.version).config.imageHashOf(a);await Promise.all([s.saveWalletConfig({config:a}),...o.map(l=>{const u=Mt.context.addressOf(l,c);return s.store.saveCounterfactualWallet(u,c,l)})])},this.imageHashOfCounterfactualWallet=async function(i){const{wallet:a}=i,o=await s.store.loadCounterfactualWallet(a);if(o)return{imageHash:o.imageHash,context:o.context}},this.savePayload=async function(i){const{payload:a}=i,o=Mt.signature.subdigestOf(a);await s.store.savePayloadOfSubdigest(o,a)},this.payloadOfSubdigestCache={},this.payloadOfSubdigest=async function(i){if(s.payloadOfSubdigestCache[i.subdigest])return s.payloadOfSubdigestCache[i.subdigest];const{subdigest:a}=i,o=await s.store.loadPayloadOfSubdigest(a);return o&&(s.payloadOfSubdigestCache[a]=o),o},this.savePresignedConfiguration=async function(i){const a=Xn.signature.SignatureCoder.decode(i.signature),o=tc.genericCoderFor(i.nextConfig.version).config.imageHashOf(i.nextConfig),c=Xn.chained.messageSetImageHash(o),l=yr(c),u={message:c,address:i.wallet,chainId:0,digest:l},f=s.savePayload({payload:u}),d=s.saveWalletConfig({config:i.nextConfig}),p=await Xn.signature.SignatureCoder.recover(a,u,s.provider),g=Xn.signature.signaturesOf(p.config.tree);await Promise.all([f,d,s.saveWalletConfig({config:p.config}),...g.map(m=>s.store.saveSignatureOfSubdigest(m.address,p.subdigest,m.signature))])},this.loadPresignedConfiguration=async function(i){const{wallet:a,fromImageHash:o,longestPath:c}=i,l=await s.configOfImageHash({imageHash:o});if(!l||!Xn.config.ConfigCoder.isWalletConfig(l))return[];const u=Xn.config.signersOf(l.tree).map(I=>I.address),f=await Promise.all(u.map(I=>s.store.loadSubdigestsOfSigner(I))),d=[...new Set(f.flat())],g=(await Promise.all([...new Set(d)].map(async function(I){return V0({},await s.payloadOfSubdigest({subdigest:I}),{subdigest:I})}))).filter(I=>(I==null?void 0:I.message)&&(I==null?void 0:I.address)&&I.address===a).map(I=>({payload:I,nextImageHash:Xn.chained.decodeMessageSetImageHash(I.message)})).filter(I=>I==null?void 0:I.nextImageHash);let m;const A=(await Promise.all(g.map(async function({nextImageHash:I,payload:B}){const D=await s.configOfImageHash({imageHash:I});if(!D||!Xn.config.isWalletConfig(D))return;const V=BigInt(D.checkpoint);return{nextConfig:D,nextCheckpoint:V,nextImageHash:I,payload:B}}))).filter(I=>I!==void 0).filter(I=>I.nextCheckpoint>BigInt(l.checkpoint)).sort((I,B)=>I.nextCheckpoint>B.nextCheckpoint?c?1:-1:c?-1:1);for(const I of A){const{nextConfig:B,nextCheckpoint:D,nextImageHash:V,payload:O}=I;if(m){const ie=m.checkpoint;if(c){if(D>=ie)continue}else if(D<=ie)continue}const U=new Map((await Promise.all(u.map(async function(ie){const G=await s.store.loadSignatureOfSubdigest(ie,O.subdigest);if(!G)return[ie,void 0];const R=Ke(s.useEIP5719?await s.cachedEIP5719.runByEIP5719(ie,O.subdigest,G):G),k=Mt.signer.tryRecoverSigner(O.subdigest,R)!==ie;return[ie,{isDynamic:k,signature:R}]}))).filter(ie=>!!ie[1]));if(U.size===0)continue;const Q=Xn.signature.SignatureCoder.encodeSigners(l,U,[],0);Q.weight<BigInt(l.threshold)||(m={nextImageHash:V,checkpoint:BigInt(B.checkpoint),signature:Q.encoded})}if(!m)return[];const S=await s.loadPresignedConfiguration({wallet:a,fromImageHash:m.nextImageHash,longestPath:c});return[{wallet:a,nextImageHash:m.nextImageHash,signature:m.signature},...S]},this.saveWitnesses=async function(i){const a={digest:i.digest,address:i.wallet,chainId:i.chainId},o=Mt.signature.subdigestOf(a);await Promise.all([s.savePayload({payload:a}),...i.signatures.filter(c=>Mt.signer.canRecover(c)).map(c=>{const l=Mt.signer.recoverSigner(o,c);return s.store.saveSignatureOfSubdigest(l,o,c)})])},this.walletsOfSigner=async function(i){const a=await s.store.loadSubdigestsOfSigner(i.signer),o=await Promise.all(a.map(l=>s.payloadOfSubdigest({subdigest:l}))).then(l=>l.filter(u=>u!==void 0)),c=[];for(const l of o){const u=l.address;if(c.find(p=>p.wallet===u))continue;const f=Mt.signature.subdigestOf(l),d=await s.store.loadSignatureOfSubdigest(i.signer,f);d&&c.push({wallet:u,proof:{digest:l.digest,chainId:BigInt(l.chainId),signature:Ke(d)}})}return c},this.cachedEIP5719=new oIe(e)}async saveMigration(e,n,r){const s=n.fromVersion;if(s!==1)throw new Error("Migration not supported");if(!Xn.config.isWalletConfig(n.toConfig))throw new Error("Invalid to config");const{newImageHash:i,address:a}=qyt.v1v2.decodeTransaction(n.tx,r);if(a!==e)throw new Error("Invalid migration transaction - address");if(Xn.config.ConfigCoder.imageHashOf(n.toConfig)!=i)throw new Error("Invalid migration transaction - config");const o=Mt.transaction.packMetaTransactionsData(n.tx.nonce,n.tx.transactions),c=yr(o),l={chainId:n.tx.chainId,message:o,address:e,digest:c},u=Mt.signature.subdigestOf(l),f=this.savePayload({payload:l}),d=this.saveWalletConfig({config:n.toConfig}),p=Bv.signature.SignatureCoder.decode(n.tx.signature),g=await Bv.signature.SignatureCoder.recover(p,l,this.provider),m=Bv.signature.SignatureCoder.signaturesOf(g.config);await Promise.all([f,d,this.saveWalletConfig({config:g.config}),this.store.saveMigrationsSubdigest(e,s,s+1,u,i),...m.map(v=>this.store.saveSignatureOfSubdigest(v.address,g.subdigest,v.signature))])}async getMigration(e,n,r,s){var i=this;const[a,o]=await Promise.all([this.configOfImageHash({imageHash:n}),this.store.loadMigrationsSubdigest(e,r,r+1)]),c=tc.coderFor(r);return!a||!c.config.isWalletConfig(a)?void 0:(await Promise.all(o.map(async function(u){const{subdigest:f,toImageHash:d}=u,p=await i.payloadOfSubdigest({subdigest:f});if(!p||!p.message||BigInt(s)!==BigInt(p.chainId))return;const g=c.config.signersOf(a).map(I=>I.address),m=new Map((await Promise.all(g.map(async function(I){const B=await i.store.loadSignatureOfSubdigest(I,f);if(!B)return[I,void 0];const D=Ke(i.useEIP5719?await i.cachedEIP5719.runByEIP5719(I,f,B):B),V=Mt.signer.tryRecoverSigner(f,D)!==I;return[I,{isDynamic:V,signature:D}]}))).filter(I=>!!I[1])),v=c.signature.encodeSigners(a,m,[],s);if(!v||v.weight<BigInt(a.threshold))return;const[A,S]=Mt.transaction.unpackMetaTransactionsData(p.message);return{tx:{entrypoint:e,transactions:Mt.transaction.fromTxAbiEncode(S),chainId:s,nonce:A,signature:v.encoded,intent:{id:f,wallet:e}},toConfig:await i.configOfImageHash({imageHash:d}),fromVersion:r,toVersion:r+1}})).then(u=>u.filter(f=>f!==void 0)))[0]}updateProvider(e){this.provider=e}}var Hwt=Object.freeze({__proto__:null,LocalConfigTracker:Nte});const qwt="Webrpc",Kwt="webrpc@v0.22.1;gen-typescript@v0.16.2;sessions@v0.0.1";let hq=function(t){return t.EIP712="EIP712",t.EthSign="EthSign",t.EIP1271="EIP1271",t}({});class Gwt{constructor(e,n){this.hostname=void 0,this.fetch=void 0,this.path="/rpc/Sessions/",this.ping=(r,s)=>this.fetch(this.url("Ping"),Xu({},r,s)).then(i=>ef(i).then(a=>({})),i=>{throw bc.new({cause:`fetch(): ${i.message||""}`})}),this.config=(r,s,i)=>this.fetch(this.url("Config"),Xu(r,s,i)).then(a=>ef(a).then(o=>({version:o.version,config:o.config})),a=>{throw bc.new({cause:`fetch(): ${a.message||""}`})}),this.wallets=(r,s,i)=>this.fetch(this.url("Wallets"),Xu(r,s,i)).then(a=>ef(a).then(o=>({wallets:o.wallets,cursor:o.cursor})),a=>{throw bc.new({cause:`fetch(): ${a.message||""}`})}),this.deployHash=(r,s,i)=>this.fetch(this.url("DeployHash"),Xu(r,s,i)).then(a=>ef(a).then(o=>({deployHash:o.deployHash,context:o.context})),a=>{throw bc.new({cause:`fetch(): ${a.message||""}`})}),this.configUpdates=(r,s,i)=>this.fetch(this.url("ConfigUpdates"),Xu(r,s,i)).then(a=>ef(a).then(o=>({updates:o.updates})),a=>{throw bc.new({cause:`fetch(): ${a.message||""}`})}),this.migrations=(r,s,i)=>this.fetch(this.url("Migrations"),Xu(r,s,i)).then(a=>ef(a).then(o=>({migrations:o.migrations})),a=>{throw bc.new({cause:`fetch(): ${a.message||""}`})}),this.saveConfig=(r,s,i)=>this.fetch(this.url("SaveConfig"),Xu(r,s,i)).then(a=>ef(a).then(o=>({})),a=>{throw bc.new({cause:`fetch(): ${a.message||""}`})}),this.saveWallet=(r,s,i)=>this.fetch(this.url("SaveWallet"),Xu(r,s,i)).then(a=>ef(a).then(o=>({})),a=>{throw bc.new({cause:`fetch(): ${a.message||""}`})}),this.saveSignature=(r,s,i)=>this.fetch(this.url("SaveSignature"),Xu(r,s,i)).then(a=>ef(a).then(o=>({})),a=>{throw bc.new({cause:`fetch(): ${a.message||""}`})}),this.saveSignerSignatures=(r,s,i)=>this.fetch(this.url("SaveSignerSignatures"),Xu(r,s,i)).then(a=>ef(a).then(o=>({})),a=>{throw bc.new({cause:`fetch(): ${a.message||""}`})}),this.saveSignerSignatures2=(r,s,i)=>this.fetch(this.url("SaveSignerSignatures2"),Xu(r,s,i)).then(a=>ef(a).then(o=>({})),a=>{throw bc.new({cause:`fetch(): ${a.message||""}`})}),this.saveMigration=(r,s,i)=>this.fetch(this.url("SaveMigration"),Xu(r,s,i)).then(a=>ef(a).then(o=>({})),a=>{throw bc.new({cause:`fetch(): ${a.message||""}`})}),this.hostname=e.replace(/\/*$/,""),this.fetch=(r,s)=>n(r,s)}url(e){return this.hostname+this.path+e}}const Xu=(t={},e={},n=null)=>{const r=V0({},e,{"Content-Type":"application/json"});return r[qwt]=Kwt,{method:"POST",headers:r,body:JSON.stringify(t||{}),signal:n}},ef=t=>t.text().then(e=>{let n;try{n=JSON.parse(e)}catch(r){let s="";throw r instanceof Error&&(s=r.message),lF.new({status:t.status,cause:`JSON.parse(): ${s}: response text: ${e}`})}if(!t.ok){const r=typeof n.code=="number"?n.code:0;throw(Wwt[r]||fc).new(n)}return n});class fc extends Error{constructor(e,n,r,s,i){super(r),this.name=void 0,this.code=void 0,this.message=void 0,this.status=void 0,this.cause=void 0,this.msg=void 0,this.name=e||"WebrpcError",this.code=typeof n=="number"?n:0,this.message=r||`endpoint error ${this.code}`,this.msg=this.message,this.status=typeof s=="number"?s:0,this.cause=i,Object.setPrototypeOf(this,fc.prototype)}static new(e){return new this(e.error,e.code,e.message||e.msg,e.status,e.cause)}}class kte extends fc{constructor(e="WebrpcEndpoint",n=0,r="endpoint error",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,kte.prototype)}}class bc extends fc{constructor(e="WebrpcRequestFailed",n=-1,r="request failed",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,bc.prototype)}}class Pte extends fc{constructor(e="WebrpcBadRoute",n=-2,r="bad route",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,Pte.prototype)}}class Ote extends fc{constructor(e="WebrpcBadMethod",n=-3,r="bad method",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,Ote.prototype)}}class Rte extends fc{constructor(e="WebrpcBadRequest",n=-4,r="bad request",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,Rte.prototype)}}class lF extends fc{constructor(e="WebrpcBadResponse",n=-5,r="bad response",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,lF.prototype)}}class _te extends fc{constructor(e="WebrpcServerPanic",n=-6,r="server panic",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,_te.prototype)}}class Bte extends fc{constructor(e="WebrpcInternalError",n=-7,r="internal error",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,Bte.prototype)}}class Mte extends fc{constructor(e="WebrpcClientDisconnected",n=-8,r="client disconnected",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,Mte.prototype)}}class Dte extends fc{constructor(e="WebrpcStreamLost",n=-9,r="stream lost",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,Dte.prototype)}}class Lte extends fc{constructor(e="WebrpcStreamFinished",n=-10,r="stream finished",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,Lte.prototype)}}class Ute extends fc{constructor(e="InvalidArgument",n=1,r="invalid argument",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,Ute.prototype)}}class Fte extends fc{constructor(e="NotFound",n=2,r="not found",s=0,i){super(e,n,r,s,i),Object.setPrototypeOf(this,Fte.prototype)}}const Wwt={0:kte,[-1]:bc,[-2]:Pte,[-3]:Ote,[-4]:Rte,[-5]:lF,[-6]:_te,[-7]:Bte,[-8]:Mte,[-9]:Dte,[-10]:Lte,1:Ute,2:Fte};class zwt{constructor(e,n=!0){this.onlyRecoverable=n,this.sessions=void 0,this.sessions=new Gwt(e,fetch)}async loadPresignedConfiguration(e){try{const{updates:n}=await this.sessions.configUpdates({wallet:e.wallet,fromImageHash:e.fromImageHash,allUpdates:e.longestPath});return n.map(({toImageHash:r,signature:s})=>({wallet:e.wallet,nextImageHash:r,signature:s}))}catch(n){if(pq(n))return[];throw n}}async savePresignedConfiguration(e){const n=e.nextConfig,r=tc.genericCoderFor(n.version).config.imageHashOf(n),s=Xn.signature.setImageHashStruct(r),i=yr(s);await this.sessions.saveSignature({wallet:e.wallet,digest:i,chainID:"0",signature:e.signature,toConfig:nR(n),referenceChainID:e.referenceChainId!==void 0?BigInt(e.referenceChainId).toString():void 0})}async saveWitnesses(e){let n=e.signatures;this.onlyRecoverable&&(n=n.filter(r=>Mt.signer.canRecover(r))),await this.sessions.saveSignerSignatures({wallet:e.wallet,digest:e.digest,chainID:d3(e.chainId),signatures:n})}async configOfImageHash(e){try{const{version:n,config:r}=await this.sessions.config(e);return Jwt(n,r)}catch(n){if(pq(n))return;throw n}}async saveWalletConfig(e){const n=nR(e.config);await this.sessions.saveConfig({version:e.config.version,config:n})}async imageHashOfCounterfactualWallet(e){try{const{deployHash:n,context:r}=await this.sessions.deployHash(e);return{imageHash:n,context:r}}catch(n){if(pq(n))return;throw n}}async saveCounterfactualWallet(e){const n=nR(e.config);await this.sessions.saveWallet({version:e.config.version,deployConfig:n})}async walletsOfSigner(e){const{wallets:n}=await this.sessions.wallets(e);return Object.entries(n).map(([r,{digest:s,chainID:i,type:a,signature:o}])=>{switch(a){case hq.EIP712:o+=Mf(Mt.signer.SigType.EIP712).slice(2);break;case hq.EthSign:o+=Mf(Mt.signer.SigType.ETH_SIGN).slice(2);break;case hq.EIP1271:o+=Mf(Mt.signer.SigType.WALLET_BYTES32).slice(2);break}return{wallet:r,proof:{digest:s,signature:o,chainId:BigInt(i)}}})}async getMigration(e,n,r,s){var i=this;const a=d3(s),{migrations:o}=await this.sessions.migrations({wallet:e,fromVersion:r,fromImageHash:n,chainID:a}),c=async function(f){const d=o[f];if(d){const p=Object.keys(d).map(Number).sort((g,m)=>m-g);for(const g of p)for(const[m,v]of Object.entries(d[g]))try{const A=await i.configOfImageHash({imageHash:m});if(A)return{fromVersion:r,toVersion:g,toConfig:A,tx:{entrypoint:v.executor,transactions:v.transactions,nonce:v.nonce,signature:v.signature,chainId:f,intent:{id:Mt.transaction.subdigestOfTransactions(e,f,v.nonce,v.transactions),wallet:e}}}}catch(A){console.error(A)}}},l=await c(a);if(l)return l;for(const u in o)if(u!==a){const f=await c(u);if(f)return f}}async saveMigration(e,n,r){await this.sessions.saveMigration({wallet:e,fromVersion:n.fromVersion,toVersion:n.toVersion,toConfig:nR(n.toConfig),executor:n.tx.entrypoint,transactions:n.tx.transactions.map(Ywt),nonce:d3(n.tx.nonce),signature:n.tx.signature,chainID:d3(n.tx.chainId)})}}function nR(t){switch(t.version){case 1:if(Bv.config.ConfigCoder.isWalletConfig(t))return{threshold:sx(t.threshold),signers:t.signers.map(({weight:e,address:n})=>({weight:sx(e),address:n}))};throw new Error(`not a v${t.version} config: ${t}`);case 2:if(Xn.config.ConfigCoder.isWalletConfig(t))return{threshold:sx(t.threshold),checkpoint:sx(t.checkpoint),tree:H_(t.tree)};throw new Error(`not a v${t.version} config: ${t}`);default:throw new Error(`unknown version ${t.version}`)}}function H_(t){return Xn.config.isNode(t)?{left:H_(t.left),right:H_(t.right)}:Xn.config.isSignerLeaf(t)?{weight:sx(t.weight),address:t.address}:Xn.config.isNestedLeaf(t)?{weight:sx(t.weight),threshold:sx(t.threshold),tree:H_(t.tree)}:Xn.config.isNodeLeaf(t)?{node:t.nodeHash}:V0({},t)}function Jwt(t,e){switch(t){case 1:return V0({},e,{version:t});case 2:return V0({},e,{version:t,tree:q_(e.tree)});default:throw new Error(`unknown version ${t}`)}}function q_(t){switch(typeof t){case"object":const e=V0({},t);return e.left!==void 0&&(e.left=q_(e.left)),e.right!==void 0&&(e.right=q_(e.right)),e.tree!==void 0&&(e.tree=q_(e.tree)),e.node!==void 0&&(e.nodeHash=e.node,delete e.node),e;default:throw new Error(`v2 config tree ${t} is not an object`)}}function Ywt(t){return{to:t.to,value:t.value!==void 0?d3(t.value):void 0,data:t.data!==void 0?Ke(t.data):void 0,gasLimit:t.gasLimit!==void 0?d3(t.gasLimit):void 0,delegateCall:t.delegateCall,revertOnError:t.revertOnError}}function sx(t){return Number(t)}function d3(t){return BigInt(t).toString()}function pq(t){return typeof t=="object"&&t.status===404}var Qwt=Object.freeze({__proto__:null,RemoteConfigTracker:zwt});function FJ(t,e,n){return new Promise(r=>{let s=0;t.forEach(i=>i.then(a=>{n(a)?r(a):(s++,s===t.length&&r(e))}).catch(()=>{s++,s===t.length&&r(e)}))})}async function PT(t,e){return Promise.all(t.map(n=>n.catch(()=>e)))}class Zwt{constructor(e){this.trackers=e}async configOfImageHash(e){const n=this.trackers.map(async function(o,c){return{res:await o.configOfImageHash(e),i:c}}),r=await FJ(n,void 0,o=>(o==null?void 0:o.res)===void 0?!1:tc.genericCoderFor(o.res.version).config.isComplete(o.res));if(r!=null&&r.res)return this.saveWalletConfig({config:r.res,skipTracker:r.i}),r.res;const s=new Nte(void 0),i=await PT(n,void 0);for(const o of i)o!=null&&o.res&&await s.saveWalletConfig({config:o.res});const a=await s.configOfImageHash(e);return a&&this.saveWalletConfig({config:a}),a}async saveWalletConfig(e){await Promise.all(this.trackers.map((n,r)=>{if(r!==e.skipTracker)return n.saveWalletConfig(e)}))}async imageHashOfCounterfactualWallet(e){const n=await FJ(this.trackers.map(r=>r.imageHashOfCounterfactualWallet(e)),void 0,r=>!!r);return n&&this.configOfImageHash({imageHash:n.imageHash}).then(r=>{r&&this.saveCounterfactualWallet({config:r,context:[n.context]})}),n}async saveCounterfactualWallet(e){await Promise.all(this.trackers.map((n,r)=>{if(r!==e.skipTracker)return n.saveCounterfactualWallet(e)}))}async walletsOfSigner(e){const n=await PT(this.trackers.map(a=>a.walletsOfSigner(e)),[]).then(a=>a.flat()),r={};for(const a of n)r[a.wallet]=a.proof;const s=Object.keys(r).map(a=>({wallet:a,proof:r[a]})),i=new Map;return s.forEach(({wallet:a,proof:{digest:o,chainId:c,signature:l}})=>{const u=`${a}-${o}-${c}`;let f=i.get(u);f||(f={wallet:a,digest:o,chainId:c,signatures:[]},i.set(u,f)),f.signatures.push(l)}),i.forEach(a=>this.saveWitnesses(a)),s}async saveWitnesses(e){await Promise.all(this.trackers.map(n=>n.saveWitnesses(e)))}async loadPresignedConfiguration(e){var n=this;const r=await PT(this.trackers.map(c=>c.loadPresignedConfiguration(e)),[]),i=(await PT(r.map(async function(c){const l=c[c.length-1],u=await n.configOfImageHash({imageHash:l.nextImageHash});if(u)return{checkpoint:tc.genericCoderFor(u.version).config.checkpointOf(u),result:c}}),void 0)).reduce((c,l)=>l&&(!c||l.checkpoint>c.checkpoint)?l:c);if(!i)return[];const a=new Map,o=c=>(a.has(c)||a.set(c,this.configOfImageHash({imageHash:c})),a.get(c));return i.result.forEach(async function(c){const l=await o(c.nextImageHash);l&&n.savePresignedConfiguration({wallet:e.wallet,nextConfig:l,signature:c.signature})}),i.result}async savePresignedConfiguration(e){await Promise.all(this.trackers.map(n=>n.savePresignedConfiguration(e)))}async getMigration(e,n,r,s){return(await Promise.all(this.trackers.map(a=>a.getMigration(e,n,r,s)))).find(a=>!!a)}async saveMigration(e,n,r){await Promise.all(this.trackers.map(s=>s.saveMigration(e,n,r)))}}class Xwt{constructor(e,n,r){this.tracker=e,this.cache=n,this.contexts=r}async loadPresignedConfiguration(e){var n=this;const r=[this.tracker.loadPresignedConfiguration(e),this.cache.loadPresignedConfiguration(e)];let s;const[i,a]=await Promise.all(r);if(i.length>0&&a.length>0&&i[i.length-1].nextImageHash===a[a.length-1].nextImageHash)s=e.longestPath===!0?i.length>a.length?i:a:i.length<a.length?i:a;else{var o,c;s=(o=(c=(await Promise.all(r.map(async function(u){const f=await u,d=f[f.length-1];if(!d)return;const p=await n.configOfImageHash({imageHash:d.nextImageHash});if(p)return{checkpoint:tc.genericCoderFor(p.version).config.checkpointOf(p),result:f}}))).reduce((u,f)=>f&&(!u||f.checkpoint>u.checkpoint)?f:u))==null?void 0:c.result)!=null?o:[]}return s||[]}async savePresignedConfiguration(e){await Promise.all([this.tracker.savePresignedConfiguration(e),this.cache.savePresignedConfiguration(e)])}async configOfImageHash(e){if(e.noCache!==!0){const r=await this.cache.configOfImageHash(e);if(r)return r}const n=await this.tracker.configOfImageHash(e);return n&&await this.cache.saveWalletConfig({config:n}),n}async saveWalletConfig(e){await Promise.all([this.tracker.saveWalletConfig(e),this.cache.saveWalletConfig(e)])}async imageHashOfCounterfactualWallet(e){if(e.noCache!==!0){const r=await this.cache.imageHashOfCounterfactualWallet(e);if(r)return r}const n=await this.tracker.imageHashOfCounterfactualWallet(e);if(n){const r=await this.configOfImageHash({imageHash:n.imageHash});r&&await this.cache.saveCounterfactualWallet({config:r,context:[n.context]})}return n}async saveCounterfactualWallet(e){await Promise.all([this.tracker.saveCounterfactualWallet(e),this.cache.saveCounterfactualWallet(e)])}async walletsOfSigner(e){if(e.noCache)return this.tracker.walletsOfSigner(e);const n=await Promise.all([this.tracker.walletsOfSigner(e),this.cache.walletsOfSigner(e)]),r=new Map;for(const s of n)for(const i of s)r.set(i.wallet,i);return Array.from(r.values())}async saveWitnesses(e){await Promise.all([this.tracker.saveWitnesses(e),this.cache.saveWitnesses(e)])}async getMigration(e,n,r,s){const i=await this.cache.getMigration(e,n,r,s);if(i)return i;const a=await this.tracker.getMigration(e,n,r,s);return a&&await this.cache.saveMigration(e,a,this.contexts),a}async saveMigration(e,n,r){await Promise.all([this.tracker.saveMigration(e,n,r),this.cache.saveMigration(e,n,r)])}}class Ffe{constructor(){this.cache=void 0,this.cache=new Map}do(e,n,r,...s){e=`${e}:${Tl(JSON.stringify(s,ebt))}`;let i=this.cache.get(e);if(i&&i.expiration&&new Date>=i.expiration&&(i=void 0,this.cache.delete(e)),!i){const a={promise:r(...s)};n!==void 0&&(a.promise=a.promise.then(o=>(a.expiration=new Date(Date.now()+n),o))),i=a,this.cache.set(e,i)}return i.promise}}function ebt(t,e){return typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.fromEntries(Object.entries(e).sort()):typeof e=="bigint"?e.toString():e}function tbt(t){return t instanceof pIe}class pIe{constructor(e,n=50,r=!1){this.tracker=e,this.window=n,this.verbose=r,this.cache=new Ffe}invalidateCache(){this.cache=new Ffe}configOfImageHash(e){return this.cache.do("configOfImageHash",this.window,n=>this.tracker.configOfImageHash(n),e)}getMigration(e,n,r,s){return this.cache.do("getMigration",this.window,(...i)=>this.tracker.getMigration(...i),e,n,r,s)}saveMigration(e,n,r){return this.cache.do("saveMigration",void 0,(...s)=>this.tracker.saveMigration(...s),e,n,r)}loadPresignedConfiguration(e){return this.cache.do("loadPresignedConfiguration",this.window,n=>this.tracker.loadPresignedConfiguration(n),e)}savePresignedConfiguration(e){return this.cache.do("savePresignedConfiguration",void 0,n=>this.tracker.savePresignedConfiguration(n),e)}saveWitnesses(e){return this.cache.do("saveWitnesses",void 0,n=>this.tracker.saveWitnesses(n),e)}saveWalletConfig(e){return this.cache.do("saveWalletConfig",void 0,n=>this.tracker.saveWalletConfig(n),e)}imageHashOfCounterfactualWallet(e){return this.cache.do("imageHashOfCounterfactualWallet",void 0,n=>this.tracker.imageHashOfCounterfactualWallet(n),e)}saveCounterfactualWallet(e){return this.cache.do("saveCounterfactualWallet",void 0,n=>this.tracker.saveCounterfactualWallet(n),e)}walletsOfSigner(e){return this.cache.do("walletsOfSigner",this.window,n=>this.tracker.walletsOfSigner(n),e)}updateProvider(e){this.tracker instanceof Nte&&this.tracker.updateProvider(e)}}var Vte=Object.freeze({__proto__:null,arweave:Uwt,debug:Vwt,local:Hwt,remote:Qwt,stores:jwt,raceUntil:FJ,allSafe:PT,MultipleTracker:Zwt,CachedTracker:Xwt,isDedupedTracker:tbt,DedupedTracker:pIe});const nbt=60*60*24*7,rbt=async(t,e,n)=>{const r=Fn(await t.getAddress());if(!r||r===""||r==="0x")throw sbt;const s=new _8e;if(s.address=r,!n||!n.app||n.app==="")throw new gIe("authorization options requires app to be set");s.claims.app=n.app,s.claims.ogn=n.origin,s.claims.n=n.nonce,s.setExpiryIn(n.expiry?Math.max(n.expiry,200):nbt);const i=s.messageTypedData(),a=Ryt(e);s.signature=await(t instanceof i9?t.signTypedData(i.domain,i.types,i.message,a,"eip6492"):t.signTypedData(i.domain,i.types,i.message,a));const c=await new Vyt().encodeProof(s,!0);return{typedData:i,proofString:c}};class gIe extends Error{constructor(e){super(e),this.name="AuthError"}}const sbt=new gIe("auth error: account address is empty");Mt.context.defaultContexts,new Vte.remote.RemoteConfigTracker("https://sessions.sequence.app");const ibt=new Map(["addHook(bytes4,address)","clearExtraImageHashes(bytes32[])","removeHook(bytes4)","setExtraImageHash(bytes32,uint256)","updateIPFSRoot(bytes32)","updateImageHash(bytes32)","updateImageHashAndIPFS(bytes32,bytes32)","updateImplementation(address)"].map(t=>[Tl(t).slice(0,10),t]));function VJ(t,e){const n=Mt.transaction.fromTransactionish(t,e);Mt.transaction.unwind(t,n).forEach(s=>abt(t,s))}function abt(t,e){if(e.to.toLowerCase()===t.toLowerCase()&&e.data){const n=et(e.data);if(n.length>=4&&!obt(n))throw new Error("self calls are forbidden")}if(e.delegateCall)throw new Error("delegate calls are forbidden");if(e.data){const r=Ke(e.data).slice(0,10),s=ibt.get(r);if(s){const i=s.slice(0,s.indexOf("("));throw new Error(`${i} calls are forbidden`)}}}function obt(t){const e=new Ya(qa.mainModule.abi);try{return e.decodeFunctionData("createContract",t),!0}catch{return!1}}function Md(){return Md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Md.apply(null,arguments)}class cbt extends Error{constructor(e){super(e),this.name="ProviderError"}}const lbt=new cbt("Wallet is not signed in. Connect a wallet and try again.");function ubt(t){return fbt.some(e=>e.predicate(t))}const fbt=[{name:"Decentraland Exception",predicate:hbt},{name:"0x v3 Exception",predicate:pbt}],dbt=/^Decentraland Login\nEphemeral address: 0x[a-fA-F0-9]{40}\nExpiration: (\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)((-(\d{2}):(\d{2})|Z)?)$/;function hbt(t){try{const e=I2(t);return dbt.test(e)}catch{return!1}}function pbt(t){const e=new Ya(gbt);try{return e.decodeFunctionData("OrderWithHash",t),!0}catch{return!1}}const gbt=[{inputs:[{components:[{internalType:"address",name:"makerAddress",type:"address"},{internalType:"address",name:"takerAddress",type:"address"},{internalType:"address",name:"feeRecipientAddress",type:"address"},{internalType:"address",name:"senderAddress",type:"address"},{internalType:"uint256",name:"makerAssetAmount",type:"uint256"},{internalType:"uint256",name:"takerAssetAmount",type:"uint256"},{internalType:"uint256",name:"makerFee",type:"uint256"},{internalType:"uint256",name:"takerFee",type:"uint256"},{internalType:"uint256",name:"expirationTimeSeconds",type:"uint256"},{internalType:"uint256",name:"salt",type:"uint256"},{internalType:"bytes",name:"makerAssetData",type:"bytes"},{internalType:"bytes",name:"takerAssetData",type:"bytes"},{internalType:"bytes",name:"makerFeeAssetData",type:"bytes"},{internalType:"bytes",name:"takerFeeAssetData",type:"bytes"}],internalType:"struct IEIP1271Data.Order",name:"order",type:"tuple"},{internalType:"bytes32",name:"orderHash",type:"bytes32"}],name:"OrderWithHash",outputs:[],stateMutability:"pure",type:"function"}],K_=aa(`Ethereum Signed Message:
`),mbt=t=>zg(t)?et(t):aa(t),mIe=t=>{const e=mbt(t);return ubt(e)?e:et(Qr([K_,aa(String(e.length)),e]))},ybt=t=>{if(JSON.stringify(t.slice(0,K_.length))!==JSON.stringify(K_))return t;const e=t.slice(K_.length),n=String(e.length).length;let r,s;try{s=Number(I2(e.slice(0,n)))}catch{s=Number(Ke(e.slice(0,n)))}return s>e.length||!Number.isInteger(s)?r=n-1:r=n,e.slice(r)},Vfe=async(t,e,n,r)=>new Mt.reader.OnChainReader(r).isValidSignature(t,e,n);async function wbt(t){return Array.isArray(t)?Promise.all(t.map(e=>Xi(e))):Xi(t)}function bbt(t){return[t,...t.auxiliary||[]]}const vbt=1e4;class xbt{constructor(e,n,r){var s=this;this.account=void 0,this.signerReadyCallbacks=[],this.prompter=void 0,this.networks=void 0,this._openIntent=void 0,this._connectOptions=void 0,this.events=new Ayt.EventEmitter2,this.onConnectOptionsChange=void 0,this.promptConnect=async function(i){if(!i&&!s._connectOptions)throw new Error("prompter connect options are empty");if(!s.prompter)return s.connect(i);const a=await s.prompter.promptConnect(i||s._connectOptions).catch(c=>({connected:!1})),o=a;return o.connected&&!o.session&&(o.session=await s.walletSession(i==null?void 0:i.networkId)),a},this.isSignedIn=async function(){return await s.signerReady(),!!s.account},this.getAccount=async function(){if(await s.signerReady(),s.account===void 0)throw new Error("signerReady failed resolve");return s.account},this.account=e,this.prompter=n,this.networks=r}defaultChainId(){var e,n;return(e=(n=this.prompter)==null?void 0:n.getDefaultChainId())!=null?e:this.networks[0].chainId}async signIn(e,n={}){this.setAccount(e);const{connect:r,defaultNetworkId:s}=n;if(r){const o=this._connectOptions;let c;if(this.prompter!==null){var i;c=await((i=this.prompter)==null?void 0:i.promptSignInConnect(o))}else c=await this.connect(o);this.notifyConnect(c),(!o||o.keepWalletOpened!==!0)&&this.notifyClose()}if(s&&this.defaultChainId()!==s){var a;await((a=this.prompter)==null?void 0:a.promptChangeNetwork(s))}}signOut(){this.account&&this.notifyDisconnect(),this.setAccount(null)}signerReset(){this.account=void 0}signerReady(e=vbt){return new Promise((n,r)=>{this.account!==void 0?n():(setTimeout(()=>{this.account===void 0&&(this.signerReadyCallbacks=[],r("signerReady timed out"))},e),this.signerReadyCallbacks.push(n))})}async connect(e){var n,r;if(!this.account)return{connected:!1,chainId:"0x0",error:"unable to connect without signed in account"};const s=(n=(r=e==null?void 0:e.networkId)!=null?r:this.defaultChainId())!=null?n:ge.MAINNET,i=Oyt(s).chainId,a={connected:!0,chainId:Kd(i)};if(e&&e.authorize){const o={app:e.app,origin:e.origin,expiry:e.expiry,nonce:e.authorizeNonce};try{a.proof=await rbt(this.account,i,o)}catch(c){return ya.warn(`connect, signAuthorization failed for options: ${JSON.stringify(e)}, due to: ${c.message}`),{connected:!1,chainId:"0x0",error:`signAuthorization failed: ${c.message}`}}}return a.session=this.walletSession(i),a}async sendMessageRequest(e){var n;const s=Number(((n=e.clientVersion)==null?void 0:n.split(".")[0])||"0")<2,i={id:e.data.id,jsonrpc:"2.0",result:null,error:void 0};try{const a=await this.request({method:e.data.method,params:e.data.params,chainId:e.chainId,origin:e.origin,projectAccessKey:e.projectAccessKey});return Md({},e,{data:s?Md({},i,{result:a}):a})}catch(a){return Md({},e,{data:s?Md({},i,{error:a}):{error:a}})}}async request(e){await this.getAccount();try{var n,r;if((!this.account||this.account===null)&&!Ebt.includes(e.method))throw lbt;const l=this.account;if(!l)throw new Error("WalletRequestHandler: wallet account is not configured");const u=(n=this.account)==null?void 0:n.providerFor((r=e.chainId)!=null?r:this.defaultChainId());if(!u)throw new Error(`WalletRequestHandler: wallet provider is not configured for chainId ${e.chainId}`);const f=Abt(u)?u:void 0;switch(e.method){case"net_version":{if(!f)throw new Error("Account provider doesn't support send method");return await f.send("net_version",[])}case"eth_chainId":{if(!f)throw new Error("Account provider doesn't support send method");return await f.send("eth_chainId",[])}case"eth_accounts":return[l.address];case"eth_getBalance":{const[d,p]=e.params,g=await u.getBalance(d,p);return J3(g)}case"sequence_sign":case"personal_sign":case"eth_sign":{let d;switch(e.method){case"sequence_sign":case"personal_sign":{const[v,A]=e.params;d=v;break}case"eth_sign":{const[v,A]=e.params;d=A;break}}let p="";const g=mIe(d),m=e.method==="sequence_sign";if(this.prompter===null){var s;p=await l.signMessage(g,(s=e.chainId)!=null?s:this.defaultChainId(),m?"eip6492":"ignore")}else p=await this.prompter.promptSignMessage({chainId:e.chainId,message:et(g),eip6492:m},e.origin,e.projectAccessKey);if(p&&p.length>0)return p;throw new Error("declined by user")}case"sequence_signTypedData_v4":case"eth_signTypedData":case"eth_signTypedData_v4":{const[d,p]=e.params;let g;if(typeof p=="string")try{g=JSON.parse(p)}catch(A){console.warn("walletRequestHandler: error parsing typedData",A)}else g=p;if(!g||!g.domain||!g.types||!g.message)throw new Error("invalid typedData object");let m="";const v=e.method==="sequence_signTypedData_v4";if(this.prompter===null){var i;m=await l.signTypedData(g.domain,g.types,g.message,(i=e.chainId)!=null?i:this.defaultChainId(),v?"eip6492":"ignore")}else m=await this.prompter.promptSignMessage({chainId:e.chainId,typedData:g,eip6492:v},e.origin,e.projectAccessKey);if(m&&m.length>0)return m;throw new Error("declined by user")}case"eth_sendTransaction":{const d=bbt(e.params[0]).map(g=>("gas"in g&&g.gasLimit===void 0&&(g.gasLimit=g.gas,delete g.gas),g));VJ(l.address,d);let p="";if(this.prompter===null){var a,o;const g=await l.sendTransaction(d,(a=e.chainId)!=null?a:this.defaultChainId());p=(o=g==null?void 0:g.hash)!=null?o:""}else p=await this.prompter.promptSendTransaction(d,e.chainId,e.origin,e.projectAccessKey);if(p)return p;throw new Error("declined by user")}case"eth_signTransaction":{const[d]=e.params;if(Fn(d.from)!==l.address)throw new Error("sender address does not match wallet");if(VJ(l.address,d),this.prompter===null){var c;return await l.signTransactions(d,(c=e.chainId)!=null?c:this.defaultChainId())}else return await this.prompter.promptSignTransaction(d,e.chainId,e.origin,e.projectAccessKey)}case"eth_sendRawTransaction":if(Mt.transaction.isSignedTransactionBundle(e.params[0])){const d=Number(e.params[0].chainId);return(await l.relayer(d).relay(e.params[0])).hash}else return(await u.broadcastTransaction(e.params[0])).hash;case"eth_getTransactionCount":{const d=Fn(e.params[0]),p=e.params[1],g=await u.getTransactionCount(d,p);return J3(BigInt(g))}case"eth_blockNumber":return await u.getBlockNumber();case"eth_getBlockByNumber":return await u.getBlock(e.params[0]);case"eth_getBlockByHash":return await u.getBlock(e.params[0]);case"eth_getTransactionByHash":return await u.getTransaction(e.params[0]);case"eth_call":{const[d,p]=e.params;return await u.call(Md({},d,{blockTag:p}))}case"eth_getCode":{const[d,p]=e.params;return await u.getCode(d,p)}case"eth_estimateGas":{const[d]=e.params;return await u.estimateGas(d)}case"eth_gasPrice":{const d=await u.getFeeData();return d.gasPrice===null?null:J3(d.gasPrice)}case"wallet_switchEthereumChain":{const[d]=e.params;if(!d.chainId||d.chainId.length===0)throw new Error("invalid chainId");const p=BigInt(d.chainId);return this.setDefaultChainId(Number(p)),null}case"sequence_getWalletContext":return l.contexts;case"sequence_getWalletConfig":{const[d]=e.params;return d?[(await l.status(d)).onChain.config]:await Promise.all(l.networks.map(async function(p){return(await l.status(p.chainId)).onChain.config}))}case"sequence_getWalletState":{const[d]=e.params;return d?[$fe(d,await l.status(d))]:await Promise.all(l.networks.map(async function(p){const g=await l.status(p.chainId);return $fe(p.chainId,g)}))}case"sequence_getNetworks":return await this.getNetworks(!0);case"sequence_isSequence":return!0;case"sequence_updateConfig":throw new Error("sequence_updateConfig method is not allowed from a dapp");case"sequence_publishConfig":throw new Error("sequence_publishConfig method is not allowed from a dapp");case"sequence_gasRefundOptions":break;case"sequence_getNonce":break;case"sequence_relay":break;case"sequence_setDefaultNetwork":{const[d]=e.params;if(!d)throw new Error("invalid request, method argument defaultChainId cannot be empty");return this.setDefaultChainId(d),await this.getNetworks(!0)}default:{if(!f)throw new Error("Account provider doesn't support send method");return await f.send(e.method,e.params)}}}catch(l){throw ya.error(l),{message:typeof l=="string"?l:(l==null?void 0:l.message)||"unkown error",code:4001}}}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}async getAddress(){var e,n;return(e=(n=this.account)==null?void 0:n.address)!=null?e:""}get openIntent(){return this._openIntent}setOpenIntent(e){this._openIntent=e}get connectOptions(){return this._connectOptions}setConnectOptions(e){var n;this._connectOptions=e,(n=this.onConnectOptionsChange)==null||n.call(this,e)}async setDefaultChainId(e){var n;return await((n=this.prompter)==null?void 0:n.promptChangeNetwork(e)),this.defaultChainId()}async getNetworks(e){return this.account?e?this.account.networks.map(n=>{const r=Md({},n);return r.provider=void 0,r.relayer=void 0,r}):this.account.networks:(ya.warn("signer not set: getNetworks is returning an empty list"),[])}walletSession(e){if(!this.account)return;const n={walletContext:this.account.contexts,accountAddress:this.account.address,networks:this.account.networks.map(s=>Md({},s,{provider:void 0,relayer:void 0}))};if(e){const s=Kk(n.networks,e);if(s){var r;(r=n.networks)==null||r.forEach(i=>delete i.isDefaultChain),s.isDefaultChain=!0}}return n}notifyConnect(e,n){var r;if(console.log("emit connect",e),this.events.emit("connect",e),(r=e.session)!=null&&r.accountAddress){var s;this.events.emit("accountsChanged",[(s=e.session)==null?void 0:s.accountAddress],n)}}notifyDisconnect(e){this.events.emit("accountsChanged",[],e),this.events.emit("disconnect",void 0,e)}notifyChainChanged(e,n){this.events.emit("chainChanged",Kd(e),n)}async notifyNetworks(e){const n=e||await this.getNetworks(!0);if(this.events.emit("networks",n),n.length>0){const r=n.find(s=>s.chainId===this.defaultChainId());r&&this.events.emit("chainChanged",Kd(r.chainId))}else this.events.emit("chainChanged","0x0")}async notifyWalletContext(){if(!this.account){ya.warn("signer not set: skipping to notify wallet context");return}const e=this.account.contexts;this.events.emit("walletContext",e)}notifyClose(e){this.events.emit("close",e)}setAccount(e){if(this.account=e,e!==void 0){for(let n=0;n<this.signerReadyCallbacks.length;n++)this.signerReadyCallbacks[n]();this.signerReadyCallbacks=[]}}async handleConfirmWalletDeployPrompt(e,n,r,s,i){if(!s)return!0;const a=l=>l.canOnchainValidate||l.original.version===2&&r,o=await n.status(s);if(a(o))return!0;if(await e.promptConfirmWalletDeploy(s,i)){const l=await n.status(s);return a(l)?!0:(ya.error("WalletRequestHandler: result for promptConfirmWalletDeploy is not correct"),!1)}return!1}}function $fe(t,e){return{context:e.original.context,config:e.onChain.config,address:Mt.context.addressOf(e.original.context,e.original.imageHash),chainId:t,deployed:e.onChain.deployed,imageHash:e.imageHash,lastImageHash:e.onChain.imageHash,published:!0,status:e}}const Ebt=["net_version","eth_chainId","eth_getBalance","eth_getTransactionCount","eth_blockNumber","eth_getBlockByNumber","eth_getBlockByHash","eth_getTransactionByHash","eth_getCode","eth_estimateGas","eth_gasPrice","sequence_getWalletContext","sequence_getNetworks","sequence_setDefaultNetwork"];function Abt(t){return t&&typeof t=="object"&&typeof t.send=="function"&&typeof t.getNetwork=="function"}function Sbt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}class uF{get utils(){return this.provider.utils}constructor(e,n){this.client=e,this.provider=n,this.singleNetworkSigners={},this._isSequenceSigner=!0}async getAddress(){return this.client.getAddress()}connect(e){if(!$te.is(e))throw new Error("SequenceSigner can only be connected to a SequenceProvider");return new uF(this.client,e)}getSigner(e){if(!e)return this;const n=this.provider.toChainId(e);return this.singleNetworkSigners[n]||(this.singleNetworkSigners[n]=new yIe(this.client,this.provider,n)),this.singleNetworkSigners[n]}useChainId(e){return this.provider.toChainId(e)||this.client.getChainId()}async signMessage(e,n){const{eip6492:r=!0}=n||{},s=this.useChainId(n==null?void 0:n.chainId);return this.client.signMessage(e,{eip6492:r,chainId:s})}async signTypedData(e,n,r,s){const{eip6492:i=!0}=s||{},a=this.useChainId(s==null?void 0:s.chainId);return this.client.signTypedData({domain:e,types:n,message:r},{eip6492:i,chainId:a})}getProvider(e){return this.provider.getProvider(e)}async sendTransaction(e,n){const r=this.useChainId(n==null?void 0:n.chainId),s=await wbt(e),i=await this.client.sendTransaction(s,{chainId:r}),a=this.getProvider(r);try{return await new Promise(c=>{(async function u(){const f=await a.getTransaction(i);if(f!==null)return c(f);await a.once("block",u)})()})}catch(o){throw o.transactionHash=i,o}}async getWalletConfig(e){const n=this.useChainId(e);return this.client.getOnchainWalletConfig({chainId:n})}getNetworks(){return this.client.getNetworks()}async getBalance(e,n){return this.getProvider(n==null?void 0:n.chainId).getBalance(this.getAddress(),e)}async estimateGas(e,n){return this.getProvider(n==null?void 0:n.chainId).estimateGas(e)}async call(e,n){return this.getProvider(n==null?void 0:n.chainId).call(e)}getChainId(){return Promise.resolve(this.client.getChainId())}async getFeeData(e){return this.getProvider(e==null?void 0:e.chainId).getFeeData()}async resolveName(e){const n=await this.provider.resolveName(e);if(n===null)throw new Error(`ENS name not found: ${e}`);return n}_checkProvider(e){}getNonce(e){throw new Error("SequenceSigner does not support getNonce")}populateCall(e){throw new Error("SequenceSigner does not support populateCall")}populateTransaction(e){throw new Error("SequenceSigner does not support populateTransaction")}checkTransaction(e){throw new Error("SequenceSigner does not support checkTransaction")}getTransactionCount(e){throw new Error("SequenceSigner does not support getTransactionCount")}signTransaction(e){throw new Error("SequenceWallet does not support signTransaction, use sendTransaction instead.")}static is(e){return e&&typeof e=="object"&&e._isSequenceSigner===!0}}class yIe extends uF{constructor(e,n,r){super(e,n.getProvider(r)),this.chainId=r,this._isSingleNetworkSequenceSigner=!0}_useChainId(e){const n=this.provider.toChainId(e);if(n&&n!==this.chainId)throw new Error(`This signer only supports the network ${this.chainId}, but ${n} was requested.`);return n||this.provider.toChainId(this.chainId)}useChainId(e){return this._useChainId(e)}getChainId(){return Promise.resolve(this.provider.toChainId(this.chainId))}getProvider(e){return super.getProvider(this._useChainId(e))}getSigner(e){if(this._useChainId(e)!==this.chainId)throw new Error("Unreachable code");return this}static is(e){return e&&typeof e=="object"&&e._isSingleNetworkSequenceSigner===!0}}class Ibt{constructor(e){if(this.signer=e,yIe.is(e))throw new Error("WalletUtils does not support SingleNetworkSequenceSigner")}signMessage(e,n,r){return this.signer.signMessage(e,{chainId:n,eip6492:r})}signTypedData(e,n,r,s,i){return this.signer.signTypedData(e,n,r,{chainId:s,eip6492:i})}async isValidSignature(e,n,r,s){return Vfe(e,n,r,this.signer.getProvider(s))}async isValidMessageSignature(e,n,r,s){const i=this.signer.getProvider(s),a=mIe(n),o=kmt(a);return Vfe(e,o,r,i)}isValidTypedDataSignature(e,n,r,s){return this.isValidSignature(e,cte(n),r,s)}}const Cbt=["method"],jfe=["connect","disconnect","chainChanged","accountsChanged"];class $te extends E4e{constructor(e,n,r=O8e,s){super(e.getChainId(),s),this.client=e,this.providerFor=n,this.networks=r,this.options=s,this.singleNetworkProviders={},this._isSequenceProvider=!0,this.utils=void 0,this.signer=void 0,this.eip1193EventListeners=new Map,e.onConnect(i=>{var a;(a=this.eip1193EventListeners.get("connect"))==null||a.forEach(o=>o(i))}),e.onDisconnect(i=>{var a;(a=this.eip1193EventListeners.get("disconnect"))==null||a.forEach(o=>o(i))}),e.onDefaultChainIdChanged(i=>{var a;(a=this.eip1193EventListeners.get("chainChanged"))==null||a.forEach(o=>o(i))}),e.onAccountsChanged(i=>{var a;(a=this.eip1193EventListeners.get("accountsChanged"))==null||a.forEach(o=>o(i))}),this.signer=new uF(this.client,this),this.utils=new Ibt(this.signer)}async on(e,n){if(jfe.includes(e)){const r=this.eip1193EventListeners.get(e)||new Set;return r.add(n),this.eip1193EventListeners.set(e,r),this}return super.on(e,n)}async off(e,n){if(jfe.includes(e)){const r=this.eip1193EventListeners.get(e);return r&&(n?r.delete(n):r.clear()),this}return super.off(e,n)}getSigner(e){return this.signer.getSigner(e)}connect(e){return this.client.connect(e)}disconnect(){return this.client.disconnect()}isConnected(){return this.client.isConnected()}getSession(){return this.client.getSession()}listAccounts(){return[this.client.getAddress()]}getAddress(){return this.client.getAddress()}getNetworks(){return this.client.getNetworks()}getChainId(){return this.client.getChainId()}setDefaultChainId(e){return this.client.setDefaultChainId(this.toChainId(e))}isOpened(){return this.client.isOpened()}closeWallet(){return this.client.closeWallet()}getWalletContext(){return this.client.getWalletContext()}async getWalletConfig(e){const n=await this.useChainId(e);return this.client.getOnchainWalletConfig({chainId:n})}authorize(e){return this.client.connect(Md({},e,{authorize:!0}))}async openWallet(e,n){return await this.client.openWallet(e,n),!0}toChainId(e){if(e===void 0)return;const n=Kk(this.networks,e);if(!n)throw new Error(`Unsupported network ${e}`);return n.chainId}async useChainId(e){return this.toChainId(e)||this.client.getChainId()}getProvider(e){if(!e)return this;const n=this.toChainId(e);return this.singleNetworkProviders[n]||(this.singleNetworkProviders[n]=new Tbt(this.client,this.providerFor,n,this.options)),this.singleNetworkProviders[n]}async _getSubprovider(e){const n=await this.useChainId(e),r=this.providerFor(n);if(!r)throw new Error(`Unsupported network ${n}`);return r}async _perform(e){var n;const{method:r}=e,s=Sbt(e,Cbt),i=await this._getSubprovider(),a=(n=i.getRpcRequest(e))!=null?n:{method:r,args:Object.values(s)};if(!a)throw new Error(`Unsupported method ${e.method}`);return i.send(a.method,a.args)}async perform(e,n){if(e==="eth_chainId")return Kd(await this.useChainId());if(e==="eth_accounts")return[this.client.getAddress()];if(e==="wallet_switchEthereumChain"){const r=n[0],s=wIe(r);return this.setDefaultChainId(s)}return e==="eth_sendTransaction"||e==="eth_sign"||e==="eth_signTypedData"||e==="eth_signTypedData_v4"||e==="personal_sign"||e==="sequence_sign"||e==="sequence_signTypedData_v4"?this.client.request({method:e,params:n,chainId:this.getChainId()}):this._perform(Md({method:e},n))}send(e,n){return this.perform(e,n)}request(e){return this.perform(e.method,e.params)}async _detectNetwork(){const e=this.client.getChainId(),n=Kk(this.networks,e);if(!n)throw new Error(`Unknown network ${e}`);return new wu(n.name,n.chainId)}async detectNetwork(){return this._detectNetwork()}async waitForTransaction(e,n,r,s){return(await this._getSubprovider(s==null?void 0:s.chainId)).waitForTransaction(e,n,r)}async getBlockNumber(e){return(await this._getSubprovider(e==null?void 0:e.chainId)).getBlockNumber()}async getFeeData(e){return(await this._getSubprovider(e==null?void 0:e.chainId)).getFeeData()}async getBalance(e,n,r){return(await this._getSubprovider(r==null?void 0:r.chainId)).getBalance(e,n)}async getTransactionCount(e,n,r){return(await this._getSubprovider(r==null?void 0:r.chainId)).getTransactionCount(e,n)}async getCode(e,n,r){return(await this._getSubprovider(r==null?void 0:r.chainId)).getCode(e,n)}async getStorage(e,n,r,s){return(await this._getSubprovider(s==null?void 0:s.chainId)).getStorage(e,n,r)}async call(e,n){return(await this._getSubprovider(n==null?void 0:n.chainId)).call(e)}async estimateGas(e,n){return(await this._getSubprovider(n==null?void 0:n.chainId)).estimateGas(e)}async getBlock(e,n,r){return(await this._getSubprovider(r==null?void 0:r.chainId)).getBlock(e,n)}async getTransaction(e,n){return(await this._getSubprovider(n==null?void 0:n.chainId)).getTransaction(e)}async getLogs(e,n){return(await this._getSubprovider(n==null?void 0:n.chainId)).getLogs(e)}async supportsENS(){return(await this.getNetworks()).some(n=>n.chainId===1)}async getResolver(e){return await this.supportsENS()?(await this._getSubprovider(1)).getResolver(e):null}async resolveName(e){return FM(e)?e:await this.supportsENS()?(await this._getSubprovider(1)).resolveName(e):null}async lookupAddress(e){return await this.supportsENS()?(await this._getSubprovider(1)).lookupAddress(e):null}async getAvatar(e){return await this.supportsENS()?(await this._getSubprovider(1)).getAvatar(e):null}}$te.is=t=>t&&typeof t=="object"&&t._isSequenceProvider===!0;function wIe(t){return typeof t=="object"?wIe(t.chainId):Number(t)}class Tbt extends $te{constructor(e,n,r,s){super(e,n,void 0,s),this.chainId=r,this._isSingleNetworkSequenceProvider=!0}_useChainId(e){const n=this.toChainId(e);if(n&&n!==this.chainId)throw new Error(`This provider only supports the network ${this.chainId}, but ${n} was requested.`);return n||super.toChainId(this.chainId)}useChainId(e){return Promise.resolve(this._useChainId(e))}getChainId(){return super.toChainId(this.chainId)}async getNetwork(){const e=await this.client.getNetworks(),n=Kk(e,this.chainId);if(!n)throw new Error(`Unsupported network ${this.chainId}`);return new wu(n.name,n.chainId)}getProvider(e){if(this._useChainId(e)!==this.chainId)throw new Error("Unreachable code");return this}getSigner(e){return super.getSigner(this._useChainId(e))}setDefaultChainId(e){throw new Error(`This provider only supports the network ${this.chainId}; use the parent provider to switch networks.`)}static is(e){return e&&typeof e=="object"&&e._isSingleNetworkSequenceProvider===!0}}const h3=`[
  {
      "constant": true,
      "inputs": [],
      "name": "name",
      "outputs": [
          {
              "name": "",
              "type": "string"
          }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
  },
  {
      "constant": false,
      "inputs": [
          {
              "name": "_spender",
              "type": "address"
          },
          {
              "name": "_value",
              "type": "uint256"
          }
      ],
      "name": "approve",
      "outputs": [
          {
              "name": "",
              "type": "bool"
          }
      ],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
  },
  {
      "constant": true,
      "inputs": [],
      "name": "totalSupply",
      "outputs": [
          {
              "name": "",
              "type": "uint256"
          }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
  },
  {
      "constant": false,
      "inputs": [
          {
              "name": "_from",
              "type": "address"
          },
          {
              "name": "_to",
              "type": "address"
          },
          {
              "name": "_value",
              "type": "uint256"
          }
      ],
      "name": "transferFrom",
      "outputs": [
          {
              "name": "",
              "type": "bool"
          }
      ],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
  },
  {
      "constant": true,
      "inputs": [],
      "name": "decimals",
      "outputs": [
          {
              "name": "",
              "type": "uint8"
          }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
  },
  {
      "constant": true,
      "inputs": [
          {
              "name": "_owner",
              "type": "address"
          }
      ],
      "name": "balanceOf",
      "outputs": [
          {
              "name": "balance",
              "type": "uint256"
          }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
  },
  {
      "constant": true,
      "inputs": [],
      "name": "symbol",
      "outputs": [
          {
              "name": "",
              "type": "string"
          }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
  },
  {
      "constant": false,
      "inputs": [
          {
              "name": "_to",
              "type": "address"
          },
          {
              "name": "_value",
              "type": "uint256"
          }
      ],
      "name": "transfer",
      "outputs": [
          {
              "name": "",
              "type": "bool"
          }
      ],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
  },
  {
      "constant": true,
      "inputs": [
          {
              "name": "_owner",
              "type": "address"
          },
          {
              "name": "_spender",
              "type": "address"
          }
      ],
      "name": "allowance",
      "outputs": [
          {
              "name": "",
              "type": "uint256"
          }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
  },
  {
      "payable": true,
      "stateMutability": "payable",
      "type": "fallback"
  },
  {
      "anonymous": false,
      "inputs": [
          {
              "indexed": true,
              "name": "owner",
              "type": "address"
          },
          {
              "indexed": true,
              "name": "spender",
              "type": "address"
          },
          {
              "indexed": false,
              "name": "value",
              "type": "uint256"
          }
      ],
      "name": "Approval",
      "type": "event"
  },
  {
      "anonymous": false,
      "inputs": [
          {
              "indexed": true,
              "name": "from",
              "type": "address"
          },
          {
              "indexed": true,
              "name": "to",
              "type": "address"
          },
          {
              "indexed": false,
              "name": "value",
              "type": "uint256"
          }
      ],
      "name": "Transfer",
      "type": "event"
  }
]`,bIe=`[
    {
      "anonymous": false,
      "inputs": [{"indexed": true, "internalType": "address", "name": "owner", "type": "address"}, {
        "indexed": true,
        "internalType": "address",
        "name": "approved",
        "type": "address"
      }, {"indexed": true, "internalType": "uint256", "name": "tokenId", "type": "uint256"}],
      "name": "Approval",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [{"indexed": true, "internalType": "address", "name": "owner", "type": "address"}, {
        "indexed": true,
        "internalType": "address",
        "name": "operator",
        "type": "address"
      }, {"indexed": false, "internalType": "bool", "name": "approved", "type": "bool"}],
      "name": "ApprovalForAll",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [{"indexed": true, "internalType": "address", "name": "from", "type": "address"}, {
        "indexed": true,
        "internalType": "address",
        "name": "to",
        "type": "address"
      }, {"indexed": true, "internalType": "uint256", "name": "tokenId", "type": "uint256"}],
      "name": "Transfer",
      "type": "event"
    },
    {
      "inputs": [{"internalType": "address", "name": "to", "type": "address"}, {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }], "name": "approve", "outputs": [], "stateMutability": "nonpayable", "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "totalSupply",
      "outputs": [
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [{"internalType": "address", "name": "owner", "type": "address"}],
      "name": "balanceOf",
      "outputs": [{"internalType": "uint256", "name": "balance", "type": "uint256"}],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [{"internalType": "uint256", "name": "tokenId", "type": "uint256"}],
      "name": "getApproved",
      "outputs": [{"internalType": "address", "name": "operator", "type": "address"}],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [{"internalType": "address", "name": "owner", "type": "address"}, {
        "internalType": "address",
        "name": "operator",
        "type": "address"
      }],
      "name": "isApprovedForAll",
      "outputs": [{"internalType": "bool", "name": "", "type": "bool"}],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "name",
      "outputs": [{"internalType": "string", "name": "", "type": "string"}],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [{"internalType": "uint256", "name": "tokenId", "type": "uint256"}],
      "name": "ownerOf",
      "outputs": [{"internalType": "address", "name": "owner", "type": "address"}],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [{"internalType": "address", "name": "from", "type": "address"}, {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
        {"internalType": "uint256", "name": "tokenId", "type": "uint256"}],
      "name": "safeTransferFrom",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [{"internalType": "address", "name": "from", "type": "address"}, {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
        {"internalType": "uint256", "name": "tokenId", "type": "uint256"}, {
          "internalType": "bytes",
          "name": "data",
          "type": "bytes"
        }], "name": "safeTransferFrom", "outputs": [], "stateMutability": "nonpayable", "type": "function"
    },
    {
      "inputs": [{"internalType": "address", "name": "operator", "type": "address"}, {
        "internalType": "bool",
        "name": "_approved",
        "type": "bool"
      }], "name": "setApprovalForAll", "outputs": [], "stateMutability": "nonpayable", "type": "function"
    },
    {
      "inputs": [{"internalType": "bytes4", "name": "interfaceId", "type": "bytes4"}],
      "name": "supportsInterface",
      "outputs": [{"internalType": "bool", "name": "", "type": "bool"}],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "symbol",
      "outputs": [{"internalType": "string", "name": "", "type": "string"}],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [{"internalType": "uint256", "name": "tokenId", "type": "uint256"}],
      "name": "tokenURI",
      "outputs": [{"internalType": "string", "name": "", "type": "string"}],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [{"internalType": "address", "name": "from", "type": "address"}, {
        "internalType": "address",
        "name": "to",
        "type": "address"
      }, {"internalType": "uint256", "name": "tokenId", "type": "uint256"}],
      "name": "transferFrom",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ]`,vIe=`[
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "account",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "operator",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "bool",
          "name": "approved",
          "type": "bool"
        }
      ],
      "name": "ApprovalForAll",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "operator",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "from",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "to",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256[]",
          "name": "ids",
          "type": "uint256[]"
        },
        {
          "indexed": false,
          "internalType": "uint256[]",
          "name": "values",
          "type": "uint256[]"
        }
      ],
      "name": "TransferBatch",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "operator",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "from",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "to",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "value",
          "type": "uint256"
        }
      ],
      "name": "TransferSingle",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "string",
          "name": "value",
          "type": "string"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        }
      ],
      "name": "URI",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "account",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        }
      ],
      "name": "balanceOf",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address[]",
          "name": "accounts",
          "type": "address[]"
        },
        {
          "internalType": "uint256[]",
          "name": "ids",
          "type": "uint256[]"
        }
      ],
      "name": "balanceOfBatch",
      "outputs": [
        {
          "internalType": "uint256[]",
          "name": "",
          "type": "uint256[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "account",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "operator",
          "type": "address"
        }
      ],
      "name": "isApprovedForAll",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "from",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "to",
          "type": "address"
        },
        {
          "internalType": "uint256[]",
          "name": "ids",
          "type": "uint256[]"
        },
        {
          "internalType": "uint256[]",
          "name": "amounts",
          "type": "uint256[]"
        },
        {
          "internalType": "bytes",
          "name": "data",
          "type": "bytes"
        }
      ],
      "name": "safeBatchTransferFrom",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "from",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "to",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "internalType": "bytes",
          "name": "data",
          "type": "bytes"
        }
      ],
      "name": "safeTransferFrom",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "operator",
          "type": "address"
        },
        {
          "internalType": "bool",
          "name": "approved",
          "type": "bool"
        }
      ],
      "name": "setApprovalForAll",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes4",
          "name": "interfaceId",
          "type": "bytes4"
        }
      ],
      "name": "supportsInterface",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        }
      ],
      "name": "uri",
      "outputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ]`,Nbt=async()=>window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),Hfe=async(t,e)=>{const r=new TextEncoder().encode(t),s=await window.crypto.subtle.importKey("raw",r,"PBKDF2",!1,["deriveBits","deriveKey"]);return await window.crypto.subtle.deriveKey({name:"PBKDF2",salt:e,iterations:31e4,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])},qfe=t=>et(t),Kfe=async(t,e)=>{const r=new TextEncoder().encode(e),s=window.crypto.getRandomValues(new Uint8Array(12)),i=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:s},t,r);return{iv:s,data:i}},Gfe=async(t,e)=>{const{iv:n,data:r}=e;try{const s=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},t,r);return new TextDecoder().decode(s)}catch{throw new Error("Could not decrypt data")}},$J=(t,e)=>e.some(n=>t instanceof n);let Wfe,zfe;function kbt(){return Wfe||(Wfe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pbt(){return zfe||(zfe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jJ=new WeakMap,gq=new WeakMap,fF=new WeakMap;function Obt(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(ab(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return fF.set(e,t),e}function Rbt(t){if(jJ.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});jJ.set(t,e)}let HJ={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jJ.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ab(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xIe(t){HJ=t(HJ)}function _bt(t){return Pbt().includes(t)?function(...e){return t.apply(qJ(this),e),ab(this.request)}:function(...e){return ab(t.apply(qJ(this),e))}}function Bbt(t){return typeof t=="function"?_bt(t):(t instanceof IDBTransaction&&Rbt(t),$J(t,kbt())?new Proxy(t,HJ):t)}function ab(t){if(t instanceof IDBRequest)return Obt(t);if(gq.has(t))return gq.get(t);const e=Bbt(t);return e!==t&&(gq.set(t,e),fF.set(e,t)),e}const qJ=t=>fF.get(t);function aD(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=ab(a);return r&&a.addEventListener("upgradeneeded",c=>{r(ab(a.result),c.oldVersion,c.newVersion,ab(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}function Mbt(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),ab(n).then(()=>{})}const Dbt=["get","getKey","getAll","getAllKeys","count"],Lbt=["put","add","delete","clear"],mq=new Map;function Jfe(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mq.get(e))return mq.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Lbt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Dbt.includes(n)))return;const i=async function(a,...o){const c=this.transaction(a,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(o.shift())),(await Promise.all([l[n](...o),s&&c.done]))[0]};return mq.set(e,i),i}xIe(t=>({...t,get:(e,n,r)=>Jfe(e,n)||t.get(e,n,r),has:(e,n)=>!!Jfe(e,n)||t.has(e,n)}));const Ubt=["continue","continuePrimaryKey","advance"],Yfe={},KJ=new WeakMap,EIe=new WeakMap,Fbt={get(t,e){if(!Ubt.includes(e))return t[e];let n=Yfe[e];return n||(n=Yfe[e]=function(...r){KJ.set(this,EIe.get(this)[e](...r))}),n}};async function*Vbt(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,Fbt);for(EIe.set(n,e),fF.set(n,qJ(e));e;)yield n,e=await(KJ.get(n)||e.continue()),KJ.delete(n)}function Qfe(t,e){return e===Symbol.asyncIterator&&$J(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&$J(t,[IDBIndex,IDBObjectStore])}xIe(t=>({...t,get(e,n,r){return Qfe(e,n)?Vbt:t.get(e,n,r)},has(e,n){return Qfe(e,n)||t.has(e,n)}}));const Zfe="@sequence-recovery",kc=async t=>{let e=null;try{if(e=await aD(Zfe),e.objectStoreNames.contains(t))return e;const n=e.version;return e.close(),e=await aD(Zfe,n+1,{upgrade(r){r.objectStoreNames.contains(t)||r.createObjectStore(t)}}),e}catch(n){throw console.error("Error accessing IndexedDB:",n),n}},$bt=async t=>{let e=null;try{if(e=await kc(t),e.objectStoreNames.contains(t)){const n=e.transaction(t,"readwrite");await n.objectStore(t).clear(),await n.done}}catch(n){throw console.error(`Failed to clear object store "${t}":`,n),n}finally{e&&e.close()}},Tv={arweaveUrl:Vte.arweave.defaults.arweaveUrl,graphqlUrl:"https://arweave-search.goldsky.com/graphql"},OT={...Tv},GJ=new Vte.arweave.ArweaveReader(OT),Xfe="0x603a600e3d39601a805130553df3363d3d373d3d3d363d30545af43d82803e903d91601857fd5bf3",AIe={1:{version:1,factory:"0xf9D09D634Fb818b05149329C1dcCFAeA53639d96",mainModule:"0xd01F11855bCcb95f88D7A48492F66410d4637313",mainModuleUpgradable:"0x7EFE6cE415956c5f80C6530cC6cc81b4808F6118",guestModule:"0x02390F3E6E5FD1C6786CB78FD3027C117a9955A7",walletCreationCode:Xfe},2:{version:2,factory:"0xFaA5c0b14d1bED5C888Ca655B9a8A5911F78eF4A",mainModule:"0xfBf8f1A5E00034762D928f46d438B947f5d4065d",mainModuleUpgradable:"0x4222dcA3974E39A8b41c411FeDDE9b09Ae14b911",guestModule:"0xfea230Ee243f88BC698dD8f1aE93F8301B6cdfaE",walletCreationCode:Xfe}},SIe="01ac9198aeee06290cf188dc038f24e3";class Cg{constructor(e,n){q(this,"_observable");q(this,"key");this.def=n,this.key=e}get observable(){return this._observable===void 0&&(this._observable=rr(this.get()),window.addEventListener("storage",e=>{var n;e.key===this.key&&((n=this._observable)==null||n.set(this.get()))}),this._observable.subscribe(e=>this.set(e))),this._observable}get(){const e=window.localStorage.getItem(this.key);if(e===null)return this.def;try{return JSON.parse(e)}catch(n){console.error(n)}}set(e){var n;e!==void 0?window.localStorage.setItem(this.key,JSON.stringify(e)):window.localStorage.removeItem(this.key),(n=this._observable)==null||n.set(e)}del(){var e;window.localStorage.removeItem(this.key),(e=this._observable)==null||e.set(this.def)}}const jbt="0xa9e1f06cb24d160e02bd6ea84d6ffd0b3457b53d1177382eee85f4d8013419b8",yq=t=>{const e=new ZM(jbt);return typeof t=="string"?new Rfe(e.connect(new P2(t))):new Rfe(e.connect(t))};class fs{constructor(e){q(this,"networks",rr([]));q(this,"editedNetworkChainIds",rr([]));q(this,"userAdditionNetworkChainIds",rr([]));q(this,"arweaveGatewayUrl");q(this,"arweaveGraphqlUrl");q(this,"accountLoaded",rr(!1));q(this,"local",{networksUserEdits:new Cg(u0.NETWORKS_USER_EDITS),networksUserAdditions:new Cg(u0.NETWORKS_USER_ADDITIONS),arweaveGatewayUrl:new Cg(u0.ARWEAVE_GATEWAY_URL),arweaveGraphqlUrl:new Cg(u0.ARWEAVE_GRAPHQL_URL)});q(this,"unsavedNetworkEdits",rr([]));q(this,"unsavedNetworkEditChainIds",rr([]));q(this,"unsavedArweaveURLs",rr({}));q(this,"isAddingNetwork",rr(!1));this.prepareNetworks(),this.accountLoaded.subscribe(n=>{n&&this.networks.get().length===0&&this.prepareNetworks()}),this.arweaveGatewayUrl=this.local.arweaveGatewayUrl.observable,this.arweaveGraphqlUrl=this.local.arweaveGraphqlUrl.observable,this.arweaveGatewayUrl.get()||this.arweaveGatewayUrl.set(Tv.arweaveUrl),this.arweaveGraphqlUrl.get()||this.arweaveGraphqlUrl.set(Tv.graphqlUrl),OT.arweaveUrl=this.arweaveGatewayUrl.get()||Tv.arweaveUrl,OT.graphqlUrl=this.arweaveGraphqlUrl.get()||Tv.graphqlUrl,this.arweaveGatewayUrl.subscribe(n=>{OT.arweaveUrl=n||Tv.arweaveUrl}),this.arweaveGraphqlUrl.subscribe(n=>{OT.graphqlUrl=n||Tv.graphqlUrl})}async prepareNetworks(){var r,s,i,a,o;const e=[];let n=this.local.networksUserEdits.get();for(const[c,l]of Object.entries(qk)){if(nft.has(Number(c))||l.deprecated)continue;const u=l,f=(r=Ld.get(Number(c)))==null?void 0:r[1],d=n==null?void 0:n.find(p=>p.chainId===u.chainId);if(d)if(d.rpcUrl!==f||((s=d.blockExplorer)==null?void 0:s.rootUrl)!==((i=u.blockExplorer)==null?void 0:i.rootUrl)||d.disabled!==!1){d.relayer=yq(d.rpcUrl),e.push(d);continue}else n=n==null?void 0:n.filter(p=>p.chainId!==u.chainId),this.local.networksUserEdits.set(n);f?(u.rpcUrl=f,u.relayer=yq(f),u.disabled=!1,e.push(u)):console.warn(`No RPC found for network ${l.name} - chain ID ${c}. You can ignore this warning if the network is deprecated.`)}(a=this.local.networksUserAdditions.get())==null||a.forEach(c=>{c.relayer=yq(c.rpcUrl),e.push(c)}),this.editedNetworkChainIds.set((n==null?void 0:n.map(c=>c.chainId))??[]),this.userAdditionNetworkChainIds.set(((o=this.local.networksUserAdditions.get())==null?void 0:o.map(c=>c.chainId))??[]),this.networks.set(e)}async isValidRpcUrl(e){try{const n=new P2(e);return n.on("error",r=>{Ea(r,"NETWORK_ERROR")&&n.destroy()}),await n.getBlockNumber(),!0}catch(n){return console.error(`Invalid RPC URL (${e}):`,n),!1}}networkForChainId(e){return this.networks.get().find(n=>n.chainId===e)}providerForChainId(e){var s;const n=(s=this.networkForChainId(e))==null?void 0:s.rpcUrl;if(!n)throw new Error(`No network found for chainId ${e}`);const r=new P2(n);if(!r)throw new Error(`No provider found for chainId ${e}`);return r}editNetwork(e){const n=this.local.networksUserEdits.get()??[];if(n.some(r=>r.chainId===e.chainId)){const r=n.map(s=>s.chainId!==e.chainId?s:e);this.local.networksUserEdits.set(r)}else n.push(e),this.local.networksUserEdits.set(n);this.prepareNetworks()}async editUserNetwork(e){const r=(this.local.networksUserAdditions.get()??[]).filter(s=>s.chainId!==e.chainId);r.push(e),this.local.networksUserAdditions.set(r),this.prepareNetworks()}addUnsavedNetworkEdit(e){const n=this.unsavedNetworkEdits.get()||[],r=this.unsavedNetworkEditChainIds.get();if(this.networks.get().some(i=>{var a,o;return i.chainId===e.chainId&&i.rpcUrl===e.rpcUrl&&((a=i.blockExplorer)==null?void 0:a.rootUrl)===((o=e.blockExplorer)==null?void 0:o.rootUrl)&&i.disabled===e.disabled})){this.unsavedNetworkEdits.set(n.filter(i=>i.chainId!==e.chainId)),this.unsavedNetworkEditChainIds.set(r.filter(i=>i!==e.chainId));return}n.some(i=>i.chainId===e.chainId)?this.unsavedNetworkEdits.set(n.map(i=>i.chainId!==e.chainId?i:e)):(this.unsavedNetworkEdits.set([...n,e]),this.unsavedNetworkEditChainIds.set([...r,e.chainId]))}addUnsavedArweaveURLs(e,n){this.unsavedArweaveURLs.set({gatewayUrl:e,graphQLUrl:n})}discardUnsavedNetworkEdits(){this.unsavedNetworkEdits.set([]),this.unsavedNetworkEditChainIds.set([]),this.unsavedArweaveURLs.set({})}saveUnsavedNetworkEdits(){var n;const e=this.unsavedArweaveURLs.get();e&&(this.local.arweaveGatewayUrl.set(e.gatewayUrl),this.local.arweaveGraphqlUrl.set(e.graphQLUrl));for(const r of this.unsavedNetworkEdits.get()||[])(n=this.userAdditionNetworkChainIds.get())!=null&&n.includes(r.chainId)?this.editUserNetwork(r):this.editNetwork(r);this.unsavedNetworkEdits.set([]),this.unsavedNetworkEditChainIds.set([]),this.unsavedArweaveURLs.set({})}resetNetworkEdit(e){const n=this.local.networksUserEdits.get(),r=n==null?void 0:n.filter(s=>s.chainId!==e);this.local.networksUserEdits.set(r),this.prepareNetworks()}async addNetwork(e){const n=this.local.networksUserAdditions.get()??[];if(this.networks.get().some(s=>s.chainId===e.chainId))throw new Error(`Network with chainId ${e.chainId} already exists`);n.push(e),this.local.networksUserAdditions.set(n),this.prepareNetworks()}removeNetwork(e){const n=this.local.networksUserAdditions.get(),r=n==null?void 0:n.filter(s=>s.chainId!==e);this.local.networksUserAdditions.set(r),this.prepareNetworks()}clear(){this.local.networksUserAdditions.set([]),this.local.networksUserEdits.set([]),this.networks.set([]),this.editedNetworkChainIds.set([]),this.userAdditionNetworkChainIds.set([]),this.prepareNetworks(),this.arweaveGatewayUrl.set(void 0),this.arweaveGraphqlUrl.set(void 0),this.accountLoaded.set(!1)}}const yb=t=>{const e=qk[t];return(e==null?void 0:e.title)??(e==null?void 0:e.name)??"Unknown"},wb=$c,Lh={chainId:ge.MAINNET,address:wb,symbol:"ETH",name:"Ethereum",decimals:18,source:"MAINNET",status:Ms.ResourceStatus.AVAILABLE,logoURI:"",type:"NATIVE",deployed:!0,bytecodeHash:"",extensions:{categories:[],ogName:"",featureIndex:0,description:"Ethereum is a global, open-source platform for decentralized applications. In other words, the vision is to create a world computer that anyone can build applications in a decentralized manner; while all states and data are distributed and publicly accessible. Ethereum supports smart contracts in which developers can write code in order to program digital value. Examples of decentralized apps (dapps) that are built on Ethereum includes token, non-fungible tokens, decentralized finance apps, lending protocol, decentralized exchanges, and much more.",link:"https://ethereum.org/",ogImage:"",originAddress:"",originChainId:0,blacklist:!1,verified:!0,verifiedBy:"Sequence",featured:!1},updatedAt:"2023-11-20T20:00:00.000000000Z"},Hbt={...Lh,chainId:ge.SEPOLIA,symbol:"sETH",name:"Sepolia Ethereum"},IIe={chainId:ge.POLYGON,address:wb,symbol:"POL",name:"Polygon",source:"POLYGON",status:Ms.ResourceStatus.AVAILABLE,decimals:18,type:"NATIVE",logoURI:"",deployed:!0,bytecodeHash:"",extensions:{categories:[],ogName:"",featureIndex:0,description:"Polygon provides scalable, secure and instant Ethereum transactions.",link:"https://polygon.technology/",ogImage:"",originAddress:"",originChainId:0,blacklist:!1,verified:!0,verifiedBy:"Sequence",featured:!1},updatedAt:"2023-11-20T20:00:00.000000000Z"},qbt={chainId:ge.AVALANCHE,address:wb,symbol:"AVAX",name:"AVAX",source:"AVALANCHE",status:Ms.ResourceStatus.AVAILABLE,decimals:18,type:"NATIVE",logoURI:"",deployed:!0,bytecodeHash:"",extensions:{categories:[],ogName:"",featureIndex:0,description:"Avalanche is a high throughput smart contract blockchain platform. Validators secure the network through a proof-of-stake consensus protocol. It is said to be fast, low cost, and environmental friendly.",link:"https://avax.network",ogImage:"",originAddress:"",originChainId:0,blacklist:!1,verified:!0,verifiedBy:"Sequence",featured:!1},updatedAt:"2023-11-20T20:00:00.000000000Z"},Kbt={chainId:ge.GNOSIS,address:wb,symbol:"XDAI",name:"XDAI",source:"GNOSIS",status:Ms.ResourceStatus.AVAILABLE,decimals:18,type:"NATIVE",logoURI:"",deployed:!0,bytecodeHash:"",extensions:{categories:[],ogName:"",featureIndex:0,description:"xDai is the native stable token of the Gnosis chain blockchain. Each xDai token is worth ~ 1 US dollar.",link:"https://gnosischain.com",ogImage:"",originAddress:"",originChainId:0,blacklist:!1,verified:!0,verifiedBy:"Sequence",featured:!1},updatedAt:"2023-11-20T20:00:00.000000000Z"},Gbt={...IIe,chainId:ge.POLYGON_AMOY,symbol:"aPOL",name:"Amoy Polygon"},CIe={chainId:ge.BSC,address:wb,name:"BNB",source:"BSC",status:Ms.ResourceStatus.AVAILABLE,type:"NATIVE",symbol:"BNB",decimals:18,logoURI:"",deployed:!0,bytecodeHash:"",extensions:{categories:[],ogName:"",featureIndex:0,link:"https://www.binance.com/",description:"BNB is the native asset on Binance Chain, a blockchain software system developed by Binance and the community. BNB has multiple forms of utility and powers the Binance Ecosystem as its underlying gas.",ogImage:"",originChainId:0,originAddress:"",blacklist:!1,verified:!0,verifiedBy:"Sequence",featured:!1},updatedAt:"2023-11-20T20:00:00.000000000Z"},Wbt={...CIe,chainId:ge.BSC_TESTNET,symbol:"BNB",name:"Testnet BNB"},TIe={chainId:ge.XAI,address:wb,symbol:"XAI",name:"XAI",source:"XAI",status:Ms.ResourceStatus.AVAILABLE,type:"NATIVE",decimals:18,logoURI:"",deployed:!0,bytecodeHash:"",extensions:{categories:[],ogName:"",featureIndex:0,link:"https://xai.games/",description:"XAI is the native asset on the XAI chain",ogImage:"",originChainId:0,originAddress:"",blacklist:!1,verified:!0,verifiedBy:"Sequence",featured:!1},updatedAt:"2024-02-28T20:00:00.000000000Z"},zbt={...TIe,chainId:ge.XAI_SEPOLIA,logoURI:"",symbol:"sXAI",name:"Sepolia XAI"},NIe={chainId:ge.HOMEVERSE,address:wb,symbol:"OAS",name:"OAS",type:"NATIVE",decimals:18,source:"HOMEVERSE",status:Ms.ResourceStatus.AVAILABLE,logoURI:"",deployed:!0,bytecodeHash:"",extensions:{categories:[],ogName:"",featureIndex:0,link:"https://www.oasys.games/",description:"OAS is the native asset on the OASYS chain, its also the native asset on the HomeVerse chain",ogImage:"",originChainId:9372,originAddress:wb,blacklist:!1,verified:!0,verifiedBy:"Sequence",featured:!1},updatedAt:"2023-11-20T20:00:00.000000000Z"},Jbt={...NIe,chainId:ge.HOMEVERSE_TESTNET,name:"Testnet OAS"},Ybt={[ge.MAINNET]:Lh,[ge.SEPOLIA]:Hbt,[ge.POLYGON]:IIe,[ge.POLYGON_AMOY]:Gbt,[ge.POLYGON_ZKEVM]:{...Lh,chainId:ge.POLYGON_ZKEVM},[ge.BSC]:CIe,[ge.BSC_TESTNET]:Wbt,[ge.AVALANCHE]:qbt,[ge.GNOSIS]:Kbt,[ge.ARBITRUM]:{...Lh,chainId:ge.ARBITRUM},[ge.ARBITRUM_NOVA]:{...Lh,chainId:ge.ARBITRUM_NOVA},[ge.ARBITRUM_SEPOLIA]:{...Lh,chainId:ge.ARBITRUM_SEPOLIA},[ge.OPTIMISM]:{...Lh,chainId:ge.OPTIMISM},[ge.OPTIMISM_SEPOLIA]:{...Lh,chainId:ge.OPTIMISM_SEPOLIA},[ge.BASE]:{...Lh,chainId:ge.BASE},[ge.BASE_SEPOLIA]:{...Lh,chainId:ge.BASE_SEPOLIA},[ge.XAI]:TIe,[ge.XAI_SEPOLIA]:zbt,[ge.HOMEVERSE]:NIe,[ge.HOMEVERSE_TESTNET]:Jbt},WJ=t=>Ybt[t]||null;class N4{constructor(e){q(this,"isFetchingBalances",rr(!1));q(this,"isFetchingTokenInfo",rr(!1));q(this,"balances",rr([]));q(this,"userAddedTokens",rr([]));q(this,"local",{userAddedTokens:new Cg(u0.TOKENS_USER_ADDITIONS)});this.store=e}async loadBalances(e,n){const r=n.filter(a=>a.type===Et.MAINNET),s=[];this.isFetchingBalances.set(!0),await Promise.allSettled(r.map(async a=>{if(!a.rpcUrl){console.warn(`No RPC URL found for network ${a.name}`);return}const o=new P2(a.rpcUrl);o.on("error",c=>{Ea(c,"NETWORK_ERROR")&&o.destroy()});try{const c=await o.getBalance(e);s.push({contractType:Ms.ContractType.NATIVE,contractAddress:$c,tokenID:"",accountAddress:e,balance:c.toString(),chainId:a.chainId,blockHash:Ow,blockNumber:0,contractInfo:WJ(Nfe(a.chainId)),uniqueCollectibles:"0",isSummary:!0})}catch(c){console.error(c)}})),this.balances.set(s);const i=this.local.userAddedTokens.get()??[];this.userAddedTokens.set(i),i.length>0&&await Promise.allSettled(i.map(async a=>{await this.loadUserAddedTokenBalance(e,a)})),this.isFetchingBalances.set(!1)}async loadUserAddedTokenBalance(e,n){const r=this.store.get(fs).providerForChainId(n.chainId);try{const i=await new Si(n.address,h3,r).balanceOf(e),a=this.balances.get(),o=a.findIndex(l=>l.contractAddress===n.address&&l.chainId===n.chainId),c={contractType:n.contractType,contractAddress:n.address,tokenID:"",accountAddress:e,balance:i.toString(),chainId:n.chainId,blockHash:Ow,blockNumber:0,contractInfo:{address:n.address,chainId:n.chainId,decimals:n.decimals,name:n.symbol,symbol:n.symbol,source:"USER_ADDED",status:Ms.ResourceStatus.AVAILABLE,type:"ERC20",logoURI:"",deployed:!0,bytecodeHash:"",extensions:{categories:[],ogName:"",featureIndex:0,link:"",description:"",ogImage:"",originAddress:"",originChainId:0,blacklist:!1,verified:!0,verifiedBy:"User",featured:!1},updatedAt:"0"},uniqueCollectibles:"0",isSummary:!0};o!==-1?a[o]=c:a.push(c),this.balances.set([...a])}catch(s){console.error(s)}}async updateTokenBalance(e){const n=this.store.get(fs).providerForChainId(e.chainId);this.isFetchingBalances.set(!0);const r=this.store.get(us).accountAddress.get();if(!r){console.warn("No account found");return}const s=this.balances.get();try{let i;e.contractType===Ms.ContractType.NATIVE?i=await n.getBalance(r):i=await new Si(e.contractAddress,h3,n).balanceOf(r),s.map(a=>{a.contractAddress===e.contractAddress&&a.chainId===e.chainId&&(a.balance=i.toString())}),this.balances.set([...s])}catch(i){console.error(i)}this.isFetchingBalances.set(!1)}async fetchTokenBalanceIfMissing(e,n){const r=this.store.get(us).accountAddress.get();if(!r){console.warn("No account found");return}const s=this.balances.get();if(s.find(o=>o.contractAddress.toLowerCase()===n.toLowerCase()&&o.chainId===e))return;const a=this.store.get(fs).providerForChainId(e);try{let o,c;if(n===$c||n.toLowerCase()==="0x0000000000000000000000000000000000000000")o=await a.getBalance(r),c={contractType:Ms.ContractType.NATIVE,contractAddress:$c,tokenID:"",accountAddress:r,balance:o.toString(),chainId:e,blockHash:Ow,blockNumber:0,contractInfo:WJ(Nfe(e)),uniqueCollectibles:"0",isSummary:!0};else{const l=new Si(n,h3,a);o=await l.balanceOf(r);let u=18,f="UNKNOWN";try{u=await l.decimals(),f=await l.symbol()}catch{console.warn(`Could not fetch token metadata for ${n}`)}c={contractType:Ms.ContractType.ERC20,contractAddress:n,tokenID:"",accountAddress:r,balance:o.toString(),chainId:e,blockHash:Ow,blockNumber:0,contractInfo:{address:n,chainId:e,decimals:u,name:f,symbol:f,source:"AUTO_FETCHED",status:Ms.ResourceStatus.AVAILABLE,type:"ERC20",logoURI:"",deployed:!0,bytecodeHash:"",extensions:{categories:[],ogName:"",featureIndex:0,link:"",description:"",ogImage:"",originAddress:"",originChainId:0,blacklist:!1,verified:!1,verifiedBy:"",featured:!1},updatedAt:"0"},uniqueCollectibles:"0",isSummary:!0}}this.balances.set([...s,c])}catch(o){console.error(`Error fetching token balance for ${n} on chain ${e}:`,o)}}async addToken(e){const n=this.local.userAddedTokens.get()??[];if(n.some(i=>i.chainId===e.chainId&&i.address===e.address))throw new Error(`Token with chainId ${e.chainId} and address ${e.address} already exists`);n.push(e),this.local.userAddedTokens.set(n),this.userAddedTokens.set([...n]);const s=this.store.get(us).accountAddress.get();s&&(this.isFetchingBalances.set(!0),await this.loadUserAddedTokenBalance(s,e),this.isFetchingBalances.set(!1))}async removeToken(e){const r=(this.local.userAddedTokens.get()??[]).filter(i=>!(i.chainId===e.chainId&&i.address===e.address));this.local.userAddedTokens.set(r),this.userAddedTokens.set([...r]);const s=this.balances.get().filter(i=>!(i.chainId===e.chainId&&i.contractAddress===e.address));this.balances.set([...s])}async getTokenInfo(e,n){if(!Ja(n))throw new Error(`Invalid token address format: ${n}`);const r=this.store.get(fs).providerForChainId(e);this.isFetchingTokenInfo.set(!0);try{const s=this.store.get(us).accountAddress.get(),i=new Si(n,h3,r),a=await i.decimals(),o=await i.symbol(),c=await i.balanceOf(s);if(a&&o)return{decimals:Number(a),symbol:o,balance:gb(c,a)};throw new Error(`Could not get decimals and symbol for token at ${n}`)}catch(s){throw console.error(s),new Error(`Error getting token info ${JSON.stringify(s)}`)}finally{this.isFetchingTokenInfo.set(!1)}}async getTokenList(e){var i;const n=(i=Ld.get(e))==null?void 0:i[0];if(!n)return[];const r=await kc(Tr.ERC20),s=await r.get(Tr.ERC20,n);if(!s){const o={tokens:(await fetch(`https://raw.githubusercontent.com/0xsequence/token-directory/master/index/${n}/erc20.json`).then(c=>c.json())).tokens,date:new Date().toISOString()};return await r.put(Tr.ERC20,o,n),o}return s}async addExternalTokenList(e,n){var a;const r=(a=Ld.get(e))==null?void 0:a[0];if(!r)return[];const s={tokens:n,date:new Date().toISOString()};await(await kc(Tr.ERC20)).put(Tr.ERC20,s,r)}async resetTokenList(e){var s;const n=(s=Ld.get(e))==null?void 0:s[0];return n?(await(await kc(Tr.ERC20)).delete(Tr.ERC20,n),await this.getTokenList(e)):[]}clear(){this.local.userAddedTokens.set([]),this.isFetchingBalances.set(!1),this.isFetchingTokenInfo.set(!1),this.balances.set([])}}class us{constructor(e){q(this,"isLoadingAccount",rr(!0));q(this,"account");q(this,"accountAddress",rr(void 0));this.store=e,this.loadAccount(),this.store.get(fs).networks.subscribe(r=>{this.account&&this.loadAccount()}),this.accountAddress.subscribe(r=>{r&&this.store.get(fs).accountLoaded.set(!0)})}async signInWithRecoveryMnemonic(e,n,r){try{this.isLoadingAccount.set(!0);const s=ZM.fromPhrase(n),i=new cF([s]),o=this.store.get(fs).networks.get(),c=new i9({address:e,tracker:GJ,contexts:AIe,orchestrator:i,networks:o});r?await this.encryptRecoveryMnemonicWithPassword(n,c.address,r):await this.encryptRecoveryMnemonic(n,c.address),this.account=c,this.accountAddress.set(c.address)}catch(s){console.warn(s)}this.isLoadingAccount.set(!1)}async loadAccount(e){const n=await kc(Tr.SECURITY),r=await n.get(Tr.SECURITY,"mnemonic");r&&this.isLoadingAccount.set(!0);const s=await n.get(Tr.SECURITY,"key");let i;r&&(s?i=await this.decryptRecoveryMnemonic(r,s):i=await this.decryptRecoveryMnemonicWithPassword(r,e)),i?e?this.signInWithRecoveryMnemonic(i.wallet,i.mnemonic,e):this.signInWithRecoveryMnemonic(i.wallet,i.mnemonic):setTimeout(()=>{this.isLoadingAccount.set(!1)},200)}async encryptRecoveryMnemonic(e,n){const r=await Nbt(),s=JSON.stringify({wallet:n,mnemonic:e}),i=await Kfe(r,s);i.salt=qfe(n);const a=await kc(Tr.SECURITY);await a.put(Tr.SECURITY,r,"key"),await a.put(Tr.SECURITY,i,"mnemonic")}async encryptRecoveryMnemonicWithPassword(e,n,r){const s=qfe(n),i=await Hfe(r,s),a=JSON.stringify({wallet:n,mnemonic:e}),o=await Kfe(i,a);o.salt=s,await(await kc(Tr.SECURITY)).put(Tr.SECURITY,o,"mnemonic")}async decryptRecoveryMnemonic(e,n){const r=await Gfe(n,e);return JSON.parse(r)}async decryptRecoveryMnemonicWithPassword(e,n){const r=e.salt,s=await Hfe(n,r),i=await Gfe(s,e);return JSON.parse(i)}async getRecoveryMnemonic(e){const n=await kc(Tr.SECURITY),r=await n.get(Tr.SECURITY,"mnemonic");if(!r)return;const s=await n.get(Tr.SECURITY,"key");let i;if(s)i=await this.decryptRecoveryMnemonic(r,s);else if(e)i=await this.decryptRecoveryMnemonicWithPassword(r,e);else return;return i==null?void 0:i.mnemonic}logout(){this.account=void 0,this.accountAddress.set(void 0),$bt(Tr.SECURITY);const e=this.store.get(fs),n=this.store.get(N4);e.clear(),n.clear(),localStorage.clear()}}class Jn{constructor(e){q(this,"toast",Rb());q(this,"networkStore",Vt(fs));q(this,"authStore",Vt(us));q(this,"accountAddress",this.authStore.accountAddress.get());q(this,"availableExternalProviders",rr([]));q(this,"selectedExternalProvider",rr(void 0));q(this,"selectedExternalWalletAddress",rr(void 0));q(this,"isSendingTokenTransaction",rr(void 0));q(this,"isSendingCollectibleTransaction",rr(void 0));q(this,"isSendingSignedTokenTransaction",rr(void 0));q(this,"connectDetails",rr(void 0));q(this,"connectOptions",rr(void 0));q(this,"isSigningTxn",rr(!1));q(this,"isSigningMsg",rr(!1));q(this,"toSignPermission",rr(void 0));q(this,"toSignResult",rr(void 0));q(this,"toSignTxnDetails",rr(void 0));q(this,"toSignMsgDetails",rr(void 0));q(this,"isCheckingWalletDeployment",rr(!1));q(this,"walletNotDeployed",rr(!1));q(this,"isNavDrawerOpen",rr(!1));q(this,"isNetworkModalOpen",rr(!1));q(this,"walletRequestHandler");q(this,"local",{lastConnectedExternalProviderInfo:new Cg(u0.LAST_CONNECTED_EXTERNAL_PROVIDER_INFO)});q(this,"defaultNetwork",new Cg(u0.DEFAULT_NETWORK));q(this,"getLastConnectedExternalProviderInfo",()=>this.local.lastConnectedExternalProviderInfo.get());q(this,"sendToken",async(e,n,r)=>{var s,i;try{const a=this.store.get(us).account,o=e.chainId;if(!a)throw new Error("No account found");const c=this.store.get(fs).providerForChainId(o);this.isSendingTokenTransaction.set({tokenBalance:e,to:n,amount:r});const l=(s=this.selectedExternalProvider.get())==null?void 0:s.provider;if(!l)throw new Error("No external provider selected");const f=(await this.getExternalProviderAccounts(l))[0];await this.switchToChain(l,o);let d;if(!r)return{hash:""};if(e.contractType===Ms.ContractType.NATIVE?(console.info("Sending native token with address, on chainId: ",e.contractAddress,o),d={to:n,value:fdt(r)}):e.contractType===Ms.ContractType.ERC20&&(console.info("Sending ERC20 token with address, on chainId: ",e.contractAddress,o),d=await new Si(e.contractAddress,h3,c).transfer.populateTransaction(n,P5(r,((i=e.contractInfo)==null?void 0:i.decimals)??18))),!d)throw this.isSendingTokenTransaction.set(void 0),new Error("Could not create transaction");let p;try{p=(await this.sendTransaction(a,l,f,d,o)).hash}catch(g){throw this.isSendingTokenTransaction.set(void 0),g}return{hash:p}}catch(a){throw this.isSendingTokenTransaction.set(void 0),this.toast({variant:"error",title:"External wallet error",description:a.message}),console.error(a),new Error("Could not create transaction")}});q(this,"sendCollectible",async(e,n,r)=>{var s,i;try{const a=this.store.get(us).account,o=e.collectibleInfoParams.chainId;if(!a)throw new Error("No account found");const c=this.store.get(fs).providerForChainId(o);this.isSendingCollectibleTransaction.set({collectibleInfo:e,to:n,amount:r});const l=(s=this.selectedExternalProvider.get())==null?void 0:s.provider;if(!l)throw new Error("No external provider selected");const f=(await this.getExternalProviderAccounts(l))[0];await this.switchToChain(l,o);let d;if(e.collectibleInfoParams.contractType==="ERC721")console.info("Sending ERC721 non-fungible token with address, on chainId: ",e.collectibleInfoParams.address,o),d=await new Si(e.collectibleInfoParams.address,bIe,c).safeTransferFrom.populateTransaction(a,n,e.collectibleInfoParams.tokenId);else if(e.collectibleInfoParams.contractType==="ERC1155"){console.info("Sending ERC1155 token with address, on chainId: ",e.collectibleInfoParams.address,o);const g=new Si(e.collectibleInfoParams.address,vIe,c);if(!r)return{hash:""};d=await g.safeTransferFrom.populateTransaction(a,n,e.collectibleInfoParams.tokenId,P5(r,((i=e==null?void 0:e.collectibleInfoResponse)==null?void 0:i.decimals)??18),"0x")}if(!d)throw this.isSendingCollectibleTransaction.set(void 0),new Error("Could not create transaction");let p;try{console.log("Sending collectible transaction directly through external wallet:",d),p=(await this.sendTransaction(a,l,f,d,o)).hash}catch(g){throw this.isSendingCollectibleTransaction.set(void 0),g}return{hash:p}}catch{throw this.isSendingCollectibleTransaction.set(void 0),new Error("Could not create transaction")}});q(this,"setExternalProvider",async(e,n)=>{if(!e){this.selectedExternalProvider.set(void 0),this.selectedExternalWalletAddress.set(void 0),this.local.lastConnectedExternalProviderInfo.set(void 0);return}const s=(await this.getExternalProviderAccounts(e.provider))[0];this.local.lastConnectedExternalProviderInfo.set(e.info),this.selectedExternalProvider.set(e),this.selectedExternalWalletAddress.set(s),n||this.toast({variant:"success",title:"External wallet added successfully",description:"You can now relay transactions."}),e.provider.on("accountsChanged",async i=>{if(i.length===0){this.selectedExternalProvider.set(void 0),this.selectedExternalWalletAddress.set(void 0);return}if(i[0]!==s){const o=(await this.getExternalProviderAccounts(e.provider))[0];this.selectedExternalWalletAddress.set(o)}})});q(this,"resetSignObservables",()=>{this.isSigningTxn.set(!1),this.toSignTxnDetails.set(void 0),this.toSignMsgDetails.set(void 0),this.toSignPermission.set(void 0),this.toSignResult.set(void 0)});q(this,"checkWalletDeployment",async e=>{const n=this.store.get(us).account;if(!n)throw new Error("No account found");return(await n.status(e)).onChain.deployed});this.store=e,this.walletRequestHandler=new xbt(void 0,new Qbt(e),this.networkStore.networks.get()),this.walletRequestHandler.onConnectOptionsChange=r=>{this.connectOptions.set(r)},this.availableExternalProviders.subscribe(r=>{const s=this.local.lastConnectedExternalProviderInfo.get(),i=r.find(a=>(s==null?void 0:s.name)===a.info.name);i&&this.setExternalProvider(i,!0)});const n=this.store.get(us).account;this.walletRequestHandler.signIn(n??null)}async sendTransaction(e,n,r,s,i){const a=await e.status(i),o=await e.predecorateTransactions(s,a,i),c=await e.signTransactions(o,i,void 0,{serial:!0}),l=await e.decorateTransactions(c,a);await this.switchToChain(n,i);const u=await n.request({method:"eth_estimateGas",params:[{from:r,to:l.entrypoint,data:Mt.transaction.encodeBundleExecData(l)}]});return{hash:await n.request({method:"eth_sendTransaction",params:[{from:r,to:l.entrypoint,data:Mt.transaction.encodeBundleExecData(l),gas:u}]})}}async getExternalProviderAccounts(e){return new Promise((n,r)=>{var s;(s=e.sendAsync)==null||s.call(e,{method:"eth_requestAccounts",params:[]},(i,a)=>{i&&r(i),a.result.length===0&&r(new Error("No accounts found")),n(a.result)})})}async getExternalProviderAddress(e){return(await this.getExternalProviderAccounts(e))[0]}async switchToChain(e,n){return new Promise((r,s)=>{var i;(i=e.sendAsync)==null||i.call(e,{method:"wallet_switchEthereumChain",params:[{chainId:Kd(n)}]},(a,o)=>{a&&s(a),r(o)})})}}class Qbt{constructor(e){this.store=e}getDefaultChainId(){return this.store.get(Jn).defaultNetwork.get()??1}async promptChangeNetwork(e){return this.store.get(fs).networks.get().some(r=>r.chainId===e)?(this.store.get(Jn).defaultNetwork.set(Number(e)),!0):!1}async promptConfirmWalletDeploy(e,n){if(console.log("prompt confirm wallet deploy:",e,n),!e)return Promise.resolve(!1);const r=await this.store.get(Jn).checkWalletDeployment(e);return new Promise((s,i)=>{s(!!r)})}async promptConnect(e){console.log("promptconnect",e);const n=this.store.get(us).account;return await this.store.get(Jn).walletRequestHandler.signIn(n??null),e&&this.store.get(Jn).walletRequestHandler.setConnectOptions(e),new Promise((r,s)=>{const i=this.store.get(Jn).connectDetails.subscribe(a=>{i(),!a||!a.connected?s("connect cancelled by user"):r(a)})})}async promptSignInConnect(e){return console.log("prompt sign in connect:",e),{connected:!1}}async promptSignMessage(e,n){return console.log("prompt sign message:",e,n),e.chainId?e.eip6492!==!0&&!(await this.store.get(us).account.status(e.chainId)).canOnchainValidate&&!await this.promptConfirmWalletDeploy(e.chainId,n)?(this.store.get(Jn).walletNotDeployed.set(!0),Promise.reject("User rejected wallet deploy request")):(this.store.get(Jn).isSigningMsg.set(!0),this.store.get(Jn).toSignMsgDetails.set({message:e,chainId:e.chainId,origin:n}),new Promise((r,s)=>{const i=this.store.get(Jn).toSignPermission.subscribe(()=>{i();const a=this.store.get(Jn).toSignPermission.get();if(this.store.get(Jn).toSignPermission.set(void 0),!a||a==="cancelled")s("request failed");else{const o=this.store.get(Jn).toSignResult.get();o&&r(o.hash)}})})):Promise.reject("No chainId found in message")}promptSignTransaction(e,n,r,s){console.log("prompt sign transaction:",e,n,r,s);let i;Array.isArray(e)?i=e:i=[e];const a=this.store.get(us).accountAddress.get();if(!a)throw new Error("Unknown account address");const o=Mt.transaction.fromTransactionish(a,i);return console.log("prompt sign txn:",o,n,r,s),VJ(a,i),new Promise((c,l)=>{this.store.get(Jn).toSignTxnDetails.set({txn:i,chainId:Number(n),origin:r,projectAccessKey:s}),this.store.get(Jn).isSigningTxn.set(!0);const u=this.store.get(Jn).toSignPermission.subscribe(()=>{u();const f=this.store.get(Jn).toSignPermission.get();if(this.store.get(Jn).toSignPermission.set(void 0),!f||f==="cancelled")l("request failed");else{const d=this.store.get(Jn).toSignResult.get();d&&c(d.hash)}})})}promptSendTransaction(e,n,r,s){return this.promptSignTransaction(e,n,r,s)}}function Zbt(){const[t,e]=F.useState(),n=hU(),r=Vt(Jn),s=eSe(),i=F.useSyncExternalStore(s.subscribe,s.getProviders),[a,o]=F.useState(i.length===0?i==null?void 0:i[0]:null),[c,l]=F.useState(!1);function u(d){return d?(l(!0),{accounts:d.provider.request({method:"eth_requestAccounts"}).finally(()=>{l(!1)}),isLoading:c}):void 0}const f=F.useCallback(async(d,p,g,m)=>{const v=r.selectedExternalProvider.get();if(v){m&&n.add(m,g);try{const A=await v.provider.request({method:"eth_requestAccounts"}),S=A==null?void 0:A[0];await v.provider.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x"+g.toString(16)}]});const I=await v.provider.request({method:"eth_sendTransaction",params:[{from:S,to:d,value:"0x0",data:p}]});return I&&m&&n.update(m,{hash:I,status:"pending"}),{id:m,hash:I}}catch(A){m&&(A.code===4001?n.update(m,{status:"cancelled"}):A.code===4902?n.update(m,{status:"unknown_chain"}):n.update(m,{status:"error",code:String(A.code)}))}}},[r]);return{providers:i,provider:a,setProvider:o,recoveryPayload:t,setRecoveryPayload:e,sendRecoveryPayload:f,getWalletAddresses:u}}function Xbt(t){const[e,n]=F.useState([]),[r,s]=F.useState(!0),[i,a]=F.useState();function o(f){t&&(s(!0),ba.recovery.fetchQueuedPayloads(t,f).then(d=>n(p=>{const g=p==null?void 0:p.map(v=>{const A=d.find(S=>S.id===v.id);return A?{...v,...A}:v}),m=d.filter(v=>!p.some(A=>A.id===v.id));return[...g,...m]})).catch(d=>{a(d)}).finally(()=>{s(!1)}))}F.useEffect(()=>{o()},[t]);const c=e&&e.length?e.map(f=>({...f})):e;function l(f){if(c&&!r&&!i)return c.filter(d=>d.chainId===f)}function u(f){f&&o(f)}return{data:c,isLoading:r,getByChain:l,isError:!!i,error:i,refreshQueue:o,refreshQueueByChainId:u}}const e1t="0.1.1";function t1t(){return e1t}class Gk extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof Gk){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Gk&&n.cause.docsPath||n.docsPath,a=`https://oxlib.sh${s??""}`,o=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${a}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${t1t()}`}),this.cause=n.cause,this.details=r,this.docs=a,this.docsPath=s,this.shortMessage=e}walk(e){return kIe(this,e)}}function kIe(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?kIe(t.cause,e):e?null:t}function PIe(t,e){if(ede(t)>e)throw new c1t({givenSize:ede(t),maxSize:e})}function n1t(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new l1t({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const r1t=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function s1t(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=r1t[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(PIe(r,e.size),i1t(r,e.size)):r}function i1t(t,e){return n1t(t,{dir:"right",size:e})}function a1t(t){return s1t(u1t(t))}function ede(t){return Math.ceil((t.length-2)/2)}function o1t(t,e={}){const{signed:n}=e;e.size&&PIe(t,e.size);const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n)-1n,a=i>>1n;return r<=a?r:r-i-1n}class c1t extends Gk{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class l1t extends Gk{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function u1t(t){return crypto.getRandomValues(new Uint8Array(t))}function f1t(t){if(typeof t=="string"){if(!Ja(t,{strict:!1}))throw new Gg({address:t});return{address:t,type:"json-rpc"}}if(!Ja(t.address,{strict:!1}))throw new Gg({address:t.address});return{address:t.address,nonceManager:t.nonceManager,sign:t.sign,signAuthorization:t.signAuthorization,signMessage:t.signMessage,signTransaction:t.signTransaction,signTypedData:t.signTypedData,source:"custom",type:"local"}}let wq=!1;async function a9({hash:t,privateKey:e,to:n="object"}){const{r,s,recovery:i}=g4.sign(t.slice(2),e.slice(2),{lowS:!0,extraEntropy:q2(wq,{strict:!1})?ah(wq):wq}),a={r:Wn(r,{size:32}),s:Wn(s,{size:32}),v:i?28n:27n,yParity:i};return n==="bytes"||n==="hex"?Kit({...a,to:n}):a}async function d1t(t){const{chainId:e,nonce:n,privateKey:r,to:s="object"}=t,i=t.contractAddress??t.address,a=await a9({hash:fit({address:i,chainId:e,nonce:n}),privateKey:r,to:s});return s==="object"?{address:i,chainId:e,nonce:n,...a}:a}async function h1t({message:t,privateKey:e}){return await a9({hash:Bit(t),privateKey:e,to:"hex"})}async function p1t(t){const{privateKey:e,transaction:n,serializer:r=Iit}=t,s=n.type==="eip4844"?{...n,sidecars:!1}:n,i=await a9({hash:gu(await r(s)),privateKey:e});return await r(n,i)}async function g1t(t){const{privateKey:e,...n}=t;return await a9({hash:$it(n),privateKey:e,to:"hex"})}function m1t(t,e={}){const{nonceManager:n}=e,r=v2(g4.getPublicKey(t.slice(2),!1)),s=iit(r);return{...f1t({address:s,nonceManager:n,async sign({hash:a}){return a9({hash:a,privateKey:t,to:"hex"})},async signAuthorization(a){return d1t({...a,privateKey:t})},async signMessage({message:a}){return h1t({message:a,privateKey:t})},async signTransaction(a,{serializer:o}={}){return p1t({privateKey:t,transaction:a,serializer:o})},async signTypedData(a){return g1t({...a,privateKey:t})}}),publicKey:r,source:"privateKey"}}function y1t(t,{accountIndex:e=0,addressIndex:n=0,changeIndex:r=0,path:s,...i}={}){const a=t.derive(s||`m/44'/60'/${e}'/${r}/${n}`);return{...m1t(v2(a.privateKey),i),getHdKey:()=>a,source:"hd"}}function w1t(t,{passphrase:e,...n}={}){const r=p2e(t,e);return y1t(Jy.fromMasterSeed(r),n)}function OIe(){return F.useCallback(async function(e){try{if(!e)throw new Error("invalid_mnemonic");const n=w1t(e);if(n){const s=await new b5().getWallets(n.address),i=Object.keys(s)[0];if(!i||!n.address)throw new Error("invalid_mnemonic");return{walletAddress:i,recoverySignerAddress:n.address}}}catch(n){throw n instanceof Error&&n.message==="invalid_mnemonic"?new Error("invalid_mnemonic"):n instanceof Error?new Error("empty"):new Error("invalid")}},[])}async function RIe({authStore:t}){const e=await t.getRecoveryMnemonic();if(!e)throw new Error("No mnemonic found");return e}function b1t({awaitedMnemonic:t,sendRecoveryPayload:e}){const n=Vt(us),r=vn(n.accountAddress),s=OIe();return async function(a,o){const c=await RIe({authStore:n}),l=await s(c);if(!l||!l.recoverySignerAddress)throw new Error("No recovery signer address found");const u={type:"call",space:o1t(a1t(20)),nonce:0n,calls:a},f=await ba.recovery.queuePayload(r,o,u).catch(d=>{console.log(d)});if(f)return ba.signatures.onSignatureRequestUpdate(f,async d=>{const p=d==null?void 0:d.signers.find(g=>g.status==="actionable"&&g.address.toLowerCase()===l.recoverySignerAddress.toLowerCase());p&&p.status==="actionable"&&(p!=null&&p.handle)&&p.handle().then(async()=>{const g=await ba.recovery.completePayload(f);await e(g.to,g.data,o,f)}).catch(g=>{console.log(g)}),t.resolve(c)},d=>{console.error("Error fetching signature request:",f,d)},!0),f}}const _Ie=F.createContext(null);function v1t(){const[t,e]=F.useState(),[n,r]=F.useState(void 0),[s,i]=F.useState(0),[a,o]=F.useState(),{providers:c,provider:l,setProvider:u,recoveryPayload:f,setRecoveryPayload:d,sendRecoveryPayload:p,getWalletAddresses:g}=Zbt(),[m,v]=F.useState(),A=Xbt(t),S={walletAddress:e,walletSigner:o,chainId:i,recoveryPayload:d,transactionId:v,destinationAddress:r,provider:u},I={walletAddress:t,walletSigner:a,chainId:s,recoveryPayload:f,transactionId:m,destinationAddress:n,payloads:A,providers:c,provider:l},B=aft(),D=b1t({awaitedMnemonic:B,sendRecoveryPayload:p});return{values:I,set:S,handle:{awaitedMnemonic:B,queuePayload:D,sendRecoveryPayload:p,getWalletAddresses:g}}}function jte(){const t=F.useContext(_Ie);if(!t)throw new Error("useWalletRecovery must be used inside a WalletRecoveryContext Provider");return t}function x1t(t){const{value:e,children:n}=t;return x.jsx(_Ie.Provider,{value:e,children:n})}const E1t=()=>{const t=e=>{e.preventDefault(),window.open("https://github.com/0xsequence/wallet-recovery-app","_blank","noopener,noreferrer")};return x.jsxs(x.Fragment,{children:[x.jsx("style",{children:`
          .github-corner {
            fill: #777;
            color: #151513;
            position: fixed;
            top: 0;
            border: 0;
            right: 0;
            z-index: 100;
          }

          .github-corner:hover .octo-arm {
            animation: octocat-wave 560ms ease-in-out;
          }

          @keyframes octocat-wave {
            0%,
            100% {
              transform: rotate(0);
            }
            20%,
            60% {
              transform: rotate(-25deg);
            }
            40%,
            80% {
              transform: rotate(10deg);
            }
          }

          @media (max-width: 500px) {
            .github-corner:hover .octo-arm {
              animation: none;
            }
            .github-corner .octo-arm {
              animation: octocat-wave 560ms ease-in-out;
            }
          }
        `}),x.jsx("a",{href:"#",className:"github-corner","aria-label":"View source on GitHub",onClick:t,children:x.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 250 250",style:{fill:"#777",color:"#151513",position:"fixed",top:0,border:0,right:0},"aria-hidden":"true",children:[x.jsx("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),x.jsx("path",{d:`M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 
               C122.0,82.7 120.5,78.6 120.5,78.6 
               C119.2,72.0 123.4,76.3 123.4,76.3 
               C127.3,80.9 125.5,87.3 125.5,87.3 
               C122.9,97.6 130.6,101.9 134.4,103.2`,fill:"currentColor",style:{transformOrigin:"130px 106px"},className:"octo-arm"}),x.jsx("path",{d:`M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 
               L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 
               C133.8,88.0 127.5,74.4 143.8,58.0 
               C148.5,53.4 154.0,51.2 159.7,51.0 
               C160.3,49.4 163.2,43.6 171.4,40.1 
               C171.4,40.1 176.1,42.5 178.8,56.2 
               C183.1,58.6 187.2,61.8 190.9,65.4 
               C194.5,69.0 197.7,73.2 200.1,77.6 
               C213.8,80.2 216.3,84.9 216.3,84.9 
               C212.7,93.1 206.9,96.0 205.4,96.6 
               C205.1,102.4 203.0,107.8 198.3,112.5 
               C181.9,128.9 168.3,122.5 157.7,114.1 
               C157.9,116.9 156.7,120.9 152.7,124.9 
               L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z`,fill:"currentColor",className:"octo-body"})]})})]})},A1t="data:image/svg+xml,%3csvg%20width='20'%20height='21'%20viewBox='0%200%2020%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Contracts'%3e%3cg%20id='Subtract'%3e%3cpath%20d='M7%2017.5L7%209.89599C6.55852%209.7031%206.25%209.26258%206.25%208.75C6.25%208.05964%206.80964%207.5%207.5%207.5C8.19036%207.5%208.75%208.05964%208.75%208.75C8.75%209.26258%208.44148%209.7031%208%209.89599L8%2014.9244L10.7331%2013.8995V12.8884C10.3007%2012.6918%2010%2012.256%2010%2011.75C10%2011.0596%2010.5596%2010.5%2011.25%2010.5C11.9404%2010.5%2012.5%2011.0596%2012.5%2011.75C12.5%2012.2691%2012.1836%2012.7143%2011.7331%2012.9032V14.5925L8%2015.9924L8%2017.5L16%2017.5V8.64587L10.4552%208.64587V3.5H4V17.5L7%2017.5Z'%20fill='white'/%3e%3cpath%20d='M15.931%207.65688L11.5103%203.56422L11.5661%207.65688L15.931%207.65688Z'%20fill='white'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",S1t="data:image/svg+xml,%3csvg%20width='20'%20height='21'%20viewBox='0%200%2020%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Wallet'%3e%3cpath%20id='Exclude'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5%206.54947C5%206.99261%205.38931%207.35185%205.86954%207.35185H16C16.5523%207.35185%2017%207.79957%2017%208.35185V15.5C17%2016.0523%2016.5523%2016.5%2016%2016.5H5.49505C4.11707%2016.5%203%2015.4692%203%2014.1977V6.80233C3%205.53079%204.11707%204.5%205.49505%204.5H13.8765C14.2208%204.5%2014.5%204.77917%2014.5%205.12355C14.5%205.46792%2014.2208%205.74709%2013.8765%205.74709H5.86955C5.38931%205.74709%205%206.10633%205%206.54947ZM12%2012C12%2011.1716%2012.6716%2010.5%2013.5%2010.5C14.3284%2010.5%2015%2011.1716%2015%2012C15%2012.8284%2014.3284%2013.5%2013.5%2013.5C12.6716%2013.5%2012%2012.8284%2012%2012Z'%20fill='white'/%3e%3c/g%3e%3c/svg%3e",I1t="/assets/recovery-wallet-bg-mobile-CcgD3StS.jpg",C1t="/assets/recovery-wallet-bg-D55NVi6t.jpg",zJ="data:image/svg+xml,%3csvg%20width='500'%20height='365'%20viewBox='0%200%20500%20365'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_29_10159)'%3e%3cpath%20d='M496.448%20181.441C496.448%20158.416%20478.089%20139.75%20455.442%20139.75C432.796%20139.75%20414.437%20158.416%20414.437%20181.441C414.437%20204.467%20432.796%20223.132%20455.442%20223.132C478.089%20223.132%20496.448%20204.467%20496.448%20181.441Z'%20fill='%237C3AED'/%3e%3cpath%20d='M82.0114%2042.2523C82.0114%2019.227%2063.6525%200.561279%2041.0057%200.561279C18.3589%200.561279%200%2019.227%200%2042.2523C0%2065.2776%2018.3589%2083.9433%2041.0057%2083.9433C63.6525%2083.9433%2082.0114%2065.2776%2082.0114%2042.2523Z'%20fill='%237C3AED'/%3e%3cpath%20d='M82.0114%20322.846C82.0114%20299.821%2063.6525%20281.155%2041.0057%20281.155C18.3589%20281.155%200%20299.821%200%20322.846C0%20345.871%2018.3589%20364.537%2041.0057%20364.537C63.6525%20364.537%2082.0114%20345.871%2082.0114%20322.846Z'%20fill='%237C3AED'/%3e%3cpath%20d='M500%20320.63C500%20301.412%20484.677%20285.833%20465.775%20285.833H161.879C142.977%20285.833%20127.654%20301.412%20127.654%20320.63C127.654%20339.848%20142.977%20355.427%20161.879%20355.427H465.775C484.677%20355.427%20500%20339.848%20500%20320.63Z'%20fill='%237C3AED'/%3e%3cpath%20d='M368.794%20181.441C368.794%20162.223%20353.471%20146.644%20334.569%20146.644H34.2255C15.3234%20146.644%200.000265708%20162.223%200.000265708%20181.441C0.000265708%20200.659%2015.3234%20216.238%2034.2255%20216.238H334.569C353.471%20216.238%20368.794%20200.659%20368.794%20181.441Z'%20fill='%237C3AED'/%3e%3cpath%20d='M500%2042.2523C500%2023.0343%20484.677%207.45507%20465.775%207.45507H161.879C142.977%207.45507%20127.654%2023.0343%20127.654%2042.2523C127.654%2061.4703%20142.977%2077.0495%20161.879%2077.0495H465.775C484.677%2077.0495%20500%2061.4703%20500%2042.2523Z'%20fill='%237C3AED'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_29_10159'%3e%3crect%20width='500'%20height='363.98'%20fill='white'%20transform='translate(0%200.561279)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",T1t={backgroundImage:`url(${C1t})`,backgroundSize:"cover",backgroundPosition:"center"};function N1t(){const t=Nu("isMobile"),e=FL();return x.jsx("div",{className:"h-dvh flex justify-center lg:justify-start p-4 pb-0 pt-10 sm:pt-16 lg:pt-0",style:t?void 0:T1t,children:x.jsxs("div",{className:"flex flex-col justify-start lg:justify-center items-center lg:items-start w-full max-w-800px gap-8 sm:gap-10 z-20 px-4 sm:px-8 lg:px-20 py-10 sm:py-16 lg:py-20",children:[x.jsxs("div",{className:"flex flex-col justify-center items-center lg:items-start gap-6 w-full",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("img",{src:zJ,className:"h-8 sm:h-9 mr-2"}),x.jsxs("div",{className:"flex items-center gap-1 ",children:[x.jsx(ke,{variant:"xlarge",fontWeight:"bold",className:"text-primary",children:"Sequence"}),x.jsx(ke,{variant:"xlarge",fontWeight:"bold",className:"text-primary/70",children:"Wallet Recovery"})]})]}),t&&x.jsx("img",{src:I1t,className:"w-full max-w-none rounded-lg"}),x.jsx(ke,{color:"text100",className:rn("w-full lg:w-3/5 text-2xl sm:text-3xl lg:text-4xl leading-tight",t?"text-center":"text-left"),children:"A fully open source and forever accessible way to recover your Sequence Wallet"})]}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[x.jsx(Zt,{size:"md",onClick:()=>window.open("https://github.com/0xsequence/wallet-recovery-app"),children:"Learn more"}),x.jsx(Zt,{variant:"primary",onClick:()=>e("/recovery"),children:"Start Recovery"})]}),x.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 w-full lg:w-2/3 select-none",children:[x.jsxs(Cs,{className:"flex flex-col gap-2 w-full",children:[x.jsxs("div",{className:"flex flex-row gap-2",children:[x.jsx("img",{src:A1t,className:"w-4 h-4"}),x.jsx(ke,{variant:"normal",fontWeight:"bold",className:"text-primary",children:"Connect to apps"})]}),x.jsx(ke,{variant:"normal",fontWeight:"medium",className:"text-primary/50",children:"Connect your wallet to any web3 application via WalletConnect"})]}),x.jsxs(Cs,{className:"flex flex-col gap-2 w-full",children:[x.jsxs("div",{className:"flex flex-row gap-2",children:[x.jsx("img",{src:S1t,className:"w-4 h-4"}),x.jsx(ke,{variant:"normal",fontWeight:"bold",className:"text-primary",children:"Move assets anywhere"})]}),x.jsx(ke,{variant:"normal",fontWeight:"medium",className:"text-primary/50",children:"Transfer your assets securely to any wallet, fully decentralized"})]})]})]})})}const k1t={"0x087Aa00C1f09464D1D6a9Ff0eE2377dBB7c7B324":[{wallet:"0xaf39AE56e001250FaCBd122b11A90d32A0aD6686",subdigest:"0x0f4490a7aa40f15929635252953ce594ba3342401c2c53eff56451dc147475da"}],"0x09A820a9109E5EC82DCfF24484b2047739a92Abc":[{wallet:"0xcF47342c7064AAA5BA0F4163bEA0c7545756b8BF",subdigest:"0xa598ddbe6372b985f60367a1a9c12cb99e20e38c782d9bc941ddaa9f4c9296e5"}],"0x0aBb5b9d20f06DAdF752CEeBe4df26E585A1d897":[{wallet:"0x3F00C5A7fEadD358429645b29b3d776C5f61892d",subdigest:"0x7c33d7864e6e6f92e39328b407fc8fa0206c6ebdb5a31d9056dcc96bba5eb108"}],"0x0f286489b5b85EAcC4E00e1902e138b5Aa662F1c":[{wallet:"0xD1Dda66401B40c7e9924200f5f9913C00c638f79",subdigest:"0x76009a037ebbb28a9f71f1e68c38291e3b2b1a4bf772a56a79e1a6336cbbc7ab"}],"0x1A535D13c62F240cC7985B05a0229182D546550e":[{wallet:"0x46Ba18e7eCB93362A1804cC47EaD90244945016D",subdigest:"0x0acff6ca38c72b9287ba8163569a452ce12c9ffd64c082feba8a5f7300546579"}],"0x1B9498d7177a09d98ABE532e472e1b9f32dAc9B8":[{wallet:"0x848045071DbdBa2F352dF2f0335e02ba61f205aC"}],"0x253ff3Dd87c440A9565814756f85219F487e2FFe":[{wallet:"0xd18a46E40b29FA6CFC0D9f5A930E72cD0EC1e4D2",subdigest:"0x12822b7fde91535103ee7757fe362bfdca0dc2e25211c6ca7c133c20a66d604f"}],"0x27D263a5707510378823fa496674EeC7656780B6":[{wallet:"0xBc4f7bB193ac09D7eC53eF0a499B073A296A94f0",subdigest:"0xbf3913760753e93aba2f40235dd03e693f85853d7c9f9c5f1f62ce7ee91c6313"}],"0x36fA6B68007575C100c1C2916942ee857dE0778E":[{wallet:"0x52CE3cab58639223cf870A73942175e6C7BA9A0C",subdigest:"0x455b01f5c47ece34a3f4dee5d9b3d3b590d524029f4e845b2d4eccb7e8d9472b"}],"0x3Ed9724712417687eb0eaBc2cA2e452E3d2DCdEc":[{wallet:"0x4955338954fFF19396Fe4bA17D93370cA8b77d2B",subdigest:"0x96c4ddf36a03af12b56cf6dc618ab83d814b86a01c69464f1b94bfca826e47fa"}],"0x3F0c7e32678Bc6dCf9dEfB6368EcaE7B88C69036":[{wallet:"0x592625C316A2F184F0C6a4b2952e9b40Ef111a26",subdigest:"0x5e9cf684e8dcf38d5b079a89ff4644de144c85ca16e3b618ab4ae490becff25f"},{wallet:"0xEBB418588FFc0785B6a2559a281A37c117679D6F",subdigest:"0x98be9228917ad8193e14102ed0a989689ec6af1f04bd731f3cca43c02c1abc07"}],"0x4577CAF3A5caBcaF2038863d361cb32f423d5d53":[{wallet:"0xF68f5A97abAAa940A9Ad3AeD723C2179F8551502",subdigest:"0x336448a71e4188cd95c39b278d6d26144d51dc5b3edfdd2af67c3b0425a2e2d3"}],"0x50d27302c45FE4FC8d7cc435920a22D477d3DEB2":[{wallet:"0x97692217ca8e06D7156ef7f4606faB4624bd10C0",subdigest:"0x898993e7c2394c1c9b63b2cfa637a8a2c7b04ce9387c9ecc9c56ef1f56ae58be"}],"0x57160B380fF4Edf3DA3b1c27e723dc2AB3f057Be":[{wallet:"0xD1Dda66401B40c7e9924200f5f9913C00c638f79",subdigest:"0x89f982d77ae08a8ea17d6755d297615f5756e5363db8a9b95758d5a981f8e4ae"}],"0x6647b94603e0D90265d8869a3656C1b0F9B6caC5":[{wallet:"0x6cDe6f20610FF172Cd838CDF69Aae3c27521CBa4",subdigest:"0xab2d0dbda84cffb9a3934412172236a9d98fd3d6b80d47b35956cc5f935c69de"}],"0x69DD1F76595E8a49252F16DDa69474c3a818E3c0":[{wallet:"0x756F9E22591e0aC2Aa0C365708aF0a516F269979",subdigest:"0x261126c464ac19bb769c407ec28fe026f297357938ba9024bd66bb5a48ca9349"}],"0x6Ae23160FBB280Ae4eE78C476ca9FDb51bBcC444":[{wallet:"0xDfA3338DD0147b5e7793cE040F92462177e00024",subdigest:"0xae67c59800e8dd98b955a5fb857c39971fe5fb29e3e5083246fd122b37c4ee88"}],"0x6B917b4459Db2C9cb774e0a9B0eee668273e191a":[{wallet:"0x676b5FaCD2380F51d4EB1A2492057A31FfB100c5",subdigest:"0x60a62db58b5be8277ff22e8104ead5c4d87d6d1173fd7b2b0174978e663974c7"}],"0x6b593de1F2c6cEf51693323edc4467c2A4D5B78B":[{wallet:"0xD9DF096A66A89e63eE977C5Fda59a65f872a6901",subdigest:"0x8ef909db0fd633cac1445a89dace09c5b2fa1bda2d85e5915f6afc2d547f6a87"}],"0x6c77214450C1060f2f6a093c8054278b77E8769b":[{wallet:"0x16b47E837ff421382D516cA5A79b76aFd8473675",subdigest:"0x67521db115964b2559b99d5854ab07bae09e6e6cb0c1cd3de3d1f553c31c515f"}],"0x70F2E179c95a6e3b9a2Fe742B88568a12FFF7f8B":[{wallet:"0x649ba7F76D856aB021C9EEB8bac3B46f3e72EfD0",subdigest:"0x178be5e2d834d0224794dfbe49cf9621127d3396b75246a32093a21e6db320eb"}],"0x77fCC4D33ae477f217a09Ec8dBEBC22E7e8F5e33":[{wallet:"0xD09C7A6Af7046F45343978A1620391D6237c3762",subdigest:"0xca780c4505a811222e215eceeb2b28f222c1a6b126e9ccc86560f5199c34d5da"}],"0x78C22edc81d7a7A1D690e6C91824Cf9Eff2760c8":[{wallet:"0xFbBFA86B877EAFa40699078E4eC1B544D2168dFC",subdigest:"0xd84553d4372b26e3eb96fa77bd157e4e1b593bff1c54c7e69ad8857673d2266e"}],"0x79621cB0c2c8FbB8Ca20E4177b7DF0Aa7a931e73":[{wallet:"0x3c7eCbe20caf91F377F021560a13D53ef3a1BA11",subdigest:"0xbd64f6f75e64b49c6a4f46b2715ca3bf11e21a7e07702b89ea1607e3884e9d40"}],"0x79A7DF6E89da1AEa293bFa11987d7CE828223a7A":[{wallet:"0x76799a33838A6E0d1160D26e8C47EA9f0e65AF1A",subdigest:"0x858235d87309c9e2d72dca9bfa41b61fbb635ac6d9e099b868ff8a8c99bf8c37"}],"0x7b1A301155c0Fad8e5b95055e2A100333D464eA3":[{wallet:"0x76799a33838A6E0d1160D26e8C47EA9f0e65AF1A",subdigest:"0x31001033b765a3cc9407304daeafeeda015d318e73be3de8832a9dc1377f9340"}],"0x85c5B1f9464723A2cC81F69A71a11dA528E0CBCe":[{wallet:"0xF178cE73DB2bA1C575D5c63ecA490b09ec31949b",subdigest:"0x65e9c76ef7e14697c6fd1822fbd39719b43091f13d2d051c911d1373175c2c42"}],"0x943237FFB0024Bf758A79db00e043789FD8299f0":[{wallet:"0x639b6017C4b8F8a5322205A68a1331A817Dd46e2",subdigest:"0xa3bc90cafcccb0fe0b8c0939fa908216ddc667d6b022fe54efca05ec815c163c"}],"0x9EeA332285d7B3755CB46f7D0D49CF0edcC112Ef":[{wallet:"0x04EfBe99e49001b78bB68c35B0354CD4a2Ac4Fd8",subdigest:"0xd3c43ef36d4347d1b5323fa188cf8482de05631a86bc05b12b8ce3b661f4d2f9"}],"0x9b704574e65F8b785FD125F5f3C4F7E34690Bd02":[{wallet:"0xBA9498300dFE650a2b59A42271ec771B6Ed6a091",subdigest:"0x9894f57b20f78245e02d424a21f0d361038905285f53c51c1949e27f39a9fbb8"}],"0xA923984d96b7327c60f246da366b2525B34C6984":[{wallet:"0x7ae10aA190513577D9Ac9ae146128d97df4F4fF0",subdigest:"0x3b849360d50831070d92bec368b63cf0725525cd7b60f406cee5357731b75457"}],"0xACFC6D1DB5875Cb72E1b6BaddaCe28F45044ee6a":[{wallet:"0xAdAf943368aB95208763ccAcCD5ecB9a7772de40",subdigest:"0xb0d0da150a42bca8103e1c40e5e99c7a190043b3121f52c6d41ae473597d0ebe"}],"0xB278dd7c9FC754dBc82Ac29C6f78B6301BE8E8C6":[{wallet:"0xeCc653CB03a9B6587Bcb58A8372535b6Ea5a17d6",subdigest:"0x6fd9bb4768107b4bd0f3c8e11b00027ee5e6417b1d4ab3d5e56c1724eeb2e3b2"}],"0xBaA9D704C8244071e6B9bF6BcbC2c2281dB75096":[{wallet:"0xb547CcA265A91f7a92d9a97804807962B2A4D7d8",subdigest:"0xfca7ea635bf9e89d7034ce6d9378ff6948eaa340ab2d428e5b157efc82b9f8d5"}],"0xC29fD04F9079c36dC15549e8AAF8F058214F0Dae":[{wallet:"0xB7005885711d54BD3594Be1955266d37470BD053",subdigest:"0xb0bc66ea204ea2cb93ca190189471392b59fb8608cb75a69a7b01b7096338428"}],"0xD2751030a5007895968414443efae561BdCB1Af2":[{wallet:"0x3c7eCbe20caf91F377F021560a13D53ef3a1BA11",subdigest:"0x2872f961dd02e7b3fabd4a7bed036259085de28fe2f1c0f49a5d1be6ae4c7b07"}],"0xD721d5849fDE7862E77D251B6fA711114f4579Ab":[{wallet:"0x77415fb6aFe8A13275b088f1e197Bd9EDa1AA95C",subdigest:"0xc775316600b59750707446a7915cf88cc6f1827ce931dd688bf5990a7b95ec29"}],"0xE1B6c2c194dF83A8E01F8C582ddA58840fE46318":[{wallet:"0xFbBFA86B877EAFa40699078E4eC1B544D2168dFC",subdigest:"0xde7ebed8b2c62552e8ff5a08d2e5b33d336d709e6cf2812b9874cd7b5fd5189e"}],"0xE5Ed2A916971Fa6fe07EbD4564DeAaF2c20A7684":[{wallet:"0xFDB7922bA08BAbad2e3e36b66e0521c7EEA0faEF"}],"0xF9ED1e54dc86Bf248FBe059D4aEfD8183F0A816F":[{wallet:"0xCdFdaDB6F2b2f3c7db93521AbD05a3C32aF6b226",subdigest:"0x0433c483ced183cee562b8061788fc93d0c9f666af896096a5e184076f787eac"}],"0xa3CF0b935AccFd8bbE569B984D9Bc7Ec775ce22d":[{wallet:"0x23C6B8E47fa9f40e73E6627598d13085130f3ed6",subdigest:"0x13e9cd21769bc2a4f779b0f73c1cc7ca6c96c6af3262721eec17ac72104fef32"}],"0xbe9f4fB13fbC98042a32dC8354A339258abf1456":[{wallet:"0x81fF1aD4232671403e0f3CC85D021144511E3B6e",subdigest:"0x130c5b993a04ab84b0b074ea69241d6f3c040eced24dbe7c2015263718526670"}],"0xd4b26195aD1487DE6a42Fd69bC81CEbc8b86f0b5":[{wallet:"0xF36A0bd53d85307b35f90756263984329FBfA176",subdigest:"0x13d918ac4e97df0477fcab1c210ef1f96a999abe64dd07e48017b96c4902f50b"}],"0xdaD0038b8BBf78Ac84a4566E75269339Daa0dEdC":[{wallet:"0x8Fd48EB1ecDc0652306de1A0A8BA5561Ba733351",subdigest:"0x3541d7b2f07d87fa8b30c9ef1594da2353d45c40830f0c8e01126e3c89b9b508"}],"0xe7d51Cd5097A287a3B63014dc453Cfb8D9A03152":[{wallet:"0x4E5B1F98F81372BD4B763Be9bF50Aa6C5B7b9913",subdigest:"0x818fbd74398f446b4d7fcb207bf6377393fa923732243995d8464844ec8d42ce"}],"0xed7F28464630398E06e0Fa0Fc04FEa2fe40427aB":[{wallet:"0x6D0f613C239ed1d409C4e41758ACd55E0b1Cb410",subdigest:"0xe6baef08a191785d5d3897cb3e96f3473585d2f034657a4134754c5206b87268"}],"0xf24d3aFE0768827EAe9f671F3C1c283BfFAF0C19":[{wallet:"0xf03Bf61943e00fa3557E496409e1E9c95a1c24E4",subdigest:"0x3d1192dcd531e9ec60795b4129b03eb54b9226bc2d08be3f2b2524ae80244afb"}],"0xf3bf75114bEf71abE4E87f8CA4dD82E372b948A9":[{wallet:"0x3e270820e36EC3C29903C2635B0f53f192Dc29ab",subdigest:"0x70f563cb3ba62214e88d61e55450a8f4245bc5666aa006c93802ad2e96d3ac05"}],"0xf95C86e3a52dEbf8b984983852CAc5d8652C8A9A":[{wallet:"0xb07d236F2B5d1f4AB12236e94ac8049dE40321F4",subdigest:"0x877c04b91ea48703e9cc936f4506d89943ed8b9ec32b15990eea41ce0c59dde7"}],"0xfed1D937a8708001A23AFD8AEd02f9E05de9f251":[{wallet:"0x6743b60A94898E228c5aa642A2e11cb595dCB1fB"}]},BIe=(t,e)=>t.toLowerCase()===e.toLowerCase();async function MIe(t,e){const n=await ba.recovery.getSigners(t);if(!n||n.length===0)throw new Error("no_signers");const r=n.find(s=>s.kind==="login-mnemonic"&&s.isRecovery&&BIe(s.address,e));if(!r)throw new Error("signer_not_found");return r}function P1t(){const{set:t}=jte();return async function(n,r){const s=await MIe(n,r);return t.walletSigner(s),t.walletAddress(n),s}}const O1t=F.createContext(null),R1t=F.createContext({}),_1t=F.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),B1t=typeof window<"u",M1t=B1t?F.useLayoutEffect:F.useEffect;function DIe(t){const e=F.useRef(null);return e.current===null&&(e.current=t()),e.current}class D1t extends F.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function L1t({children:t,isPresent:e}){const n=F.useId(),r=F.useRef(null),s=F.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=F.useContext(_1t);return F.useInsertionEffect(()=>{const{width:a,height:o,top:c,left:l}=s.current;if(e||!r.current||!a||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return i&&(u.nonce=i),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${c}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),x.jsx(D1t,{isPresent:e,childRef:r,sizeRef:s,children:F.cloneElement(t,{ref:r})})}const U1t=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:a})=>{const o=DIe(F1t),c=F.useId(),l=F.useCallback(f=>{o.set(f,!0);for(const d of o.values())if(!d)return;r&&r()},[o,r]),u=F.useMemo(()=>({id:c,initial:e,isPresent:n,custom:s,onExitComplete:l,register:f=>(o.set(f,!1),()=>o.delete(f))}),i?[Math.random(),l]:[n,l]);return F.useMemo(()=>{o.forEach((f,d)=>o.set(d,!1))},[n]),F.useEffect(()=>{!n&&!o.size&&r&&r()},[n]),a==="popLayout"&&(t=x.jsx(L1t,{isPresent:n,children:t})),x.jsx(O1t.Provider,{value:u,children:t})};function F1t(){return new Map}const rR=t=>t.key||"";function tde(t){const e=[];return F.Children.forEach(t,n=>{F.isValidElement(n)&&e.push(n)}),e}const V1t=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const o=F.useMemo(()=>tde(t),[t]),c=o.map(rR),l=F.useRef(!0),u=F.useRef(o),f=DIe(()=>new Map),[d,p]=F.useState(o),[g,m]=F.useState(o);M1t(()=>{l.current=!1,u.current=o;for(let S=0;S<g.length;S++){const I=rR(g[S]);c.includes(I)?f.delete(I):f.get(I)!==!0&&f.set(I,!1)}},[g,c.length,c.join("-")]);const v=[];if(o!==d){let S=[...o];for(let I=0;I<g.length;I++){const B=g[I],D=rR(B);c.includes(D)||(S.splice(I,0,B),v.push(B))}a==="wait"&&v.length&&(S=v),m(tde(S)),p(o);return}const{forceRender:A}=F.useContext(R1t);return x.jsx(x.Fragment,{children:g.map(S=>{const I=rR(S),B=o===g||c.includes(I),D=()=>{if(f.has(I))f.set(I,!0);else return;let V=!0;f.forEach(O=>{O||(V=!1)}),V&&(A==null||A(),m(u.current),s&&s())};return x.jsx(U1t,{isPresent:B,initial:!l.current||r?void 0:!1,custom:B?void 0:n,presenceAffectsLayout:i,mode:a,onExitComplete:B?void 0:D,children:S},I)})})};function $1t({handleSignOut:t}){return x.jsxs("div",{className:"flex flex-col p-6 gap-6",children:[x.jsx(ke,{variant:"large",fontWeight:"bold",color:"text100",className:"mr-8",children:"Are you sure you want to sign out?"}),x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text50",children:"This will disconnect all Dapps, tokens, and relay wallet connections, and youll need to reconnect them manually."}),x.jsxs("div",{className:"flex flex-row justify-end gap-2",children:[x.jsx(Zt,{size:"md",shape:"square",variant:"primary",onClick:()=>t(!0),children:"Yes, sign out"}),x.jsx(Zt,{size:"md",shape:"square",onClick:()=>t(),children:"Cancel"})]})]})}const o9=(t,e,n)=>t.slice(0,e)+"..."+t.slice(-n);function nde(){const t=Vt(us),e=vn(t.accountAddress),[n,r]=F.useState(!1),[s,i]=F.useState(!1),[a,o]=F.useState(!1),c=FL();F.useEffect(()=>{if(a){const u=setTimeout(()=>{o(!1)},1e3);return()=>clearTimeout(u)}},[a]);const l=async()=>{await navigator.clipboard.writeText(e),o(!0)};return x.jsxs(ize,{open:n,onOpenChange:r,children:[x.jsx(aze,{asChild:!0,children:x.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 bg-transparent border-none cursor-pointer",onClick:()=>{r(!0)},children:x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(R7,{address:e,size:"sm"}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text100",children:o9(e,4,4)})]})})}),n&&x.jsx(oze,{asChild:!0,side:"bottom",sideOffset:8,align:"center",children:x.jsx("div",{className:"bg-background-raised rounded-xl",children:x.jsxs(Cs,{className:"flex flex-col gap-2  rounded-xl",children:[x.jsx(Zt,{shape:"square",size:"sm",variant:"secondary",onClick:l,className:"w-full bg-background-raised hover:bg-background-raised/80 border-border-button hover:border-border-button/80 ",children:x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[a?x.jsx(Ff,{}):x.jsx(z1e,{}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text100",children:"Copy wallet address"})]})}),x.jsx(Zt,{shape:"square",size:"sm",className:"w-full bg-background-raised hover:bg-background-raised/80 border-border-button hover:border-border-button/80 ",onClick:()=>i(!0),children:x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(vWe,{}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text100",children:"Sign out"})]})})]})})}),s&&x.jsx(Sl,{size:"sm",onClose:()=>i(!1),children:x.jsx($1t,{handleSignOut:u=>{u&&(t.logout(),c("/")),i(!1)}})})]})}const LIe="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='chain'%3e%3cpath%20id='Union'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M12.2383%203.6704L8.99999%201.80078L5.76172%203.6704V7.40963L8.99999%209.27924L12.2383%207.40963V3.6704ZM6.66172%204.37375V6.89001L8.54994%207.98018V5.33263L6.66172%204.37375ZM9.44994%205.31023V7.98023L11.3383%206.89001V4.3701L9.44994%205.31023Z'%20fill='%23888888'/%3e%3cpath%20id='Union_2'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.27659%2010.2798L5.03832%208.41016L1.80005%2010.2798V14.019L5.03832%2015.8886L8.27659%2014.019V10.2798ZM2.70005%2010.9831V13.4994L4.58827%2014.5896V11.942L2.70005%2010.9831ZM5.48827%2011.9196V14.5896L7.37659%2013.4994V10.9795L5.48827%2011.9196Z'%20fill='%23888888'/%3e%3cpath%20id='Union_3'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M16.3764%2010.2798L13.1382%208.41016L9.8999%2010.2798V14.019L13.1382%2015.8886L16.3764%2014.019V10.2798ZM10.7999%2010.9831V13.4994L12.6881%2014.5896V11.942L10.7999%2010.9831ZM13.5881%2011.9196V14.5896L15.4764%2013.4994V10.9795L13.5881%2011.9196Z'%20fill='%23888888'/%3e%3c/g%3e%3c/svg%3e",Hte="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='External%20Link%20Arrow'%3e%3cpath%20id='Union'%20d='M11.3471%206.07461H6.67672V4.72461H13.6517V11.6996H12.3017V7.0292L5.35401%2013.9769L4.39941%2013.0223L11.3471%206.07461Z'%20fill='%23fff'/%3e%3c/g%3e%3c/svg%3e",j1t=({topOffset:t})=>{const e=Vt(Jn),n=()=>{e.isNetworkModalOpen.set(!0)},r=s=>{e.isNavDrawerOpen.set(s)};return x.jsx("div",{className:"fixed left-0 w-vw h-vh bg-backgroundOverlay flex flex-row lg:hidden z-20",style:{top:t},children:x.jsxs("div",{style:{width:"75%"},className:"absolute bg-background-primary flex flex-col gap-5 h-full max-h-screen overflow-y-scroll px-3 md:px-6 py-4 md:py-6 border-l border-backgroundBackdrop",children:[x.jsxs("div",{className:"flex flex-row gap-2",onClick:()=>window.open("https://docs.sequence.xyz/"),children:[x.jsx("img",{src:Hte,height:"5"}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text50",children:"Docs"})]}),x.jsxs("div",{className:"flex flex-row gap-2",onClick:()=>{n(),r(!1)},children:[x.jsx("img",{src:LIe,height:"5"}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text50",children:"Networks"})]})]})})},bq=61;function qte(){const t=Nu("isMobile"),e=Vt(us),n=Vt(Jn),r=vn(e.accountAddress),s=vn(n.isNavDrawerOpen),i=F.useRef(null),[a,o]=F.useState(bq);F.useLayoutEffect(()=>{const u=i.current;if(!u)return;const f=()=>{o(u.offsetHeight||bq)};f();const d=new ResizeObserver(f);return d.observe(u),()=>{d.disconnect()}},[]);const c=()=>{n.isNetworkModalOpen.set(!0)},l=u=>{n.isNavDrawerOpen.set(u)};return x.jsx("div",{style:{paddingBottom:`${a}px`},className:"flex flex-col",children:x.jsxs("div",{ref:i,className:"bg-background-primary fixed w-full z-10",children:[x.jsx("div",{style:{minHeight:bq-1},className:"flex flex-row flex-wrap justify-between items-center gap-3 px-4 py-2 sm:px-6",children:t?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex flex-row items-center gap-2 shrink-0",children:[x.jsx(V1t,{children:s&&x.jsx(j1t,{topOffset:a})}),x.jsx(Ia,{variant:"text",onClick:()=>l(!s),icon:fWe}),x.jsx("img",{src:zJ,className:"ml-2 h-5 w-auto"})]}),x.jsx("div",{className:"flex flex-row flex-wrap items-center gap-3",children:r&&x.jsx(nde,{})})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("img",{src:zJ,className:"h-5 w-auto shrink-0"}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx(ke,{variant:"large",fontWeight:"medium",className:"text-primary",children:"Sequence"}),x.jsx(ke,{variant:"large",fontWeight:"medium",className:"text-primary/70",children:"Wallet Recovery"})]})]}),x.jsxs("div",{className:"flex flex-row flex-wrap items-center gap-4",children:[x.jsx(Zt,{variant:"text",onClick:()=>window.open("https://docs.sequence.xyz/"),children:x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("img",{src:Hte,height:"5"}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text50",children:"Docs"})]})}),x.jsx(Zt,{variant:"text",onClick:()=>{c()},children:x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("img",{src:LIe,height:"5"}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text50",children:"Networks"})]})}),r&&x.jsx(nde,{})]})]})}),x.jsx("div",{className:"h-0.5 bg-backgroundBackdrop"})]})})}const H1t=({wordCount:t=12,onMnemonicChange:e,value:n=[]})=>{const[r,s]=F.useState(t),[i,a]=F.useState(n.length>0?n:Array(r).fill("")),[o,c]=F.useState(!1),l=(d,p)=>{const g=p.split(/[\s,]+/).map(A=>A.trim()).filter(A=>A.length>0);if(g.length===1){u(d,g[0]);return}let m=r;g.length===24?m=24:g.length===12&&(m=12),m!==r&&s(m);const v=Array(m).fill("");for(let A=0;A<Math.min(g.length,m);A++)v[A]=g[A];a(v),e&&e(v.join(" "))},u=(d,p)=>{const g=[...i];g[d]=p.trim(),a(g),e&&e(g.join(" "))},f=d=>{s(d);const p=Array(d).fill("");if(d>r)for(let g=0;g<Math.min(i.length,d);g++)p[g]=i[g];else for(let g=0;g<d;g++)p[g]=i[g]||"";a(p),e&&e(p.join(" "))};return x.jsxs("div",{className:"flex flex-col gap-4",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center rounded-md p-2 w-full sm:w-fit",children:[x.jsx(Zt,{shape:"square",variant:r===12?"primary":"secondary",size:"xs",onClick:()=>f(12),children:x.jsx(ke,{className:"px-4",variant:"small",color:r===12?"text100":"text50",children:"12 Words"})}),x.jsx(Zt,{shape:"square",variant:r===24?"primary":"secondary",size:"xs",onClick:()=>f(24),children:x.jsx(ke,{className:"px-4",variant:"small",color:r===24?"text100":"text50",children:"24 Words"})})]}),x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsxs("div",{className:"flex flex-row justify-end items-center gap-2",children:[x.jsx(ke,{variant:"small",color:"text50",children:o?"Hide":"Show"}),x.jsx(Ia,{icon:o?Y1e:X1e,onClick:()=>c(!o),size:"xs",variant:"text"})]}),x.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:Array.from({length:r}).map((d,p)=>x.jsxs("div",{className:"flex flex-col gap-1 relative",children:[x.jsx("p",{className:"text-center text-primary/30 font-bold absolute top-1/2 left-4 -translate-x-1/2 -translate-y-1/2 z-10 text-sm pointer-events-none",children:p+1}),x.jsx(na,{name:`word-${p}`,autoFocus:p===0,value:i[p]||"",onChange:g=>u(p,g.target.value),onPaste:g=>{g.preventDefault();const m=g.clipboardData.getData("text");l(p,m)},className:"bg-background-raised w-full h-12 py-3.5 px-6 rounded-lg text-primary text-center",style:{WebkitTextSecurity:!o&&i[p]?"disc":"none",paddingLeft:40}})]},p))})]})]})};function q1t({onClose:t}){const e=Vt(fs),n=Rb(),[r,s]=F.useState(),[i,a]=F.useState(),[o,c]=F.useState(),[l,u]=F.useState(),[f,d]=F.useState(),[p,g]=F.useState(),m=async()=>{if(r&&i&&o)await e.addNetwork({chainId:Number(r),name:i,title:i,type:Et.MAINNET,rpcUrl:o,blockExplorer:l?{rootUrl:l}:void 0,nativeToken:{name:f||"Ether",symbol:p||"ETH",decimals:18}});else throw new Error("Please fill in all required fields, marked with *")},v=()=>{s(void 0),a(void 0),c(void 0),u(void 0),d(void 0),g(void 0)};return x.jsxs("div",{className:"flex flex-col w-full",children:[x.jsxs("div",{className:"flex flex-row items-center p-6 gap-4",children:[x.jsx(Ia,{icon:PZ,onClick:t,size:"sm"}),x.jsx(ke,{variant:"large",fontWeight:"bold",color:"text100",children:"Add Network"})]}),x.jsxs("div",{className:"flex flex-col p-6 gap-6",children:[x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Chain ID *"}),x.jsx(na,{name:"chainId",spellCheck:!1,value:r??"",onChange:A=>{s(A.target.value)}})]}),x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Network Name *"}),x.jsx(na,{name:"networkName",spellCheck:!1,value:i??"",onChange:A=>{a(A.target.value)}})]}),x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"RPC URL *"}),x.jsx(na,{name:"rpcUrl",spellCheck:!1,value:o??"",onChange:A=>{c(A.target.value)}})]}),x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Block Explorer URL (Optional)"}),x.jsx(na,{name:"blockExplorerUrl",spellCheck:!1,value:l??"",onChange:A=>{u(A.target.value)}})]}),x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Native Token Name (default: ETH)"}),x.jsx(na,{name:"tokenName",spellCheck:!1,value:f??"",onChange:A=>{d(A.target.value)}})]}),x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Native Token Symbol (default: ETH)"}),x.jsx(na,{name:"tokenSymbol",spellCheck:!1,value:p??"",onChange:A=>{g(A.target.value)}})]})]}),x.jsxs("div",{className:"absolute bottom-0 right-0 w-full",children:[x.jsx("div",{className:"h-0.5 bg-backgroundBackdrop"}),x.jsxs("div",{className:"flex flex-row justify-end items-center gap-2 p-6",children:[x.jsx(Zt,{shape:"square",onClick:()=>{v(),t()},children:x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Cancel"})}),x.jsx(Zt,{variant:"primary",shape:"square",onClick:async()=>{try{await m(),n({variant:"success",title:"Network added",description:`You can now use ${i} network`}),v(),t()}catch(A){n({variant:"error",title:"Could not add network",description:A.message}),console.error(A)}},children:x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Confirm"})})]})]})]})}function K1t(){const t=Vt(fs),[e,n]=F.useState(t.arweaveGatewayUrl.get()),[r,s]=F.useState(t.arweaveGraphqlUrl.get()),i=Object.values(vn(t.unsavedArweaveURLs)||{}).length>0;return F.useEffect(()=>{e&&r&&(e!==t.arweaveGatewayUrl.get()||r!==t.arweaveGraphqlUrl.get()||i)&&t.addUnsavedArweaveURLs(e,r)},[e,r]),x.jsxs("div",{className:"flex flex-col gap-2 p-6",children:[x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Gateway URL"}),x.jsx(na,{name:"arweaveGatewayUrl",spellCheck:!1,value:e??"",onChange:a=>{n(a.target.value)}})]}),x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"GraphQL URL"}),x.jsx(na,{name:"arweaveGraphqlUrl",spellCheck:!1,value:r??"",onChange:a=>{s(a.target.value)}})]})]})}function G1t(){const t=Vt(fs),e=vn(t.unsavedNetworkEditChainIds),n=vn(t.unsavedArweaveURLs);return x.jsxs("div",{className:"flex flex-col w-full absolute bottom-0 bg-background-primary",children:[x.jsx("div",{className:"h-0.5 bg-backgroundBackdrop"}),x.jsxs("div",{className:"flex flex-row justify-end items-center gap-2 p-5",children:[x.jsxs(Zt,{shape:"square",onClick:()=>t.isAddingNetwork.set(!0),children:[x.jsx(P7,{}),x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Add Network"})]}),x.jsx(Zt,{variant:"primary",shape:"square",disabled:e.length===0&&!Object.values(n||{}).length,onClick:()=>t.saveUnsavedNetworkEdits(),children:x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Confirm"})})]})]})}function vq({value:t}){const e=t===Et.MAINNET?"Mainnets":t===Et.TESTNET?"Testnets":"Arweave";return x.jsx(DG,{value:t,className:"h-8 px-4",children:e})}function W1t(){return x.jsxs("div",{className:"flex flex-col w-full absolute bg-background-primary",children:[x.jsxs("div",{className:"p-6",children:[x.jsx(ke,{variant:"large",fontWeight:"bold",color:"text80",children:"Networks"}),x.jsxs(ove,{className:"mt-6 h-8 justify-start",children:[x.jsx(vq,{value:Et.MAINNET}),x.jsx(vq,{value:Et.TESTNET}),x.jsx(vq,{value:"arweave"})]})]}),x.jsx("div",{className:"h-0.5 bg-backgroundBackdrop"})]})}function z1t({network:t}){var g;const e=Vt(fs),n=vn(e.unsavedNetworkEditChainIds).includes(t.chainId),s=vn(e.userAdditionNetworkChainIds).includes(t.chainId),i=e.editedNetworkChainIds.get().includes(t.chainId),[a,o]=F.useState(t.rpcUrl),[c,l]=F.useState(((g=t.blockExplorer)==null?void 0:g.rootUrl)??""),[u,f]=F.useState(t.disabled),[d,p]=F.useState(!0);return F.useEffect(()=>{(async()=>{const v=await e.isValidRpcUrl(a);p(v)})()},[a]),F.useEffect(()=>{var m;if(a!==t.rpcUrl||c!==((m=t.blockExplorer)==null?void 0:m.rootUrl)||u!==t.disabled||n){const v={...t};v.rpcUrl=a,v.blockExplorer={rootUrl:c},v.disabled=u,e.addUnsavedNetworkEdit(v)}},[a,c,u]),x.jsxs(Vme,{className:"rounded-lg border border-border-normal bg-background-secondary ",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("div",{className:"flex items-center justify-center aspect-square pl-3",children:x.jsx(o4,{checked:!u,size:"lg",className:"shrink-0","aria-label":`${u?"Enable":"Disable"} ${t.title}`,onCheckedChange:m=>f(m!==!0)})}),x.jsx($me,{asChild:!0,children:x.jsxs("button",{type:"button",className:"flex flex-1 cursor-pointer items-start justify-between gap-2 border-none my-auto text-left p-4",children:[x.jsxs("div",{className:"flex min-w-0 flex-row items-center gap-2",children:[x.jsx(a5,{chainId:t.chainId,size:"sm"}),x.jsxs("div",{className:"flex min-w-0 flex-col gap-0.5",children:[x.jsxs(ke,{variant:"normal",fontWeight:"medium",color:d?n?"warning":"text80":"negative",className:"truncate",children:[t.title," ",!d&&"(Invalid RPC URL)"," ",n&&"*"]}),(i||s)&&x.jsx(ke,{variant:"xsmall",fontWeight:"medium",color:"text50",className:"truncate",children:s?`(Chain Id "${t.chainId}", added by you)`:"(edited)"})]})]}),x.jsx(AL,{color:u?"text50":"text100"})]})})]}),x.jsx(jme,{children:x.jsxs("div",{className:"flex flex-col gap-3 p-4",children:[x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"RPC URL"}),x.jsx(na,{name:"rpcUrl",spellCheck:!1,value:a??"",onChange:m=>{o(m.target.value)}})]}),x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Block Explorer URL"}),x.jsx(na,{name:"blockExplorerUrl",spellCheck:!1,value:c??"",onChange:m=>{l(m.target.value)}})]})]})})]})}function rde({networks:t}){return x.jsx("div",{className:"flex flex-col gap-3 p-6",children:t.map((e,n)=>x.jsx(z1t,{network:e},n))})}function UIe(){const t=Vt(fs),e=vn(t.networks),n=vn(t.userAdditionNetworkChainIds),r=vn(t.isAddingNetwork),i=e.filter(l=>l.type===Et.MAINNET).sort((l,u)=>n.includes(l.chainId)?-1:1),a=e.filter(l=>l.type===Et.TESTNET),[o,c]=F.useState(Et.MAINNET);return x.jsx("div",{className:"flex flex-col",children:r?x.jsx(q1t,{onClose:()=>t.isAddingNetwork.set(!1)}):x.jsxs("div",{className:"flex flex-col justify-between",children:[x.jsxs(ave,{value:o,onValueChange:l=>c(l),children:[x.jsx(W1t,{}),x.jsxs("div",{className:"p-6",style:{marginTop:"108px",marginBottom:"85px"},children:[x.jsx(rj,{value:Et.MAINNET,children:x.jsx(rde,{networks:i})}),x.jsx(rj,{value:Et.TESTNET,children:x.jsx(rde,{networks:a})}),x.jsx(rj,{value:"arweave",children:x.jsx(K1t,{})})]})]}),x.jsx(G1t,{})]})})}function J1t({possibleWallets:t}){return x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text80",children:"Wallet found"}),t.map(e=>x.jsx("div",{children:x.jsx("div",{className:"flex flex-row items-center gap-2 min-h-[52px]",children:x.jsxs("div",{className:"bg-background-raised rounded-md flex items-center p-4 w-full gap-2",children:[x.jsx(Ff,{className:"w-4 h-4 text-positive"}),x.jsx(R7,{address:e,size:"xs"}),x.jsx(ke,{variant:"normal",fontWeight:"medium",className:"text-primary/80 text-xs sm:text-sm",style:{fontFamily:"monospace"},children:o9(e,20,6)})]})})},e))]})}class Y1t{constructor(e){q(this,"isLoading",rr(!0));q(this,"payloads",rr([]));q(this,"mainnetNetworks",e6e.filter(e=>e.type===Et.MAINNET));q(this,"chains",this.mainnetNetworks.map(e=>e.chainId));q(this,"refetch",()=>{this.fetchPayloads()});this.store=e;const n=this.store.get(us);n.accountAddress.subscribe(s=>{s?this.fetchPayloads():this.clear()}),n.accountAddress.get()?this.fetchPayloads():this.isLoading.set(!1)}async fetchPayloads(){this.isLoading.set(!0);const n=this.store.get(us).accountAddress.get();if(!this.chains||!n){this.isLoading.set(!1);return}this.clearPayloadsForAddress(n);const r=this.chains.map(s=>this.fetchPayloadsForChain(n,s));try{const i=(await Promise.allSettled(r)).filter(a=>a.status==="fulfilled").flatMap(a=>a.value);this.addPayloads(i)}catch(s){console.error("Error fetching queued payloads:",s)}finally{this.isLoading.set(!1)}}async fetchPayloadsForChain(e,n){try{return await ba.recovery.fetchQueuedPayloads(e,n)}catch(r){return console.error(`Error fetching payloads for chain ${n}:`,r),[]}}clearPayloadsForAddress(e){const r=this.payloads.get().filter(s=>!BIe(s.wallet,e));this.payloads.set(r)}addPayloads(e){if(e.length===0)return;const r=[...this.payloads.get(),...e],s=[...new Map(r.map(i=>[i.id,i])).values()];this.payloads.set(s)}clear(){this.payloads.set([]),this.isLoading.set(!1)}}function Q1t(){const t=Vt(Y1t),e=vn(t.payloads),n=vn(t.isLoading);return{payloads:e,isLoading:n,refetch:t.refetch}}let sR=[];const xq={value:()=>sR,subscribe:t=>{function e(n){sR.some(r=>r.info.uuid===n.detail.info.uuid)||(sR=[...sR,n.detail],t())}return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new Event("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}},FIe=()=>F.useSyncExternalStore(xq.subscribe,xq.value,xq.value);var Kte={exports:{}},X3=typeof Reflect=="object"?Reflect:null,sde=X3&&typeof X3.apply=="function"?X3.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},G_;X3&&typeof X3.ownKeys=="function"?G_=X3.ownKeys:Object.getOwnPropertySymbols?G_=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:G_=function(e){return Object.getOwnPropertyNames(e)};function Z1t(t){console&&console.warn&&console.warn(t)}var VIe=Number.isNaN||function(e){return e!==e};function xs(){xs.init.call(this)}Kte.exports=xs;Kte.exports.once=nvt;xs.EventEmitter=xs;xs.prototype._events=void 0;xs.prototype._eventsCount=0;xs.prototype._maxListeners=void 0;var ide=10;function dF(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(xs,"defaultMaxListeners",{enumerable:!0,get:function(){return ide},set:function(t){if(typeof t!="number"||t<0||VIe(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");ide=t}});xs.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};xs.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||VIe(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function $Ie(t){return t._maxListeners===void 0?xs.defaultMaxListeners:t._maxListeners}xs.prototype.getMaxListeners=function(){return $Ie(this)};xs.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")sde(c,this,n);else for(var l=c.length,u=GIe(c,l),r=0;r<l;++r)sde(u[r],this,n);return!0};function jIe(t,e,n,r){var s,i,a;if(dF(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]),a===void 0)a=i[e]=n,++t._eventsCount;else if(typeof a=="function"?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),s=$Ie(t),s>0&&a.length>s&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,Z1t(o)}return t}xs.prototype.addListener=function(e,n){return jIe(this,e,n,!1)};xs.prototype.on=xs.prototype.addListener;xs.prototype.prependListener=function(e,n){return jIe(this,e,n,!0)};function X1t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function HIe(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=X1t.bind(r);return s.listener=n,r.wrapFn=s,s}xs.prototype.once=function(e,n){return dF(n),this.on(e,HIe(this,e,n)),this};xs.prototype.prependOnceListener=function(e,n){return dF(n),this.prependListener(e,HIe(this,e,n)),this};xs.prototype.removeListener=function(e,n){var r,s,i,a,o;if(dF(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,a=r.length-1;a>=0;a--)if(r[a]===n||r[a].listener===n){o=r[a].listener,i=a;break}if(i<0)return this;i===0?r.shift():evt(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,o||n)}return this};xs.prototype.off=xs.prototype.removeListener;xs.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),a;for(s=0;s<i.length;++s)a=i[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function qIe(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?tvt(s):GIe(s,s.length)}xs.prototype.listeners=function(e){return qIe(this,e,!0)};xs.prototype.rawListeners=function(e){return qIe(this,e,!1)};xs.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):KIe.call(t,e)};xs.prototype.listenerCount=KIe;function KIe(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}xs.prototype.eventNames=function(){return this._eventsCount>0?G_(this._events):[]};function GIe(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function evt(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function tvt(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function nvt(t,e){return new Promise(function(n,r){function s(a){t.removeListener(e,i),r(a)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}WIe(t,e,i,{once:!0}),e!=="error"&&rvt(t,s,{once:!0})})}function rvt(t,e,n){typeof t.on=="function"&&WIe(t,"error",e,n)}function WIe(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Bu=Kte.exports;const Gte=em(Bu);var ade=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},svt=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),ivt=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),avt=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),ovt=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),cvt=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),lvt=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,uvt=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ode=3,fvt=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",lvt]],cde=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function dvt(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new cvt:typeof navigator<"u"?pvt(navigator.userAgent):mvt()}function hvt(t){return t!==""&&fvt.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function pvt(t){var e=hvt(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new ovt;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<ode&&(s=ade(ade([],s,!0),yvt(ode-s.length),!0)):s=[];var i=s.join("."),a=gvt(t),o=uvt.exec(t);return o&&o[1]?new avt(n,i,a,o[1]):new svt(n,i,a)}function gvt(t){for(var e=0,n=cde.length;e<n;e++){var r=cde[e],s=r[0],i=r[1],a=i.exec(t);if(a)return s}return null}function mvt(){var t=typeof process<"u"&&process.version;return t?new ivt(process.version.slice(1)):null}function yvt(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var vt={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var JJ=function(t,e){return JJ=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},JJ(t,e)};function wvt(t,e){JJ(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var YJ=function(){return YJ=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},YJ.apply(this,arguments)};function bvt(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function vvt(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(i=(s<3?a(i):s>3?a(e,n,i):a(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function xvt(t,e){return function(n,r){e(n,r,t)}}function Evt(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Avt(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?i(u.value):s(u.value).then(o,c)}l((r=r.apply(t,e||[])).next())})}function Svt(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ivt(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Cvt(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function QJ(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zIe(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i}function Tvt(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(zIe(arguments[e]));return t}function Nvt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],a=0,o=i.length;a<o;a++,s++)r[s]=i[a];return r}function Wk(t){return this instanceof Wk?(this.v=t,this):new Wk(t)}function kvt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(d){r[d]&&(s[d]=function(p){return new Promise(function(g,m){i.push([d,p,g,m])>1||o(d,p)})})}function o(d,p){try{c(r[d](p))}catch(g){f(i[0][3],g)}}function c(d){d.value instanceof Wk?Promise.resolve(d.value.v).then(l,u):f(i[0][2],d)}function l(d){o("next",d)}function u(d){o("throw",d)}function f(d,p){d(p),i.shift(),i.length&&o(i[0][0],i[0][1])}}function Pvt(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(a){return(n=!n)?{value:Wk(t[s](a)),done:s==="return"}:i?i(a):a}:i}}function Ovt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof QJ=="function"?QJ(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(a){return new Promise(function(o,c){a=t[i](a),s(o,c,a.done,a.value)})}}function s(i,a,o,c){Promise.resolve(c).then(function(l){i({value:l,done:o})},a)}}function Rvt(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function _vt(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Bvt(t){return t&&t.__esModule?t:{default:t}}function Mvt(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Dvt(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Lvt=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return YJ},__asyncDelegator:Pvt,__asyncGenerator:kvt,__asyncValues:Ovt,__await:Wk,__awaiter:Avt,__classPrivateFieldGet:Mvt,__classPrivateFieldSet:Dvt,__createBinding:Ivt,__decorate:vvt,__exportStar:Cvt,__extends:wvt,__generator:Svt,__importDefault:Bvt,__importStar:_vt,__makeTemplateObject:Rvt,__metadata:Evt,__param:xvt,__read:zIe,__rest:bvt,__spread:Tvt,__spreadArrays:Nvt,__values:QJ},Symbol.toStringTag,{value:"Module"})),c9=G0e(Lvt);var Eq={},Q8={},lde;function Uvt(){if(lde)return Q8;lde=1,Object.defineProperty(Q8,"__esModule",{value:!0}),Q8.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Q8.delay=t,Q8}var h1={},Aq={},p1={},ude;function Fvt(){return ude||(ude=1,Object.defineProperty(p1,"__esModule",{value:!0}),p1.ONE_THOUSAND=p1.ONE_HUNDRED=void 0,p1.ONE_HUNDRED=100,p1.ONE_THOUSAND=1e3),p1}var Sq={},fde;function Vvt(){return fde||(fde=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Sq)),Sq}var dde;function JIe(){return dde||(dde=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=c9;e.__exportStar(Fvt(),t),e.__exportStar(Vvt(),t)}(Aq)),Aq}var hde;function $vt(){if(hde)return h1;hde=1,Object.defineProperty(h1,"__esModule",{value:!0}),h1.fromMiliseconds=h1.toMiliseconds=void 0;const t=JIe();function e(r){return r*t.ONE_THOUSAND}h1.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return h1.fromMiliseconds=n,h1}var pde;function jvt(){return pde||(pde=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=c9;e.__exportStar(Uvt(),t),e.__exportStar($vt(),t)}(Eq)),Eq}var nA={},gde;function Hvt(){if(gde)return nA;gde=1,Object.defineProperty(nA,"__esModule",{value:!0}),nA.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return nA.Watch=t,nA.default=t,nA}var Iq={},Z8={},mde;function qvt(){if(mde)return Z8;mde=1,Object.defineProperty(Z8,"__esModule",{value:!0}),Z8.IWatch=void 0;class t{}return Z8.IWatch=t,Z8}var yde;function Kvt(){return yde||(yde=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),c9.__exportStar(qvt(),t)}(Iq)),Iq}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=c9;e.__exportStar(jvt(),t),e.__exportStar(Hvt(),t),e.__exportStar(Kvt(),t),e.__exportStar(JIe(),t)})(vt);var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.getLocalStorage=Rs.getLocalStorageOrThrow=Rs.getCrypto=Rs.getCryptoOrThrow=YIe=Rs.getLocation=Rs.getLocationOrThrow=Wte=Rs.getNavigator=Rs.getNavigatorOrThrow=l9=Rs.getDocument=Rs.getDocumentOrThrow=Rs.getFromWindowOrThrow=Rs.getFromWindow=void 0;function Q2(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Rs.getFromWindow=Q2;function k4(t){const e=Q2(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Rs.getFromWindowOrThrow=k4;function Gvt(){return k4("document")}Rs.getDocumentOrThrow=Gvt;function Wvt(){return Q2("document")}var l9=Rs.getDocument=Wvt;function zvt(){return k4("navigator")}Rs.getNavigatorOrThrow=zvt;function Jvt(){return Q2("navigator")}var Wte=Rs.getNavigator=Jvt;function Yvt(){return k4("location")}Rs.getLocationOrThrow=Yvt;function Qvt(){return Q2("location")}var YIe=Rs.getLocation=Qvt;function Zvt(){return k4("crypto")}Rs.getCryptoOrThrow=Zvt;function Xvt(){return Q2("crypto")}Rs.getCrypto=Xvt;function ext(){return k4("localStorage")}Rs.getLocalStorageOrThrow=ext;function txt(){return Q2("localStorage")}Rs.getLocalStorage=txt;var zte={};Object.defineProperty(zte,"__esModule",{value:!0});var QIe=zte.getWindowMetadata=void 0;const wde=Rs;function nxt(){let t,e;try{t=wde.getDocumentOrThrow(),e=wde.getLocationOrThrow()}catch{return null}function n(){const f=t.getElementsByTagName("link"),d=[];for(let p=0;p<f.length;p++){const g=f[p],m=g.getAttribute("rel");if(m&&m.toLowerCase().indexOf("icon")>-1){const v=g.getAttribute("href");if(v)if(v.toLowerCase().indexOf("https:")===-1&&v.toLowerCase().indexOf("http:")===-1&&v.indexOf("//")!==0){let A=e.protocol+"//"+e.host;if(v.indexOf("/")===0)A+=v;else{const S=e.pathname.split("/");S.pop();const I=S.join("/");A+=I+"/"+v}d.push(A)}else if(v.indexOf("//")===0){const A=e.protocol+v;d.push(A)}else d.push(v)}}return d}function r(...f){const d=t.getElementsByTagName("meta");for(let p=0;p<d.length;p++){const g=d[p],m=["itemprop","property","name"].map(v=>g.getAttribute(v)).filter(v=>v?f.includes(v):!1);if(m.length&&m){const v=g.getAttribute("content");if(v)return v}}return""}function s(){let f=r("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function i(){return r("description","og:description","twitter:description","keywords")}const a=s(),o=i(),c=e.origin,l=n();return{description:o,url:c,icons:l,name:a}}QIe=zte.getWindowMetadata=nxt;var zk={},rxt=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),ZIe="%[a-f0-9]{2}",bde=new RegExp("("+ZIe+")|([^%]+?)","gi"),vde=new RegExp("("+ZIe+")+","gi");function ZJ(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],ZJ(n),ZJ(r))}function sxt(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(bde)||[],n=1;n<e.length;n++)t=ZJ(e,n).join(""),e=t.match(bde)||[];return t}}function ixt(t){for(var e={"%FE%FF":"","%FF%FE":""},n=vde.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch{var r=sxt(n[0]);r!==n[0]&&(e[n[0]]=r)}n=vde.exec(t)}e["%C2"]="";for(var s=Object.keys(e),i=0;i<s.length;i++){var a=s[i];t=t.replace(new RegExp(a,"g"),e[a])}return t}var axt=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return ixt(t)}},oxt=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const n=t.indexOf(e);return n===-1?[t]:[t.slice(0,n),t.slice(n+e.length)]},cxt=function(t,e){for(var n={},r=Object.keys(t),s=Array.isArray(e),i=0;i<r.length;i++){var a=r[i],o=t[a];(s?e.indexOf(a)!==-1:e(a,o,t))&&(n[a]=o)}return n};(function(t){const e=rxt,n=axt,r=oxt,s=cxt,i=S=>S==null,a=Symbol("encodeFragmentIdentifier");function o(S){switch(S.arrayFormat){case"index":return I=>(B,D)=>{const V=B.length;return D===void 0||S.skipNull&&D===null||S.skipEmptyString&&D===""?B:D===null?[...B,[u(I,S),"[",V,"]"].join("")]:[...B,[u(I,S),"[",u(V,S),"]=",u(D,S)].join("")]};case"bracket":return I=>(B,D)=>D===void 0||S.skipNull&&D===null||S.skipEmptyString&&D===""?B:D===null?[...B,[u(I,S),"[]"].join("")]:[...B,[u(I,S),"[]=",u(D,S)].join("")];case"colon-list-separator":return I=>(B,D)=>D===void 0||S.skipNull&&D===null||S.skipEmptyString&&D===""?B:D===null?[...B,[u(I,S),":list="].join("")]:[...B,[u(I,S),":list=",u(D,S)].join("")];case"comma":case"separator":case"bracket-separator":{const I=S.arrayFormat==="bracket-separator"?"[]=":"=";return B=>(D,V)=>V===void 0||S.skipNull&&V===null||S.skipEmptyString&&V===""?D:(V=V===null?"":V,D.length===0?[[u(B,S),I,u(V,S)].join("")]:[[D,u(V,S)].join(S.arrayFormatSeparator)])}default:return I=>(B,D)=>D===void 0||S.skipNull&&D===null||S.skipEmptyString&&D===""?B:D===null?[...B,u(I,S)]:[...B,[u(I,S),"=",u(D,S)].join("")]}}function c(S){let I;switch(S.arrayFormat){case"index":return(B,D,V)=>{if(I=/\[(\d*)\]$/.exec(B),B=B.replace(/\[\d*\]$/,""),!I){V[B]=D;return}V[B]===void 0&&(V[B]={}),V[B][I[1]]=D};case"bracket":return(B,D,V)=>{if(I=/(\[\])$/.exec(B),B=B.replace(/\[\]$/,""),!I){V[B]=D;return}if(V[B]===void 0){V[B]=[D];return}V[B]=[].concat(V[B],D)};case"colon-list-separator":return(B,D,V)=>{if(I=/(:list)$/.exec(B),B=B.replace(/:list$/,""),!I){V[B]=D;return}if(V[B]===void 0){V[B]=[D];return}V[B]=[].concat(V[B],D)};case"comma":case"separator":return(B,D,V)=>{const O=typeof D=="string"&&D.includes(S.arrayFormatSeparator),U=typeof D=="string"&&!O&&f(D,S).includes(S.arrayFormatSeparator);D=U?f(D,S):D;const Q=O||U?D.split(S.arrayFormatSeparator).map(ie=>f(ie,S)):D===null?D:f(D,S);V[B]=Q};case"bracket-separator":return(B,D,V)=>{const O=/(\[\])$/.test(B);if(B=B.replace(/\[\]$/,""),!O){V[B]=D&&f(D,S);return}const U=D===null?[]:D.split(S.arrayFormatSeparator).map(Q=>f(Q,S));if(V[B]===void 0){V[B]=U;return}V[B]=[].concat(V[B],U)};default:return(B,D,V)=>{if(V[B]===void 0){V[B]=D;return}V[B]=[].concat(V[B],D)}}}function l(S){if(typeof S!="string"||S.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function u(S,I){return I.encode?I.strict?e(S):encodeURIComponent(S):S}function f(S,I){return I.decode?n(S):S}function d(S){return Array.isArray(S)?S.sort():typeof S=="object"?d(Object.keys(S)).sort((I,B)=>Number(I)-Number(B)).map(I=>S[I]):S}function p(S){const I=S.indexOf("#");return I!==-1&&(S=S.slice(0,I)),S}function g(S){let I="";const B=S.indexOf("#");return B!==-1&&(I=S.slice(B)),I}function m(S){S=p(S);const I=S.indexOf("?");return I===-1?"":S.slice(I+1)}function v(S,I){return I.parseNumbers&&!Number.isNaN(Number(S))&&typeof S=="string"&&S.trim()!==""?S=Number(S):I.parseBooleans&&S!==null&&(S.toLowerCase()==="true"||S.toLowerCase()==="false")&&(S=S.toLowerCase()==="true"),S}function A(S,I){I=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},I),l(I.arrayFormatSeparator);const B=c(I),D=Object.create(null);if(typeof S!="string"||(S=S.trim().replace(/^[?#&]/,""),!S))return D;for(const V of S.split("&")){if(V==="")continue;let[O,U]=r(I.decode?V.replace(/\+/g," "):V,"=");U=U===void 0?null:["comma","separator","bracket-separator"].includes(I.arrayFormat)?U:f(U,I),B(f(O,I),U,D)}for(const V of Object.keys(D)){const O=D[V];if(typeof O=="object"&&O!==null)for(const U of Object.keys(O))O[U]=v(O[U],I);else D[V]=v(O,I)}return I.sort===!1?D:(I.sort===!0?Object.keys(D).sort():Object.keys(D).sort(I.sort)).reduce((V,O)=>{const U=D[O];return U&&typeof U=="object"&&!Array.isArray(U)?V[O]=d(U):V[O]=U,V},Object.create(null))}t.extract=m,t.parse=A,t.stringify=(S,I)=>{if(!S)return"";I=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},I),l(I.arrayFormatSeparator);const B=U=>I.skipNull&&i(S[U])||I.skipEmptyString&&S[U]==="",D=o(I),V={};for(const U of Object.keys(S))B(U)||(V[U]=S[U]);const O=Object.keys(V);return I.sort!==!1&&O.sort(I.sort),O.map(U=>{const Q=S[U];return Q===void 0?"":Q===null?u(U,I):Array.isArray(Q)?Q.length===0&&I.arrayFormat==="bracket-separator"?u(U,I)+"[]":Q.reduce(D(U),[]).join("&"):u(U,I)+"="+u(Q,I)}).filter(U=>U.length>0).join("&")},t.parseUrl=(S,I)=>{I=Object.assign({decode:!0},I);const[B,D]=r(S,"#");return Object.assign({url:B.split("?")[0]||"",query:A(m(S),I)},I&&I.parseFragmentIdentifier&&D?{fragmentIdentifier:f(D,I)}:{})},t.stringifyUrl=(S,I)=>{I=Object.assign({encode:!0,strict:!0,[a]:!0},I);const B=p(S.url).split("?")[0]||"",D=t.extract(S.url),V=t.parse(D,{sort:!1}),O=Object.assign(V,S.query);let U=t.stringify(O,I);U&&(U=`?${U}`);let Q=g(S.url);return S.fragmentIdentifier&&(Q=`#${I[a]?u(S.fragmentIdentifier,I):S.fragmentIdentifier}`),`${B}${U}${Q}`},t.pick=(S,I,B)=>{B=Object.assign({parseFragmentIdentifier:!0,[a]:!1},B);const{url:D,query:V,fragmentIdentifier:O}=t.parseUrl(S,B);return t.stringifyUrl({url:D,query:s(V,I),fragmentIdentifier:O},B)},t.exclude=(S,I,B)=>{const D=Array.isArray(I)?V=>!I.includes(V):(V,O)=>!I(V,O);return t.pick(S,D,B)}})(zk);var XIe={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",n="finalize already called",r=typeof window=="object",s=r?window:{};s.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&typeof self=="object",a=!s.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;a?s=cs:i&&(s=self);var o=!s.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,c=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),u=[31,7936,2031616,520093696],f=[4,1024,262144,67108864],d=[1,256,65536,16777216],p=[6,1536,393216,100663296],g=[0,8,16,24],m=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],v=[224,256,384,512],A=[128,256],S=["hex","buffer","arrayBuffer","array","digest"],I={128:168,256:136};(s.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function($){return Object.prototype.toString.call($)==="[object Array]"}),c&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function($){return typeof $=="object"&&$.buffer&&$.buffer.constructor===ArrayBuffer});for(var B=function($,te,J){return function(ee){return new _($,te,$).update(ee)[J]()}},D=function($,te,J){return function(ee,X){return new _($,te,X).update(ee)[J]()}},V=function($,te,J){return function(ee,X,j,se){return b["cshake"+$].update(ee,X,j,se)[J]()}},O=function($,te,J){return function(ee,X,j,se){return b["kmac"+$].update(ee,X,j,se)[J]()}},U=function($,te,J,ee){for(var X=0;X<S.length;++X){var j=S[X];$[j]=te(J,ee,j)}return $},Q=function($,te){var J=B($,te,"hex");return J.create=function(){return new _($,te,$)},J.update=function(ee){return J.create().update(ee)},U(J,B,$,te)},ie=function($,te){var J=D($,te,"hex");return J.create=function(ee){return new _($,te,ee)},J.update=function(ee,X){return J.create(X).update(ee)},U(J,D,$,te)},G=function($,te){var J=I[$],ee=V($,te,"hex");return ee.create=function(X,j,se){return!j&&!se?b["shake"+$].create(X):new _($,te,X).bytepad([j,se],J)},ee.update=function(X,j,se,ye){return ee.create(j,se,ye).update(X)},U(ee,V,$,te)},R=function($,te){var J=I[$],ee=O($,te,"hex");return ee.create=function(X,j,se){return new H($,te,j).bytepad(["KMAC",se],J).bytepad([X],J)},ee.update=function(X,j,se,ye){return ee.create(X,se,ye).update(j)},U(ee,O,$,te)},k=[{name:"keccak",padding:d,bits:v,createMethod:Q},{name:"sha3",padding:p,bits:v,createMethod:Q},{name:"shake",padding:u,bits:A,createMethod:ie},{name:"cshake",padding:f,bits:A,createMethod:G},{name:"kmac",padding:f,bits:A,createMethod:R}],b={},w=[],N=0;N<k.length;++N)for(var L=k[N],C=L.bits,T=0;T<C.length;++T){var E=L.name+"_"+C[T];if(w.push(E),b[E]=L.createMethod(C[T],L.padding),L.name!=="sha3"){var P=L.name+C[T];w.push(P),b[P]=b[E]}}function _($,te,J){this.blocks=[],this.s=[],this.padding=te,this.outputBits=J,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-($<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=J>>5,this.extraBytes=(J&31)>>3;for(var ee=0;ee<50;++ee)this.s[ee]=0}_.prototype.update=function($){if(this.finalized)throw new Error(n);var te,J=typeof $;if(J!=="string"){if(J==="object"){if($===null)throw new Error(e);if(c&&$.constructor===ArrayBuffer)$=new Uint8Array($);else if(!Array.isArray($)&&(!c||!ArrayBuffer.isView($)))throw new Error(e)}else throw new Error(e);te=!0}for(var ee=this.blocks,X=this.byteCount,j=$.length,se=this.blockCount,ye=0,Ce=this.s,xe,De;ye<j;){if(this.reset)for(this.reset=!1,ee[0]=this.block,xe=1;xe<se+1;++xe)ee[xe]=0;if(te)for(xe=this.start;ye<j&&xe<X;++ye)ee[xe>>2]|=$[ye]<<g[xe++&3];else for(xe=this.start;ye<j&&xe<X;++ye)De=$.charCodeAt(ye),De<128?ee[xe>>2]|=De<<g[xe++&3]:De<2048?(ee[xe>>2]|=(192|De>>6)<<g[xe++&3],ee[xe>>2]|=(128|De&63)<<g[xe++&3]):De<55296||De>=57344?(ee[xe>>2]|=(224|De>>12)<<g[xe++&3],ee[xe>>2]|=(128|De>>6&63)<<g[xe++&3],ee[xe>>2]|=(128|De&63)<<g[xe++&3]):(De=65536+((De&1023)<<10|$.charCodeAt(++ye)&1023),ee[xe>>2]|=(240|De>>18)<<g[xe++&3],ee[xe>>2]|=(128|De>>12&63)<<g[xe++&3],ee[xe>>2]|=(128|De>>6&63)<<g[xe++&3],ee[xe>>2]|=(128|De&63)<<g[xe++&3]);if(this.lastByteIndex=xe,xe>=X){for(this.start=xe-X,this.block=ee[se],xe=0;xe<se;++xe)Ce[xe]^=ee[xe];ne(Ce),this.reset=!0}else this.start=xe}return this},_.prototype.encode=function($,te){var J=$&255,ee=1,X=[J];for($=$>>8,J=$&255;J>0;)X.unshift(J),$=$>>8,J=$&255,++ee;return te?X.push(ee):X.unshift(ee),this.update(X),X.length},_.prototype.encodeString=function($){var te,J=typeof $;if(J!=="string"){if(J==="object"){if($===null)throw new Error(e);if(c&&$.constructor===ArrayBuffer)$=new Uint8Array($);else if(!Array.isArray($)&&(!c||!ArrayBuffer.isView($)))throw new Error(e)}else throw new Error(e);te=!0}var ee=0,X=$.length;if(te)ee=X;else for(var j=0;j<$.length;++j){var se=$.charCodeAt(j);se<128?ee+=1:se<2048?ee+=2:se<55296||se>=57344?ee+=3:(se=65536+((se&1023)<<10|$.charCodeAt(++j)&1023),ee+=4)}return ee+=this.encode(ee*8),this.update($),ee},_.prototype.bytepad=function($,te){for(var J=this.encode(te),ee=0;ee<$.length;++ee)J+=this.encodeString($[ee]);var X=te-J%te,j=[];return j.length=X,this.update(j),this},_.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var $=this.blocks,te=this.lastByteIndex,J=this.blockCount,ee=this.s;if($[te>>2]|=this.padding[te&3],this.lastByteIndex===this.byteCount)for($[0]=$[J],te=1;te<J+1;++te)$[te]=0;for($[J-1]|=2147483648,te=0;te<J;++te)ee[te]^=$[te];ne(ee)}},_.prototype.toString=_.prototype.hex=function(){this.finalize();for(var $=this.blockCount,te=this.s,J=this.outputBlocks,ee=this.extraBytes,X=0,j=0,se="",ye;j<J;){for(X=0;X<$&&j<J;++X,++j)ye=te[X],se+=l[ye>>4&15]+l[ye&15]+l[ye>>12&15]+l[ye>>8&15]+l[ye>>20&15]+l[ye>>16&15]+l[ye>>28&15]+l[ye>>24&15];j%$===0&&(ne(te),X=0)}return ee&&(ye=te[X],se+=l[ye>>4&15]+l[ye&15],ee>1&&(se+=l[ye>>12&15]+l[ye>>8&15]),ee>2&&(se+=l[ye>>20&15]+l[ye>>16&15])),se},_.prototype.arrayBuffer=function(){this.finalize();var $=this.blockCount,te=this.s,J=this.outputBlocks,ee=this.extraBytes,X=0,j=0,se=this.outputBits>>3,ye;ee?ye=new ArrayBuffer(J+1<<2):ye=new ArrayBuffer(se);for(var Ce=new Uint32Array(ye);j<J;){for(X=0;X<$&&j<J;++X,++j)Ce[j]=te[X];j%$===0&&ne(te)}return ee&&(Ce[X]=te[X],ye=ye.slice(0,se)),ye},_.prototype.buffer=_.prototype.arrayBuffer,_.prototype.digest=_.prototype.array=function(){this.finalize();for(var $=this.blockCount,te=this.s,J=this.outputBlocks,ee=this.extraBytes,X=0,j=0,se=[],ye,Ce;j<J;){for(X=0;X<$&&j<J;++X,++j)ye=j<<2,Ce=te[X],se[ye]=Ce&255,se[ye+1]=Ce>>8&255,se[ye+2]=Ce>>16&255,se[ye+3]=Ce>>24&255;j%$===0&&ne(te)}return ee&&(ye=j<<2,Ce=te[X],se[ye]=Ce&255,ee>1&&(se[ye+1]=Ce>>8&255),ee>2&&(se[ye+2]=Ce>>16&255)),se};function H($,te,J){_.call(this,$,te,J)}H.prototype=new _,H.prototype.finalize=function(){return this.encode(this.outputBits,!0),_.prototype.finalize.call(this)};var ne=function($){var te,J,ee,X,j,se,ye,Ce,xe,De,qe,ze,ft,mt,Be,de,oe,fe,ce,ae,Ie,nt,yt,Tt,at,It,_t,pt,$t,Pt,jt,En,An,At,Sn,Hn,Qt,nn,sn,Nt,un,Xt,Ct,In,Cn,kt,Ht,an,ct,yn,qt,xt,Tn,Fr,hn,Or,qn,Dr,ca,la,ua,Na,Js;for(ee=0;ee<48;ee+=2)X=$[0]^$[10]^$[20]^$[30]^$[40],j=$[1]^$[11]^$[21]^$[31]^$[41],se=$[2]^$[12]^$[22]^$[32]^$[42],ye=$[3]^$[13]^$[23]^$[33]^$[43],Ce=$[4]^$[14]^$[24]^$[34]^$[44],xe=$[5]^$[15]^$[25]^$[35]^$[45],De=$[6]^$[16]^$[26]^$[36]^$[46],qe=$[7]^$[17]^$[27]^$[37]^$[47],ze=$[8]^$[18]^$[28]^$[38]^$[48],ft=$[9]^$[19]^$[29]^$[39]^$[49],te=ze^(se<<1|ye>>>31),J=ft^(ye<<1|se>>>31),$[0]^=te,$[1]^=J,$[10]^=te,$[11]^=J,$[20]^=te,$[21]^=J,$[30]^=te,$[31]^=J,$[40]^=te,$[41]^=J,te=X^(Ce<<1|xe>>>31),J=j^(xe<<1|Ce>>>31),$[2]^=te,$[3]^=J,$[12]^=te,$[13]^=J,$[22]^=te,$[23]^=J,$[32]^=te,$[33]^=J,$[42]^=te,$[43]^=J,te=se^(De<<1|qe>>>31),J=ye^(qe<<1|De>>>31),$[4]^=te,$[5]^=J,$[14]^=te,$[15]^=J,$[24]^=te,$[25]^=J,$[34]^=te,$[35]^=J,$[44]^=te,$[45]^=J,te=Ce^(ze<<1|ft>>>31),J=xe^(ft<<1|ze>>>31),$[6]^=te,$[7]^=J,$[16]^=te,$[17]^=J,$[26]^=te,$[27]^=J,$[36]^=te,$[37]^=J,$[46]^=te,$[47]^=J,te=De^(X<<1|j>>>31),J=qe^(j<<1|X>>>31),$[8]^=te,$[9]^=J,$[18]^=te,$[19]^=J,$[28]^=te,$[29]^=J,$[38]^=te,$[39]^=J,$[48]^=te,$[49]^=J,mt=$[0],Be=$[1],kt=$[11]<<4|$[10]>>>28,Ht=$[10]<<4|$[11]>>>28,pt=$[20]<<3|$[21]>>>29,$t=$[21]<<3|$[20]>>>29,la=$[31]<<9|$[30]>>>23,ua=$[30]<<9|$[31]>>>23,Xt=$[40]<<18|$[41]>>>14,Ct=$[41]<<18|$[40]>>>14,At=$[2]<<1|$[3]>>>31,Sn=$[3]<<1|$[2]>>>31,de=$[13]<<12|$[12]>>>20,oe=$[12]<<12|$[13]>>>20,an=$[22]<<10|$[23]>>>22,ct=$[23]<<10|$[22]>>>22,Pt=$[33]<<13|$[32]>>>19,jt=$[32]<<13|$[33]>>>19,Na=$[42]<<2|$[43]>>>30,Js=$[43]<<2|$[42]>>>30,Fr=$[5]<<30|$[4]>>>2,hn=$[4]<<30|$[5]>>>2,Hn=$[14]<<6|$[15]>>>26,Qt=$[15]<<6|$[14]>>>26,fe=$[25]<<11|$[24]>>>21,ce=$[24]<<11|$[25]>>>21,yn=$[34]<<15|$[35]>>>17,qt=$[35]<<15|$[34]>>>17,En=$[45]<<29|$[44]>>>3,An=$[44]<<29|$[45]>>>3,Tt=$[6]<<28|$[7]>>>4,at=$[7]<<28|$[6]>>>4,Or=$[17]<<23|$[16]>>>9,qn=$[16]<<23|$[17]>>>9,nn=$[26]<<25|$[27]>>>7,sn=$[27]<<25|$[26]>>>7,ae=$[36]<<21|$[37]>>>11,Ie=$[37]<<21|$[36]>>>11,xt=$[47]<<24|$[46]>>>8,Tn=$[46]<<24|$[47]>>>8,In=$[8]<<27|$[9]>>>5,Cn=$[9]<<27|$[8]>>>5,It=$[18]<<20|$[19]>>>12,_t=$[19]<<20|$[18]>>>12,Dr=$[29]<<7|$[28]>>>25,ca=$[28]<<7|$[29]>>>25,Nt=$[38]<<8|$[39]>>>24,un=$[39]<<8|$[38]>>>24,nt=$[48]<<14|$[49]>>>18,yt=$[49]<<14|$[48]>>>18,$[0]=mt^~de&fe,$[1]=Be^~oe&ce,$[10]=Tt^~It&pt,$[11]=at^~_t&$t,$[20]=At^~Hn&nn,$[21]=Sn^~Qt&sn,$[30]=In^~kt&an,$[31]=Cn^~Ht&ct,$[40]=Fr^~Or&Dr,$[41]=hn^~qn&ca,$[2]=de^~fe&ae,$[3]=oe^~ce&Ie,$[12]=It^~pt&Pt,$[13]=_t^~$t&jt,$[22]=Hn^~nn&Nt,$[23]=Qt^~sn&un,$[32]=kt^~an&yn,$[33]=Ht^~ct&qt,$[42]=Or^~Dr&la,$[43]=qn^~ca&ua,$[4]=fe^~ae&nt,$[5]=ce^~Ie&yt,$[14]=pt^~Pt&En,$[15]=$t^~jt&An,$[24]=nn^~Nt&Xt,$[25]=sn^~un&Ct,$[34]=an^~yn&xt,$[35]=ct^~qt&Tn,$[44]=Dr^~la&Na,$[45]=ca^~ua&Js,$[6]=ae^~nt&mt,$[7]=Ie^~yt&Be,$[16]=Pt^~En&Tt,$[17]=jt^~An&at,$[26]=Nt^~Xt&At,$[27]=un^~Ct&Sn,$[36]=yn^~xt&In,$[37]=qt^~Tn&Cn,$[46]=la^~Na&Fr,$[47]=ua^~Js&hn,$[8]=nt^~mt&de,$[9]=yt^~Be&oe,$[18]=En^~Tt&It,$[19]=An^~at&_t,$[28]=Xt^~At&Hn,$[29]=Ct^~Sn&Qt,$[38]=xt^~In&kt,$[39]=Tn^~Cn&Ht,$[48]=Na^~Fr&Or,$[49]=Js^~hn&qn,$[0]^=m[ee],$[1]^=m[ee+1]};if(o)t.exports=b;else for(N=0;N<w.length;++N)s[w[N]]=b[w[N]]})()})(XIe);var lxt=XIe.exports;const uxt=em(lxt),fxt="logger/5.8.0";let xde=!1,Ede=!1;const W_={debug:1,default:2,info:2,warning:3,error:4,off:5};let Ade=W_.default,Cq=null;function dxt(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("".normalize("NFD")!=="e")throw new Error("broken implementation")}catch(t){return t.message}return null}const Sde=dxt();var XJ;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(XJ||(XJ={}));var Id;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(Id||(Id={}));const Ide="0123456789abcdef";class Hs{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,n){const r=e.toLowerCase();W_[r]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(Ade>W_[r])&&console.log.apply(console,n)}debug(...e){this._log(Hs.levels.DEBUG,e)}info(...e){this._log(Hs.levels.INFO,e)}warn(...e){this._log(Hs.levels.WARNING,e)}makeError(e,n,r){if(Ede)return this.makeError("censored error",n,{});n||(n=Hs.errors.UNKNOWN_ERROR),r||(r={});const s=[];Object.keys(r).forEach(c=>{const l=r[c];try{if(l instanceof Uint8Array){let u="";for(let f=0;f<l.length;f++)u+=Ide[l[f]>>4],u+=Ide[l[f]&15];s.push(c+"=Uint8Array(0x"+u+")")}else s.push(c+"="+JSON.stringify(l))}catch{s.push(c+"="+JSON.stringify(r[c].toString()))}}),s.push(`code=${n}`),s.push(`version=${this.version}`);const i=e;let a="";switch(n){case Id.NUMERIC_FAULT:{a="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":a+="-"+c;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result";break}break}case Id.CALL_EXCEPTION:case Id.INSUFFICIENT_FUNDS:case Id.MISSING_NEW:case Id.NONCE_EXPIRED:case Id.REPLACEMENT_UNDERPRICED:case Id.TRANSACTION_REPLACED:case Id.UNPREDICTABLE_GAS_LIMIT:a=n;break}a&&(e+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),s.length&&(e+=" ("+s.join(", ")+")");const o=new Error(e);return o.reason=i,o.code=n,Object.keys(r).forEach(function(c){o[c]=r[c]}),o}throwError(e,n,r){throw this.makeError(e,n,r)}throwArgumentError(e,n,r){return this.throwError(e,Hs.errors.INVALID_ARGUMENT,{argument:n,value:r})}assert(e,n,r,s){e||this.throwError(n,r,s)}assertArgument(e,n,r,s){e||this.throwArgumentError(n,r,s)}checkNormalize(e){Sde&&this.throwError("platform missing String.prototype.normalize",Hs.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Sde})}checkSafeUint53(e,n){typeof e=="number"&&(n==null&&(n="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(n,Hs.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(n,Hs.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,n,r){r?r=": "+r:r="",e<n&&this.throwError("missing argument"+r,Hs.errors.MISSING_ARGUMENT,{count:e,expectedCount:n}),e>n&&this.throwError("too many arguments"+r,Hs.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:n})}checkNew(e,n){(e===Object||e==null)&&this.throwError("missing new",Hs.errors.MISSING_NEW,{name:n.name})}checkAbstract(e,n){e===n?this.throwError("cannot instantiate abstract class "+JSON.stringify(n.name)+" directly; use a sub-class",Hs.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Hs.errors.MISSING_NEW,{name:n.name})}static globalLogger(){return Cq||(Cq=new Hs(fxt)),Cq}static setCensorship(e,n){if(!e&&n&&this.globalLogger().throwError("cannot permanently disable censorship",Hs.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),xde){if(!e)return;this.globalLogger().throwError("error censorship permanent",Hs.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Ede=!!e,xde=!!n}static setLogLevel(e){const n=W_[e.toLowerCase()];if(n==null){Hs.globalLogger().warn("invalid log level - "+e);return}Ade=n}static from(e){return new Hs(e)}}Hs.errors=Id;Hs.levels=XJ;const hxt="bytes/5.8.0",_i=new Hs(hxt);function eCe(t){return!!t.toHexString}function e6(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return e6(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function pxt(t){return S0(t)&&!(t.length%2)||Jte(t)}function Cde(t){return typeof t=="number"&&t==t&&t%1===0}function Jte(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!Cde(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const n=t[e];if(!Cde(n)||n<0||n>=256)return!1}return!0}function ta(t,e){if(e||(e={}),typeof t=="number"){_i.checkSafeUint53(t,"invalid arrayify value");const n=[];for(;t;)n.unshift(t&255),t=parseInt(String(t/256));return n.length===0&&n.push(0),e6(new Uint8Array(n))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),eCe(t)&&(t=t.toHexString()),S0(t)){let n=t.substring(2);n.length%2&&(e.hexPad==="left"?n="0"+n:e.hexPad==="right"?n+="0":_i.throwArgumentError("hex data is odd-length","value",t));const r=[];for(let s=0;s<n.length;s+=2)r.push(parseInt(n.substring(s,s+2),16));return e6(new Uint8Array(r))}return Jte(t)?e6(new Uint8Array(t)):_i.throwArgumentError("invalid arrayify value","value",t)}function gxt(t){const e=t.map(s=>ta(s)),n=e.reduce((s,i)=>s+i.length,0),r=new Uint8Array(n);return e.reduce((s,i)=>(r.set(i,s),s+i.length),0),e6(r)}function mxt(t,e){t=ta(t),t.length>e&&_i.throwArgumentError("value out of range","value",arguments[0]);const n=new Uint8Array(e);return n.set(t,e-t.length),e6(n)}function S0(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const Tq="0123456789abcdef";function iu(t,e){if(e||(e={}),typeof t=="number"){_i.checkSafeUint53(t,"invalid hexlify value");let n="";for(;t;)n=Tq[t&15]+n,t=Math.floor(t/16);return n.length?(n.length%2&&(n="0"+n),"0x"+n):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),eCe(t))return t.toHexString();if(S0(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":_i.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Jte(t)){let n="0x";for(let r=0;r<t.length;r++){let s=t[r];n+=Tq[(s&240)>>4]+Tq[s&15]}return n}return _i.throwArgumentError("invalid hexlify value","value",t)}function yxt(t){if(typeof t!="string")t=iu(t);else if(!S0(t)||t.length%2)return null;return(t.length-2)/2}function Tde(t,e,n){return typeof t!="string"?t=iu(t):(!S0(t)||t.length%2)&&_i.throwArgumentError("invalid hexData","value",t),e=2+2*e,"0x"+t.substring(e)}function t6(t,e){for(typeof t!="string"?t=iu(t):S0(t)||_i.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&_i.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function tCe(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(pxt(t)){let n=ta(t);n.length===64?(e.v=27+(n[32]>>7),n[32]&=127,e.r=iu(n.slice(0,32)),e.s=iu(n.slice(32,64))):n.length===65?(e.r=iu(n.slice(0,32)),e.s=iu(n.slice(32,64)),e.v=n[64]):_i.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:_i.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(n[32]|=128),e._vs=iu(n.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const s=mxt(ta(e._vs),32);e._vs=iu(s);const i=s[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=i:e.recoveryParam!==i&&_i.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),s[0]&=127;const a=iu(s);e.s==null?e.s=a:e.s!==a&&_i.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?_i.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const s=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==s&&_i.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!S0(e.r)?_i.throwArgumentError("signature missing or invalid r","signature",t):e.r=t6(e.r,32),e.s==null||!S0(e.s)?_i.throwArgumentError("signature missing or invalid s","signature",t):e.s=t6(e.s,32);const n=ta(e.s);n[0]>=128&&_i.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(n[0]|=128);const r=iu(n);e._vs&&(S0(e._vs)||_i.throwArgumentError("signature invalid _vs","signature",t),e._vs=t6(e._vs,32)),e._vs==null?e._vs=r:e._vs!==r&&_i.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function Yte(t){return"0x"+uxt.keccak_256(ta(t))}var Qte={exports:{}};const wxt={},bxt=Object.freeze(Object.defineProperty({__proto__:null,default:wxt},Symbol.toStringTag,{value:"Module"})),hF=G0e(bxt);Qte.exports;(function(t){(function(e,n){function r(k,b){if(!k)throw new Error(b||"Assertion failed")}function s(k,b){k.super_=b;var w=function(){};w.prototype=b.prototype,k.prototype=new w,k.prototype.constructor=k}function i(k,b,w){if(i.isBN(k))return k;this.negative=0,this.words=null,this.length=0,this.red=null,k!==null&&((b==="le"||b==="be")&&(w=b,b=10),this._init(k||0,b||10,w||"be"))}typeof e=="object"?e.exports=i:n.BN=i,i.BN=i,i.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=hF.Buffer}catch{}i.isBN=function(b){return b instanceof i?!0:b!==null&&typeof b=="object"&&b.constructor.wordSize===i.wordSize&&Array.isArray(b.words)},i.max=function(b,w){return b.cmp(w)>0?b:w},i.min=function(b,w){return b.cmp(w)<0?b:w},i.prototype._init=function(b,w,N){if(typeof b=="number")return this._initNumber(b,w,N);if(typeof b=="object")return this._initArray(b,w,N);w==="hex"&&(w=16),r(w===(w|0)&&w>=2&&w<=36),b=b.toString().replace(/\s+/g,"");var L=0;b[0]==="-"&&(L++,this.negative=1),L<b.length&&(w===16?this._parseHex(b,L,N):(this._parseBase(b,w,L),N==="le"&&this._initArray(this.toArray(),w,N)))},i.prototype._initNumber=function(b,w,N){b<0&&(this.negative=1,b=-b),b<67108864?(this.words=[b&67108863],this.length=1):b<4503599627370496?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(r(b<9007199254740992),this.words=[b&67108863,b/67108864&67108863,1],this.length=3),N==="le"&&this._initArray(this.toArray(),w,N)},i.prototype._initArray=function(b,w,N){if(r(typeof b.length=="number"),b.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(b.length/3),this.words=new Array(this.length);for(var L=0;L<this.length;L++)this.words[L]=0;var C,T,E=0;if(N==="be")for(L=b.length-1,C=0;L>=0;L-=3)T=b[L]|b[L-1]<<8|b[L-2]<<16,this.words[C]|=T<<E&67108863,this.words[C+1]=T>>>26-E&67108863,E+=24,E>=26&&(E-=26,C++);else if(N==="le")for(L=0,C=0;L<b.length;L+=3)T=b[L]|b[L+1]<<8|b[L+2]<<16,this.words[C]|=T<<E&67108863,this.words[C+1]=T>>>26-E&67108863,E+=24,E>=26&&(E-=26,C++);return this._strip()};function o(k,b){var w=k.charCodeAt(b);if(w>=48&&w<=57)return w-48;if(w>=65&&w<=70)return w-55;if(w>=97&&w<=102)return w-87;r(!1,"Invalid character in "+k)}function c(k,b,w){var N=o(k,w);return w-1>=b&&(N|=o(k,w-1)<<4),N}i.prototype._parseHex=function(b,w,N){this.length=Math.ceil((b.length-w)/6),this.words=new Array(this.length);for(var L=0;L<this.length;L++)this.words[L]=0;var C=0,T=0,E;if(N==="be")for(L=b.length-1;L>=w;L-=2)E=c(b,w,L)<<C,this.words[T]|=E&67108863,C>=18?(C-=18,T+=1,this.words[T]|=E>>>26):C+=8;else{var P=b.length-w;for(L=P%2===0?w+1:w;L<b.length;L+=2)E=c(b,w,L)<<C,this.words[T]|=E&67108863,C>=18?(C-=18,T+=1,this.words[T]|=E>>>26):C+=8}this._strip()};function l(k,b,w,N){for(var L=0,C=0,T=Math.min(k.length,w),E=b;E<T;E++){var P=k.charCodeAt(E)-48;L*=N,P>=49?C=P-49+10:P>=17?C=P-17+10:C=P,r(P>=0&&C<N,"Invalid character"),L+=C}return L}i.prototype._parseBase=function(b,w,N){this.words=[0],this.length=1;for(var L=0,C=1;C<=67108863;C*=w)L++;L--,C=C/w|0;for(var T=b.length-N,E=T%L,P=Math.min(T,T-E)+N,_=0,H=N;H<P;H+=L)_=l(b,H,H+L,w),this.imuln(C),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(E!==0){var ne=1;for(_=l(b,H,b.length,w),H=0;H<E;H++)ne*=w;this.imuln(ne),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this._strip()},i.prototype.copy=function(b){b.words=new Array(this.length);for(var w=0;w<this.length;w++)b.words[w]=this.words[w];b.length=this.length,b.negative=this.negative,b.red=this.red};function u(k,b){k.words=b.words,k.length=b.length,k.negative=b.negative,k.red=b.red}if(i.prototype._move=function(b){u(b,this)},i.prototype.clone=function(){var b=new i(null);return this.copy(b),b},i.prototype._expand=function(b){for(;this.length<b;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{i.prototype.inspect=f}else i.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(b,w){b=b||10,w=w|0||1;var N;if(b===16||b==="hex"){N="";for(var L=0,C=0,T=0;T<this.length;T++){var E=this.words[T],P=((E<<L|C)&16777215).toString(16);C=E>>>24-L&16777215,L+=2,L>=26&&(L-=26,T--),C!==0||T!==this.length-1?N=d[6-P.length]+P+N:N=P+N}for(C!==0&&(N=C.toString(16)+N);N.length%w!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}if(b===(b|0)&&b>=2&&b<=36){var _=p[b],H=g[b];N="";var ne=this.clone();for(ne.negative=0;!ne.isZero();){var $=ne.modrn(H).toString(b);ne=ne.idivn(H),ne.isZero()?N=$+N:N=d[_-$.length]+$+N}for(this.isZero()&&(N="0"+N);N.length%w!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var b=this.words[0];return this.length===2?b+=this.words[1]*67108864:this.length===3&&this.words[2]===1?b+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-b:b},i.prototype.toJSON=function(){return this.toString(16,2)},a&&(i.prototype.toBuffer=function(b,w){return this.toArrayLike(a,b,w)}),i.prototype.toArray=function(b,w){return this.toArrayLike(Array,b,w)};var m=function(b,w){return b.allocUnsafe?b.allocUnsafe(w):new b(w)};i.prototype.toArrayLike=function(b,w,N){this._strip();var L=this.byteLength(),C=N||Math.max(1,L);r(L<=C,"byte array longer than desired length"),r(C>0,"Requested array length <= 0");var T=m(b,C),E=w==="le"?"LE":"BE";return this["_toArrayLike"+E](T,L),T},i.prototype._toArrayLikeLE=function(b,w){for(var N=0,L=0,C=0,T=0;C<this.length;C++){var E=this.words[C]<<T|L;b[N++]=E&255,N<b.length&&(b[N++]=E>>8&255),N<b.length&&(b[N++]=E>>16&255),T===6?(N<b.length&&(b[N++]=E>>24&255),L=0,T=0):(L=E>>>24,T+=2)}if(N<b.length)for(b[N++]=L;N<b.length;)b[N++]=0},i.prototype._toArrayLikeBE=function(b,w){for(var N=b.length-1,L=0,C=0,T=0;C<this.length;C++){var E=this.words[C]<<T|L;b[N--]=E&255,N>=0&&(b[N--]=E>>8&255),N>=0&&(b[N--]=E>>16&255),T===6?(N>=0&&(b[N--]=E>>24&255),L=0,T=0):(L=E>>>24,T+=2)}if(N>=0)for(b[N--]=L;N>=0;)b[N--]=0},Math.clz32?i.prototype._countBits=function(b){return 32-Math.clz32(b)}:i.prototype._countBits=function(b){var w=b,N=0;return w>=4096&&(N+=13,w>>>=13),w>=64&&(N+=7,w>>>=7),w>=8&&(N+=4,w>>>=4),w>=2&&(N+=2,w>>>=2),N+w},i.prototype._zeroBits=function(b){if(b===0)return 26;var w=b,N=0;return w&8191||(N+=13,w>>>=13),w&127||(N+=7,w>>>=7),w&15||(N+=4,w>>>=4),w&3||(N+=2,w>>>=2),w&1||N++,N},i.prototype.bitLength=function(){var b=this.words[this.length-1],w=this._countBits(b);return(this.length-1)*26+w};function v(k){for(var b=new Array(k.bitLength()),w=0;w<b.length;w++){var N=w/26|0,L=w%26;b[w]=k.words[N]>>>L&1}return b}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var b=0,w=0;w<this.length;w++){var N=this._zeroBits(this.words[w]);if(b+=N,N!==26)break}return b},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(b){return this.negative!==0?this.abs().inotn(b).iaddn(1):this.clone()},i.prototype.fromTwos=function(b){return this.testn(b-1)?this.notn(b).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(b){for(;this.length<b.length;)this.words[this.length++]=0;for(var w=0;w<b.length;w++)this.words[w]=this.words[w]|b.words[w];return this._strip()},i.prototype.ior=function(b){return r((this.negative|b.negative)===0),this.iuor(b)},i.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)},i.prototype.uor=function(b){return this.length>b.length?this.clone().iuor(b):b.clone().iuor(this)},i.prototype.iuand=function(b){var w;this.length>b.length?w=b:w=this;for(var N=0;N<w.length;N++)this.words[N]=this.words[N]&b.words[N];return this.length=w.length,this._strip()},i.prototype.iand=function(b){return r((this.negative|b.negative)===0),this.iuand(b)},i.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)},i.prototype.uand=function(b){return this.length>b.length?this.clone().iuand(b):b.clone().iuand(this)},i.prototype.iuxor=function(b){var w,N;this.length>b.length?(w=this,N=b):(w=b,N=this);for(var L=0;L<N.length;L++)this.words[L]=w.words[L]^N.words[L];if(this!==w)for(;L<w.length;L++)this.words[L]=w.words[L];return this.length=w.length,this._strip()},i.prototype.ixor=function(b){return r((this.negative|b.negative)===0),this.iuxor(b)},i.prototype.xor=function(b){return this.length>b.length?this.clone().ixor(b):b.clone().ixor(this)},i.prototype.uxor=function(b){return this.length>b.length?this.clone().iuxor(b):b.clone().iuxor(this)},i.prototype.inotn=function(b){r(typeof b=="number"&&b>=0);var w=Math.ceil(b/26)|0,N=b%26;this._expand(w),N>0&&w--;for(var L=0;L<w;L++)this.words[L]=~this.words[L]&67108863;return N>0&&(this.words[L]=~this.words[L]&67108863>>26-N),this._strip()},i.prototype.notn=function(b){return this.clone().inotn(b)},i.prototype.setn=function(b,w){r(typeof b=="number"&&b>=0);var N=b/26|0,L=b%26;return this._expand(N+1),w?this.words[N]=this.words[N]|1<<L:this.words[N]=this.words[N]&~(1<<L),this._strip()},i.prototype.iadd=function(b){var w;if(this.negative!==0&&b.negative===0)return this.negative=0,w=this.isub(b),this.negative^=1,this._normSign();if(this.negative===0&&b.negative!==0)return b.negative=0,w=this.isub(b),b.negative=1,w._normSign();var N,L;this.length>b.length?(N=this,L=b):(N=b,L=this);for(var C=0,T=0;T<L.length;T++)w=(N.words[T]|0)+(L.words[T]|0)+C,this.words[T]=w&67108863,C=w>>>26;for(;C!==0&&T<N.length;T++)w=(N.words[T]|0)+C,this.words[T]=w&67108863,C=w>>>26;if(this.length=N.length,C!==0)this.words[this.length]=C,this.length++;else if(N!==this)for(;T<N.length;T++)this.words[T]=N.words[T];return this},i.prototype.add=function(b){var w;return b.negative!==0&&this.negative===0?(b.negative=0,w=this.sub(b),b.negative^=1,w):b.negative===0&&this.negative!==0?(this.negative=0,w=b.sub(this),this.negative=1,w):this.length>b.length?this.clone().iadd(b):b.clone().iadd(this)},i.prototype.isub=function(b){if(b.negative!==0){b.negative=0;var w=this.iadd(b);return b.negative=1,w._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(b),this.negative=1,this._normSign();var N=this.cmp(b);if(N===0)return this.negative=0,this.length=1,this.words[0]=0,this;var L,C;N>0?(L=this,C=b):(L=b,C=this);for(var T=0,E=0;E<C.length;E++)w=(L.words[E]|0)-(C.words[E]|0)+T,T=w>>26,this.words[E]=w&67108863;for(;T!==0&&E<L.length;E++)w=(L.words[E]|0)+T,T=w>>26,this.words[E]=w&67108863;if(T===0&&E<L.length&&L!==this)for(;E<L.length;E++)this.words[E]=L.words[E];return this.length=Math.max(this.length,E),L!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(b){return this.clone().isub(b)};function A(k,b,w){w.negative=b.negative^k.negative;var N=k.length+b.length|0;w.length=N,N=N-1|0;var L=k.words[0]|0,C=b.words[0]|0,T=L*C,E=T&67108863,P=T/67108864|0;w.words[0]=E;for(var _=1;_<N;_++){for(var H=P>>>26,ne=P&67108863,$=Math.min(_,b.length-1),te=Math.max(0,_-k.length+1);te<=$;te++){var J=_-te|0;L=k.words[J]|0,C=b.words[te]|0,T=L*C+ne,H+=T/67108864|0,ne=T&67108863}w.words[_]=ne|0,P=H|0}return P!==0?w.words[_]=P|0:w.length--,w._strip()}var S=function(b,w,N){var L=b.words,C=w.words,T=N.words,E=0,P,_,H,ne=L[0]|0,$=ne&8191,te=ne>>>13,J=L[1]|0,ee=J&8191,X=J>>>13,j=L[2]|0,se=j&8191,ye=j>>>13,Ce=L[3]|0,xe=Ce&8191,De=Ce>>>13,qe=L[4]|0,ze=qe&8191,ft=qe>>>13,mt=L[5]|0,Be=mt&8191,de=mt>>>13,oe=L[6]|0,fe=oe&8191,ce=oe>>>13,ae=L[7]|0,Ie=ae&8191,nt=ae>>>13,yt=L[8]|0,Tt=yt&8191,at=yt>>>13,It=L[9]|0,_t=It&8191,pt=It>>>13,$t=C[0]|0,Pt=$t&8191,jt=$t>>>13,En=C[1]|0,An=En&8191,At=En>>>13,Sn=C[2]|0,Hn=Sn&8191,Qt=Sn>>>13,nn=C[3]|0,sn=nn&8191,Nt=nn>>>13,un=C[4]|0,Xt=un&8191,Ct=un>>>13,In=C[5]|0,Cn=In&8191,kt=In>>>13,Ht=C[6]|0,an=Ht&8191,ct=Ht>>>13,yn=C[7]|0,qt=yn&8191,xt=yn>>>13,Tn=C[8]|0,Fr=Tn&8191,hn=Tn>>>13,Or=C[9]|0,qn=Or&8191,Dr=Or>>>13;N.negative=b.negative^w.negative,N.length=19,P=Math.imul($,Pt),_=Math.imul($,jt),_=_+Math.imul(te,Pt)|0,H=Math.imul(te,jt);var ca=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(ca>>>26)|0,ca&=67108863,P=Math.imul(ee,Pt),_=Math.imul(ee,jt),_=_+Math.imul(X,Pt)|0,H=Math.imul(X,jt),P=P+Math.imul($,An)|0,_=_+Math.imul($,At)|0,_=_+Math.imul(te,An)|0,H=H+Math.imul(te,At)|0;var la=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(la>>>26)|0,la&=67108863,P=Math.imul(se,Pt),_=Math.imul(se,jt),_=_+Math.imul(ye,Pt)|0,H=Math.imul(ye,jt),P=P+Math.imul(ee,An)|0,_=_+Math.imul(ee,At)|0,_=_+Math.imul(X,An)|0,H=H+Math.imul(X,At)|0,P=P+Math.imul($,Hn)|0,_=_+Math.imul($,Qt)|0,_=_+Math.imul(te,Hn)|0,H=H+Math.imul(te,Qt)|0;var ua=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(ua>>>26)|0,ua&=67108863,P=Math.imul(xe,Pt),_=Math.imul(xe,jt),_=_+Math.imul(De,Pt)|0,H=Math.imul(De,jt),P=P+Math.imul(se,An)|0,_=_+Math.imul(se,At)|0,_=_+Math.imul(ye,An)|0,H=H+Math.imul(ye,At)|0,P=P+Math.imul(ee,Hn)|0,_=_+Math.imul(ee,Qt)|0,_=_+Math.imul(X,Hn)|0,H=H+Math.imul(X,Qt)|0,P=P+Math.imul($,sn)|0,_=_+Math.imul($,Nt)|0,_=_+Math.imul(te,sn)|0,H=H+Math.imul(te,Nt)|0;var Na=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(Na>>>26)|0,Na&=67108863,P=Math.imul(ze,Pt),_=Math.imul(ze,jt),_=_+Math.imul(ft,Pt)|0,H=Math.imul(ft,jt),P=P+Math.imul(xe,An)|0,_=_+Math.imul(xe,At)|0,_=_+Math.imul(De,An)|0,H=H+Math.imul(De,At)|0,P=P+Math.imul(se,Hn)|0,_=_+Math.imul(se,Qt)|0,_=_+Math.imul(ye,Hn)|0,H=H+Math.imul(ye,Qt)|0,P=P+Math.imul(ee,sn)|0,_=_+Math.imul(ee,Nt)|0,_=_+Math.imul(X,sn)|0,H=H+Math.imul(X,Nt)|0,P=P+Math.imul($,Xt)|0,_=_+Math.imul($,Ct)|0,_=_+Math.imul(te,Xt)|0,H=H+Math.imul(te,Ct)|0;var Js=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(Js>>>26)|0,Js&=67108863,P=Math.imul(Be,Pt),_=Math.imul(Be,jt),_=_+Math.imul(de,Pt)|0,H=Math.imul(de,jt),P=P+Math.imul(ze,An)|0,_=_+Math.imul(ze,At)|0,_=_+Math.imul(ft,An)|0,H=H+Math.imul(ft,At)|0,P=P+Math.imul(xe,Hn)|0,_=_+Math.imul(xe,Qt)|0,_=_+Math.imul(De,Hn)|0,H=H+Math.imul(De,Qt)|0,P=P+Math.imul(se,sn)|0,_=_+Math.imul(se,Nt)|0,_=_+Math.imul(ye,sn)|0,H=H+Math.imul(ye,Nt)|0,P=P+Math.imul(ee,Xt)|0,_=_+Math.imul(ee,Ct)|0,_=_+Math.imul(X,Xt)|0,H=H+Math.imul(X,Ct)|0,P=P+Math.imul($,Cn)|0,_=_+Math.imul($,kt)|0,_=_+Math.imul(te,Cn)|0,H=H+Math.imul(te,kt)|0;var Ro=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(Ro>>>26)|0,Ro&=67108863,P=Math.imul(fe,Pt),_=Math.imul(fe,jt),_=_+Math.imul(ce,Pt)|0,H=Math.imul(ce,jt),P=P+Math.imul(Be,An)|0,_=_+Math.imul(Be,At)|0,_=_+Math.imul(de,An)|0,H=H+Math.imul(de,At)|0,P=P+Math.imul(ze,Hn)|0,_=_+Math.imul(ze,Qt)|0,_=_+Math.imul(ft,Hn)|0,H=H+Math.imul(ft,Qt)|0,P=P+Math.imul(xe,sn)|0,_=_+Math.imul(xe,Nt)|0,_=_+Math.imul(De,sn)|0,H=H+Math.imul(De,Nt)|0,P=P+Math.imul(se,Xt)|0,_=_+Math.imul(se,Ct)|0,_=_+Math.imul(ye,Xt)|0,H=H+Math.imul(ye,Ct)|0,P=P+Math.imul(ee,Cn)|0,_=_+Math.imul(ee,kt)|0,_=_+Math.imul(X,Cn)|0,H=H+Math.imul(X,kt)|0,P=P+Math.imul($,an)|0,_=_+Math.imul($,ct)|0,_=_+Math.imul(te,an)|0,H=H+Math.imul(te,ct)|0;var _o=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(_o>>>26)|0,_o&=67108863,P=Math.imul(Ie,Pt),_=Math.imul(Ie,jt),_=_+Math.imul(nt,Pt)|0,H=Math.imul(nt,jt),P=P+Math.imul(fe,An)|0,_=_+Math.imul(fe,At)|0,_=_+Math.imul(ce,An)|0,H=H+Math.imul(ce,At)|0,P=P+Math.imul(Be,Hn)|0,_=_+Math.imul(Be,Qt)|0,_=_+Math.imul(de,Hn)|0,H=H+Math.imul(de,Qt)|0,P=P+Math.imul(ze,sn)|0,_=_+Math.imul(ze,Nt)|0,_=_+Math.imul(ft,sn)|0,H=H+Math.imul(ft,Nt)|0,P=P+Math.imul(xe,Xt)|0,_=_+Math.imul(xe,Ct)|0,_=_+Math.imul(De,Xt)|0,H=H+Math.imul(De,Ct)|0,P=P+Math.imul(se,Cn)|0,_=_+Math.imul(se,kt)|0,_=_+Math.imul(ye,Cn)|0,H=H+Math.imul(ye,kt)|0,P=P+Math.imul(ee,an)|0,_=_+Math.imul(ee,ct)|0,_=_+Math.imul(X,an)|0,H=H+Math.imul(X,ct)|0,P=P+Math.imul($,qt)|0,_=_+Math.imul($,xt)|0,_=_+Math.imul(te,qt)|0,H=H+Math.imul(te,xt)|0;var Bo=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(Bo>>>26)|0,Bo&=67108863,P=Math.imul(Tt,Pt),_=Math.imul(Tt,jt),_=_+Math.imul(at,Pt)|0,H=Math.imul(at,jt),P=P+Math.imul(Ie,An)|0,_=_+Math.imul(Ie,At)|0,_=_+Math.imul(nt,An)|0,H=H+Math.imul(nt,At)|0,P=P+Math.imul(fe,Hn)|0,_=_+Math.imul(fe,Qt)|0,_=_+Math.imul(ce,Hn)|0,H=H+Math.imul(ce,Qt)|0,P=P+Math.imul(Be,sn)|0,_=_+Math.imul(Be,Nt)|0,_=_+Math.imul(de,sn)|0,H=H+Math.imul(de,Nt)|0,P=P+Math.imul(ze,Xt)|0,_=_+Math.imul(ze,Ct)|0,_=_+Math.imul(ft,Xt)|0,H=H+Math.imul(ft,Ct)|0,P=P+Math.imul(xe,Cn)|0,_=_+Math.imul(xe,kt)|0,_=_+Math.imul(De,Cn)|0,H=H+Math.imul(De,kt)|0,P=P+Math.imul(se,an)|0,_=_+Math.imul(se,ct)|0,_=_+Math.imul(ye,an)|0,H=H+Math.imul(ye,ct)|0,P=P+Math.imul(ee,qt)|0,_=_+Math.imul(ee,xt)|0,_=_+Math.imul(X,qt)|0,H=H+Math.imul(X,xt)|0,P=P+Math.imul($,Fr)|0,_=_+Math.imul($,hn)|0,_=_+Math.imul(te,Fr)|0,H=H+Math.imul(te,hn)|0;var to=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(to>>>26)|0,to&=67108863,P=Math.imul(_t,Pt),_=Math.imul(_t,jt),_=_+Math.imul(pt,Pt)|0,H=Math.imul(pt,jt),P=P+Math.imul(Tt,An)|0,_=_+Math.imul(Tt,At)|0,_=_+Math.imul(at,An)|0,H=H+Math.imul(at,At)|0,P=P+Math.imul(Ie,Hn)|0,_=_+Math.imul(Ie,Qt)|0,_=_+Math.imul(nt,Hn)|0,H=H+Math.imul(nt,Qt)|0,P=P+Math.imul(fe,sn)|0,_=_+Math.imul(fe,Nt)|0,_=_+Math.imul(ce,sn)|0,H=H+Math.imul(ce,Nt)|0,P=P+Math.imul(Be,Xt)|0,_=_+Math.imul(Be,Ct)|0,_=_+Math.imul(de,Xt)|0,H=H+Math.imul(de,Ct)|0,P=P+Math.imul(ze,Cn)|0,_=_+Math.imul(ze,kt)|0,_=_+Math.imul(ft,Cn)|0,H=H+Math.imul(ft,kt)|0,P=P+Math.imul(xe,an)|0,_=_+Math.imul(xe,ct)|0,_=_+Math.imul(De,an)|0,H=H+Math.imul(De,ct)|0,P=P+Math.imul(se,qt)|0,_=_+Math.imul(se,xt)|0,_=_+Math.imul(ye,qt)|0,H=H+Math.imul(ye,xt)|0,P=P+Math.imul(ee,Fr)|0,_=_+Math.imul(ee,hn)|0,_=_+Math.imul(X,Fr)|0,H=H+Math.imul(X,hn)|0,P=P+Math.imul($,qn)|0,_=_+Math.imul($,Dr)|0,_=_+Math.imul(te,qn)|0,H=H+Math.imul(te,Dr)|0;var Ml=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(Ml>>>26)|0,Ml&=67108863,P=Math.imul(_t,An),_=Math.imul(_t,At),_=_+Math.imul(pt,An)|0,H=Math.imul(pt,At),P=P+Math.imul(Tt,Hn)|0,_=_+Math.imul(Tt,Qt)|0,_=_+Math.imul(at,Hn)|0,H=H+Math.imul(at,Qt)|0,P=P+Math.imul(Ie,sn)|0,_=_+Math.imul(Ie,Nt)|0,_=_+Math.imul(nt,sn)|0,H=H+Math.imul(nt,Nt)|0,P=P+Math.imul(fe,Xt)|0,_=_+Math.imul(fe,Ct)|0,_=_+Math.imul(ce,Xt)|0,H=H+Math.imul(ce,Ct)|0,P=P+Math.imul(Be,Cn)|0,_=_+Math.imul(Be,kt)|0,_=_+Math.imul(de,Cn)|0,H=H+Math.imul(de,kt)|0,P=P+Math.imul(ze,an)|0,_=_+Math.imul(ze,ct)|0,_=_+Math.imul(ft,an)|0,H=H+Math.imul(ft,ct)|0,P=P+Math.imul(xe,qt)|0,_=_+Math.imul(xe,xt)|0,_=_+Math.imul(De,qt)|0,H=H+Math.imul(De,xt)|0,P=P+Math.imul(se,Fr)|0,_=_+Math.imul(se,hn)|0,_=_+Math.imul(ye,Fr)|0,H=H+Math.imul(ye,hn)|0,P=P+Math.imul(ee,qn)|0,_=_+Math.imul(ee,Dr)|0,_=_+Math.imul(X,qn)|0,H=H+Math.imul(X,Dr)|0;var fa=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(fa>>>26)|0,fa&=67108863,P=Math.imul(_t,Hn),_=Math.imul(_t,Qt),_=_+Math.imul(pt,Hn)|0,H=Math.imul(pt,Qt),P=P+Math.imul(Tt,sn)|0,_=_+Math.imul(Tt,Nt)|0,_=_+Math.imul(at,sn)|0,H=H+Math.imul(at,Nt)|0,P=P+Math.imul(Ie,Xt)|0,_=_+Math.imul(Ie,Ct)|0,_=_+Math.imul(nt,Xt)|0,H=H+Math.imul(nt,Ct)|0,P=P+Math.imul(fe,Cn)|0,_=_+Math.imul(fe,kt)|0,_=_+Math.imul(ce,Cn)|0,H=H+Math.imul(ce,kt)|0,P=P+Math.imul(Be,an)|0,_=_+Math.imul(Be,ct)|0,_=_+Math.imul(de,an)|0,H=H+Math.imul(de,ct)|0,P=P+Math.imul(ze,qt)|0,_=_+Math.imul(ze,xt)|0,_=_+Math.imul(ft,qt)|0,H=H+Math.imul(ft,xt)|0,P=P+Math.imul(xe,Fr)|0,_=_+Math.imul(xe,hn)|0,_=_+Math.imul(De,Fr)|0,H=H+Math.imul(De,hn)|0,P=P+Math.imul(se,qn)|0,_=_+Math.imul(se,Dr)|0,_=_+Math.imul(ye,qn)|0,H=H+Math.imul(ye,Dr)|0;var ka=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(ka>>>26)|0,ka&=67108863,P=Math.imul(_t,sn),_=Math.imul(_t,Nt),_=_+Math.imul(pt,sn)|0,H=Math.imul(pt,Nt),P=P+Math.imul(Tt,Xt)|0,_=_+Math.imul(Tt,Ct)|0,_=_+Math.imul(at,Xt)|0,H=H+Math.imul(at,Ct)|0,P=P+Math.imul(Ie,Cn)|0,_=_+Math.imul(Ie,kt)|0,_=_+Math.imul(nt,Cn)|0,H=H+Math.imul(nt,kt)|0,P=P+Math.imul(fe,an)|0,_=_+Math.imul(fe,ct)|0,_=_+Math.imul(ce,an)|0,H=H+Math.imul(ce,ct)|0,P=P+Math.imul(Be,qt)|0,_=_+Math.imul(Be,xt)|0,_=_+Math.imul(de,qt)|0,H=H+Math.imul(de,xt)|0,P=P+Math.imul(ze,Fr)|0,_=_+Math.imul(ze,hn)|0,_=_+Math.imul(ft,Fr)|0,H=H+Math.imul(ft,hn)|0,P=P+Math.imul(xe,qn)|0,_=_+Math.imul(xe,Dr)|0,_=_+Math.imul(De,qn)|0,H=H+Math.imul(De,Dr)|0;var dc=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(dc>>>26)|0,dc&=67108863,P=Math.imul(_t,Xt),_=Math.imul(_t,Ct),_=_+Math.imul(pt,Xt)|0,H=Math.imul(pt,Ct),P=P+Math.imul(Tt,Cn)|0,_=_+Math.imul(Tt,kt)|0,_=_+Math.imul(at,Cn)|0,H=H+Math.imul(at,kt)|0,P=P+Math.imul(Ie,an)|0,_=_+Math.imul(Ie,ct)|0,_=_+Math.imul(nt,an)|0,H=H+Math.imul(nt,ct)|0,P=P+Math.imul(fe,qt)|0,_=_+Math.imul(fe,xt)|0,_=_+Math.imul(ce,qt)|0,H=H+Math.imul(ce,xt)|0,P=P+Math.imul(Be,Fr)|0,_=_+Math.imul(Be,hn)|0,_=_+Math.imul(de,Fr)|0,H=H+Math.imul(de,hn)|0,P=P+Math.imul(ze,qn)|0,_=_+Math.imul(ze,Dr)|0,_=_+Math.imul(ft,qn)|0,H=H+Math.imul(ft,Dr)|0;var ni=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(ni>>>26)|0,ni&=67108863,P=Math.imul(_t,Cn),_=Math.imul(_t,kt),_=_+Math.imul(pt,Cn)|0,H=Math.imul(pt,kt),P=P+Math.imul(Tt,an)|0,_=_+Math.imul(Tt,ct)|0,_=_+Math.imul(at,an)|0,H=H+Math.imul(at,ct)|0,P=P+Math.imul(Ie,qt)|0,_=_+Math.imul(Ie,xt)|0,_=_+Math.imul(nt,qt)|0,H=H+Math.imul(nt,xt)|0,P=P+Math.imul(fe,Fr)|0,_=_+Math.imul(fe,hn)|0,_=_+Math.imul(ce,Fr)|0,H=H+Math.imul(ce,hn)|0,P=P+Math.imul(Be,qn)|0,_=_+Math.imul(Be,Dr)|0,_=_+Math.imul(de,qn)|0,H=H+Math.imul(de,Dr)|0;var Dl=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(Dl>>>26)|0,Dl&=67108863,P=Math.imul(_t,an),_=Math.imul(_t,ct),_=_+Math.imul(pt,an)|0,H=Math.imul(pt,ct),P=P+Math.imul(Tt,qt)|0,_=_+Math.imul(Tt,xt)|0,_=_+Math.imul(at,qt)|0,H=H+Math.imul(at,xt)|0,P=P+Math.imul(Ie,Fr)|0,_=_+Math.imul(Ie,hn)|0,_=_+Math.imul(nt,Fr)|0,H=H+Math.imul(nt,hn)|0,P=P+Math.imul(fe,qn)|0,_=_+Math.imul(fe,Dr)|0,_=_+Math.imul(ce,qn)|0,H=H+Math.imul(ce,Dr)|0;var Ll=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(Ll>>>26)|0,Ll&=67108863,P=Math.imul(_t,qt),_=Math.imul(_t,xt),_=_+Math.imul(pt,qt)|0,H=Math.imul(pt,xt),P=P+Math.imul(Tt,Fr)|0,_=_+Math.imul(Tt,hn)|0,_=_+Math.imul(at,Fr)|0,H=H+Math.imul(at,hn)|0,P=P+Math.imul(Ie,qn)|0,_=_+Math.imul(Ie,Dr)|0,_=_+Math.imul(nt,qn)|0,H=H+Math.imul(nt,Dr)|0;var Ul=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(Ul>>>26)|0,Ul&=67108863,P=Math.imul(_t,Fr),_=Math.imul(_t,hn),_=_+Math.imul(pt,Fr)|0,H=Math.imul(pt,hn),P=P+Math.imul(Tt,qn)|0,_=_+Math.imul(Tt,Dr)|0,_=_+Math.imul(at,qn)|0,H=H+Math.imul(at,Dr)|0;var X0=(E+P|0)+((_&8191)<<13)|0;E=(H+(_>>>13)|0)+(X0>>>26)|0,X0&=67108863,P=Math.imul(_t,qn),_=Math.imul(_t,Dr),_=_+Math.imul(pt,qn)|0,H=Math.imul(pt,Dr);var Uu=(E+P|0)+((_&8191)<<13)|0;return E=(H+(_>>>13)|0)+(Uu>>>26)|0,Uu&=67108863,T[0]=ca,T[1]=la,T[2]=ua,T[3]=Na,T[4]=Js,T[5]=Ro,T[6]=_o,T[7]=Bo,T[8]=to,T[9]=Ml,T[10]=fa,T[11]=ka,T[12]=dc,T[13]=ni,T[14]=Dl,T[15]=Ll,T[16]=Ul,T[17]=X0,T[18]=Uu,E!==0&&(T[19]=E,N.length++),N};Math.imul||(S=A);function I(k,b,w){w.negative=b.negative^k.negative,w.length=k.length+b.length;for(var N=0,L=0,C=0;C<w.length-1;C++){var T=L;L=0;for(var E=N&67108863,P=Math.min(C,b.length-1),_=Math.max(0,C-k.length+1);_<=P;_++){var H=C-_,ne=k.words[H]|0,$=b.words[_]|0,te=ne*$,J=te&67108863;T=T+(te/67108864|0)|0,J=J+E|0,E=J&67108863,T=T+(J>>>26)|0,L+=T>>>26,T&=67108863}w.words[C]=E,N=T,T=L}return N!==0?w.words[C]=N:w.length--,w._strip()}function B(k,b,w){return I(k,b,w)}i.prototype.mulTo=function(b,w){var N,L=this.length+b.length;return this.length===10&&b.length===10?N=S(this,b,w):L<63?N=A(this,b,w):L<1024?N=I(this,b,w):N=B(this,b,w),N},i.prototype.mul=function(b){var w=new i(null);return w.words=new Array(this.length+b.length),this.mulTo(b,w)},i.prototype.mulf=function(b){var w=new i(null);return w.words=new Array(this.length+b.length),B(this,b,w)},i.prototype.imul=function(b){return this.clone().mulTo(b,this)},i.prototype.imuln=function(b){var w=b<0;w&&(b=-b),r(typeof b=="number"),r(b<67108864);for(var N=0,L=0;L<this.length;L++){var C=(this.words[L]|0)*b,T=(C&67108863)+(N&67108863);N>>=26,N+=C/67108864|0,N+=T>>>26,this.words[L]=T&67108863}return N!==0&&(this.words[L]=N,this.length++),this.length=b===0?1:this.length,w?this.ineg():this},i.prototype.muln=function(b){return this.clone().imuln(b)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(b){var w=v(b);if(w.length===0)return new i(1);for(var N=this,L=0;L<w.length&&w[L]===0;L++,N=N.sqr());if(++L<w.length)for(var C=N.sqr();L<w.length;L++,C=C.sqr())w[L]!==0&&(N=N.mul(C));return N},i.prototype.iushln=function(b){r(typeof b=="number"&&b>=0);var w=b%26,N=(b-w)/26,L=67108863>>>26-w<<26-w,C;if(w!==0){var T=0;for(C=0;C<this.length;C++){var E=this.words[C]&L,P=(this.words[C]|0)-E<<w;this.words[C]=P|T,T=E>>>26-w}T&&(this.words[C]=T,this.length++)}if(N!==0){for(C=this.length-1;C>=0;C--)this.words[C+N]=this.words[C];for(C=0;C<N;C++)this.words[C]=0;this.length+=N}return this._strip()},i.prototype.ishln=function(b){return r(this.negative===0),this.iushln(b)},i.prototype.iushrn=function(b,w,N){r(typeof b=="number"&&b>=0);var L;w?L=(w-w%26)/26:L=0;var C=b%26,T=Math.min((b-C)/26,this.length),E=67108863^67108863>>>C<<C,P=N;if(L-=T,L=Math.max(0,L),P){for(var _=0;_<T;_++)P.words[_]=this.words[_];P.length=T}if(T!==0)if(this.length>T)for(this.length-=T,_=0;_<this.length;_++)this.words[_]=this.words[_+T];else this.words[0]=0,this.length=1;var H=0;for(_=this.length-1;_>=0&&(H!==0||_>=L);_--){var ne=this.words[_]|0;this.words[_]=H<<26-C|ne>>>C,H=ne&E}return P&&H!==0&&(P.words[P.length++]=H),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(b,w,N){return r(this.negative===0),this.iushrn(b,w,N)},i.prototype.shln=function(b){return this.clone().ishln(b)},i.prototype.ushln=function(b){return this.clone().iushln(b)},i.prototype.shrn=function(b){return this.clone().ishrn(b)},i.prototype.ushrn=function(b){return this.clone().iushrn(b)},i.prototype.testn=function(b){r(typeof b=="number"&&b>=0);var w=b%26,N=(b-w)/26,L=1<<w;if(this.length<=N)return!1;var C=this.words[N];return!!(C&L)},i.prototype.imaskn=function(b){r(typeof b=="number"&&b>=0);var w=b%26,N=(b-w)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=N)return this;if(w!==0&&N++,this.length=Math.min(N,this.length),w!==0){var L=67108863^67108863>>>w<<w;this.words[this.length-1]&=L}return this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.maskn=function(b){return this.clone().imaskn(b)},i.prototype.iaddn=function(b){return r(typeof b=="number"),r(b<67108864),b<0?this.isubn(-b):this.negative!==0?this.length===1&&(this.words[0]|0)<=b?(this.words[0]=b-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(b),this.negative=1,this):this._iaddn(b)},i.prototype._iaddn=function(b){this.words[0]+=b;for(var w=0;w<this.length&&this.words[w]>=67108864;w++)this.words[w]-=67108864,w===this.length-1?this.words[w+1]=1:this.words[w+1]++;return this.length=Math.max(this.length,w+1),this},i.prototype.isubn=function(b){if(r(typeof b=="number"),r(b<67108864),b<0)return this.iaddn(-b);if(this.negative!==0)return this.negative=0,this.iaddn(b),this.negative=1,this;if(this.words[0]-=b,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var w=0;w<this.length&&this.words[w]<0;w++)this.words[w]+=67108864,this.words[w+1]-=1;return this._strip()},i.prototype.addn=function(b){return this.clone().iaddn(b)},i.prototype.subn=function(b){return this.clone().isubn(b)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(b,w,N){var L=b.length+N,C;this._expand(L);var T,E=0;for(C=0;C<b.length;C++){T=(this.words[C+N]|0)+E;var P=(b.words[C]|0)*w;T-=P&67108863,E=(T>>26)-(P/67108864|0),this.words[C+N]=T&67108863}for(;C<this.length-N;C++)T=(this.words[C+N]|0)+E,E=T>>26,this.words[C+N]=T&67108863;if(E===0)return this._strip();for(r(E===-1),E=0,C=0;C<this.length;C++)T=-(this.words[C]|0)+E,E=T>>26,this.words[C]=T&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(b,w){var N=this.length-b.length,L=this.clone(),C=b,T=C.words[C.length-1]|0,E=this._countBits(T);N=26-E,N!==0&&(C=C.ushln(N),L.iushln(N),T=C.words[C.length-1]|0);var P=L.length-C.length,_;if(w!=="mod"){_=new i(null),_.length=P+1,_.words=new Array(_.length);for(var H=0;H<_.length;H++)_.words[H]=0}var ne=L.clone()._ishlnsubmul(C,1,P);ne.negative===0&&(L=ne,_&&(_.words[P]=1));for(var $=P-1;$>=0;$--){var te=(L.words[C.length+$]|0)*67108864+(L.words[C.length+$-1]|0);for(te=Math.min(te/T|0,67108863),L._ishlnsubmul(C,te,$);L.negative!==0;)te--,L.negative=0,L._ishlnsubmul(C,1,$),L.isZero()||(L.negative^=1);_&&(_.words[$]=te)}return _&&_._strip(),L._strip(),w!=="div"&&N!==0&&L.iushrn(N),{div:_||null,mod:L}},i.prototype.divmod=function(b,w,N){if(r(!b.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var L,C,T;return this.negative!==0&&b.negative===0?(T=this.neg().divmod(b,w),w!=="mod"&&(L=T.div.neg()),w!=="div"&&(C=T.mod.neg(),N&&C.negative!==0&&C.iadd(b)),{div:L,mod:C}):this.negative===0&&b.negative!==0?(T=this.divmod(b.neg(),w),w!=="mod"&&(L=T.div.neg()),{div:L,mod:T.mod}):this.negative&b.negative?(T=this.neg().divmod(b.neg(),w),w!=="div"&&(C=T.mod.neg(),N&&C.negative!==0&&C.isub(b)),{div:T.div,mod:C}):b.length>this.length||this.cmp(b)<0?{div:new i(0),mod:this}:b.length===1?w==="div"?{div:this.divn(b.words[0]),mod:null}:w==="mod"?{div:null,mod:new i(this.modrn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new i(this.modrn(b.words[0]))}:this._wordDiv(b,w)},i.prototype.div=function(b){return this.divmod(b,"div",!1).div},i.prototype.mod=function(b){return this.divmod(b,"mod",!1).mod},i.prototype.umod=function(b){return this.divmod(b,"mod",!0).mod},i.prototype.divRound=function(b){var w=this.divmod(b);if(w.mod.isZero())return w.div;var N=w.div.negative!==0?w.mod.isub(b):w.mod,L=b.ushrn(1),C=b.andln(1),T=N.cmp(L);return T<0||C===1&&T===0?w.div:w.div.negative!==0?w.div.isubn(1):w.div.iaddn(1)},i.prototype.modrn=function(b){var w=b<0;w&&(b=-b),r(b<=67108863);for(var N=(1<<26)%b,L=0,C=this.length-1;C>=0;C--)L=(N*L+(this.words[C]|0))%b;return w?-L:L},i.prototype.modn=function(b){return this.modrn(b)},i.prototype.idivn=function(b){var w=b<0;w&&(b=-b),r(b<=67108863);for(var N=0,L=this.length-1;L>=0;L--){var C=(this.words[L]|0)+N*67108864;this.words[L]=C/b|0,N=C%b}return this._strip(),w?this.ineg():this},i.prototype.divn=function(b){return this.clone().idivn(b)},i.prototype.egcd=function(b){r(b.negative===0),r(!b.isZero());var w=this,N=b.clone();w.negative!==0?w=w.umod(b):w=w.clone();for(var L=new i(1),C=new i(0),T=new i(0),E=new i(1),P=0;w.isEven()&&N.isEven();)w.iushrn(1),N.iushrn(1),++P;for(var _=N.clone(),H=w.clone();!w.isZero();){for(var ne=0,$=1;!(w.words[0]&$)&&ne<26;++ne,$<<=1);if(ne>0)for(w.iushrn(ne);ne-- >0;)(L.isOdd()||C.isOdd())&&(L.iadd(_),C.isub(H)),L.iushrn(1),C.iushrn(1);for(var te=0,J=1;!(N.words[0]&J)&&te<26;++te,J<<=1);if(te>0)for(N.iushrn(te);te-- >0;)(T.isOdd()||E.isOdd())&&(T.iadd(_),E.isub(H)),T.iushrn(1),E.iushrn(1);w.cmp(N)>=0?(w.isub(N),L.isub(T),C.isub(E)):(N.isub(w),T.isub(L),E.isub(C))}return{a:T,b:E,gcd:N.iushln(P)}},i.prototype._invmp=function(b){r(b.negative===0),r(!b.isZero());var w=this,N=b.clone();w.negative!==0?w=w.umod(b):w=w.clone();for(var L=new i(1),C=new i(0),T=N.clone();w.cmpn(1)>0&&N.cmpn(1)>0;){for(var E=0,P=1;!(w.words[0]&P)&&E<26;++E,P<<=1);if(E>0)for(w.iushrn(E);E-- >0;)L.isOdd()&&L.iadd(T),L.iushrn(1);for(var _=0,H=1;!(N.words[0]&H)&&_<26;++_,H<<=1);if(_>0)for(N.iushrn(_);_-- >0;)C.isOdd()&&C.iadd(T),C.iushrn(1);w.cmp(N)>=0?(w.isub(N),L.isub(C)):(N.isub(w),C.isub(L))}var ne;return w.cmpn(1)===0?ne=L:ne=C,ne.cmpn(0)<0&&ne.iadd(b),ne},i.prototype.gcd=function(b){if(this.isZero())return b.abs();if(b.isZero())return this.abs();var w=this.clone(),N=b.clone();w.negative=0,N.negative=0;for(var L=0;w.isEven()&&N.isEven();L++)w.iushrn(1),N.iushrn(1);do{for(;w.isEven();)w.iushrn(1);for(;N.isEven();)N.iushrn(1);var C=w.cmp(N);if(C<0){var T=w;w=N,N=T}else if(C===0||N.cmpn(1)===0)break;w.isub(N)}while(!0);return N.iushln(L)},i.prototype.invm=function(b){return this.egcd(b).a.umod(b)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(b){return this.words[0]&b},i.prototype.bincn=function(b){r(typeof b=="number");var w=b%26,N=(b-w)/26,L=1<<w;if(this.length<=N)return this._expand(N+1),this.words[N]|=L,this;for(var C=L,T=N;C!==0&&T<this.length;T++){var E=this.words[T]|0;E+=C,C=E>>>26,E&=67108863,this.words[T]=E}return C!==0&&(this.words[T]=C,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(b){var w=b<0;if(this.negative!==0&&!w)return-1;if(this.negative===0&&w)return 1;this._strip();var N;if(this.length>1)N=1;else{w&&(b=-b),r(b<=67108863,"Number is too big");var L=this.words[0]|0;N=L===b?0:L<b?-1:1}return this.negative!==0?-N|0:N},i.prototype.cmp=function(b){if(this.negative!==0&&b.negative===0)return-1;if(this.negative===0&&b.negative!==0)return 1;var w=this.ucmp(b);return this.negative!==0?-w|0:w},i.prototype.ucmp=function(b){if(this.length>b.length)return 1;if(this.length<b.length)return-1;for(var w=0,N=this.length-1;N>=0;N--){var L=this.words[N]|0,C=b.words[N]|0;if(L!==C){L<C?w=-1:L>C&&(w=1);break}}return w},i.prototype.gtn=function(b){return this.cmpn(b)===1},i.prototype.gt=function(b){return this.cmp(b)===1},i.prototype.gten=function(b){return this.cmpn(b)>=0},i.prototype.gte=function(b){return this.cmp(b)>=0},i.prototype.ltn=function(b){return this.cmpn(b)===-1},i.prototype.lt=function(b){return this.cmp(b)===-1},i.prototype.lten=function(b){return this.cmpn(b)<=0},i.prototype.lte=function(b){return this.cmp(b)<=0},i.prototype.eqn=function(b){return this.cmpn(b)===0},i.prototype.eq=function(b){return this.cmp(b)===0},i.red=function(b){return new G(b)},i.prototype.toRed=function(b){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),b.convertTo(this)._forceRed(b)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(b){return this.red=b,this},i.prototype.forceRed=function(b){return r(!this.red,"Already a number in reduction context"),this._forceRed(b)},i.prototype.redAdd=function(b){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,b)},i.prototype.redIAdd=function(b){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,b)},i.prototype.redSub=function(b){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,b)},i.prototype.redISub=function(b){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,b)},i.prototype.redShl=function(b){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,b)},i.prototype.redMul=function(b){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.mul(this,b)},i.prototype.redIMul=function(b){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.imul(this,b)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(b){return r(this.red&&!b.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,b)};var D={k256:null,p224:null,p192:null,p25519:null};function V(k,b){this.name=k,this.p=new i(b,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}V.prototype._tmp=function(){var b=new i(null);return b.words=new Array(Math.ceil(this.n/13)),b},V.prototype.ireduce=function(b){var w=b,N;do this.split(w,this.tmp),w=this.imulK(w),w=w.iadd(this.tmp),N=w.bitLength();while(N>this.n);var L=N<this.n?-1:w.ucmp(this.p);return L===0?(w.words[0]=0,w.length=1):L>0?w.isub(this.p):w.strip!==void 0?w.strip():w._strip(),w},V.prototype.split=function(b,w){b.iushrn(this.n,0,w)},V.prototype.imulK=function(b){return b.imul(this.k)};function O(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(O,V),O.prototype.split=function(b,w){for(var N=4194303,L=Math.min(b.length,9),C=0;C<L;C++)w.words[C]=b.words[C];if(w.length=L,b.length<=9){b.words[0]=0,b.length=1;return}var T=b.words[9];for(w.words[w.length++]=T&N,C=10;C<b.length;C++){var E=b.words[C]|0;b.words[C-10]=(E&N)<<4|T>>>22,T=E}T>>>=22,b.words[C-10]=T,T===0&&b.length>10?b.length-=10:b.length-=9},O.prototype.imulK=function(b){b.words[b.length]=0,b.words[b.length+1]=0,b.length+=2;for(var w=0,N=0;N<b.length;N++){var L=b.words[N]|0;w+=L*977,b.words[N]=w&67108863,w=L*64+(w/67108864|0)}return b.words[b.length-1]===0&&(b.length--,b.words[b.length-1]===0&&b.length--),b};function U(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(U,V);function Q(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Q,V);function ie(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(ie,V),ie.prototype.imulK=function(b){for(var w=0,N=0;N<b.length;N++){var L=(b.words[N]|0)*19+w,C=L&67108863;L>>>=26,b.words[N]=C,w=L}return w!==0&&(b.words[b.length++]=w),b},i._prime=function(b){if(D[b])return D[b];var w;if(b==="k256")w=new O;else if(b==="p224")w=new U;else if(b==="p192")w=new Q;else if(b==="p25519")w=new ie;else throw new Error("Unknown prime "+b);return D[b]=w,w};function G(k){if(typeof k=="string"){var b=i._prime(k);this.m=b.p,this.prime=b}else r(k.gtn(1),"modulus must be greater than 1"),this.m=k,this.prime=null}G.prototype._verify1=function(b){r(b.negative===0,"red works only with positives"),r(b.red,"red works only with red numbers")},G.prototype._verify2=function(b,w){r((b.negative|w.negative)===0,"red works only with positives"),r(b.red&&b.red===w.red,"red works only with red numbers")},G.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):(u(b,b.umod(this.m)._forceRed(this)),b)},G.prototype.neg=function(b){return b.isZero()?b.clone():this.m.sub(b)._forceRed(this)},G.prototype.add=function(b,w){this._verify2(b,w);var N=b.add(w);return N.cmp(this.m)>=0&&N.isub(this.m),N._forceRed(this)},G.prototype.iadd=function(b,w){this._verify2(b,w);var N=b.iadd(w);return N.cmp(this.m)>=0&&N.isub(this.m),N},G.prototype.sub=function(b,w){this._verify2(b,w);var N=b.sub(w);return N.cmpn(0)<0&&N.iadd(this.m),N._forceRed(this)},G.prototype.isub=function(b,w){this._verify2(b,w);var N=b.isub(w);return N.cmpn(0)<0&&N.iadd(this.m),N},G.prototype.shl=function(b,w){return this._verify1(b),this.imod(b.ushln(w))},G.prototype.imul=function(b,w){return this._verify2(b,w),this.imod(b.imul(w))},G.prototype.mul=function(b,w){return this._verify2(b,w),this.imod(b.mul(w))},G.prototype.isqr=function(b){return this.imul(b,b.clone())},G.prototype.sqr=function(b){return this.mul(b,b)},G.prototype.sqrt=function(b){if(b.isZero())return b.clone();var w=this.m.andln(3);if(r(w%2===1),w===3){var N=this.m.add(new i(1)).iushrn(2);return this.pow(b,N)}for(var L=this.m.subn(1),C=0;!L.isZero()&&L.andln(1)===0;)C++,L.iushrn(1);r(!L.isZero());var T=new i(1).toRed(this),E=T.redNeg(),P=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new i(2*_*_).toRed(this);this.pow(_,P).cmp(E)!==0;)_.redIAdd(E);for(var H=this.pow(_,L),ne=this.pow(b,L.addn(1).iushrn(1)),$=this.pow(b,L),te=C;$.cmp(T)!==0;){for(var J=$,ee=0;J.cmp(T)!==0;ee++)J=J.redSqr();r(ee<te);var X=this.pow(H,new i(1).iushln(te-ee-1));ne=ne.redMul(X),H=X.redSqr(),$=$.redMul(H),te=ee}return ne},G.prototype.invm=function(b){var w=b._invmp(this.m);return w.negative!==0?(w.negative=0,this.imod(w).redNeg()):this.imod(w)},G.prototype.pow=function(b,w){if(w.isZero())return new i(1).toRed(this);if(w.cmpn(1)===0)return b.clone();var N=4,L=new Array(1<<N);L[0]=new i(1).toRed(this),L[1]=b;for(var C=2;C<L.length;C++)L[C]=this.mul(L[C-1],b);var T=L[0],E=0,P=0,_=w.bitLength()%26;for(_===0&&(_=26),C=w.length-1;C>=0;C--){for(var H=w.words[C],ne=_-1;ne>=0;ne--){var $=H>>ne&1;if(T!==L[0]&&(T=this.sqr(T)),$===0&&E===0){P=0;continue}E<<=1,E|=$,P++,!(P!==N&&(C!==0||ne!==0))&&(T=this.mul(T,L[E]),P=0,E=0)}_=26}return T},G.prototype.convertTo=function(b){var w=b.umod(this.m);return w===b?w.clone():w},G.prototype.convertFrom=function(b){var w=b.clone();return w.red=null,w},i.mont=function(b){return new R(b)};function R(k){G.call(this,k),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(R,G),R.prototype.convertTo=function(b){return this.imod(b.ushln(this.shift))},R.prototype.convertFrom=function(b){var w=this.imod(b.mul(this.rinv));return w.red=null,w},R.prototype.imul=function(b,w){if(b.isZero()||w.isZero())return b.words[0]=0,b.length=1,b;var N=b.imul(w),L=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=N.isub(L).iushrn(this.shift),T=C;return C.cmp(this.m)>=0?T=C.isub(this.m):C.cmpn(0)<0&&(T=C.iadd(this.m)),T._forceRed(this)},R.prototype.mul=function(b,w){if(b.isZero()||w.isZero())return new i(0)._forceRed(this);var N=b.mul(w),L=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=N.isub(L).iushrn(this.shift),T=C;return C.cmp(this.m)>=0?T=C.isub(this.m):C.cmpn(0)<0&&(T=C.iadd(this.m)),T._forceRed(this)},R.prototype.invm=function(b){var w=this.imod(b._invmp(this.m).mul(this.r2));return w._forceRed(this)}})(t,cs)})(Qte);var vxt=Qte.exports;const Vn=em(vxt);var xxt=Vn.BN;function Ext(t){return new xxt(t,36).toString(16)}const Axt="strings/5.8.0",Sxt=new Hs(Axt);var oD;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(oD||(oD={}));var Nde;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Nde||(Nde={}));function Nq(t,e=oD.current){e!=oD.current&&(Sxt.checkNormalize(),t=t.normalize(e));let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);if(r>=t.length||(i&64512)!==56320)throw new Error("invalid utf-8 string");const a=65536+((s&1023)<<10)+(i&1023);n.push(a>>18|240),n.push(a>>12&63|128),n.push(a>>6&63|128),n.push(a&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return ta(n)}const Ixt=`Ethereum Signed Message:
`;function nCe(t){return typeof t=="string"&&(t=Nq(t)),Yte(gxt([Nq(Ixt),Nq(String(t.length)),t]))}const Cxt="address/5.8.0",RT=new Hs(Cxt);function kde(t){S0(t,20)||RT.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=ta(Yte(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const Txt=9007199254740991;function Nxt(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Zte={};for(let t=0;t<10;t++)Zte[String(t)]=String(t);for(let t=0;t<26;t++)Zte[String.fromCharCode(65+t)]=String(10+t);const Pde=Math.floor(Nxt(Txt));function kxt(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>Zte[r]).join("");for(;e.length>=Pde;){let r=e.substring(0,Pde);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}function Pxt(t){let e=null;if(typeof t!="string"&&RT.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=kde(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&RT.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==kxt(t)&&RT.throwArgumentError("bad icap checksum","address",t),e=Ext(t.substring(4));e.length<40;)e="0"+e;e=kde("0x"+e)}else RT.throwArgumentError("invalid address","address",t);return e}function X8(t,e,n){Object.defineProperty(t,e,{enumerable:!0,value:n,writable:!1})}var u9={},Mr={},Z2=rCe;function rCe(t,e){if(!t)throw new Error(e||"Assertion failed")}rCe.equal=function(e,n,r){if(e!=n)throw new Error(r||"Assertion failed: "+e+" != "+n)};var eY={exports:{}};typeof Object.create=="function"?eY.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:eY.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}};var pF=eY.exports,Oxt=Z2,Rxt=pF;Mr.inherits=Rxt;function _xt(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function Bxt(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),s=0;s<t.length;s+=2)n.push(parseInt(t[s]+t[s+1],16))}else for(var r=0,s=0;s<t.length;s++){var i=t.charCodeAt(s);i<128?n[r++]=i:i<2048?(n[r++]=i>>6|192,n[r++]=i&63|128):_xt(t,s)?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),n[r++]=i>>18|240,n[r++]=i>>12&63|128,n[r++]=i>>6&63|128,n[r++]=i&63|128):(n[r++]=i>>12|224,n[r++]=i>>6&63|128,n[r++]=i&63|128)}else for(s=0;s<t.length;s++)n[s]=t[s]|0;return n}Mr.toArray=Bxt;function Mxt(t){for(var e="",n=0;n<t.length;n++)e+=iCe(t[n].toString(16));return e}Mr.toHex=Mxt;function sCe(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Mr.htonl=sCe;function Dxt(t,e){for(var n="",r=0;r<t.length;r++){var s=t[r];e==="little"&&(s=sCe(s)),n+=aCe(s.toString(16))}return n}Mr.toHex32=Dxt;function iCe(t){return t.length===1?"0"+t:t}Mr.zero2=iCe;function aCe(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Mr.zero8=aCe;function Lxt(t,e,n,r){var s=n-e;Oxt(s%4===0);for(var i=new Array(s/4),a=0,o=e;a<i.length;a++,o+=4){var c;r==="big"?c=t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3]:c=t[o+3]<<24|t[o+2]<<16|t[o+1]<<8|t[o],i[a]=c>>>0}return i}Mr.join32=Lxt;function Uxt(t,e){for(var n=new Array(t.length*4),r=0,s=0;r<t.length;r++,s+=4){var i=t[r];e==="big"?(n[s]=i>>>24,n[s+1]=i>>>16&255,n[s+2]=i>>>8&255,n[s+3]=i&255):(n[s+3]=i>>>24,n[s+2]=i>>>16&255,n[s+1]=i>>>8&255,n[s]=i&255)}return n}Mr.split32=Uxt;function Fxt(t,e){return t>>>e|t<<32-e}Mr.rotr32=Fxt;function Vxt(t,e){return t<<e|t>>>32-e}Mr.rotl32=Vxt;function $xt(t,e){return t+e>>>0}Mr.sum32=$xt;function jxt(t,e,n){return t+e+n>>>0}Mr.sum32_3=jxt;function Hxt(t,e,n,r){return t+e+n+r>>>0}Mr.sum32_4=Hxt;function qxt(t,e,n,r,s){return t+e+n+r+s>>>0}Mr.sum32_5=qxt;function Kxt(t,e,n,r){var s=t[e],i=t[e+1],a=r+i>>>0,o=(a<r?1:0)+n+s;t[e]=o>>>0,t[e+1]=a}Mr.sum64=Kxt;function Gxt(t,e,n,r){var s=e+r>>>0,i=(s<e?1:0)+t+n;return i>>>0}Mr.sum64_hi=Gxt;function Wxt(t,e,n,r){var s=e+r;return s>>>0}Mr.sum64_lo=Wxt;function zxt(t,e,n,r,s,i,a,o){var c=0,l=e;l=l+r>>>0,c+=l<e?1:0,l=l+i>>>0,c+=l<i?1:0,l=l+o>>>0,c+=l<o?1:0;var u=t+n+s+a+c;return u>>>0}Mr.sum64_4_hi=zxt;function Jxt(t,e,n,r,s,i,a,o){var c=e+r+i+o;return c>>>0}Mr.sum64_4_lo=Jxt;function Yxt(t,e,n,r,s,i,a,o,c,l){var u=0,f=e;f=f+r>>>0,u+=f<e?1:0,f=f+i>>>0,u+=f<i?1:0,f=f+o>>>0,u+=f<o?1:0,f=f+l>>>0,u+=f<l?1:0;var d=t+n+s+a+c+u;return d>>>0}Mr.sum64_5_hi=Yxt;function Qxt(t,e,n,r,s,i,a,o,c,l){var u=e+r+i+o+l;return u>>>0}Mr.sum64_5_lo=Qxt;function Zxt(t,e,n){var r=e<<32-n|t>>>n;return r>>>0}Mr.rotr64_hi=Zxt;function Xxt(t,e,n){var r=t<<32-n|e>>>n;return r>>>0}Mr.rotr64_lo=Xxt;function e2t(t,e,n){return t>>>n}Mr.shr64_hi=e2t;function t2t(t,e,n){var r=t<<32-n|e>>>n;return r>>>0}Mr.shr64_lo=t2t;var P4={},Ode=Mr,n2t=Z2;function gF(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}P4.BlockHash=gF;gF.prototype.update=function(e,n){if(e=Ode.toArray(e,n),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),this.pending.length===0&&(this.pending=null),e=Ode.join32(e,0,e.length-r,this.endian);for(var s=0;s<e.length;s+=this._delta32)this._update(e,s,s+this._delta32)}return this};gF.prototype.digest=function(e){return this.update(this._pad()),n2t(this.pending===null),this._digest(e)};gF.prototype._pad=function(){var e=this.pendingTotal,n=this._delta8,r=n-(e+this.padLength)%n,s=new Array(r+this.padLength);s[0]=128;for(var i=1;i<r;i++)s[i]=0;if(e<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)s[i++]=0;s[i++]=0,s[i++]=0,s[i++]=0,s[i++]=0,s[i++]=e>>>24&255,s[i++]=e>>>16&255,s[i++]=e>>>8&255,s[i++]=e&255}else for(s[i++]=e&255,s[i++]=e>>>8&255,s[i++]=e>>>16&255,s[i++]=e>>>24&255,s[i++]=0,s[i++]=0,s[i++]=0,s[i++]=0,a=8;a<this.padLength;a++)s[i++]=0;return s};var O4={},Y0={},r2t=Mr,I0=r2t.rotr32;function s2t(t,e,n,r){if(t===0)return oCe(e,n,r);if(t===1||t===3)return lCe(e,n,r);if(t===2)return cCe(e,n,r)}Y0.ft_1=s2t;function oCe(t,e,n){return t&e^~t&n}Y0.ch32=oCe;function cCe(t,e,n){return t&e^t&n^e&n}Y0.maj32=cCe;function lCe(t,e,n){return t^e^n}Y0.p32=lCe;function i2t(t){return I0(t,2)^I0(t,13)^I0(t,22)}Y0.s0_256=i2t;function a2t(t){return I0(t,6)^I0(t,11)^I0(t,25)}Y0.s1_256=a2t;function o2t(t){return I0(t,7)^I0(t,18)^t>>>3}Y0.g0_256=o2t;function c2t(t){return I0(t,17)^I0(t,19)^t>>>10}Y0.g1_256=c2t;var H5=Mr,l2t=P4,u2t=Y0,kq=H5.rotl32,eI=H5.sum32,f2t=H5.sum32_5,d2t=u2t.ft_1,uCe=l2t.BlockHash,h2t=[1518500249,1859775393,2400959708,3395469782];function $0(){if(!(this instanceof $0))return new $0;uCe.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}H5.inherits($0,uCe);var p2t=$0;$0.blockSize=512;$0.outSize=160;$0.hmacStrength=80;$0.padLength=64;$0.prototype._update=function(e,n){for(var r=this.W,s=0;s<16;s++)r[s]=e[n+s];for(;s<r.length;s++)r[s]=kq(r[s-3]^r[s-8]^r[s-14]^r[s-16],1);var i=this.h[0],a=this.h[1],o=this.h[2],c=this.h[3],l=this.h[4];for(s=0;s<r.length;s++){var u=~~(s/20),f=f2t(kq(i,5),d2t(u,a,o,c),l,r[s],h2t[u]);l=c,c=o,o=kq(a,30),a=i,i=f}this.h[0]=eI(this.h[0],i),this.h[1]=eI(this.h[1],a),this.h[2]=eI(this.h[2],o),this.h[3]=eI(this.h[3],c),this.h[4]=eI(this.h[4],l)};$0.prototype._digest=function(e){return e==="hex"?H5.toHex32(this.h,"big"):H5.split32(this.h,"big")};var q5=Mr,g2t=P4,R4=Y0,m2t=Z2,ld=q5.sum32,y2t=q5.sum32_4,w2t=q5.sum32_5,b2t=R4.ch32,v2t=R4.maj32,x2t=R4.s0_256,E2t=R4.s1_256,A2t=R4.g0_256,S2t=R4.g1_256,fCe=g2t.BlockHash,I2t=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function j0(){if(!(this instanceof j0))return new j0;fCe.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=I2t,this.W=new Array(64)}q5.inherits(j0,fCe);var dCe=j0;j0.blockSize=512;j0.outSize=256;j0.hmacStrength=192;j0.padLength=64;j0.prototype._update=function(e,n){for(var r=this.W,s=0;s<16;s++)r[s]=e[n+s];for(;s<r.length;s++)r[s]=y2t(S2t(r[s-2]),r[s-7],A2t(r[s-15]),r[s-16]);var i=this.h[0],a=this.h[1],o=this.h[2],c=this.h[3],l=this.h[4],u=this.h[5],f=this.h[6],d=this.h[7];for(m2t(this.k.length===r.length),s=0;s<r.length;s++){var p=w2t(d,E2t(l),b2t(l,u,f),this.k[s],r[s]),g=ld(x2t(i),v2t(i,a,o));d=f,f=u,u=l,l=ld(c,p),c=o,o=a,a=i,i=ld(p,g)}this.h[0]=ld(this.h[0],i),this.h[1]=ld(this.h[1],a),this.h[2]=ld(this.h[2],o),this.h[3]=ld(this.h[3],c),this.h[4]=ld(this.h[4],l),this.h[5]=ld(this.h[5],u),this.h[6]=ld(this.h[6],f),this.h[7]=ld(this.h[7],d)};j0.prototype._digest=function(e){return e==="hex"?q5.toHex32(this.h,"big"):q5.split32(this.h,"big")};var tY=Mr,hCe=dCe;function Qg(){if(!(this instanceof Qg))return new Qg;hCe.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}tY.inherits(Qg,hCe);var C2t=Qg;Qg.blockSize=512;Qg.outSize=224;Qg.hmacStrength=192;Qg.padLength=64;Qg.prototype._digest=function(e){return e==="hex"?tY.toHex32(this.h.slice(0,7),"big"):tY.split32(this.h.slice(0,7),"big")};var kl=Mr,T2t=P4,N2t=Z2,C0=kl.rotr64_hi,T0=kl.rotr64_lo,pCe=kl.shr64_hi,gCe=kl.shr64_lo,Gm=kl.sum64,Pq=kl.sum64_hi,Oq=kl.sum64_lo,k2t=kl.sum64_4_hi,P2t=kl.sum64_4_lo,O2t=kl.sum64_5_hi,R2t=kl.sum64_5_lo,mCe=T2t.BlockHash,_2t=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function fh(){if(!(this instanceof fh))return new fh;mCe.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=_2t,this.W=new Array(160)}kl.inherits(fh,mCe);var yCe=fh;fh.blockSize=1024;fh.outSize=512;fh.hmacStrength=192;fh.padLength=128;fh.prototype._prepareBlock=function(e,n){for(var r=this.W,s=0;s<32;s++)r[s]=e[n+s];for(;s<r.length;s+=2){var i=q2t(r[s-4],r[s-3]),a=K2t(r[s-4],r[s-3]),o=r[s-14],c=r[s-13],l=j2t(r[s-30],r[s-29]),u=H2t(r[s-30],r[s-29]),f=r[s-32],d=r[s-31];r[s]=k2t(i,a,o,c,l,u,f,d),r[s+1]=P2t(i,a,o,c,l,u,f,d)}};fh.prototype._update=function(e,n){this._prepareBlock(e,n);var r=this.W,s=this.h[0],i=this.h[1],a=this.h[2],o=this.h[3],c=this.h[4],l=this.h[5],u=this.h[6],f=this.h[7],d=this.h[8],p=this.h[9],g=this.h[10],m=this.h[11],v=this.h[12],A=this.h[13],S=this.h[14],I=this.h[15];N2t(this.k.length===r.length);for(var B=0;B<r.length;B+=2){var D=S,V=I,O=V2t(d,p),U=$2t(d,p),Q=B2t(d,p,g,m,v),ie=M2t(d,p,g,m,v,A),G=this.k[B],R=this.k[B+1],k=r[B],b=r[B+1],w=O2t(D,V,O,U,Q,ie,G,R,k,b),N=R2t(D,V,O,U,Q,ie,G,R,k,b);D=U2t(s,i),V=F2t(s,i),O=D2t(s,i,a,o,c),U=L2t(s,i,a,o,c,l);var L=Pq(D,V,O,U),C=Oq(D,V,O,U);S=v,I=A,v=g,A=m,g=d,m=p,d=Pq(u,f,w,N),p=Oq(f,f,w,N),u=c,f=l,c=a,l=o,a=s,o=i,s=Pq(w,N,L,C),i=Oq(w,N,L,C)}Gm(this.h,0,s,i),Gm(this.h,2,a,o),Gm(this.h,4,c,l),Gm(this.h,6,u,f),Gm(this.h,8,d,p),Gm(this.h,10,g,m),Gm(this.h,12,v,A),Gm(this.h,14,S,I)};fh.prototype._digest=function(e){return e==="hex"?kl.toHex32(this.h,"big"):kl.split32(this.h,"big")};function B2t(t,e,n,r,s){var i=t&n^~t&s;return i<0&&(i+=4294967296),i}function M2t(t,e,n,r,s,i){var a=e&r^~e&i;return a<0&&(a+=4294967296),a}function D2t(t,e,n,r,s){var i=t&n^t&s^n&s;return i<0&&(i+=4294967296),i}function L2t(t,e,n,r,s,i){var a=e&r^e&i^r&i;return a<0&&(a+=4294967296),a}function U2t(t,e){var n=C0(t,e,28),r=C0(e,t,2),s=C0(e,t,7),i=n^r^s;return i<0&&(i+=4294967296),i}function F2t(t,e){var n=T0(t,e,28),r=T0(e,t,2),s=T0(e,t,7),i=n^r^s;return i<0&&(i+=4294967296),i}function V2t(t,e){var n=C0(t,e,14),r=C0(t,e,18),s=C0(e,t,9),i=n^r^s;return i<0&&(i+=4294967296),i}function $2t(t,e){var n=T0(t,e,14),r=T0(t,e,18),s=T0(e,t,9),i=n^r^s;return i<0&&(i+=4294967296),i}function j2t(t,e){var n=C0(t,e,1),r=C0(t,e,8),s=pCe(t,e,7),i=n^r^s;return i<0&&(i+=4294967296),i}function H2t(t,e){var n=T0(t,e,1),r=T0(t,e,8),s=gCe(t,e,7),i=n^r^s;return i<0&&(i+=4294967296),i}function q2t(t,e){var n=C0(t,e,19),r=C0(e,t,29),s=pCe(t,e,6),i=n^r^s;return i<0&&(i+=4294967296),i}function K2t(t,e){var n=T0(t,e,19),r=T0(e,t,29),s=gCe(t,e,6),i=n^r^s;return i<0&&(i+=4294967296),i}var nY=Mr,wCe=yCe;function Zg(){if(!(this instanceof Zg))return new Zg;wCe.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}nY.inherits(Zg,wCe);var G2t=Zg;Zg.blockSize=1024;Zg.outSize=384;Zg.hmacStrength=192;Zg.padLength=128;Zg.prototype._digest=function(e){return e==="hex"?nY.toHex32(this.h.slice(0,12),"big"):nY.split32(this.h.slice(0,12),"big")};O4.sha1=p2t;O4.sha224=C2t;O4.sha256=dCe;O4.sha384=G2t;O4.sha512=yCe;var bCe={},_2=Mr,W2t=P4,iR=_2.rotl32,Rde=_2.sum32,tI=_2.sum32_3,_de=_2.sum32_4,vCe=W2t.BlockHash;function H0(){if(!(this instanceof H0))return new H0;vCe.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}_2.inherits(H0,vCe);bCe.ripemd160=H0;H0.blockSize=512;H0.outSize=160;H0.hmacStrength=192;H0.padLength=64;H0.prototype._update=function(e,n){for(var r=this.h[0],s=this.h[1],i=this.h[2],a=this.h[3],o=this.h[4],c=r,l=s,u=i,f=a,d=o,p=0;p<80;p++){var g=Rde(iR(_de(r,Bde(p,s,i,a),e[Y2t[p]+n],z2t(p)),Z2t[p]),o);r=o,o=a,a=iR(i,10),i=s,s=g,g=Rde(iR(_de(c,Bde(79-p,l,u,f),e[Q2t[p]+n],J2t(p)),X2t[p]),d),c=d,d=f,f=iR(u,10),u=l,l=g}g=tI(this.h[1],i,f),this.h[1]=tI(this.h[2],a,d),this.h[2]=tI(this.h[3],o,c),this.h[3]=tI(this.h[4],r,l),this.h[4]=tI(this.h[0],s,u),this.h[0]=g};H0.prototype._digest=function(e){return e==="hex"?_2.toHex32(this.h,"little"):_2.split32(this.h,"little")};function Bde(t,e,n,r){return t<=15?e^n^r:t<=31?e&n|~e&r:t<=47?(e|~n)^r:t<=63?e&r|n&~r:e^(n|~r)}function z2t(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function J2t(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var Y2t=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Q2t=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Z2t=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],X2t=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],eEt=Mr,tEt=Z2;function K5(t,e,n){if(!(this instanceof K5))return new K5(t,e,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(eEt.toArray(e,n))}var nEt=K5;K5.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),tEt(e.length<=this.blockSize);for(var n=e.length;n<this.blockSize;n++)e.push(0);for(n=0;n<e.length;n++)e[n]^=54;for(this.inner=new this.Hash().update(e),n=0;n<e.length;n++)e[n]^=106;this.outer=new this.Hash().update(e)};K5.prototype.update=function(e,n){return this.inner.update(e,n),this};K5.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=Mr,e.common=P4,e.sha=O4,e.ripemd=bCe,e.hmac=nEt,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(u9);const jp=em(u9);function _4(t,e,n){return n={path:e,exports:{},require:function(r,s){return rEt(r,s??n.path)}},t(n,n.exports),n.exports}function rEt(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Xte=xCe;function xCe(t,e){if(!t)throw new Error(e||"Assertion failed")}xCe.equal=function(e,n,r){if(e!=n)throw new Error(r||"Assertion failed: "+e+" != "+n)};var Gd=_4(function(t,e){var n=e;function r(a,o){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if(typeof a!="string"){for(var l=0;l<a.length;l++)c[l]=a[l]|0;return c}if(o==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var l=0;l<a.length;l+=2)c.push(parseInt(a[l]+a[l+1],16))}else for(var l=0;l<a.length;l++){var u=a.charCodeAt(l),f=u>>8,d=u&255;f?c.push(f,d):c.push(d)}return c}n.toArray=r;function s(a){return a.length===1?"0"+a:a}n.zero2=s;function i(a){for(var o="",c=0;c<a.length;c++)o+=s(a[c].toString(16));return o}n.toHex=i,n.encode=function(o,c){return c==="hex"?i(o):o}}),Mu=_4(function(t,e){var n=e;n.assert=Xte,n.toArray=Gd.toArray,n.zero2=Gd.zero2,n.toHex=Gd.toHex,n.encode=Gd.encode;function r(c,l,u){var f=new Array(Math.max(c.bitLength(),u)+1),d;for(d=0;d<f.length;d+=1)f[d]=0;var p=1<<l+1,g=c.clone();for(d=0;d<f.length;d++){var m,v=g.andln(p-1);g.isOdd()?(v>(p>>1)-1?m=(p>>1)-v:m=v,g.isubn(m)):m=0,f[d]=m,g.iushrn(1)}return f}n.getNAF=r;function s(c,l){var u=[[],[]];c=c.clone(),l=l.clone();for(var f=0,d=0,p;c.cmpn(-f)>0||l.cmpn(-d)>0;){var g=c.andln(3)+f&3,m=l.andln(3)+d&3;g===3&&(g=-1),m===3&&(m=-1);var v;g&1?(p=c.andln(7)+f&7,(p===3||p===5)&&m===2?v=-g:v=g):v=0,u[0].push(v);var A;m&1?(p=l.andln(7)+d&7,(p===3||p===5)&&g===2?A=-m:A=m):A=0,u[1].push(A),2*f===v+1&&(f=1-f),2*d===A+1&&(d=1-d),c.iushrn(1),l.iushrn(1)}return u}n.getJSF=s;function i(c,l,u){var f="_"+l;c.prototype[l]=function(){return this[f]!==void 0?this[f]:this[f]=u.call(this)}}n.cachedProperty=i;function a(c){return typeof c=="string"?n.toArray(c,"hex"):c}n.parseBytes=a;function o(c){return new Vn(c,"hex","le")}n.intFromLE=o}),cD=Mu.getNAF,sEt=Mu.getJSF,lD=Mu.assert;function Ub(t,e){this.type=t,this.p=new Vn(e.p,16),this.red=e.prime?Vn.red(e.prime):Vn.mont(this.p),this.zero=new Vn(0).toRed(this.red),this.one=new Vn(1).toRed(this.red),this.two=new Vn(2).toRed(this.red),this.n=e.n&&new Vn(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var X2=Ub;Ub.prototype.point=function(){throw new Error("Not implemented")};Ub.prototype.validate=function(){throw new Error("Not implemented")};Ub.prototype._fixedNafMul=function(e,n){lD(e.precomputed);var r=e._getDoubles(),s=cD(n,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var a=[],o,c;for(o=0;o<s.length;o+=r.step){c=0;for(var l=o+r.step-1;l>=o;l--)c=(c<<1)+s[l];a.push(c)}for(var u=this.jpoint(null,null,null),f=this.jpoint(null,null,null),d=i;d>0;d--){for(o=0;o<a.length;o++)c=a[o],c===d?f=f.mixedAdd(r.points[o]):c===-d&&(f=f.mixedAdd(r.points[o].neg()));u=u.add(f)}return u.toP()};Ub.prototype._wnafMul=function(e,n){var r=4,s=e._getNAFPoints(r);r=s.wnd;for(var i=s.points,a=cD(n,r,this._bitLength),o=this.jpoint(null,null,null),c=a.length-1;c>=0;c--){for(var l=0;c>=0&&a[c]===0;c--)l++;if(c>=0&&l++,o=o.dblp(l),c<0)break;var u=a[c];lD(u!==0),e.type==="affine"?u>0?o=o.mixedAdd(i[u-1>>1]):o=o.mixedAdd(i[-u-1>>1].neg()):u>0?o=o.add(i[u-1>>1]):o=o.add(i[-u-1>>1].neg())}return e.type==="affine"?o.toP():o};Ub.prototype._wnafMulAdd=function(e,n,r,s,i){var a=this._wnafT1,o=this._wnafT2,c=this._wnafT3,l=0,u,f,d;for(u=0;u<s;u++){d=n[u];var p=d._getNAFPoints(e);a[u]=p.wnd,o[u]=p.points}for(u=s-1;u>=1;u-=2){var g=u-1,m=u;if(a[g]!==1||a[m]!==1){c[g]=cD(r[g],a[g],this._bitLength),c[m]=cD(r[m],a[m],this._bitLength),l=Math.max(c[g].length,l),l=Math.max(c[m].length,l);continue}var v=[n[g],null,null,n[m]];n[g].y.cmp(n[m].y)===0?(v[1]=n[g].add(n[m]),v[2]=n[g].toJ().mixedAdd(n[m].neg())):n[g].y.cmp(n[m].y.redNeg())===0?(v[1]=n[g].toJ().mixedAdd(n[m]),v[2]=n[g].add(n[m].neg())):(v[1]=n[g].toJ().mixedAdd(n[m]),v[2]=n[g].toJ().mixedAdd(n[m].neg()));var A=[-3,-1,-5,-7,0,7,5,1,3],S=sEt(r[g],r[m]);for(l=Math.max(S[0].length,l),c[g]=new Array(l),c[m]=new Array(l),f=0;f<l;f++){var I=S[0][f]|0,B=S[1][f]|0;c[g][f]=A[(I+1)*3+(B+1)],c[m][f]=0,o[g]=v}}var D=this.jpoint(null,null,null),V=this._wnafT4;for(u=l;u>=0;u--){for(var O=0;u>=0;){var U=!0;for(f=0;f<s;f++)V[f]=c[f][u]|0,V[f]!==0&&(U=!1);if(!U)break;O++,u--}if(u>=0&&O++,D=D.dblp(O),u<0)break;for(f=0;f<s;f++){var Q=V[f];Q!==0&&(Q>0?d=o[f][Q-1>>1]:Q<0&&(d=o[f][-Q-1>>1].neg()),d.type==="affine"?D=D.mixedAdd(d):D=D.add(d))}}for(u=0;u<s;u++)o[u]=null;return i?D:D.toP()};function Gf(t,e){this.curve=t,this.type=e,this.precomputed=null}Ub.BasePoint=Gf;Gf.prototype.eq=function(){throw new Error("Not implemented")};Gf.prototype.validate=function(){return this.curve.validate(this)};Ub.prototype.decodePoint=function(e,n){e=Mu.toArray(e,n);var r=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*r){e[0]===6?lD(e[e.length-1]%2===0):e[0]===7&&lD(e[e.length-1]%2===1);var s=this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));return s}else if((e[0]===2||e[0]===3)&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),e[0]===3);throw new Error("Unknown point format")};Gf.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Gf.prototype._encode=function(e){var n=this.curve.p.byteLength(),r=this.getX().toArray("be",n);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",n))};Gf.prototype.encode=function(e,n){return Mu.encode(this._encode(n),e)};Gf.prototype.precompute=function(e){if(this.precomputed)return this;var n={doubles:null,naf:null,beta:null};return n.naf=this._getNAFPoints(8),n.doubles=this._getDoubles(4,e),n.beta=this._getBeta(),this.precomputed=n,this};Gf.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var n=this.precomputed.doubles;return n?n.points.length>=Math.ceil((e.bitLength()+1)/n.step):!1};Gf.prototype._getDoubles=function(e,n){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],s=this,i=0;i<n;i+=e){for(var a=0;a<e;a++)s=s.dbl();r.push(s)}return{step:e,points:r}};Gf.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var n=[this],r=(1<<e)-1,s=r===1?null:this.dbl(),i=1;i<r;i++)n[i]=n[i-1].add(s);return{wnd:e,points:n}};Gf.prototype._getBeta=function(){return null};Gf.prototype.dblp=function(e){for(var n=this,r=0;r<e;r++)n=n.dbl();return n};var ene=_4(function(t){typeof Object.create=="function"?t.exports=function(n,r){r&&(n.super_=r,n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(n,r){if(r){n.super_=r;var s=function(){};s.prototype=r.prototype,n.prototype=new s,n.prototype.constructor=n}}}),iEt=Mu.assert;function Wf(t){X2.call(this,"short",t),this.a=new Vn(t.a,16).toRed(this.red),this.b=new Vn(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}ene(Wf,X2);var aEt=Wf;Wf.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var n,r;if(e.beta)n=new Vn(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);n=s[0].cmp(s[1])<0?s[0]:s[1],n=n.toRed(this.red)}if(e.lambda)r=new Vn(e.lambda,16);else{var i=this._getEndoRoots(this.n);this.g.mul(i[0]).x.cmp(this.g.x.redMul(n))===0?r=i[0]:(r=i[1],iEt(this.g.mul(r).x.cmp(this.g.x.redMul(n))===0))}var a;return e.basis?a=e.basis.map(function(o){return{a:new Vn(o.a,16),b:new Vn(o.b,16)}}):a=this._getEndoBasis(r),{beta:n,lambda:r,basis:a}}};Wf.prototype._getEndoRoots=function(e){var n=e===this.p?this.red:Vn.mont(e),r=new Vn(2).toRed(n).redInvm(),s=r.redNeg(),i=new Vn(3).toRed(n).redNeg().redSqrt().redMul(r),a=s.redAdd(i).fromRed(),o=s.redSub(i).fromRed();return[a,o]};Wf.prototype._getEndoBasis=function(e){for(var n=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=e,s=this.n.clone(),i=new Vn(1),a=new Vn(0),o=new Vn(0),c=new Vn(1),l,u,f,d,p,g,m,v=0,A,S;r.cmpn(0)!==0;){var I=s.div(r);A=s.sub(I.mul(r)),S=o.sub(I.mul(i));var B=c.sub(I.mul(a));if(!f&&A.cmp(n)<0)l=m.neg(),u=i,f=A.neg(),d=S;else if(f&&++v===2)break;m=A,s=r,r=A,o=i,i=S,c=a,a=B}p=A.neg(),g=S;var D=f.sqr().add(d.sqr()),V=p.sqr().add(g.sqr());return V.cmp(D)>=0&&(p=l,g=u),f.negative&&(f=f.neg(),d=d.neg()),p.negative&&(p=p.neg(),g=g.neg()),[{a:f,b:d},{a:p,b:g}]};Wf.prototype._endoSplit=function(e){var n=this.endo.basis,r=n[0],s=n[1],i=s.b.mul(e).divRound(this.n),a=r.b.neg().mul(e).divRound(this.n),o=i.mul(r.a),c=a.mul(s.a),l=i.mul(r.b),u=a.mul(s.b),f=e.sub(o).sub(c),d=l.add(u).neg();return{k1:f,k2:d}};Wf.prototype.pointFromX=function(e,n){e=new Vn(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=r.redSqrt();if(s.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var i=s.fromRed().isOdd();return(n&&!i||!n&&i)&&(s=s.redNeg()),this.point(e,s)};Wf.prototype.validate=function(e){if(e.inf)return!0;var n=e.x,r=e.y,s=this.a.redMul(n),i=n.redSqr().redMul(n).redIAdd(s).redIAdd(this.b);return r.redSqr().redISub(i).cmpn(0)===0};Wf.prototype._endoWnafMulAdd=function(e,n,r){for(var s=this._endoWnafT1,i=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(n[a]),c=e[a],l=c._getBeta();o.k1.negative&&(o.k1.ineg(),c=c.neg(!0)),o.k2.negative&&(o.k2.ineg(),l=l.neg(!0)),s[a*2]=c,s[a*2+1]=l,i[a*2]=o.k1,i[a*2+1]=o.k2}for(var u=this._wnafMulAdd(1,s,i,a*2,r),f=0;f<a*2;f++)s[f]=null,i[f]=null;return u};function Xa(t,e,n,r){X2.BasePoint.call(this,t,"affine"),e===null&&n===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Vn(e,16),this.y=new Vn(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}ene(Xa,X2.BasePoint);Wf.prototype.point=function(e,n,r){return new Xa(this,e,n,r)};Wf.prototype.pointFromJSON=function(e,n){return Xa.fromJSON(this,e,n)};Xa.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,s=function(i){return r.point(i.x.redMul(r.endo.beta),i.y)};e.beta=n,n.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return n}};Xa.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Xa.fromJSON=function(e,n,r){typeof n=="string"&&(n=JSON.parse(n));var s=e.point(n[0],n[1],r);if(!n[2])return s;function i(o){return e.point(o[0],o[1],r)}var a=n[2];return s.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[s].concat(a.doubles.points.map(i))},naf:a.naf&&{wnd:a.naf.wnd,points:[s].concat(a.naf.points.map(i))}},s};Xa.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Xa.prototype.isInfinity=function(){return this.inf};Xa.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var n=this.y.redSub(e.y);n.cmpn(0)!==0&&(n=n.redMul(this.x.redSub(e.x).redInvm()));var r=n.redSqr().redISub(this.x).redISub(e.x),s=n.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,s)};Xa.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var n=this.curve.a,r=this.x.redSqr(),s=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(n).redMul(s),a=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Xa.prototype.getX=function(){return this.x.fromRed()};Xa.prototype.getY=function(){return this.y.fromRed()};Xa.prototype.mul=function(e){return e=new Vn(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Xa.prototype.mulAdd=function(e,n,r){var s=[this,n],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(s,i):this.curve._wnafMulAdd(1,s,i,2)};Xa.prototype.jmulAdd=function(e,n,r){var s=[this,n],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(s,i,!0):this.curve._wnafMulAdd(1,s,i,2,!0)};Xa.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Xa.prototype.neg=function(e){if(this.inf)return this;var n=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,s=function(i){return i.neg()};n.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(s)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(s)}}}return n};Xa.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function No(t,e,n,r){X2.BasePoint.call(this,t,"jacobian"),e===null&&n===null&&r===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Vn(0)):(this.x=new Vn(e,16),this.y=new Vn(n,16),this.z=new Vn(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ene(No,X2.BasePoint);Wf.prototype.jpoint=function(e,n,r){return new No(this,e,n,r)};No.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),n=e.redSqr(),r=this.x.redMul(n),s=this.y.redMul(n).redMul(e);return this.curve.point(r,s)};No.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};No.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var n=e.z.redSqr(),r=this.z.redSqr(),s=this.x.redMul(n),i=e.x.redMul(r),a=this.y.redMul(n.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),c=s.redSub(i),l=a.redSub(o);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),f=u.redMul(c),d=s.redMul(u),p=l.redSqr().redIAdd(f).redISub(d).redISub(d),g=l.redMul(d.redISub(p)).redISub(a.redMul(f)),m=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(p,g,m)};No.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var n=this.z.redSqr(),r=this.x,s=e.x.redMul(n),i=this.y,a=e.y.redMul(n).redMul(this.z),o=r.redSub(s),c=i.redSub(a);if(o.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=o.redSqr(),u=l.redMul(o),f=r.redMul(l),d=c.redSqr().redIAdd(u).redISub(f).redISub(f),p=c.redMul(f.redISub(d)).redISub(i.redMul(u)),g=this.z.redMul(o);return this.curve.jpoint(d,p,g)};No.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var n;if(this.curve.zeroA||this.curve.threeA){var r=this;for(n=0;n<e;n++)r=r.dbl();return r}var s=this.curve.a,i=this.curve.tinv,a=this.x,o=this.y,c=this.z,l=c.redSqr().redSqr(),u=o.redAdd(o);for(n=0;n<e;n++){var f=a.redSqr(),d=u.redSqr(),p=d.redSqr(),g=f.redAdd(f).redIAdd(f).redIAdd(s.redMul(l)),m=a.redMul(d),v=g.redSqr().redISub(m.redAdd(m)),A=m.redISub(v),S=g.redMul(A);S=S.redIAdd(S).redISub(p);var I=u.redMul(c);n+1<e&&(l=l.redMul(p)),a=v,c=I,u=S}return this.curve.jpoint(a,u.redMul(i),c)};No.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};No.prototype._zeroDbl=function(){var e,n,r;if(this.zOne){var s=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(s).redISub(a);o=o.redIAdd(o);var c=s.redAdd(s).redIAdd(s),l=c.redSqr().redISub(o).redISub(o),u=a.redIAdd(a);u=u.redIAdd(u),u=u.redIAdd(u),e=l,n=c.redMul(o.redISub(l)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),d=this.y.redSqr(),p=d.redSqr(),g=this.x.redAdd(d).redSqr().redISub(f).redISub(p);g=g.redIAdd(g);var m=f.redAdd(f).redIAdd(f),v=m.redSqr(),A=p.redIAdd(p);A=A.redIAdd(A),A=A.redIAdd(A),e=v.redISub(g).redISub(g),n=m.redMul(g.redISub(e)).redISub(A),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,n,r)};No.prototype._threeDbl=function(){var e,n,r;if(this.zOne){var s=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(s).redISub(a);o=o.redIAdd(o);var c=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),l=c.redSqr().redISub(o).redISub(o);e=l;var u=a.redIAdd(a);u=u.redIAdd(u),u=u.redIAdd(u),n=c.redMul(o.redISub(l)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),d=this.y.redSqr(),p=this.x.redMul(d),g=this.x.redSub(f).redMul(this.x.redAdd(f));g=g.redAdd(g).redIAdd(g);var m=p.redIAdd(p);m=m.redIAdd(m);var v=m.redAdd(m);e=g.redSqr().redISub(v),r=this.y.redAdd(this.z).redSqr().redISub(d).redISub(f);var A=d.redSqr();A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A),n=g.redMul(m.redISub(e)).redISub(A)}return this.curve.jpoint(e,n,r)};No.prototype._dbl=function(){var e=this.curve.a,n=this.x,r=this.y,s=this.z,i=s.redSqr().redSqr(),a=n.redSqr(),o=r.redSqr(),c=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(i)),l=n.redAdd(n);l=l.redIAdd(l);var u=l.redMul(o),f=c.redSqr().redISub(u.redAdd(u)),d=u.redISub(f),p=o.redSqr();p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var g=c.redMul(d).redISub(p),m=r.redAdd(r).redMul(s);return this.curve.jpoint(f,g,m)};No.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),n=this.y.redSqr(),r=this.z.redSqr(),s=n.redSqr(),i=e.redAdd(e).redIAdd(e),a=i.redSqr(),o=this.x.redAdd(n).redSqr().redISub(e).redISub(s);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(a);var c=o.redSqr(),l=s.redIAdd(s);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var u=i.redIAdd(o).redSqr().redISub(a).redISub(c).redISub(l),f=n.redMul(u);f=f.redIAdd(f),f=f.redIAdd(f);var d=this.x.redMul(c).redISub(f);d=d.redIAdd(d),d=d.redIAdd(d);var p=this.y.redMul(u.redMul(l.redISub(u)).redISub(o.redMul(c)));p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var g=this.z.redAdd(o).redSqr().redISub(r).redISub(c);return this.curve.jpoint(d,p,g)};No.prototype.mul=function(e,n){return e=new Vn(e,n),this.curve._wnafMul(this,e)};No.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var n=this.z.redSqr(),r=e.z.redSqr();if(this.x.redMul(r).redISub(e.x.redMul(n)).cmpn(0)!==0)return!1;var s=n.redMul(this.z),i=r.redMul(e.z);return this.y.redMul(i).redISub(e.y.redMul(s)).cmpn(0)===0};No.prototype.eqXToP=function(e){var n=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(n);if(this.x.cmp(r)===0)return!0;for(var s=e.clone(),i=this.curve.redN.redMul(n);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};No.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};No.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var z_=_4(function(t,e){var n=e;n.base=X2,n.short=aEt,n.mont=null,n.edwards=null}),J_=_4(function(t,e){var n=e,r=Mu.assert;function s(o){o.type==="short"?this.curve=new z_.short(o):o.type==="edwards"?this.curve=new z_.edwards(o):this.curve=new z_.mont(o),this.g=this.curve.g,this.n=this.curve.n,this.hash=o.hash,r(this.g.validate(),"Invalid curve"),r(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}n.PresetCurve=s;function i(o,c){Object.defineProperty(n,o,{configurable:!0,enumerable:!0,get:function(){var l=new s(c);return Object.defineProperty(n,o,{configurable:!0,enumerable:!0,value:l}),l}})}i("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:jp.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),i("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:jp.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),i("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:jp.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),i("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:jp.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),i("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:jp.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),i("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:jp.sha256,gRed:!1,g:["9"]}),i("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:jp.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch{a=void 0}i("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:jp.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})});function bb(t){if(!(this instanceof bb))return new bb(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Gd.toArray(t.entropy,t.entropyEnc||"hex"),n=Gd.toArray(t.nonce,t.nonceEnc||"hex"),r=Gd.toArray(t.pers,t.persEnc||"hex");Xte(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,r)}var ECe=bb;bb.prototype._init=function(e,n,r){var s=e.concat(n).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656};bb.prototype._hmac=function(){return new jp.hmac(this.hash,this.K)};bb.prototype._update=function(e){var n=this._hmac().update(this.V).update([0]);e&&(n=n.update(e)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};bb.prototype.reseed=function(e,n,r,s){typeof n!="string"&&(s=r,r=n,n=null),e=Gd.toArray(e,n),r=Gd.toArray(r,s),Xte(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1};bb.prototype.generate=function(e,n,r,s){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof n!="string"&&(s=r,r=n,n=null),r&&(r=Gd.toArray(r,s||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var a=i.slice(0,e);return this._update(r),this._reseed++,Gd.encode(a,n)};var rY=Mu.assert;function oc(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var tne=oc;oc.fromPublic=function(e,n,r){return n instanceof oc?n:new oc(e,{pub:n,pubEnc:r})};oc.fromPrivate=function(e,n,r){return n instanceof oc?n:new oc(e,{priv:n,privEnc:r})};oc.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};oc.prototype.getPublic=function(e,n){return typeof e=="string"&&(n=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,e):this.pub};oc.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};oc.prototype._importPrivate=function(e,n){this.priv=new Vn(e,n||16),this.priv=this.priv.umod(this.ec.curve.n)};oc.prototype._importPublic=function(e,n){if(e.x||e.y){this.ec.curve.type==="mont"?rY(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&rY(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,n)};oc.prototype.derive=function(e){return e.validate()||rY(e.validate(),"public point not validated"),e.mul(this.priv).getX()};oc.prototype.sign=function(e,n,r){return this.ec.sign(e,this,n,r)};oc.prototype.verify=function(e,n,r){return this.ec.verify(e,n,this,void 0,r)};oc.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var oEt=Mu.assert;function mF(t,e){if(t instanceof mF)return t;this._importDER(t,e)||(oEt(t.r&&t.s,"Signature without r or s"),this.r=new Vn(t.r,16),this.s=new Vn(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var yF=mF;function cEt(){this.place=0}function Rq(t,e){var n=t[e.place++];if(!(n&128))return n;var r=n&15;if(r===0||r>4||t[e.place]===0)return!1;for(var s=0,i=0,a=e.place;i<r;i++,a++)s<<=8,s|=t[a],s>>>=0;return s<=127?!1:(e.place=a,s)}function Mde(t){for(var e=0,n=t.length-1;!t[e]&&!(t[e+1]&128)&&e<n;)e++;return e===0?t:t.slice(e)}mF.prototype._importDER=function(e,n){e=Mu.toArray(e,n);var r=new cEt;if(e[r.place++]!==48)return!1;var s=Rq(e,r);if(s===!1||s+r.place!==e.length||e[r.place++]!==2)return!1;var i=Rq(e,r);if(i===!1||e[r.place]&128)return!1;var a=e.slice(r.place,i+r.place);if(r.place+=i,e[r.place++]!==2)return!1;var o=Rq(e,r);if(o===!1||e.length!==o+r.place||e[r.place]&128)return!1;var c=e.slice(r.place,o+r.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Vn(a),this.s=new Vn(c),this.recoveryParam=null,!0};function _q(t,e){if(e<128){t.push(e);return}var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(n|128);--n;)t.push(e>>>(n<<3)&255);t.push(e)}mF.prototype.toDER=function(e){var n=this.r.toArray(),r=this.s.toArray();for(n[0]&128&&(n=[0].concat(n)),r[0]&128&&(r=[0].concat(r)),n=Mde(n),r=Mde(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var s=[2];_q(s,n.length),s=s.concat(n),s.push(2),_q(s,r.length);var i=s.concat(r),a=[48];return _q(a,i.length),a=a.concat(i),Mu.encode(a,e)};var lEt=function(){throw new Error("unsupported")},Lv=Mu.assert;function jf(t){if(!(this instanceof jf))return new jf(t);typeof t=="string"&&(Lv(Object.prototype.hasOwnProperty.call(J_,t),"Unknown curve "+t),t=J_[t]),t instanceof J_.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var uEt=jf;jf.prototype.keyPair=function(e){return new tne(this,e)};jf.prototype.keyFromPrivate=function(e,n){return tne.fromPrivate(this,e,n)};jf.prototype.keyFromPublic=function(e,n){return tne.fromPublic(this,e,n)};jf.prototype.genKeyPair=function(e){e||(e={});for(var n=new ECe({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||lEt(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),s=this.n.sub(new Vn(2));;){var i=new Vn(n.generate(r));if(!(i.cmp(s)>0))return i.iaddn(1),this.keyFromPrivate(i)}};jf.prototype._truncateToN=function(e,n,r){var s;if(Vn.isBN(e)||typeof e=="number")e=new Vn(e,16),s=e.byteLength();else if(typeof e=="object")s=e.length,e=new Vn(e,16);else{var i=e.toString();s=i.length+1>>>1,e=new Vn(i,16)}typeof r!="number"&&(r=s*8);var a=r-this.n.bitLength();return a>0&&(e=e.ushrn(a)),!n&&e.cmp(this.n)>=0?e.sub(this.n):e};jf.prototype.sign=function(e,n,r,s){if(typeof r=="object"&&(s=r,r=null),s||(s={}),typeof e!="string"&&typeof e!="number"&&!Vn.isBN(e)){Lv(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),Lv(e.length>>>0===e.length);for(var i=0;i<e.length;i++)Lv((e[i]&255)===e[i])}n=this.keyFromPrivate(n,r),e=this._truncateToN(e,!1,s.msgBitLength),Lv(!e.isNeg(),"Can not sign a negative message");var a=this.n.byteLength(),o=n.getPrivate().toArray("be",a),c=e.toArray("be",a);Lv(new Vn(c).eq(e),"Can not sign message");for(var l=new ECe({hash:this.hash,entropy:o,nonce:c,pers:s.pers,persEnc:s.persEnc||"utf8"}),u=this.n.sub(new Vn(1)),f=0;;f++){var d=s.k?s.k(f):new Vn(l.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(u)>=0)){var p=this.g.mul(d);if(!p.isInfinity()){var g=p.getX(),m=g.umod(this.n);if(m.cmpn(0)!==0){var v=d.invm(this.n).mul(m.mul(n.getPrivate()).iadd(e));if(v=v.umod(this.n),v.cmpn(0)!==0){var A=(p.getY().isOdd()?1:0)|(g.cmp(m)!==0?2:0);return s.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),A^=1),new yF({r:m,s:v,recoveryParam:A})}}}}}};jf.prototype.verify=function(e,n,r,s,i){i||(i={}),e=this._truncateToN(e,!1,i.msgBitLength),r=this.keyFromPublic(r,s),n=new yF(n,"hex");var a=n.r,o=n.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var c=o.invm(this.n),l=c.mul(e).umod(this.n),u=c.mul(a).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(l,r.getPublic(),u),f.isInfinity()?!1:f.eqXToP(a)):(f=this.g.mulAdd(l,r.getPublic(),u),f.isInfinity()?!1:f.getX().umod(this.n).cmp(a)===0)};jf.prototype.recoverPubKey=function(t,e,n,r){Lv((3&n)===n,"The recovery param is more than two bits"),e=new yF(e,r);var s=this.n,i=new Vn(t),a=e.r,o=e.s,c=n&1,l=n>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?a=this.curve.pointFromX(a.add(this.curve.n),c):a=this.curve.pointFromX(a,c);var u=e.r.invm(s),f=s.sub(i).mul(u).umod(s),d=o.mul(u).umod(s);return this.g.mulAdd(f,a,d)};jf.prototype.getKeyRecoveryParam=function(t,e,n,r){if(e=new yF(e,r),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var i;try{i=this.recoverPubKey(t,e,s)}catch{continue}if(i.eq(n))return s}throw new Error("Unable to find valid recovery factor")};var fEt=_4(function(t,e){var n=e;n.version="6.6.1",n.utils=Mu,n.rand=function(){throw new Error("unsupported")},n.curve=z_,n.curves=J_,n.ec=uEt,n.eddsa=null}),dEt=fEt.ec;const hEt="signing-key/5.8.0",sY=new Hs(hEt);let Bq=null;function jy(){return Bq||(Bq=new dEt("secp256k1")),Bq}class pEt{constructor(e){X8(this,"curve","secp256k1"),X8(this,"privateKey",iu(e)),yxt(this.privateKey)!==32&&sY.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const n=jy().keyFromPrivate(ta(this.privateKey));X8(this,"publicKey","0x"+n.getPublic(!1,"hex")),X8(this,"compressedPublicKey","0x"+n.getPublic(!0,"hex")),X8(this,"_isSigningKey",!0)}_addPoint(e){const n=jy().keyFromPublic(ta(this.publicKey)),r=jy().keyFromPublic(ta(e));return"0x"+n.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const n=jy().keyFromPrivate(ta(this.privateKey)),r=ta(e);r.length!==32&&sY.throwArgumentError("bad digest length","digest",e);const s=n.sign(r,{canonical:!0});return tCe({recoveryParam:s.recoveryParam,r:t6("0x"+s.r.toString(16),32),s:t6("0x"+s.s.toString(16),32)})}computeSharedSecret(e){const n=jy().keyFromPrivate(ta(this.privateKey)),r=jy().keyFromPublic(ta(ACe(e)));return t6("0x"+n.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function gEt(t,e){const n=tCe(e),r={r:ta(n.r),s:ta(n.s)};return"0x"+jy().recoverPubKey(ta(t),r,n.recoveryParam).encode("hex",!1)}function ACe(t,e){const n=ta(t);return n.length===32?new pEt(n).publicKey:n.length===33?"0x"+jy().keyFromPublic(n).getPublic(!1,"hex"):n.length===65?iu(n):sY.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Dde;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(Dde||(Dde={}));function mEt(t){const e=ACe(t);return Pxt(Tde(Yte(Tde(e,1)),12))}function yEt(t,e){return mEt(gEt(ta(t),e))}var nne={},wF={},tr={},SCe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(o,c){var l=o>>>16&65535,u=o&65535,f=c>>>16&65535,d=c&65535;return u*d+(l*d+u*f<<16>>>0)|0}t.mul=Math.imul||e;function n(o,c){return o+c|0}t.add=n;function r(o,c){return o-c|0}t.sub=r;function s(o,c){return o<<c|o>>>32-c}t.rotl=s;function i(o,c){return o<<32-c|o>>>c}t.rotr=i;function a(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o}t.isInteger=Number.isInteger||a,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(o){return t.isInteger(o)&&o>=-t.MAX_SAFE_INTEGER&&o<=t.MAX_SAFE_INTEGER}})(SCe);Object.defineProperty(tr,"__esModule",{value:!0});var ICe=SCe;function wEt(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}tr.readInt16BE=wEt;function bEt(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}tr.readUint16BE=bEt;function vEt(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}tr.readInt16LE=vEt;function xEt(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}tr.readUint16LE=xEt;function CCe(t,e,n){return e===void 0&&(e=new Uint8Array(2)),n===void 0&&(n=0),e[n+0]=t>>>8,e[n+1]=t>>>0,e}tr.writeUint16BE=CCe;tr.writeInt16BE=CCe;function TCe(t,e,n){return e===void 0&&(e=new Uint8Array(2)),n===void 0&&(n=0),e[n+0]=t>>>0,e[n+1]=t>>>8,e}tr.writeUint16LE=TCe;tr.writeInt16LE=TCe;function iY(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}tr.readInt32BE=iY;function aY(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}tr.readUint32BE=aY;function oY(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}tr.readInt32LE=oY;function cY(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}tr.readUint32LE=cY;function uD(t,e,n){return e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0),e[n+0]=t>>>24,e[n+1]=t>>>16,e[n+2]=t>>>8,e[n+3]=t>>>0,e}tr.writeUint32BE=uD;tr.writeInt32BE=uD;function fD(t,e,n){return e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0),e[n+0]=t>>>0,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24,e}tr.writeUint32LE=fD;tr.writeInt32LE=fD;function EEt(t,e){e===void 0&&(e=0);var n=iY(t,e),r=iY(t,e+4);return n*4294967296+r-(r>>31)*4294967296}tr.readInt64BE=EEt;function AEt(t,e){e===void 0&&(e=0);var n=aY(t,e),r=aY(t,e+4);return n*4294967296+r}tr.readUint64BE=AEt;function SEt(t,e){e===void 0&&(e=0);var n=oY(t,e),r=oY(t,e+4);return r*4294967296+n-(n>>31)*4294967296}tr.readInt64LE=SEt;function IEt(t,e){e===void 0&&(e=0);var n=cY(t,e),r=cY(t,e+4);return r*4294967296+n}tr.readUint64LE=IEt;function NCe(t,e,n){return e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0),uD(t/4294967296>>>0,e,n),uD(t>>>0,e,n+4),e}tr.writeUint64BE=NCe;tr.writeInt64BE=NCe;function kCe(t,e,n){return e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0),fD(t>>>0,e,n),fD(t/4294967296>>>0,e,n+4),e}tr.writeUint64LE=kCe;tr.writeInt64LE=kCe;function CEt(t,e,n){if(n===void 0&&(n=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-n)throw new Error("readUintBE: array is too short for the given bitLength");for(var r=0,s=1,i=t/8+n-1;i>=n;i--)r+=e[i]*s,s*=256;return r}tr.readUintBE=CEt;function TEt(t,e,n){if(n===void 0&&(n=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-n)throw new Error("readUintLE: array is too short for the given bitLength");for(var r=0,s=1,i=n;i<n+t/8;i++)r+=e[i]*s,s*=256;return r}tr.readUintLE=TEt;function NEt(t,e,n,r){if(n===void 0&&(n=new Uint8Array(t/8)),r===void 0&&(r=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!ICe.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var s=1,i=t/8+r-1;i>=r;i--)n[i]=e/s&255,s*=256;return n}tr.writeUintBE=NEt;function kEt(t,e,n,r){if(n===void 0&&(n=new Uint8Array(t/8)),r===void 0&&(r=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!ICe.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var s=1,i=r;i<r+t/8;i++)n[i]=e/s&255,s*=256;return n}tr.writeUintLE=kEt;function PEt(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat32(e)}tr.readFloat32BE=PEt;function OEt(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat32(e,!0)}tr.readFloat32LE=OEt;function REt(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat64(e)}tr.readFloat64BE=REt;function _Et(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat64(e,!0)}tr.readFloat64LE=_Et;function BEt(t,e,n){e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setFloat32(n,t),e}tr.writeFloat32BE=BEt;function MEt(t,e,n){e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setFloat32(n,t,!0),e}tr.writeFloat32LE=MEt;function DEt(t,e,n){e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setFloat64(n,t),e}tr.writeFloat64BE=DEt;function LEt(t,e,n){e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setFloat64(n,t,!0),e}tr.writeFloat64LE=LEt;var Du={};Object.defineProperty(Du,"__esModule",{value:!0});function UEt(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Du.wipe=UEt;Object.defineProperty(wF,"__esModule",{value:!0});var Wo=tr,lY=Du,FEt=20;function VEt(t,e,n){for(var r=1634760805,s=857760878,i=2036477234,a=1797285236,o=n[3]<<24|n[2]<<16|n[1]<<8|n[0],c=n[7]<<24|n[6]<<16|n[5]<<8|n[4],l=n[11]<<24|n[10]<<16|n[9]<<8|n[8],u=n[15]<<24|n[14]<<16|n[13]<<8|n[12],f=n[19]<<24|n[18]<<16|n[17]<<8|n[16],d=n[23]<<24|n[22]<<16|n[21]<<8|n[20],p=n[27]<<24|n[26]<<16|n[25]<<8|n[24],g=n[31]<<24|n[30]<<16|n[29]<<8|n[28],m=e[3]<<24|e[2]<<16|e[1]<<8|e[0],v=e[7]<<24|e[6]<<16|e[5]<<8|e[4],A=e[11]<<24|e[10]<<16|e[9]<<8|e[8],S=e[15]<<24|e[14]<<16|e[13]<<8|e[12],I=r,B=s,D=i,V=a,O=o,U=c,Q=l,ie=u,G=f,R=d,k=p,b=g,w=m,N=v,L=A,C=S,T=0;T<FEt;T+=2)I=I+O|0,w^=I,w=w>>>16|w<<16,G=G+w|0,O^=G,O=O>>>20|O<<12,B=B+U|0,N^=B,N=N>>>16|N<<16,R=R+N|0,U^=R,U=U>>>20|U<<12,D=D+Q|0,L^=D,L=L>>>16|L<<16,k=k+L|0,Q^=k,Q=Q>>>20|Q<<12,V=V+ie|0,C^=V,C=C>>>16|C<<16,b=b+C|0,ie^=b,ie=ie>>>20|ie<<12,D=D+Q|0,L^=D,L=L>>>24|L<<8,k=k+L|0,Q^=k,Q=Q>>>25|Q<<7,V=V+ie|0,C^=V,C=C>>>24|C<<8,b=b+C|0,ie^=b,ie=ie>>>25|ie<<7,B=B+U|0,N^=B,N=N>>>24|N<<8,R=R+N|0,U^=R,U=U>>>25|U<<7,I=I+O|0,w^=I,w=w>>>24|w<<8,G=G+w|0,O^=G,O=O>>>25|O<<7,I=I+U|0,C^=I,C=C>>>16|C<<16,k=k+C|0,U^=k,U=U>>>20|U<<12,B=B+Q|0,w^=B,w=w>>>16|w<<16,b=b+w|0,Q^=b,Q=Q>>>20|Q<<12,D=D+ie|0,N^=D,N=N>>>16|N<<16,G=G+N|0,ie^=G,ie=ie>>>20|ie<<12,V=V+O|0,L^=V,L=L>>>16|L<<16,R=R+L|0,O^=R,O=O>>>20|O<<12,D=D+ie|0,N^=D,N=N>>>24|N<<8,G=G+N|0,ie^=G,ie=ie>>>25|ie<<7,V=V+O|0,L^=V,L=L>>>24|L<<8,R=R+L|0,O^=R,O=O>>>25|O<<7,B=B+Q|0,w^=B,w=w>>>24|w<<8,b=b+w|0,Q^=b,Q=Q>>>25|Q<<7,I=I+U|0,C^=I,C=C>>>24|C<<8,k=k+C|0,U^=k,U=U>>>25|U<<7;Wo.writeUint32LE(I+r|0,t,0),Wo.writeUint32LE(B+s|0,t,4),Wo.writeUint32LE(D+i|0,t,8),Wo.writeUint32LE(V+a|0,t,12),Wo.writeUint32LE(O+o|0,t,16),Wo.writeUint32LE(U+c|0,t,20),Wo.writeUint32LE(Q+l|0,t,24),Wo.writeUint32LE(ie+u|0,t,28),Wo.writeUint32LE(G+f|0,t,32),Wo.writeUint32LE(R+d|0,t,36),Wo.writeUint32LE(k+p|0,t,40),Wo.writeUint32LE(b+g|0,t,44),Wo.writeUint32LE(w+m|0,t,48),Wo.writeUint32LE(N+v|0,t,52),Wo.writeUint32LE(L+A|0,t,56),Wo.writeUint32LE(C+S|0,t,60)}function PCe(t,e,n,r,s){if(s===void 0&&(s=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(r.length<n.length)throw new Error("ChaCha: destination is shorter than source");var i,a;if(s===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");i=new Uint8Array(16),a=i.length-e.length,i.set(e,a)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");i=e,a=s}for(var o=new Uint8Array(64),c=0;c<n.length;c+=64){VEt(o,i,t);for(var l=c;l<c+64&&l<n.length;l++)r[l]=n[l]^o[l-c];jEt(i,0,a)}return lY.wipe(o),s===0&&lY.wipe(i),r}wF.streamXOR=PCe;function $Et(t,e,n,r){return r===void 0&&(r=0),lY.wipe(n),PCe(t,e,n,n,r)}wF.stream=$Et;function jEt(t,e,n){for(var r=1;n--;)r=r+(t[e]&255)|0,t[e]=r&255,r>>>=8,e++;if(r>0)throw new Error("ChaCha: counter overflow")}var OCe={},Fb={};Object.defineProperty(Fb,"__esModule",{value:!0});function HEt(t,e,n){return~(t-1)&e|t-1&n}Fb.select=HEt;function qEt(t,e){return(t|0)-(e|0)-1>>>31&1}Fb.lessOrEqual=qEt;function RCe(t,e){if(t.length!==e.length)return 0;for(var n=0,r=0;r<t.length;r++)n|=t[r]^e[r];return 1&n-1>>>8}Fb.compare=RCe;function KEt(t,e){return t.length===0||e.length===0?!1:RCe(t,e)!==0}Fb.equal=KEt;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Fb,n=Du;t.DIGEST_LENGTH=16;var r=function(){function a(o){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=o[0]|o[1]<<8;this._r[0]=c&8191;var l=o[2]|o[3]<<8;this._r[1]=(c>>>13|l<<3)&8191;var u=o[4]|o[5]<<8;this._r[2]=(l>>>10|u<<6)&7939;var f=o[6]|o[7]<<8;this._r[3]=(u>>>7|f<<9)&8191;var d=o[8]|o[9]<<8;this._r[4]=(f>>>4|d<<12)&255,this._r[5]=d>>>1&8190;var p=o[10]|o[11]<<8;this._r[6]=(d>>>14|p<<2)&8191;var g=o[12]|o[13]<<8;this._r[7]=(p>>>11|g<<5)&8065;var m=o[14]|o[15]<<8;this._r[8]=(g>>>8|m<<8)&8191,this._r[9]=m>>>5&127,this._pad[0]=o[16]|o[17]<<8,this._pad[1]=o[18]|o[19]<<8,this._pad[2]=o[20]|o[21]<<8,this._pad[3]=o[22]|o[23]<<8,this._pad[4]=o[24]|o[25]<<8,this._pad[5]=o[26]|o[27]<<8,this._pad[6]=o[28]|o[29]<<8,this._pad[7]=o[30]|o[31]<<8}return a.prototype._blocks=function(o,c,l){for(var u=this._fin?0:2048,f=this._h[0],d=this._h[1],p=this._h[2],g=this._h[3],m=this._h[4],v=this._h[5],A=this._h[6],S=this._h[7],I=this._h[8],B=this._h[9],D=this._r[0],V=this._r[1],O=this._r[2],U=this._r[3],Q=this._r[4],ie=this._r[5],G=this._r[6],R=this._r[7],k=this._r[8],b=this._r[9];l>=16;){var w=o[c+0]|o[c+1]<<8;f+=w&8191;var N=o[c+2]|o[c+3]<<8;d+=(w>>>13|N<<3)&8191;var L=o[c+4]|o[c+5]<<8;p+=(N>>>10|L<<6)&8191;var C=o[c+6]|o[c+7]<<8;g+=(L>>>7|C<<9)&8191;var T=o[c+8]|o[c+9]<<8;m+=(C>>>4|T<<12)&8191,v+=T>>>1&8191;var E=o[c+10]|o[c+11]<<8;A+=(T>>>14|E<<2)&8191;var P=o[c+12]|o[c+13]<<8;S+=(E>>>11|P<<5)&8191;var _=o[c+14]|o[c+15]<<8;I+=(P>>>8|_<<8)&8191,B+=_>>>5|u;var H=0,ne=H;ne+=f*D,ne+=d*(5*b),ne+=p*(5*k),ne+=g*(5*R),ne+=m*(5*G),H=ne>>>13,ne&=8191,ne+=v*(5*ie),ne+=A*(5*Q),ne+=S*(5*U),ne+=I*(5*O),ne+=B*(5*V),H+=ne>>>13,ne&=8191;var $=H;$+=f*V,$+=d*D,$+=p*(5*b),$+=g*(5*k),$+=m*(5*R),H=$>>>13,$&=8191,$+=v*(5*G),$+=A*(5*ie),$+=S*(5*Q),$+=I*(5*U),$+=B*(5*O),H+=$>>>13,$&=8191;var te=H;te+=f*O,te+=d*V,te+=p*D,te+=g*(5*b),te+=m*(5*k),H=te>>>13,te&=8191,te+=v*(5*R),te+=A*(5*G),te+=S*(5*ie),te+=I*(5*Q),te+=B*(5*U),H+=te>>>13,te&=8191;var J=H;J+=f*U,J+=d*O,J+=p*V,J+=g*D,J+=m*(5*b),H=J>>>13,J&=8191,J+=v*(5*k),J+=A*(5*R),J+=S*(5*G),J+=I*(5*ie),J+=B*(5*Q),H+=J>>>13,J&=8191;var ee=H;ee+=f*Q,ee+=d*U,ee+=p*O,ee+=g*V,ee+=m*D,H=ee>>>13,ee&=8191,ee+=v*(5*b),ee+=A*(5*k),ee+=S*(5*R),ee+=I*(5*G),ee+=B*(5*ie),H+=ee>>>13,ee&=8191;var X=H;X+=f*ie,X+=d*Q,X+=p*U,X+=g*O,X+=m*V,H=X>>>13,X&=8191,X+=v*D,X+=A*(5*b),X+=S*(5*k),X+=I*(5*R),X+=B*(5*G),H+=X>>>13,X&=8191;var j=H;j+=f*G,j+=d*ie,j+=p*Q,j+=g*U,j+=m*O,H=j>>>13,j&=8191,j+=v*V,j+=A*D,j+=S*(5*b),j+=I*(5*k),j+=B*(5*R),H+=j>>>13,j&=8191;var se=H;se+=f*R,se+=d*G,se+=p*ie,se+=g*Q,se+=m*U,H=se>>>13,se&=8191,se+=v*O,se+=A*V,se+=S*D,se+=I*(5*b),se+=B*(5*k),H+=se>>>13,se&=8191;var ye=H;ye+=f*k,ye+=d*R,ye+=p*G,ye+=g*ie,ye+=m*Q,H=ye>>>13,ye&=8191,ye+=v*U,ye+=A*O,ye+=S*V,ye+=I*D,ye+=B*(5*b),H+=ye>>>13,ye&=8191;var Ce=H;Ce+=f*b,Ce+=d*k,Ce+=p*R,Ce+=g*G,Ce+=m*ie,H=Ce>>>13,Ce&=8191,Ce+=v*Q,Ce+=A*U,Ce+=S*O,Ce+=I*V,Ce+=B*D,H+=Ce>>>13,Ce&=8191,H=(H<<2)+H|0,H=H+ne|0,ne=H&8191,H=H>>>13,$+=H,f=ne,d=$,p=te,g=J,m=ee,v=X,A=j,S=se,I=ye,B=Ce,c+=16,l-=16}this._h[0]=f,this._h[1]=d,this._h[2]=p,this._h[3]=g,this._h[4]=m,this._h[5]=v,this._h[6]=A,this._h[7]=S,this._h[8]=I,this._h[9]=B},a.prototype.finish=function(o,c){c===void 0&&(c=0);var l=new Uint16Array(10),u,f,d,p;if(this._leftover){for(p=this._leftover,this._buffer[p++]=1;p<16;p++)this._buffer[p]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(u=this._h[1]>>>13,this._h[1]&=8191,p=2;p<10;p++)this._h[p]+=u,u=this._h[p]>>>13,this._h[p]&=8191;for(this._h[0]+=u*5,u=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=u,u=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=u,l[0]=this._h[0]+5,u=l[0]>>>13,l[0]&=8191,p=1;p<10;p++)l[p]=this._h[p]+u,u=l[p]>>>13,l[p]&=8191;for(l[9]-=8192,f=(u^1)-1,p=0;p<10;p++)l[p]&=f;for(f=~f,p=0;p<10;p++)this._h[p]=this._h[p]&f|l[p];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,d=this._h[0]+this._pad[0],this._h[0]=d&65535,p=1;p<8;p++)d=(this._h[p]+this._pad[p]|0)+(d>>>16)|0,this._h[p]=d&65535;return o[c+0]=this._h[0]>>>0,o[c+1]=this._h[0]>>>8,o[c+2]=this._h[1]>>>0,o[c+3]=this._h[1]>>>8,o[c+4]=this._h[2]>>>0,o[c+5]=this._h[2]>>>8,o[c+6]=this._h[3]>>>0,o[c+7]=this._h[3]>>>8,o[c+8]=this._h[4]>>>0,o[c+9]=this._h[4]>>>8,o[c+10]=this._h[5]>>>0,o[c+11]=this._h[5]>>>8,o[c+12]=this._h[6]>>>0,o[c+13]=this._h[6]>>>8,o[c+14]=this._h[7]>>>0,o[c+15]=this._h[7]>>>8,this._finished=!0,this},a.prototype.update=function(o){var c=0,l=o.length,u;if(this._leftover){u=16-this._leftover,u>l&&(u=l);for(var f=0;f<u;f++)this._buffer[this._leftover+f]=o[c+f];if(l-=u,c+=u,this._leftover+=u,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(u=l-l%16,this._blocks(o,c,u),c+=u,l-=u),l){for(var f=0;f<l;f++)this._buffer[this._leftover+f]=o[c+f];this._leftover+=l}return this},a.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var o=new Uint8Array(16);return this.finish(o),o},a.prototype.clean=function(){return n.wipe(this._buffer),n.wipe(this._r),n.wipe(this._h),n.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},a}();t.Poly1305=r;function s(a,o){var c=new r(a);c.update(o);var l=c.digest();return c.clean(),l}t.oneTimeAuth=s;function i(a,o){return a.length!==t.DIGEST_LENGTH||o.length!==t.DIGEST_LENGTH?!1:e.equal(a,o)}t.equal=i})(OCe);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=wF,n=OCe,r=Du,s=tr,i=Fb;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var a=new Uint8Array(16),o=function(){function c(l){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,l.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(l)}return c.prototype.seal=function(l,u,f,d){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var p=new Uint8Array(16);p.set(l,p.length-l.length);var g=new Uint8Array(32);e.stream(this._key,p,g,4);var m=u.length+this.tagLength,v;if(d){if(d.length!==m)throw new Error("ChaCha20Poly1305: incorrect destination length");v=d}else v=new Uint8Array(m);return e.streamXOR(this._key,p,u,v,4),this._authenticate(v.subarray(v.length-this.tagLength,v.length),g,v.subarray(0,v.length-this.tagLength),f),r.wipe(p),v},c.prototype.open=function(l,u,f,d){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(u.length<this.tagLength)return null;var p=new Uint8Array(16);p.set(l,p.length-l.length);var g=new Uint8Array(32);e.stream(this._key,p,g,4);var m=new Uint8Array(this.tagLength);if(this._authenticate(m,g,u.subarray(0,u.length-this.tagLength),f),!i.equal(m,u.subarray(u.length-this.tagLength,u.length)))return null;var v=u.length-this.tagLength,A;if(d){if(d.length!==v)throw new Error("ChaCha20Poly1305: incorrect destination length");A=d}else A=new Uint8Array(v);return e.streamXOR(this._key,p,u.subarray(0,u.length-this.tagLength),A,4),r.wipe(p),A},c.prototype.clean=function(){return r.wipe(this._key),this},c.prototype._authenticate=function(l,u,f,d){var p=new n.Poly1305(u);d&&(p.update(d),d.length%16>0&&p.update(a.subarray(d.length%16))),p.update(f),f.length%16>0&&p.update(a.subarray(f.length%16));var g=new Uint8Array(8);d&&s.writeUint64LE(d.length,g),p.update(g),s.writeUint64LE(f.length,g),p.update(g);for(var m=p.digest(),v=0;v<m.length;v++)l[v]=m[v];p.clean(),r.wipe(m),r.wipe(g)},c}();t.ChaCha20Poly1305=o})(nne);var _Ce={},f9={},rne={};Object.defineProperty(rne,"__esModule",{value:!0});function GEt(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}rne.isSerializableHash=GEt;Object.defineProperty(f9,"__esModule",{value:!0});var Oh=rne,WEt=Fb,zEt=Du,BCe=function(){function t(e,n){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);n.length>this.blockSize?this._inner.update(n).finish(r).clean():r.set(n);for(var s=0;s<r.length;s++)r[s]^=54;this._inner.update(r);for(var s=0;s<r.length;s++)r[s]^=106;this._outer.update(r),Oh.isSerializableHash(this._inner)&&Oh.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),zEt.wipe(r)}return t.prototype.reset=function(){if(!Oh.isSerializableHash(this._inner)||!Oh.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){Oh.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Oh.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!Oh.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!Oh.isSerializableHash(this._inner)||!Oh.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!Oh.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();f9.HMAC=BCe;function JEt(t,e,n){var r=new BCe(t,e);r.update(n);var s=r.digest();return r.clean(),s}f9.hmac=JEt;f9.equal=WEt.equal;Object.defineProperty(_Ce,"__esModule",{value:!0});var Lde=f9,Ude=Du,YEt=function(){function t(e,n,r,s){r===void 0&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=s;var i=Lde.hmac(this._hash,r,n);this._hmac=new Lde.HMAC(e,i),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var n=new Uint8Array(e),r=0;r<n.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),n[r]=this._buffer[this._bufpos++];return n},t.prototype.clean=function(){this._hmac.clean(),Ude.wipe(this._buffer),Ude.wipe(this._counter),this._bufpos=0},t}(),QEt=_Ce.HKDF=YEt,Vb={},bF={},vF={};Object.defineProperty(vF,"__esModule",{value:!0});vF.BrowserRandomSource=void 0;const Fde=65536;class ZEt{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const n=new Uint8Array(e);for(let r=0;r<n.length;r+=Fde)this._crypto.getRandomValues(n.subarray(r,r+Math.min(n.length-r,Fde)));return n}}vF.BrowserRandomSource=ZEt;function XEt(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xF={};Object.defineProperty(xF,"__esModule",{value:!0});xF.NodeRandomSource=void 0;const eAt=Du;class tAt{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof XEt<"u"){const e=hF;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let n=this._crypto.randomBytes(e);if(n.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const r=new Uint8Array(e);for(let s=0;s<r.length;s++)r[s]=n[s];return(0,eAt.wipe)(n),r}}xF.NodeRandomSource=tAt;Object.defineProperty(bF,"__esModule",{value:!0});bF.SystemRandomSource=void 0;const nAt=vF,rAt=xF;class sAt{constructor(){if(this.isAvailable=!1,this.name="",this._source=new nAt.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new rAt.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}bF.SystemRandomSource=sAt;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=bF,n=tr,r=Du;t.defaultRandomSource=new e.SystemRandomSource;function s(l,u=t.defaultRandomSource){return u.randomBytes(l)}t.randomBytes=s;function i(l=t.defaultRandomSource){const u=s(4,l),f=(0,n.readUint32LE)(u);return(0,r.wipe)(u),f}t.randomUint32=i;const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function o(l,u=a,f=t.defaultRandomSource){if(u.length<2)throw new Error("randomString charset is too short");if(u.length>256)throw new Error("randomString charset is too long");let d="";const p=u.length,g=256-256%p;for(;l>0;){const m=s(Math.ceil(l*256/g),f);for(let v=0;v<m.length&&l>0;v++){const A=m[v];A<g&&(d+=u.charAt(A%p),l--)}(0,r.wipe)(m)}return d}t.randomString=o;function c(l,u=a,f=t.defaultRandomSource){const d=Math.ceil(l/(Math.log(u.length)/Math.LN2));return o(d,u,f)}t.randomStringForEntropy=c})(Vb);var d9={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=tr,n=Du;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var r=function(){function o(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return o.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},o.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},o.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._temp),this.reset()},o.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var u=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&l>0;)this._buffer[this._bufferLength++]=c[u++],l--;this._bufferLength===this.blockSize&&(i(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(u=i(this._temp,this._state,c,u,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=c[u++],l--;return this},o.prototype.finish=function(c){if(!this._finished){var l=this._bytesHashed,u=this._bufferLength,f=l/536870912|0,d=l<<3,p=l%64<56?64:128;this._buffer[u]=128;for(var g=u+1;g<p-8;g++)this._buffer[g]=0;e.writeUint32BE(f,this._buffer,p-8),e.writeUint32BE(d,this._buffer,p-4),i(this._temp,this._state,this._buffer,0,p),this._finished=!0}for(var g=0;g<this.digestLength/4;g++)e.writeUint32BE(this._state[g],c,g*4);return this},o.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},o.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},o.prototype.restoreState=function(c){return this._state.set(c.state),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},o.prototype.cleanSavedState=function(c){n.wipe(c.state),c.buffer&&n.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},o}();t.SHA256=r;var s=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function i(o,c,l,u,f){for(;f>=64;){for(var d=c[0],p=c[1],g=c[2],m=c[3],v=c[4],A=c[5],S=c[6],I=c[7],B=0;B<16;B++){var D=u+B*4;o[B]=e.readUint32BE(l,D)}for(var B=16;B<64;B++){var V=o[B-2],O=(V>>>17|V<<15)^(V>>>19|V<<13)^V>>>10;V=o[B-15];var U=(V>>>7|V<<25)^(V>>>18|V<<14)^V>>>3;o[B]=(O+o[B-7]|0)+(U+o[B-16]|0)}for(var B=0;B<64;B++){var O=(((v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7))+(v&A^~v&S)|0)+(I+(s[B]+o[B]|0)|0)|0,U=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&p^d&g^p&g)|0;I=S,S=A,A=v,v=m+O|0,m=g,g=p,p=d,d=O+U|0}c[0]+=d,c[1]+=p,c[2]+=g,c[3]+=m,c[4]+=v,c[5]+=A,c[6]+=S,c[7]+=I,u+=64,f-=64}return u}function a(o){var c=new r;c.update(o);var l=c.digest();return c.clean(),l}t.hash=a})(d9);var sne={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=Vb,n=Du;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function r(B){const D=new Float64Array(16);if(B)for(let V=0;V<B.length;V++)D[V]=B[V];return D}const s=new Uint8Array(32);s[0]=9;const i=r([56129,1]);function a(B){let D=1;for(let V=0;V<16;V++){let O=B[V]+D+65535;D=Math.floor(O/65536),B[V]=O-D*65536}B[0]+=D-1+37*(D-1)}function o(B,D,V){const O=~(V-1);for(let U=0;U<16;U++){const Q=O&(B[U]^D[U]);B[U]^=Q,D[U]^=Q}}function c(B,D){const V=r(),O=r();for(let U=0;U<16;U++)O[U]=D[U];a(O),a(O),a(O);for(let U=0;U<2;U++){V[0]=O[0]-65517;for(let ie=1;ie<15;ie++)V[ie]=O[ie]-65535-(V[ie-1]>>16&1),V[ie-1]&=65535;V[15]=O[15]-32767-(V[14]>>16&1);const Q=V[15]>>16&1;V[14]&=65535,o(O,V,1-Q)}for(let U=0;U<16;U++)B[2*U]=O[U]&255,B[2*U+1]=O[U]>>8}function l(B,D){for(let V=0;V<16;V++)B[V]=D[2*V]+(D[2*V+1]<<8);B[15]&=32767}function u(B,D,V){for(let O=0;O<16;O++)B[O]=D[O]+V[O]}function f(B,D,V){for(let O=0;O<16;O++)B[O]=D[O]-V[O]}function d(B,D,V){let O,U,Q=0,ie=0,G=0,R=0,k=0,b=0,w=0,N=0,L=0,C=0,T=0,E=0,P=0,_=0,H=0,ne=0,$=0,te=0,J=0,ee=0,X=0,j=0,se=0,ye=0,Ce=0,xe=0,De=0,qe=0,ze=0,ft=0,mt=0,Be=V[0],de=V[1],oe=V[2],fe=V[3],ce=V[4],ae=V[5],Ie=V[6],nt=V[7],yt=V[8],Tt=V[9],at=V[10],It=V[11],_t=V[12],pt=V[13],$t=V[14],Pt=V[15];O=D[0],Q+=O*Be,ie+=O*de,G+=O*oe,R+=O*fe,k+=O*ce,b+=O*ae,w+=O*Ie,N+=O*nt,L+=O*yt,C+=O*Tt,T+=O*at,E+=O*It,P+=O*_t,_+=O*pt,H+=O*$t,ne+=O*Pt,O=D[1],ie+=O*Be,G+=O*de,R+=O*oe,k+=O*fe,b+=O*ce,w+=O*ae,N+=O*Ie,L+=O*nt,C+=O*yt,T+=O*Tt,E+=O*at,P+=O*It,_+=O*_t,H+=O*pt,ne+=O*$t,$+=O*Pt,O=D[2],G+=O*Be,R+=O*de,k+=O*oe,b+=O*fe,w+=O*ce,N+=O*ae,L+=O*Ie,C+=O*nt,T+=O*yt,E+=O*Tt,P+=O*at,_+=O*It,H+=O*_t,ne+=O*pt,$+=O*$t,te+=O*Pt,O=D[3],R+=O*Be,k+=O*de,b+=O*oe,w+=O*fe,N+=O*ce,L+=O*ae,C+=O*Ie,T+=O*nt,E+=O*yt,P+=O*Tt,_+=O*at,H+=O*It,ne+=O*_t,$+=O*pt,te+=O*$t,J+=O*Pt,O=D[4],k+=O*Be,b+=O*de,w+=O*oe,N+=O*fe,L+=O*ce,C+=O*ae,T+=O*Ie,E+=O*nt,P+=O*yt,_+=O*Tt,H+=O*at,ne+=O*It,$+=O*_t,te+=O*pt,J+=O*$t,ee+=O*Pt,O=D[5],b+=O*Be,w+=O*de,N+=O*oe,L+=O*fe,C+=O*ce,T+=O*ae,E+=O*Ie,P+=O*nt,_+=O*yt,H+=O*Tt,ne+=O*at,$+=O*It,te+=O*_t,J+=O*pt,ee+=O*$t,X+=O*Pt,O=D[6],w+=O*Be,N+=O*de,L+=O*oe,C+=O*fe,T+=O*ce,E+=O*ae,P+=O*Ie,_+=O*nt,H+=O*yt,ne+=O*Tt,$+=O*at,te+=O*It,J+=O*_t,ee+=O*pt,X+=O*$t,j+=O*Pt,O=D[7],N+=O*Be,L+=O*de,C+=O*oe,T+=O*fe,E+=O*ce,P+=O*ae,_+=O*Ie,H+=O*nt,ne+=O*yt,$+=O*Tt,te+=O*at,J+=O*It,ee+=O*_t,X+=O*pt,j+=O*$t,se+=O*Pt,O=D[8],L+=O*Be,C+=O*de,T+=O*oe,E+=O*fe,P+=O*ce,_+=O*ae,H+=O*Ie,ne+=O*nt,$+=O*yt,te+=O*Tt,J+=O*at,ee+=O*It,X+=O*_t,j+=O*pt,se+=O*$t,ye+=O*Pt,O=D[9],C+=O*Be,T+=O*de,E+=O*oe,P+=O*fe,_+=O*ce,H+=O*ae,ne+=O*Ie,$+=O*nt,te+=O*yt,J+=O*Tt,ee+=O*at,X+=O*It,j+=O*_t,se+=O*pt,ye+=O*$t,Ce+=O*Pt,O=D[10],T+=O*Be,E+=O*de,P+=O*oe,_+=O*fe,H+=O*ce,ne+=O*ae,$+=O*Ie,te+=O*nt,J+=O*yt,ee+=O*Tt,X+=O*at,j+=O*It,se+=O*_t,ye+=O*pt,Ce+=O*$t,xe+=O*Pt,O=D[11],E+=O*Be,P+=O*de,_+=O*oe,H+=O*fe,ne+=O*ce,$+=O*ae,te+=O*Ie,J+=O*nt,ee+=O*yt,X+=O*Tt,j+=O*at,se+=O*It,ye+=O*_t,Ce+=O*pt,xe+=O*$t,De+=O*Pt,O=D[12],P+=O*Be,_+=O*de,H+=O*oe,ne+=O*fe,$+=O*ce,te+=O*ae,J+=O*Ie,ee+=O*nt,X+=O*yt,j+=O*Tt,se+=O*at,ye+=O*It,Ce+=O*_t,xe+=O*pt,De+=O*$t,qe+=O*Pt,O=D[13],_+=O*Be,H+=O*de,ne+=O*oe,$+=O*fe,te+=O*ce,J+=O*ae,ee+=O*Ie,X+=O*nt,j+=O*yt,se+=O*Tt,ye+=O*at,Ce+=O*It,xe+=O*_t,De+=O*pt,qe+=O*$t,ze+=O*Pt,O=D[14],H+=O*Be,ne+=O*de,$+=O*oe,te+=O*fe,J+=O*ce,ee+=O*ae,X+=O*Ie,j+=O*nt,se+=O*yt,ye+=O*Tt,Ce+=O*at,xe+=O*It,De+=O*_t,qe+=O*pt,ze+=O*$t,ft+=O*Pt,O=D[15],ne+=O*Be,$+=O*de,te+=O*oe,J+=O*fe,ee+=O*ce,X+=O*ae,j+=O*Ie,se+=O*nt,ye+=O*yt,Ce+=O*Tt,xe+=O*at,De+=O*It,qe+=O*_t,ze+=O*pt,ft+=O*$t,mt+=O*Pt,Q+=38*$,ie+=38*te,G+=38*J,R+=38*ee,k+=38*X,b+=38*j,w+=38*se,N+=38*ye,L+=38*Ce,C+=38*xe,T+=38*De,E+=38*qe,P+=38*ze,_+=38*ft,H+=38*mt,U=1,O=Q+U+65535,U=Math.floor(O/65536),Q=O-U*65536,O=ie+U+65535,U=Math.floor(O/65536),ie=O-U*65536,O=G+U+65535,U=Math.floor(O/65536),G=O-U*65536,O=R+U+65535,U=Math.floor(O/65536),R=O-U*65536,O=k+U+65535,U=Math.floor(O/65536),k=O-U*65536,O=b+U+65535,U=Math.floor(O/65536),b=O-U*65536,O=w+U+65535,U=Math.floor(O/65536),w=O-U*65536,O=N+U+65535,U=Math.floor(O/65536),N=O-U*65536,O=L+U+65535,U=Math.floor(O/65536),L=O-U*65536,O=C+U+65535,U=Math.floor(O/65536),C=O-U*65536,O=T+U+65535,U=Math.floor(O/65536),T=O-U*65536,O=E+U+65535,U=Math.floor(O/65536),E=O-U*65536,O=P+U+65535,U=Math.floor(O/65536),P=O-U*65536,O=_+U+65535,U=Math.floor(O/65536),_=O-U*65536,O=H+U+65535,U=Math.floor(O/65536),H=O-U*65536,O=ne+U+65535,U=Math.floor(O/65536),ne=O-U*65536,Q+=U-1+37*(U-1),U=1,O=Q+U+65535,U=Math.floor(O/65536),Q=O-U*65536,O=ie+U+65535,U=Math.floor(O/65536),ie=O-U*65536,O=G+U+65535,U=Math.floor(O/65536),G=O-U*65536,O=R+U+65535,U=Math.floor(O/65536),R=O-U*65536,O=k+U+65535,U=Math.floor(O/65536),k=O-U*65536,O=b+U+65535,U=Math.floor(O/65536),b=O-U*65536,O=w+U+65535,U=Math.floor(O/65536),w=O-U*65536,O=N+U+65535,U=Math.floor(O/65536),N=O-U*65536,O=L+U+65535,U=Math.floor(O/65536),L=O-U*65536,O=C+U+65535,U=Math.floor(O/65536),C=O-U*65536,O=T+U+65535,U=Math.floor(O/65536),T=O-U*65536,O=E+U+65535,U=Math.floor(O/65536),E=O-U*65536,O=P+U+65535,U=Math.floor(O/65536),P=O-U*65536,O=_+U+65535,U=Math.floor(O/65536),_=O-U*65536,O=H+U+65535,U=Math.floor(O/65536),H=O-U*65536,O=ne+U+65535,U=Math.floor(O/65536),ne=O-U*65536,Q+=U-1+37*(U-1),B[0]=Q,B[1]=ie,B[2]=G,B[3]=R,B[4]=k,B[5]=b,B[6]=w,B[7]=N,B[8]=L,B[9]=C,B[10]=T,B[11]=E,B[12]=P,B[13]=_,B[14]=H,B[15]=ne}function p(B,D){d(B,D,D)}function g(B,D){const V=r();for(let O=0;O<16;O++)V[O]=D[O];for(let O=253;O>=0;O--)p(V,V),O!==2&&O!==4&&d(V,V,D);for(let O=0;O<16;O++)B[O]=V[O]}function m(B,D){const V=new Uint8Array(32),O=new Float64Array(80),U=r(),Q=r(),ie=r(),G=r(),R=r(),k=r();for(let L=0;L<31;L++)V[L]=B[L];V[31]=B[31]&127|64,V[0]&=248,l(O,D);for(let L=0;L<16;L++)Q[L]=O[L];U[0]=G[0]=1;for(let L=254;L>=0;--L){const C=V[L>>>3]>>>(L&7)&1;o(U,Q,C),o(ie,G,C),u(R,U,ie),f(U,U,ie),u(ie,Q,G),f(Q,Q,G),p(G,R),p(k,U),d(U,ie,U),d(ie,Q,R),u(R,U,ie),f(U,U,ie),p(Q,U),f(ie,G,k),d(U,ie,i),u(U,U,G),d(ie,ie,U),d(U,G,k),d(G,Q,O),p(Q,R),o(U,Q,C),o(ie,G,C)}for(let L=0;L<16;L++)O[L+16]=U[L],O[L+32]=ie[L],O[L+48]=Q[L],O[L+64]=G[L];const b=O.subarray(32),w=O.subarray(16);g(b,b),d(w,w,b);const N=new Uint8Array(32);return c(N,w),N}t.scalarMult=m;function v(B){return m(B,s)}t.scalarMultBase=v;function A(B){if(B.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const D=new Uint8Array(B);return{publicKey:v(D),secretKey:D}}t.generateKeyPairFromSeed=A;function S(B){const D=(0,e.randomBytes)(32,B),V=A(D);return(0,n.wipe)(D),V}t.generateKeyPair=S;function I(B,D,V=!1){if(B.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(D.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const O=m(B,D);if(V){let U=0;for(let Q=0;Q<O.length;Q++)U|=O[Q];if(U===0)throw new Error("X25519: invalid shared key")}return O}t.sharedKey=I})(sne);function MCe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Y_(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=MCe(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function iAt(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),a=i.charCodeAt(0);if(n[a]!==255)throw new TypeError(i+" is ambiguous");n[a]=s}var o=t.length,c=t.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function f(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var m=0,v=0,A=0,S=g.length;A!==S&&g[A]===0;)A++,m++;for(var I=(S-A)*u+1>>>0,B=new Uint8Array(I);A!==S;){for(var D=g[A],V=0,O=I-1;(D!==0||V<v)&&O!==-1;O--,V++)D+=256*B[O]>>>0,B[O]=D%o>>>0,D=D/o>>>0;if(D!==0)throw new Error("Non-zero carry");v=V,A++}for(var U=I-v;U!==I&&B[U]===0;)U++;for(var Q=c.repeat(m);U<I;++U)Q+=t.charAt(B[U]);return Q}function d(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var m=0;if(g[m]!==" "){for(var v=0,A=0;g[m]===c;)v++,m++;for(var S=(g.length-m)*l+1>>>0,I=new Uint8Array(S);g[m];){var B=n[g.charCodeAt(m)];if(B===255)return;for(var D=0,V=S-1;(B!==0||D<A)&&V!==-1;V--,D++)B+=o*I[V]>>>0,I[V]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");A=D,m++}if(g[m]!==" "){for(var O=S-A;O!==S&&I[O]===0;)O++;for(var U=new Uint8Array(v+(S-O)),Q=v;O!==S;)U[Q++]=I[O++];return U}}}function p(g){var m=d(g);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:d,decode:p}}var aAt=iAt,oAt=aAt;const cAt=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},lAt=t=>new TextEncoder().encode(t),uAt=t=>new TextDecoder().decode(t);class fAt{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class dAt{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return DCe(this,e)}}class hAt{constructor(e){this.decoders=e}or(e){return DCe(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const DCe=(t,e)=>new hAt({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class pAt{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new fAt(e,n,r),this.decoder=new dAt(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const EF=({name:t,prefix:e,encode:n,decode:r})=>new pAt(t,e,n,r),h9=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=oAt(n,e);return EF({prefix:t,name:e,encode:r,decode:i=>cAt(s(i))})},gAt=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const a=new Uint8Array(i*n/8|0);let o=0,c=0,l=0;for(let u=0;u<i;++u){const f=s[t[u]];if(f===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|f,o+=n,o>=8&&(o-=8,a[l++]=255&c>>o)}if(o>=n||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a},mAt=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",a=0,o=0;for(let c=0;c<t.length;++c)for(o=o<<8|t[c],a+=8;a>n;)a-=n,i+=e[s&o>>a];if(a&&(i+=e[s&o<<n-a]),r)for(;i.length*n&7;)i+="=";return i},ko=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>EF({prefix:e,name:t,encode(s){return mAt(s,r,n)},decode(s){return gAt(s,r,n,t)}}),yAt=EF({prefix:"\0",name:"identity",encode:t=>uAt(t),decode:t=>lAt(t)}),wAt=Object.freeze(Object.defineProperty({__proto__:null,identity:yAt},Symbol.toStringTag,{value:"Module"})),bAt=ko({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),vAt=Object.freeze(Object.defineProperty({__proto__:null,base2:bAt},Symbol.toStringTag,{value:"Module"})),xAt=ko({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),EAt=Object.freeze(Object.defineProperty({__proto__:null,base8:xAt},Symbol.toStringTag,{value:"Module"})),AAt=h9({prefix:"9",name:"base10",alphabet:"0123456789"}),SAt=Object.freeze(Object.defineProperty({__proto__:null,base10:AAt},Symbol.toStringTag,{value:"Module"})),IAt=ko({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),CAt=ko({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),TAt=Object.freeze(Object.defineProperty({__proto__:null,base16:IAt,base16upper:CAt},Symbol.toStringTag,{value:"Module"})),NAt=ko({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),kAt=ko({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),PAt=ko({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),OAt=ko({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),RAt=ko({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),_At=ko({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),BAt=ko({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),MAt=ko({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),DAt=ko({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),LAt=Object.freeze(Object.defineProperty({__proto__:null,base32:NAt,base32hex:RAt,base32hexpad:BAt,base32hexpadupper:MAt,base32hexupper:_At,base32pad:PAt,base32padupper:OAt,base32upper:kAt,base32z:DAt},Symbol.toStringTag,{value:"Module"})),UAt=h9({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),FAt=h9({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),VAt=Object.freeze(Object.defineProperty({__proto__:null,base36:UAt,base36upper:FAt},Symbol.toStringTag,{value:"Module"})),$At=h9({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),jAt=h9({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),HAt=Object.freeze(Object.defineProperty({__proto__:null,base58btc:$At,base58flickr:jAt},Symbol.toStringTag,{value:"Module"})),qAt=ko({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),KAt=ko({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),GAt=ko({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),WAt=ko({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),zAt=Object.freeze(Object.defineProperty({__proto__:null,base64:qAt,base64pad:KAt,base64url:GAt,base64urlpad:WAt},Symbol.toStringTag,{value:"Module"})),LCe=Array.from(""),JAt=LCe.reduce((t,e,n)=>(t[n]=e,t),[]),YAt=LCe.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function QAt(t){return t.reduce((e,n)=>(e+=JAt[n],e),"")}function ZAt(t){const e=[];for(const n of t){const r=YAt[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const XAt=EF({prefix:"",name:"base256emoji",encode:QAt,decode:ZAt}),eSt=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:XAt},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Vde={...wAt,...vAt,...EAt,...SAt,...TAt,...LAt,...VAt,...HAt,...zAt,...eSt};function UCe(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const $de=UCe("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Mq=UCe("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=MCe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),FCe={utf8:$de,"utf-8":$de,hex:Vde.base16,latin1:Mq,ascii:Mq,binary:Mq,...Vde};function ja(t,e="utf8"){const n=FCe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function Ka(t,e="utf8"){const n=FCe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}var VCe={};const tSt="6.6.0",nSt={version:tSt};var Lu={},ine={exports:{}};ine.exports;(function(t){(function(e,n){function r(G,R){if(!G)throw new Error(R||"Assertion failed")}function s(G,R){G.super_=R;var k=function(){};k.prototype=R.prototype,G.prototype=new k,G.prototype.constructor=G}function i(G,R,k){if(i.isBN(G))return G;this.negative=0,this.words=null,this.length=0,this.red=null,G!==null&&((R==="le"||R==="be")&&(k=R,R=10),this._init(G||0,R||10,k||"be"))}typeof e=="object"?e.exports=i:n.BN=i,i.BN=i,i.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=hF.Buffer}catch{}i.isBN=function(R){return R instanceof i?!0:R!==null&&typeof R=="object"&&R.constructor.wordSize===i.wordSize&&Array.isArray(R.words)},i.max=function(R,k){return R.cmp(k)>0?R:k},i.min=function(R,k){return R.cmp(k)<0?R:k},i.prototype._init=function(R,k,b){if(typeof R=="number")return this._initNumber(R,k,b);if(typeof R=="object")return this._initArray(R,k,b);k==="hex"&&(k=16),r(k===(k|0)&&k>=2&&k<=36),R=R.toString().replace(/\s+/g,"");var w=0;R[0]==="-"&&(w++,this.negative=1),w<R.length&&(k===16?this._parseHex(R,w,b):(this._parseBase(R,k,w),b==="le"&&this._initArray(this.toArray(),k,b)))},i.prototype._initNumber=function(R,k,b){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[R&67108863],this.length=1):R<4503599627370496?(this.words=[R&67108863,R/67108864&67108863],this.length=2):(r(R<9007199254740992),this.words=[R&67108863,R/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),k,b)},i.prototype._initArray=function(R,k,b){if(r(typeof R.length=="number"),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var N,L,C=0;if(b==="be")for(w=R.length-1,N=0;w>=0;w-=3)L=R[w]|R[w-1]<<8|R[w-2]<<16,this.words[N]|=L<<C&67108863,this.words[N+1]=L>>>26-C&67108863,C+=24,C>=26&&(C-=26,N++);else if(b==="le")for(w=0,N=0;w<R.length;w+=3)L=R[w]|R[w+1]<<8|R[w+2]<<16,this.words[N]|=L<<C&67108863,this.words[N+1]=L>>>26-C&67108863,C+=24,C>=26&&(C-=26,N++);return this.strip()};function o(G,R){var k=G.charCodeAt(R);return k>=65&&k<=70?k-55:k>=97&&k<=102?k-87:k-48&15}function c(G,R,k){var b=o(G,k);return k-1>=R&&(b|=o(G,k-1)<<4),b}i.prototype._parseHex=function(R,k,b){this.length=Math.ceil((R.length-k)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var N=0,L=0,C;if(b==="be")for(w=R.length-1;w>=k;w-=2)C=c(R,k,w)<<N,this.words[L]|=C&67108863,N>=18?(N-=18,L+=1,this.words[L]|=C>>>26):N+=8;else{var T=R.length-k;for(w=T%2===0?k+1:k;w<R.length;w+=2)C=c(R,k,w)<<N,this.words[L]|=C&67108863,N>=18?(N-=18,L+=1,this.words[L]|=C>>>26):N+=8}this.strip()};function l(G,R,k,b){for(var w=0,N=Math.min(G.length,k),L=R;L<N;L++){var C=G.charCodeAt(L)-48;w*=b,C>=49?w+=C-49+10:C>=17?w+=C-17+10:w+=C}return w}i.prototype._parseBase=function(R,k,b){this.words=[0],this.length=1;for(var w=0,N=1;N<=67108863;N*=k)w++;w--,N=N/k|0;for(var L=R.length-b,C=L%w,T=Math.min(L,L-C)+b,E=0,P=b;P<T;P+=w)E=l(R,P,P+w,k),this.imuln(N),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E);if(C!==0){var _=1;for(E=l(R,P,R.length,k),P=0;P<C;P++)_*=k;this.imuln(_),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E)}this.strip()},i.prototype.copy=function(R){R.words=new Array(this.length);for(var k=0;k<this.length;k++)R.words[k]=this.words[k];R.length=this.length,R.negative=this.negative,R.red=this.red},i.prototype.clone=function(){var R=new i(null);return this.copy(R),R},i.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(R,k){R=R||10,k=k|0||1;var b;if(R===16||R==="hex"){b="";for(var w=0,N=0,L=0;L<this.length;L++){var C=this.words[L],T=((C<<w|N)&16777215).toString(16);N=C>>>24-w&16777215,w+=2,w>=26&&(w-=26,L--),N!==0||L!==this.length-1?b=u[6-T.length]+T+b:b=T+b}for(N!==0&&(b=N.toString(16)+b);b.length%k!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(R===(R|0)&&R>=2&&R<=36){var E=f[R],P=d[R];b="";var _=this.clone();for(_.negative=0;!_.isZero();){var H=_.modn(P).toString(R);_=_.idivn(P),_.isZero()?b=H+b:b=u[E-H.length]+H+b}for(this.isZero()&&(b="0"+b);b.length%k!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var R=this.words[0];return this.length===2?R+=this.words[1]*67108864:this.length===3&&this.words[2]===1?R+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-R:R},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(R,k){return r(typeof a<"u"),this.toArrayLike(a,R,k)},i.prototype.toArray=function(R,k){return this.toArrayLike(Array,R,k)},i.prototype.toArrayLike=function(R,k,b){var w=this.byteLength(),N=b||Math.max(1,w);r(w<=N,"byte array longer than desired length"),r(N>0,"Requested array length <= 0"),this.strip();var L=k==="le",C=new R(N),T,E,P=this.clone();if(L){for(E=0;!P.isZero();E++)T=P.andln(255),P.iushrn(8),C[E]=T;for(;E<N;E++)C[E]=0}else{for(E=0;E<N-w;E++)C[E]=0;for(E=0;!P.isZero();E++)T=P.andln(255),P.iushrn(8),C[N-E-1]=T}return C},Math.clz32?i.prototype._countBits=function(R){return 32-Math.clz32(R)}:i.prototype._countBits=function(R){var k=R,b=0;return k>=4096&&(b+=13,k>>>=13),k>=64&&(b+=7,k>>>=7),k>=8&&(b+=4,k>>>=4),k>=2&&(b+=2,k>>>=2),b+k},i.prototype._zeroBits=function(R){if(R===0)return 26;var k=R,b=0;return k&8191||(b+=13,k>>>=13),k&127||(b+=7,k>>>=7),k&15||(b+=4,k>>>=4),k&3||(b+=2,k>>>=2),k&1||b++,b},i.prototype.bitLength=function(){var R=this.words[this.length-1],k=this._countBits(R);return(this.length-1)*26+k};function p(G){for(var R=new Array(G.bitLength()),k=0;k<R.length;k++){var b=k/26|0,w=k%26;R[k]=(G.words[b]&1<<w)>>>w}return R}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,k=0;k<this.length;k++){var b=this._zeroBits(this.words[k]);if(R+=b,b!==26)break}return R},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(R){return this.negative!==0?this.abs().inotn(R).iaddn(1):this.clone()},i.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var k=0;k<R.length;k++)this.words[k]=this.words[k]|R.words[k];return this.strip()},i.prototype.ior=function(R){return r((this.negative|R.negative)===0),this.iuor(R)},i.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},i.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},i.prototype.iuand=function(R){var k;this.length>R.length?k=R:k=this;for(var b=0;b<k.length;b++)this.words[b]=this.words[b]&R.words[b];return this.length=k.length,this.strip()},i.prototype.iand=function(R){return r((this.negative|R.negative)===0),this.iuand(R)},i.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},i.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},i.prototype.iuxor=function(R){var k,b;this.length>R.length?(k=this,b=R):(k=R,b=this);for(var w=0;w<b.length;w++)this.words[w]=k.words[w]^b.words[w];if(this!==k)for(;w<k.length;w++)this.words[w]=k.words[w];return this.length=k.length,this.strip()},i.prototype.ixor=function(R){return r((this.negative|R.negative)===0),this.iuxor(R)},i.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},i.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},i.prototype.inotn=function(R){r(typeof R=="number"&&R>=0);var k=Math.ceil(R/26)|0,b=R%26;this._expand(k),b>0&&k--;for(var w=0;w<k;w++)this.words[w]=~this.words[w]&67108863;return b>0&&(this.words[w]=~this.words[w]&67108863>>26-b),this.strip()},i.prototype.notn=function(R){return this.clone().inotn(R)},i.prototype.setn=function(R,k){r(typeof R=="number"&&R>=0);var b=R/26|0,w=R%26;return this._expand(b+1),k?this.words[b]=this.words[b]|1<<w:this.words[b]=this.words[b]&~(1<<w),this.strip()},i.prototype.iadd=function(R){var k;if(this.negative!==0&&R.negative===0)return this.negative=0,k=this.isub(R),this.negative^=1,this._normSign();if(this.negative===0&&R.negative!==0)return R.negative=0,k=this.isub(R),R.negative=1,k._normSign();var b,w;this.length>R.length?(b=this,w=R):(b=R,w=this);for(var N=0,L=0;L<w.length;L++)k=(b.words[L]|0)+(w.words[L]|0)+N,this.words[L]=k&67108863,N=k>>>26;for(;N!==0&&L<b.length;L++)k=(b.words[L]|0)+N,this.words[L]=k&67108863,N=k>>>26;if(this.length=b.length,N!==0)this.words[this.length]=N,this.length++;else if(b!==this)for(;L<b.length;L++)this.words[L]=b.words[L];return this},i.prototype.add=function(R){var k;return R.negative!==0&&this.negative===0?(R.negative=0,k=this.sub(R),R.negative^=1,k):R.negative===0&&this.negative!==0?(this.negative=0,k=R.sub(this),this.negative=1,k):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},i.prototype.isub=function(R){if(R.negative!==0){R.negative=0;var k=this.iadd(R);return R.negative=1,k._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var b=this.cmp(R);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,N;b>0?(w=this,N=R):(w=R,N=this);for(var L=0,C=0;C<N.length;C++)k=(w.words[C]|0)-(N.words[C]|0)+L,L=k>>26,this.words[C]=k&67108863;for(;L!==0&&C<w.length;C++)k=(w.words[C]|0)+L,L=k>>26,this.words[C]=k&67108863;if(L===0&&C<w.length&&w!==this)for(;C<w.length;C++)this.words[C]=w.words[C];return this.length=Math.max(this.length,C),w!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(R){return this.clone().isub(R)};function g(G,R,k){k.negative=R.negative^G.negative;var b=G.length+R.length|0;k.length=b,b=b-1|0;var w=G.words[0]|0,N=R.words[0]|0,L=w*N,C=L&67108863,T=L/67108864|0;k.words[0]=C;for(var E=1;E<b;E++){for(var P=T>>>26,_=T&67108863,H=Math.min(E,R.length-1),ne=Math.max(0,E-G.length+1);ne<=H;ne++){var $=E-ne|0;w=G.words[$]|0,N=R.words[ne]|0,L=w*N+_,P+=L/67108864|0,_=L&67108863}k.words[E]=_|0,T=P|0}return T!==0?k.words[E]=T|0:k.length--,k.strip()}var m=function(R,k,b){var w=R.words,N=k.words,L=b.words,C=0,T,E,P,_=w[0]|0,H=_&8191,ne=_>>>13,$=w[1]|0,te=$&8191,J=$>>>13,ee=w[2]|0,X=ee&8191,j=ee>>>13,se=w[3]|0,ye=se&8191,Ce=se>>>13,xe=w[4]|0,De=xe&8191,qe=xe>>>13,ze=w[5]|0,ft=ze&8191,mt=ze>>>13,Be=w[6]|0,de=Be&8191,oe=Be>>>13,fe=w[7]|0,ce=fe&8191,ae=fe>>>13,Ie=w[8]|0,nt=Ie&8191,yt=Ie>>>13,Tt=w[9]|0,at=Tt&8191,It=Tt>>>13,_t=N[0]|0,pt=_t&8191,$t=_t>>>13,Pt=N[1]|0,jt=Pt&8191,En=Pt>>>13,An=N[2]|0,At=An&8191,Sn=An>>>13,Hn=N[3]|0,Qt=Hn&8191,nn=Hn>>>13,sn=N[4]|0,Nt=sn&8191,un=sn>>>13,Xt=N[5]|0,Ct=Xt&8191,In=Xt>>>13,Cn=N[6]|0,kt=Cn&8191,Ht=Cn>>>13,an=N[7]|0,ct=an&8191,yn=an>>>13,qt=N[8]|0,xt=qt&8191,Tn=qt>>>13,Fr=N[9]|0,hn=Fr&8191,Or=Fr>>>13;b.negative=R.negative^k.negative,b.length=19,T=Math.imul(H,pt),E=Math.imul(H,$t),E=E+Math.imul(ne,pt)|0,P=Math.imul(ne,$t);var qn=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(qn>>>26)|0,qn&=67108863,T=Math.imul(te,pt),E=Math.imul(te,$t),E=E+Math.imul(J,pt)|0,P=Math.imul(J,$t),T=T+Math.imul(H,jt)|0,E=E+Math.imul(H,En)|0,E=E+Math.imul(ne,jt)|0,P=P+Math.imul(ne,En)|0;var Dr=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,T=Math.imul(X,pt),E=Math.imul(X,$t),E=E+Math.imul(j,pt)|0,P=Math.imul(j,$t),T=T+Math.imul(te,jt)|0,E=E+Math.imul(te,En)|0,E=E+Math.imul(J,jt)|0,P=P+Math.imul(J,En)|0,T=T+Math.imul(H,At)|0,E=E+Math.imul(H,Sn)|0,E=E+Math.imul(ne,At)|0,P=P+Math.imul(ne,Sn)|0;var ca=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(ca>>>26)|0,ca&=67108863,T=Math.imul(ye,pt),E=Math.imul(ye,$t),E=E+Math.imul(Ce,pt)|0,P=Math.imul(Ce,$t),T=T+Math.imul(X,jt)|0,E=E+Math.imul(X,En)|0,E=E+Math.imul(j,jt)|0,P=P+Math.imul(j,En)|0,T=T+Math.imul(te,At)|0,E=E+Math.imul(te,Sn)|0,E=E+Math.imul(J,At)|0,P=P+Math.imul(J,Sn)|0,T=T+Math.imul(H,Qt)|0,E=E+Math.imul(H,nn)|0,E=E+Math.imul(ne,Qt)|0,P=P+Math.imul(ne,nn)|0;var la=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(la>>>26)|0,la&=67108863,T=Math.imul(De,pt),E=Math.imul(De,$t),E=E+Math.imul(qe,pt)|0,P=Math.imul(qe,$t),T=T+Math.imul(ye,jt)|0,E=E+Math.imul(ye,En)|0,E=E+Math.imul(Ce,jt)|0,P=P+Math.imul(Ce,En)|0,T=T+Math.imul(X,At)|0,E=E+Math.imul(X,Sn)|0,E=E+Math.imul(j,At)|0,P=P+Math.imul(j,Sn)|0,T=T+Math.imul(te,Qt)|0,E=E+Math.imul(te,nn)|0,E=E+Math.imul(J,Qt)|0,P=P+Math.imul(J,nn)|0,T=T+Math.imul(H,Nt)|0,E=E+Math.imul(H,un)|0,E=E+Math.imul(ne,Nt)|0,P=P+Math.imul(ne,un)|0;var ua=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(ua>>>26)|0,ua&=67108863,T=Math.imul(ft,pt),E=Math.imul(ft,$t),E=E+Math.imul(mt,pt)|0,P=Math.imul(mt,$t),T=T+Math.imul(De,jt)|0,E=E+Math.imul(De,En)|0,E=E+Math.imul(qe,jt)|0,P=P+Math.imul(qe,En)|0,T=T+Math.imul(ye,At)|0,E=E+Math.imul(ye,Sn)|0,E=E+Math.imul(Ce,At)|0,P=P+Math.imul(Ce,Sn)|0,T=T+Math.imul(X,Qt)|0,E=E+Math.imul(X,nn)|0,E=E+Math.imul(j,Qt)|0,P=P+Math.imul(j,nn)|0,T=T+Math.imul(te,Nt)|0,E=E+Math.imul(te,un)|0,E=E+Math.imul(J,Nt)|0,P=P+Math.imul(J,un)|0,T=T+Math.imul(H,Ct)|0,E=E+Math.imul(H,In)|0,E=E+Math.imul(ne,Ct)|0,P=P+Math.imul(ne,In)|0;var Na=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(Na>>>26)|0,Na&=67108863,T=Math.imul(de,pt),E=Math.imul(de,$t),E=E+Math.imul(oe,pt)|0,P=Math.imul(oe,$t),T=T+Math.imul(ft,jt)|0,E=E+Math.imul(ft,En)|0,E=E+Math.imul(mt,jt)|0,P=P+Math.imul(mt,En)|0,T=T+Math.imul(De,At)|0,E=E+Math.imul(De,Sn)|0,E=E+Math.imul(qe,At)|0,P=P+Math.imul(qe,Sn)|0,T=T+Math.imul(ye,Qt)|0,E=E+Math.imul(ye,nn)|0,E=E+Math.imul(Ce,Qt)|0,P=P+Math.imul(Ce,nn)|0,T=T+Math.imul(X,Nt)|0,E=E+Math.imul(X,un)|0,E=E+Math.imul(j,Nt)|0,P=P+Math.imul(j,un)|0,T=T+Math.imul(te,Ct)|0,E=E+Math.imul(te,In)|0,E=E+Math.imul(J,Ct)|0,P=P+Math.imul(J,In)|0,T=T+Math.imul(H,kt)|0,E=E+Math.imul(H,Ht)|0,E=E+Math.imul(ne,kt)|0,P=P+Math.imul(ne,Ht)|0;var Js=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(Js>>>26)|0,Js&=67108863,T=Math.imul(ce,pt),E=Math.imul(ce,$t),E=E+Math.imul(ae,pt)|0,P=Math.imul(ae,$t),T=T+Math.imul(de,jt)|0,E=E+Math.imul(de,En)|0,E=E+Math.imul(oe,jt)|0,P=P+Math.imul(oe,En)|0,T=T+Math.imul(ft,At)|0,E=E+Math.imul(ft,Sn)|0,E=E+Math.imul(mt,At)|0,P=P+Math.imul(mt,Sn)|0,T=T+Math.imul(De,Qt)|0,E=E+Math.imul(De,nn)|0,E=E+Math.imul(qe,Qt)|0,P=P+Math.imul(qe,nn)|0,T=T+Math.imul(ye,Nt)|0,E=E+Math.imul(ye,un)|0,E=E+Math.imul(Ce,Nt)|0,P=P+Math.imul(Ce,un)|0,T=T+Math.imul(X,Ct)|0,E=E+Math.imul(X,In)|0,E=E+Math.imul(j,Ct)|0,P=P+Math.imul(j,In)|0,T=T+Math.imul(te,kt)|0,E=E+Math.imul(te,Ht)|0,E=E+Math.imul(J,kt)|0,P=P+Math.imul(J,Ht)|0,T=T+Math.imul(H,ct)|0,E=E+Math.imul(H,yn)|0,E=E+Math.imul(ne,ct)|0,P=P+Math.imul(ne,yn)|0;var Ro=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(Ro>>>26)|0,Ro&=67108863,T=Math.imul(nt,pt),E=Math.imul(nt,$t),E=E+Math.imul(yt,pt)|0,P=Math.imul(yt,$t),T=T+Math.imul(ce,jt)|0,E=E+Math.imul(ce,En)|0,E=E+Math.imul(ae,jt)|0,P=P+Math.imul(ae,En)|0,T=T+Math.imul(de,At)|0,E=E+Math.imul(de,Sn)|0,E=E+Math.imul(oe,At)|0,P=P+Math.imul(oe,Sn)|0,T=T+Math.imul(ft,Qt)|0,E=E+Math.imul(ft,nn)|0,E=E+Math.imul(mt,Qt)|0,P=P+Math.imul(mt,nn)|0,T=T+Math.imul(De,Nt)|0,E=E+Math.imul(De,un)|0,E=E+Math.imul(qe,Nt)|0,P=P+Math.imul(qe,un)|0,T=T+Math.imul(ye,Ct)|0,E=E+Math.imul(ye,In)|0,E=E+Math.imul(Ce,Ct)|0,P=P+Math.imul(Ce,In)|0,T=T+Math.imul(X,kt)|0,E=E+Math.imul(X,Ht)|0,E=E+Math.imul(j,kt)|0,P=P+Math.imul(j,Ht)|0,T=T+Math.imul(te,ct)|0,E=E+Math.imul(te,yn)|0,E=E+Math.imul(J,ct)|0,P=P+Math.imul(J,yn)|0,T=T+Math.imul(H,xt)|0,E=E+Math.imul(H,Tn)|0,E=E+Math.imul(ne,xt)|0,P=P+Math.imul(ne,Tn)|0;var _o=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(_o>>>26)|0,_o&=67108863,T=Math.imul(at,pt),E=Math.imul(at,$t),E=E+Math.imul(It,pt)|0,P=Math.imul(It,$t),T=T+Math.imul(nt,jt)|0,E=E+Math.imul(nt,En)|0,E=E+Math.imul(yt,jt)|0,P=P+Math.imul(yt,En)|0,T=T+Math.imul(ce,At)|0,E=E+Math.imul(ce,Sn)|0,E=E+Math.imul(ae,At)|0,P=P+Math.imul(ae,Sn)|0,T=T+Math.imul(de,Qt)|0,E=E+Math.imul(de,nn)|0,E=E+Math.imul(oe,Qt)|0,P=P+Math.imul(oe,nn)|0,T=T+Math.imul(ft,Nt)|0,E=E+Math.imul(ft,un)|0,E=E+Math.imul(mt,Nt)|0,P=P+Math.imul(mt,un)|0,T=T+Math.imul(De,Ct)|0,E=E+Math.imul(De,In)|0,E=E+Math.imul(qe,Ct)|0,P=P+Math.imul(qe,In)|0,T=T+Math.imul(ye,kt)|0,E=E+Math.imul(ye,Ht)|0,E=E+Math.imul(Ce,kt)|0,P=P+Math.imul(Ce,Ht)|0,T=T+Math.imul(X,ct)|0,E=E+Math.imul(X,yn)|0,E=E+Math.imul(j,ct)|0,P=P+Math.imul(j,yn)|0,T=T+Math.imul(te,xt)|0,E=E+Math.imul(te,Tn)|0,E=E+Math.imul(J,xt)|0,P=P+Math.imul(J,Tn)|0,T=T+Math.imul(H,hn)|0,E=E+Math.imul(H,Or)|0,E=E+Math.imul(ne,hn)|0,P=P+Math.imul(ne,Or)|0;var Bo=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(Bo>>>26)|0,Bo&=67108863,T=Math.imul(at,jt),E=Math.imul(at,En),E=E+Math.imul(It,jt)|0,P=Math.imul(It,En),T=T+Math.imul(nt,At)|0,E=E+Math.imul(nt,Sn)|0,E=E+Math.imul(yt,At)|0,P=P+Math.imul(yt,Sn)|0,T=T+Math.imul(ce,Qt)|0,E=E+Math.imul(ce,nn)|0,E=E+Math.imul(ae,Qt)|0,P=P+Math.imul(ae,nn)|0,T=T+Math.imul(de,Nt)|0,E=E+Math.imul(de,un)|0,E=E+Math.imul(oe,Nt)|0,P=P+Math.imul(oe,un)|0,T=T+Math.imul(ft,Ct)|0,E=E+Math.imul(ft,In)|0,E=E+Math.imul(mt,Ct)|0,P=P+Math.imul(mt,In)|0,T=T+Math.imul(De,kt)|0,E=E+Math.imul(De,Ht)|0,E=E+Math.imul(qe,kt)|0,P=P+Math.imul(qe,Ht)|0,T=T+Math.imul(ye,ct)|0,E=E+Math.imul(ye,yn)|0,E=E+Math.imul(Ce,ct)|0,P=P+Math.imul(Ce,yn)|0,T=T+Math.imul(X,xt)|0,E=E+Math.imul(X,Tn)|0,E=E+Math.imul(j,xt)|0,P=P+Math.imul(j,Tn)|0,T=T+Math.imul(te,hn)|0,E=E+Math.imul(te,Or)|0,E=E+Math.imul(J,hn)|0,P=P+Math.imul(J,Or)|0;var to=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(to>>>26)|0,to&=67108863,T=Math.imul(at,At),E=Math.imul(at,Sn),E=E+Math.imul(It,At)|0,P=Math.imul(It,Sn),T=T+Math.imul(nt,Qt)|0,E=E+Math.imul(nt,nn)|0,E=E+Math.imul(yt,Qt)|0,P=P+Math.imul(yt,nn)|0,T=T+Math.imul(ce,Nt)|0,E=E+Math.imul(ce,un)|0,E=E+Math.imul(ae,Nt)|0,P=P+Math.imul(ae,un)|0,T=T+Math.imul(de,Ct)|0,E=E+Math.imul(de,In)|0,E=E+Math.imul(oe,Ct)|0,P=P+Math.imul(oe,In)|0,T=T+Math.imul(ft,kt)|0,E=E+Math.imul(ft,Ht)|0,E=E+Math.imul(mt,kt)|0,P=P+Math.imul(mt,Ht)|0,T=T+Math.imul(De,ct)|0,E=E+Math.imul(De,yn)|0,E=E+Math.imul(qe,ct)|0,P=P+Math.imul(qe,yn)|0,T=T+Math.imul(ye,xt)|0,E=E+Math.imul(ye,Tn)|0,E=E+Math.imul(Ce,xt)|0,P=P+Math.imul(Ce,Tn)|0,T=T+Math.imul(X,hn)|0,E=E+Math.imul(X,Or)|0,E=E+Math.imul(j,hn)|0,P=P+Math.imul(j,Or)|0;var Ml=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(Ml>>>26)|0,Ml&=67108863,T=Math.imul(at,Qt),E=Math.imul(at,nn),E=E+Math.imul(It,Qt)|0,P=Math.imul(It,nn),T=T+Math.imul(nt,Nt)|0,E=E+Math.imul(nt,un)|0,E=E+Math.imul(yt,Nt)|0,P=P+Math.imul(yt,un)|0,T=T+Math.imul(ce,Ct)|0,E=E+Math.imul(ce,In)|0,E=E+Math.imul(ae,Ct)|0,P=P+Math.imul(ae,In)|0,T=T+Math.imul(de,kt)|0,E=E+Math.imul(de,Ht)|0,E=E+Math.imul(oe,kt)|0,P=P+Math.imul(oe,Ht)|0,T=T+Math.imul(ft,ct)|0,E=E+Math.imul(ft,yn)|0,E=E+Math.imul(mt,ct)|0,P=P+Math.imul(mt,yn)|0,T=T+Math.imul(De,xt)|0,E=E+Math.imul(De,Tn)|0,E=E+Math.imul(qe,xt)|0,P=P+Math.imul(qe,Tn)|0,T=T+Math.imul(ye,hn)|0,E=E+Math.imul(ye,Or)|0,E=E+Math.imul(Ce,hn)|0,P=P+Math.imul(Ce,Or)|0;var fa=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(fa>>>26)|0,fa&=67108863,T=Math.imul(at,Nt),E=Math.imul(at,un),E=E+Math.imul(It,Nt)|0,P=Math.imul(It,un),T=T+Math.imul(nt,Ct)|0,E=E+Math.imul(nt,In)|0,E=E+Math.imul(yt,Ct)|0,P=P+Math.imul(yt,In)|0,T=T+Math.imul(ce,kt)|0,E=E+Math.imul(ce,Ht)|0,E=E+Math.imul(ae,kt)|0,P=P+Math.imul(ae,Ht)|0,T=T+Math.imul(de,ct)|0,E=E+Math.imul(de,yn)|0,E=E+Math.imul(oe,ct)|0,P=P+Math.imul(oe,yn)|0,T=T+Math.imul(ft,xt)|0,E=E+Math.imul(ft,Tn)|0,E=E+Math.imul(mt,xt)|0,P=P+Math.imul(mt,Tn)|0,T=T+Math.imul(De,hn)|0,E=E+Math.imul(De,Or)|0,E=E+Math.imul(qe,hn)|0,P=P+Math.imul(qe,Or)|0;var ka=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(ka>>>26)|0,ka&=67108863,T=Math.imul(at,Ct),E=Math.imul(at,In),E=E+Math.imul(It,Ct)|0,P=Math.imul(It,In),T=T+Math.imul(nt,kt)|0,E=E+Math.imul(nt,Ht)|0,E=E+Math.imul(yt,kt)|0,P=P+Math.imul(yt,Ht)|0,T=T+Math.imul(ce,ct)|0,E=E+Math.imul(ce,yn)|0,E=E+Math.imul(ae,ct)|0,P=P+Math.imul(ae,yn)|0,T=T+Math.imul(de,xt)|0,E=E+Math.imul(de,Tn)|0,E=E+Math.imul(oe,xt)|0,P=P+Math.imul(oe,Tn)|0,T=T+Math.imul(ft,hn)|0,E=E+Math.imul(ft,Or)|0,E=E+Math.imul(mt,hn)|0,P=P+Math.imul(mt,Or)|0;var dc=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(dc>>>26)|0,dc&=67108863,T=Math.imul(at,kt),E=Math.imul(at,Ht),E=E+Math.imul(It,kt)|0,P=Math.imul(It,Ht),T=T+Math.imul(nt,ct)|0,E=E+Math.imul(nt,yn)|0,E=E+Math.imul(yt,ct)|0,P=P+Math.imul(yt,yn)|0,T=T+Math.imul(ce,xt)|0,E=E+Math.imul(ce,Tn)|0,E=E+Math.imul(ae,xt)|0,P=P+Math.imul(ae,Tn)|0,T=T+Math.imul(de,hn)|0,E=E+Math.imul(de,Or)|0,E=E+Math.imul(oe,hn)|0,P=P+Math.imul(oe,Or)|0;var ni=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(ni>>>26)|0,ni&=67108863,T=Math.imul(at,ct),E=Math.imul(at,yn),E=E+Math.imul(It,ct)|0,P=Math.imul(It,yn),T=T+Math.imul(nt,xt)|0,E=E+Math.imul(nt,Tn)|0,E=E+Math.imul(yt,xt)|0,P=P+Math.imul(yt,Tn)|0,T=T+Math.imul(ce,hn)|0,E=E+Math.imul(ce,Or)|0,E=E+Math.imul(ae,hn)|0,P=P+Math.imul(ae,Or)|0;var Dl=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(Dl>>>26)|0,Dl&=67108863,T=Math.imul(at,xt),E=Math.imul(at,Tn),E=E+Math.imul(It,xt)|0,P=Math.imul(It,Tn),T=T+Math.imul(nt,hn)|0,E=E+Math.imul(nt,Or)|0,E=E+Math.imul(yt,hn)|0,P=P+Math.imul(yt,Or)|0;var Ll=(C+T|0)+((E&8191)<<13)|0;C=(P+(E>>>13)|0)+(Ll>>>26)|0,Ll&=67108863,T=Math.imul(at,hn),E=Math.imul(at,Or),E=E+Math.imul(It,hn)|0,P=Math.imul(It,Or);var Ul=(C+T|0)+((E&8191)<<13)|0;return C=(P+(E>>>13)|0)+(Ul>>>26)|0,Ul&=67108863,L[0]=qn,L[1]=Dr,L[2]=ca,L[3]=la,L[4]=ua,L[5]=Na,L[6]=Js,L[7]=Ro,L[8]=_o,L[9]=Bo,L[10]=to,L[11]=Ml,L[12]=fa,L[13]=ka,L[14]=dc,L[15]=ni,L[16]=Dl,L[17]=Ll,L[18]=Ul,C!==0&&(L[19]=C,b.length++),b};Math.imul||(m=g);function v(G,R,k){k.negative=R.negative^G.negative,k.length=G.length+R.length;for(var b=0,w=0,N=0;N<k.length-1;N++){var L=w;w=0;for(var C=b&67108863,T=Math.min(N,R.length-1),E=Math.max(0,N-G.length+1);E<=T;E++){var P=N-E,_=G.words[P]|0,H=R.words[E]|0,ne=_*H,$=ne&67108863;L=L+(ne/67108864|0)|0,$=$+C|0,C=$&67108863,L=L+($>>>26)|0,w+=L>>>26,L&=67108863}k.words[N]=C,b=L,L=w}return b!==0?k.words[N]=b:k.length--,k.strip()}function A(G,R,k){var b=new S;return b.mulp(G,R,k)}i.prototype.mulTo=function(R,k){var b,w=this.length+R.length;return this.length===10&&R.length===10?b=m(this,R,k):w<63?b=g(this,R,k):w<1024?b=v(this,R,k):b=A(this,R,k),b};function S(G,R){this.x=G,this.y=R}S.prototype.makeRBT=function(R){for(var k=new Array(R),b=i.prototype._countBits(R)-1,w=0;w<R;w++)k[w]=this.revBin(w,b,R);return k},S.prototype.revBin=function(R,k,b){if(R===0||R===b-1)return R;for(var w=0,N=0;N<k;N++)w|=(R&1)<<k-N-1,R>>=1;return w},S.prototype.permute=function(R,k,b,w,N,L){for(var C=0;C<L;C++)w[C]=k[R[C]],N[C]=b[R[C]]},S.prototype.transform=function(R,k,b,w,N,L){this.permute(L,R,k,b,w,N);for(var C=1;C<N;C<<=1)for(var T=C<<1,E=Math.cos(2*Math.PI/T),P=Math.sin(2*Math.PI/T),_=0;_<N;_+=T)for(var H=E,ne=P,$=0;$<C;$++){var te=b[_+$],J=w[_+$],ee=b[_+$+C],X=w[_+$+C],j=H*ee-ne*X;X=H*X+ne*ee,ee=j,b[_+$]=te+ee,w[_+$]=J+X,b[_+$+C]=te-ee,w[_+$+C]=J-X,$!==T&&(j=E*H-P*ne,ne=E*ne+P*H,H=j)}},S.prototype.guessLen13b=function(R,k){var b=Math.max(k,R)|1,w=b&1,N=0;for(b=b/2|0;b;b=b>>>1)N++;return 1<<N+1+w},S.prototype.conjugate=function(R,k,b){if(!(b<=1))for(var w=0;w<b/2;w++){var N=R[w];R[w]=R[b-w-1],R[b-w-1]=N,N=k[w],k[w]=-k[b-w-1],k[b-w-1]=-N}},S.prototype.normalize13b=function(R,k){for(var b=0,w=0;w<k/2;w++){var N=Math.round(R[2*w+1]/k)*8192+Math.round(R[2*w]/k)+b;R[w]=N&67108863,N<67108864?b=0:b=N/67108864|0}return R},S.prototype.convert13b=function(R,k,b,w){for(var N=0,L=0;L<k;L++)N=N+(R[L]|0),b[2*L]=N&8191,N=N>>>13,b[2*L+1]=N&8191,N=N>>>13;for(L=2*k;L<w;++L)b[L]=0;r(N===0),r((N&-8192)===0)},S.prototype.stub=function(R){for(var k=new Array(R),b=0;b<R;b++)k[b]=0;return k},S.prototype.mulp=function(R,k,b){var w=2*this.guessLen13b(R.length,k.length),N=this.makeRBT(w),L=this.stub(w),C=new Array(w),T=new Array(w),E=new Array(w),P=new Array(w),_=new Array(w),H=new Array(w),ne=b.words;ne.length=w,this.convert13b(R.words,R.length,C,w),this.convert13b(k.words,k.length,P,w),this.transform(C,L,T,E,w,N),this.transform(P,L,_,H,w,N);for(var $=0;$<w;$++){var te=T[$]*_[$]-E[$]*H[$];E[$]=T[$]*H[$]+E[$]*_[$],T[$]=te}return this.conjugate(T,E,w),this.transform(T,E,ne,L,w,N),this.conjugate(ne,L,w),this.normalize13b(ne,w),b.negative=R.negative^k.negative,b.length=R.length+k.length,b.strip()},i.prototype.mul=function(R){var k=new i(null);return k.words=new Array(this.length+R.length),this.mulTo(R,k)},i.prototype.mulf=function(R){var k=new i(null);return k.words=new Array(this.length+R.length),A(this,R,k)},i.prototype.imul=function(R){return this.clone().mulTo(R,this)},i.prototype.imuln=function(R){r(typeof R=="number"),r(R<67108864);for(var k=0,b=0;b<this.length;b++){var w=(this.words[b]|0)*R,N=(w&67108863)+(k&67108863);k>>=26,k+=w/67108864|0,k+=N>>>26,this.words[b]=N&67108863}return k!==0&&(this.words[b]=k,this.length++),this.length=R===0?1:this.length,this},i.prototype.muln=function(R){return this.clone().imuln(R)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(R){var k=p(R);if(k.length===0)return new i(1);for(var b=this,w=0;w<k.length&&k[w]===0;w++,b=b.sqr());if(++w<k.length)for(var N=b.sqr();w<k.length;w++,N=N.sqr())k[w]!==0&&(b=b.mul(N));return b},i.prototype.iushln=function(R){r(typeof R=="number"&&R>=0);var k=R%26,b=(R-k)/26,w=67108863>>>26-k<<26-k,N;if(k!==0){var L=0;for(N=0;N<this.length;N++){var C=this.words[N]&w,T=(this.words[N]|0)-C<<k;this.words[N]=T|L,L=C>>>26-k}L&&(this.words[N]=L,this.length++)}if(b!==0){for(N=this.length-1;N>=0;N--)this.words[N+b]=this.words[N];for(N=0;N<b;N++)this.words[N]=0;this.length+=b}return this.strip()},i.prototype.ishln=function(R){return r(this.negative===0),this.iushln(R)},i.prototype.iushrn=function(R,k,b){r(typeof R=="number"&&R>=0);var w;k?w=(k-k%26)/26:w=0;var N=R%26,L=Math.min((R-N)/26,this.length),C=67108863^67108863>>>N<<N,T=b;if(w-=L,w=Math.max(0,w),T){for(var E=0;E<L;E++)T.words[E]=this.words[E];T.length=L}if(L!==0)if(this.length>L)for(this.length-=L,E=0;E<this.length;E++)this.words[E]=this.words[E+L];else this.words[0]=0,this.length=1;var P=0;for(E=this.length-1;E>=0&&(P!==0||E>=w);E--){var _=this.words[E]|0;this.words[E]=P<<26-N|_>>>N,P=_&C}return T&&P!==0&&(T.words[T.length++]=P),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(R,k,b){return r(this.negative===0),this.iushrn(R,k,b)},i.prototype.shln=function(R){return this.clone().ishln(R)},i.prototype.ushln=function(R){return this.clone().iushln(R)},i.prototype.shrn=function(R){return this.clone().ishrn(R)},i.prototype.ushrn=function(R){return this.clone().iushrn(R)},i.prototype.testn=function(R){r(typeof R=="number"&&R>=0);var k=R%26,b=(R-k)/26,w=1<<k;if(this.length<=b)return!1;var N=this.words[b];return!!(N&w)},i.prototype.imaskn=function(R){r(typeof R=="number"&&R>=0);var k=R%26,b=(R-k)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(k!==0&&b++,this.length=Math.min(b,this.length),k!==0){var w=67108863^67108863>>>k<<k;this.words[this.length-1]&=w}return this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.maskn=function(R){return this.clone().imaskn(R)},i.prototype.iaddn=function(R){return r(typeof R=="number"),r(R<67108864),R<0?this.isubn(-R):this.negative!==0?this.length===1&&(this.words[0]|0)<R?(this.words[0]=R-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},i.prototype._iaddn=function(R){this.words[0]+=R;for(var k=0;k<this.length&&this.words[k]>=67108864;k++)this.words[k]-=67108864,k===this.length-1?this.words[k+1]=1:this.words[k+1]++;return this.length=Math.max(this.length,k+1),this},i.prototype.isubn=function(R){if(r(typeof R=="number"),r(R<67108864),R<0)return this.iaddn(-R);if(this.negative!==0)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var k=0;k<this.length&&this.words[k]<0;k++)this.words[k]+=67108864,this.words[k+1]-=1;return this.strip()},i.prototype.addn=function(R){return this.clone().iaddn(R)},i.prototype.subn=function(R){return this.clone().isubn(R)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(R,k,b){var w=R.length+b,N;this._expand(w);var L,C=0;for(N=0;N<R.length;N++){L=(this.words[N+b]|0)+C;var T=(R.words[N]|0)*k;L-=T&67108863,C=(L>>26)-(T/67108864|0),this.words[N+b]=L&67108863}for(;N<this.length-b;N++)L=(this.words[N+b]|0)+C,C=L>>26,this.words[N+b]=L&67108863;if(C===0)return this.strip();for(r(C===-1),C=0,N=0;N<this.length;N++)L=-(this.words[N]|0)+C,C=L>>26,this.words[N]=L&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(R,k){var b=this.length-R.length,w=this.clone(),N=R,L=N.words[N.length-1]|0,C=this._countBits(L);b=26-C,b!==0&&(N=N.ushln(b),w.iushln(b),L=N.words[N.length-1]|0);var T=w.length-N.length,E;if(k!=="mod"){E=new i(null),E.length=T+1,E.words=new Array(E.length);for(var P=0;P<E.length;P++)E.words[P]=0}var _=w.clone()._ishlnsubmul(N,1,T);_.negative===0&&(w=_,E&&(E.words[T]=1));for(var H=T-1;H>=0;H--){var ne=(w.words[N.length+H]|0)*67108864+(w.words[N.length+H-1]|0);for(ne=Math.min(ne/L|0,67108863),w._ishlnsubmul(N,ne,H);w.negative!==0;)ne--,w.negative=0,w._ishlnsubmul(N,1,H),w.isZero()||(w.negative^=1);E&&(E.words[H]=ne)}return E&&E.strip(),w.strip(),k!=="div"&&b!==0&&w.iushrn(b),{div:E||null,mod:w}},i.prototype.divmod=function(R,k,b){if(r(!R.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var w,N,L;return this.negative!==0&&R.negative===0?(L=this.neg().divmod(R,k),k!=="mod"&&(w=L.div.neg()),k!=="div"&&(N=L.mod.neg(),b&&N.negative!==0&&N.iadd(R)),{div:w,mod:N}):this.negative===0&&R.negative!==0?(L=this.divmod(R.neg(),k),k!=="mod"&&(w=L.div.neg()),{div:w,mod:L.mod}):this.negative&R.negative?(L=this.neg().divmod(R.neg(),k),k!=="div"&&(N=L.mod.neg(),b&&N.negative!==0&&N.isub(R)),{div:L.div,mod:N}):R.length>this.length||this.cmp(R)<0?{div:new i(0),mod:this}:R.length===1?k==="div"?{div:this.divn(R.words[0]),mod:null}:k==="mod"?{div:null,mod:new i(this.modn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new i(this.modn(R.words[0]))}:this._wordDiv(R,k)},i.prototype.div=function(R){return this.divmod(R,"div",!1).div},i.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},i.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},i.prototype.divRound=function(R){var k=this.divmod(R);if(k.mod.isZero())return k.div;var b=k.div.negative!==0?k.mod.isub(R):k.mod,w=R.ushrn(1),N=R.andln(1),L=b.cmp(w);return L<0||N===1&&L===0?k.div:k.div.negative!==0?k.div.isubn(1):k.div.iaddn(1)},i.prototype.modn=function(R){r(R<=67108863);for(var k=(1<<26)%R,b=0,w=this.length-1;w>=0;w--)b=(k*b+(this.words[w]|0))%R;return b},i.prototype.idivn=function(R){r(R<=67108863);for(var k=0,b=this.length-1;b>=0;b--){var w=(this.words[b]|0)+k*67108864;this.words[b]=w/R|0,k=w%R}return this.strip()},i.prototype.divn=function(R){return this.clone().idivn(R)},i.prototype.egcd=function(R){r(R.negative===0),r(!R.isZero());var k=this,b=R.clone();k.negative!==0?k=k.umod(R):k=k.clone();for(var w=new i(1),N=new i(0),L=new i(0),C=new i(1),T=0;k.isEven()&&b.isEven();)k.iushrn(1),b.iushrn(1),++T;for(var E=b.clone(),P=k.clone();!k.isZero();){for(var _=0,H=1;!(k.words[0]&H)&&_<26;++_,H<<=1);if(_>0)for(k.iushrn(_);_-- >0;)(w.isOdd()||N.isOdd())&&(w.iadd(E),N.isub(P)),w.iushrn(1),N.iushrn(1);for(var ne=0,$=1;!(b.words[0]&$)&&ne<26;++ne,$<<=1);if(ne>0)for(b.iushrn(ne);ne-- >0;)(L.isOdd()||C.isOdd())&&(L.iadd(E),C.isub(P)),L.iushrn(1),C.iushrn(1);k.cmp(b)>=0?(k.isub(b),w.isub(L),N.isub(C)):(b.isub(k),L.isub(w),C.isub(N))}return{a:L,b:C,gcd:b.iushln(T)}},i.prototype._invmp=function(R){r(R.negative===0),r(!R.isZero());var k=this,b=R.clone();k.negative!==0?k=k.umod(R):k=k.clone();for(var w=new i(1),N=new i(0),L=b.clone();k.cmpn(1)>0&&b.cmpn(1)>0;){for(var C=0,T=1;!(k.words[0]&T)&&C<26;++C,T<<=1);if(C>0)for(k.iushrn(C);C-- >0;)w.isOdd()&&w.iadd(L),w.iushrn(1);for(var E=0,P=1;!(b.words[0]&P)&&E<26;++E,P<<=1);if(E>0)for(b.iushrn(E);E-- >0;)N.isOdd()&&N.iadd(L),N.iushrn(1);k.cmp(b)>=0?(k.isub(b),w.isub(N)):(b.isub(k),N.isub(w))}var _;return k.cmpn(1)===0?_=w:_=N,_.cmpn(0)<0&&_.iadd(R),_},i.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var k=this.clone(),b=R.clone();k.negative=0,b.negative=0;for(var w=0;k.isEven()&&b.isEven();w++)k.iushrn(1),b.iushrn(1);do{for(;k.isEven();)k.iushrn(1);for(;b.isEven();)b.iushrn(1);var N=k.cmp(b);if(N<0){var L=k;k=b,b=L}else if(N===0||b.cmpn(1)===0)break;k.isub(b)}while(!0);return b.iushln(w)},i.prototype.invm=function(R){return this.egcd(R).a.umod(R)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(R){return this.words[0]&R},i.prototype.bincn=function(R){r(typeof R=="number");var k=R%26,b=(R-k)/26,w=1<<k;if(this.length<=b)return this._expand(b+1),this.words[b]|=w,this;for(var N=w,L=b;N!==0&&L<this.length;L++){var C=this.words[L]|0;C+=N,N=C>>>26,C&=67108863,this.words[L]=C}return N!==0&&(this.words[L]=N,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(R){var k=R<0;if(this.negative!==0&&!k)return-1;if(this.negative===0&&k)return 1;this.strip();var b;if(this.length>1)b=1;else{k&&(R=-R),r(R<=67108863,"Number is too big");var w=this.words[0]|0;b=w===R?0:w<R?-1:1}return this.negative!==0?-b|0:b},i.prototype.cmp=function(R){if(this.negative!==0&&R.negative===0)return-1;if(this.negative===0&&R.negative!==0)return 1;var k=this.ucmp(R);return this.negative!==0?-k|0:k},i.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var k=0,b=this.length-1;b>=0;b--){var w=this.words[b]|0,N=R.words[b]|0;if(w!==N){w<N?k=-1:w>N&&(k=1);break}}return k},i.prototype.gtn=function(R){return this.cmpn(R)===1},i.prototype.gt=function(R){return this.cmp(R)===1},i.prototype.gten=function(R){return this.cmpn(R)>=0},i.prototype.gte=function(R){return this.cmp(R)>=0},i.prototype.ltn=function(R){return this.cmpn(R)===-1},i.prototype.lt=function(R){return this.cmp(R)===-1},i.prototype.lten=function(R){return this.cmpn(R)<=0},i.prototype.lte=function(R){return this.cmp(R)<=0},i.prototype.eqn=function(R){return this.cmpn(R)===0},i.prototype.eq=function(R){return this.cmp(R)===0},i.red=function(R){return new Q(R)},i.prototype.toRed=function(R){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),R.convertTo(this)._forceRed(R)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(R){return this.red=R,this},i.prototype.forceRed=function(R){return r(!this.red,"Already a number in reduction context"),this._forceRed(R)},i.prototype.redAdd=function(R){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},i.prototype.redIAdd=function(R){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},i.prototype.redSub=function(R){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},i.prototype.redISub=function(R){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},i.prototype.redShl=function(R){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},i.prototype.redMul=function(R){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},i.prototype.redIMul=function(R){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(R){return r(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var I={k256:null,p224:null,p192:null,p25519:null};function B(G,R){this.name=G,this.p=new i(R,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}B.prototype._tmp=function(){var R=new i(null);return R.words=new Array(Math.ceil(this.n/13)),R},B.prototype.ireduce=function(R){var k=R,b;do this.split(k,this.tmp),k=this.imulK(k),k=k.iadd(this.tmp),b=k.bitLength();while(b>this.n);var w=b<this.n?-1:k.ucmp(this.p);return w===0?(k.words[0]=0,k.length=1):w>0?k.isub(this.p):k.strip!==void 0?k.strip():k._strip(),k},B.prototype.split=function(R,k){R.iushrn(this.n,0,k)},B.prototype.imulK=function(R){return R.imul(this.k)};function D(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(D,B),D.prototype.split=function(R,k){for(var b=4194303,w=Math.min(R.length,9),N=0;N<w;N++)k.words[N]=R.words[N];if(k.length=w,R.length<=9){R.words[0]=0,R.length=1;return}var L=R.words[9];for(k.words[k.length++]=L&b,N=10;N<R.length;N++){var C=R.words[N]|0;R.words[N-10]=(C&b)<<4|L>>>22,L=C}L>>>=22,R.words[N-10]=L,L===0&&R.length>10?R.length-=10:R.length-=9},D.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var k=0,b=0;b<R.length;b++){var w=R.words[b]|0;k+=w*977,R.words[b]=k&67108863,k=w*64+(k/67108864|0)}return R.words[R.length-1]===0&&(R.length--,R.words[R.length-1]===0&&R.length--),R};function V(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(V,B);function O(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(O,B);function U(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(U,B),U.prototype.imulK=function(R){for(var k=0,b=0;b<R.length;b++){var w=(R.words[b]|0)*19+k,N=w&67108863;w>>>=26,R.words[b]=N,k=w}return k!==0&&(R.words[R.length++]=k),R},i._prime=function(R){if(I[R])return I[R];var k;if(R==="k256")k=new D;else if(R==="p224")k=new V;else if(R==="p192")k=new O;else if(R==="p25519")k=new U;else throw new Error("Unknown prime "+R);return I[R]=k,k};function Q(G){if(typeof G=="string"){var R=i._prime(G);this.m=R.p,this.prime=R}else r(G.gtn(1),"modulus must be greater than 1"),this.m=G,this.prime=null}Q.prototype._verify1=function(R){r(R.negative===0,"red works only with positives"),r(R.red,"red works only with red numbers")},Q.prototype._verify2=function(R,k){r((R.negative|k.negative)===0,"red works only with positives"),r(R.red&&R.red===k.red,"red works only with red numbers")},Q.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):R.umod(this.m)._forceRed(this)},Q.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},Q.prototype.add=function(R,k){this._verify2(R,k);var b=R.add(k);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},Q.prototype.iadd=function(R,k){this._verify2(R,k);var b=R.iadd(k);return b.cmp(this.m)>=0&&b.isub(this.m),b},Q.prototype.sub=function(R,k){this._verify2(R,k);var b=R.sub(k);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},Q.prototype.isub=function(R,k){this._verify2(R,k);var b=R.isub(k);return b.cmpn(0)<0&&b.iadd(this.m),b},Q.prototype.shl=function(R,k){return this._verify1(R),this.imod(R.ushln(k))},Q.prototype.imul=function(R,k){return this._verify2(R,k),this.imod(R.imul(k))},Q.prototype.mul=function(R,k){return this._verify2(R,k),this.imod(R.mul(k))},Q.prototype.isqr=function(R){return this.imul(R,R.clone())},Q.prototype.sqr=function(R){return this.mul(R,R)},Q.prototype.sqrt=function(R){if(R.isZero())return R.clone();var k=this.m.andln(3);if(r(k%2===1),k===3){var b=this.m.add(new i(1)).iushrn(2);return this.pow(R,b)}for(var w=this.m.subn(1),N=0;!w.isZero()&&w.andln(1)===0;)N++,w.iushrn(1);r(!w.isZero());var L=new i(1).toRed(this),C=L.redNeg(),T=this.m.subn(1).iushrn(1),E=this.m.bitLength();for(E=new i(2*E*E).toRed(this);this.pow(E,T).cmp(C)!==0;)E.redIAdd(C);for(var P=this.pow(E,w),_=this.pow(R,w.addn(1).iushrn(1)),H=this.pow(R,w),ne=N;H.cmp(L)!==0;){for(var $=H,te=0;$.cmp(L)!==0;te++)$=$.redSqr();r(te<ne);var J=this.pow(P,new i(1).iushln(ne-te-1));_=_.redMul(J),P=J.redSqr(),H=H.redMul(P),ne=te}return _},Q.prototype.invm=function(R){var k=R._invmp(this.m);return k.negative!==0?(k.negative=0,this.imod(k).redNeg()):this.imod(k)},Q.prototype.pow=function(R,k){if(k.isZero())return new i(1).toRed(this);if(k.cmpn(1)===0)return R.clone();var b=4,w=new Array(1<<b);w[0]=new i(1).toRed(this),w[1]=R;for(var N=2;N<w.length;N++)w[N]=this.mul(w[N-1],R);var L=w[0],C=0,T=0,E=k.bitLength()%26;for(E===0&&(E=26),N=k.length-1;N>=0;N--){for(var P=k.words[N],_=E-1;_>=0;_--){var H=P>>_&1;if(L!==w[0]&&(L=this.sqr(L)),H===0&&C===0){T=0;continue}C<<=1,C|=H,T++,!(T!==b&&(N!==0||_!==0))&&(L=this.mul(L,w[C]),T=0,C=0)}E=26}return L},Q.prototype.convertTo=function(R){var k=R.umod(this.m);return k===R?k.clone():k},Q.prototype.convertFrom=function(R){var k=R.clone();return k.red=null,k},i.mont=function(R){return new ie(R)};function ie(G){Q.call(this,G),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(ie,Q),ie.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},ie.prototype.convertFrom=function(R){var k=this.imod(R.mul(this.rinv));return k.red=null,k},ie.prototype.imul=function(R,k){if(R.isZero()||k.isZero())return R.words[0]=0,R.length=1,R;var b=R.imul(k),w=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=b.isub(w).iushrn(this.shift),L=N;return N.cmp(this.m)>=0?L=N.isub(this.m):N.cmpn(0)<0&&(L=N.iadd(this.m)),L._forceRed(this)},ie.prototype.mul=function(R,k){if(R.isZero()||k.isZero())return new i(0)._forceRed(this);var b=R.mul(k),w=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=b.isub(w).iushrn(this.shift),L=N;return N.cmp(this.m)>=0?L=N.isub(this.m):N.cmpn(0)<0&&(L=N.iadd(this.m)),L._forceRed(this)},ie.prototype.invm=function(R){var k=this.imod(R._invmp(this.m).mul(this.r2));return k._forceRed(this)}})(t,cs)})(ine);var um=ine.exports,ane={};(function(t){var e=t;function n(i,a){if(Array.isArray(i))return i.slice();if(!i)return[];var o=[];if(typeof i!="string"){for(var c=0;c<i.length;c++)o[c]=i[c]|0;return o}if(a==="hex"){i=i.replace(/[^a-z0-9]+/ig,""),i.length%2!==0&&(i="0"+i);for(var c=0;c<i.length;c+=2)o.push(parseInt(i[c]+i[c+1],16))}else for(var c=0;c<i.length;c++){var l=i.charCodeAt(c),u=l>>8,f=l&255;u?o.push(u,f):o.push(f)}return o}e.toArray=n;function r(i){return i.length===1?"0"+i:i}e.zero2=r;function s(i){for(var a="",o=0;o<i.length;o++)a+=r(i[o].toString(16));return a}e.toHex=s,e.encode=function(a,o){return o==="hex"?s(a):a}})(ane);(function(t){var e=t,n=um,r=Z2,s=ane;e.assert=r,e.toArray=s.toArray,e.zero2=s.zero2,e.toHex=s.toHex,e.encode=s.encode;function i(u,f,d){var p=new Array(Math.max(u.bitLength(),d)+1),g;for(g=0;g<p.length;g+=1)p[g]=0;var m=1<<f+1,v=u.clone();for(g=0;g<p.length;g++){var A,S=v.andln(m-1);v.isOdd()?(S>(m>>1)-1?A=(m>>1)-S:A=S,v.isubn(A)):A=0,p[g]=A,v.iushrn(1)}return p}e.getNAF=i;function a(u,f){var d=[[],[]];u=u.clone(),f=f.clone();for(var p=0,g=0,m;u.cmpn(-p)>0||f.cmpn(-g)>0;){var v=u.andln(3)+p&3,A=f.andln(3)+g&3;v===3&&(v=-1),A===3&&(A=-1);var S;v&1?(m=u.andln(7)+p&7,(m===3||m===5)&&A===2?S=-v:S=v):S=0,d[0].push(S);var I;A&1?(m=f.andln(7)+g&7,(m===3||m===5)&&v===2?I=-A:I=A):I=0,d[1].push(I),2*p===S+1&&(p=1-p),2*g===I+1&&(g=1-g),u.iushrn(1),f.iushrn(1)}return d}e.getJSF=a;function o(u,f,d){var p="_"+f;u.prototype[f]=function(){return this[p]!==void 0?this[p]:this[p]=d.call(this)}}e.cachedProperty=o;function c(u){return typeof u=="string"?e.toArray(u,"hex"):u}e.parseBytes=c;function l(u){return new n(u,"hex","le")}e.intFromLE=l})(Lu);var one={exports:{}},Dq;one.exports=function(e){return Dq||(Dq=new _w(null)),Dq.generate(e)};function _w(t){this.rand=t}one.exports.Rand=_w;_w.prototype.generate=function(e){return this._rand(e)};_w.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var n=new Uint8Array(e),r=0;r<n.length;r++)n[r]=this.rand.getByte();return n};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?_w.prototype._rand=function(e){var n=new Uint8Array(e);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?_w.prototype._rand=function(e){var n=new Uint8Array(e);return self.msCrypto.getRandomValues(n),n}:typeof window=="object"&&(_w.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var jde=hF;if(typeof jde.randomBytes!="function")throw new Error("Not supported");_w.prototype._rand=function(e){return jde.randomBytes(e)}}catch{}var $Ce=one.exports,cne={},g1=um,p9=Lu,dD=p9.getNAF,rSt=p9.getJSF,hD=p9.assert;function $b(t,e){this.type=t,this.p=new g1(e.p,16),this.red=e.prime?g1.red(e.prime):g1.mont(this.p),this.zero=new g1(0).toRed(this.red),this.one=new g1(1).toRed(this.red),this.two=new g1(2).toRed(this.red),this.n=e.n&&new g1(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var AF=$b;$b.prototype.point=function(){throw new Error("Not implemented")};$b.prototype.validate=function(){throw new Error("Not implemented")};$b.prototype._fixedNafMul=function(e,n){hD(e.precomputed);var r=e._getDoubles(),s=dD(n,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var a=[],o,c;for(o=0;o<s.length;o+=r.step){c=0;for(var l=o+r.step-1;l>=o;l--)c=(c<<1)+s[l];a.push(c)}for(var u=this.jpoint(null,null,null),f=this.jpoint(null,null,null),d=i;d>0;d--){for(o=0;o<a.length;o++)c=a[o],c===d?f=f.mixedAdd(r.points[o]):c===-d&&(f=f.mixedAdd(r.points[o].neg()));u=u.add(f)}return u.toP()};$b.prototype._wnafMul=function(e,n){var r=4,s=e._getNAFPoints(r);r=s.wnd;for(var i=s.points,a=dD(n,r,this._bitLength),o=this.jpoint(null,null,null),c=a.length-1;c>=0;c--){for(var l=0;c>=0&&a[c]===0;c--)l++;if(c>=0&&l++,o=o.dblp(l),c<0)break;var u=a[c];hD(u!==0),e.type==="affine"?u>0?o=o.mixedAdd(i[u-1>>1]):o=o.mixedAdd(i[-u-1>>1].neg()):u>0?o=o.add(i[u-1>>1]):o=o.add(i[-u-1>>1].neg())}return e.type==="affine"?o.toP():o};$b.prototype._wnafMulAdd=function(e,n,r,s,i){var a=this._wnafT1,o=this._wnafT2,c=this._wnafT3,l=0,u,f,d;for(u=0;u<s;u++){d=n[u];var p=d._getNAFPoints(e);a[u]=p.wnd,o[u]=p.points}for(u=s-1;u>=1;u-=2){var g=u-1,m=u;if(a[g]!==1||a[m]!==1){c[g]=dD(r[g],a[g],this._bitLength),c[m]=dD(r[m],a[m],this._bitLength),l=Math.max(c[g].length,l),l=Math.max(c[m].length,l);continue}var v=[n[g],null,null,n[m]];n[g].y.cmp(n[m].y)===0?(v[1]=n[g].add(n[m]),v[2]=n[g].toJ().mixedAdd(n[m].neg())):n[g].y.cmp(n[m].y.redNeg())===0?(v[1]=n[g].toJ().mixedAdd(n[m]),v[2]=n[g].add(n[m].neg())):(v[1]=n[g].toJ().mixedAdd(n[m]),v[2]=n[g].toJ().mixedAdd(n[m].neg()));var A=[-3,-1,-5,-7,0,7,5,1,3],S=rSt(r[g],r[m]);for(l=Math.max(S[0].length,l),c[g]=new Array(l),c[m]=new Array(l),f=0;f<l;f++){var I=S[0][f]|0,B=S[1][f]|0;c[g][f]=A[(I+1)*3+(B+1)],c[m][f]=0,o[g]=v}}var D=this.jpoint(null,null,null),V=this._wnafT4;for(u=l;u>=0;u--){for(var O=0;u>=0;){var U=!0;for(f=0;f<s;f++)V[f]=c[f][u]|0,V[f]!==0&&(U=!1);if(!U)break;O++,u--}if(u>=0&&O++,D=D.dblp(O),u<0)break;for(f=0;f<s;f++){var Q=V[f];Q!==0&&(Q>0?d=o[f][Q-1>>1]:Q<0&&(d=o[f][-Q-1>>1].neg()),d.type==="affine"?D=D.mixedAdd(d):D=D.add(d))}}for(u=0;u<s;u++)o[u]=null;return i?D:D.toP()};function zf(t,e){this.curve=t,this.type=e,this.precomputed=null}$b.BasePoint=zf;zf.prototype.eq=function(){throw new Error("Not implemented")};zf.prototype.validate=function(){return this.curve.validate(this)};$b.prototype.decodePoint=function(e,n){e=p9.toArray(e,n);var r=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*r){e[0]===6?hD(e[e.length-1]%2===0):e[0]===7&&hD(e[e.length-1]%2===1);var s=this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));return s}else if((e[0]===2||e[0]===3)&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),e[0]===3);throw new Error("Unknown point format")};zf.prototype.encodeCompressed=function(e){return this.encode(e,!0)};zf.prototype._encode=function(e){var n=this.curve.p.byteLength(),r=this.getX().toArray("be",n);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",n))};zf.prototype.encode=function(e,n){return p9.encode(this._encode(n),e)};zf.prototype.precompute=function(e){if(this.precomputed)return this;var n={doubles:null,naf:null,beta:null};return n.naf=this._getNAFPoints(8),n.doubles=this._getDoubles(4,e),n.beta=this._getBeta(),this.precomputed=n,this};zf.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var n=this.precomputed.doubles;return n?n.points.length>=Math.ceil((e.bitLength()+1)/n.step):!1};zf.prototype._getDoubles=function(e,n){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],s=this,i=0;i<n;i+=e){for(var a=0;a<e;a++)s=s.dbl();r.push(s)}return{step:e,points:r}};zf.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var n=[this],r=(1<<e)-1,s=r===1?null:this.dbl(),i=1;i<r;i++)n[i]=n[i-1].add(s);return{wnd:e,points:n}};zf.prototype._getBeta=function(){return null};zf.prototype.dblp=function(e){for(var n=this,r=0;r<e;r++)n=n.dbl();return n};var sSt=Lu,Ii=um,lne=pF,B4=AF,iSt=sSt.assert;function Jf(t){B4.call(this,"short",t),this.a=new Ii(t.a,16).toRed(this.red),this.b=new Ii(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}lne(Jf,B4);var aSt=Jf;Jf.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var n,r;if(e.beta)n=new Ii(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);n=s[0].cmp(s[1])<0?s[0]:s[1],n=n.toRed(this.red)}if(e.lambda)r=new Ii(e.lambda,16);else{var i=this._getEndoRoots(this.n);this.g.mul(i[0]).x.cmp(this.g.x.redMul(n))===0?r=i[0]:(r=i[1],iSt(this.g.mul(r).x.cmp(this.g.x.redMul(n))===0))}var a;return e.basis?a=e.basis.map(function(o){return{a:new Ii(o.a,16),b:new Ii(o.b,16)}}):a=this._getEndoBasis(r),{beta:n,lambda:r,basis:a}}};Jf.prototype._getEndoRoots=function(e){var n=e===this.p?this.red:Ii.mont(e),r=new Ii(2).toRed(n).redInvm(),s=r.redNeg(),i=new Ii(3).toRed(n).redNeg().redSqrt().redMul(r),a=s.redAdd(i).fromRed(),o=s.redSub(i).fromRed();return[a,o]};Jf.prototype._getEndoBasis=function(e){for(var n=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=e,s=this.n.clone(),i=new Ii(1),a=new Ii(0),o=new Ii(0),c=new Ii(1),l,u,f,d,p,g,m,v=0,A,S;r.cmpn(0)!==0;){var I=s.div(r);A=s.sub(I.mul(r)),S=o.sub(I.mul(i));var B=c.sub(I.mul(a));if(!f&&A.cmp(n)<0)l=m.neg(),u=i,f=A.neg(),d=S;else if(f&&++v===2)break;m=A,s=r,r=A,o=i,i=S,c=a,a=B}p=A.neg(),g=S;var D=f.sqr().add(d.sqr()),V=p.sqr().add(g.sqr());return V.cmp(D)>=0&&(p=l,g=u),f.negative&&(f=f.neg(),d=d.neg()),p.negative&&(p=p.neg(),g=g.neg()),[{a:f,b:d},{a:p,b:g}]};Jf.prototype._endoSplit=function(e){var n=this.endo.basis,r=n[0],s=n[1],i=s.b.mul(e).divRound(this.n),a=r.b.neg().mul(e).divRound(this.n),o=i.mul(r.a),c=a.mul(s.a),l=i.mul(r.b),u=a.mul(s.b),f=e.sub(o).sub(c),d=l.add(u).neg();return{k1:f,k2:d}};Jf.prototype.pointFromX=function(e,n){e=new Ii(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=r.redSqrt();if(s.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var i=s.fromRed().isOdd();return(n&&!i||!n&&i)&&(s=s.redNeg()),this.point(e,s)};Jf.prototype.validate=function(e){if(e.inf)return!0;var n=e.x,r=e.y,s=this.a.redMul(n),i=n.redSqr().redMul(n).redIAdd(s).redIAdd(this.b);return r.redSqr().redISub(i).cmpn(0)===0};Jf.prototype._endoWnafMulAdd=function(e,n,r){for(var s=this._endoWnafT1,i=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(n[a]),c=e[a],l=c._getBeta();o.k1.negative&&(o.k1.ineg(),c=c.neg(!0)),o.k2.negative&&(o.k2.ineg(),l=l.neg(!0)),s[a*2]=c,s[a*2+1]=l,i[a*2]=o.k1,i[a*2+1]=o.k2}for(var u=this._wnafMulAdd(1,s,i,a*2,r),f=0;f<a*2;f++)s[f]=null,i[f]=null;return u};function eo(t,e,n,r){B4.BasePoint.call(this,t,"affine"),e===null&&n===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Ii(e,16),this.y=new Ii(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}lne(eo,B4.BasePoint);Jf.prototype.point=function(e,n,r){return new eo(this,e,n,r)};Jf.prototype.pointFromJSON=function(e,n){return eo.fromJSON(this,e,n)};eo.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,s=function(i){return r.point(i.x.redMul(r.endo.beta),i.y)};e.beta=n,n.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return n}};eo.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};eo.fromJSON=function(e,n,r){typeof n=="string"&&(n=JSON.parse(n));var s=e.point(n[0],n[1],r);if(!n[2])return s;function i(o){return e.point(o[0],o[1],r)}var a=n[2];return s.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[s].concat(a.doubles.points.map(i))},naf:a.naf&&{wnd:a.naf.wnd,points:[s].concat(a.naf.points.map(i))}},s};eo.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};eo.prototype.isInfinity=function(){return this.inf};eo.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var n=this.y.redSub(e.y);n.cmpn(0)!==0&&(n=n.redMul(this.x.redSub(e.x).redInvm()));var r=n.redSqr().redISub(this.x).redISub(e.x),s=n.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,s)};eo.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var n=this.curve.a,r=this.x.redSqr(),s=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(n).redMul(s),a=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};eo.prototype.getX=function(){return this.x.fromRed()};eo.prototype.getY=function(){return this.y.fromRed()};eo.prototype.mul=function(e){return e=new Ii(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};eo.prototype.mulAdd=function(e,n,r){var s=[this,n],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(s,i):this.curve._wnafMulAdd(1,s,i,2)};eo.prototype.jmulAdd=function(e,n,r){var s=[this,n],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(s,i,!0):this.curve._wnafMulAdd(1,s,i,2,!0)};eo.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};eo.prototype.neg=function(e){if(this.inf)return this;var n=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,s=function(i){return i.neg()};n.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(s)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(s)}}}return n};eo.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Po(t,e,n,r){B4.BasePoint.call(this,t,"jacobian"),e===null&&n===null&&r===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Ii(0)):(this.x=new Ii(e,16),this.y=new Ii(n,16),this.z=new Ii(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}lne(Po,B4.BasePoint);Jf.prototype.jpoint=function(e,n,r){return new Po(this,e,n,r)};Po.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),n=e.redSqr(),r=this.x.redMul(n),s=this.y.redMul(n).redMul(e);return this.curve.point(r,s)};Po.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Po.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var n=e.z.redSqr(),r=this.z.redSqr(),s=this.x.redMul(n),i=e.x.redMul(r),a=this.y.redMul(n.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),c=s.redSub(i),l=a.redSub(o);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),f=u.redMul(c),d=s.redMul(u),p=l.redSqr().redIAdd(f).redISub(d).redISub(d),g=l.redMul(d.redISub(p)).redISub(a.redMul(f)),m=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(p,g,m)};Po.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var n=this.z.redSqr(),r=this.x,s=e.x.redMul(n),i=this.y,a=e.y.redMul(n).redMul(this.z),o=r.redSub(s),c=i.redSub(a);if(o.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=o.redSqr(),u=l.redMul(o),f=r.redMul(l),d=c.redSqr().redIAdd(u).redISub(f).redISub(f),p=c.redMul(f.redISub(d)).redISub(i.redMul(u)),g=this.z.redMul(o);return this.curve.jpoint(d,p,g)};Po.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var n;if(this.curve.zeroA||this.curve.threeA){var r=this;for(n=0;n<e;n++)r=r.dbl();return r}var s=this.curve.a,i=this.curve.tinv,a=this.x,o=this.y,c=this.z,l=c.redSqr().redSqr(),u=o.redAdd(o);for(n=0;n<e;n++){var f=a.redSqr(),d=u.redSqr(),p=d.redSqr(),g=f.redAdd(f).redIAdd(f).redIAdd(s.redMul(l)),m=a.redMul(d),v=g.redSqr().redISub(m.redAdd(m)),A=m.redISub(v),S=g.redMul(A);S=S.redIAdd(S).redISub(p);var I=u.redMul(c);n+1<e&&(l=l.redMul(p)),a=v,c=I,u=S}return this.curve.jpoint(a,u.redMul(i),c)};Po.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Po.prototype._zeroDbl=function(){var e,n,r;if(this.zOne){var s=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(s).redISub(a);o=o.redIAdd(o);var c=s.redAdd(s).redIAdd(s),l=c.redSqr().redISub(o).redISub(o),u=a.redIAdd(a);u=u.redIAdd(u),u=u.redIAdd(u),e=l,n=c.redMul(o.redISub(l)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),d=this.y.redSqr(),p=d.redSqr(),g=this.x.redAdd(d).redSqr().redISub(f).redISub(p);g=g.redIAdd(g);var m=f.redAdd(f).redIAdd(f),v=m.redSqr(),A=p.redIAdd(p);A=A.redIAdd(A),A=A.redIAdd(A),e=v.redISub(g).redISub(g),n=m.redMul(g.redISub(e)).redISub(A),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,n,r)};Po.prototype._threeDbl=function(){var e,n,r;if(this.zOne){var s=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(s).redISub(a);o=o.redIAdd(o);var c=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),l=c.redSqr().redISub(o).redISub(o);e=l;var u=a.redIAdd(a);u=u.redIAdd(u),u=u.redIAdd(u),n=c.redMul(o.redISub(l)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),d=this.y.redSqr(),p=this.x.redMul(d),g=this.x.redSub(f).redMul(this.x.redAdd(f));g=g.redAdd(g).redIAdd(g);var m=p.redIAdd(p);m=m.redIAdd(m);var v=m.redAdd(m);e=g.redSqr().redISub(v),r=this.y.redAdd(this.z).redSqr().redISub(d).redISub(f);var A=d.redSqr();A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A),n=g.redMul(m.redISub(e)).redISub(A)}return this.curve.jpoint(e,n,r)};Po.prototype._dbl=function(){var e=this.curve.a,n=this.x,r=this.y,s=this.z,i=s.redSqr().redSqr(),a=n.redSqr(),o=r.redSqr(),c=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(i)),l=n.redAdd(n);l=l.redIAdd(l);var u=l.redMul(o),f=c.redSqr().redISub(u.redAdd(u)),d=u.redISub(f),p=o.redSqr();p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var g=c.redMul(d).redISub(p),m=r.redAdd(r).redMul(s);return this.curve.jpoint(f,g,m)};Po.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),n=this.y.redSqr(),r=this.z.redSqr(),s=n.redSqr(),i=e.redAdd(e).redIAdd(e),a=i.redSqr(),o=this.x.redAdd(n).redSqr().redISub(e).redISub(s);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(a);var c=o.redSqr(),l=s.redIAdd(s);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var u=i.redIAdd(o).redSqr().redISub(a).redISub(c).redISub(l),f=n.redMul(u);f=f.redIAdd(f),f=f.redIAdd(f);var d=this.x.redMul(c).redISub(f);d=d.redIAdd(d),d=d.redIAdd(d);var p=this.y.redMul(u.redMul(l.redISub(u)).redISub(o.redMul(c)));p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var g=this.z.redAdd(o).redSqr().redISub(r).redISub(c);return this.curve.jpoint(d,p,g)};Po.prototype.mul=function(e,n){return e=new Ii(e,n),this.curve._wnafMul(this,e)};Po.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var n=this.z.redSqr(),r=e.z.redSqr();if(this.x.redMul(r).redISub(e.x.redMul(n)).cmpn(0)!==0)return!1;var s=n.redMul(this.z),i=r.redMul(e.z);return this.y.redMul(i).redISub(e.y.redMul(s)).cmpn(0)===0};Po.prototype.eqXToP=function(e){var n=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(n);if(this.x.cmp(r)===0)return!0;for(var s=e.clone(),i=this.curve.redN.redMul(n);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};Po.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Po.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var p3=um,jCe=pF,SF=AF,oSt=Lu;function M4(t){SF.call(this,"mont",t),this.a=new p3(t.a,16).toRed(this.red),this.b=new p3(t.b,16).toRed(this.red),this.i4=new p3(4).toRed(this.red).redInvm(),this.two=new p3(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}jCe(M4,SF);var cSt=M4;M4.prototype.validate=function(e){var n=e.normalize().x,r=n.redSqr(),s=r.redMul(n).redAdd(r.redMul(this.a)).redAdd(n),i=s.redSqrt();return i.redSqr().cmp(s)===0};function Qa(t,e,n){SF.BasePoint.call(this,t,"projective"),e===null&&n===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new p3(e,16),this.z=new p3(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}jCe(Qa,SF.BasePoint);M4.prototype.decodePoint=function(e,n){return this.point(oSt.toArray(e,n),1)};M4.prototype.point=function(e,n){return new Qa(this,e,n)};M4.prototype.pointFromJSON=function(e){return Qa.fromJSON(this,e)};Qa.prototype.precompute=function(){};Qa.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Qa.fromJSON=function(e,n){return new Qa(e,n[0],n[1]||e.one)};Qa.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Qa.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Qa.prototype.dbl=function(){var e=this.x.redAdd(this.z),n=e.redSqr(),r=this.x.redSub(this.z),s=r.redSqr(),i=n.redSub(s),a=n.redMul(s),o=i.redMul(s.redAdd(this.curve.a24.redMul(i)));return this.curve.point(a,o)};Qa.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Qa.prototype.diffAdd=function(e,n){var r=this.x.redAdd(this.z),s=this.x.redSub(this.z),i=e.x.redAdd(e.z),a=e.x.redSub(e.z),o=a.redMul(r),c=i.redMul(s),l=n.z.redMul(o.redAdd(c).redSqr()),u=n.x.redMul(o.redISub(c).redSqr());return this.curve.point(l,u)};Qa.prototype.mul=function(e){for(var n=e.clone(),r=this,s=this.curve.point(null,null),i=this,a=[];n.cmpn(0)!==0;n.iushrn(1))a.push(n.andln(1));for(var o=a.length-1;o>=0;o--)a[o]===0?(r=r.diffAdd(s,i),s=s.dbl()):(s=r.diffAdd(s,i),r=r.dbl());return s};Qa.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Qa.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Qa.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Qa.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Qa.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var lSt=Lu,Tg=um,HCe=pF,IF=AF,uSt=lSt.assert;function Q0(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,IF.call(this,"edwards",t),this.a=new Tg(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Tg(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Tg(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),uSt(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}HCe(Q0,IF);var fSt=Q0;Q0.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Q0.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Q0.prototype.jpoint=function(e,n,r,s){return this.point(e,n,r,s)};Q0.prototype.pointFromX=function(e,n){e=new Tg(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr(),s=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),a=s.redMul(i.redInvm()),o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var c=o.fromRed().isOdd();return(n&&!c||!n&&c)&&(o=o.redNeg()),this.point(e,o)};Q0.prototype.pointFromY=function(e,n){e=new Tg(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr(),s=r.redSub(this.c2),i=r.redMul(this.d).redMul(this.c2).redSub(this.a),a=s.redMul(i.redInvm());if(a.cmp(this.zero)===0){if(n)throw new Error("invalid point");return this.point(this.zero,e)}var o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");return o.fromRed().isOdd()!==n&&(o=o.redNeg()),this.point(o,e)};Q0.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var n=e.x.redSqr(),r=e.y.redSqr(),s=n.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(n).redMul(r)));return s.cmp(i)===0};function Vs(t,e,n,r,s){IF.BasePoint.call(this,t,"projective"),e===null&&n===null&&r===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Tg(e,16),this.y=new Tg(n,16),this.z=r?new Tg(r,16):this.curve.one,this.t=s&&new Tg(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}HCe(Vs,IF.BasePoint);Q0.prototype.pointFromJSON=function(e){return Vs.fromJSON(this,e)};Q0.prototype.point=function(e,n,r,s){return new Vs(this,e,n,r,s)};Vs.fromJSON=function(e,n){return new Vs(e,n[0],n[1],n[2])};Vs.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Vs.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Vs.prototype._extDbl=function(){var e=this.x.redSqr(),n=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var s=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(n),a=s.redAdd(n),o=a.redSub(r),c=s.redSub(n),l=i.redMul(o),u=a.redMul(c),f=i.redMul(c),d=o.redMul(a);return this.curve.point(l,u,d,f)};Vs.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),n=this.x.redSqr(),r=this.y.redSqr(),s,i,a,o,c,l;if(this.curve.twisted){o=this.curve._mulA(n);var u=o.redAdd(r);this.zOne?(s=e.redSub(n).redSub(r).redMul(u.redSub(this.curve.two)),i=u.redMul(o.redSub(r)),a=u.redSqr().redSub(u).redSub(u)):(c=this.z.redSqr(),l=u.redSub(c).redISub(c),s=e.redSub(n).redISub(r).redMul(l),i=u.redMul(o.redSub(r)),a=u.redMul(l))}else o=n.redAdd(r),c=this.curve._mulC(this.z).redSqr(),l=o.redSub(c).redSub(c),s=this.curve._mulC(e.redISub(o)).redMul(l),i=this.curve._mulC(o).redMul(n.redISub(r)),a=o.redMul(l);return this.curve.point(s,i,a)};Vs.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Vs.prototype._extAdd=function(e){var n=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),s=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),a=r.redSub(n),o=i.redSub(s),c=i.redAdd(s),l=r.redAdd(n),u=a.redMul(o),f=c.redMul(l),d=a.redMul(l),p=o.redMul(c);return this.curve.point(u,f,p,d)};Vs.prototype._projAdd=function(e){var n=this.z.redMul(e.z),r=n.redSqr(),s=this.x.redMul(e.x),i=this.y.redMul(e.y),a=this.curve.d.redMul(s).redMul(i),o=r.redSub(a),c=r.redAdd(a),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(i),u=n.redMul(o).redMul(l),f,d;return this.curve.twisted?(f=n.redMul(c).redMul(i.redSub(this.curve._mulA(s))),d=o.redMul(c)):(f=n.redMul(c).redMul(i.redSub(s)),d=this.curve._mulC(o).redMul(c)),this.curve.point(u,f,d)};Vs.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Vs.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Vs.prototype.mulAdd=function(e,n,r){return this.curve._wnafMulAdd(1,[this,n],[e,r],2,!1)};Vs.prototype.jmulAdd=function(e,n,r){return this.curve._wnafMulAdd(1,[this,n],[e,r],2,!0)};Vs.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Vs.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Vs.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Vs.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Vs.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Vs.prototype.eqXToP=function(e){var n=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(n)===0)return!0;for(var r=e.clone(),s=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};Vs.prototype.toP=Vs.prototype.normalize;Vs.prototype.mixedAdd=Vs.prototype.add;(function(t){var e=t;e.base=AF,e.short=aSt,e.mont=cSt,e.edwards=fSt})(cne);var CF={},Lq,Hde;function dSt(){return Hde||(Hde=1,Lq={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Lq}(function(t){var e=t,n=u9,r=cne,s=Lu,i=s.assert;function a(l){l.type==="short"?this.curve=new r.short(l):l.type==="edwards"?this.curve=new r.edwards(l):this.curve=new r.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=a;function o(l,u){Object.defineProperty(e,l,{configurable:!0,enumerable:!0,get:function(){var f=new a(u);return Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:f}),f}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=dSt()}catch{c=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})})(CF);var hSt=u9,r2=ane,qCe=Z2;function vb(t){if(!(this instanceof vb))return new vb(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=r2.toArray(t.entropy,t.entropyEnc||"hex"),n=r2.toArray(t.nonce,t.nonceEnc||"hex"),r=r2.toArray(t.pers,t.persEnc||"hex");qCe(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,r)}var pSt=vb;vb.prototype._init=function(e,n,r){var s=e.concat(n).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656};vb.prototype._hmac=function(){return new hSt.hmac(this.hash,this.K)};vb.prototype._update=function(e){var n=this._hmac().update(this.V).update([0]);e&&(n=n.update(e)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};vb.prototype.reseed=function(e,n,r,s){typeof n!="string"&&(s=r,r=n,n=null),e=r2.toArray(e,n),r=r2.toArray(r,s),qCe(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1};vb.prototype.generate=function(e,n,r,s){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof n!="string"&&(s=r,r=n,n=null),r&&(r=r2.toArray(r,s||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var a=i.slice(0,e);return this._update(r),this._reseed++,r2.encode(a,n)};var gSt=um,mSt=Lu,uY=mSt.assert;function cc(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var ySt=cc;cc.fromPublic=function(e,n,r){return n instanceof cc?n:new cc(e,{pub:n,pubEnc:r})};cc.fromPrivate=function(e,n,r){return n instanceof cc?n:new cc(e,{priv:n,privEnc:r})};cc.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};cc.prototype.getPublic=function(e,n){return typeof e=="string"&&(n=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,e):this.pub};cc.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};cc.prototype._importPrivate=function(e,n){this.priv=new gSt(e,n||16),this.priv=this.priv.umod(this.ec.curve.n)};cc.prototype._importPublic=function(e,n){if(e.x||e.y){this.ec.curve.type==="mont"?uY(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&uY(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,n)};cc.prototype.derive=function(e){return e.validate()||uY(e.validate(),"public point not validated"),e.mul(this.priv).getX()};cc.prototype.sign=function(e,n,r){return this.ec.sign(e,this,n,r)};cc.prototype.verify=function(e,n,r){return this.ec.verify(e,n,this,void 0,r)};cc.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var pD=um,une=Lu,wSt=une.assert;function TF(t,e){if(t instanceof TF)return t;this._importDER(t,e)||(wSt(t.r&&t.s,"Signature without r or s"),this.r=new pD(t.r,16),this.s=new pD(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var bSt=TF;function vSt(){this.place=0}function Uq(t,e){var n=t[e.place++];if(!(n&128))return n;var r=n&15;if(r===0||r>4||t[e.place]===0)return!1;for(var s=0,i=0,a=e.place;i<r;i++,a++)s<<=8,s|=t[a],s>>>=0;return s<=127?!1:(e.place=a,s)}function qde(t){for(var e=0,n=t.length-1;!t[e]&&!(t[e+1]&128)&&e<n;)e++;return e===0?t:t.slice(e)}TF.prototype._importDER=function(e,n){e=une.toArray(e,n);var r=new vSt;if(e[r.place++]!==48)return!1;var s=Uq(e,r);if(s===!1||s+r.place!==e.length||e[r.place++]!==2)return!1;var i=Uq(e,r);if(i===!1||e[r.place]&128)return!1;var a=e.slice(r.place,i+r.place);if(r.place+=i,e[r.place++]!==2)return!1;var o=Uq(e,r);if(o===!1||e.length!==o+r.place||e[r.place]&128)return!1;var c=e.slice(r.place,o+r.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new pD(a),this.s=new pD(c),this.recoveryParam=null,!0};function Fq(t,e){if(e<128){t.push(e);return}var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(n|128);--n;)t.push(e>>>(n<<3)&255);t.push(e)}TF.prototype.toDER=function(e){var n=this.r.toArray(),r=this.s.toArray();for(n[0]&128&&(n=[0].concat(n)),r[0]&128&&(r=[0].concat(r)),n=qde(n),r=qde(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var s=[2];Fq(s,n.length),s=s.concat(n),s.push(2),Fq(s,r.length);var i=s.concat(r),a=[48];return Fq(a,i.length),a=a.concat(i),une.encode(a,e)};var Ng=um,KCe=pSt,xSt=Lu,Vq=CF,ESt=$Ce,GCe=xSt.assert,fne=ySt,NF=bSt;function Hf(t){if(!(this instanceof Hf))return new Hf(t);typeof t=="string"&&(GCe(Object.prototype.hasOwnProperty.call(Vq,t),"Unknown curve "+t),t=Vq[t]),t instanceof Vq.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var ASt=Hf;Hf.prototype.keyPair=function(e){return new fne(this,e)};Hf.prototype.keyFromPrivate=function(e,n){return fne.fromPrivate(this,e,n)};Hf.prototype.keyFromPublic=function(e,n){return fne.fromPublic(this,e,n)};Hf.prototype.genKeyPair=function(e){e||(e={});for(var n=new KCe({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||ESt(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),s=this.n.sub(new Ng(2));;){var i=new Ng(n.generate(r));if(!(i.cmp(s)>0))return i.iaddn(1),this.keyFromPrivate(i)}};Hf.prototype._truncateToN=function(e,n,r){var s;if(Ng.isBN(e)||typeof e=="number")e=new Ng(e,16),s=e.byteLength();else if(typeof e=="object")s=e.length,e=new Ng(e,16);else{var i=e.toString();s=i.length+1>>>1,e=new Ng(i,16)}typeof r!="number"&&(r=s*8);var a=r-this.n.bitLength();return a>0&&(e=e.ushrn(a)),!n&&e.cmp(this.n)>=0?e.sub(this.n):e};Hf.prototype.sign=function(e,n,r,s){typeof r=="object"&&(s=r,r=null),s||(s={}),n=this.keyFromPrivate(n,r),e=this._truncateToN(e,!1,s.msgBitLength);for(var i=this.n.byteLength(),a=n.getPrivate().toArray("be",i),o=e.toArray("be",i),c=new KCe({hash:this.hash,entropy:a,nonce:o,pers:s.pers,persEnc:s.persEnc||"utf8"}),l=this.n.sub(new Ng(1)),u=0;;u++){var f=s.k?s.k(u):new Ng(c.generate(this.n.byteLength()));if(f=this._truncateToN(f,!0),!(f.cmpn(1)<=0||f.cmp(l)>=0)){var d=this.g.mul(f);if(!d.isInfinity()){var p=d.getX(),g=p.umod(this.n);if(g.cmpn(0)!==0){var m=f.invm(this.n).mul(g.mul(n.getPrivate()).iadd(e));if(m=m.umod(this.n),m.cmpn(0)!==0){var v=(d.getY().isOdd()?1:0)|(p.cmp(g)!==0?2:0);return s.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),v^=1),new NF({r:g,s:m,recoveryParam:v})}}}}}};Hf.prototype.verify=function(e,n,r,s,i){i||(i={}),e=this._truncateToN(e,!1,i.msgBitLength),r=this.keyFromPublic(r,s),n=new NF(n,"hex");var a=n.r,o=n.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var c=o.invm(this.n),l=c.mul(e).umod(this.n),u=c.mul(a).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(l,r.getPublic(),u),f.isInfinity()?!1:f.eqXToP(a)):(f=this.g.mulAdd(l,r.getPublic(),u),f.isInfinity()?!1:f.getX().umod(this.n).cmp(a)===0)};Hf.prototype.recoverPubKey=function(t,e,n,r){GCe((3&n)===n,"The recovery param is more than two bits"),e=new NF(e,r);var s=this.n,i=new Ng(t),a=e.r,o=e.s,c=n&1,l=n>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?a=this.curve.pointFromX(a.add(this.curve.n),c):a=this.curve.pointFromX(a,c);var u=e.r.invm(s),f=s.sub(i).mul(u).umod(s),d=o.mul(u).umod(s);return this.g.mulAdd(f,a,d)};Hf.prototype.getKeyRecoveryParam=function(t,e,n,r){if(e=new NF(e,r),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var i;try{i=this.recoverPubKey(t,e,s)}catch{continue}if(i.eq(n))return s}throw new Error("Unable to find valid recovery factor")};var g9=Lu,WCe=g9.assert,Kde=g9.parseBytes,D4=g9.cachedProperty;function Ga(t,e){this.eddsa=t,this._secret=Kde(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=Kde(e.pub)}Ga.fromPublic=function(e,n){return n instanceof Ga?n:new Ga(e,{pub:n})};Ga.fromSecret=function(e,n){return n instanceof Ga?n:new Ga(e,{secret:n})};Ga.prototype.secret=function(){return this._secret};D4(Ga,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});D4(Ga,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});D4(Ga,"privBytes",function(){var e=this.eddsa,n=this.hash(),r=e.encodingLength-1,s=n.slice(0,e.encodingLength);return s[0]&=248,s[r]&=127,s[r]|=64,s});D4(Ga,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});D4(Ga,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});D4(Ga,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Ga.prototype.sign=function(e){return WCe(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Ga.prototype.verify=function(e,n){return this.eddsa.verify(e,n,this)};Ga.prototype.getSecret=function(e){return WCe(this._secret,"KeyPair is public only"),g9.encode(this.secret(),e)};Ga.prototype.getPublic=function(e){return g9.encode(this.pubBytes(),e)};var SSt=Ga,ISt=um,kF=Lu,Gde=kF.assert,PF=kF.cachedProperty,CSt=kF.parseBytes;function eE(t,e){this.eddsa=t,typeof e!="object"&&(e=CSt(e)),Array.isArray(e)&&(Gde(e.length===t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),Gde(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof ISt&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}PF(eE,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});PF(eE,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});PF(eE,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});PF(eE,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});eE.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};eE.prototype.toHex=function(){return kF.encode(this.toBytes(),"hex").toUpperCase()};var TSt=eE,NSt=u9,kSt=CF,G5=Lu,PSt=G5.assert,zCe=G5.parseBytes,JCe=SSt,Wde=TSt;function Pl(t){if(PSt(t==="ed25519","only tested with ed25519 so far"),!(this instanceof Pl))return new Pl(t);t=kSt[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=NSt.sha512}var OSt=Pl;Pl.prototype.sign=function(e,n){e=zCe(e);var r=this.keyFromSecret(n),s=this.hashInt(r.messagePrefix(),e),i=this.g.mul(s),a=this.encodePoint(i),o=this.hashInt(a,r.pubBytes(),e).mul(r.priv()),c=s.add(o).umod(this.curve.n);return this.makeSignature({R:i,S:c,Rencoded:a})};Pl.prototype.verify=function(e,n,r){if(e=zCe(e),n=this.makeSignature(n),n.S().gte(n.eddsa.curve.n)||n.S().isNeg())return!1;var s=this.keyFromPublic(r),i=this.hashInt(n.Rencoded(),s.pubBytes(),e),a=this.g.mul(n.S()),o=n.R().add(s.pub().mul(i));return o.eq(a)};Pl.prototype.hashInt=function(){for(var e=this.hash(),n=0;n<arguments.length;n++)e.update(arguments[n]);return G5.intFromLE(e.digest()).umod(this.curve.n)};Pl.prototype.keyFromPublic=function(e){return JCe.fromPublic(this,e)};Pl.prototype.keyFromSecret=function(e){return JCe.fromSecret(this,e)};Pl.prototype.makeSignature=function(e){return e instanceof Wde?e:new Wde(this,e)};Pl.prototype.encodePoint=function(e){var n=e.getY().toArray("le",this.encodingLength);return n[this.encodingLength-1]|=e.getX().isOdd()?128:0,n};Pl.prototype.decodePoint=function(e){e=G5.parseBytes(e);var n=e.length-1,r=e.slice(0,n).concat(e[n]&-129),s=(e[n]&128)!==0,i=G5.intFromLE(r);return this.curve.pointFromY(i,s)};Pl.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Pl.prototype.decodeInt=function(e){return G5.intFromLE(e)};Pl.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=nSt.version,e.utils=Lu,e.rand=$Ce,e.curve=cne,e.curves=CF,e.ec=ASt,e.eddsa=OSt})(VCe);var dne={},YCe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=tr,n=Du;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var r=function(){function o(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return o.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},o.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},o.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._tempHi),n.wipe(this._tempLo),this.reset()},o.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var u=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=c[u++],l--;this._bufferLength===this.blockSize&&(i(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(u=i(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,u,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=c[u++],l--;return this},o.prototype.finish=function(c){if(!this._finished){var l=this._bytesHashed,u=this._bufferLength,f=l/536870912|0,d=l<<3,p=l%128<112?128:256;this._buffer[u]=128;for(var g=u+1;g<p-8;g++)this._buffer[g]=0;e.writeUint32BE(f,this._buffer,p-8),e.writeUint32BE(d,this._buffer,p-4),i(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,p),this._finished=!0}for(var g=0;g<this.digestLength/8;g++)e.writeUint32BE(this._stateHi[g],c,g*8),e.writeUint32BE(this._stateLo[g],c,g*8+4);return this},o.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},o.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},o.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},o.prototype.cleanSavedState=function(c){n.wipe(c.stateHi),n.wipe(c.stateLo),c.buffer&&n.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},o}();t.SHA512=r;var s=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function i(o,c,l,u,f,d,p){for(var g=l[0],m=l[1],v=l[2],A=l[3],S=l[4],I=l[5],B=l[6],D=l[7],V=u[0],O=u[1],U=u[2],Q=u[3],ie=u[4],G=u[5],R=u[6],k=u[7],b,w,N,L,C,T,E,P;p>=128;){for(var _=0;_<16;_++){var H=8*_+d;o[_]=e.readUint32BE(f,H),c[_]=e.readUint32BE(f,H+4)}for(var _=0;_<80;_++){var ne=g,$=m,te=v,J=A,ee=S,X=I,j=B,se=D,ye=V,Ce=O,xe=U,De=Q,qe=ie,ze=G,ft=R,mt=k;if(b=D,w=k,C=w&65535,T=w>>>16,E=b&65535,P=b>>>16,b=(S>>>14|ie<<18)^(S>>>18|ie<<14)^(ie>>>9|S<<23),w=(ie>>>14|S<<18)^(ie>>>18|S<<14)^(S>>>9|ie<<23),C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,b=S&I^~S&B,w=ie&G^~ie&R,C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,b=s[_*2],w=s[_*2+1],C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,b=o[_%16],w=c[_%16],C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,T+=C>>>16,E+=T>>>16,P+=E>>>16,N=E&65535|P<<16,L=C&65535|T<<16,b=N,w=L,C=w&65535,T=w>>>16,E=b&65535,P=b>>>16,b=(g>>>28|V<<4)^(V>>>2|g<<30)^(V>>>7|g<<25),w=(V>>>28|g<<4)^(g>>>2|V<<30)^(g>>>7|V<<25),C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,b=g&m^g&v^m&v,w=V&O^V&U^O&U,C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,T+=C>>>16,E+=T>>>16,P+=E>>>16,se=E&65535|P<<16,mt=C&65535|T<<16,b=J,w=De,C=w&65535,T=w>>>16,E=b&65535,P=b>>>16,b=N,w=L,C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,T+=C>>>16,E+=T>>>16,P+=E>>>16,J=E&65535|P<<16,De=C&65535|T<<16,m=ne,v=$,A=te,S=J,I=ee,B=X,D=j,g=se,O=ye,U=Ce,Q=xe,ie=De,G=qe,R=ze,k=ft,V=mt,_%16===15)for(var H=0;H<16;H++)b=o[H],w=c[H],C=w&65535,T=w>>>16,E=b&65535,P=b>>>16,b=o[(H+9)%16],w=c[(H+9)%16],C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,N=o[(H+1)%16],L=c[(H+1)%16],b=(N>>>1|L<<31)^(N>>>8|L<<24)^N>>>7,w=(L>>>1|N<<31)^(L>>>8|N<<24)^(L>>>7|N<<25),C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,N=o[(H+14)%16],L=c[(H+14)%16],b=(N>>>19|L<<13)^(L>>>29|N<<3)^N>>>6,w=(L>>>19|N<<13)^(N>>>29|L<<3)^(L>>>6|N<<26),C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,T+=C>>>16,E+=T>>>16,P+=E>>>16,o[H]=E&65535|P<<16,c[H]=C&65535|T<<16}b=g,w=V,C=w&65535,T=w>>>16,E=b&65535,P=b>>>16,b=l[0],w=u[0],C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,T+=C>>>16,E+=T>>>16,P+=E>>>16,l[0]=g=E&65535|P<<16,u[0]=V=C&65535|T<<16,b=m,w=O,C=w&65535,T=w>>>16,E=b&65535,P=b>>>16,b=l[1],w=u[1],C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,T+=C>>>16,E+=T>>>16,P+=E>>>16,l[1]=m=E&65535|P<<16,u[1]=O=C&65535|T<<16,b=v,w=U,C=w&65535,T=w>>>16,E=b&65535,P=b>>>16,b=l[2],w=u[2],C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,T+=C>>>16,E+=T>>>16,P+=E>>>16,l[2]=v=E&65535|P<<16,u[2]=U=C&65535|T<<16,b=A,w=Q,C=w&65535,T=w>>>16,E=b&65535,P=b>>>16,b=l[3],w=u[3],C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,T+=C>>>16,E+=T>>>16,P+=E>>>16,l[3]=A=E&65535|P<<16,u[3]=Q=C&65535|T<<16,b=S,w=ie,C=w&65535,T=w>>>16,E=b&65535,P=b>>>16,b=l[4],w=u[4],C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,T+=C>>>16,E+=T>>>16,P+=E>>>16,l[4]=S=E&65535|P<<16,u[4]=ie=C&65535|T<<16,b=I,w=G,C=w&65535,T=w>>>16,E=b&65535,P=b>>>16,b=l[5],w=u[5],C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,T+=C>>>16,E+=T>>>16,P+=E>>>16,l[5]=I=E&65535|P<<16,u[5]=G=C&65535|T<<16,b=B,w=R,C=w&65535,T=w>>>16,E=b&65535,P=b>>>16,b=l[6],w=u[6],C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,T+=C>>>16,E+=T>>>16,P+=E>>>16,l[6]=B=E&65535|P<<16,u[6]=R=C&65535|T<<16,b=D,w=k,C=w&65535,T=w>>>16,E=b&65535,P=b>>>16,b=l[7],w=u[7],C+=w&65535,T+=w>>>16,E+=b&65535,P+=b>>>16,T+=C>>>16,E+=T>>>16,P+=E>>>16,l[7]=D=E&65535|P<<16,u[7]=k=C&65535|T<<16,d+=128,p-=128}return d}function a(o){var c=new r;c.update(o);var l=c.digest();return c.clean(),l}t.hash=a})(YCe);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=Vb,n=YCe,r=Du;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function s(J){const ee=new Float64Array(16);if(J)for(let X=0;X<J.length;X++)ee[X]=J[X];return ee}const i=new Uint8Array(32);i[0]=9;const a=s(),o=s([1]),c=s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),d=s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(J,ee){for(let X=0;X<16;X++)J[X]=ee[X]|0}function g(J){let ee=1;for(let X=0;X<16;X++){let j=J[X]+ee+65535;ee=Math.floor(j/65536),J[X]=j-ee*65536}J[0]+=ee-1+37*(ee-1)}function m(J,ee,X){const j=~(X-1);for(let se=0;se<16;se++){const ye=j&(J[se]^ee[se]);J[se]^=ye,ee[se]^=ye}}function v(J,ee){const X=s(),j=s();for(let se=0;se<16;se++)j[se]=ee[se];g(j),g(j),g(j);for(let se=0;se<2;se++){X[0]=j[0]-65517;for(let Ce=1;Ce<15;Ce++)X[Ce]=j[Ce]-65535-(X[Ce-1]>>16&1),X[Ce-1]&=65535;X[15]=j[15]-32767-(X[14]>>16&1);const ye=X[15]>>16&1;X[14]&=65535,m(j,X,1-ye)}for(let se=0;se<16;se++)J[2*se]=j[se]&255,J[2*se+1]=j[se]>>8}function A(J,ee){let X=0;for(let j=0;j<32;j++)X|=J[j]^ee[j];return(1&X-1>>>8)-1}function S(J,ee){const X=new Uint8Array(32),j=new Uint8Array(32);return v(X,J),v(j,ee),A(X,j)}function I(J){const ee=new Uint8Array(32);return v(ee,J),ee[0]&1}function B(J,ee){for(let X=0;X<16;X++)J[X]=ee[2*X]+(ee[2*X+1]<<8);J[15]&=32767}function D(J,ee,X){for(let j=0;j<16;j++)J[j]=ee[j]+X[j]}function V(J,ee,X){for(let j=0;j<16;j++)J[j]=ee[j]-X[j]}function O(J,ee,X){let j,se,ye=0,Ce=0,xe=0,De=0,qe=0,ze=0,ft=0,mt=0,Be=0,de=0,oe=0,fe=0,ce=0,ae=0,Ie=0,nt=0,yt=0,Tt=0,at=0,It=0,_t=0,pt=0,$t=0,Pt=0,jt=0,En=0,An=0,At=0,Sn=0,Hn=0,Qt=0,nn=X[0],sn=X[1],Nt=X[2],un=X[3],Xt=X[4],Ct=X[5],In=X[6],Cn=X[7],kt=X[8],Ht=X[9],an=X[10],ct=X[11],yn=X[12],qt=X[13],xt=X[14],Tn=X[15];j=ee[0],ye+=j*nn,Ce+=j*sn,xe+=j*Nt,De+=j*un,qe+=j*Xt,ze+=j*Ct,ft+=j*In,mt+=j*Cn,Be+=j*kt,de+=j*Ht,oe+=j*an,fe+=j*ct,ce+=j*yn,ae+=j*qt,Ie+=j*xt,nt+=j*Tn,j=ee[1],Ce+=j*nn,xe+=j*sn,De+=j*Nt,qe+=j*un,ze+=j*Xt,ft+=j*Ct,mt+=j*In,Be+=j*Cn,de+=j*kt,oe+=j*Ht,fe+=j*an,ce+=j*ct,ae+=j*yn,Ie+=j*qt,nt+=j*xt,yt+=j*Tn,j=ee[2],xe+=j*nn,De+=j*sn,qe+=j*Nt,ze+=j*un,ft+=j*Xt,mt+=j*Ct,Be+=j*In,de+=j*Cn,oe+=j*kt,fe+=j*Ht,ce+=j*an,ae+=j*ct,Ie+=j*yn,nt+=j*qt,yt+=j*xt,Tt+=j*Tn,j=ee[3],De+=j*nn,qe+=j*sn,ze+=j*Nt,ft+=j*un,mt+=j*Xt,Be+=j*Ct,de+=j*In,oe+=j*Cn,fe+=j*kt,ce+=j*Ht,ae+=j*an,Ie+=j*ct,nt+=j*yn,yt+=j*qt,Tt+=j*xt,at+=j*Tn,j=ee[4],qe+=j*nn,ze+=j*sn,ft+=j*Nt,mt+=j*un,Be+=j*Xt,de+=j*Ct,oe+=j*In,fe+=j*Cn,ce+=j*kt,ae+=j*Ht,Ie+=j*an,nt+=j*ct,yt+=j*yn,Tt+=j*qt,at+=j*xt,It+=j*Tn,j=ee[5],ze+=j*nn,ft+=j*sn,mt+=j*Nt,Be+=j*un,de+=j*Xt,oe+=j*Ct,fe+=j*In,ce+=j*Cn,ae+=j*kt,Ie+=j*Ht,nt+=j*an,yt+=j*ct,Tt+=j*yn,at+=j*qt,It+=j*xt,_t+=j*Tn,j=ee[6],ft+=j*nn,mt+=j*sn,Be+=j*Nt,de+=j*un,oe+=j*Xt,fe+=j*Ct,ce+=j*In,ae+=j*Cn,Ie+=j*kt,nt+=j*Ht,yt+=j*an,Tt+=j*ct,at+=j*yn,It+=j*qt,_t+=j*xt,pt+=j*Tn,j=ee[7],mt+=j*nn,Be+=j*sn,de+=j*Nt,oe+=j*un,fe+=j*Xt,ce+=j*Ct,ae+=j*In,Ie+=j*Cn,nt+=j*kt,yt+=j*Ht,Tt+=j*an,at+=j*ct,It+=j*yn,_t+=j*qt,pt+=j*xt,$t+=j*Tn,j=ee[8],Be+=j*nn,de+=j*sn,oe+=j*Nt,fe+=j*un,ce+=j*Xt,ae+=j*Ct,Ie+=j*In,nt+=j*Cn,yt+=j*kt,Tt+=j*Ht,at+=j*an,It+=j*ct,_t+=j*yn,pt+=j*qt,$t+=j*xt,Pt+=j*Tn,j=ee[9],de+=j*nn,oe+=j*sn,fe+=j*Nt,ce+=j*un,ae+=j*Xt,Ie+=j*Ct,nt+=j*In,yt+=j*Cn,Tt+=j*kt,at+=j*Ht,It+=j*an,_t+=j*ct,pt+=j*yn,$t+=j*qt,Pt+=j*xt,jt+=j*Tn,j=ee[10],oe+=j*nn,fe+=j*sn,ce+=j*Nt,ae+=j*un,Ie+=j*Xt,nt+=j*Ct,yt+=j*In,Tt+=j*Cn,at+=j*kt,It+=j*Ht,_t+=j*an,pt+=j*ct,$t+=j*yn,Pt+=j*qt,jt+=j*xt,En+=j*Tn,j=ee[11],fe+=j*nn,ce+=j*sn,ae+=j*Nt,Ie+=j*un,nt+=j*Xt,yt+=j*Ct,Tt+=j*In,at+=j*Cn,It+=j*kt,_t+=j*Ht,pt+=j*an,$t+=j*ct,Pt+=j*yn,jt+=j*qt,En+=j*xt,An+=j*Tn,j=ee[12],ce+=j*nn,ae+=j*sn,Ie+=j*Nt,nt+=j*un,yt+=j*Xt,Tt+=j*Ct,at+=j*In,It+=j*Cn,_t+=j*kt,pt+=j*Ht,$t+=j*an,Pt+=j*ct,jt+=j*yn,En+=j*qt,An+=j*xt,At+=j*Tn,j=ee[13],ae+=j*nn,Ie+=j*sn,nt+=j*Nt,yt+=j*un,Tt+=j*Xt,at+=j*Ct,It+=j*In,_t+=j*Cn,pt+=j*kt,$t+=j*Ht,Pt+=j*an,jt+=j*ct,En+=j*yn,An+=j*qt,At+=j*xt,Sn+=j*Tn,j=ee[14],Ie+=j*nn,nt+=j*sn,yt+=j*Nt,Tt+=j*un,at+=j*Xt,It+=j*Ct,_t+=j*In,pt+=j*Cn,$t+=j*kt,Pt+=j*Ht,jt+=j*an,En+=j*ct,An+=j*yn,At+=j*qt,Sn+=j*xt,Hn+=j*Tn,j=ee[15],nt+=j*nn,yt+=j*sn,Tt+=j*Nt,at+=j*un,It+=j*Xt,_t+=j*Ct,pt+=j*In,$t+=j*Cn,Pt+=j*kt,jt+=j*Ht,En+=j*an,An+=j*ct,At+=j*yn,Sn+=j*qt,Hn+=j*xt,Qt+=j*Tn,ye+=38*yt,Ce+=38*Tt,xe+=38*at,De+=38*It,qe+=38*_t,ze+=38*pt,ft+=38*$t,mt+=38*Pt,Be+=38*jt,de+=38*En,oe+=38*An,fe+=38*At,ce+=38*Sn,ae+=38*Hn,Ie+=38*Qt,se=1,j=ye+se+65535,se=Math.floor(j/65536),ye=j-se*65536,j=Ce+se+65535,se=Math.floor(j/65536),Ce=j-se*65536,j=xe+se+65535,se=Math.floor(j/65536),xe=j-se*65536,j=De+se+65535,se=Math.floor(j/65536),De=j-se*65536,j=qe+se+65535,se=Math.floor(j/65536),qe=j-se*65536,j=ze+se+65535,se=Math.floor(j/65536),ze=j-se*65536,j=ft+se+65535,se=Math.floor(j/65536),ft=j-se*65536,j=mt+se+65535,se=Math.floor(j/65536),mt=j-se*65536,j=Be+se+65535,se=Math.floor(j/65536),Be=j-se*65536,j=de+se+65535,se=Math.floor(j/65536),de=j-se*65536,j=oe+se+65535,se=Math.floor(j/65536),oe=j-se*65536,j=fe+se+65535,se=Math.floor(j/65536),fe=j-se*65536,j=ce+se+65535,se=Math.floor(j/65536),ce=j-se*65536,j=ae+se+65535,se=Math.floor(j/65536),ae=j-se*65536,j=Ie+se+65535,se=Math.floor(j/65536),Ie=j-se*65536,j=nt+se+65535,se=Math.floor(j/65536),nt=j-se*65536,ye+=se-1+37*(se-1),se=1,j=ye+se+65535,se=Math.floor(j/65536),ye=j-se*65536,j=Ce+se+65535,se=Math.floor(j/65536),Ce=j-se*65536,j=xe+se+65535,se=Math.floor(j/65536),xe=j-se*65536,j=De+se+65535,se=Math.floor(j/65536),De=j-se*65536,j=qe+se+65535,se=Math.floor(j/65536),qe=j-se*65536,j=ze+se+65535,se=Math.floor(j/65536),ze=j-se*65536,j=ft+se+65535,se=Math.floor(j/65536),ft=j-se*65536,j=mt+se+65535,se=Math.floor(j/65536),mt=j-se*65536,j=Be+se+65535,se=Math.floor(j/65536),Be=j-se*65536,j=de+se+65535,se=Math.floor(j/65536),de=j-se*65536,j=oe+se+65535,se=Math.floor(j/65536),oe=j-se*65536,j=fe+se+65535,se=Math.floor(j/65536),fe=j-se*65536,j=ce+se+65535,se=Math.floor(j/65536),ce=j-se*65536,j=ae+se+65535,se=Math.floor(j/65536),ae=j-se*65536,j=Ie+se+65535,se=Math.floor(j/65536),Ie=j-se*65536,j=nt+se+65535,se=Math.floor(j/65536),nt=j-se*65536,ye+=se-1+37*(se-1),J[0]=ye,J[1]=Ce,J[2]=xe,J[3]=De,J[4]=qe,J[5]=ze,J[6]=ft,J[7]=mt,J[8]=Be,J[9]=de,J[10]=oe,J[11]=fe,J[12]=ce,J[13]=ae,J[14]=Ie,J[15]=nt}function U(J,ee){O(J,ee,ee)}function Q(J,ee){const X=s();let j;for(j=0;j<16;j++)X[j]=ee[j];for(j=253;j>=0;j--)U(X,X),j!==2&&j!==4&&O(X,X,ee);for(j=0;j<16;j++)J[j]=X[j]}function ie(J,ee){const X=s();let j;for(j=0;j<16;j++)X[j]=ee[j];for(j=250;j>=0;j--)U(X,X),j!==1&&O(X,X,ee);for(j=0;j<16;j++)J[j]=X[j]}function G(J,ee){const X=s(),j=s(),se=s(),ye=s(),Ce=s(),xe=s(),De=s(),qe=s(),ze=s();V(X,J[1],J[0]),V(ze,ee[1],ee[0]),O(X,X,ze),D(j,J[0],J[1]),D(ze,ee[0],ee[1]),O(j,j,ze),O(se,J[3],ee[3]),O(se,se,l),O(ye,J[2],ee[2]),D(ye,ye,ye),V(Ce,j,X),V(xe,ye,se),D(De,ye,se),D(qe,j,X),O(J[0],Ce,xe),O(J[1],qe,De),O(J[2],De,xe),O(J[3],Ce,qe)}function R(J,ee,X){for(let j=0;j<4;j++)m(J[j],ee[j],X)}function k(J,ee){const X=s(),j=s(),se=s();Q(se,ee[2]),O(X,ee[0],se),O(j,ee[1],se),v(J,j),J[31]^=I(X)<<7}function b(J,ee,X){p(J[0],a),p(J[1],o),p(J[2],o),p(J[3],a);for(let j=255;j>=0;--j){const se=X[j/8|0]>>(j&7)&1;R(J,ee,se),G(ee,J),G(J,J),R(J,ee,se)}}function w(J,ee){const X=[s(),s(),s(),s()];p(X[0],u),p(X[1],f),p(X[2],o),O(X[3],u,f),b(J,X,ee)}function N(J){if(J.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const ee=(0,n.hash)(J);ee[0]&=248,ee[31]&=127,ee[31]|=64;const X=new Uint8Array(32),j=[s(),s(),s(),s()];w(j,ee),k(X,j);const se=new Uint8Array(64);return se.set(J),se.set(X,32),{publicKey:X,secretKey:se}}t.generateKeyPairFromSeed=N;function L(J){const ee=(0,e.randomBytes)(32,J),X=N(ee);return(0,r.wipe)(ee),X}t.generateKeyPair=L;function C(J){if(J.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(J.subarray(32))}t.extractPublicKeyFromSecretKey=C;const T=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function E(J,ee){let X,j,se,ye;for(j=63;j>=32;--j){for(X=0,se=j-32,ye=j-12;se<ye;++se)ee[se]+=X-16*ee[j]*T[se-(j-32)],X=Math.floor((ee[se]+128)/256),ee[se]-=X*256;ee[se]+=X,ee[j]=0}for(X=0,se=0;se<32;se++)ee[se]+=X-(ee[31]>>4)*T[se],X=ee[se]>>8,ee[se]&=255;for(se=0;se<32;se++)ee[se]-=X*T[se];for(j=0;j<32;j++)ee[j+1]+=ee[j]>>8,J[j]=ee[j]&255}function P(J){const ee=new Float64Array(64);for(let X=0;X<64;X++)ee[X]=J[X];for(let X=0;X<64;X++)J[X]=0;E(J,ee)}function _(J,ee){const X=new Float64Array(64),j=[s(),s(),s(),s()],se=(0,n.hash)(J.subarray(0,32));se[0]&=248,se[31]&=127,se[31]|=64;const ye=new Uint8Array(64);ye.set(se.subarray(32),32);const Ce=new n.SHA512;Ce.update(ye.subarray(32)),Ce.update(ee);const xe=Ce.digest();Ce.clean(),P(xe),w(j,xe),k(ye,j),Ce.reset(),Ce.update(ye.subarray(0,32)),Ce.update(J.subarray(32)),Ce.update(ee);const De=Ce.digest();P(De);for(let qe=0;qe<32;qe++)X[qe]=xe[qe];for(let qe=0;qe<32;qe++)for(let ze=0;ze<32;ze++)X[qe+ze]+=De[qe]*se[ze];return E(ye.subarray(32),X),ye}t.sign=_;function H(J,ee){const X=s(),j=s(),se=s(),ye=s(),Ce=s(),xe=s(),De=s();return p(J[2],o),B(J[1],ee),U(se,J[1]),O(ye,se,c),V(se,se,J[2]),D(ye,J[2],ye),U(Ce,ye),U(xe,Ce),O(De,xe,Ce),O(X,De,se),O(X,X,ye),ie(X,X),O(X,X,se),O(X,X,ye),O(X,X,ye),O(J[0],X,ye),U(j,J[0]),O(j,j,ye),S(j,se)&&O(J[0],J[0],d),U(j,J[0]),O(j,j,ye),S(j,se)?-1:(I(J[0])===ee[31]>>7&&V(J[0],a,J[0]),O(J[3],J[0],J[1]),0)}function ne(J,ee,X){const j=new Uint8Array(32),se=[s(),s(),s(),s()],ye=[s(),s(),s(),s()];if(X.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(H(ye,J))return!1;const Ce=new n.SHA512;Ce.update(X.subarray(0,32)),Ce.update(J),Ce.update(ee);const xe=Ce.digest();return P(xe),b(se,ye,xe),w(ye,X.subarray(32)),G(se,ye),k(j,se),!A(X,j)}t.verify=ne;function $(J){let ee=[s(),s(),s(),s()];if(H(ee,J))throw new Error("Ed25519: invalid public key");let X=s(),j=s(),se=ee[1];D(X,o,se),V(j,o,se),Q(j,j),O(X,X,j);let ye=new Uint8Array(32);return v(ye,X),ye}t.convertPublicKeyToX25519=$;function te(J){const ee=(0,n.hash)(J.subarray(0,32));ee[0]&=248,ee[31]&=127,ee[31]|=64;const X=new Uint8Array(ee.subarray(0,32));return(0,r.wipe)(ee),X}t.convertSecretKeyToX25519=te})(dne);const RSt="EdDSA",_St="JWT",gD=".",OF="base64url",QCe="utf8",ZCe="utf8",BSt=":",MSt="did",DSt="key",zde="base58btc",LSt="z",USt="K36",FSt=32,VSt=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),$St=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function B2(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return $St(t)}catch{return t}}function Xg(t){return typeof t=="string"?t:VSt(t)||""}function Jde(t){return B2(Ka(ja(t,OF),QCe))}function mD(t){return Ka(ja(Xg(t),QCe),OF)}function XCe(t){const e=ja(USt,zde),n=LSt+Ka(Y_([e,t]),zde);return[MSt,DSt,n].join(BSt)}function jSt(t){return Ka(t,OF)}function HSt(t){return ja(t,OF)}function qSt(t){return ja([mD(t.header),mD(t.payload)].join(gD),ZCe)}function KSt(t){return[mD(t.header),mD(t.payload),jSt(t.signature)].join(gD)}function fY(t){const e=t.split(gD),n=Jde(e[0]),r=Jde(e[1]),s=HSt(e[2]),i=ja(e.slice(0,2).join(gD),ZCe);return{header:n,payload:r,signature:s,data:i}}function Yde(t=Vb.randomBytes(FSt)){return dne.generateKeyPairFromSeed(t)}async function GSt(t,e,n,r,s=vt.fromMiliseconds(Date.now())){const i={alg:RSt,typ:_St},a=XCe(r.publicKey),o=s+n,c={iss:a,sub:t,aud:e,iat:s,exp:o},l=qSt({header:i,payload:c}),u=dne.sign(r.secretKey,l);return KSt({header:i,payload:c,signature:u})}const WSt={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var zSt={};const JSt=":";function n6(t){const[e,n]=t.split(JSt);return{namespace:e,reference:n}}function Qde(t,e=[]){const n=[];return Object.keys(t).forEach(r=>{if(e.length&&!e.includes(r))return;const s=t[r];n.push(...s.accounts)}),n}function eTe(t,e){return t.includes(":")?[t]:e.chains||[]}var YSt=Object.defineProperty,Zde=Object.getOwnPropertySymbols,QSt=Object.prototype.hasOwnProperty,ZSt=Object.prototype.propertyIsEnumerable,Xde=(t,e,n)=>e in t?YSt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ehe=(t,e)=>{for(var n in e||(e={}))QSt.call(e,n)&&Xde(t,n,e[n]);if(Zde)for(var n of Zde(e))ZSt.call(e,n)&&Xde(t,n,e[n]);return t};const XSt="ReactNative",bu={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},e3t="js";function yD(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function L4(){return!l9()&&!!Wte()&&navigator.product===XSt}function m9(){return!yD()&&!!Wte()&&!!l9()}function y9(){return L4()?bu.reactNative:yD()?bu.node:m9()?bu.browser:bu.unknown}function t3t(){var t;try{return L4()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function n3t(t,e){let n=zk.parse(t);return n=ehe(ehe({},n),e),t=zk.stringify(n),t}function tTe(){return QIe()||{name:"",description:"",url:"",icons:[""]}}function r3t(){if(y9()===bu.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=dvt();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function s3t(){var t;const e=y9();return e===bu.browser?[e,((t=YIe())==null?void 0:t.host)||"unknown"].join(":"):e}function nTe(t,e,n){const r=r3t(),s=s3t();return[[t,e].join("-"),[e3t,n].join("-"),r,s].join("/")}function i3t({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:a,bundleId:o}){const c=n.split("?"),l=nTe(t,e,r),u={auth:s,ua:l,projectId:i,useOnCloseEvent:a,origin:o||void 0},f=n3t(c[1]||"",u);return c[0]+"?"+f}function ix(t,e){return t.filter(n=>e.includes(n)).length===t.length}function rTe(t){return Object.fromEntries(t.entries())}function sTe(t){return new Map(Object.entries(t))}function Nv(t=vt.FIVE_MINUTES,e){const n=vt.toMiliseconds(t||vt.FIVE_MINUTES);let r,s,i;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,o)=>{i=setTimeout(()=>{o(new Error(e))},n),r=a,s=o})}}function r6(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const a=await t;r(a)}catch(a){s(a)}clearTimeout(i)})}function iTe(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function a3t(t){return iTe("topic",t)}function o3t(t){return iTe("id",t)}function aTe(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function ma(t,e){return vt.fromMiliseconds(Date.now()+vt.toMiliseconds(t))}function Hy(t){return Date.now()>=vt.toMiliseconds(t)}function Cr(t,e){return`${t}${e?`:${e}`:""}`}function Q_(t=[],e=[]){return[...new Set([...t,...e])]}async function c3t({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const a=l3t(i,t,e),o=y9();if(o===bu.browser){if(!((r=l9())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}a.startsWith("https://")||a.startsWith("http://")?window.open(a,"_blank","noreferrer noopener"):window.open(a,f3t()?"_blank":"_self","noreferrer noopener")}else o===bu.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(a)}catch(s){console.error(s)}}function l3t(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${d3t(r,!0)}`}else s=`${s}/wc?${r}`;return s}async function u3t(t,e){let n="";try{if(m9()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function the(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function nhe(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function hne(){return typeof process<"u"&&zSt.IS_VITEST==="true"}function f3t(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function d3t(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function oTe(t){return Buffer.from(t,"base64").toString("utf-8")}const h3t="https://rpc.walletconnect.org/v1";async function p3t(t,e,n,r,s,i){switch(n.t){case"eip191":return g3t(t,e,n.s);case"eip1271":return await m3t(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}function g3t(t,e,n){return yEt(nCe(e),n).toLowerCase()===t.toLowerCase()}async function m3t(t,e,n,r,s,i){const a=n6(r);if(!a.namespace||!a.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const o="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),f=nCe(e).substring(2),d=o+f+c+l+u,p=await fetch(`${i||h3t}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:y3t(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:d},"latest"]})}),{result:g}=await p.json();return g?g.slice(0,o.length).toLowerCase()===o.toLowerCase():!1}catch(o){return console.error("isValidEip1271Signature: ",o),!1}}function y3t(){return Date.now()+Math.floor(Math.random()*1e3)}var w3t=Object.defineProperty,b3t=Object.defineProperties,v3t=Object.getOwnPropertyDescriptors,rhe=Object.getOwnPropertySymbols,x3t=Object.prototype.hasOwnProperty,E3t=Object.prototype.propertyIsEnumerable,she=(t,e,n)=>e in t?w3t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,A3t=(t,e)=>{for(var n in e||(e={}))x3t.call(e,n)&&she(t,n,e[n]);if(rhe)for(var n of rhe(e))E3t.call(e,n)&&she(t,n,e[n]);return t},S3t=(t,e)=>b3t(t,v3t(e));const I3t="did:pkh:",pne=t=>t==null?void 0:t.split(":"),C3t=t=>{const e=t&&pne(t);if(e)return t.includes(I3t)?e[3]:e[1]},dY=t=>{const e=t&&pne(t);if(e)return e[2]+":"+e[3]},wD=t=>{const e=t&&pne(t);if(e)return e.pop()};async function ihe(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=cTe(s,s.iss),a=wD(s.iss);return await p3t(a,i,r,dY(s.iss),n)}const cTe=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=wD(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,a=`Version: ${t.version}`,o=`Chain ID: ${C3t(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,f=t.nbf?`Not Before: ${t.nbf}`:void 0,d=t.requestId?`Request ID: ${t.requestId}`:void 0,p=t.resources?`Resources:${t.resources.map(m=>`
- ${m}`).join("")}`:void 0,g=Z_(t.resources);if(g){const m=Jk(g);s=M3t(s,m)}return[n,r,"",s,"",i,a,o,c,l,u,f,d,p].filter(m=>m!=null).join(`
`)};function T3t(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function N3t(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function M2(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(a=>{if(typeof a!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${a}`)})})})}function k3t(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:P3t(e,n,r)}}}function P3t(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function lTe(t){return M2(t),`urn:recap:${T3t(t).replace(/=/g,"")}`}function Jk(t){const e=N3t(t.replace("urn:recap:",""));return M2(e),e}function O3t(t,e,n){const r=k3t(t,e,n);return lTe(r)}function R3t(t){return t&&t.includes("urn:recap:")}function _3t(t,e){const n=Jk(t),r=Jk(e),s=B3t(n,r);return lTe(s)}function B3t(t,e){M2(t),M2(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,a;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((a=e.att)==null?void 0:a[s])||{})).sort((o,c)=>o.localeCompare(c)).forEach(o=>{var c,l;r.att[s]=S3t(A3t({},r.att[s]),{[o]:((c=t.att[s])==null?void 0:c[o])||((l=e.att[s])==null?void 0:l[o])})})}),r}function M3t(t="",e){M2(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(o=>{const c=Object.keys(e.att[o]).map(f=>({ability:f.split("/")[0],action:f.split("/")[1]}));c.sort((f,d)=>f.action.localeCompare(d.action));const l={};c.forEach(f=>{l[f.ability]||(l[f.ability]=[]),l[f.ability].push(f.action)});const u=Object.keys(l).map(f=>(s++,`(${s}) '${f}': '${l[f].join("', '")}' for '${o}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),a=`${n}${i}`;return`${t?t+" ":""}${a}`}function ahe(t){var e;const n=Jk(t);M2(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function ohe(t){const e=Jk(t);M2(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function Z_(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return R3t(e)?e:void 0}const uTe="base10",Hc="base16",Bw="base64pad",nI="base64url",w9="utf8",fTe=0,Ug=1,b9=2,D3t=0,che=1,yN=12,gne=32;function L3t(){const t=sne.generateKeyPair();return{privateKey:Ka(t.secretKey,Hc),publicKey:Ka(t.publicKey,Hc)}}function hY(){const t=Vb.randomBytes(gne);return Ka(t,Hc)}function U3t(t,e){const n=sne.sharedKey(ja(t,Hc),ja(e,Hc),!0),r=new QEt(d9.SHA256,n).expand(gne);return Ka(r,Hc)}function X_(t){const e=d9.hash(ja(t,Hc));return Ka(e,Hc)}function Xp(t){const e=d9.hash(ja(t,w9));return Ka(e,Hc)}function dTe(t){return ja(`${t}`,uTe)}function D2(t){return Number(Ka(t,uTe))}function F3t(t){const e=dTe(typeof t.type<"u"?t.type:fTe);if(D2(e)===Ug&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?ja(t.senderPublicKey,Hc):void 0,r=typeof t.iv<"u"?ja(t.iv,Hc):Vb.randomBytes(yN),s=new nne.ChaCha20Poly1305(ja(t.symKey,Hc)).seal(r,ja(t.message,w9));return hTe({type:e,sealed:s,iv:r,senderPublicKey:n,encoding:t.encoding})}function V3t(t,e){const n=dTe(b9),r=Vb.randomBytes(yN),s=ja(t,w9);return hTe({type:n,sealed:s,iv:r,encoding:e})}function $3t(t){const e=new nne.ChaCha20Poly1305(ja(t.symKey,Hc)),{sealed:n,iv:r}=Yk({encoded:t.encoded,encoding:t==null?void 0:t.encoding}),s=e.open(r,n);if(s===null)throw new Error("Failed to decrypt");return Ka(s,w9)}function j3t(t,e){const{sealed:n}=Yk({encoded:t,encoding:e});return Ka(n,w9)}function hTe(t){const{encoding:e=Bw}=t;if(D2(t.type)===b9)return Ka(Y_([t.type,t.sealed]),e);if(D2(t.type)===Ug){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ka(Y_([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return Ka(Y_([t.type,t.iv,t.sealed]),e)}function Yk(t){const{encoded:e,encoding:n=Bw}=t,r=ja(e,n),s=r.slice(D3t,che),i=che;if(D2(s)===Ug){const l=i+gne,u=l+yN,f=r.slice(i,l),d=r.slice(l,u),p=r.slice(u);return{type:s,sealed:p,iv:d,senderPublicKey:f}}if(D2(s)===b9){const l=r.slice(i),u=Vb.randomBytes(yN);return{type:s,sealed:l,iv:u}}const a=i+yN,o=r.slice(i,a),c=r.slice(a);return{type:s,sealed:c,iv:o}}function H3t(t,e){const n=Yk({encoded:t,encoding:e==null?void 0:e.encoding});return pTe({type:D2(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Ka(n.senderPublicKey,Hc):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function pTe(t){const e=(t==null?void 0:t.type)||fTe;if(e===Ug){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function lhe(t){return t.type===Ug&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function uhe(t){return t.type===b9}function q3t(t){return new VCe.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function K3t(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const n=e.length%4;return n>0&&(e+="=".repeat(4-n)),e}function G3t(t){return Buffer.from(K3t(t),"base64")}function W3t(t,e){const[n,r,s]=t.split("."),i=G3t(s);if(i.length!==64)throw new Error("Invalid signature length");const a=i.slice(0,32).toString("hex"),o=i.slice(32,64).toString("hex"),c=`${n}.${r}`,l=new d9.SHA256().update(Buffer.from(c)).digest(),u=q3t(e),f=Buffer.from(l).toString("hex");if(!u.verify(f,{r:a,s:o}))throw new Error("Invalid signature");return fY(t).payload}const z3t="irn";function pY(t){return(t==null?void 0:t.relay)||{protocol:z3t}}function _T(t){const e=WSt[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var J3t=Object.defineProperty,Y3t=Object.defineProperties,Q3t=Object.getOwnPropertyDescriptors,fhe=Object.getOwnPropertySymbols,Z3t=Object.prototype.hasOwnProperty,X3t=Object.prototype.propertyIsEnumerable,dhe=(t,e,n)=>e in t?J3t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hhe=(t,e)=>{for(var n in e||(e={}))Z3t.call(e,n)&&dhe(t,n,e[n]);if(fhe)for(var n of fhe(e))X3t.call(e,n)&&dhe(t,n,e[n]);return t},e6t=(t,e)=>Y3t(t,Q3t(e));function t6t(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),a=t[s];n[i]=a}}),n}function phe(t){if(!t.includes("wc:")){const c=oTe(t);c!=null&&c.includes("wc:")&&(t=c)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",a=zk.parse(i),o=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:n6t(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:t6t(a),methods:o,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function n6t(t){return t.startsWith("//")?t.substring(2):t}function r6t(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=n+e+s;t[s]&&(r[i]=t[s])}),r}function ghe(t){return`${t.protocol}:${t.topic}@${t.version}?`+zk.stringify(hhe(e6t(hhe({symKey:t.symKey},r6t(t.relay)),{expiryTimestamp:t.expiryTimestamp}),t.methods?{methods:t.methods.join(",")}:{}))}function aR(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}function U4(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function s6t(t){const e=[];return Object.values(t).forEach(n=>{e.push(...U4(n.accounts))}),e}function i6t(t,e){const n=[];return Object.values(t).forEach(r=>{U4(r.accounts).includes(e)&&n.push(...r.methods)}),n}function a6t(t,e){const n=[];return Object.values(t).forEach(r=>{U4(r.accounts).includes(e)&&n.push(...r.events)}),n}function mne(t){return t.includes(":")}function BT(t){return mne(t)?t.split(":")[0]:t}function o6t(t){const e={};return t==null||t.forEach(n=>{const[r,s]=n.split(":");e[r]||(e[r]={accounts:[],chains:[],events:[]}),e[r].accounts.push(n),e[r].chains.push(`${r}:${s}`)}),e}function mhe(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=o6t(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Q_(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}const c6t={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},l6t={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function bt(t,e){const{message:n,code:r}=l6t[t];return{message:e?`${n} ${e}`:n,code:r}}function gs(t,e){const{message:n,code:r}=c6t[t];return{message:e?`${n} ${e}`:n,code:r}}function q0(t,e){return!!Array.isArray(t)}function Qk(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Oc(t){return typeof t>"u"}function Di(t,e){return e&&Oc(t)?!0:typeof t=="string"&&!!t.trim().length}function yne(t,e){return e&&Oc(t)?!0:typeof t=="number"&&!isNaN(t)}function u6t(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return ix(s,r)?(r.forEach(a=>{const{accounts:o,methods:c,events:l}=t.namespaces[a],u=U4(o),f=n[a];(!ix(eTe(a,f),u)||!ix(f.methods,c)||!ix(f.events,l))&&(i=!1)}),i):!1}function bD(t){return Di(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function f6t(t){if(Di(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&bD(n)}}return!1}function d6t(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Di(t,!1)){if(e(t))return!0;const n=oTe(t);return e(n)}}catch{}return!1}function h6t(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function p6t(t){return t==null?void 0:t.topic}function g6t(t,e){let n=null;return Di(t==null?void 0:t.publicKey,!1)||(n=bt("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function yhe(t){let e=!0;return q0(t)?t.length&&(e=t.every(n=>Di(n,!1))):e=!1,e}function m6t(t,e,n){let r=null;return q0(e)&&e.length?e.forEach(s=>{r||bD(s)||(r=gs("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):bD(t)||(r=gs("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function y6t(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const a=m6t(s,eTe(s,i),`${e} ${n}`);a&&(r=a)}),r}function w6t(t,e){let n=null;return q0(t)?t.forEach(r=>{n||f6t(r)||(n=gs("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=gs("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function b6t(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=w6t(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function v6t(t,e){let n=null;return yhe(t==null?void 0:t.methods)?yhe(t==null?void 0:t.events)||(n=gs("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=gs("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function gTe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=v6t(r,`${e}, namespace`);s&&(n=s)}),n}function x6t(t,e,n){let r=null;if(t&&Qk(t)){const s=gTe(t,e);s&&(r=s);const i=y6t(t,e,n);i&&(r=i)}else r=bt("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function $q(t,e){let n=null;if(t&&Qk(t)){const r=gTe(t,e);r&&(n=r);const s=b6t(t,e);s&&(n=s)}else n=bt("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function mTe(t){return Di(t.protocol,!0)}function E6t(t,e){let n=!1;return t?t&&q0(t)&&t.length&&t.forEach(r=>{n=mTe(r)}):n=!0,n}function A6t(t){return typeof t=="number"}function il(t){return typeof t<"u"&&typeof t!==null}function S6t(t){return!(!t||typeof t!="object"||!t.code||!yne(t.code,!1)||!t.message||!Di(t.message,!1))}function I6t(t){return!(Oc(t)||!Di(t.method,!1))}function C6t(t){return!(Oc(t)||Oc(t.result)&&Oc(t.error)||!yne(t.id,!1)||!Di(t.jsonrpc,!1))}function T6t(t){return!(Oc(t)||!Di(t.name,!1))}function whe(t,e){return!(!bD(e)||!s6t(t).includes(e))}function N6t(t,e,n){return Di(n,!1)?i6t(t,e).includes(n):!1}function k6t(t,e,n){return Di(n,!1)?a6t(t,e).includes(n):!1}function bhe(t,e,n){let r=null;const s=P6t(t),i=O6t(e),a=Object.keys(s),o=Object.keys(i),c=vhe(Object.keys(t)),l=vhe(Object.keys(e)),u=c.filter(f=>!l.includes(f));return u.length&&(r=bt("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),ix(a,o)||(r=bt("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${a.toString()}
      Approved: ${o.toString()}`)),Object.keys(e).forEach(f=>{if(!f.includes(":")||r)return;const d=U4(e[f].accounts);d.includes(f)||(r=bt("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${f}
        Required: ${f}
        Approved: ${d.toString()}`))}),a.forEach(f=>{r||(ix(s[f].methods,i[f].methods)?ix(s[f].events,i[f].events)||(r=bt("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${f}`)):r=bt("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${f}`))}),r}function P6t(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function vhe(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function O6t(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=U4(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function R6t(t,e){return yne(t,!1)&&t<=e.max&&t>=e.min}function xhe(){const t=y9();return new Promise(e=>{switch(t){case bu.browser:e(_6t());break;case bu.reactNative:e(B6t());break;case bu.node:e(M6t());break;default:e(!0)}})}function _6t(){return m9()&&(navigator==null?void 0:navigator.onLine)}async function B6t(){if(L4()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function M6t(){return!0}function D6t(t){switch(y9()){case bu.browser:L6t(t);break;case bu.reactNative:U6t(t);break}}function L6t(t){!L4()&&m9()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function U6t(t){L4()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const jq={};let rI=class{static get(e){return jq[e]}static set(e,n){jq[e]=n}static delete(e){delete jq[e]}};class tE{}let F6t=class extends tE{constructor(e){super()}};const Ehe=vt.FIVE_SECONDS,F4={pulse:"heartbeat_pulse"};let V6t=class yTe extends F6t{constructor(e){super(e),this.events=new Bu.EventEmitter,this.interval=Ehe,this.interval=(e==null?void 0:e.interval)||Ehe}static async init(e){const n=new yTe(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),vt.toMiliseconds(this.interval))}pulse(){this.events.emit(F4.pulse)}};const $6t=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,j6t=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,H6t=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function q6t(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){K6t(t);return}return e}function K6t(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function oR(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!H6t.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if($6t.test(t)||j6t.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,q6t)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function G6t(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Ra(t,...e){try{return G6t(t(...e))}catch(n){return Promise.reject(n)}}function W6t(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function z6t(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function eB(t){if(W6t(t))return String(t);if(z6t(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return eB(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const gY="base64:";function J6t(t){return typeof t=="string"?t:gY+Z6t(t)}function Y6t(t){return typeof t!="string"||!t.startsWith(gY)?t:Q6t(t.slice(gY.length))}function Q6t(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Z6t(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function sl(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function X6t(...t){return sl(t.join(":"))}function cR(t){return t=sl(t),t?t+":":""}function e5t(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function t5t(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const n5t="memory",r5t=()=>{const t=new Map;return{name:n5t,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function s5t(t={}){const e={mounts:{"":t.driver||r5t()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(f=>f.startsWith(l)||u&&l.startsWith(f)).map(f=>({relativeBase:l.length>f.length?l.slice(f.length):void 0,mountpoint:f,driver:e.mounts[f]})),s=(l,u)=>{if(e.watching){u=sl(u);for(const f of e.watchListeners)f(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await Ahe(e.mounts[l],s,l)}},a=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},o=(l,u,f)=>{const d=new Map,p=g=>{let m=d.get(g.base);return m||(m={driver:g.driver,base:g.base,items:[]},d.set(g.base,m)),m};for(const g of l){const m=typeof g=="string",v=sl(m?g:g.key),A=m?void 0:g.value,S=m||!g.options?u:{...u,...g.options},I=n(v);p(I).items.push({key:v,value:A,relativeKey:I.relativeKey,options:S})}return Promise.all([...d.values()].map(g=>f(g))).then(g=>g.flat())},c={hasItem(l,u={}){l=sl(l);const{relativeKey:f,driver:d}=n(l);return Ra(d.hasItem,f,u)},getItem(l,u={}){l=sl(l);const{relativeKey:f,driver:d}=n(l);return Ra(d.getItem,f,u).then(p=>oR(p))},getItems(l,u={}){return o(l,u,f=>f.driver.getItems?Ra(f.driver.getItems,f.items.map(d=>({key:d.relativeKey,options:d.options})),u).then(d=>d.map(p=>({key:X6t(f.base,p.key),value:oR(p.value)}))):Promise.all(f.items.map(d=>Ra(f.driver.getItem,d.relativeKey,d.options).then(p=>({key:d.key,value:oR(p)})))))},getItemRaw(l,u={}){l=sl(l);const{relativeKey:f,driver:d}=n(l);return d.getItemRaw?Ra(d.getItemRaw,f,u):Ra(d.getItem,f,u).then(p=>Y6t(p))},async setItem(l,u,f={}){if(u===void 0)return c.removeItem(l);l=sl(l);const{relativeKey:d,driver:p}=n(l);p.setItem&&(await Ra(p.setItem,d,eB(u),f),p.watch||s("update",l))},async setItems(l,u){await o(l,u,async f=>{if(f.driver.setItems)return Ra(f.driver.setItems,f.items.map(d=>({key:d.relativeKey,value:eB(d.value),options:d.options})),u);f.driver.setItem&&await Promise.all(f.items.map(d=>Ra(f.driver.setItem,d.relativeKey,eB(d.value),d.options)))})},async setItemRaw(l,u,f={}){if(u===void 0)return c.removeItem(l,f);l=sl(l);const{relativeKey:d,driver:p}=n(l);if(p.setItemRaw)await Ra(p.setItemRaw,d,u,f);else if(p.setItem)await Ra(p.setItem,d,J6t(u),f);else return;p.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=sl(l);const{relativeKey:f,driver:d}=n(l);d.removeItem&&(await Ra(d.removeItem,f,u),(u.removeMeta||u.removeMata)&&await Ra(d.removeItem,f+"$",u),d.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=sl(l);const{relativeKey:f,driver:d}=n(l),p=Object.create(null);if(d.getMeta&&Object.assign(p,await Ra(d.getMeta,f,u)),!u.nativeOnly){const g=await Ra(d.getItem,f+"$",u).then(m=>oR(m));g&&typeof g=="object"&&(typeof g.atime=="string"&&(g.atime=new Date(g.atime)),typeof g.mtime=="string"&&(g.mtime=new Date(g.mtime)),Object.assign(p,g))}return p},setMeta(l,u,f={}){return this.setItem(l+"$",u,f)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var v;l=cR(l);const f=r(l,!0);let d=[];const p=[];let g=!0;for(const A of f){(v=A.driver.flags)!=null&&v.maxDepth||(g=!1);const S=await Ra(A.driver.getKeys,A.relativeBase,u);for(const I of S){const B=A.mountpoint+sl(I);d.some(D=>B.startsWith(D))||p.push(B)}d=[A.mountpoint,...d.filter(I=>!I.startsWith(A.mountpoint))]}const m=u.maxDepth!==void 0&&!g;return p.filter(A=>(!m||e5t(A,u.maxDepth))&&t5t(A,l))},async clear(l,u={}){l=cR(l),await Promise.all(r(l,!1).map(async f=>{if(f.driver.clear)return Ra(f.driver.clear,f.relativeBase,u);if(f.driver.removeItem){const d=await f.driver.getKeys(f.relativeBase||"",u);return Promise.all(d.map(p=>f.driver.removeItem(p,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>She(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await a()}},async unwatch(){e.watchListeners=[],await a()},mount(l,u){if(l=cR(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((f,d)=>d.length-f.length)),e.mounts[l]=u,e.watching&&Promise.resolve(Ahe(u,s,l)).then(f=>{e.unwatch[l]=f}).catch(console.error),c},async unmount(l,u=!0){var f,d;l=cR(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((d=(f=e.unwatch)[l])==null||d.call(f),delete e.unwatch[l]),u&&await She(e.mounts[l]),e.mountpoints=e.mountpoints.filter(p=>p!==l),delete e.mounts[l])},getMount(l=""){l=sl(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=sl(l),r(l,u.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,f={})=>c.setItem(l,u,f),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function Ahe(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function She(t){typeof t.dispose=="function"&&await Ra(t.dispose)}function nE(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function wTe(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=nE(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(a=>i(a.transaction(e,s).objectStore(e)))}let Hq;function v9(){return Hq||(Hq=wTe("keyval-store","keyval")),Hq}function Ihe(t,e=v9()){return e("readonly",n=>nE(n.get(t)))}function i5t(t,e,n=v9()){return n("readwrite",r=>(r.put(e,t),nE(r.transaction)))}function a5t(t,e=v9()){return e("readwrite",n=>(n.delete(t),nE(n.transaction)))}function o5t(t=v9()){return t("readwrite",e=>(e.clear(),nE(e.transaction)))}function c5t(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},nE(t.transaction)}function l5t(t=v9()){return t("readonly",e=>{if(e.getAllKeys)return nE(e.getAllKeys());const n=[];return c5t(e,r=>n.push(r.key)).then(()=>n)})}const u5t="idb-keyval";var f5t=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=wTe(t.dbName,t.storeName)),{name:u5t,options:t,async hasItem(s){return!(typeof await Ihe(n(s),r)>"u")},async getItem(s){return await Ihe(n(s),r)??null},setItem(s,i){return i5t(n(s),i,r)},removeItem(s){return a5t(n(s),r)},getKeys(){return l5t(r)},clear(){return o5t(r)}}};const d5t="WALLET_CONNECT_V2_INDEXED_DB",h5t="keyvaluestorage";let p5t=class{constructor(){this.indexedDb=s5t({driver:f5t({dbName:d5t,storeName:h5t})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Xg(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var qq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tB={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof qq<"u"&&qq.localStorage?tB.exports=qq.localStorage:typeof window<"u"&&window.localStorage?tB.exports=window.localStorage:tB.exports=new e})();function g5t(t){var e;return[t[0],B2((e=t[1])!=null?e:"")]}let m5t=class{constructor(){this.localStorage=tB.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(g5t)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return B2(n)}async setItem(e,n){this.localStorage.setItem(e,Xg(n))}async removeItem(e){this.localStorage.removeItem(e)}};const y5t="wc_storage_version",Che=1,w5t=async(t,e,n)=>{const r=y5t,s=await e.getItem(r);if(s&&s>=Che){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const a=[];for(;i.length;){const o=i.shift();if(!o)continue;const c=o.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(o);await e.setItem(o,l),a.push(o)}}await e.setItem(r,Che),n(e),b5t(t,a)},b5t=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let v5t=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new m5t;this.storage=e;try{const n=new p5t;w5t(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function x5t(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var E5t=A5t;function A5t(t,e,n){var r=n&&n.stringify||x5t,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var a=new Array(i);a[0]=r(t);for(var o=1;o<i;o++)a[o]=r(e[o]);return a.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,f=-1,d=t&&t.length||0,p=0;p<d;){if(t.charCodeAt(p)===37&&p+1<d){switch(f=f>-1?f:0,t.charCodeAt(p+1)){case 100:case 102:if(u>=c||e[u]==null)break;f<p&&(l+=t.slice(f,p)),l+=Number(e[u]),f=p+2,p++;break;case 105:if(u>=c||e[u]==null)break;f<p&&(l+=t.slice(f,p)),l+=Math.floor(Number(e[u])),f=p+2,p++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;f<p&&(l+=t.slice(f,p));var g=typeof e[u];if(g==="string"){l+="'"+e[u]+"'",f=p+2,p++;break}if(g==="function"){l+=e[u].name||"<anonymous>",f=p+2,p++;break}l+=r(e[u]),f=p+2,p++;break;case 115:if(u>=c)break;f<p&&(l+=t.slice(f,p)),l+=String(e[u]),f=p+2,p++;break;case 37:f<p&&(l+=t.slice(f,p)),l+="%",f=p+2,p++,u--;break}++u}++p}return f===-1?t:(f<d&&(l+=t.slice(f)),l)}const The=E5t;var BS=N0;const Zk=_5t().console||{},S5t={mapHttpRequest:lR,mapHttpResponse:lR,wrapRequestSerializer:Kq,wrapResponseSerializer:Kq,wrapErrorSerializer:Kq,req:lR,res:lR,err:k5t};function I5t(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function N0(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||Zk;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=I5t(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const a=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const o=t.level||"info",c=Object.create(n);c.log||(c.log=Xk),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:f,set:d});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:a,timestamp:P5t(t)};c.levels=N0.levels,c.level=o,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Xk,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=p,e&&(c._logEvent=mY());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function f(){return this._level}function d(g){if(g!=="silent"&&!this.levels.values[g])throw Error("unknown level "+g);this._level=g,rA(l,c,"error","log"),rA(l,c,"fatal","error"),rA(l,c,"warn","error"),rA(l,c,"info","log"),rA(l,c,"debug","log"),rA(l,c,"trace","log")}function p(g,m){if(!g)throw new Error("missing bindings for child Pino");m=m||{},s&&g.serializers&&(m.serializers=g.serializers);const v=m.serializers;if(s&&v){var A=Object.assign({},r,v),S=t.browser.serialize===!0?Object.keys(A):s;delete g.serializers,RF([g],S,A,this._stdErrSerialize)}function I(B){this._childLevel=(B._childLevel|0)+1,this.error=sA(B,g,"error"),this.fatal=sA(B,g,"fatal"),this.warn=sA(B,g,"warn"),this.info=sA(B,g,"info"),this.debug=sA(B,g,"debug"),this.trace=sA(B,g,"trace"),A&&(this.serializers=A,this._serialize=S),e&&(this._logEvent=mY([].concat(B._logEvent.bindings,g)))}return I.prototype=this,new I(this)}return c}N0.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};N0.stdSerializers=S5t;N0.stdTimeFunctions=Object.assign({},{nullTime:bTe,epochTime:vTe,unixTime:O5t,isoTime:R5t});function rA(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?Xk:s[n]?s[n]:Zk[n]||Zk[r]||Xk,C5t(t,e,n)}function C5t(t,e,n){!t.transmit&&e[n]===Xk||(e[n]=function(r){return function(){const i=t.timestamp(),a=new Array(arguments.length),o=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Zk?Zk:this;for(var c=0;c<a.length;c++)a[c]=arguments[c];if(t.serialize&&!t.asObject&&RF(a,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(o,T5t(this,n,a,i)):r.apply(o,a),t.transmit){const l=t.transmit.level||e.level,u=N0.levels.values[l],f=N0.levels.values[n];if(f<u)return;N5t(this,{ts:i,methodLevel:n,methodValue:f,transmitValue:N0.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},a)}}}(e[n]))}function T5t(t,e,n,r){t._serialize&&RF(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const a={};r&&(a.time=r),a.level=N0.levels.values[e];let o=(t._childLevel|0)+1;if(o<1&&(o=1),i!==null&&typeof i=="object"){for(;o--&&typeof s[0]=="object";)Object.assign(a,s.shift());i=s.length?The(s.shift(),s):void 0}else typeof i=="string"&&(i=The(s.shift(),s));return i!==void 0&&(a.msg=i),a}function RF(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=N0.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function sA(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function N5t(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,a=e.methodValue,o=e.val,c=t._logEvent.bindings;RF(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=a,r(i,t._logEvent,o),t._logEvent=mY(c)}function mY(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function k5t(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function P5t(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?bTe:vTe}function lR(){return{}}function Kq(t){return t}function Xk(){}function bTe(){return!1}function vTe(){return Date.now()}function O5t(){return Math.round(Date.now()/1e3)}function R5t(){return new Date(Date.now()).toISOString()}function _5t(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const x9=em(BS),B5t={level:"info"},E9="custom_context",wne=1e3*1024;let M5t=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Nhe=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new M5t(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},xTe=class{constructor(e,n=wne){this.level=e??"error",this.levelValue=BS.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new Nhe(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===BS.levels.values.error?console.error(e):n===BS.levels.values.warn?console.warn(e):n===BS.levels.values.debug?console.debug(e):n===BS.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Xg({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new Nhe(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Xg({extraMetadata:e})),new Blob(n,{type:"application/json"})}},D5t=class{constructor(e,n=wne){this.baseChunkLogger=new xTe(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},L5t=class{constructor(e,n=wne){this.baseChunkLogger=new xTe(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var U5t=Object.defineProperty,F5t=Object.defineProperties,V5t=Object.getOwnPropertyDescriptors,khe=Object.getOwnPropertySymbols,$5t=Object.prototype.hasOwnProperty,j5t=Object.prototype.propertyIsEnumerable,Phe=(t,e,n)=>e in t?U5t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vD=(t,e)=>{for(var n in e||(e={}))$5t.call(e,n)&&Phe(t,n,e[n]);if(khe)for(var n of khe(e))j5t.call(e,n)&&Phe(t,n,e[n]);return t},xD=(t,e)=>F5t(t,V5t(e));function _F(t){return xD(vD({},t),{level:(t==null?void 0:t.level)||B5t.level})}function H5t(t,e=E9){return t[e]||""}function q5t(t,e,n=E9){return t[n]=e,t}function _l(t,e=E9){let n="";return typeof t.bindings>"u"?n=H5t(t,e):n=t.bindings().context||"",n}function K5t(t,e,n=E9){const r=_l(t,n);return r.trim()?`${r}/${e}`:e}function zc(t,e,n=E9){const r=K5t(t,e,n),s=t.child({context:r});return q5t(s,r,n)}function G5t(t){var e,n;const r=new D5t((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:x9(xD(vD({},t.opts),{level:"trace",browser:xD(vD({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function W5t(t){var e;const n=new L5t((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:x9(xD(vD({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function z5t(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?G5t(t):W5t(t)}let J5t=class extends tE{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},Y5t=class extends tE{constructor(e,n){super(),this.core=e,this.logger=n,this.records=new Map}},Q5t=class{constructor(e,n){this.logger=e,this.core=n}},Z5t=class extends tE{constructor(e,n){super(),this.relayer=e,this.logger=n}},X5t=class extends tE{constructor(e){super()}},e4t=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},t4t=class extends tE{constructor(e,n){super(),this.relayer=e,this.logger=n}},n4t=class extends tE{constructor(e,n){super(),this.core=e,this.logger=n}},r4t=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},s4t=class{constructor(e,n){this.projectId=e,this.logger=n}},i4t=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}},a4t=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},o4t=class{constructor(e){this.client=e}};const c4t="PARSE_ERROR",l4t="INVALID_REQUEST",u4t="METHOD_NOT_FOUND",f4t="INVALID_PARAMS",ETe="INTERNAL_ERROR",bne="SERVER_ERROR",d4t=[-32700,-32600,-32601,-32602,-32603],wN={[c4t]:{code:-32700,message:"Parse error"},[l4t]:{code:-32600,message:"Invalid Request"},[u4t]:{code:-32601,message:"Method not found"},[f4t]:{code:-32602,message:"Invalid params"},[ETe]:{code:-32603,message:"Internal error"},[bne]:{code:-32e3,message:"Server error"}},ATe=bne;function h4t(t){return d4t.includes(t)}function Ohe(t){return Object.keys(wN).includes(t)?wN[t]:wN[ATe]}function p4t(t){const e=Object.values(wN).find(n=>n.code===t);return e||wN[ATe]}function STe(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var ITe={},Sp={},Rhe;function g4t(){if(Rhe)return Sp;Rhe=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.isBrowserCryptoAvailable=Sp.getSubtleCrypto=Sp.getBrowerCrypto=void 0;function t(){return(cs==null?void 0:cs.crypto)||(cs==null?void 0:cs.msCrypto)||{}}Sp.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Sp.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Sp.isBrowserCryptoAvailable=n,Sp}var Ip={},_he;function m4t(){if(_he)return Ip;_he=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.isBrowser=Ip.isNode=Ip.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Ip.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Ip.isNode=e;function n(){return!t()&&!e()}return Ip.isBrowser=n,Ip}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=c9;e.__exportStar(g4t(),t),e.__exportStar(m4t(),t)})(ITe);function qy(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function ax(t=6){return BigInt(qy(t))}function Mw(t,e,n){return{id:n||qy(),jsonrpc:"2.0",method:t,params:e}}function BF(t,e){return{id:t,jsonrpc:"2.0",result:e}}function MF(t,e,n){return{id:t,jsonrpc:"2.0",error:y4t(e)}}function y4t(t,e){return typeof t>"u"?Ohe(ETe):(typeof t=="string"&&(t=Object.assign(Object.assign({},Ohe(bne)),{message:t})),h4t(t.code)&&(t=p4t(t.code)),t)}class w4t{}class b4t extends w4t{constructor(){super()}}class v4t extends b4t{constructor(e){super()}}const x4t="^https?:",E4t="^wss?:";function A4t(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function CTe(t,e){const n=A4t(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function Bhe(t){return CTe(t,x4t)}function Mhe(t){return CTe(t,E4t)}function S4t(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function TTe(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function vne(t){return TTe(t)&&"method"in t}function DF(t){return TTe(t)&&($h(t)||vf(t))}function $h(t){return"result"in t}function vf(t){return"error"in t}let Yf=class extends v4t{constructor(e){super(e),this.events=new Bu.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Mw(e.method,e.params||[],e.id||ax().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{vf(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),DF(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const I4t=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),C4t=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Dhe=t=>t.split("?")[0],Lhe=10,T4t=I4t();let N4t=class{constructor(e){if(this.url=e,this.events=new Bu.EventEmitter,this.registering=!1,!Mhe(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Xg(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Mhe(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=new URLSearchParams(e).get("origin"),i=ITe.isReactNative()?{headers:{origin:s}}:{rejectUnauthorized:!S4t(e)},a=new T4t(e,[],i);C4t()?a.onerror=o=>{const c=o;r(this.emitError(c.error))}:a.on("error",o=>{r(this.emitError(o))}),a.onopen=()=>{this.onOpen(a),n(a)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?B2(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=MF(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return STe(e,Dhe(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Lhe&&this.events.setMaxListeners(Lhe)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Dhe(this.url)}`));return this.events.emit("register_error",n),n}};var ED={exports:{}};ED.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",s=1,i=2,a=9007199254740991,o="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",f="[object Date]",d="[object Error]",p="[object Function]",g="[object GeneratorFunction]",m="[object Map]",v="[object Number]",A="[object Null]",S="[object Object]",I="[object Promise]",B="[object Proxy]",D="[object RegExp]",V="[object Set]",O="[object String]",U="[object Symbol]",Q="[object Undefined]",ie="[object WeakMap]",G="[object ArrayBuffer]",R="[object DataView]",k="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",N="[object Int16Array]",L="[object Int32Array]",C="[object Uint8Array]",T="[object Uint8ClampedArray]",E="[object Uint16Array]",P="[object Uint32Array]",_=/[\\^$.*+?()[\]{}|]/g,H=/^\[object .+?Constructor\]$/,ne=/^(?:0|[1-9]\d*)$/,$={};$[k]=$[b]=$[w]=$[N]=$[L]=$[C]=$[T]=$[E]=$[P]=!0,$[o]=$[c]=$[G]=$[u]=$[R]=$[f]=$[d]=$[p]=$[m]=$[v]=$[S]=$[D]=$[V]=$[O]=$[ie]=!1;var te=typeof cs=="object"&&cs&&cs.Object===Object&&cs,J=typeof self=="object"&&self&&self.Object===Object&&self,ee=te||J||Function("return this")(),X=e&&!e.nodeType&&e,j=X&&!0&&t&&!t.nodeType&&t,se=j&&j.exports===X,ye=se&&te.process,Ce=function(){try{return ye&&ye.binding&&ye.binding("util")}catch{}}(),xe=Ce&&Ce.isTypedArray;function De(be,Oe){for(var rt=-1,Bt=be==null?0:be.length,hs=0,Kn=[];++rt<Bt;){var As=be[rt];Oe(As,rt,be)&&(Kn[hs++]=As)}return Kn}function qe(be,Oe){for(var rt=-1,Bt=Oe.length,hs=be.length;++rt<Bt;)be[hs+rt]=Oe[rt];return be}function ze(be,Oe){for(var rt=-1,Bt=be==null?0:be.length;++rt<Bt;)if(Oe(be[rt],rt,be))return!0;return!1}function ft(be,Oe){for(var rt=-1,Bt=Array(be);++rt<be;)Bt[rt]=Oe(rt);return Bt}function mt(be){return function(Oe){return be(Oe)}}function Be(be,Oe){return be.has(Oe)}function de(be,Oe){return be==null?void 0:be[Oe]}function oe(be){var Oe=-1,rt=Array(be.size);return be.forEach(function(Bt,hs){rt[++Oe]=[hs,Bt]}),rt}function fe(be,Oe){return function(rt){return be(Oe(rt))}}function ce(be){var Oe=-1,rt=Array(be.size);return be.forEach(function(Bt){rt[++Oe]=Bt}),rt}var ae=Array.prototype,Ie=Function.prototype,nt=Object.prototype,yt=ee["__core-js_shared__"],Tt=Ie.toString,at=nt.hasOwnProperty,It=function(){var be=/[^.]+$/.exec(yt&&yt.keys&&yt.keys.IE_PROTO||"");return be?"Symbol(src)_1."+be:""}(),_t=nt.toString,pt=RegExp("^"+Tt.call(at).replace(_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$t=se?ee.Buffer:void 0,Pt=ee.Symbol,jt=ee.Uint8Array,En=nt.propertyIsEnumerable,An=ae.splice,At=Pt?Pt.toStringTag:void 0,Sn=Object.getOwnPropertySymbols,Hn=$t?$t.isBuffer:void 0,Qt=fe(Object.keys,Object),nn=Do(ee,"DataView"),sn=Do(ee,"Map"),Nt=Do(ee,"Promise"),un=Do(ee,"Set"),Xt=Do(ee,"WeakMap"),Ct=Do(Object,"create"),In=Fl(nn),Cn=Fl(sn),kt=Fl(Nt),Ht=Fl(un),an=Fl(Xt),ct=Pt?Pt.prototype:void 0,yn=ct?ct.valueOf:void 0;function qt(be){var Oe=-1,rt=be==null?0:be.length;for(this.clear();++Oe<rt;){var Bt=be[Oe];this.set(Bt[0],Bt[1])}}function xt(){this.__data__=Ct?Ct(null):{},this.size=0}function Tn(be){var Oe=this.has(be)&&delete this.__data__[be];return this.size-=Oe?1:0,Oe}function Fr(be){var Oe=this.__data__;if(Ct){var rt=Oe[be];return rt===r?void 0:rt}return at.call(Oe,be)?Oe[be]:void 0}function hn(be){var Oe=this.__data__;return Ct?Oe[be]!==void 0:at.call(Oe,be)}function Or(be,Oe){var rt=this.__data__;return this.size+=this.has(be)?0:1,rt[be]=Ct&&Oe===void 0?r:Oe,this}qt.prototype.clear=xt,qt.prototype.delete=Tn,qt.prototype.get=Fr,qt.prototype.has=hn,qt.prototype.set=Or;function qn(be){var Oe=-1,rt=be==null?0:be.length;for(this.clear();++Oe<rt;){var Bt=be[Oe];this.set(Bt[0],Bt[1])}}function Dr(){this.__data__=[],this.size=0}function ca(be){var Oe=this.__data__,rt=ep(Oe,be);if(rt<0)return!1;var Bt=Oe.length-1;return rt==Bt?Oe.pop():An.call(Oe,rt,1),--this.size,!0}function la(be){var Oe=this.__data__,rt=ep(Oe,be);return rt<0?void 0:Oe[rt][1]}function ua(be){return ep(this.__data__,be)>-1}function Na(be,Oe){var rt=this.__data__,Bt=ep(rt,be);return Bt<0?(++this.size,rt.push([be,Oe])):rt[Bt][1]=Oe,this}qn.prototype.clear=Dr,qn.prototype.delete=ca,qn.prototype.get=la,qn.prototype.has=ua,qn.prototype.set=Na;function Js(be){var Oe=-1,rt=be==null?0:be.length;for(this.clear();++Oe<rt;){var Bt=be[Oe];this.set(Bt[0],Bt[1])}}function Ro(){this.size=0,this.__data__={hash:new qt,map:new(sn||qn),string:new qt}}function _o(be){var Oe=Zf(this,be).delete(be);return this.size-=Oe?1:0,Oe}function Bo(be){return Zf(this,be).get(be)}function to(be){return Zf(this,be).has(be)}function Ml(be,Oe){var rt=Zf(this,be),Bt=rt.size;return rt.set(be,Oe),this.size+=rt.size==Bt?0:1,this}Js.prototype.clear=Ro,Js.prototype.delete=_o,Js.prototype.get=Bo,Js.prototype.has=to,Js.prototype.set=Ml;function fa(be){var Oe=-1,rt=be==null?0:be.length;for(this.__data__=new Js;++Oe<rt;)this.add(be[Oe])}function ka(be){return this.__data__.set(be,r),this}function dc(be){return this.__data__.has(be)}fa.prototype.add=fa.prototype.push=ka,fa.prototype.has=dc;function ni(be){var Oe=this.__data__=new qn(be);this.size=Oe.size}function Dl(){this.__data__=new qn,this.size=0}function Ll(be){var Oe=this.__data__,rt=Oe.delete(be);return this.size=Oe.size,rt}function Ul(be){return this.__data__.get(be)}function X0(be){return this.__data__.has(be)}function Uu(be,Oe){var rt=this.__data__;if(rt instanceof qn){var Bt=rt.__data__;if(!sn||Bt.length<n-1)return Bt.push([be,Oe]),this.size=++rt.size,this;rt=this.__data__=new Js(Bt)}return rt.set(be,Oe),this.size=rt.size,this}ni.prototype.clear=Dl,ni.prototype.delete=Ll,ni.prototype.get=Ul,ni.prototype.has=X0,ni.prototype.set=Uu;function iE(be,Oe){var rt=mm(be),Bt=!rt&&gm(be),hs=!rt&&!Bt&&hc(be),Kn=!rt&&!Bt&&!hs&&hE(be),As=rt||Bt||hs||Kn,Ns=As?ft(be.length,String):[],Ar=Ns.length;for(var as in be)at.call(be,as)&&!(As&&(as=="length"||hs&&(as=="offset"||as=="parent")||Kn&&(as=="buffer"||as=="byteLength"||as=="byteOffset")||cE(as,Ar)))&&Ns.push(as);return Ns}function ep(be,Oe){for(var rt=be.length;rt--;)if(Yc(be[rt][0],Oe))return rt;return-1}function jb(be,Oe,rt){var Bt=Oe(be);return mm(be)?Bt:qe(Bt,rt(be))}function tp(be){return be==null?be===void 0?Q:A:At&&At in Object(be)?np(be):j4(be)}function yh(be){return Xf(be)&&tp(be)==o}function wh(be,Oe,rt,Bt,hs){return be===Oe?!0:be==null||Oe==null||!Xf(be)&&!Xf(Oe)?be!==be&&Oe!==Oe:aE(be,Oe,rt,Bt,wh,hs)}function aE(be,Oe,rt,Bt,hs,Kn){var As=mm(be),Ns=mm(Oe),Ar=As?c:Jc(be),as=Ns?c:Jc(Oe);Ar=Ar==o?S:Ar,as=as==o?S:as;var Ys=Ar==S,Lo=as==S,fi=Ar==as;if(fi&&hc(be)){if(!hc(Oe))return!1;As=!0,Ys=!1}if(fi&&!Ys)return Kn||(Kn=new ni),As||hE(be)?dm(be,Oe,rt,Bt,hs,Kn):$4(be,Oe,Ar,rt,Bt,hs,Kn);if(!(rt&s)){var ws=Ys&&at.call(be,"__wrapped__"),no=Lo&&at.call(Oe,"__wrapped__");if(ws||no){var Vl=ws?be.value():be,Qc=no?Oe.value():Oe;return Kn||(Kn=new ni),hs(Vl,Qc,rt,Bt,Kn)}}return fi?(Kn||(Kn=new ni),Mo(be,Oe,rt,Bt,hs,Kn)):!1}function fm(be){if(!dE(be)||lE(be))return!1;var Oe=ym(be)?pt:H;return Oe.test(Fl(be))}function Hb(be){return Xf(be)&&fE(be.length)&&!!$[tp(be)]}function dr(be){if(!qb(be))return Qt(be);var Oe=[];for(var rt in Object(be))at.call(be,rt)&&rt!="constructor"&&Oe.push(rt);return Oe}function dm(be,Oe,rt,Bt,hs,Kn){var As=rt&s,Ns=be.length,Ar=Oe.length;if(Ns!=Ar&&!(As&&Ar>Ns))return!1;var as=Kn.get(be);if(as&&Kn.get(Oe))return as==Oe;var Ys=-1,Lo=!0,fi=rt&i?new fa:void 0;for(Kn.set(be,Oe),Kn.set(Oe,be);++Ys<Ns;){var ws=be[Ys],no=Oe[Ys];if(Bt)var Vl=As?Bt(no,ws,Ys,Oe,be,Kn):Bt(ws,no,Ys,be,Oe,Kn);if(Vl!==void 0){if(Vl)continue;Lo=!1;break}if(fi){if(!ze(Oe,function(Qc,Fu){if(!Be(fi,Fu)&&(ws===Qc||hs(ws,Qc,rt,Bt,Kn)))return fi.push(Fu)})){Lo=!1;break}}else if(!(ws===no||hs(ws,no,rt,Bt,Kn))){Lo=!1;break}}return Kn.delete(be),Kn.delete(Oe),Lo}function $4(be,Oe,rt,Bt,hs,Kn,As){switch(rt){case R:if(be.byteLength!=Oe.byteLength||be.byteOffset!=Oe.byteOffset)return!1;be=be.buffer,Oe=Oe.buffer;case G:return!(be.byteLength!=Oe.byteLength||!Kn(new jt(be),new jt(Oe)));case u:case f:case v:return Yc(+be,+Oe);case d:return be.name==Oe.name&&be.message==Oe.message;case D:case O:return be==Oe+"";case m:var Ns=oe;case V:var Ar=Bt&s;if(Ns||(Ns=ce),be.size!=Oe.size&&!Ar)return!1;var as=As.get(be);if(as)return as==Oe;Bt|=i,As.set(be,Oe);var Ys=dm(Ns(be),Ns(Oe),Bt,hs,Kn,As);return As.delete(be),Ys;case U:if(yn)return yn.call(be)==yn.call(Oe)}return!1}function Mo(be,Oe,rt,Bt,hs,Kn){var As=rt&s,Ns=hm(be),Ar=Ns.length,as=hm(Oe),Ys=as.length;if(Ar!=Ys&&!As)return!1;for(var Lo=Ar;Lo--;){var fi=Ns[Lo];if(!(As?fi in Oe:at.call(Oe,fi)))return!1}var ws=Kn.get(be);if(ws&&Kn.get(Oe))return ws==Oe;var no=!0;Kn.set(be,Oe),Kn.set(Oe,be);for(var Vl=As;++Lo<Ar;){fi=Ns[Lo];var Qc=be[fi],Fu=Oe[fi];if(Bt)var Gb=As?Bt(Fu,Qc,fi,Oe,be,Kn):Bt(Qc,Fu,fi,be,Oe,Kn);if(!(Gb===void 0?Qc===Fu||hs(Qc,Fu,rt,Bt,Kn):Gb)){no=!1;break}Vl||(Vl=fi=="constructor")}if(no&&!Vl){var rp=be.constructor,zi=Oe.constructor;rp!=zi&&"constructor"in be&&"constructor"in Oe&&!(typeof rp=="function"&&rp instanceof rp&&typeof zi=="function"&&zi instanceof zi)&&(no=!1)}return Kn.delete(be),Kn.delete(Oe),no}function hm(be){return jb(be,Kb,oE)}function Zf(be,Oe){var rt=be.__data__;return pm(Oe)?rt[typeof Oe=="string"?"string":"hash"]:rt.map}function Do(be,Oe){var rt=de(be,Oe);return fm(rt)?rt:void 0}function np(be){var Oe=at.call(be,At),rt=be[At];try{be[At]=void 0;var Bt=!0}catch{}var hs=_t.call(be);return Bt&&(Oe?be[At]=rt:delete be[At]),hs}var oE=Sn?function(be){return be==null?[]:(be=Object(be),De(Sn(be),function(Oe){return En.call(be,Oe)}))}:ds,Jc=tp;(nn&&Jc(new nn(new ArrayBuffer(1)))!=R||sn&&Jc(new sn)!=m||Nt&&Jc(Nt.resolve())!=I||un&&Jc(new un)!=V||Xt&&Jc(new Xt)!=ie)&&(Jc=function(be){var Oe=tp(be),rt=Oe==S?be.constructor:void 0,Bt=rt?Fl(rt):"";if(Bt)switch(Bt){case In:return R;case Cn:return m;case kt:return I;case Ht:return V;case an:return ie}return Oe});function cE(be,Oe){return Oe=Oe??a,!!Oe&&(typeof be=="number"||ne.test(be))&&be>-1&&be%1==0&&be<Oe}function pm(be){var Oe=typeof be;return Oe=="string"||Oe=="number"||Oe=="symbol"||Oe=="boolean"?be!=="__proto__":be===null}function lE(be){return!!It&&It in be}function qb(be){var Oe=be&&be.constructor,rt=typeof Oe=="function"&&Oe.prototype||nt;return be===rt}function j4(be){return _t.call(be)}function Fl(be){if(be!=null){try{return Tt.call(be)}catch{}try{return be+""}catch{}}return""}function Yc(be,Oe){return be===Oe||be!==be&&Oe!==Oe}var gm=yh(function(){return arguments}())?yh:function(be){return Xf(be)&&at.call(be,"callee")&&!En.call(be,"callee")},mm=Array.isArray;function H4(be){return be!=null&&fE(be.length)&&!ym(be)}var hc=Hn||is;function uE(be,Oe){return wh(be,Oe)}function ym(be){if(!dE(be))return!1;var Oe=tp(be);return Oe==p||Oe==g||Oe==l||Oe==B}function fE(be){return typeof be=="number"&&be>-1&&be%1==0&&be<=a}function dE(be){var Oe=typeof be;return be!=null&&(Oe=="object"||Oe=="function")}function Xf(be){return be!=null&&typeof be=="object"}var hE=xe?mt(xe):Hb;function Kb(be){return H4(be)?iE(be):dr(be)}function ds(){return[]}function is(){return!1}t.exports=uE})(ED,ED.exports);var k4t=ED.exports;const P4t=em(k4t),NTe="wc",kTe=2,PTe="core",K0=`${NTe}@2:${PTe}:`,O4t={logger:"error"},R4t={database:":memory:"},_4t="crypto",Uhe="client_ed25519_seed",B4t=vt.ONE_DAY,M4t="keychain",D4t="0.3",L4t="messages",U4t="0.3",F4t=vt.SIX_HOURS,V4t="publisher",OTe="irn",$4t="error",RTe="wss://relay.walletconnect.org",j4t="relayer",Pc={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},H4t="_subscription",tf={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},q4t=.1,yY="2.17.2",Os={link_mode:"link_mode",relay:"relay"},K4t="0.3",G4t="WALLETCONNECT_CLIENT_ID",Fhe="WALLETCONNECT_LINK_MODE_APPS",jh={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},W4t="subscription",z4t="0.3",J4t=vt.FIVE_SECONDS*1e3,Y4t="pairing",Q4t="0.3",sI={wc_pairingDelete:{req:{ttl:vt.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:vt.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:vt.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:vt.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:vt.ONE_DAY,prompt:!1,tag:0},res:{ttl:vt.ONE_DAY,prompt:!1,tag:0}}},Uv={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ud={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Z4t="history",X4t="0.3",e8t="expirer",of={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},t8t="0.3",n8t="verify-api",r8t="https://verify.walletconnect.com",_Te="https://verify.walletconnect.org",bN=_Te,s8t=`${bN}/v3`,i8t=[r8t,_Te],a8t="echo",o8t="https://echo.walletconnect.com",Uh={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Hp={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},fd={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},m1={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},y1={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},iI={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},c8t=.1,l8t="event-client",u8t=86400,f8t="https://pulse.walletconnect.org/batch";function d8t(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),a=i.charCodeAt(0);if(n[a]!==255)throw new TypeError(i+" is ambiguous");n[a]=s}var o=t.length,c=t.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function f(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var m=0,v=0,A=0,S=g.length;A!==S&&g[A]===0;)A++,m++;for(var I=(S-A)*u+1>>>0,B=new Uint8Array(I);A!==S;){for(var D=g[A],V=0,O=I-1;(D!==0||V<v)&&O!==-1;O--,V++)D+=256*B[O]>>>0,B[O]=D%o>>>0,D=D/o>>>0;if(D!==0)throw new Error("Non-zero carry");v=V,A++}for(var U=I-v;U!==I&&B[U]===0;)U++;for(var Q=c.repeat(m);U<I;++U)Q+=t.charAt(B[U]);return Q}function d(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var m=0;if(g[m]!==" "){for(var v=0,A=0;g[m]===c;)v++,m++;for(var S=(g.length-m)*l+1>>>0,I=new Uint8Array(S);g[m];){var B=n[g.charCodeAt(m)];if(B===255)return;for(var D=0,V=S-1;(B!==0||D<A)&&V!==-1;V--,D++)B+=o*I[V]>>>0,I[V]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");A=D,m++}if(g[m]!==" "){for(var O=S-A;O!==S&&I[O]===0;)O++;for(var U=new Uint8Array(v+(S-O)),Q=v;O!==S;)U[Q++]=I[O++];return U}}}function p(g){var m=d(g);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:d,decode:p}}var h8t=d8t,p8t=h8t;const BTe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},g8t=t=>new TextEncoder().encode(t),m8t=t=>new TextDecoder().decode(t);class y8t{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class w8t{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return MTe(this,e)}}class b8t{constructor(e){this.decoders=e}or(e){return MTe(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const MTe=(t,e)=>new b8t({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class v8t{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new y8t(e,n,r),this.decoder=new w8t(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const LF=({name:t,prefix:e,encode:n,decode:r})=>new v8t(t,e,n,r),A9=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=p8t(n,e);return LF({prefix:t,name:e,encode:r,decode:i=>BTe(s(i))})},x8t=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const a=new Uint8Array(i*n/8|0);let o=0,c=0,l=0;for(let u=0;u<i;++u){const f=s[t[u]];if(f===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|f,o+=n,o>=8&&(o-=8,a[l++]=255&c>>o)}if(o>=n||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a},E8t=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",a=0,o=0;for(let c=0;c<t.length;++c)for(o=o<<8|t[c],a+=8;a>n;)a-=n,i+=e[s&o>>a];if(a&&(i+=e[s&o<<n-a]),r)for(;i.length*n&7;)i+="=";return i},Oo=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>LF({prefix:e,name:t,encode(s){return E8t(s,r,n)},decode(s){return x8t(s,r,n,t)}}),A8t=LF({prefix:"\0",name:"identity",encode:t=>m8t(t),decode:t=>g8t(t)});var S8t=Object.freeze({__proto__:null,identity:A8t});const I8t=Oo({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var C8t=Object.freeze({__proto__:null,base2:I8t});const T8t=Oo({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var N8t=Object.freeze({__proto__:null,base8:T8t});const k8t=A9({prefix:"9",name:"base10",alphabet:"0123456789"});var P8t=Object.freeze({__proto__:null,base10:k8t});const O8t=Oo({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),R8t=Oo({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var _8t=Object.freeze({__proto__:null,base16:O8t,base16upper:R8t});const B8t=Oo({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),M8t=Oo({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),D8t=Oo({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),L8t=Oo({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),U8t=Oo({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),F8t=Oo({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),V8t=Oo({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$8t=Oo({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),j8t=Oo({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var H8t=Object.freeze({__proto__:null,base32:B8t,base32upper:M8t,base32pad:D8t,base32padupper:L8t,base32hex:U8t,base32hexupper:F8t,base32hexpad:V8t,base32hexpadupper:$8t,base32z:j8t});const q8t=A9({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),K8t=A9({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var G8t=Object.freeze({__proto__:null,base36:q8t,base36upper:K8t});const W8t=A9({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),z8t=A9({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var J8t=Object.freeze({__proto__:null,base58btc:W8t,base58flickr:z8t});const Y8t=Oo({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Q8t=Oo({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Z8t=Oo({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),X8t=Oo({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var eIt=Object.freeze({__proto__:null,base64:Y8t,base64pad:Q8t,base64url:Z8t,base64urlpad:X8t});const DTe=Array.from(""),tIt=DTe.reduce((t,e,n)=>(t[n]=e,t),[]),nIt=DTe.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function rIt(t){return t.reduce((e,n)=>(e+=tIt[n],e),"")}function sIt(t){const e=[];for(const n of t){const r=nIt[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const iIt=LF({prefix:"",name:"base256emoji",encode:rIt,decode:sIt});var aIt=Object.freeze({__proto__:null,base256emoji:iIt}),oIt=LTe,Vhe=128,cIt=-128,lIt=Math.pow(2,31);function LTe(t,e,n){e=e||[],n=n||0;for(var r=n;t>=lIt;)e[n++]=t&255|Vhe,t/=128;for(;t&cIt;)e[n++]=t&255|Vhe,t>>>=7;return e[n]=t|0,LTe.bytes=n-r+1,e}var uIt=wY,fIt=128,$he=127;function wY(t,r){var n=0,r=r||0,s=0,i=r,a,o=t.length;do{if(i>=o)throw wY.bytes=0,new RangeError("Could not decode varint");a=t[i++],n+=s<28?(a&$he)<<s:(a&$he)*Math.pow(2,s),s+=7}while(a>=fIt);return wY.bytes=i-r,n}var dIt=Math.pow(2,7),hIt=Math.pow(2,14),pIt=Math.pow(2,21),gIt=Math.pow(2,28),mIt=Math.pow(2,35),yIt=Math.pow(2,42),wIt=Math.pow(2,49),bIt=Math.pow(2,56),vIt=Math.pow(2,63),xIt=function(t){return t<dIt?1:t<hIt?2:t<pIt?3:t<gIt?4:t<mIt?5:t<yIt?6:t<wIt?7:t<bIt?8:t<vIt?9:10},EIt={encode:oIt,decode:uIt,encodingLength:xIt},UTe=EIt;const jhe=(t,e,n=0)=>(UTe.encode(t,e,n),e),Hhe=t=>UTe.encodingLength(t),bY=(t,e)=>{const n=e.byteLength,r=Hhe(t),s=r+Hhe(n),i=new Uint8Array(s+n);return jhe(t,i,0),jhe(n,i,r),i.set(e,s),new AIt(t,n,e,i)};class AIt{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const FTe=({name:t,code:e,encode:n})=>new SIt(t,e,n);let SIt=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?bY(this.code,n):n.then(r=>bY(this.code,r))}else throw Error("Unknown type, must be binary type")}};const VTe=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),IIt=FTe({name:"sha2-256",code:18,encode:VTe("SHA-256")}),CIt=FTe({name:"sha2-512",code:19,encode:VTe("SHA-512")});var TIt=Object.freeze({__proto__:null,sha256:IIt,sha512:CIt});const $Te=0,NIt="identity",jTe=BTe,kIt=t=>bY($Te,jTe(t)),PIt={code:$Te,name:NIt,encode:jTe,digest:kIt};var OIt=Object.freeze({__proto__:null,identity:PIt});new TextEncoder,new TextDecoder;const qhe={...S8t,...C8t,...N8t,...P8t,..._8t,...H8t,...G8t,...J8t,...eIt,...aIt};({...TIt,...OIt});function RIt(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function HTe(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Khe=HTe("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Gq=HTe("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=RIt(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),_It={utf8:Khe,"utf-8":Khe,hex:qhe.base16,latin1:Gq,ascii:Gq,binary:Gq,...qhe};function BIt(t,e="utf8"){const n=_It[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}class MIt{constructor(e,n){this.core=e,this.logger=n,this.keychain=new Map,this.name=M4t,this.version=D4t,this.initialized=!1,this.storagePrefix=K0,this.init=async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}},this.has=r=>(this.isInitialized(),this.keychain.has(r)),this.set=async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()},this.get=r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=bt("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s},this.del=async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()},this.core=e,this.logger=zc(n,this.name)}get context(){return _l(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,rTe(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?sTe(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=bt("NOT_INITIALIZED",this.name);throw new Error(e)}}}let DIt=class{constructor(e,n,r){this.core=e,this.logger=n,this.name=_4t,this.randomSessionIdentifier=hY(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();const s=await this.getClientSeed(),i=Yde(s);return XCe(i.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=L3t();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const i=await this.getClientSeed(),a=Yde(i),o=this.randomSessionIdentifier;return await GSt(o,s,B4t,a)},this.generateSharedKey=(s,i,a)=>{this.isInitialized();const o=this.getPrivateKey(s),c=U3t(o,i);return this.setSymKey(c,a)},this.setSymKey=async(s,i)=>{this.isInitialized();const a=i||X_(s);return await this.keychain.set(a,s),a},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,i,a)=>{this.isInitialized();const o=pTe(a),c=Xg(i);if(uhe(o))return V3t(c,a==null?void 0:a.encoding);if(lhe(o)){const d=o.senderPublicKey,p=o.receiverPublicKey;s=await this.generateSharedKey(d,p)}const l=this.getSymKey(s),{type:u,senderPublicKey:f}=o;return F3t({type:u,symKey:l,message:c,senderPublicKey:f,encoding:a==null?void 0:a.encoding})},this.decode=async(s,i,a)=>{this.isInitialized();const o=H3t(i,a);if(uhe(o)){const c=j3t(i,a==null?void 0:a.encoding);return B2(c)}if(lhe(o)){const c=o.receiverPublicKey,l=o.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=$3t({symKey:c,encoded:i,encoding:a==null?void 0:a.encoding});return B2(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}},this.getPayloadType=(s,i=Bw)=>{const a=Yk({encoded:s,encoding:i});return D2(a.type)},this.getPayloadSenderPublicKey=(s,i=Bw)=>{const a=Yk({encoded:s,encoding:i});return a.senderPublicKey?Ka(a.senderPublicKey,Hc):void 0},this.core=e,this.logger=zc(n,this.name),this.keychain=r||new MIt(this.core,this.logger)}get context(){return _l(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Uhe)}catch{e=hY(),await this.keychain.set(Uhe,e)}return BIt(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=bt("NOT_INITIALIZED",this.name);throw new Error(e)}}};class LIt extends Q5t{constructor(e,n){super(e,n),this.logger=e,this.core=n,this.messages=new Map,this.name=L4t,this.version=U4t,this.initialized=!1,this.storagePrefix=K0,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}},this.set=async(r,s)=>{this.isInitialized();const i=Xp(s);let a=this.messages.get(r);return typeof a>"u"&&(a={}),typeof a[i]<"u"||(a[i]=s,this.messages.set(r,a),await this.persist()),i},this.get=r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s},this.has=(r,s)=>{this.isInitialized();const i=this.get(r),a=Xp(s);return typeof i[a]<"u"},this.del=async r=>{this.isInitialized(),this.messages.delete(r),await this.persist()},this.logger=zc(e,this.name),this.core=n}get context(){return _l(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,rTe(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?sTe(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=bt("NOT_INITIALIZED",this.name);throw new Error(e)}}}let UIt=class extends Z5t{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,this.events=new Bu.EventEmitter,this.name=V4t,this.queue=new Map,this.publishTimeout=vt.toMiliseconds(vt.ONE_MINUTE),this.failedPublishTimeout=vt.toMiliseconds(vt.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(r,s,i)=>{var a;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const o=(i==null?void 0:i.ttl)||F4t,c=pY(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,f=(i==null?void 0:i.id)||ax().toString(),d={topic:r,message:s,opts:{ttl:o,relay:c,prompt:l,tag:u,id:f,attestation:i==null?void 0:i.attestation}},p=`Failed to publish payload, please try again. id:${f} tag:${u}`,g=Date.now();let m,v=1;try{for(;m===void 0;){if(Date.now()-g>this.publishTimeout)throw new Error(p);this.logger.trace({id:f,attempts:v},`publisher.publish - attempt ${v}`),m=await await r6(this.rpcPublish(r,s,o,c,l,u,f,i==null?void 0:i.attestation).catch(A=>this.logger.warn(A)),this.publishTimeout,p),v++,m||await new Promise(A=>setTimeout(A,this.failedPublishTimeout))}this.relayer.events.emit(Pc.publish,d),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:f,topic:r,message:s,opts:i}})}catch(A){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(A),(a=i==null?void 0:i.internal)!=null&&a.throwOnFailedPublish)throw A;this.queue.set(f,d)}},this.on=(r,s)=>{this.events.on(r,s)},this.once=(r,s)=>{this.events.once(r,s)},this.off=(r,s)=>{this.events.off(r,s)},this.removeListener=(r,s)=>{this.events.removeListener(r,s)},this.relayer=e,this.logger=zc(n,this.name),this.registerEventListeners()}get context(){return _l(this.logger)}rpcPublish(e,n,r,s,i,a,o,c){var l,u,f,d;const p={method:_T(s.protocol).publish,params:{topic:e,message:n,ttl:r,prompt:i,tag:a,attestation:c},id:o};return Oc((l=p.params)==null?void 0:l.prompt)&&((u=p.params)==null||delete u.prompt),Oc((f=p.params)==null?void 0:f.tag)&&((d=p.params)==null||delete d.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p}),this.relayer.request(p)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:n,message:r,opts:s}=e;await this.publish(n,r,s)})}registerEventListeners(){this.relayer.core.heartbeat.on(F4.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Pc.connection_stalled);return}this.checkQueue()}),this.relayer.on(Pc.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}};class FIt{constructor(){this.map=new Map,this.set=(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])},this.get=e=>this.map.get(e)||[],this.exists=(e,n)=>this.get(e).includes(n),this.delete=(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var VIt=Object.defineProperty,$It=Object.defineProperties,jIt=Object.getOwnPropertyDescriptors,Ghe=Object.getOwnPropertySymbols,HIt=Object.prototype.hasOwnProperty,qIt=Object.prototype.propertyIsEnumerable,Whe=(t,e,n)=>e in t?VIt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aI=(t,e)=>{for(var n in e||(e={}))HIt.call(e,n)&&Whe(t,n,e[n]);if(Ghe)for(var n of Ghe(e))qIt.call(e,n)&&Whe(t,n,e[n]);return t},Wq=(t,e)=>$It(t,jIt(e));class KIt extends t4t{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,this.subscriptions=new Map,this.topicMap=new FIt,this.events=new Bu.EventEmitter,this.name=W4t,this.version=z4t,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=K0,this.subscribeTimeout=vt.toMiliseconds(vt.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=pY(s),a={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,a);const o=await this.rpcSubscribe(r,i,s);return typeof o=="string"&&(this.onSubscribe(o,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),o}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}},this.unsubscribe=async(r,s)=>{await this.restartToComplete(),this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)},this.isSubscribed=async r=>{if(this.topics.includes(r))return!0;const s=`${this.pendingSubscriptionWatchLabel}_${r}`;return await new Promise((i,a)=>{const o=new vt.Watch;o.start(s);const c=setInterval(()=>{!this.pending.has(r)&&this.topics.includes(r)&&(clearInterval(c),o.stop(s),i(!0)),o.elapsed(s)>=J4t&&(clearInterval(c),o.stop(s),a(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(r,s)=>{this.events.on(r,s)},this.once=(r,s)=>{this.events.once(r,s)},this.off=(r,s)=>{this.events.off(r,s)},this.removeListener=(r,s)=>{this.events.removeListener(r,s)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=zc(n,this.name),this.clientId=""}get context(){return _l(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=pY(r);await this.rpcUnsubscribe(e,n,s);const i=gs("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(r==null?void 0:r.transportType)===Os.relay&&await this.restartToComplete();const i={method:_T(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const a=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const o=Xp(e+this.clientId);if((r==null?void 0:r.transportType)===Os.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(l=>this.logger.warn(l))},vt.toMiliseconds(vt.ONE_SECOND)),o;const c=await r6(this.relayer.request(i).catch(l=>this.logger.warn(l)),this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!c&&a)throw new Error(`Subscribing to ${e} failed, please try again`);return c?o:null}catch(o){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Pc.connection_stalled),a)throw o}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:_T(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{return await await r6(this.relayer.request(r).catch(s=>this.logger.warn(s)),this.subscribeTimeout)}catch{this.relayer.events.emit(Pc.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:_T(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await r6(this.relayer.request(r).catch(i=>this.logger.warn(i)),this.subscribeTimeout)}catch{this.relayer.events.emit(Pc.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:_T(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,Wq(aI({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,aI({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,aI({},n)),this.topicMap.set(n.topic,e),this.events.emit(jh.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=bt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(jh.deleted,Wq(aI({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(jh.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<e;n++){const r=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(r),await this.batchSubscribe(r)}}this.events.emit(jh.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=bt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const n=await this.rpcBatchSubscribe(e);q0(n)&&this.onBatchSubscribe(n.map((r,s)=>Wq(aI({},e[s]),{id:r})))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(n.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const e=[];this.pending.forEach(n=>{e.push(n)}),await this.batchSubscribe(e),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(F4.pulse,async()=>{await this.checkPending()}),this.events.on(jh.created,async e=>{const n=jh.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),await this.persist()}),this.events.on(jh.deleted,async e=>{const n=jh.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=bt("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen(),this.restartInProgress&&await new Promise(e=>{const n=setInterval(()=>{this.restartInProgress||(clearInterval(n),e())},this.pollingInterval)})}}var GIt=Object.defineProperty,zhe=Object.getOwnPropertySymbols,WIt=Object.prototype.hasOwnProperty,zIt=Object.prototype.propertyIsEnumerable,Jhe=(t,e,n)=>e in t?GIt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yhe=(t,e)=>{for(var n in e||(e={}))WIt.call(e,n)&&Jhe(t,n,e[n]);if(zhe)for(var n of zhe(e))zIt.call(e,n)&&Jhe(t,n,e[n]);return t};class JIt extends X5t{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Bu.EventEmitter,this.name=j4t,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=vt.toMiliseconds(vt.THIRTY_SECONDS+vt.ONE_SECOND),this.request=async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||ax().toString();await this.toEstablishConnection();try{const a=this.provider.request(n);this.requestsInFlight.set(i,{promise:a,request:n}),this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - attempt to publish...");const o=await new Promise(async(c,l)=>{const u=()=>{l(new Error(`relayer.request - publish interrupted, id: ${i}`))};this.provider.on(tf.disconnect,u);const f=await a;this.provider.off(tf.disconnect,u),c(f)});return this.logger.trace({id:i,method:n.method,topic:(s=n.params)==null?void 0:s.topic},"relayer.request - published"),o}catch(a){throw this.logger.debug(`Failed to Publish Request: ${i}`),a}finally{this.requestsInFlight.delete(i)}},this.resetPingTimeout=()=>{if(yD())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s;(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null||s.terminate()},this.heartBeatTimeout)}catch(n){this.logger.warn(n)}},this.onPayloadHandler=n=>{this.onProviderPayload(n),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.trace("relayer connected"),this.startPingTimeout(),this.events.emit(Pc.connect)},this.onDisconnectHandler=()=>{this.logger.trace("relayer disconnected"),this.onProviderDisconnect()},this.onProviderErrorHandler=n=>{this.logger.error(n),this.events.emit(Pc.error,n),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(tf.payload,this.onPayloadHandler),this.provider.on(tf.connect,this.onConnectHandler),this.provider.on(tf.disconnect,this.onDisconnectHandler),this.provider.on(tf.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?zc(e.logger,this.name):x9(_F({level:e.logger||$4t})),this.messages=new LIt(this.logger,e.core),this.subscriber=new KIt(this,this.logger),this.publisher=new UIt(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||RTe,this.projectId=e.projectId,this.bundleId=t3t(),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e)}}get context(){return _l(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Os.relay})}async subscribe(e,n){var r,s,i;this.isInitialized(),(n==null?void 0:n.transportType)==="relay"&&await this.toEstablishConnection();const a=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let o=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(jh.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(jh.created,l)}),new Promise(async(u,f)=>{o=await this.subscriber.subscribe(e,Yhe({internal:{throwOnFailedPublish:a}},n)).catch(d=>{a&&f(d)})||o,u()})]),o}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(e=>e.promise))}catch(e){this.logger.warn(e)}this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await r6(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(n,r)=>{const s=()=>{this.provider.off(tf.disconnect,s),r(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(tf.disconnect,s),await r6(this.provider.connect(),vt.toMiliseconds(vt.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(i=>{r(i)}).finally(()=>{clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),this.subscriber.start().catch(i=>{this.logger.error(i),this.onDisconnectHandler()}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){this.logger.error(n);const r=n;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(r.message))throw n}finally{this.connectionAttemptInProgress=!1}}async restartTransport(e){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await xhe())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.trace(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=ma(vt.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Pc.message,e),await this.recordMessageEvent(e)}startPingTimeout(){var e,n,r,s,i;if(yD())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(a){this.logger.warn(a)}}isConnectionStalled(e){return this.staleConnectionErrors.some(n=>e.includes(n))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Yf(new N4t(i3t({sdkVersion:yY,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:n,message:r}=e;await this.messages.set(n,r)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isSubscribed(n))return this.logger.debug(`Ignoring message for non-subscribed topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.debug(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),vne(e)){if(!e.method.endsWith(H4t))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:a}=n.data,o={topic:r,message:s,publishedAt:i,transportType:Os.relay,attestation:a};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Yhe({type:"event",event:n.id},o)),this.events.emit(n.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else DF(e)&&this.events.emit(Pc.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Pc.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const n=BF(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(tf.payload,this.onPayloadHandler),this.provider.off(tf.connect,this.onConnectHandler),this.provider.off(tf.disconnect,this.onDisconnectHandler),this.provider.off(tf.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await xhe();D6t(async n=>{e!==n&&(e=n,n?await this.restartTransport().catch(r=>this.logger.error(r)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(Pc.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e))},vt.toMiliseconds(q4t))))}isInitialized(){if(!this.initialized){const{message:e}=bt("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise(e=>{const n=setInterval(()=>{this.connected&&(clearInterval(n),e())},this.connectionStatusPollingInterval)}),await this.transportOpen())}}var YIt=Object.defineProperty,Qhe=Object.getOwnPropertySymbols,QIt=Object.prototype.hasOwnProperty,ZIt=Object.prototype.propertyIsEnumerable,Zhe=(t,e,n)=>e in t?YIt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xhe=(t,e)=>{for(var n in e||(e={}))QIt.call(e,n)&&Zhe(t,n,e[n]);if(Qhe)for(var n of Qhe(e))ZIt.call(e,n)&&Zhe(t,n,e[n]);return t};class rE extends e4t{constructor(e,n,r,s=K0,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,this.map=new Map,this.version=K4t,this.cached=[],this.initialized=!1,this.storagePrefix=K0,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(a=>{this.getKey&&a!==null&&!Oc(a)?this.map.set(this.getKey(a),a):h6t(a)?this.map.set(a.id,a):p6t(a)&&this.map.set(a.topic,a)}),this.cached=[],this.initialized=!0)},this.set=async(a,o)=>{this.isInitialized(),this.map.has(a)?await this.update(a,o):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:a,value:o}),this.map.set(a,o),await this.persist())},this.get=a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a)),this.getAll=a=>(this.isInitialized(),a?this.values.filter(o=>Object.keys(a).every(c=>P4t(o[c],a[c]))):this.values),this.update=async(a,o)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:a,update:o});const c=Xhe(Xhe({},this.getData(a)),o);this.map.set(a,c),await this.persist()},this.delete=async(a,o)=>{this.isInitialized(),this.map.has(a)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:a,reason:o}),this.map.delete(a),this.addToRecentlyDeleted(a),await this.persist())},this.logger=zc(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return _l(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=bt("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=bt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=bt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=bt("NOT_INITIALIZED",this.name);throw new Error(e)}}}class XIt{constructor(e,n){this.core=e,this.logger=n,this.name=Y4t,this.version=Q4t,this.events=new Gte,this.initialized=!1,this.storagePrefix=K0,this.ignoredPayloadTypes=[Ug],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]},this.create=async r=>{this.isInitialized();const s=hY(),i=await this.core.crypto.setSymKey(s),a=ma(vt.FIVE_MINUTES),o={protocol:OTe},c={topic:i,expiry:a,relay:o,active:!1,methods:r==null?void 0:r.methods},l=ghe({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:o,expiryTimestamp:a,methods:r==null?void 0:r.methods});return this.events.emit(Uv.create,c),this.core.expirer.set(i,a),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}},this.pair=async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Uh.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:a,relay:o,expiryTimestamp:c,methods:l}=phe(r.uri);s.props.properties.topic=i,s.addTrace(Uh.pairing_uri_validation_success),s.addTrace(Uh.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Uh.existing_pairing),u.active)throw s.setError(Hp.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Uh.pairing_not_expired)}const f=c||ma(vt.FIVE_MINUTES),d={topic:i,relay:o,expiry:f,active:!1,methods:l};this.core.expirer.set(i,f),await this.pairings.set(i,d),s.addTrace(Uh.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(Uv.create,d),s.addTrace(Uh.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(a,i),s.addTrace(Uh.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Hp.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:o})}catch(p){throw s.setError(Hp.subscribe_pairing_topic_failure),p}return s.addTrace(Uh.subscribe_pairing_topic_success),d},this.activate=async({topic:r})=>{this.isInitialized();const s=ma(vt.THIRTY_DAYS);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:a,resolve:o,reject:c}=Nv();this.events.once(Cr("pairing_ping",i),({error:l})=>{l?c(l):o()}),await a()}},this.updateExpiry=async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})},this.updateMetadata=async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",gs("USER_DISCONNECTED")),await this.deletePairing(s))},this.formatUriFromPairing=r=>{this.isInitialized();const{topic:s,relay:i,expiry:a,methods:o}=r,c=this.core.crypto.keychain.get(s);return ghe({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:a,methods:o})},this.sendRequest=async(r,s,i)=>{const a=Mw(s,i),o=await this.core.crypto.encode(r,a),c=sI[s].req;return this.core.history.set(r,a),this.core.relayer.publish(r,o,c),a.id},this.sendResult=async(r,s,i)=>{const a=BF(r,i),o=await this.core.crypto.encode(s,a),c=await this.core.history.get(s,r),l=sI[c.request.method].res;await this.core.relayer.publish(s,o,l),await this.core.history.resolve(a)},this.sendError=async(r,s,i)=>{const a=MF(r,i),o=await this.core.crypto.encode(s,a),c=await this.core.history.get(s,r),l=sI[c.request.method]?sI[c.request.method].res:sI.unregistered_method.res;await this.core.relayer.publish(s,o,l),await this.core.history.resolve(a)},this.deletePairing=async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,gs("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])},this.cleanup=async()=>{const r=this.pairings.getAll().filter(s=>Hy(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))},this.onRelayEventRequest=r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return this.onPairingPingRequest(s,i);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,i);default:return this.onUnknownRpcMethodRequest(s,i)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:i}=r,a=(await this.core.history.get(s,i.id)).request.method;switch(a){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(a)}},this.onPairingPingRequest=async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(Uv.ping,{id:i,topic:r})}catch(a){await this.sendError(i,r,a),this.logger.error(a)}},this.onPairingPingResponse=(r,s)=>{const{id:i}=s;setTimeout(()=>{$h(s)?this.events.emit(Cr("pairing_ping",i),{}):vf(s)&&this.events.emit(Cr("pairing_ping",i),{error:s.error})},500)},this.onPairingDeleteRequest=async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Uv.delete,{id:i,topic:r})}catch(a){await this.sendError(i,r,a),this.logger.error(a)}},this.onUnknownRpcMethodRequest=async(r,s)=>{const{id:i,method:a}=s;try{if(this.registeredMethods.includes(a))return;const o=gs("WC_METHOD_UNSUPPORTED",a);await this.sendError(i,r,o),this.logger.error(o)}catch(o){await this.sendError(i,r,o),this.logger.error(o)}},this.onUnknownRpcMethodResponse=r=>{this.registeredMethods.includes(r)||this.logger.error(gs("WC_METHOD_UNSUPPORTED",r))},this.isValidPair=(r,s)=>{var i;if(!il(r)){const{message:o}=bt("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Hp.malformed_pairing_uri),new Error(o)}if(!d6t(r.uri)){const{message:o}=bt("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Hp.malformed_pairing_uri),new Error(o)}const a=phe(r==null?void 0:r.uri);if(!((i=a==null?void 0:a.relay)!=null&&i.protocol)){const{message:o}=bt("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Hp.malformed_pairing_uri),new Error(o)}if(!(a!=null&&a.symKey)){const{message:o}=bt("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Hp.malformed_pairing_uri),new Error(o)}if(a!=null&&a.expiryTimestamp&&vt.toMiliseconds(a==null?void 0:a.expiryTimestamp)<Date.now()){s.setError(Hp.pairing_expired);const{message:o}=bt("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(o)}},this.isValidPing=async r=>{if(!il(r)){const{message:i}=bt("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)},this.isValidDisconnect=async r=>{if(!il(r)){const{message:i}=bt("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async r=>{if(!Di(r,!1)){const{message:s}=bt("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=bt("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Hy(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=bt("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}},this.core=e,this.logger=zc(n,this.name),this.pairings=new rE(this.core,this.logger,this.name,this.storagePrefix)}get context(){return _l(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=bt("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Pc.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(!this.pairings.keys.includes(n)||s===Os.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))return;const i=await this.core.crypto.decode(n,r);try{vne(i)?(this.core.history.set(n,i),this.onRelayEventRequest({topic:n,payload:i})):DF(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id))}catch(a){this.logger.error(a)}})}registerExpirerEvents(){this.core.expirer.on(of.expired,async e=>{const{topic:n}=aTe(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Uv.expire,{topic:n}))})}}class eCt extends Y5t{constructor(e,n){super(e,n),this.core=e,this.logger=n,this.records=new Map,this.events=new Bu.EventEmitter,this.name=Z4t,this.version=X4t,this.cached=[],this.initialized=!1,this.storagePrefix=K0,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const a={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:ma(vt.THIRTY_DAYS)};this.records.set(a.id,a),this.persist(),this.events.emit(ud.created,a)},this.resolve=async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=vf(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(ud.updated,s))},this.get=async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s)),this.delete=(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(ud.deleted,i)}}),this.persist()},this.exists=async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1),this.on=(r,s)=>{this.events.on(r,s)},this.once=(r,s)=>{this.events.once(r,s)},this.off=(r,s)=>{this.events.off(r,s)},this.removeListener=(r,s)=>{this.events.removeListener(r,s)},this.logger=zc(n,this.name)}get context(){return _l(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Mw(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=bt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ud.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=bt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ud.created,e=>{const n=ud.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ud.updated,e=>{const n=ud.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ud.deleted,e=>{const n=ud.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(F4.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{vt.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(ud.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=bt("NOT_INITIALIZED",this.name);throw new Error(e)}}}class tCt extends n4t{constructor(e,n){super(e,n),this.core=e,this.logger=n,this.expirations=new Map,this.events=new Bu.EventEmitter,this.name=e8t,this.version=t8t,this.cached=[],this.initialized=!1,this.storagePrefix=K0,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(r,s)=>{this.isInitialized();const i=this.formatTarget(r),a={target:i,expiry:s};this.expirations.set(i,a),this.checkExpiry(i,a),this.events.emit(of.created,{target:i,expiration:a})},this.get=r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)},this.del=r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(of.deleted,{target:s,expiration:i})}},this.on=(r,s)=>{this.events.on(r,s)},this.once=(r,s)=>{this.events.once(r,s)},this.off=(r,s)=>{this.events.off(r,s)},this.removeListener=(r,s)=>{this.events.removeListener(r,s)},this.logger=zc(n,this.name)}get context(){return _l(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return a3t(e);if(typeof e=="number")return o3t(e);const{message:n}=bt("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(of.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=bt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=bt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;vt.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(of.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(F4.pulse,()=>this.checkExpirations()),this.events.on(of.created,e=>{const n=of.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(of.expired,e=>{const n=of.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(of.deleted,e=>{const n=of.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=bt("NOT_INITIALIZED",this.name);throw new Error(e)}}}class nCt extends r4t{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,this.name=n8t,this.verifyUrlV3=s8t,this.storagePrefix=K0,this.version=kTe,this.init=async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&vt.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async s=>{if(!m9()||this.isDevEnv)return;const i=window.location.origin,{id:a,decryptedId:o}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${a}&decryptedId=${o}`;try{const l=l9(),u=this.startAbortTimer(vt.ONE_SECOND*5),f=await new Promise((d,p)=>{const g=()=>{window.removeEventListener("message",v),l.body.removeChild(m),p("attestation aborted")};this.abortController.signal.addEventListener("abort",g);const m=l.createElement("iframe");m.src=c,m.style.display="none",m.addEventListener("error",g,{signal:this.abortController.signal});const v=A=>{if(A.data&&typeof A.data=="string")try{const S=JSON.parse(A.data);if(S.type==="verify_attestation"){if(fY(S.attestation).payload.id!==a)return;clearInterval(u),l.body.removeChild(m),this.abortController.signal.removeEventListener("abort",g),window.removeEventListener("message",v),d(S.attestation===null?"":S.attestation)}}catch(S){this.logger.warn(S)}};l.body.appendChild(m),window.addEventListener("message",v,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",f),f}catch(l){this.logger.warn(l)}return""},this.resolve=async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:a,encryptedId:o}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(fY(i).payload.id!==o)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!a)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(a,c)},this.fetchAttestation=async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const a=this.startAbortTimer(vt.ONE_SECOND*5),o=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(a),o.status===200?await o.json():void 0},this.getVerifyUrl=s=>{let i=s||bN;return i8t.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${bN}`),i=bN),i},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(vt.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}},this.persistPublicKey=async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(o){this.logger.error(o),this.logger.warn("error validating attestation")}const a=await this.fetchAndPersistPublicKey();try{if(a)return this.validateAttestation(s,a)}catch(o){this.logger.error(o),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const a=await this.fetchPublicKey();a&&(await this.persistPublicKey(a),i(a))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s},this.validateAttestation=(s,i)=>{const a=W3t(s,i.publicKey),o={hasExpired:vt.toMiliseconds(a.exp)<Date.now(),payload:a};if(o.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:o.payload.origin,isScam:o.payload.isScam,isVerified:o.payload.isVerified}},this.logger=zc(n,this.name),this.abortController=new AbortController,this.isDevEnv=hne(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return _l(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),vt.toMiliseconds(e))}}class rCt extends s4t{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,this.context=a8t,this.registerDeviceToken=async r=>{const{clientId:s,token:i,notificationType:a,enableEncrypted:o=!1}=r,c=`${o8t}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:a,token:i,always_raw:o})})},this.logger=zc(n,this.context)}}var sCt=Object.defineProperty,e0e=Object.getOwnPropertySymbols,iCt=Object.prototype.hasOwnProperty,aCt=Object.prototype.propertyIsEnumerable,t0e=(t,e,n)=>e in t?sCt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oI=(t,e)=>{for(var n in e||(e={}))iCt.call(e,n)&&t0e(t,n,e[n]);if(e0e)for(var n of e0e(e))aCt.call(e,n)&&t0e(t,n,e[n]);return t};class oCt extends i4t{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,this.context=l8t,this.storagePrefix=K0,this.storageVersion=c8t,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{if(!hne())try{const s={eventId:nhe(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:nTe(this.core.relayer.protocol,this.core.relayer.version,yY)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}},this.createEvent=s=>{const{event:i="ERROR",type:a="",properties:{topic:o,trace:c}}=s,l=nhe(),u=this.core.projectId||"",f=Date.now(),d=oI({eventId:l,timestamp:f,props:{event:i,type:a,properties:{topic:o,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,d),this.shouldPersist=!0),d},this.getEvent=s=>{const{eventId:i,topic:a}=s;if(i)return this.events.get(i);const o=Array.from(this.events.values()).find(c=>c.props.properties.topic===a);if(o)return oI(oI({},o),this.setMethods(o.eventId))},this.deleteEvent=s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(F4.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{vt.fromMiliseconds(Date.now())-vt.fromMiliseconds(s.timestamp)>u8t&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})},this.setMethods=s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)}),this.addTrace=(s,i)=>{const a=this.events.get(s);a&&(a.props.properties.trace.push(i),this.events.set(s,a),this.shouldPersist=!0)},this.setError=(s,i)=>{const a=this.events.get(s);a&&(a.props.type=i,a.timestamp=Date.now(),this.events.set(s,a),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,oI(oI({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,a]of this.events)a.props.type&&s.push(a);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}},this.sendEvent=async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${f8t}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${yY}${i}`,{method:"POST",body:JSON.stringify(s)})},this.getAppDomain=()=>tTe().url,this.logger=zc(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var cCt=Object.defineProperty,n0e=Object.getOwnPropertySymbols,lCt=Object.prototype.hasOwnProperty,uCt=Object.prototype.propertyIsEnumerable,r0e=(t,e,n)=>e in t?cCt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,s0e=(t,e)=>{for(var n in e||(e={}))lCt.call(e,n)&&r0e(t,n,e[n]);if(n0e)for(var n of n0e(e))uCt.call(e,n)&&r0e(t,n,e[n]);return t};let fCt=class qTe extends J5t{constructor(e){var n;super(e),this.protocol=NTe,this.version=kTe,this.name=PTe,this.events=new Bu.EventEmitter,this.initialized=!1,this.on=(a,o)=>this.events.on(a,o),this.once=(a,o)=>this.events.once(a,o),this.off=(a,o)=>this.events.off(a,o),this.removeListener=(a,o)=>this.events.removeListener(a,o),this.dispatchEnvelope=({topic:a,message:o,sessionExists:c})=>{if(!a||!o)return;const l={topic:a,message:o,publishedAt:Date.now(),transportType:Os.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:c})},this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||RTe,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const r=_F({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:O4t.logger}),{logger:s,chunkLoggerController:i}=z5t({opts:r,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=i,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,o;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((o=this.logChunkController)==null||o.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=zc(s,this.name),this.heartbeat=new V6t,this.crypto=new DIt(this,this.logger,e==null?void 0:e.keychain),this.history=new eCt(this,this.logger),this.expirer=new tCt(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new v5t(s0e(s0e({},R4t),e==null?void 0:e.storageOptions)),this.relayer=new JIt({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new XIt(this,this.logger),this.verify=new nCt(this,this.logger,this.storage),this.echoClient=new rCt(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new oCt(this,this.logger,e==null?void 0:e.telemetryEnabled)}static async init(e){const n=new qTe(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(G4t,r),n}get context(){return _l(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Fhe,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.eventClient.init(),this.linkModeSupportedApps=await this.storage.getItem(Fhe)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const dCt=fCt,KTe="wc",GTe=2,WTe="client",xne=`${KTe}@${GTe}:${WTe}:`,zq={name:WTe,logger:"error"},i0e="WALLETCONNECT_DEEPLINK_CHOICE",hCt="proposal",zTe="Proposal expired",pCt="session",iA=vt.SEVEN_DAYS,gCt="engine",Oa={wc_sessionPropose:{req:{ttl:vt.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:vt.ONE_DAY,prompt:!1,tag:1104},res:{ttl:vt.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:vt.ONE_DAY,prompt:!1,tag:1106},res:{ttl:vt.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:vt.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:vt.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:vt.ONE_DAY,prompt:!1,tag:1112},res:{ttl:vt.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:vt.ONE_DAY,prompt:!1,tag:1114},res:{ttl:vt.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:vt.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:vt.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:vt.FIVE_MINUTES,prompt:!1,tag:1119}}},Jq={min:vt.FIVE_MINUTES,max:vt.SEVEN_DAYS},Rh={idle:"IDLE",active:"ACTIVE"},mCt="request",yCt=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],wCt="wc",bCt="auth",vCt="authKeys",xCt="pairingTopics",ECt="requests",UF=`${wCt}@${1.5}:${bCt}:`,nB=`${UF}:PUB_KEY`;var ACt=Object.defineProperty,SCt=Object.defineProperties,ICt=Object.getOwnPropertyDescriptors,a0e=Object.getOwnPropertySymbols,CCt=Object.prototype.hasOwnProperty,TCt=Object.prototype.propertyIsEnumerable,o0e=(t,e,n)=>e in t?ACt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hi=(t,e)=>{for(var n in e||(e={}))CCt.call(e,n)&&o0e(t,n,e[n]);if(a0e)for(var n of a0e(e))TCt.call(e,n)&&o0e(t,n,e[n]);return t},dd=(t,e)=>SCt(t,ICt(e));class NCt extends o4t{constructor(e){super(e),this.name=gCt,this.events=new Gte,this.initialized=!1,this.requestQueue={state:Rh.idle,queue:[]},this.sessionRequestQueue={state:Rh.idle,queue:[]},this.requestQueueDelay=vt.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Oa)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},vt.toMiliseconds(this.requestQueueDelay)))},this.connect=async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=dd(hi({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r);const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:a,sessionProperties:o,relays:c}=r;let l=s,u,f=!1;try{l&&(f=this.client.core.pairing.pairings.get(l).active)}catch(B){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),B}if(!l||!f){const{topic:B,uri:D}=await this.client.core.pairing.create();l=B,u=D}if(!l){const{message:B}=bt("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(B)}const d=await this.client.core.crypto.generateKeyPair(),p=Oa.wc_sessionPropose.req.ttl||vt.FIVE_MINUTES,g=ma(p),m=hi({requiredNamespaces:i,optionalNamespaces:a,relays:c??[{protocol:OTe}],proposer:{publicKey:d,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:l},o&&{sessionProperties:o}),{reject:v,resolve:A,done:S}=Nv(p,zTe);this.events.once(Cr("session_connect"),async({error:B,session:D})=>{if(B)v(B);else if(D){D.self.publicKey=d;const V=dd(hi({},D),{pairingTopic:m.pairingTopic,requiredNamespaces:m.requiredNamespaces,optionalNamespaces:m.optionalNamespaces,transportType:Os.relay});await this.client.session.set(D.topic,V),await this.setExpiry(D.topic,D.expiry),l&&await this.client.core.pairing.updateMetadata({topic:l,metadata:D.peer.metadata}),this.cleanupDuplicatePairings(V),A(V)}});const I=await this.sendRequest({topic:l,method:"wc_sessionPropose",params:m,throwOnFailedPublish:!0});return await this.setProposal(I,hi({id:I},m)),{uri:u,approval:S}},this.pair=async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}},this.approve=async n=>{var r,s,i;const a=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[fd.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(U){throw a.setError(m1.no_internet_connection),U}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(U){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),a.setError(m1.proposal_not_found),U}try{await this.isValidApprove(n)}catch(U){throw this.client.logger.error("approve() -> isValidApprove() failed"),a.setError(m1.session_approve_namespace_validation_failure),U}const{id:o,relayProtocol:c,namespaces:l,sessionProperties:u,sessionConfig:f}=n,d=this.client.proposal.get(o);this.client.core.eventClient.deleteEvent({eventId:a.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:m,optionalNamespaces:v}=d;let A=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});A||(A=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:fd.session_approve_started,properties:{topic:p,trace:[fd.session_approve_started,fd.session_namespaces_validation_success]}}));const S=await this.client.core.crypto.generateKeyPair(),I=g.publicKey,B=await this.client.core.crypto.generateSharedKey(S,I),D=hi(hi({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:S,metadata:this.client.metadata},expiry:ma(iA)},u&&{sessionProperties:u}),f&&{sessionConfig:f}),V=Os.relay;A.addTrace(fd.subscribing_session_topic);try{await this.client.core.relayer.subscribe(B,{transportType:V})}catch(U){throw A.setError(m1.subscribe_session_topic_failure),U}A.addTrace(fd.subscribe_session_topic_success);const O=dd(hi({},D),{topic:B,requiredNamespaces:m,optionalNamespaces:v,pairingTopic:p,acknowledged:!1,self:D.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:S,transportType:Os.relay});await this.client.session.set(B,O),A.addTrace(fd.store_session);try{A.addTrace(fd.publishing_session_settle),await this.sendRequest({topic:B,method:"wc_sessionSettle",params:D,throwOnFailedPublish:!0}).catch(U=>{throw A==null||A.setError(m1.session_settle_publish_failure),U}),A.addTrace(fd.session_settle_publish_success),A.addTrace(fd.publishing_session_approve),await this.sendResult({id:o,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:S},throwOnFailedPublish:!0}).catch(U=>{throw A==null||A.setError(m1.session_approve_publish_failure),U}),A.addTrace(fd.session_approve_publish_success)}catch(U){throw this.client.logger.error(U),this.client.session.delete(B,gs("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(B),U}return this.client.core.eventClient.deleteEvent({eventId:A.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(o,gs("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(B,ma(iA)),{topic:B,acknowledged:()=>Promise.resolve(this.client.session.get(B))}},this.reject=async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(a){throw this.client.logger.error("reject() -> isValidReject() failed"),a}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(a){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),a}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:Oa.wc_sessionPropose.reject}),await this.client.proposal.delete(r,gs("USER_DISCONNECTED")))},this.update=async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(f){throw this.client.logger.error("update() -> isValidUpdate() failed"),f}const{topic:r,namespaces:s}=n,{done:i,resolve:a,reject:o}=Nv(),c=qy(),l=ax().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Cr("session_update",c),({error:f})=>{f?o(f):a()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(f=>{this.client.logger.error(f),this.client.session.update(r,{namespaces:u}),o(f)}),{acknowledged:i}},this.extend=async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=qy(),{done:i,resolve:a,reject:o}=Nv();return this.events.once(Cr("session_extend",s),({error:c})=>{c?o(c):a()}),await this.setExpiry(r,ma(iA)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{o(c)}),{acknowledged:i}},this.request=async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(g){throw this.client.logger.error("request() -> isValidRequest() failed"),g}const{chainId:r,request:s,topic:i,expiry:a=Oa.wc_sessionRequest.req.ttl}=n,o=this.client.session.get(i);(o==null?void 0:o.transportType)===Os.relay&&await this.confirmOnlineStateOrThrow();const c=qy(),l=ax().toString(),{done:u,resolve:f,reject:d}=Nv(a,"Request expired. Please try again.");this.events.once(Cr("session_request",c),({error:g,result:m})=>{g?d(g):f(m)});const p=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);return p?(await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:"wc_sessionRequest",params:{request:dd(hi({},s),{expiryTimestamp:ma(a)}),chainId:r},expiry:a,throwOnFailedPublish:!0,appLink:p}).catch(g=>d(g)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u()):await Promise.all([new Promise(async g=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:"wc_sessionRequest",params:{request:dd(hi({},s),{expiryTimestamp:ma(a)}),chainId:r},expiry:a,throwOnFailedPublish:!0}).catch(m=>d(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),g()}),new Promise(async g=>{var m;if(!((m=o.sessionConfig)!=null&&m.disableDeepLink)){const v=await u3t(this.client.core.storage,i0e);await c3t({id:c,topic:i,wcDeepLink:v})}g()}),u()]).then(g=>g[2])},this.respond=async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,a=this.client.session.get(r);a.transportType===Os.relay&&await this.confirmOnlineStateOrThrow();const o=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);$h(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:o}):vf(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:o}),this.cleanupAfterResponse(n)},this.ping=async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=qy(),i=ax().toString(),{done:a,resolve:o,reject:c}=Nv();this.events.once(Cr("session_ping",s),({error:l})=>{l?c(l):o()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),a()])}else this.client.core.pairing.pairings.keys.includes(r)&&await this.client.core.pairing.ping({topic:r})},this.emit=async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,a=ax().toString();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:a})},this.disconnect=async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:gs("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=bt("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}},this.find=n=>(this.isInitialized(),this.client.session.getAll().filter(r=>u6t(r,n))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),a=i?Os.link_mode:Os.relay;a===Os.relay&&await this.confirmOnlineStateOrThrow();const{chains:o,statement:c="",uri:l,domain:u,nonce:f,type:d,exp:p,nbf:g,methods:m=[],expiry:v}=n,A=[...n.resources||[]],{topic:S,uri:I}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:a});this.client.logger.info({message:"Generated new pairing",pairing:{topic:S,uri:I}});const B=await this.client.core.crypto.generateKeyPair(),D=X_(B);if(await Promise.all([this.client.auth.authKeys.set(nB,{responseTopic:D,publicKey:B}),this.client.auth.pairingTopics.set(D,{topic:D,pairingTopic:S})]),await this.client.core.relayer.subscribe(D,{transportType:a}),this.client.logger.info(`sending request to new pairing topic: ${S}`),m.length>0){const{namespace:C}=n6(o[0]);let T=O3t(C,"request",m);Z_(A)&&(T=_3t(T,A.pop())),A.push(T)}const V=v&&v>Oa.wc_sessionAuthenticate.req.ttl?v:Oa.wc_sessionAuthenticate.req.ttl,O={authPayload:{type:d??"caip122",chains:o,statement:c,aud:l,domain:u,version:"1",nonce:f,iat:new Date().toISOString(),exp:p,nbf:g,resources:A},requester:{publicKey:B,metadata:this.client.metadata},expiryTimestamp:ma(V)},U={eip155:{chains:o,methods:[...new Set(["personal_sign",...m])],events:["chainChanged","accountsChanged"]}},Q={requiredNamespaces:{},optionalNamespaces:U,relays:[{protocol:"irn"}],pairingTopic:S,proposer:{publicKey:B,metadata:this.client.metadata},expiryTimestamp:ma(Oa.wc_sessionPropose.req.ttl)},{done:ie,resolve:G,reject:R}=Nv(V,"Request expired"),k=async({error:C,session:T})=>{if(this.events.off(Cr("session_request",w),b),C)R(C);else if(T){T.self.publicKey=B,await this.client.session.set(T.topic,T),await this.setExpiry(T.topic,T.expiry),S&&await this.client.core.pairing.updateMetadata({topic:S,metadata:T.peer.metadata});const E=this.client.session.get(T.topic);await this.deleteProposal(N),G({session:E})}},b=async C=>{var T,E,P;if(await this.deletePendingAuthRequest(w,{message:"fulfilled",code:0}),C.error){const ee=gs("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return C.error.code===ee.code?void 0:(this.events.off(Cr("session_connect"),k),R(C.error.message))}await this.deleteProposal(N),this.events.off(Cr("session_connect"),k);const{cacaos:_,responder:H}=C.result,ne=[],$=[];for(const ee of _){await ihe({cacao:ee,projectId:this.client.core.projectId})||(this.client.logger.error(ee,"Signature verification failed"),R(gs("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:X}=ee,j=Z_(X.resources),se=[dY(X.iss)],ye=wD(X.iss);if(j){const Ce=ahe(j),xe=ohe(j);ne.push(...Ce),se.push(...xe)}for(const Ce of se)$.push(`${Ce}:${ye}`)}const te=await this.client.core.crypto.generateSharedKey(B,H.publicKey);let J;ne.length>0&&(J={topic:te,acknowledged:!0,self:{publicKey:B,metadata:this.client.metadata},peer:H,controller:H.publicKey,expiry:ma(iA),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:S,namespaces:mhe([...new Set(ne)],[...new Set($)]),transportType:a},await this.client.core.relayer.subscribe(te,{transportType:a}),await this.client.session.set(te,J),S&&await this.client.core.pairing.updateMetadata({topic:S,metadata:H.metadata}),J=this.client.session.get(te)),(T=this.client.metadata.redirect)!=null&&T.linkMode&&(E=H.metadata.redirect)!=null&&E.linkMode&&(P=H.metadata.redirect)!=null&&P.universal&&r&&(this.client.core.addLinkModeSupportedApp(H.metadata.redirect.universal),this.client.session.update(te,{transportType:Os.link_mode})),G({auths:_,session:J})},w=qy(),N=qy();this.events.once(Cr("session_connect"),k),this.events.once(Cr("session_request",w),b);let L;try{if(i){const C=Mw("wc_sessionAuthenticate",O,w);this.client.core.history.set(S,C);const T=await this.client.core.crypto.encode("",C,{type:b9,encoding:nI});L=aR(r,S,T)}else await Promise.all([this.sendRequest({topic:S,method:"wc_sessionAuthenticate",params:O,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:w}),this.sendRequest({topic:S,method:"wc_sessionPropose",params:Q,expiry:Oa.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:N})])}catch(C){throw this.events.off(Cr("session_connect"),k),this.events.off(Cr("session_request",w),b),C}return await this.setProposal(N,hi({id:N},Q)),await this.setAuthRequest(w,{request:dd(hi({},O),{verifyContext:{}}),pairingTopic:S,transportType:a}),{uri:L??I,response:ie}},this.approveSessionAuthenticate=async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[y1.authenticated_session_approve_started]}});try{this.isInitialized()}catch(v){throw i.setError(iI.no_internet_connection),v}const a=this.getPendingAuthRequest(r);if(!a)throw i.setError(iI.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const o=a.transportType||Os.relay;o===Os.relay&&await this.confirmOnlineStateOrThrow();const c=a.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=X_(c),f={type:Ug,receiverPublicKey:c,senderPublicKey:l},d=[],p=[];for(const v of s){if(!await ihe({cacao:v,projectId:this.client.core.projectId})){i.setError(iI.invalid_cacao);const D=gs("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:D,encodeOpts:f}),new Error(D.message)}i.addTrace(y1.cacaos_verified);const{p:A}=v,S=Z_(A.resources),I=[dY(A.iss)],B=wD(A.iss);if(S){const D=ahe(S),V=ohe(S);d.push(...D),I.push(...V)}for(const D of I)p.push(`${D}:${B}`)}const g=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(y1.create_authenticated_session_topic);let m;if((d==null?void 0:d.length)>0){m={topic:g,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:a.requester.metadata},controller:c,expiry:ma(iA),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:a.pairingTopic,namespaces:mhe([...new Set(d)],[...new Set(p)]),transportType:o},i.addTrace(y1.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(g,{transportType:o})}catch(v){throw i.setError(iI.subscribe_authenticated_session_topic_failure),v}i.addTrace(y1.subscribe_authenticated_session_topic_success),await this.client.session.set(g,m),i.addTrace(y1.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:a.pairingTopic,metadata:a.requester.metadata})}i.addTrace(y1.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:f,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(a.requester.metadata,o)})}catch(v){throw i.setError(iI.authenticated_session_approve_publish_failure),v}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:a.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:m}},this.rejectSessionAuthenticate=async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Os.relay&&await this.confirmOnlineStateOrThrow();const a=i.requester.publicKey,o=await this.client.core.crypto.generateKeyPair(),c=X_(a),l={type:Ug,receiverPublicKey:a,senderPublicKey:o};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Oa.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,gs("USER_DISCONNECTED"))},this.formatAuthMessage=n=>{this.isInitialized();const{request:r,iss:s}=n;return cTe(r,s)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)},this.cleanupDuplicatePairings=async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var a,o;return((a=i.peerMetadata)==null?void 0:a.url)&&((o=i.peerMetadata)==null?void 0:o.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}},this.deleteSession=async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:a=!0,id:o=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,gs("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(i0e).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,gs("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Rh.idle),a&&this.client.events.emit("session_delete",{id:o,topic:s})},this.deleteProposal=async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(m1.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,gs("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")},this.deletePendingSessionRequest=async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Rh.idle,this.client.events.emit("session_request_expire",{id:n}))},this.deletePendingAuthRequest=async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])},this.setExpiry=async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))},this.setProposal=async(n,r)=>{this.client.core.expirer.set(n,ma(Oa.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)},this.setAuthRequest=async(n,r)=>{const{request:s,pairingTopic:i,transportType:a=Os.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:a})},this.setPendingSessionRequest=async n=>{const{id:r,topic:s,params:i,verifyContext:a}=n,o=i.request.expiryTimestamp||ma(Oa.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,o),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:a})},this.sendRequest=async n=>{const{topic:r,method:s,params:i,expiry:a,relayRpcId:o,clientRpcId:c,throwOnFailedPublish:l,appLink:u}=n,f=Mw(s,i,c);let d;const p=!!u;try{const v=p?nI:Bw;d=await this.client.core.crypto.encode(r,f,{encoding:v})}catch(v){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),v}let g;if(yCt.includes(s)){const v=Xp(JSON.stringify(f)),A=Xp(d);g=await this.client.core.verify.register({id:A,decryptedId:v})}const m=Oa[s].req;if(m.attestation=g,a&&(m.ttl=a),o&&(m.id=o),this.client.core.history.set(r,f),p){const v=aR(u,r,d);await global.Linking.openURL(v,this.client.name)}else{const v=Oa[s].req;a&&(v.ttl=a),o&&(v.id=o),l?(v.internal=dd(hi({},v.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,d,v)):this.client.core.relayer.publish(r,d,v).catch(A=>this.client.logger.error(A))}return f.id},this.sendResult=async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:a,encodeOpts:o,appLink:c}=n,l=BF(r,i);let u;const f=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=f?nI:Bw;u=await this.client.core.crypto.encode(s,l,dd(hi({},o||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let d;try{d=await this.client.core.history.get(s,r)}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(f){const p=aR(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=Oa[d.request.method].res;a?(p.internal=dd(hi({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,p)):this.client.core.relayer.publish(s,u,p).catch(g=>this.client.logger.error(g))}await this.client.core.history.resolve(l)},this.sendError=async n=>{const{id:r,topic:s,error:i,encodeOpts:a,rpcOpts:o,appLink:c}=n,l=MF(r,i);let u;const f=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=f?nI:Bw;u=await this.client.core.crypto.encode(s,l,dd(hi({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),p}let d;try{d=await this.client.core.history.get(s,r)}catch(p){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),p}if(f){const p=aR(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=o||Oa[d.request.method].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)},this.cleanup=async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Hy(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Hy(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])},this.onRelayEventRequest=async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Rh.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Rh.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Rh.idle},this.processRequest=async n=>{const{topic:r,payload:s,attestation:i,transportType:a,encryptedId:o}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:o});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:o,transportType:a});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:o,transportType:a});default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async n=>{const{topic:r,payload:s,transportType:i}=n,a=(await this.client.core.history.get(r,s.id)).request.method;switch(a){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${a}`)}},this.onRelayEventUnknownPayload=n=>{const{topic:r}=n,{message:s}=bt("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)},this.shouldIgnorePairingRequest=n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async n=>{const{topic:r,payload:s,attestation:i,encryptedId:a}=n,{params:o,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.isValidConnect(hi({},s.params));const u=o.expiryTimestamp||ma(Oa.wc_sessionPropose.req.ttl),f=hi({id:c,pairingTopic:r,expiryTimestamp:u},o);await this.setProposal(c,f);const d=await this.getVerifyContext({attestationId:i,hash:Xp(JSON.stringify(s)),encryptedId:a,metadata:f.proposer.metadata});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Hp.proposal_listener_not_found)),l==null||l.addTrace(Uh.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:f,verifyContext:d})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Oa.wc_sessionPropose.autoReject}),this.client.logger.error(l)}},this.onSessionProposeResponse=async(n,r,s)=>{const{id:i}=r;if($h(r)){const{result:a}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:a});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const c=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=a.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:u});const f=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:f}),await this.client.core.pairing.activate({topic:n})}else if(vf(r)){await this.client.proposal.delete(i,gs("USER_DISCONNECTED"));const a=Cr("session_connect");if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners, 954`);this.events.emit(Cr("session_connect"),{error:r.error})}},this.onSessionSettleRequest=async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:a,controller:o,expiry:c,namespaces:l,sessionProperties:u,sessionConfig:f}=r.params,d=dd(hi(hi({topic:n,relay:a,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:o.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}},u&&{sessionProperties:u}),f&&{sessionConfig:f}),{transportType:Os.relay}),p=Cr("session_connect");if(this.events.listenerCount(p)===0)throw new Error(`emitting ${p} without any listeners 997`);this.events.emit(Cr("session_connect"),{session:d}),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(a){await this.sendError({id:s,topic:n,error:a}),this.client.logger.error(a)}},this.onSessionSettleResponse=async(n,r)=>{const{id:s}=r;$h(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Cr("session_approve",s),{})):vf(r)&&(await this.client.session.delete(n,gs("USER_DISCONNECTED")),this.events.emit(Cr("session_approve",s),{error:r.error}))},this.onSessionUpdateRequest=async(n,r)=>{const{params:s,id:i}=r;try{const a=`${n}_session_update`,o=rI.get(a);if(o&&this.isRequestOutOfSync(o,i)){this.client.logger.info(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:gs("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(hi({topic:n},s));try{rI.set(a,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw rI.delete(a),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(a){await this.sendError({id:i,topic:n,error:a}),this.client.logger.error(a)}},this.isRequestOutOfSync=(n,r)=>parseInt(r.toString().slice(0,-3))<=parseInt(n.toString().slice(0,-3)),this.onSessionUpdateResponse=(n,r)=>{const{id:s}=r,i=Cr("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);$h(r)?this.events.emit(Cr("session_update",s),{}):vf(r)&&this.events.emit(Cr("session_update",s),{error:r.error})},this.onSessionExtendRequest=async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,ma(iA)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}},this.onSessionExtendResponse=(n,r)=>{const{id:s}=r,i=Cr("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);$h(r)?this.events.emit(Cr("session_extend",s),{}):vf(r)&&this.events.emit(Cr("session_extend",s),{error:r.error})},this.onSessionPingRequest=async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}},this.onSessionPingResponse=(n,r)=>{const{id:s}=r,i=Cr("session_ping",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);setTimeout(()=>{$h(r)?this.events.emit(Cr("session_ping",s),{}):vf(r)&&this.events.emit(Cr("session_ping",s),{error:r.error})},500)},this.onSessionDeleteRequest=async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Pc.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:gs("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}},this.onSessionRequest=async n=>{var r,s,i;const{topic:a,payload:o,attestation:c,encryptedId:l,transportType:u}=n,{id:f,params:d}=o;try{await this.isValidRequest(hi({topic:a},d));const p=this.client.session.get(a),g=await this.getVerifyContext({attestationId:c,hash:Xp(JSON.stringify(Mw("wc_sessionRequest",d,f))),encryptedId:l,metadata:p.peer.metadata,transportType:u}),m={id:f,topic:a,params:d,verifyContext:g};await this.setPendingSessionRequest(m),u===Os.link_mode&&(r=p.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=p.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(m):(this.addSessionRequestToSessionRequestQueue(m),this.processSessionRequestQueue())}catch(p){await this.sendError({id:f,topic:a,error:p}),this.client.logger.error(p)}},this.onSessionRequestResponse=(n,r)=>{const{id:s}=r,i=Cr("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);$h(r)?this.events.emit(Cr("session_request",s),{result:r.result}):vf(r)&&this.events.emit(Cr("session_request",s),{error:r.error})},this.onSessionEventRequest=async(n,r)=>{const{id:s,params:i}=r;try{const a=`${n}_session_event_${i.event.name}`,o=rI.get(a);if(o&&this.isRequestOutOfSync(o,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(hi({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),rI.set(a,s)}catch(a){await this.sendError({id:s,topic:n,error:a}),this.client.logger.error(a)}},this.onSessionAuthenticateResponse=(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),$h(r)?this.events.emit(Cr("session_request",s),{result:r.result}):vf(r)&&this.events.emit(Cr("session_request",s),{error:r.error})},this.onSessionAuthenticateRequest=async n=>{var r;const{topic:s,payload:i,attestation:a,encryptedId:o,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:f}=i.params,d=await this.getVerifyContext({attestationId:a,hash:Xp(JSON.stringify(i)),encryptedId:o,metadata:l.metadata,transportType:c}),p={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:d,expiryTimestamp:f};await this.setAuthRequest(i.id,{request:p,pairingTopic:s,transportType:c}),c===Os.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:d})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,f=await this.client.core.crypto.generateKeyPair(),d=this.getAppLinkIfEnabled(i.params.requester.metadata,c),p={type:Ug,receiverPublicKey:u,senderPublicKey:f};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:p,rpcOpts:Oa.wc_sessionAuthenticate.autoReject,appLink:d})}},this.addSessionRequestToSessionRequestQueue=n=>{this.sessionRequestQueue.queue.push(n)},this.cleanupAfterResponse=n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Rh.idle,this.processSessionRequestQueue()},vt.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const a=i.request.id,o=Cr("session_request",a);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);this.events.emit(Cr("session_request",i.request.id),{error:r})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Rh.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Rh.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}},this.emitSessionRequest=n=>{this.client.events.emit("session_request",n)},this.onPairingCreated=n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Mw("wc_sessionPropose",{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties},r.id)})},this.isValidConnect=async n=>{if(!il(n)){const{message:c}=bt("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(c)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:a,relays:o}=n;if(Oc(r)||await this.isValidPairingTopic(r),!E6t(o)){const{message:c}=bt("MISSING_OR_INVALID",`connect() relays: ${o}`);throw new Error(c)}!Oc(s)&&Qk(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!Oc(i)&&Qk(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Oc(a)||this.validateSessionProps(a,"sessionProperties")},this.validateNamespaces=(n,r)=>{const s=x6t(n,"connect()",r);if(s)throw new Error(s.message)},this.isValidApprove=async n=>{if(!il(n))throw new Error(bt("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const o=this.client.proposal.get(r),c=$q(s,"approve()");if(c)throw new Error(c.message);const l=bhe(o.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!Di(i,!0)){const{message:u}=bt("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(u)}Oc(a)||this.validateSessionProps(a,"sessionProperties")},this.isValidReject=async n=>{if(!il(n)){const{message:i}=bt("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!S6t(s)){const{message:i}=bt("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}},this.isValidSessionSettleRequest=n=>{if(!il(n)){const{message:l}=bt("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:a}=n;if(!mTe(r)){const{message:l}=bt("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const o=g6t(s,"onSessionSettleRequest()");if(o)throw new Error(o.message);const c=$q(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Hy(a)){const{message:l}=bt("EXPIRED","onSessionSettleRequest()");throw new Error(l)}},this.isValidUpdate=async n=>{if(!il(n)){const{message:c}=bt("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),a=$q(s,"update()");if(a)throw new Error(a.message);const o=bhe(i.requiredNamespaces,s,"update()");if(o)throw new Error(o.message)},this.isValidExtend=async n=>{if(!il(n)){const{message:s}=bt("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)},this.isValidRequest=async n=>{if(!il(n)){const{message:c}=bt("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:a}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!whe(o,i)){const{message:c}=bt("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!I6t(s)){const{message:c}=bt("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!N6t(o,i,s.method)){const{message:c}=bt("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(a&&!R6t(a,Jq)){const{message:c}=bt("MISSING_OR_INVALID",`request() expiry: ${a}. Expiry must be a number (in seconds) between ${Jq.min} and ${Jq.max}`);throw new Error(c)}},this.isValidRespond=async n=>{var r;if(!il(n)){const{message:a}=bt("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(a)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(a){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),a}if(!C6t(i)){const{message:a}=bt("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidPing=async n=>{if(!il(n)){const{message:s}=bt("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)},this.isValidEmit=async n=>{if(!il(n)){const{message:o}=bt("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(o)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!whe(a,i)){const{message:o}=bt("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(o)}if(!T6t(s)){const{message:o}=bt("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(o)}if(!k6t(a,i,s.name)){const{message:o}=bt("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidDisconnect=async n=>{if(!il(n)){const{message:s}=bt("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)},this.isValidAuthenticate=n=>{const{chains:r,uri:s,domain:i,nonce:a}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Di(s,!1))throw new Error("uri is required parameter");if(!Di(i,!1))throw new Error("domain is required parameter");if(!Di(a,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>n6(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:o}=n6(r[0]);if(o!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:a,transportType:o}=n,c={verified:{verifyUrl:a.verifyUrl||bN,validation:"UNKNOWN",origin:a.url||""}};try{if(o===Os.link_mode){const u=this.getAppLinkIfEnabled(a,o);return c.verified.validation=u&&new URL(u).origin===new URL(a.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:a.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(a.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c},this.validateSessionProps=(n,r)=>{Object.values(n).forEach(s=>{if(!Di(s,!1)){const{message:i}=bt("MISSING_OR_INVALID",`${r} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(i)}})},this.getPendingAuthRequest=n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0},this.addToRecentlyDeleted=(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const a of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(a)}}},this.checkRecentlyDeleted=n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=bt("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}},this.isLinkModeEnabled=(n,r)=>{var s,i,a,o,c,l,u,f,d;return!n||r!==Os.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((o=(a=this.client.metadata)==null?void 0:a.redirect)==null?void 0:o.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((f=n==null?void 0:n.redirect)==null?void 0:f.universal)!==""&&((d=n==null?void 0:n.redirect)==null?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"},this.getAppLinkIfEnabled=(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0},this.handleLinkModeMessage=({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=the(n,"topic")||"",s=decodeURIComponent(the(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Os.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})},this.registerLinkModeListeners=async()=>{var n;if(hne()||L4()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}}isInitialized(){if(!this.initialized){const{message:e}=bt("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Pc.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:a}=this.client.auth.authKeys.keys.includes(nB)?this.client.auth.authKeys.get(nB):{publicKey:void 0},o=await this.client.core.crypto.decode(n,r,{receiverPublicKey:a,encoding:i===Os.link_mode?nI:Bw});try{vne(o)?(this.client.core.history.set(n,o),this.onRelayEventRequest({topic:n,payload:o,attestation:s,transportType:i,encryptedId:Xp(r)})):DF(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:n,payload:o,transportType:i}),this.client.core.history.delete(n,o.id)):this.onRelayEventUnknownPayload({topic:n,payload:o,transportType:i})}catch(c){this.client.logger.error(c)}}registerExpirerEvents(){this.client.core.expirer.on(of.expired,async e=>{const{topic:n,id:r}=aTe(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,bt("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,bt("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Uv.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Uv.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Di(e,!1)){const{message:n}=bt("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=bt("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Hy(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=bt("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Di(e,!1)){const{message:n}=bt("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=bt("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Hy(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=bt("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=bt("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Di(e,!1)){const{message:n}=bt("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=bt("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!A6t(e)){const{message:n}=bt("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=bt("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Hy(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=bt("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class kCt extends rE{constructor(e,n){super(e,n,hCt,xne),this.core=e,this.logger=n}}let PCt=class extends rE{constructor(e,n){super(e,n,pCt,xne),this.core=e,this.logger=n}};class OCt extends rE{constructor(e,n){super(e,n,mCt,xne,r=>r.id),this.core=e,this.logger=n}}class RCt extends rE{constructor(e,n){super(e,n,vCt,UF,()=>nB),this.core=e,this.logger=n}}class _Ct extends rE{constructor(e,n){super(e,n,xCt,UF),this.core=e,this.logger=n}}class BCt extends rE{constructor(e,n){super(e,n,ECt,UF,r=>r.id),this.core=e,this.logger=n}}class MCt{constructor(e,n){this.core=e,this.logger=n,this.authKeys=new RCt(this.core,this.logger),this.pairingTopics=new _Ct(this.core,this.logger),this.requests=new BCt(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class FF extends a4t{constructor(e){super(e),this.protocol=KTe,this.version=GTe,this.name=zq.name,this.events=new Bu.EventEmitter,this.on=(r,s)=>this.events.on(r,s),this.once=(r,s)=>this.events.once(r,s),this.off=(r,s)=>this.events.off(r,s),this.removeListener=(r,s)=>this.events.removeListener(r,s),this.removeAllListeners=r=>this.events.removeAllListeners(r),this.connect=async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}},this.pair=async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}},this.approve=async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}},this.reject=async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}},this.update=async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}},this.extend=async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}},this.request=async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}},this.respond=async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}},this.ping=async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}},this.emit=async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}},this.disconnect=async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}},this.find=r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}},this.authenticate=async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}},this.formatAuthMessage=r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}},this.approveSessionAuthenticate=async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}},this.rejectSessionAuthenticate=async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||zq.name,this.metadata=(e==null?void 0:e.metadata)||tTe(),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:x9(_F({level:(e==null?void 0:e.logger)||zq.logger}));this.core=(e==null?void 0:e.core)||new dCt(e),this.logger=zc(n,this.name),this.session=new PCt(this.core,this.logger),this.proposal=new kCt(this.core,this.logger),this.pendingRequest=new OCt(this.core,this.logger),this.engine=new NCt(this),this.auth=new MCt(this.core,this.logger)}static async init(e){const n=new FF(e);return await n.initialize(),n}get context(){return _l(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache()}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var AD={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */AD.exports;(function(t,e){(function(){var n,r="4.17.21",s=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",f=1,d=2,p=4,g=1,m=2,v=1,A=2,S=4,I=8,B=16,D=32,V=64,O=128,U=256,Q=512,ie=30,G="...",R=800,k=16,b=1,w=2,N=3,L=1/0,C=9007199254740991,T=17976931348623157e292,E=NaN,P=4294967295,_=P-1,H=P>>>1,ne=[["ary",O],["bind",v],["bindKey",A],["curry",I],["curryRight",B],["flip",Q],["partial",D],["partialRight",V],["rearg",U]],$="[object Arguments]",te="[object Array]",J="[object AsyncFunction]",ee="[object Boolean]",X="[object Date]",j="[object DOMException]",se="[object Error]",ye="[object Function]",Ce="[object GeneratorFunction]",xe="[object Map]",De="[object Number]",qe="[object Null]",ze="[object Object]",ft="[object Promise]",mt="[object Proxy]",Be="[object RegExp]",de="[object Set]",oe="[object String]",fe="[object Symbol]",ce="[object Undefined]",ae="[object WeakMap]",Ie="[object WeakSet]",nt="[object ArrayBuffer]",yt="[object DataView]",Tt="[object Float32Array]",at="[object Float64Array]",It="[object Int8Array]",_t="[object Int16Array]",pt="[object Int32Array]",$t="[object Uint8Array]",Pt="[object Uint8ClampedArray]",jt="[object Uint16Array]",En="[object Uint32Array]",An=/\b__p \+= '';/g,At=/\b(__p \+=) '' \+/g,Sn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Hn=/&(?:amp|lt|gt|quot|#39);/g,Qt=/[&<>"']/g,nn=RegExp(Hn.source),sn=RegExp(Qt.source),Nt=/<%-([\s\S]+?)%>/g,un=/<%([\s\S]+?)%>/g,Xt=/<%=([\s\S]+?)%>/g,Ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,In=/^\w*$/,Cn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kt=/[\\^$.*+?()[\]{}|]/g,Ht=RegExp(kt.source),an=/^\s+/,ct=/\s/,yn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qt=/\{\n\/\* \[wrapped with (.+)\] \*/,xt=/,? & /,Tn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fr=/[()=,{}\[\]\/\s]/,hn=/\\(\\)?/g,Or=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qn=/\w*$/,Dr=/^[-+]0x[0-9a-f]+$/i,ca=/^0b[01]+$/i,la=/^\[object .+?Constructor\]$/,ua=/^0o[0-7]+$/i,Na=/^(?:0|[1-9]\d*)$/,Js=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ro=/($^)/,_o=/['\n\r\u2028\u2029\\]/g,Bo="\\ud800-\\udfff",to="\\u0300-\\u036f",Ml="\\ufe20-\\ufe2f",fa="\\u20d0-\\u20ff",ka=to+Ml+fa,dc="\\u2700-\\u27bf",ni="a-z\\xdf-\\xf6\\xf8-\\xff",Dl="\\xac\\xb1\\xd7\\xf7",Ll="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ul="\\u2000-\\u206f",X0=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Uu="A-Z\\xc0-\\xd6\\xd8-\\xde",iE="\\ufe0e\\ufe0f",ep=Dl+Ll+Ul+X0,jb="[']",tp="["+Bo+"]",yh="["+ep+"]",wh="["+ka+"]",aE="\\d+",fm="["+dc+"]",Hb="["+ni+"]",dr="[^"+Bo+ep+aE+dc+ni+Uu+"]",dm="\\ud83c[\\udffb-\\udfff]",$4="(?:"+wh+"|"+dm+")",Mo="[^"+Bo+"]",hm="(?:\\ud83c[\\udde6-\\uddff]){2}",Zf="[\\ud800-\\udbff][\\udc00-\\udfff]",Do="["+Uu+"]",np="\\u200d",oE="(?:"+Hb+"|"+dr+")",Jc="(?:"+Do+"|"+dr+")",cE="(?:"+jb+"(?:d|ll|m|re|s|t|ve))?",pm="(?:"+jb+"(?:D|LL|M|RE|S|T|VE))?",lE=$4+"?",qb="["+iE+"]?",j4="(?:"+np+"(?:"+[Mo,hm,Zf].join("|")+")"+qb+lE+")*",Fl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",gm=qb+lE+j4,mm="(?:"+[fm,hm,Zf].join("|")+")"+gm,H4="(?:"+[Mo+wh+"?",wh,hm,Zf,tp].join("|")+")",hc=RegExp(jb,"g"),uE=RegExp(wh,"g"),ym=RegExp(dm+"(?="+dm+")|"+H4+gm,"g"),fE=RegExp([Do+"?"+Hb+"+"+cE+"(?="+[yh,Do,"$"].join("|")+")",Jc+"+"+pm+"(?="+[yh,Do+oE,"$"].join("|")+")",Do+"?"+oE+"+"+cE,Do+"+"+pm,Yc,Fl,aE,mm].join("|"),"g"),dE=RegExp("["+np+Bo+ka+iE+"]"),Xf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,hE=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kb=-1,ds={};ds[Tt]=ds[at]=ds[It]=ds[_t]=ds[pt]=ds[$t]=ds[Pt]=ds[jt]=ds[En]=!0,ds[$]=ds[te]=ds[nt]=ds[ee]=ds[yt]=ds[X]=ds[se]=ds[ye]=ds[xe]=ds[De]=ds[ze]=ds[Be]=ds[de]=ds[oe]=ds[ae]=!1;var is={};is[$]=is[te]=is[nt]=is[yt]=is[ee]=is[X]=is[Tt]=is[at]=is[It]=is[_t]=is[pt]=is[xe]=is[De]=is[ze]=is[Be]=is[de]=is[oe]=is[fe]=is[$t]=is[Pt]=is[jt]=is[En]=!0,is[se]=is[ye]=is[ae]=!1;var be={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Oe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Bt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},hs=parseFloat,Kn=parseInt,As=typeof cs=="object"&&cs&&cs.Object===Object&&cs,Ns=typeof self=="object"&&self&&self.Object===Object&&self,Ar=As||Ns||Function("return this")(),as=e&&!e.nodeType&&e,Ys=as&&!0&&t&&!t.nodeType&&t,Lo=Ys&&Ys.exports===as,fi=Lo&&As.process,ws=function(){try{var Pe=Ys&&Ys.require&&Ys.require("util").types;return Pe||fi&&fi.binding&&fi.binding("util")}catch{}}(),no=ws&&ws.isArrayBuffer,Vl=ws&&ws.isDate,Qc=ws&&ws.isMap,Fu=ws&&ws.isRegExp,Gb=ws&&ws.isSet,rp=ws&&ws.isTypedArray;function zi(Pe,We,He){switch(He.length){case 0:return Pe.call(We);case 1:return Pe.call(We,He[0]);case 2:return Pe.call(We,He[0],He[1]);case 3:return Pe.call(We,He[0],He[1],He[2])}return Pe.apply(We,He)}function VF(Pe,We,He,Ut){for(var jn=-1,qr=Pe==null?0:Pe.length;++jn<qr;){var Ni=Pe[jn];We(Ut,Ni,He(Ni),Pe)}return Ut}function Zc(Pe,We){for(var He=-1,Ut=Pe==null?0:Pe.length;++He<Ut&&We(Pe[He],He,Pe)!==!1;);return Pe}function $F(Pe,We){for(var He=Pe==null?0:Pe.length;He--&&We(Pe[He],He,Pe)!==!1;);return Pe}function S9(Pe,We){for(var He=-1,Ut=Pe==null?0:Pe.length;++He<Ut;)if(!We(Pe[He],He,Pe))return!1;return!0}function Vu(Pe,We){for(var He=-1,Ut=Pe==null?0:Pe.length,jn=0,qr=[];++He<Ut;){var Ni=Pe[He];We(Ni,He,Pe)&&(qr[jn++]=Ni)}return qr}function pE(Pe,We){var He=Pe==null?0:Pe.length;return!!He&&wm(Pe,We,0)>-1}function q4(Pe,We,He){for(var Ut=-1,jn=Pe==null?0:Pe.length;++Ut<jn;)if(He(We,Pe[Ut]))return!0;return!1}function ks(Pe,We){for(var He=-1,Ut=Pe==null?0:Pe.length,jn=Array(Ut);++He<Ut;)jn[He]=We(Pe[He],He,Pe);return jn}function ed(Pe,We){for(var He=-1,Ut=We.length,jn=Pe.length;++He<Ut;)Pe[jn+He]=We[He];return Pe}function K4(Pe,We,He,Ut){var jn=-1,qr=Pe==null?0:Pe.length;for(Ut&&qr&&(He=Pe[++jn]);++jn<qr;)He=We(He,Pe[jn],jn,Pe);return He}function jF(Pe,We,He,Ut){var jn=Pe==null?0:Pe.length;for(Ut&&jn&&(He=Pe[--jn]);jn--;)He=We(He,Pe[jn],jn,Pe);return He}function G4(Pe,We){for(var He=-1,Ut=Pe==null?0:Pe.length;++He<Ut;)if(We(Pe[He],He,Pe))return!0;return!1}var HF=W4("length");function qF(Pe){return Pe.split("")}function KF(Pe){return Pe.match(Tn)||[]}function I9(Pe,We,He){var Ut;return He(Pe,function(jn,qr,Ni){if(We(jn,qr,Ni))return Ut=qr,!1}),Ut}function gE(Pe,We,He,Ut){for(var jn=Pe.length,qr=He+(Ut?1:-1);Ut?qr--:++qr<jn;)if(We(Pe[qr],qr,Pe))return qr;return-1}function wm(Pe,We,He){return We===We?B9(Pe,We,He):gE(Pe,C9,He)}function GF(Pe,We,He,Ut){for(var jn=He-1,qr=Pe.length;++jn<qr;)if(Ut(Pe[jn],We))return jn;return-1}function C9(Pe){return Pe!==Pe}function T9(Pe,We){var He=Pe==null?0:Pe.length;return He?sp(Pe,We)/He:E}function W4(Pe){return function(We){return We==null?n:We[Pe]}}function z4(Pe){return function(We){return Pe==null?n:Pe[We]}}function mE(Pe,We,He,Ut,jn){return jn(Pe,function(qr,Ni,ps){He=Ut?(Ut=!1,qr):We(He,qr,Ni,ps)}),He}function WF(Pe,We){var He=Pe.length;for(Pe.sort(We);He--;)Pe[He]=Pe[He].value;return Pe}function sp(Pe,We){for(var He,Ut=-1,jn=Pe.length;++Ut<jn;){var qr=We(Pe[Ut]);qr!==n&&(He=He===n?qr:He+qr)}return He}function J4(Pe,We){for(var He=-1,Ut=Array(Pe);++He<Pe;)Ut[He]=We(He);return Ut}function zF(Pe,We){return ks(We,function(He){return[He,Pe[He]]})}function N9(Pe){return Pe&&Pe.slice(0,D9(Pe)+1).replace(an,"")}function pc(Pe){return function(We){return Pe(We)}}function Y4(Pe,We){return ks(We,function(He){return Pe[He]})}function Wb(Pe,We){return Pe.has(We)}function k9(Pe,We){for(var He=-1,Ut=Pe.length;++He<Ut&&wm(We,Pe[He],0)>-1;);return He}function P9(Pe,We){for(var He=Pe.length;He--&&wm(We,Pe[He],0)>-1;);return He}function JF(Pe,We){for(var He=Pe.length,Ut=0;He--;)Pe[He]===We&&++Ut;return Ut}var YF=z4(be),$s=z4(Oe);function O9(Pe){return"\\"+Bt[Pe]}function td(Pe,We){return Pe==null?n:Pe[We]}function bh(Pe){return dE.test(Pe)}function R9(Pe){return Xf.test(Pe)}function wr(Pe){for(var We,He=[];!(We=Pe.next()).done;)He.push(We.value);return He}function yE(Pe){var We=-1,He=Array(Pe.size);return Pe.forEach(function(Ut,jn){He[++We]=[jn,Ut]}),He}function Q4(Pe,We){return function(He){return Pe(We(He))}}function nd(Pe,We){for(var He=-1,Ut=Pe.length,jn=0,qr=[];++He<Ut;){var Ni=Pe[He];(Ni===We||Ni===u)&&(Pe[He]=u,qr[jn++]=He)}return qr}function zb(Pe){var We=-1,He=Array(Pe.size);return Pe.forEach(function(Ut){He[++We]=Ut}),He}function _9(Pe){var We=-1,He=Array(Pe.size);return Pe.forEach(function(Ut){He[++We]=[Ut,Ut]}),He}function B9(Pe,We,He){for(var Ut=He-1,jn=Pe.length;++Ut<jn;)if(Pe[Ut]===We)return Ut;return-1}function M9(Pe,We,He){for(var Ut=He+1;Ut--;)if(Pe[Ut]===We)return Ut;return Ut}function ip(Pe){return bh(Pe)?ZF(Pe):HF(Pe)}function $l(Pe){return bh(Pe)?XF(Pe):qF(Pe)}function D9(Pe){for(var We=Pe.length;We--&&ct.test(Pe.charAt(We)););return We}var QF=z4(rt);function ZF(Pe){for(var We=ym.lastIndex=0;ym.test(Pe);)++We;return We}function XF(Pe){return Pe.match(ym)||[]}function eV(Pe){return Pe.match(fE)||[]}var tV=function Pe(We){We=We==null?Ar:bm.defaults(Ar.Object(),We,bm.pick(Ar,hE));var He=We.Array,Ut=We.Date,jn=We.Error,qr=We.Function,Ni=We.Math,ps=We.Object,Z4=We.RegExp,nV=We.String,Xc=We.TypeError,wE=He.prototype,rV=qr.prototype,vm=ps.prototype,bE=We["__core-js_shared__"],vE=rV.toString,Xr=vm.hasOwnProperty,sV=0,L9=function(){var h=/[^.]+$/.exec(bE&&bE.keys&&bE.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),xE=vm.toString,iV=vE.call(ps),aV=Ar._,oV=Z4("^"+vE.call(Xr).replace(kt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),EE=Lo?We.Buffer:n,vh=We.Symbol,AE=We.Uint8Array,Jb=EE?EE.allocUnsafe:n,Yb=Q4(ps.getPrototypeOf,ps),X4=ps.create,W=vm.propertyIsEnumerable,z=wE.splice,le=vh?vh.isConcatSpreadable:n,me=vh?vh.iterator:n,Ae=vh?vh.toStringTag:n,Ne=function(){try{var h=n1(ps,"defineProperty");return h({},"",{}),h}catch{}}(),Ue=We.clearTimeout!==Ar.clearTimeout&&We.clearTimeout,Me=Ut&&Ut.now!==Ar.Date.now&&Ut.now,Je=We.setTimeout!==Ar.setTimeout&&We.setTimeout,lt=Ni.ceil,wt=Ni.floor,on=ps.getOwnPropertySymbols,br=EE?EE.isBuffer:n,Vr=We.isFinite,Ps=wE.join,ki=Q4(ps.keys,ps),ir=Ni.max,Sr=Ni.min,ap=Ut.now,ro=We.parseInt,$u=Ni.random,SE=wE.reverse,e8=n1(We,"DataView"),xm=n1(We,"Map"),IE=n1(We,"Promise"),op=n1(We,"Set"),xh=n1(We,"WeakMap"),Eh=n1(ps,"create"),Qb=xh&&new xh,CE={},YNe=r1(e8),QNe=r1(xm),ZNe=r1(IE),XNe=r1(op),eke=r1(xh),U9=vh?vh.prototype:n,t8=U9?U9.valueOf:n,Bne=U9?U9.toString:n;function he(h){if(di(h)&&!Yn(h)&&!(h instanceof Rr)){if(h instanceof ju)return h;if(Xr.call(h,"__wrapped__"))return Mre(h)}return new ju(h)}var TE=function(){function h(){}return function(y){if(!ri(y))return{};if(X4)return X4(y);h.prototype=y;var M=new h;return h.prototype=n,M}}();function F9(){}function ju(h,y){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=n}he.templateSettings={escape:Nt,evaluate:un,interpolate:Xt,variable:"",imports:{_:he}},he.prototype=F9.prototype,he.prototype.constructor=he,ju.prototype=TE(F9.prototype),ju.prototype.constructor=ju;function Rr(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=P,this.__views__=[]}function tke(){var h=new Rr(this.__wrapped__);return h.__actions__=el(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=el(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=el(this.__views__),h}function nke(){if(this.__filtered__){var h=new Rr(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function rke(){var h=this.__wrapped__.value(),y=this.__dir__,M=Yn(h),K=y<0,re=M?h.length:0,pe=g7e(0,re,this.__views__),Ee=pe.start,Te=pe.end,_e=Te-Ee,Qe=K?Te:Ee-1,Xe=this.__iteratees__,it=Xe.length,St=0,en=Sr(_e,this.__takeCount__);if(!M||!K&&re==_e&&en==_e)return sre(h,this.__actions__);var _n=[];e:for(;_e--&&St<en;){Qe+=y;for(var ar=-1,Bn=h[Qe];++ar<it;){var Ir=Xe[ar],Lr=Ir.iteratee,ql=Ir.type,yc=Lr(Bn);if(ql==w)Bn=yc;else if(!yc){if(ql==b)continue e;break e}}_n[St++]=Bn}return _n}Rr.prototype=TE(F9.prototype),Rr.prototype.constructor=Rr;function Zb(h){var y=-1,M=h==null?0:h.length;for(this.clear();++y<M;){var K=h[y];this.set(K[0],K[1])}}function ske(){this.__data__=Eh?Eh(null):{},this.size=0}function ike(h){var y=this.has(h)&&delete this.__data__[h];return this.size-=y?1:0,y}function ake(h){var y=this.__data__;if(Eh){var M=y[h];return M===c?n:M}return Xr.call(y,h)?y[h]:n}function oke(h){var y=this.__data__;return Eh?y[h]!==n:Xr.call(y,h)}function cke(h,y){var M=this.__data__;return this.size+=this.has(h)?0:1,M[h]=Eh&&y===n?c:y,this}Zb.prototype.clear=ske,Zb.prototype.delete=ike,Zb.prototype.get=ake,Zb.prototype.has=oke,Zb.prototype.set=cke;function cp(h){var y=-1,M=h==null?0:h.length;for(this.clear();++y<M;){var K=h[y];this.set(K[0],K[1])}}function lke(){this.__data__=[],this.size=0}function uke(h){var y=this.__data__,M=V9(y,h);if(M<0)return!1;var K=y.length-1;return M==K?y.pop():z.call(y,M,1),--this.size,!0}function fke(h){var y=this.__data__,M=V9(y,h);return M<0?n:y[M][1]}function dke(h){return V9(this.__data__,h)>-1}function hke(h,y){var M=this.__data__,K=V9(M,h);return K<0?(++this.size,M.push([h,y])):M[K][1]=y,this}cp.prototype.clear=lke,cp.prototype.delete=uke,cp.prototype.get=fke,cp.prototype.has=dke,cp.prototype.set=hke;function lp(h){var y=-1,M=h==null?0:h.length;for(this.clear();++y<M;){var K=h[y];this.set(K[0],K[1])}}function pke(){this.size=0,this.__data__={hash:new Zb,map:new(xm||cp),string:new Zb}}function gke(h){var y=Z9(this,h).delete(h);return this.size-=y?1:0,y}function mke(h){return Z9(this,h).get(h)}function yke(h){return Z9(this,h).has(h)}function wke(h,y){var M=Z9(this,h),K=M.size;return M.set(h,y),this.size+=M.size==K?0:1,this}lp.prototype.clear=pke,lp.prototype.delete=gke,lp.prototype.get=mke,lp.prototype.has=yke,lp.prototype.set=wke;function Xb(h){var y=-1,M=h==null?0:h.length;for(this.__data__=new lp;++y<M;)this.add(h[y])}function bke(h){return this.__data__.set(h,c),this}function vke(h){return this.__data__.has(h)}Xb.prototype.add=Xb.prototype.push=bke,Xb.prototype.has=vke;function rd(h){var y=this.__data__=new cp(h);this.size=y.size}function xke(){this.__data__=new cp,this.size=0}function Eke(h){var y=this.__data__,M=y.delete(h);return this.size=y.size,M}function Ake(h){return this.__data__.get(h)}function Ske(h){return this.__data__.has(h)}function Ike(h,y){var M=this.__data__;if(M instanceof cp){var K=M.__data__;if(!xm||K.length<s-1)return K.push([h,y]),this.size=++M.size,this;M=this.__data__=new lp(K)}return M.set(h,y),this.size=M.size,this}rd.prototype.clear=xke,rd.prototype.delete=Eke,rd.prototype.get=Ake,rd.prototype.has=Ske,rd.prototype.set=Ike;function Mne(h,y){var M=Yn(h),K=!M&&s1(h),re=!M&&!K&&Cm(h),pe=!M&&!K&&!re&&OE(h),Ee=M||K||re||pe,Te=Ee?J4(h.length,nV):[],_e=Te.length;for(var Qe in h)(y||Xr.call(h,Qe))&&!(Ee&&(Qe=="length"||re&&(Qe=="offset"||Qe=="parent")||pe&&(Qe=="buffer"||Qe=="byteLength"||Qe=="byteOffset")||hp(Qe,_e)))&&Te.push(Qe);return Te}function Dne(h){var y=h.length;return y?h[wV(0,y-1)]:n}function Cke(h,y){return X9(el(h),e1(y,0,h.length))}function Tke(h){return X9(el(h))}function cV(h,y,M){(M!==n&&!sd(h[y],M)||M===n&&!(y in h))&&up(h,y,M)}function n8(h,y,M){var K=h[y];(!(Xr.call(h,y)&&sd(K,M))||M===n&&!(y in h))&&up(h,y,M)}function V9(h,y){for(var M=h.length;M--;)if(sd(h[M][0],y))return M;return-1}function Nke(h,y,M,K){return Em(h,function(re,pe,Ee){y(K,re,M(re),Ee)}),K}function Lne(h,y){return h&&Sh(y,Pa(y),h)}function kke(h,y){return h&&Sh(y,nl(y),h)}function up(h,y,M){y=="__proto__"&&Ne?Ne(h,y,{configurable:!0,enumerable:!0,value:M,writable:!0}):h[y]=M}function lV(h,y){for(var M=-1,K=y.length,re=He(K),pe=h==null;++M<K;)re[M]=pe?n:HV(h,y[M]);return re}function e1(h,y,M){return h===h&&(M!==n&&(h=h<=M?h:M),y!==n&&(h=h>=y?h:y)),h}function Hu(h,y,M,K,re,pe){var Ee,Te=y&f,_e=y&d,Qe=y&p;if(M&&(Ee=re?M(h,K,re,pe):M(h)),Ee!==n)return Ee;if(!ri(h))return h;var Xe=Yn(h);if(Xe){if(Ee=y7e(h),!Te)return el(h,Ee)}else{var it=Uo(h),St=it==ye||it==Ce;if(Cm(h))return ore(h,Te);if(it==ze||it==$||St&&!re){if(Ee=_e||St?{}:Cre(h),!Te)return _e?a7e(h,kke(Ee,h)):i7e(h,Lne(Ee,h))}else{if(!is[it])return re?h:{};Ee=w7e(h,it,Te)}}pe||(pe=new rd);var en=pe.get(h);if(en)return en;pe.set(h,Ee),tse(h)?h.forEach(function(Bn){Ee.add(Hu(Bn,y,M,Bn,h,pe))}):Xre(h)&&h.forEach(function(Bn,Ir){Ee.set(Ir,Hu(Bn,y,M,Ir,h,pe))});var _n=Qe?_e?kV:NV:_e?nl:Pa,ar=Xe?n:_n(h);return Zc(ar||h,function(Bn,Ir){ar&&(Ir=Bn,Bn=h[Ir]),n8(Ee,Ir,Hu(Bn,y,M,Ir,h,pe))}),Ee}function Pke(h){var y=Pa(h);return function(M){return Une(M,h,y)}}function Une(h,y,M){var K=M.length;if(h==null)return!K;for(h=ps(h);K--;){var re=M[K],pe=y[re],Ee=h[re];if(Ee===n&&!(re in h)||!pe(Ee))return!1}return!0}function Fne(h,y,M){if(typeof h!="function")throw new Xc(a);return l8(function(){h.apply(n,M)},y)}function r8(h,y,M,K){var re=-1,pe=pE,Ee=!0,Te=h.length,_e=[],Qe=y.length;if(!Te)return _e;M&&(y=ks(y,pc(M))),K?(pe=q4,Ee=!1):y.length>=s&&(pe=Wb,Ee=!1,y=new Xb(y));e:for(;++re<Te;){var Xe=h[re],it=M==null?Xe:M(Xe);if(Xe=K||Xe!==0?Xe:0,Ee&&it===it){for(var St=Qe;St--;)if(y[St]===it)continue e;_e.push(Xe)}else pe(y,it,K)||_e.push(Xe)}return _e}var Em=dre(Ah),Vne=dre(fV,!0);function Oke(h,y){var M=!0;return Em(h,function(K,re,pe){return M=!!y(K,re,pe),M}),M}function $9(h,y,M){for(var K=-1,re=h.length;++K<re;){var pe=h[K],Ee=y(pe);if(Ee!=null&&(Te===n?Ee===Ee&&!Hl(Ee):M(Ee,Te)))var Te=Ee,_e=pe}return _e}function Rke(h,y,M,K){var re=h.length;for(M=nr(M),M<0&&(M=-M>re?0:re+M),K=K===n||K>re?re:nr(K),K<0&&(K+=re),K=M>K?0:rse(K);M<K;)h[M++]=y;return h}function $ne(h,y){var M=[];return Em(h,function(K,re,pe){y(K,re,pe)&&M.push(K)}),M}function so(h,y,M,K,re){var pe=-1,Ee=h.length;for(M||(M=v7e),re||(re=[]);++pe<Ee;){var Te=h[pe];y>0&&M(Te)?y>1?so(Te,y-1,M,K,re):ed(re,Te):K||(re[re.length]=Te)}return re}var uV=hre(),jne=hre(!0);function Ah(h,y){return h&&uV(h,y,Pa)}function fV(h,y){return h&&jne(h,y,Pa)}function j9(h,y){return Vu(y,function(M){return pp(h[M])})}function t1(h,y){y=Sm(y,h);for(var M=0,K=y.length;h!=null&&M<K;)h=h[Ih(y[M++])];return M&&M==K?h:n}function Hne(h,y,M){var K=y(h);return Yn(h)?K:ed(K,M(h))}function gc(h){return h==null?h===n?ce:qe:Ae&&Ae in ps(h)?p7e(h):T7e(h)}function dV(h,y){return h>y}function _ke(h,y){return h!=null&&Xr.call(h,y)}function Bke(h,y){return h!=null&&y in ps(h)}function Mke(h,y,M){return h>=Sr(y,M)&&h<ir(y,M)}function hV(h,y,M){for(var K=M?q4:pE,re=h[0].length,pe=h.length,Ee=pe,Te=He(pe),_e=1/0,Qe=[];Ee--;){var Xe=h[Ee];Ee&&y&&(Xe=ks(Xe,pc(y))),_e=Sr(Xe.length,_e),Te[Ee]=!M&&(y||re>=120&&Xe.length>=120)?new Xb(Ee&&Xe):n}Xe=h[0];var it=-1,St=Te[0];e:for(;++it<re&&Qe.length<_e;){var en=Xe[it],_n=y?y(en):en;if(en=M||en!==0?en:0,!(St?Wb(St,_n):K(Qe,_n,M))){for(Ee=pe;--Ee;){var ar=Te[Ee];if(!(ar?Wb(ar,_n):K(h[Ee],_n,M)))continue e}St&&St.push(_n),Qe.push(en)}}return Qe}function Dke(h,y,M,K){return Ah(h,function(re,pe,Ee){y(K,M(re),pe,Ee)}),K}function s8(h,y,M){y=Sm(y,h),h=Pre(h,y);var K=h==null?h:h[Ih(Ku(y))];return K==null?n:zi(K,h,M)}function qne(h){return di(h)&&gc(h)==$}function Lke(h){return di(h)&&gc(h)==nt}function Uke(h){return di(h)&&gc(h)==X}function i8(h,y,M,K,re){return h===y?!0:h==null||y==null||!di(h)&&!di(y)?h!==h&&y!==y:Fke(h,y,M,K,i8,re)}function Fke(h,y,M,K,re,pe){var Ee=Yn(h),Te=Yn(y),_e=Ee?te:Uo(h),Qe=Te?te:Uo(y);_e=_e==$?ze:_e,Qe=Qe==$?ze:Qe;var Xe=_e==ze,it=Qe==ze,St=_e==Qe;if(St&&Cm(h)){if(!Cm(y))return!1;Ee=!0,Xe=!1}if(St&&!Xe)return pe||(pe=new rd),Ee||OE(h)?Are(h,y,M,K,re,pe):d7e(h,y,_e,M,K,re,pe);if(!(M&g)){var en=Xe&&Xr.call(h,"__wrapped__"),_n=it&&Xr.call(y,"__wrapped__");if(en||_n){var ar=en?h.value():h,Bn=_n?y.value():y;return pe||(pe=new rd),re(ar,Bn,M,K,pe)}}return St?(pe||(pe=new rd),h7e(h,y,M,K,re,pe)):!1}function Vke(h){return di(h)&&Uo(h)==xe}function pV(h,y,M,K){var re=M.length,pe=re,Ee=!K;if(h==null)return!pe;for(h=ps(h);re--;){var Te=M[re];if(Ee&&Te[2]?Te[1]!==h[Te[0]]:!(Te[0]in h))return!1}for(;++re<pe;){Te=M[re];var _e=Te[0],Qe=h[_e],Xe=Te[1];if(Ee&&Te[2]){if(Qe===n&&!(_e in h))return!1}else{var it=new rd;if(K)var St=K(Qe,Xe,_e,h,y,it);if(!(St===n?i8(Xe,Qe,g|m,K,it):St))return!1}}return!0}function Kne(h){if(!ri(h)||E7e(h))return!1;var y=pp(h)?oV:la;return y.test(r1(h))}function $ke(h){return di(h)&&gc(h)==Be}function jke(h){return di(h)&&Uo(h)==de}function Hke(h){return di(h)&&iP(h.length)&&!!ds[gc(h)]}function Gne(h){return typeof h=="function"?h:h==null?rl:typeof h=="object"?Yn(h)?Jne(h[0],h[1]):zne(h):pse(h)}function gV(h){if(!c8(h))return ki(h);var y=[];for(var M in ps(h))Xr.call(h,M)&&M!="constructor"&&y.push(M);return y}function qke(h){if(!ri(h))return C7e(h);var y=c8(h),M=[];for(var K in h)K=="constructor"&&(y||!Xr.call(h,K))||M.push(K);return M}function mV(h,y){return h<y}function Wne(h,y){var M=-1,K=tl(h)?He(h.length):[];return Em(h,function(re,pe,Ee){K[++M]=y(re,pe,Ee)}),K}function zne(h){var y=OV(h);return y.length==1&&y[0][2]?Nre(y[0][0],y[0][1]):function(M){return M===h||pV(M,h,y)}}function Jne(h,y){return _V(h)&&Tre(y)?Nre(Ih(h),y):function(M){var K=HV(M,h);return K===n&&K===y?qV(M,h):i8(y,K,g|m)}}function H9(h,y,M,K,re){h!==y&&uV(y,function(pe,Ee){if(re||(re=new rd),ri(pe))Kke(h,y,Ee,M,H9,K,re);else{var Te=K?K(MV(h,Ee),pe,Ee+"",h,y,re):n;Te===n&&(Te=pe),cV(h,Ee,Te)}},nl)}function Kke(h,y,M,K,re,pe,Ee){var Te=MV(h,M),_e=MV(y,M),Qe=Ee.get(_e);if(Qe){cV(h,M,Qe);return}var Xe=pe?pe(Te,_e,M+"",h,y,Ee):n,it=Xe===n;if(it){var St=Yn(_e),en=!St&&Cm(_e),_n=!St&&!en&&OE(_e);Xe=_e,St||en||_n?Yn(Te)?Xe=Te:Pi(Te)?Xe=el(Te):en?(it=!1,Xe=ore(_e,!0)):_n?(it=!1,Xe=cre(_e,!0)):Xe=[]:u8(_e)||s1(_e)?(Xe=Te,s1(Te)?Xe=sse(Te):(!ri(Te)||pp(Te))&&(Xe=Cre(_e))):it=!1}it&&(Ee.set(_e,Xe),re(Xe,_e,K,pe,Ee),Ee.delete(_e)),cV(h,M,Xe)}function Yne(h,y){var M=h.length;if(M)return y+=y<0?M:0,hp(y,M)?h[y]:n}function Qne(h,y,M){y.length?y=ks(y,function(pe){return Yn(pe)?function(Ee){return t1(Ee,pe.length===1?pe[0]:pe)}:pe}):y=[rl];var K=-1;y=ks(y,pc(Nn()));var re=Wne(h,function(pe,Ee,Te){var _e=ks(y,function(Qe){return Qe(pe)});return{criteria:_e,index:++K,value:pe}});return WF(re,function(pe,Ee){return s7e(pe,Ee,M)})}function Gke(h,y){return Zne(h,y,function(M,K){return qV(h,K)})}function Zne(h,y,M){for(var K=-1,re=y.length,pe={};++K<re;){var Ee=y[K],Te=t1(h,Ee);M(Te,Ee)&&a8(pe,Sm(Ee,h),Te)}return pe}function Wke(h){return function(y){return t1(y,h)}}function yV(h,y,M,K){var re=K?GF:wm,pe=-1,Ee=y.length,Te=h;for(h===y&&(y=el(y)),M&&(Te=ks(h,pc(M)));++pe<Ee;)for(var _e=0,Qe=y[pe],Xe=M?M(Qe):Qe;(_e=re(Te,Xe,_e,K))>-1;)Te!==h&&z.call(Te,_e,1),z.call(h,_e,1);return h}function Xne(h,y){for(var M=h?y.length:0,K=M-1;M--;){var re=y[M];if(M==K||re!==pe){var pe=re;hp(re)?z.call(h,re,1):xV(h,re)}}return h}function wV(h,y){return h+wt($u()*(y-h+1))}function zke(h,y,M,K){for(var re=-1,pe=ir(lt((y-h)/(M||1)),0),Ee=He(pe);pe--;)Ee[K?pe:++re]=h,h+=M;return Ee}function bV(h,y){var M="";if(!h||y<1||y>C)return M;do y%2&&(M+=h),y=wt(y/2),y&&(h+=h);while(y);return M}function hr(h,y){return DV(kre(h,y,rl),h+"")}function Jke(h){return Dne(RE(h))}function Yke(h,y){var M=RE(h);return X9(M,e1(y,0,M.length))}function a8(h,y,M,K){if(!ri(h))return h;y=Sm(y,h);for(var re=-1,pe=y.length,Ee=pe-1,Te=h;Te!=null&&++re<pe;){var _e=Ih(y[re]),Qe=M;if(_e==="__proto__"||_e==="constructor"||_e==="prototype")return h;if(re!=Ee){var Xe=Te[_e];Qe=K?K(Xe,_e,Te):n,Qe===n&&(Qe=ri(Xe)?Xe:hp(y[re+1])?[]:{})}n8(Te,_e,Qe),Te=Te[_e]}return h}var ere=Qb?function(h,y){return Qb.set(h,y),h}:rl,Qke=Ne?function(h,y){return Ne(h,"toString",{configurable:!0,enumerable:!1,value:GV(y),writable:!0})}:rl;function Zke(h){return X9(RE(h))}function qu(h,y,M){var K=-1,re=h.length;y<0&&(y=-y>re?0:re+y),M=M>re?re:M,M<0&&(M+=re),re=y>M?0:M-y>>>0,y>>>=0;for(var pe=He(re);++K<re;)pe[K]=h[K+y];return pe}function Xke(h,y){var M;return Em(h,function(K,re,pe){return M=y(K,re,pe),!M}),!!M}function q9(h,y,M){var K=0,re=h==null?K:h.length;if(typeof y=="number"&&y===y&&re<=H){for(;K<re;){var pe=K+re>>>1,Ee=h[pe];Ee!==null&&!Hl(Ee)&&(M?Ee<=y:Ee<y)?K=pe+1:re=pe}return re}return vV(h,y,rl,M)}function vV(h,y,M,K){var re=0,pe=h==null?0:h.length;if(pe===0)return 0;y=M(y);for(var Ee=y!==y,Te=y===null,_e=Hl(y),Qe=y===n;re<pe;){var Xe=wt((re+pe)/2),it=M(h[Xe]),St=it!==n,en=it===null,_n=it===it,ar=Hl(it);if(Ee)var Bn=K||_n;else Qe?Bn=_n&&(K||St):Te?Bn=_n&&St&&(K||!en):_e?Bn=_n&&St&&!en&&(K||!ar):en||ar?Bn=!1:Bn=K?it<=y:it<y;Bn?re=Xe+1:pe=Xe}return Sr(pe,_)}function tre(h,y){for(var M=-1,K=h.length,re=0,pe=[];++M<K;){var Ee=h[M],Te=y?y(Ee):Ee;if(!M||!sd(Te,_e)){var _e=Te;pe[re++]=Ee===0?0:Ee}}return pe}function nre(h){return typeof h=="number"?h:Hl(h)?E:+h}function jl(h){if(typeof h=="string")return h;if(Yn(h))return ks(h,jl)+"";if(Hl(h))return Bne?Bne.call(h):"";var y=h+"";return y=="0"&&1/h==-L?"-0":y}function Am(h,y,M){var K=-1,re=pE,pe=h.length,Ee=!0,Te=[],_e=Te;if(M)Ee=!1,re=q4;else if(pe>=s){var Qe=y?null:u7e(h);if(Qe)return zb(Qe);Ee=!1,re=Wb,_e=new Xb}else _e=y?[]:Te;e:for(;++K<pe;){var Xe=h[K],it=y?y(Xe):Xe;if(Xe=M||Xe!==0?Xe:0,Ee&&it===it){for(var St=_e.length;St--;)if(_e[St]===it)continue e;y&&_e.push(it),Te.push(Xe)}else re(_e,it,M)||(_e!==Te&&_e.push(it),Te.push(Xe))}return Te}function xV(h,y){return y=Sm(y,h),h=Pre(h,y),h==null||delete h[Ih(Ku(y))]}function rre(h,y,M,K){return a8(h,y,M(t1(h,y)),K)}function K9(h,y,M,K){for(var re=h.length,pe=K?re:-1;(K?pe--:++pe<re)&&y(h[pe],pe,h););return M?qu(h,K?0:pe,K?pe+1:re):qu(h,K?pe+1:0,K?re:pe)}function sre(h,y){var M=h;return M instanceof Rr&&(M=M.value()),K4(y,function(K,re){return re.func.apply(re.thisArg,ed([K],re.args))},M)}function EV(h,y,M){var K=h.length;if(K<2)return K?Am(h[0]):[];for(var re=-1,pe=He(K);++re<K;)for(var Ee=h[re],Te=-1;++Te<K;)Te!=re&&(pe[re]=r8(pe[re]||Ee,h[Te],y,M));return Am(so(pe,1),y,M)}function ire(h,y,M){for(var K=-1,re=h.length,pe=y.length,Ee={};++K<re;){var Te=K<pe?y[K]:n;M(Ee,h[K],Te)}return Ee}function AV(h){return Pi(h)?h:[]}function SV(h){return typeof h=="function"?h:rl}function Sm(h,y){return Yn(h)?h:_V(h,y)?[h]:Bre(os(h))}var e7e=hr;function Im(h,y,M){var K=h.length;return M=M===n?K:M,!y&&M>=K?h:qu(h,y,M)}var are=Ue||function(h){return Ar.clearTimeout(h)};function ore(h,y){if(y)return h.slice();var M=h.length,K=Jb?Jb(M):new h.constructor(M);return h.copy(K),K}function IV(h){var y=new h.constructor(h.byteLength);return new AE(y).set(new AE(h)),y}function t7e(h,y){var M=y?IV(h.buffer):h.buffer;return new h.constructor(M,h.byteOffset,h.byteLength)}function n7e(h){var y=new h.constructor(h.source,qn.exec(h));return y.lastIndex=h.lastIndex,y}function r7e(h){return t8?ps(t8.call(h)):{}}function cre(h,y){var M=y?IV(h.buffer):h.buffer;return new h.constructor(M,h.byteOffset,h.length)}function lre(h,y){if(h!==y){var M=h!==n,K=h===null,re=h===h,pe=Hl(h),Ee=y!==n,Te=y===null,_e=y===y,Qe=Hl(y);if(!Te&&!Qe&&!pe&&h>y||pe&&Ee&&_e&&!Te&&!Qe||K&&Ee&&_e||!M&&_e||!re)return 1;if(!K&&!pe&&!Qe&&h<y||Qe&&M&&re&&!K&&!pe||Te&&M&&re||!Ee&&re||!_e)return-1}return 0}function s7e(h,y,M){for(var K=-1,re=h.criteria,pe=y.criteria,Ee=re.length,Te=M.length;++K<Ee;){var _e=lre(re[K],pe[K]);if(_e){if(K>=Te)return _e;var Qe=M[K];return _e*(Qe=="desc"?-1:1)}}return h.index-y.index}function ure(h,y,M,K){for(var re=-1,pe=h.length,Ee=M.length,Te=-1,_e=y.length,Qe=ir(pe-Ee,0),Xe=He(_e+Qe),it=!K;++Te<_e;)Xe[Te]=y[Te];for(;++re<Ee;)(it||re<pe)&&(Xe[M[re]]=h[re]);for(;Qe--;)Xe[Te++]=h[re++];return Xe}function fre(h,y,M,K){for(var re=-1,pe=h.length,Ee=-1,Te=M.length,_e=-1,Qe=y.length,Xe=ir(pe-Te,0),it=He(Xe+Qe),St=!K;++re<Xe;)it[re]=h[re];for(var en=re;++_e<Qe;)it[en+_e]=y[_e];for(;++Ee<Te;)(St||re<pe)&&(it[en+M[Ee]]=h[re++]);return it}function el(h,y){var M=-1,K=h.length;for(y||(y=He(K));++M<K;)y[M]=h[M];return y}function Sh(h,y,M,K){var re=!M;M||(M={});for(var pe=-1,Ee=y.length;++pe<Ee;){var Te=y[pe],_e=K?K(M[Te],h[Te],Te,M,h):n;_e===n&&(_e=h[Te]),re?up(M,Te,_e):n8(M,Te,_e)}return M}function i7e(h,y){return Sh(h,RV(h),y)}function a7e(h,y){return Sh(h,Sre(h),y)}function G9(h,y){return function(M,K){var re=Yn(M)?VF:Nke,pe=y?y():{};return re(M,h,Nn(K,2),pe)}}function NE(h){return hr(function(y,M){var K=-1,re=M.length,pe=re>1?M[re-1]:n,Ee=re>2?M[2]:n;for(pe=h.length>3&&typeof pe=="function"?(re--,pe):n,Ee&&mc(M[0],M[1],Ee)&&(pe=re<3?n:pe,re=1),y=ps(y);++K<re;){var Te=M[K];Te&&h(y,Te,K,pe)}return y})}function dre(h,y){return function(M,K){if(M==null)return M;if(!tl(M))return h(M,K);for(var re=M.length,pe=y?re:-1,Ee=ps(M);(y?pe--:++pe<re)&&K(Ee[pe],pe,Ee)!==!1;);return M}}function hre(h){return function(y,M,K){for(var re=-1,pe=ps(y),Ee=K(y),Te=Ee.length;Te--;){var _e=Ee[h?Te:++re];if(M(pe[_e],_e,pe)===!1)break}return y}}function o7e(h,y,M){var K=y&v,re=o8(h);function pe(){var Ee=this&&this!==Ar&&this instanceof pe?re:h;return Ee.apply(K?M:this,arguments)}return pe}function pre(h){return function(y){y=os(y);var M=bh(y)?$l(y):n,K=M?M[0]:y.charAt(0),re=M?Im(M,1).join(""):y.slice(1);return K[h]()+re}}function kE(h){return function(y){return K4(dse(fse(y).replace(hc,"")),h,"")}}function o8(h){return function(){var y=arguments;switch(y.length){case 0:return new h;case 1:return new h(y[0]);case 2:return new h(y[0],y[1]);case 3:return new h(y[0],y[1],y[2]);case 4:return new h(y[0],y[1],y[2],y[3]);case 5:return new h(y[0],y[1],y[2],y[3],y[4]);case 6:return new h(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new h(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var M=TE(h.prototype),K=h.apply(M,y);return ri(K)?K:M}}function c7e(h,y,M){var K=o8(h);function re(){for(var pe=arguments.length,Ee=He(pe),Te=pe,_e=PE(re);Te--;)Ee[Te]=arguments[Te];var Qe=pe<3&&Ee[0]!==_e&&Ee[pe-1]!==_e?[]:nd(Ee,_e);if(pe-=Qe.length,pe<M)return bre(h,y,W9,re.placeholder,n,Ee,Qe,n,n,M-pe);var Xe=this&&this!==Ar&&this instanceof re?K:h;return zi(Xe,this,Ee)}return re}function gre(h){return function(y,M,K){var re=ps(y);if(!tl(y)){var pe=Nn(M,3);y=Pa(y),M=function(Te){return pe(re[Te],Te,re)}}var Ee=h(y,M,K);return Ee>-1?re[pe?y[Ee]:Ee]:n}}function mre(h){return dp(function(y){var M=y.length,K=M,re=ju.prototype.thru;for(h&&y.reverse();K--;){var pe=y[K];if(typeof pe!="function")throw new Xc(a);if(re&&!Ee&&Q9(pe)=="wrapper")var Ee=new ju([],!0)}for(K=Ee?K:M;++K<M;){pe=y[K];var Te=Q9(pe),_e=Te=="wrapper"?PV(pe):n;_e&&BV(_e[0])&&_e[1]==(O|I|D|U)&&!_e[4].length&&_e[9]==1?Ee=Ee[Q9(_e[0])].apply(Ee,_e[3]):Ee=pe.length==1&&BV(pe)?Ee[Te]():Ee.thru(pe)}return function(){var Qe=arguments,Xe=Qe[0];if(Ee&&Qe.length==1&&Yn(Xe))return Ee.plant(Xe).value();for(var it=0,St=M?y[it].apply(this,Qe):Xe;++it<M;)St=y[it].call(this,St);return St}})}function W9(h,y,M,K,re,pe,Ee,Te,_e,Qe){var Xe=y&O,it=y&v,St=y&A,en=y&(I|B),_n=y&Q,ar=St?n:o8(h);function Bn(){for(var Ir=arguments.length,Lr=He(Ir),ql=Ir;ql--;)Lr[ql]=arguments[ql];if(en)var yc=PE(Bn),Kl=JF(Lr,yc);if(K&&(Lr=ure(Lr,K,re,en)),pe&&(Lr=fre(Lr,pe,Ee,en)),Ir-=Kl,en&&Ir<Qe){var Oi=nd(Lr,yc);return bre(h,y,W9,Bn.placeholder,M,Lr,Oi,Te,_e,Qe-Ir)}var id=it?M:this,mp=St?id[h]:h;return Ir=Lr.length,Te?Lr=N7e(Lr,Te):_n&&Ir>1&&Lr.reverse(),Xe&&_e<Ir&&(Lr.length=_e),this&&this!==Ar&&this instanceof Bn&&(mp=ar||o8(mp)),mp.apply(id,Lr)}return Bn}function yre(h,y){return function(M,K){return Dke(M,h,y(K),{})}}function z9(h,y){return function(M,K){var re;if(M===n&&K===n)return y;if(M!==n&&(re=M),K!==n){if(re===n)return K;typeof M=="string"||typeof K=="string"?(M=jl(M),K=jl(K)):(M=nre(M),K=nre(K)),re=h(M,K)}return re}}function CV(h){return dp(function(y){return y=ks(y,pc(Nn())),hr(function(M){var K=this;return h(y,function(re){return zi(re,K,M)})})})}function J9(h,y){y=y===n?" ":jl(y);var M=y.length;if(M<2)return M?bV(y,h):y;var K=bV(y,lt(h/ip(y)));return bh(y)?Im($l(K),0,h).join(""):K.slice(0,h)}function l7e(h,y,M,K){var re=y&v,pe=o8(h);function Ee(){for(var Te=-1,_e=arguments.length,Qe=-1,Xe=K.length,it=He(Xe+_e),St=this&&this!==Ar&&this instanceof Ee?pe:h;++Qe<Xe;)it[Qe]=K[Qe];for(;_e--;)it[Qe++]=arguments[++Te];return zi(St,re?M:this,it)}return Ee}function wre(h){return function(y,M,K){return K&&typeof K!="number"&&mc(y,M,K)&&(M=K=n),y=gp(y),M===n?(M=y,y=0):M=gp(M),K=K===n?y<M?1:-1:gp(K),zke(y,M,K,h)}}function Y9(h){return function(y,M){return typeof y=="string"&&typeof M=="string"||(y=Gu(y),M=Gu(M)),h(y,M)}}function bre(h,y,M,K,re,pe,Ee,Te,_e,Qe){var Xe=y&I,it=Xe?Ee:n,St=Xe?n:Ee,en=Xe?pe:n,_n=Xe?n:pe;y|=Xe?D:V,y&=~(Xe?V:D),y&S||(y&=-4);var ar=[h,y,re,en,it,_n,St,Te,_e,Qe],Bn=M.apply(n,ar);return BV(h)&&Ore(Bn,ar),Bn.placeholder=K,Rre(Bn,h,y)}function TV(h){var y=Ni[h];return function(M,K){if(M=Gu(M),K=K==null?0:Sr(nr(K),292),K&&Vr(M)){var re=(os(M)+"e").split("e"),pe=y(re[0]+"e"+(+re[1]+K));return re=(os(pe)+"e").split("e"),+(re[0]+"e"+(+re[1]-K))}return y(M)}}var u7e=op&&1/zb(new op([,-0]))[1]==L?function(h){return new op(h)}:JV;function vre(h){return function(y){var M=Uo(y);return M==xe?yE(y):M==de?_9(y):zF(y,h(y))}}function fp(h,y,M,K,re,pe,Ee,Te){var _e=y&A;if(!_e&&typeof h!="function")throw new Xc(a);var Qe=K?K.length:0;if(Qe||(y&=-97,K=re=n),Ee=Ee===n?Ee:ir(nr(Ee),0),Te=Te===n?Te:nr(Te),Qe-=re?re.length:0,y&V){var Xe=K,it=re;K=re=n}var St=_e?n:PV(h),en=[h,y,M,K,re,Xe,it,pe,Ee,Te];if(St&&I7e(en,St),h=en[0],y=en[1],M=en[2],K=en[3],re=en[4],Te=en[9]=en[9]===n?_e?0:h.length:ir(en[9]-Qe,0),!Te&&y&(I|B)&&(y&=-25),!y||y==v)var _n=o7e(h,y,M);else y==I||y==B?_n=c7e(h,y,Te):(y==D||y==(v|D))&&!re.length?_n=l7e(h,y,M,K):_n=W9.apply(n,en);var ar=St?ere:Ore;return Rre(ar(_n,en),h,y)}function xre(h,y,M,K){return h===n||sd(h,vm[M])&&!Xr.call(K,M)?y:h}function Ere(h,y,M,K,re,pe){return ri(h)&&ri(y)&&(pe.set(y,h),H9(h,y,n,Ere,pe),pe.delete(y)),h}function f7e(h){return u8(h)?n:h}function Are(h,y,M,K,re,pe){var Ee=M&g,Te=h.length,_e=y.length;if(Te!=_e&&!(Ee&&_e>Te))return!1;var Qe=pe.get(h),Xe=pe.get(y);if(Qe&&Xe)return Qe==y&&Xe==h;var it=-1,St=!0,en=M&m?new Xb:n;for(pe.set(h,y),pe.set(y,h);++it<Te;){var _n=h[it],ar=y[it];if(K)var Bn=Ee?K(ar,_n,it,y,h,pe):K(_n,ar,it,h,y,pe);if(Bn!==n){if(Bn)continue;St=!1;break}if(en){if(!G4(y,function(Ir,Lr){if(!Wb(en,Lr)&&(_n===Ir||re(_n,Ir,M,K,pe)))return en.push(Lr)})){St=!1;break}}else if(!(_n===ar||re(_n,ar,M,K,pe))){St=!1;break}}return pe.delete(h),pe.delete(y),St}function d7e(h,y,M,K,re,pe,Ee){switch(M){case yt:if(h.byteLength!=y.byteLength||h.byteOffset!=y.byteOffset)return!1;h=h.buffer,y=y.buffer;case nt:return!(h.byteLength!=y.byteLength||!pe(new AE(h),new AE(y)));case ee:case X:case De:return sd(+h,+y);case se:return h.name==y.name&&h.message==y.message;case Be:case oe:return h==y+"";case xe:var Te=yE;case de:var _e=K&g;if(Te||(Te=zb),h.size!=y.size&&!_e)return!1;var Qe=Ee.get(h);if(Qe)return Qe==y;K|=m,Ee.set(h,y);var Xe=Are(Te(h),Te(y),K,re,pe,Ee);return Ee.delete(h),Xe;case fe:if(t8)return t8.call(h)==t8.call(y)}return!1}function h7e(h,y,M,K,re,pe){var Ee=M&g,Te=NV(h),_e=Te.length,Qe=NV(y),Xe=Qe.length;if(_e!=Xe&&!Ee)return!1;for(var it=_e;it--;){var St=Te[it];if(!(Ee?St in y:Xr.call(y,St)))return!1}var en=pe.get(h),_n=pe.get(y);if(en&&_n)return en==y&&_n==h;var ar=!0;pe.set(h,y),pe.set(y,h);for(var Bn=Ee;++it<_e;){St=Te[it];var Ir=h[St],Lr=y[St];if(K)var ql=Ee?K(Lr,Ir,St,y,h,pe):K(Ir,Lr,St,h,y,pe);if(!(ql===n?Ir===Lr||re(Ir,Lr,M,K,pe):ql)){ar=!1;break}Bn||(Bn=St=="constructor")}if(ar&&!Bn){var yc=h.constructor,Kl=y.constructor;yc!=Kl&&"constructor"in h&&"constructor"in y&&!(typeof yc=="function"&&yc instanceof yc&&typeof Kl=="function"&&Kl instanceof Kl)&&(ar=!1)}return pe.delete(h),pe.delete(y),ar}function dp(h){return DV(kre(h,n,Ure),h+"")}function NV(h){return Hne(h,Pa,RV)}function kV(h){return Hne(h,nl,Sre)}var PV=Qb?function(h){return Qb.get(h)}:JV;function Q9(h){for(var y=h.name+"",M=CE[y],K=Xr.call(CE,y)?M.length:0;K--;){var re=M[K],pe=re.func;if(pe==null||pe==h)return re.name}return y}function PE(h){var y=Xr.call(he,"placeholder")?he:h;return y.placeholder}function Nn(){var h=he.iteratee||WV;return h=h===WV?Gne:h,arguments.length?h(arguments[0],arguments[1]):h}function Z9(h,y){var M=h.__data__;return x7e(y)?M[typeof y=="string"?"string":"hash"]:M.map}function OV(h){for(var y=Pa(h),M=y.length;M--;){var K=y[M],re=h[K];y[M]=[K,re,Tre(re)]}return y}function n1(h,y){var M=td(h,y);return Kne(M)?M:n}function p7e(h){var y=Xr.call(h,Ae),M=h[Ae];try{h[Ae]=n;var K=!0}catch{}var re=xE.call(h);return K&&(y?h[Ae]=M:delete h[Ae]),re}var RV=on?function(h){return h==null?[]:(h=ps(h),Vu(on(h),function(y){return W.call(h,y)}))}:YV,Sre=on?function(h){for(var y=[];h;)ed(y,RV(h)),h=Yb(h);return y}:YV,Uo=gc;(e8&&Uo(new e8(new ArrayBuffer(1)))!=yt||xm&&Uo(new xm)!=xe||IE&&Uo(IE.resolve())!=ft||op&&Uo(new op)!=de||xh&&Uo(new xh)!=ae)&&(Uo=function(h){var y=gc(h),M=y==ze?h.constructor:n,K=M?r1(M):"";if(K)switch(K){case YNe:return yt;case QNe:return xe;case ZNe:return ft;case XNe:return de;case eke:return ae}return y});function g7e(h,y,M){for(var K=-1,re=M.length;++K<re;){var pe=M[K],Ee=pe.size;switch(pe.type){case"drop":h+=Ee;break;case"dropRight":y-=Ee;break;case"take":y=Sr(y,h+Ee);break;case"takeRight":h=ir(h,y-Ee);break}}return{start:h,end:y}}function m7e(h){var y=h.match(qt);return y?y[1].split(xt):[]}function Ire(h,y,M){y=Sm(y,h);for(var K=-1,re=y.length,pe=!1;++K<re;){var Ee=Ih(y[K]);if(!(pe=h!=null&&M(h,Ee)))break;h=h[Ee]}return pe||++K!=re?pe:(re=h==null?0:h.length,!!re&&iP(re)&&hp(Ee,re)&&(Yn(h)||s1(h)))}function y7e(h){var y=h.length,M=new h.constructor(y);return y&&typeof h[0]=="string"&&Xr.call(h,"index")&&(M.index=h.index,M.input=h.input),M}function Cre(h){return typeof h.constructor=="function"&&!c8(h)?TE(Yb(h)):{}}function w7e(h,y,M){var K=h.constructor;switch(y){case nt:return IV(h);case ee:case X:return new K(+h);case yt:return t7e(h,M);case Tt:case at:case It:case _t:case pt:case $t:case Pt:case jt:case En:return cre(h,M);case xe:return new K;case De:case oe:return new K(h);case Be:return n7e(h);case de:return new K;case fe:return r7e(h)}}function b7e(h,y){var M=y.length;if(!M)return h;var K=M-1;return y[K]=(M>1?"& ":"")+y[K],y=y.join(M>2?", ":" "),h.replace(yn,`{
/* [wrapped with `+y+`] */
`)}function v7e(h){return Yn(h)||s1(h)||!!(le&&h&&h[le])}function hp(h,y){var M=typeof h;return y=y??C,!!y&&(M=="number"||M!="symbol"&&Na.test(h))&&h>-1&&h%1==0&&h<y}function mc(h,y,M){if(!ri(M))return!1;var K=typeof y;return(K=="number"?tl(M)&&hp(y,M.length):K=="string"&&y in M)?sd(M[y],h):!1}function _V(h,y){if(Yn(h))return!1;var M=typeof h;return M=="number"||M=="symbol"||M=="boolean"||h==null||Hl(h)?!0:In.test(h)||!Ct.test(h)||y!=null&&h in ps(y)}function x7e(h){var y=typeof h;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?h!=="__proto__":h===null}function BV(h){var y=Q9(h),M=he[y];if(typeof M!="function"||!(y in Rr.prototype))return!1;if(h===M)return!0;var K=PV(M);return!!K&&h===K[0]}function E7e(h){return!!L9&&L9 in h}var A7e=bE?pp:QV;function c8(h){var y=h&&h.constructor,M=typeof y=="function"&&y.prototype||vm;return h===M}function Tre(h){return h===h&&!ri(h)}function Nre(h,y){return function(M){return M==null?!1:M[h]===y&&(y!==n||h in ps(M))}}function S7e(h){var y=rP(h,function(K){return M.size===l&&M.clear(),K}),M=y.cache;return y}function I7e(h,y){var M=h[1],K=y[1],re=M|K,pe=re<(v|A|O),Ee=K==O&&M==I||K==O&&M==U&&h[7].length<=y[8]||K==(O|U)&&y[7].length<=y[8]&&M==I;if(!(pe||Ee))return h;K&v&&(h[2]=y[2],re|=M&v?0:S);var Te=y[3];if(Te){var _e=h[3];h[3]=_e?ure(_e,Te,y[4]):Te,h[4]=_e?nd(h[3],u):y[4]}return Te=y[5],Te&&(_e=h[5],h[5]=_e?fre(_e,Te,y[6]):Te,h[6]=_e?nd(h[5],u):y[6]),Te=y[7],Te&&(h[7]=Te),K&O&&(h[8]=h[8]==null?y[8]:Sr(h[8],y[8])),h[9]==null&&(h[9]=y[9]),h[0]=y[0],h[1]=re,h}function C7e(h){var y=[];if(h!=null)for(var M in ps(h))y.push(M);return y}function T7e(h){return xE.call(h)}function kre(h,y,M){return y=ir(y===n?h.length-1:y,0),function(){for(var K=arguments,re=-1,pe=ir(K.length-y,0),Ee=He(pe);++re<pe;)Ee[re]=K[y+re];re=-1;for(var Te=He(y+1);++re<y;)Te[re]=K[re];return Te[y]=M(Ee),zi(h,this,Te)}}function Pre(h,y){return y.length<2?h:t1(h,qu(y,0,-1))}function N7e(h,y){for(var M=h.length,K=Sr(y.length,M),re=el(h);K--;){var pe=y[K];h[K]=hp(pe,M)?re[pe]:n}return h}function MV(h,y){if(!(y==="constructor"&&typeof h[y]=="function")&&y!="__proto__")return h[y]}var Ore=_re(ere),l8=Je||function(h,y){return Ar.setTimeout(h,y)},DV=_re(Qke);function Rre(h,y,M){var K=y+"";return DV(h,b7e(K,k7e(m7e(K),M)))}function _re(h){var y=0,M=0;return function(){var K=ap(),re=k-(K-M);if(M=K,re>0){if(++y>=R)return arguments[0]}else y=0;return h.apply(n,arguments)}}function X9(h,y){var M=-1,K=h.length,re=K-1;for(y=y===n?K:y;++M<y;){var pe=wV(M,re),Ee=h[pe];h[pe]=h[M],h[M]=Ee}return h.length=y,h}var Bre=S7e(function(h){var y=[];return h.charCodeAt(0)===46&&y.push(""),h.replace(Cn,function(M,K,re,pe){y.push(re?pe.replace(hn,"$1"):K||M)}),y});function Ih(h){if(typeof h=="string"||Hl(h))return h;var y=h+"";return y=="0"&&1/h==-L?"-0":y}function r1(h){if(h!=null){try{return vE.call(h)}catch{}try{return h+""}catch{}}return""}function k7e(h,y){return Zc(ne,function(M){var K="_."+M[0];y&M[1]&&!pE(h,K)&&h.push(K)}),h.sort()}function Mre(h){if(h instanceof Rr)return h.clone();var y=new ju(h.__wrapped__,h.__chain__);return y.__actions__=el(h.__actions__),y.__index__=h.__index__,y.__values__=h.__values__,y}function P7e(h,y,M){(M?mc(h,y,M):y===n)?y=1:y=ir(nr(y),0);var K=h==null?0:h.length;if(!K||y<1)return[];for(var re=0,pe=0,Ee=He(lt(K/y));re<K;)Ee[pe++]=qu(h,re,re+=y);return Ee}function O7e(h){for(var y=-1,M=h==null?0:h.length,K=0,re=[];++y<M;){var pe=h[y];pe&&(re[K++]=pe)}return re}function R7e(){var h=arguments.length;if(!h)return[];for(var y=He(h-1),M=arguments[0],K=h;K--;)y[K-1]=arguments[K];return ed(Yn(M)?el(M):[M],so(y,1))}var _7e=hr(function(h,y){return Pi(h)?r8(h,so(y,1,Pi,!0)):[]}),B7e=hr(function(h,y){var M=Ku(y);return Pi(M)&&(M=n),Pi(h)?r8(h,so(y,1,Pi,!0),Nn(M,2)):[]}),M7e=hr(function(h,y){var M=Ku(y);return Pi(M)&&(M=n),Pi(h)?r8(h,so(y,1,Pi,!0),n,M):[]});function D7e(h,y,M){var K=h==null?0:h.length;return K?(y=M||y===n?1:nr(y),qu(h,y<0?0:y,K)):[]}function L7e(h,y,M){var K=h==null?0:h.length;return K?(y=M||y===n?1:nr(y),y=K-y,qu(h,0,y<0?0:y)):[]}function U7e(h,y){return h&&h.length?K9(h,Nn(y,3),!0,!0):[]}function F7e(h,y){return h&&h.length?K9(h,Nn(y,3),!0):[]}function V7e(h,y,M,K){var re=h==null?0:h.length;return re?(M&&typeof M!="number"&&mc(h,y,M)&&(M=0,K=re),Rke(h,y,M,K)):[]}function Dre(h,y,M){var K=h==null?0:h.length;if(!K)return-1;var re=M==null?0:nr(M);return re<0&&(re=ir(K+re,0)),gE(h,Nn(y,3),re)}function Lre(h,y,M){var K=h==null?0:h.length;if(!K)return-1;var re=K-1;return M!==n&&(re=nr(M),re=M<0?ir(K+re,0):Sr(re,K-1)),gE(h,Nn(y,3),re,!0)}function Ure(h){var y=h==null?0:h.length;return y?so(h,1):[]}function $7e(h){var y=h==null?0:h.length;return y?so(h,L):[]}function j7e(h,y){var M=h==null?0:h.length;return M?(y=y===n?1:nr(y),so(h,y)):[]}function H7e(h){for(var y=-1,M=h==null?0:h.length,K={};++y<M;){var re=h[y];K[re[0]]=re[1]}return K}function Fre(h){return h&&h.length?h[0]:n}function q7e(h,y,M){var K=h==null?0:h.length;if(!K)return-1;var re=M==null?0:nr(M);return re<0&&(re=ir(K+re,0)),wm(h,y,re)}function K7e(h){var y=h==null?0:h.length;return y?qu(h,0,-1):[]}var G7e=hr(function(h){var y=ks(h,AV);return y.length&&y[0]===h[0]?hV(y):[]}),W7e=hr(function(h){var y=Ku(h),M=ks(h,AV);return y===Ku(M)?y=n:M.pop(),M.length&&M[0]===h[0]?hV(M,Nn(y,2)):[]}),z7e=hr(function(h){var y=Ku(h),M=ks(h,AV);return y=typeof y=="function"?y:n,y&&M.pop(),M.length&&M[0]===h[0]?hV(M,n,y):[]});function J7e(h,y){return h==null?"":Ps.call(h,y)}function Ku(h){var y=h==null?0:h.length;return y?h[y-1]:n}function Y7e(h,y,M){var K=h==null?0:h.length;if(!K)return-1;var re=K;return M!==n&&(re=nr(M),re=re<0?ir(K+re,0):Sr(re,K-1)),y===y?M9(h,y,re):gE(h,C9,re,!0)}function Q7e(h,y){return h&&h.length?Yne(h,nr(y)):n}var Z7e=hr(Vre);function Vre(h,y){return h&&h.length&&y&&y.length?yV(h,y):h}function X7e(h,y,M){return h&&h.length&&y&&y.length?yV(h,y,Nn(M,2)):h}function e9e(h,y,M){return h&&h.length&&y&&y.length?yV(h,y,n,M):h}var t9e=dp(function(h,y){var M=h==null?0:h.length,K=lV(h,y);return Xne(h,ks(y,function(re){return hp(re,M)?+re:re}).sort(lre)),K});function n9e(h,y){var M=[];if(!(h&&h.length))return M;var K=-1,re=[],pe=h.length;for(y=Nn(y,3);++K<pe;){var Ee=h[K];y(Ee,K,h)&&(M.push(Ee),re.push(K))}return Xne(h,re),M}function LV(h){return h==null?h:SE.call(h)}function r9e(h,y,M){var K=h==null?0:h.length;return K?(M&&typeof M!="number"&&mc(h,y,M)?(y=0,M=K):(y=y==null?0:nr(y),M=M===n?K:nr(M)),qu(h,y,M)):[]}function s9e(h,y){return q9(h,y)}function i9e(h,y,M){return vV(h,y,Nn(M,2))}function a9e(h,y){var M=h==null?0:h.length;if(M){var K=q9(h,y);if(K<M&&sd(h[K],y))return K}return-1}function o9e(h,y){return q9(h,y,!0)}function c9e(h,y,M){return vV(h,y,Nn(M,2),!0)}function l9e(h,y){var M=h==null?0:h.length;if(M){var K=q9(h,y,!0)-1;if(sd(h[K],y))return K}return-1}function u9e(h){return h&&h.length?tre(h):[]}function f9e(h,y){return h&&h.length?tre(h,Nn(y,2)):[]}function d9e(h){var y=h==null?0:h.length;return y?qu(h,1,y):[]}function h9e(h,y,M){return h&&h.length?(y=M||y===n?1:nr(y),qu(h,0,y<0?0:y)):[]}function p9e(h,y,M){var K=h==null?0:h.length;return K?(y=M||y===n?1:nr(y),y=K-y,qu(h,y<0?0:y,K)):[]}function g9e(h,y){return h&&h.length?K9(h,Nn(y,3),!1,!0):[]}function m9e(h,y){return h&&h.length?K9(h,Nn(y,3)):[]}var y9e=hr(function(h){return Am(so(h,1,Pi,!0))}),w9e=hr(function(h){var y=Ku(h);return Pi(y)&&(y=n),Am(so(h,1,Pi,!0),Nn(y,2))}),b9e=hr(function(h){var y=Ku(h);return y=typeof y=="function"?y:n,Am(so(h,1,Pi,!0),n,y)});function v9e(h){return h&&h.length?Am(h):[]}function x9e(h,y){return h&&h.length?Am(h,Nn(y,2)):[]}function E9e(h,y){return y=typeof y=="function"?y:n,h&&h.length?Am(h,n,y):[]}function UV(h){if(!(h&&h.length))return[];var y=0;return h=Vu(h,function(M){if(Pi(M))return y=ir(M.length,y),!0}),J4(y,function(M){return ks(h,W4(M))})}function $re(h,y){if(!(h&&h.length))return[];var M=UV(h);return y==null?M:ks(M,function(K){return zi(y,n,K)})}var A9e=hr(function(h,y){return Pi(h)?r8(h,y):[]}),S9e=hr(function(h){return EV(Vu(h,Pi))}),I9e=hr(function(h){var y=Ku(h);return Pi(y)&&(y=n),EV(Vu(h,Pi),Nn(y,2))}),C9e=hr(function(h){var y=Ku(h);return y=typeof y=="function"?y:n,EV(Vu(h,Pi),n,y)}),T9e=hr(UV);function N9e(h,y){return ire(h||[],y||[],n8)}function k9e(h,y){return ire(h||[],y||[],a8)}var P9e=hr(function(h){var y=h.length,M=y>1?h[y-1]:n;return M=typeof M=="function"?(h.pop(),M):n,$re(h,M)});function jre(h){var y=he(h);return y.__chain__=!0,y}function O9e(h,y){return y(h),h}function eP(h,y){return y(h)}var R9e=dp(function(h){var y=h.length,M=y?h[0]:0,K=this.__wrapped__,re=function(pe){return lV(pe,h)};return y>1||this.__actions__.length||!(K instanceof Rr)||!hp(M)?this.thru(re):(K=K.slice(M,+M+(y?1:0)),K.__actions__.push({func:eP,args:[re],thisArg:n}),new ju(K,this.__chain__).thru(function(pe){return y&&!pe.length&&pe.push(n),pe}))});function _9e(){return jre(this)}function B9e(){return new ju(this.value(),this.__chain__)}function M9e(){this.__values__===n&&(this.__values__=nse(this.value()));var h=this.__index__>=this.__values__.length,y=h?n:this.__values__[this.__index__++];return{done:h,value:y}}function D9e(){return this}function L9e(h){for(var y,M=this;M instanceof F9;){var K=Mre(M);K.__index__=0,K.__values__=n,y?re.__wrapped__=K:y=K;var re=K;M=M.__wrapped__}return re.__wrapped__=h,y}function U9e(){var h=this.__wrapped__;if(h instanceof Rr){var y=h;return this.__actions__.length&&(y=new Rr(this)),y=y.reverse(),y.__actions__.push({func:eP,args:[LV],thisArg:n}),new ju(y,this.__chain__)}return this.thru(LV)}function F9e(){return sre(this.__wrapped__,this.__actions__)}var V9e=G9(function(h,y,M){Xr.call(h,M)?++h[M]:up(h,M,1)});function $9e(h,y,M){var K=Yn(h)?S9:Oke;return M&&mc(h,y,M)&&(y=n),K(h,Nn(y,3))}function j9e(h,y){var M=Yn(h)?Vu:$ne;return M(h,Nn(y,3))}var H9e=gre(Dre),q9e=gre(Lre);function K9e(h,y){return so(tP(h,y),1)}function G9e(h,y){return so(tP(h,y),L)}function W9e(h,y,M){return M=M===n?1:nr(M),so(tP(h,y),M)}function Hre(h,y){var M=Yn(h)?Zc:Em;return M(h,Nn(y,3))}function qre(h,y){var M=Yn(h)?$F:Vne;return M(h,Nn(y,3))}var z9e=G9(function(h,y,M){Xr.call(h,M)?h[M].push(y):up(h,M,[y])});function J9e(h,y,M,K){h=tl(h)?h:RE(h),M=M&&!K?nr(M):0;var re=h.length;return M<0&&(M=ir(re+M,0)),aP(h)?M<=re&&h.indexOf(y,M)>-1:!!re&&wm(h,y,M)>-1}var Y9e=hr(function(h,y,M){var K=-1,re=typeof y=="function",pe=tl(h)?He(h.length):[];return Em(h,function(Ee){pe[++K]=re?zi(y,Ee,M):s8(Ee,y,M)}),pe}),Q9e=G9(function(h,y,M){up(h,M,y)});function tP(h,y){var M=Yn(h)?ks:Wne;return M(h,Nn(y,3))}function Z9e(h,y,M,K){return h==null?[]:(Yn(y)||(y=y==null?[]:[y]),M=K?n:M,Yn(M)||(M=M==null?[]:[M]),Qne(h,y,M))}var X9e=G9(function(h,y,M){h[M?0:1].push(y)},function(){return[[],[]]});function ePe(h,y,M){var K=Yn(h)?K4:mE,re=arguments.length<3;return K(h,Nn(y,4),M,re,Em)}function tPe(h,y,M){var K=Yn(h)?jF:mE,re=arguments.length<3;return K(h,Nn(y,4),M,re,Vne)}function nPe(h,y){var M=Yn(h)?Vu:$ne;return M(h,sP(Nn(y,3)))}function rPe(h){var y=Yn(h)?Dne:Jke;return y(h)}function sPe(h,y,M){(M?mc(h,y,M):y===n)?y=1:y=nr(y);var K=Yn(h)?Cke:Yke;return K(h,y)}function iPe(h){var y=Yn(h)?Tke:Zke;return y(h)}function aPe(h){if(h==null)return 0;if(tl(h))return aP(h)?ip(h):h.length;var y=Uo(h);return y==xe||y==de?h.size:gV(h).length}function oPe(h,y,M){var K=Yn(h)?G4:Xke;return M&&mc(h,y,M)&&(y=n),K(h,Nn(y,3))}var cPe=hr(function(h,y){if(h==null)return[];var M=y.length;return M>1&&mc(h,y[0],y[1])?y=[]:M>2&&mc(y[0],y[1],y[2])&&(y=[y[0]]),Qne(h,so(y,1),[])}),nP=Me||function(){return Ar.Date.now()};function lPe(h,y){if(typeof y!="function")throw new Xc(a);return h=nr(h),function(){if(--h<1)return y.apply(this,arguments)}}function Kre(h,y,M){return y=M?n:y,y=h&&y==null?h.length:y,fp(h,O,n,n,n,n,y)}function Gre(h,y){var M;if(typeof y!="function")throw new Xc(a);return h=nr(h),function(){return--h>0&&(M=y.apply(this,arguments)),h<=1&&(y=n),M}}var FV=hr(function(h,y,M){var K=v;if(M.length){var re=nd(M,PE(FV));K|=D}return fp(h,K,y,M,re)}),Wre=hr(function(h,y,M){var K=v|A;if(M.length){var re=nd(M,PE(Wre));K|=D}return fp(y,K,h,M,re)});function zre(h,y,M){y=M?n:y;var K=fp(h,I,n,n,n,n,n,y);return K.placeholder=zre.placeholder,K}function Jre(h,y,M){y=M?n:y;var K=fp(h,B,n,n,n,n,n,y);return K.placeholder=Jre.placeholder,K}function Yre(h,y,M){var K,re,pe,Ee,Te,_e,Qe=0,Xe=!1,it=!1,St=!0;if(typeof h!="function")throw new Xc(a);y=Gu(y)||0,ri(M)&&(Xe=!!M.leading,it="maxWait"in M,pe=it?ir(Gu(M.maxWait)||0,y):pe,St="trailing"in M?!!M.trailing:St);function en(Oi){var id=K,mp=re;return K=re=n,Qe=Oi,Ee=h.apply(mp,id),Ee}function _n(Oi){return Qe=Oi,Te=l8(Ir,y),Xe?en(Oi):Ee}function ar(Oi){var id=Oi-_e,mp=Oi-Qe,gse=y-id;return it?Sr(gse,pe-mp):gse}function Bn(Oi){var id=Oi-_e,mp=Oi-Qe;return _e===n||id>=y||id<0||it&&mp>=pe}function Ir(){var Oi=nP();if(Bn(Oi))return Lr(Oi);Te=l8(Ir,ar(Oi))}function Lr(Oi){return Te=n,St&&K?en(Oi):(K=re=n,Ee)}function ql(){Te!==n&&are(Te),Qe=0,K=_e=re=Te=n}function yc(){return Te===n?Ee:Lr(nP())}function Kl(){var Oi=nP(),id=Bn(Oi);if(K=arguments,re=this,_e=Oi,id){if(Te===n)return _n(_e);if(it)return are(Te),Te=l8(Ir,y),en(_e)}return Te===n&&(Te=l8(Ir,y)),Ee}return Kl.cancel=ql,Kl.flush=yc,Kl}var uPe=hr(function(h,y){return Fne(h,1,y)}),fPe=hr(function(h,y,M){return Fne(h,Gu(y)||0,M)});function dPe(h){return fp(h,Q)}function rP(h,y){if(typeof h!="function"||y!=null&&typeof y!="function")throw new Xc(a);var M=function(){var K=arguments,re=y?y.apply(this,K):K[0],pe=M.cache;if(pe.has(re))return pe.get(re);var Ee=h.apply(this,K);return M.cache=pe.set(re,Ee)||pe,Ee};return M.cache=new(rP.Cache||lp),M}rP.Cache=lp;function sP(h){if(typeof h!="function")throw new Xc(a);return function(){var y=arguments;switch(y.length){case 0:return!h.call(this);case 1:return!h.call(this,y[0]);case 2:return!h.call(this,y[0],y[1]);case 3:return!h.call(this,y[0],y[1],y[2])}return!h.apply(this,y)}}function hPe(h){return Gre(2,h)}var pPe=e7e(function(h,y){y=y.length==1&&Yn(y[0])?ks(y[0],pc(Nn())):ks(so(y,1),pc(Nn()));var M=y.length;return hr(function(K){for(var re=-1,pe=Sr(K.length,M);++re<pe;)K[re]=y[re].call(this,K[re]);return zi(h,this,K)})}),VV=hr(function(h,y){var M=nd(y,PE(VV));return fp(h,D,n,y,M)}),Qre=hr(function(h,y){var M=nd(y,PE(Qre));return fp(h,V,n,y,M)}),gPe=dp(function(h,y){return fp(h,U,n,n,n,y)});function mPe(h,y){if(typeof h!="function")throw new Xc(a);return y=y===n?y:nr(y),hr(h,y)}function yPe(h,y){if(typeof h!="function")throw new Xc(a);return y=y==null?0:ir(nr(y),0),hr(function(M){var K=M[y],re=Im(M,0,y);return K&&ed(re,K),zi(h,this,re)})}function wPe(h,y,M){var K=!0,re=!0;if(typeof h!="function")throw new Xc(a);return ri(M)&&(K="leading"in M?!!M.leading:K,re="trailing"in M?!!M.trailing:re),Yre(h,y,{leading:K,maxWait:y,trailing:re})}function bPe(h){return Kre(h,1)}function vPe(h,y){return VV(SV(y),h)}function xPe(){if(!arguments.length)return[];var h=arguments[0];return Yn(h)?h:[h]}function EPe(h){return Hu(h,p)}function APe(h,y){return y=typeof y=="function"?y:n,Hu(h,p,y)}function SPe(h){return Hu(h,f|p)}function IPe(h,y){return y=typeof y=="function"?y:n,Hu(h,f|p,y)}function CPe(h,y){return y==null||Une(h,y,Pa(y))}function sd(h,y){return h===y||h!==h&&y!==y}var TPe=Y9(dV),NPe=Y9(function(h,y){return h>=y}),s1=qne(function(){return arguments}())?qne:function(h){return di(h)&&Xr.call(h,"callee")&&!W.call(h,"callee")},Yn=He.isArray,kPe=no?pc(no):Lke;function tl(h){return h!=null&&iP(h.length)&&!pp(h)}function Pi(h){return di(h)&&tl(h)}function PPe(h){return h===!0||h===!1||di(h)&&gc(h)==ee}var Cm=br||QV,OPe=Vl?pc(Vl):Uke;function RPe(h){return di(h)&&h.nodeType===1&&!u8(h)}function _Pe(h){if(h==null)return!0;if(tl(h)&&(Yn(h)||typeof h=="string"||typeof h.splice=="function"||Cm(h)||OE(h)||s1(h)))return!h.length;var y=Uo(h);if(y==xe||y==de)return!h.size;if(c8(h))return!gV(h).length;for(var M in h)if(Xr.call(h,M))return!1;return!0}function BPe(h,y){return i8(h,y)}function MPe(h,y,M){M=typeof M=="function"?M:n;var K=M?M(h,y):n;return K===n?i8(h,y,n,M):!!K}function $V(h){if(!di(h))return!1;var y=gc(h);return y==se||y==j||typeof h.message=="string"&&typeof h.name=="string"&&!u8(h)}function DPe(h){return typeof h=="number"&&Vr(h)}function pp(h){if(!ri(h))return!1;var y=gc(h);return y==ye||y==Ce||y==J||y==mt}function Zre(h){return typeof h=="number"&&h==nr(h)}function iP(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=C}function ri(h){var y=typeof h;return h!=null&&(y=="object"||y=="function")}function di(h){return h!=null&&typeof h=="object"}var Xre=Qc?pc(Qc):Vke;function LPe(h,y){return h===y||pV(h,y,OV(y))}function UPe(h,y,M){return M=typeof M=="function"?M:n,pV(h,y,OV(y),M)}function FPe(h){return ese(h)&&h!=+h}function VPe(h){if(A7e(h))throw new jn(i);return Kne(h)}function $Pe(h){return h===null}function jPe(h){return h==null}function ese(h){return typeof h=="number"||di(h)&&gc(h)==De}function u8(h){if(!di(h)||gc(h)!=ze)return!1;var y=Yb(h);if(y===null)return!0;var M=Xr.call(y,"constructor")&&y.constructor;return typeof M=="function"&&M instanceof M&&vE.call(M)==iV}var jV=Fu?pc(Fu):$ke;function HPe(h){return Zre(h)&&h>=-C&&h<=C}var tse=Gb?pc(Gb):jke;function aP(h){return typeof h=="string"||!Yn(h)&&di(h)&&gc(h)==oe}function Hl(h){return typeof h=="symbol"||di(h)&&gc(h)==fe}var OE=rp?pc(rp):Hke;function qPe(h){return h===n}function KPe(h){return di(h)&&Uo(h)==ae}function GPe(h){return di(h)&&gc(h)==Ie}var WPe=Y9(mV),zPe=Y9(function(h,y){return h<=y});function nse(h){if(!h)return[];if(tl(h))return aP(h)?$l(h):el(h);if(me&&h[me])return wr(h[me]());var y=Uo(h),M=y==xe?yE:y==de?zb:RE;return M(h)}function gp(h){if(!h)return h===0?h:0;if(h=Gu(h),h===L||h===-L){var y=h<0?-1:1;return y*T}return h===h?h:0}function nr(h){var y=gp(h),M=y%1;return y===y?M?y-M:y:0}function rse(h){return h?e1(nr(h),0,P):0}function Gu(h){if(typeof h=="number")return h;if(Hl(h))return E;if(ri(h)){var y=typeof h.valueOf=="function"?h.valueOf():h;h=ri(y)?y+"":y}if(typeof h!="string")return h===0?h:+h;h=N9(h);var M=ca.test(h);return M||ua.test(h)?Kn(h.slice(2),M?2:8):Dr.test(h)?E:+h}function sse(h){return Sh(h,nl(h))}function JPe(h){return h?e1(nr(h),-C,C):h===0?h:0}function os(h){return h==null?"":jl(h)}var YPe=NE(function(h,y){if(c8(y)||tl(y)){Sh(y,Pa(y),h);return}for(var M in y)Xr.call(y,M)&&n8(h,M,y[M])}),ise=NE(function(h,y){Sh(y,nl(y),h)}),oP=NE(function(h,y,M,K){Sh(y,nl(y),h,K)}),QPe=NE(function(h,y,M,K){Sh(y,Pa(y),h,K)}),ZPe=dp(lV);function XPe(h,y){var M=TE(h);return y==null?M:Lne(M,y)}var eOe=hr(function(h,y){h=ps(h);var M=-1,K=y.length,re=K>2?y[2]:n;for(re&&mc(y[0],y[1],re)&&(K=1);++M<K;)for(var pe=y[M],Ee=nl(pe),Te=-1,_e=Ee.length;++Te<_e;){var Qe=Ee[Te],Xe=h[Qe];(Xe===n||sd(Xe,vm[Qe])&&!Xr.call(h,Qe))&&(h[Qe]=pe[Qe])}return h}),tOe=hr(function(h){return h.push(n,Ere),zi(ase,n,h)});function nOe(h,y){return I9(h,Nn(y,3),Ah)}function rOe(h,y){return I9(h,Nn(y,3),fV)}function sOe(h,y){return h==null?h:uV(h,Nn(y,3),nl)}function iOe(h,y){return h==null?h:jne(h,Nn(y,3),nl)}function aOe(h,y){return h&&Ah(h,Nn(y,3))}function oOe(h,y){return h&&fV(h,Nn(y,3))}function cOe(h){return h==null?[]:j9(h,Pa(h))}function lOe(h){return h==null?[]:j9(h,nl(h))}function HV(h,y,M){var K=h==null?n:t1(h,y);return K===n?M:K}function uOe(h,y){return h!=null&&Ire(h,y,_ke)}function qV(h,y){return h!=null&&Ire(h,y,Bke)}var fOe=yre(function(h,y,M){y!=null&&typeof y.toString!="function"&&(y=xE.call(y)),h[y]=M},GV(rl)),dOe=yre(function(h,y,M){y!=null&&typeof y.toString!="function"&&(y=xE.call(y)),Xr.call(h,y)?h[y].push(M):h[y]=[M]},Nn),hOe=hr(s8);function Pa(h){return tl(h)?Mne(h):gV(h)}function nl(h){return tl(h)?Mne(h,!0):qke(h)}function pOe(h,y){var M={};return y=Nn(y,3),Ah(h,function(K,re,pe){up(M,y(K,re,pe),K)}),M}function gOe(h,y){var M={};return y=Nn(y,3),Ah(h,function(K,re,pe){up(M,re,y(K,re,pe))}),M}var mOe=NE(function(h,y,M){H9(h,y,M)}),ase=NE(function(h,y,M,K){H9(h,y,M,K)}),yOe=dp(function(h,y){var M={};if(h==null)return M;var K=!1;y=ks(y,function(pe){return pe=Sm(pe,h),K||(K=pe.length>1),pe}),Sh(h,kV(h),M),K&&(M=Hu(M,f|d|p,f7e));for(var re=y.length;re--;)xV(M,y[re]);return M});function wOe(h,y){return ose(h,sP(Nn(y)))}var bOe=dp(function(h,y){return h==null?{}:Gke(h,y)});function ose(h,y){if(h==null)return{};var M=ks(kV(h),function(K){return[K]});return y=Nn(y),Zne(h,M,function(K,re){return y(K,re[0])})}function vOe(h,y,M){y=Sm(y,h);var K=-1,re=y.length;for(re||(re=1,h=n);++K<re;){var pe=h==null?n:h[Ih(y[K])];pe===n&&(K=re,pe=M),h=pp(pe)?pe.call(h):pe}return h}function xOe(h,y,M){return h==null?h:a8(h,y,M)}function EOe(h,y,M,K){return K=typeof K=="function"?K:n,h==null?h:a8(h,y,M,K)}var cse=vre(Pa),lse=vre(nl);function AOe(h,y,M){var K=Yn(h),re=K||Cm(h)||OE(h);if(y=Nn(y,4),M==null){var pe=h&&h.constructor;re?M=K?new pe:[]:ri(h)?M=pp(pe)?TE(Yb(h)):{}:M={}}return(re?Zc:Ah)(h,function(Ee,Te,_e){return y(M,Ee,Te,_e)}),M}function SOe(h,y){return h==null?!0:xV(h,y)}function IOe(h,y,M){return h==null?h:rre(h,y,SV(M))}function COe(h,y,M,K){return K=typeof K=="function"?K:n,h==null?h:rre(h,y,SV(M),K)}function RE(h){return h==null?[]:Y4(h,Pa(h))}function TOe(h){return h==null?[]:Y4(h,nl(h))}function NOe(h,y,M){return M===n&&(M=y,y=n),M!==n&&(M=Gu(M),M=M===M?M:0),y!==n&&(y=Gu(y),y=y===y?y:0),e1(Gu(h),y,M)}function kOe(h,y,M){return y=gp(y),M===n?(M=y,y=0):M=gp(M),h=Gu(h),Mke(h,y,M)}function POe(h,y,M){if(M&&typeof M!="boolean"&&mc(h,y,M)&&(y=M=n),M===n&&(typeof y=="boolean"?(M=y,y=n):typeof h=="boolean"&&(M=h,h=n)),h===n&&y===n?(h=0,y=1):(h=gp(h),y===n?(y=h,h=0):y=gp(y)),h>y){var K=h;h=y,y=K}if(M||h%1||y%1){var re=$u();return Sr(h+re*(y-h+hs("1e-"+((re+"").length-1))),y)}return wV(h,y)}var OOe=kE(function(h,y,M){return y=y.toLowerCase(),h+(M?use(y):y)});function use(h){return KV(os(h).toLowerCase())}function fse(h){return h=os(h),h&&h.replace(Js,YF).replace(uE,"")}function ROe(h,y,M){h=os(h),y=jl(y);var K=h.length;M=M===n?K:e1(nr(M),0,K);var re=M;return M-=y.length,M>=0&&h.slice(M,re)==y}function _Oe(h){return h=os(h),h&&sn.test(h)?h.replace(Qt,$s):h}function BOe(h){return h=os(h),h&&Ht.test(h)?h.replace(kt,"\\$&"):h}var MOe=kE(function(h,y,M){return h+(M?"-":"")+y.toLowerCase()}),DOe=kE(function(h,y,M){return h+(M?" ":"")+y.toLowerCase()}),LOe=pre("toLowerCase");function UOe(h,y,M){h=os(h),y=nr(y);var K=y?ip(h):0;if(!y||K>=y)return h;var re=(y-K)/2;return J9(wt(re),M)+h+J9(lt(re),M)}function FOe(h,y,M){h=os(h),y=nr(y);var K=y?ip(h):0;return y&&K<y?h+J9(y-K,M):h}function VOe(h,y,M){h=os(h),y=nr(y);var K=y?ip(h):0;return y&&K<y?J9(y-K,M)+h:h}function $Oe(h,y,M){return M||y==null?y=0:y&&(y=+y),ro(os(h).replace(an,""),y||0)}function jOe(h,y,M){return(M?mc(h,y,M):y===n)?y=1:y=nr(y),bV(os(h),y)}function HOe(){var h=arguments,y=os(h[0]);return h.length<3?y:y.replace(h[1],h[2])}var qOe=kE(function(h,y,M){return h+(M?"_":"")+y.toLowerCase()});function KOe(h,y,M){return M&&typeof M!="number"&&mc(h,y,M)&&(y=M=n),M=M===n?P:M>>>0,M?(h=os(h),h&&(typeof y=="string"||y!=null&&!jV(y))&&(y=jl(y),!y&&bh(h))?Im($l(h),0,M):h.split(y,M)):[]}var GOe=kE(function(h,y,M){return h+(M?" ":"")+KV(y)});function WOe(h,y,M){return h=os(h),M=M==null?0:e1(nr(M),0,h.length),y=jl(y),h.slice(M,M+y.length)==y}function zOe(h,y,M){var K=he.templateSettings;M&&mc(h,y,M)&&(y=n),h=os(h),y=oP({},y,K,xre);var re=oP({},y.imports,K.imports,xre),pe=Pa(re),Ee=Y4(re,pe),Te,_e,Qe=0,Xe=y.interpolate||Ro,it="__p += '",St=Z4((y.escape||Ro).source+"|"+Xe.source+"|"+(Xe===Xt?Or:Ro).source+"|"+(y.evaluate||Ro).source+"|$","g"),en="//# sourceURL="+(Xr.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Kb+"]")+`
`;h.replace(St,function(Bn,Ir,Lr,ql,yc,Kl){return Lr||(Lr=ql),it+=h.slice(Qe,Kl).replace(_o,O9),Ir&&(Te=!0,it+=`' +
__e(`+Ir+`) +
'`),yc&&(_e=!0,it+=`';
`+yc+`;
__p += '`),Lr&&(it+=`' +
((__t = (`+Lr+`)) == null ? '' : __t) +
'`),Qe=Kl+Bn.length,Bn}),it+=`';
`;var _n=Xr.call(y,"variable")&&y.variable;if(!_n)it=`with (obj) {
`+it+`
}
`;else if(Fr.test(_n))throw new jn(o);it=(_e?it.replace(An,""):it).replace(At,"$1").replace(Sn,"$1;"),it="function("+(_n||"obj")+`) {
`+(_n?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Te?", __e = _.escape":"")+(_e?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+it+`return __p
}`;var ar=hse(function(){return qr(pe,en+"return "+it).apply(n,Ee)});if(ar.source=it,$V(ar))throw ar;return ar}function JOe(h){return os(h).toLowerCase()}function YOe(h){return os(h).toUpperCase()}function QOe(h,y,M){if(h=os(h),h&&(M||y===n))return N9(h);if(!h||!(y=jl(y)))return h;var K=$l(h),re=$l(y),pe=k9(K,re),Ee=P9(K,re)+1;return Im(K,pe,Ee).join("")}function ZOe(h,y,M){if(h=os(h),h&&(M||y===n))return h.slice(0,D9(h)+1);if(!h||!(y=jl(y)))return h;var K=$l(h),re=P9(K,$l(y))+1;return Im(K,0,re).join("")}function XOe(h,y,M){if(h=os(h),h&&(M||y===n))return h.replace(an,"");if(!h||!(y=jl(y)))return h;var K=$l(h),re=k9(K,$l(y));return Im(K,re).join("")}function eRe(h,y){var M=ie,K=G;if(ri(y)){var re="separator"in y?y.separator:re;M="length"in y?nr(y.length):M,K="omission"in y?jl(y.omission):K}h=os(h);var pe=h.length;if(bh(h)){var Ee=$l(h);pe=Ee.length}if(M>=pe)return h;var Te=M-ip(K);if(Te<1)return K;var _e=Ee?Im(Ee,0,Te).join(""):h.slice(0,Te);if(re===n)return _e+K;if(Ee&&(Te+=_e.length-Te),jV(re)){if(h.slice(Te).search(re)){var Qe,Xe=_e;for(re.global||(re=Z4(re.source,os(qn.exec(re))+"g")),re.lastIndex=0;Qe=re.exec(Xe);)var it=Qe.index;_e=_e.slice(0,it===n?Te:it)}}else if(h.indexOf(jl(re),Te)!=Te){var St=_e.lastIndexOf(re);St>-1&&(_e=_e.slice(0,St))}return _e+K}function tRe(h){return h=os(h),h&&nn.test(h)?h.replace(Hn,QF):h}var nRe=kE(function(h,y,M){return h+(M?" ":"")+y.toUpperCase()}),KV=pre("toUpperCase");function dse(h,y,M){return h=os(h),y=M?n:y,y===n?R9(h)?eV(h):KF(h):h.match(y)||[]}var hse=hr(function(h,y){try{return zi(h,n,y)}catch(M){return $V(M)?M:new jn(M)}}),rRe=dp(function(h,y){return Zc(y,function(M){M=Ih(M),up(h,M,FV(h[M],h))}),h});function sRe(h){var y=h==null?0:h.length,M=Nn();return h=y?ks(h,function(K){if(typeof K[1]!="function")throw new Xc(a);return[M(K[0]),K[1]]}):[],hr(function(K){for(var re=-1;++re<y;){var pe=h[re];if(zi(pe[0],this,K))return zi(pe[1],this,K)}})}function iRe(h){return Pke(Hu(h,f))}function GV(h){return function(){return h}}function aRe(h,y){return h==null||h!==h?y:h}var oRe=mre(),cRe=mre(!0);function rl(h){return h}function WV(h){return Gne(typeof h=="function"?h:Hu(h,f))}function lRe(h){return zne(Hu(h,f))}function uRe(h,y){return Jne(h,Hu(y,f))}var fRe=hr(function(h,y){return function(M){return s8(M,h,y)}}),dRe=hr(function(h,y){return function(M){return s8(h,M,y)}});function zV(h,y,M){var K=Pa(y),re=j9(y,K);M==null&&!(ri(y)&&(re.length||!K.length))&&(M=y,y=h,h=this,re=j9(y,Pa(y)));var pe=!(ri(M)&&"chain"in M)||!!M.chain,Ee=pp(h);return Zc(re,function(Te){var _e=y[Te];h[Te]=_e,Ee&&(h.prototype[Te]=function(){var Qe=this.__chain__;if(pe||Qe){var Xe=h(this.__wrapped__),it=Xe.__actions__=el(this.__actions__);return it.push({func:_e,args:arguments,thisArg:h}),Xe.__chain__=Qe,Xe}return _e.apply(h,ed([this.value()],arguments))})}),h}function hRe(){return Ar._===this&&(Ar._=aV),this}function JV(){}function pRe(h){return h=nr(h),hr(function(y){return Yne(y,h)})}var gRe=CV(ks),mRe=CV(S9),yRe=CV(G4);function pse(h){return _V(h)?W4(Ih(h)):Wke(h)}function wRe(h){return function(y){return h==null?n:t1(h,y)}}var bRe=wre(),vRe=wre(!0);function YV(){return[]}function QV(){return!1}function xRe(){return{}}function ERe(){return""}function ARe(){return!0}function SRe(h,y){if(h=nr(h),h<1||h>C)return[];var M=P,K=Sr(h,P);y=Nn(y),h-=P;for(var re=J4(K,y);++M<h;)y(M);return re}function IRe(h){return Yn(h)?ks(h,Ih):Hl(h)?[h]:el(Bre(os(h)))}function CRe(h){var y=++sV;return os(h)+y}var TRe=z9(function(h,y){return h+y},0),NRe=TV("ceil"),kRe=z9(function(h,y){return h/y},1),PRe=TV("floor");function ORe(h){return h&&h.length?$9(h,rl,dV):n}function RRe(h,y){return h&&h.length?$9(h,Nn(y,2),dV):n}function _Re(h){return T9(h,rl)}function BRe(h,y){return T9(h,Nn(y,2))}function MRe(h){return h&&h.length?$9(h,rl,mV):n}function DRe(h,y){return h&&h.length?$9(h,Nn(y,2),mV):n}var LRe=z9(function(h,y){return h*y},1),URe=TV("round"),FRe=z9(function(h,y){return h-y},0);function VRe(h){return h&&h.length?sp(h,rl):0}function $Re(h,y){return h&&h.length?sp(h,Nn(y,2)):0}return he.after=lPe,he.ary=Kre,he.assign=YPe,he.assignIn=ise,he.assignInWith=oP,he.assignWith=QPe,he.at=ZPe,he.before=Gre,he.bind=FV,he.bindAll=rRe,he.bindKey=Wre,he.castArray=xPe,he.chain=jre,he.chunk=P7e,he.compact=O7e,he.concat=R7e,he.cond=sRe,he.conforms=iRe,he.constant=GV,he.countBy=V9e,he.create=XPe,he.curry=zre,he.curryRight=Jre,he.debounce=Yre,he.defaults=eOe,he.defaultsDeep=tOe,he.defer=uPe,he.delay=fPe,he.difference=_7e,he.differenceBy=B7e,he.differenceWith=M7e,he.drop=D7e,he.dropRight=L7e,he.dropRightWhile=U7e,he.dropWhile=F7e,he.fill=V7e,he.filter=j9e,he.flatMap=K9e,he.flatMapDeep=G9e,he.flatMapDepth=W9e,he.flatten=Ure,he.flattenDeep=$7e,he.flattenDepth=j7e,he.flip=dPe,he.flow=oRe,he.flowRight=cRe,he.fromPairs=H7e,he.functions=cOe,he.functionsIn=lOe,he.groupBy=z9e,he.initial=K7e,he.intersection=G7e,he.intersectionBy=W7e,he.intersectionWith=z7e,he.invert=fOe,he.invertBy=dOe,he.invokeMap=Y9e,he.iteratee=WV,he.keyBy=Q9e,he.keys=Pa,he.keysIn=nl,he.map=tP,he.mapKeys=pOe,he.mapValues=gOe,he.matches=lRe,he.matchesProperty=uRe,he.memoize=rP,he.merge=mOe,he.mergeWith=ase,he.method=fRe,he.methodOf=dRe,he.mixin=zV,he.negate=sP,he.nthArg=pRe,he.omit=yOe,he.omitBy=wOe,he.once=hPe,he.orderBy=Z9e,he.over=gRe,he.overArgs=pPe,he.overEvery=mRe,he.overSome=yRe,he.partial=VV,he.partialRight=Qre,he.partition=X9e,he.pick=bOe,he.pickBy=ose,he.property=pse,he.propertyOf=wRe,he.pull=Z7e,he.pullAll=Vre,he.pullAllBy=X7e,he.pullAllWith=e9e,he.pullAt=t9e,he.range=bRe,he.rangeRight=vRe,he.rearg=gPe,he.reject=nPe,he.remove=n9e,he.rest=mPe,he.reverse=LV,he.sampleSize=sPe,he.set=xOe,he.setWith=EOe,he.shuffle=iPe,he.slice=r9e,he.sortBy=cPe,he.sortedUniq=u9e,he.sortedUniqBy=f9e,he.split=KOe,he.spread=yPe,he.tail=d9e,he.take=h9e,he.takeRight=p9e,he.takeRightWhile=g9e,he.takeWhile=m9e,he.tap=O9e,he.throttle=wPe,he.thru=eP,he.toArray=nse,he.toPairs=cse,he.toPairsIn=lse,he.toPath=IRe,he.toPlainObject=sse,he.transform=AOe,he.unary=bPe,he.union=y9e,he.unionBy=w9e,he.unionWith=b9e,he.uniq=v9e,he.uniqBy=x9e,he.uniqWith=E9e,he.unset=SOe,he.unzip=UV,he.unzipWith=$re,he.update=IOe,he.updateWith=COe,he.values=RE,he.valuesIn=TOe,he.without=A9e,he.words=dse,he.wrap=vPe,he.xor=S9e,he.xorBy=I9e,he.xorWith=C9e,he.zip=T9e,he.zipObject=N9e,he.zipObjectDeep=k9e,he.zipWith=P9e,he.entries=cse,he.entriesIn=lse,he.extend=ise,he.extendWith=oP,zV(he,he),he.add=TRe,he.attempt=hse,he.camelCase=OOe,he.capitalize=use,he.ceil=NRe,he.clamp=NOe,he.clone=EPe,he.cloneDeep=SPe,he.cloneDeepWith=IPe,he.cloneWith=APe,he.conformsTo=CPe,he.deburr=fse,he.defaultTo=aRe,he.divide=kRe,he.endsWith=ROe,he.eq=sd,he.escape=_Oe,he.escapeRegExp=BOe,he.every=$9e,he.find=H9e,he.findIndex=Dre,he.findKey=nOe,he.findLast=q9e,he.findLastIndex=Lre,he.findLastKey=rOe,he.floor=PRe,he.forEach=Hre,he.forEachRight=qre,he.forIn=sOe,he.forInRight=iOe,he.forOwn=aOe,he.forOwnRight=oOe,he.get=HV,he.gt=TPe,he.gte=NPe,he.has=uOe,he.hasIn=qV,he.head=Fre,he.identity=rl,he.includes=J9e,he.indexOf=q7e,he.inRange=kOe,he.invoke=hOe,he.isArguments=s1,he.isArray=Yn,he.isArrayBuffer=kPe,he.isArrayLike=tl,he.isArrayLikeObject=Pi,he.isBoolean=PPe,he.isBuffer=Cm,he.isDate=OPe,he.isElement=RPe,he.isEmpty=_Pe,he.isEqual=BPe,he.isEqualWith=MPe,he.isError=$V,he.isFinite=DPe,he.isFunction=pp,he.isInteger=Zre,he.isLength=iP,he.isMap=Xre,he.isMatch=LPe,he.isMatchWith=UPe,he.isNaN=FPe,he.isNative=VPe,he.isNil=jPe,he.isNull=$Pe,he.isNumber=ese,he.isObject=ri,he.isObjectLike=di,he.isPlainObject=u8,he.isRegExp=jV,he.isSafeInteger=HPe,he.isSet=tse,he.isString=aP,he.isSymbol=Hl,he.isTypedArray=OE,he.isUndefined=qPe,he.isWeakMap=KPe,he.isWeakSet=GPe,he.join=J7e,he.kebabCase=MOe,he.last=Ku,he.lastIndexOf=Y7e,he.lowerCase=DOe,he.lowerFirst=LOe,he.lt=WPe,he.lte=zPe,he.max=ORe,he.maxBy=RRe,he.mean=_Re,he.meanBy=BRe,he.min=MRe,he.minBy=DRe,he.stubArray=YV,he.stubFalse=QV,he.stubObject=xRe,he.stubString=ERe,he.stubTrue=ARe,he.multiply=LRe,he.nth=Q7e,he.noConflict=hRe,he.noop=JV,he.now=nP,he.pad=UOe,he.padEnd=FOe,he.padStart=VOe,he.parseInt=$Oe,he.random=POe,he.reduce=ePe,he.reduceRight=tPe,he.repeat=jOe,he.replace=HOe,he.result=vOe,he.round=URe,he.runInContext=Pe,he.sample=rPe,he.size=aPe,he.snakeCase=qOe,he.some=oPe,he.sortedIndex=s9e,he.sortedIndexBy=i9e,he.sortedIndexOf=a9e,he.sortedLastIndex=o9e,he.sortedLastIndexBy=c9e,he.sortedLastIndexOf=l9e,he.startCase=GOe,he.startsWith=WOe,he.subtract=FRe,he.sum=VRe,he.sumBy=$Re,he.template=zOe,he.times=SRe,he.toFinite=gp,he.toInteger=nr,he.toLength=rse,he.toLower=JOe,he.toNumber=Gu,he.toSafeInteger=JPe,he.toString=os,he.toUpper=YOe,he.trim=QOe,he.trimEnd=ZOe,he.trimStart=XOe,he.truncate=eRe,he.unescape=tRe,he.uniqueId=CRe,he.upperCase=nRe,he.upperFirst=KV,he.each=Hre,he.eachRight=qre,he.first=Fre,zV(he,function(){var h={};return Ah(he,function(y,M){Xr.call(he.prototype,M)||(h[M]=y)}),h}(),{chain:!1}),he.VERSION=r,Zc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){he[h].placeholder=he}),Zc(["drop","take"],function(h,y){Rr.prototype[h]=function(M){M=M===n?1:ir(nr(M),0);var K=this.__filtered__&&!y?new Rr(this):this.clone();return K.__filtered__?K.__takeCount__=Sr(M,K.__takeCount__):K.__views__.push({size:Sr(M,P),type:h+(K.__dir__<0?"Right":"")}),K},Rr.prototype[h+"Right"]=function(M){return this.reverse()[h](M).reverse()}}),Zc(["filter","map","takeWhile"],function(h,y){var M=y+1,K=M==b||M==N;Rr.prototype[h]=function(re){var pe=this.clone();return pe.__iteratees__.push({iteratee:Nn(re,3),type:M}),pe.__filtered__=pe.__filtered__||K,pe}}),Zc(["head","last"],function(h,y){var M="take"+(y?"Right":"");Rr.prototype[h]=function(){return this[M](1).value()[0]}}),Zc(["initial","tail"],function(h,y){var M="drop"+(y?"":"Right");Rr.prototype[h]=function(){return this.__filtered__?new Rr(this):this[M](1)}}),Rr.prototype.compact=function(){return this.filter(rl)},Rr.prototype.find=function(h){return this.filter(h).head()},Rr.prototype.findLast=function(h){return this.reverse().find(h)},Rr.prototype.invokeMap=hr(function(h,y){return typeof h=="function"?new Rr(this):this.map(function(M){return s8(M,h,y)})}),Rr.prototype.reject=function(h){return this.filter(sP(Nn(h)))},Rr.prototype.slice=function(h,y){h=nr(h);var M=this;return M.__filtered__&&(h>0||y<0)?new Rr(M):(h<0?M=M.takeRight(-h):h&&(M=M.drop(h)),y!==n&&(y=nr(y),M=y<0?M.dropRight(-y):M.take(y-h)),M)},Rr.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},Rr.prototype.toArray=function(){return this.take(P)},Ah(Rr.prototype,function(h,y){var M=/^(?:filter|find|map|reject)|While$/.test(y),K=/^(?:head|last)$/.test(y),re=he[K?"take"+(y=="last"?"Right":""):y],pe=K||/^find/.test(y);re&&(he.prototype[y]=function(){var Ee=this.__wrapped__,Te=K?[1]:arguments,_e=Ee instanceof Rr,Qe=Te[0],Xe=_e||Yn(Ee),it=function(Ir){var Lr=re.apply(he,ed([Ir],Te));return K&&St?Lr[0]:Lr};Xe&&M&&typeof Qe=="function"&&Qe.length!=1&&(_e=Xe=!1);var St=this.__chain__,en=!!this.__actions__.length,_n=pe&&!St,ar=_e&&!en;if(!pe&&Xe){Ee=ar?Ee:new Rr(this);var Bn=h.apply(Ee,Te);return Bn.__actions__.push({func:eP,args:[it],thisArg:n}),new ju(Bn,St)}return _n&&ar?h.apply(this,Te):(Bn=this.thru(it),_n?K?Bn.value()[0]:Bn.value():Bn)})}),Zc(["pop","push","shift","sort","splice","unshift"],function(h){var y=wE[h],M=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",K=/^(?:pop|shift)$/.test(h);he.prototype[h]=function(){var re=arguments;if(K&&!this.__chain__){var pe=this.value();return y.apply(Yn(pe)?pe:[],re)}return this[M](function(Ee){return y.apply(Yn(Ee)?Ee:[],re)})}}),Ah(Rr.prototype,function(h,y){var M=he[y];if(M){var K=M.name+"";Xr.call(CE,K)||(CE[K]=[]),CE[K].push({name:y,func:M})}}),CE[W9(n,A).name]=[{name:"wrapper",func:n}],Rr.prototype.clone=tke,Rr.prototype.reverse=nke,Rr.prototype.value=rke,he.prototype.at=R9e,he.prototype.chain=_9e,he.prototype.commit=B9e,he.prototype.next=M9e,he.prototype.plant=L9e,he.prototype.reverse=U9e,he.prototype.toJSON=he.prototype.valueOf=he.prototype.value=F9e,he.prototype.first=he.prototype.head,me&&(he.prototype[me]=D9e),he},bm=tV();Ys?((Ys.exports=bm)._=bm,as._=bm):Ar._=bm}).call(cs)})(AD,AD.exports);var DCt=AD.exports,vY={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof cs<"u"&&cs,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(a){var o=typeof i<"u"&&i||typeof self<"u"&&self||typeof cs<"u"&&cs||{},c={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function l(w){return w&&DataView.prototype.isPrototypeOf(w)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(w){return w&&u.indexOf(Object.prototype.toString.call(w))>-1};function d(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(w)||w==="")throw new TypeError('Invalid character in header field name: "'+w+'"');return w.toLowerCase()}function p(w){return typeof w!="string"&&(w=String(w)),w}function g(w){var N={next:function(){var L=w.shift();return{done:L===void 0,value:L}}};return c.iterable&&(N[Symbol.iterator]=function(){return N}),N}function m(w){this.map={},w instanceof m?w.forEach(function(N,L){this.append(L,N)},this):Array.isArray(w)?w.forEach(function(N){if(N.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+N.length);this.append(N[0],N[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(N){this.append(N,w[N])},this)}m.prototype.append=function(w,N){w=d(w),N=p(N);var L=this.map[w];this.map[w]=L?L+", "+N:N},m.prototype.delete=function(w){delete this.map[d(w)]},m.prototype.get=function(w){return w=d(w),this.has(w)?this.map[w]:null},m.prototype.has=function(w){return this.map.hasOwnProperty(d(w))},m.prototype.set=function(w,N){this.map[d(w)]=p(N)},m.prototype.forEach=function(w,N){for(var L in this.map)this.map.hasOwnProperty(L)&&w.call(N,this.map[L],L,this)},m.prototype.keys=function(){var w=[];return this.forEach(function(N,L){w.push(L)}),g(w)},m.prototype.values=function(){var w=[];return this.forEach(function(N){w.push(N)}),g(w)},m.prototype.entries=function(){var w=[];return this.forEach(function(N,L){w.push([L,N])}),g(w)},c.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function v(w){if(!w._noBody){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}}function A(w){return new Promise(function(N,L){w.onload=function(){N(w.result)},w.onerror=function(){L(w.error)}})}function S(w){var N=new FileReader,L=A(N);return N.readAsArrayBuffer(w),L}function I(w){var N=new FileReader,L=A(N),C=/charset=([A-Za-z0-9_-]+)/.exec(w.type),T=C?C[1]:"utf-8";return N.readAsText(w,T),L}function B(w){for(var N=new Uint8Array(w),L=new Array(N.length),C=0;C<N.length;C++)L[C]=String.fromCharCode(N[C]);return L.join("")}function D(w){if(w.slice)return w.slice(0);var N=new Uint8Array(w.byteLength);return N.set(new Uint8Array(w)),N.buffer}function V(){return this.bodyUsed=!1,this._initBody=function(w){this.bodyUsed=this.bodyUsed,this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:c.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:c.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():c.arrayBuffer&&c.blob&&l(w)?(this._bodyArrayBuffer=D(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||f(w))?this._bodyArrayBuffer=D(w):this._bodyText=w=Object.prototype.toString.call(w):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var w=v(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var w=v(this);return w||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(S);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var w=v(this);if(w)return w;if(this._bodyBlob)return I(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(B(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(ie)}),this.json=function(){return this.text().then(JSON.parse)},this}var O=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function U(w){var N=w.toUpperCase();return O.indexOf(N)>-1?N:w}function Q(w,N){if(!(this instanceof Q))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N=N||{};var L=N.body;if(w instanceof Q){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,N.headers||(this.headers=new m(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!L&&w._bodyInit!=null&&(L=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new m(N.headers)),this.method=U(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal||function(){if("AbortController"in o){var E=new AbortController;return E.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),(this.method==="GET"||this.method==="HEAD")&&(N.cache==="no-store"||N.cache==="no-cache")){var C=/([?&])_=[^&]*/;if(C.test(this.url))this.url=this.url.replace(C,"$1_="+new Date().getTime());else{var T=/\?/;this.url+=(T.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}Q.prototype.clone=function(){return new Q(this,{body:this._bodyInit})};function ie(w){var N=new FormData;return w.trim().split("&").forEach(function(L){if(L){var C=L.split("="),T=C.shift().replace(/\+/g," "),E=C.join("=").replace(/\+/g," ");N.append(decodeURIComponent(T),decodeURIComponent(E))}}),N}function G(w){var N=new m,L=w.replace(/\r?\n[\t ]+/g," ");return L.split("\r").map(function(C){return C.indexOf(`
`)===0?C.substr(1,C.length):C}).forEach(function(C){var T=C.split(":"),E=T.shift().trim();if(E){var P=T.join(":").trim();try{N.append(E,P)}catch(_){console.warn("Response "+_.message)}}}),N}V.call(Q.prototype);function R(w,N){if(!(this instanceof R))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new m(N.headers),this.url=N.url||"",this._initBody(w)}V.call(R.prototype),R.prototype.clone=function(){return new R(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},R.error=function(){var w=new R(null,{status:200,statusText:""});return w.ok=!1,w.status=0,w.type="error",w};var k=[301,302,303,307,308];R.redirect=function(w,N){if(k.indexOf(N)===-1)throw new RangeError("Invalid status code");return new R(null,{status:N,headers:{location:w}})},a.DOMException=o.DOMException;try{new a.DOMException}catch{a.DOMException=function(N,L){this.message=N,this.name=L;var C=Error(N);this.stack=C.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function b(w,N){return new Promise(function(L,C){var T=new Q(w,N);if(T.signal&&T.signal.aborted)return C(new a.DOMException("Aborted","AbortError"));var E=new XMLHttpRequest;function P(){E.abort()}E.onload=function(){var ne={statusText:E.statusText,headers:G(E.getAllResponseHeaders()||"")};T.url.indexOf("file://")===0&&(E.status<200||E.status>599)?ne.status=200:ne.status=E.status,ne.url="responseURL"in E?E.responseURL:ne.headers.get("X-Request-URL");var $="response"in E?E.response:E.responseText;setTimeout(function(){L(new R($,ne))},0)},E.onerror=function(){setTimeout(function(){C(new TypeError("Network request failed"))},0)},E.ontimeout=function(){setTimeout(function(){C(new TypeError("Network request timed out"))},0)},E.onabort=function(){setTimeout(function(){C(new a.DOMException("Aborted","AbortError"))},0)};function _(ne){try{return ne===""&&o.location.href?o.location.href:ne}catch{return ne}}if(E.open(T.method,_(T.url),!0),T.credentials==="include"?E.withCredentials=!0:T.credentials==="omit"&&(E.withCredentials=!1),"responseType"in E&&(c.blob?E.responseType="blob":c.arrayBuffer&&(E.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof m||o.Headers&&N.headers instanceof o.Headers)){var H=[];Object.getOwnPropertyNames(N.headers).forEach(function(ne){H.push(d(ne)),E.setRequestHeader(ne,p(N.headers[ne]))}),T.headers.forEach(function(ne,$){H.indexOf($)===-1&&E.setRequestHeader($,ne)})}else T.headers.forEach(function(ne,$){E.setRequestHeader($,ne)});T.signal&&(T.signal.addEventListener("abort",P),E.onreadystatechange=function(){E.readyState===4&&T.signal.removeEventListener("abort",P)}),E.send(typeof T._bodyInit>"u"?null:T._bodyInit)})}return b.polyfill=!0,o.fetch||(o.fetch=b,o.Headers=m,o.Request=Q,o.Response=R),a.Headers=m,a.Request=Q,a.Response=R,a.fetch=b,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(vY,vY.exports);var LCt=vY.exports;const c0e=em(LCt);var UCt=Object.defineProperty,FCt=Object.defineProperties,VCt=Object.getOwnPropertyDescriptors,l0e=Object.getOwnPropertySymbols,$Ct=Object.prototype.hasOwnProperty,jCt=Object.prototype.propertyIsEnumerable,u0e=(t,e,n)=>e in t?UCt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,f0e=(t,e)=>{for(var n in e||(e={}))$Ct.call(e,n)&&u0e(t,n,e[n]);if(l0e)for(var n of l0e(e))jCt.call(e,n)&&u0e(t,n,e[n]);return t},d0e=(t,e)=>FCt(t,VCt(e));const HCt={Accept:"application/json","Content-Type":"application/json"},qCt="POST",h0e={headers:HCt,method:qCt},p0e=10;let mh=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Bu.EventEmitter,this.isAvailable=!1,this.registering=!1,!Bhe(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Xg(e),r=await(await c0e(this.url,d0e(f0e({},h0e),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!Bhe(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Xg({id:1,jsonrpc:"2.0",method:"test",params:[]});await c0e(e,d0e(f0e({},h0e),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?B2(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=MF(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return STe(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>p0e&&this.events.setMaxListeners(p0e)}};const g0e="error",KCt="wss://relay.walletconnect.org",GCt="wc",WCt="universal_provider",m0e=`${GCt}@2:${WCt}:`,JTe="https://rpc.walletconnect.org/v1/",MS="generic",zCt=`${JTe}bundler`,Qf={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var JCt=Object.defineProperty,YCt=Object.defineProperties,QCt=Object.getOwnPropertyDescriptors,y0e=Object.getOwnPropertySymbols,ZCt=Object.prototype.hasOwnProperty,XCt=Object.prototype.propertyIsEnumerable,w0e=(t,e,n)=>e in t?JCt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uR=(t,e)=>{for(var n in e||(e={}))ZCt.call(e,n)&&w0e(t,n,e[n]);if(y0e)for(var n of y0e(e))XCt.call(e,n)&&w0e(t,n,e[n]);return t},eTt=(t,e)=>YCt(t,QCt(e));function Iu(t,e,n){var r;const s=n6(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${JTe}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function sE(t){return t.includes(":")?t.split(":")[1]:t}function YTe(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function tTt(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function Yq(t={},e={}){const n=b0e(t),r=b0e(e);return DCt.merge(n,r)}function b0e(t){var e,n,r,s;const i={};if(!Qk(t))return i;for(const[a,o]of Object.entries(t)){const c=mne(a)?[a]:o.chains,l=o.methods||[],u=o.events||[],f=o.rpcMap||{},d=BT(a);i[d]=eTt(uR(uR({},i[d]),o),{chains:Q_(c,(e=i[d])==null?void 0:e.chains),methods:Q_(l,(n=i[d])==null?void 0:n.methods),events:Q_(u,(r=i[d])==null?void 0:r.events),rpcMap:uR(uR({},f),(s=i[d])==null?void 0:s.rpcMap)})}return i}function nTt(t){return t.includes(":")?t.split(":")[2]:t}function v0e(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],a=r.accounts||[],o=mne(n)?[n]:r.chains?r.chains:YTe(r.accounts);e[n]={chains:o,methods:s,events:i,accounts:a}}return e}function Qq(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const QTe={},Zr=t=>QTe[t],Zq=(t,e)=>{QTe[t]=e};class rTt{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Zr("events"),this.client=Zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Qf.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=sE(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Iu(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yf(new mh(r,Zr("disableProviderPing")))}}var sTt=Object.defineProperty,iTt=Object.defineProperties,aTt=Object.getOwnPropertyDescriptors,x0e=Object.getOwnPropertySymbols,oTt=Object.prototype.hasOwnProperty,cTt=Object.prototype.propertyIsEnumerable,E0e=(t,e,n)=>e in t?sTt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,A0e=(t,e)=>{for(var n in e||(e={}))oTt.call(e,n)&&E0e(t,n,e[n]);if(x0e)for(var n of x0e(e))cTt.call(e,n)&&E0e(t,n,e[n]);return t},S0e=(t,e)=>iTt(t,aTt(e));class lTt{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Zr("events"),this.client=Zr("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Qf.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Iu(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yf(new mh(r,Zr("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(sE(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s;const i=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0];if(!i)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const a=this.client.session.get(e.topic),o=((s=a==null?void 0:a.sessionProperties)==null?void 0:s.capabilities)||{};if(o!=null&&o[i])return o==null?void 0:o[i];const c=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:S0e(A0e({},a.sessionProperties||{}),{capabilities:S0e(A0e({},o||{}),{[i]:c})})})}catch(l){console.warn("Failed to update session with capabilities",l)}return c}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const o=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(o,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,o)}}const a=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,e)}catch(o){console.warn("Failed to fetch call status from custom bundler",o,a)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Mw("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${zCt}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}class uTt{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Zr("events"),this.client=Zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Qf.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=sE(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Iu(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yf(new mh(r,Zr("disableProviderPing")))}}class fTt{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Zr("events"),this.client=Zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Qf.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=sE(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Iu(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yf(new mh(r,Zr("disableProviderPing")))}}class dTt{constructor(e){this.name="algorand",this.namespace=e.namespace,this.events=Zr("events"),this.client=Zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Iu(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Qf.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Iu(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Yf(new mh(r,Zr("disableProviderPing")))}}class hTt{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Zr("events"),this.client=Zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Qf.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=sE(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yf(new mh(r,Zr("disableProviderPing")))}}class pTt{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Zr("events"),this.client=Zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Qf.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=sE(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Iu(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yf(new mh(r,Zr("disableProviderPing")))}}class gTt{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Zr("events"),this.client=Zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Qf.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=sE(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Iu(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yf(new mh(r,Zr("disableProviderPing")))}}class mTt{constructor(e){this.name="near",this.namespace=e.namespace,this.events=Zr("events"),this.client=Zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Iu(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Qf.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Iu(e,this.namespace);return typeof r>"u"?void 0:new Yf(new mh(r,Zr("disableProviderPing")))}}class yTt{constructor(e){this.name="tezos",this.namespace=e.namespace,this.events=Zr("events"),this.client=Zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Iu(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Qf.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Iu(e,this.namespace);return typeof r>"u"?void 0:new Yf(new mh(r))}}class wTt{constructor(e){this.name=MS,this.namespace=e.namespace,this.events=Zr("events"),this.client=Zr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Qf.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=n6(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Iu(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yf(new mh(r,Zr("disableProviderPing")))}}var bTt=Object.defineProperty,vTt=Object.defineProperties,xTt=Object.getOwnPropertyDescriptors,I0e=Object.getOwnPropertySymbols,ETt=Object.prototype.hasOwnProperty,ATt=Object.prototype.propertyIsEnumerable,C0e=(t,e,n)=>e in t?bTt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fR=(t,e)=>{for(var n in e||(e={}))ETt.call(e,n)&&C0e(t,n,e[n]);if(I0e)for(var n of I0e(e))ATt.call(e,n)&&C0e(t,n,e[n]);return t},Xq=(t,e)=>vTt(t,xTt(e));let STt=class ZTe{constructor(e){this.events=new Gte,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:x9(_F({level:(e==null?void 0:e.logger)||g0e})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new ZTe(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:fR({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(a=>n(null,BF(i,a))).catch(a=>n(a,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:gs("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const a=v0e(this.session.namespaces);this.namespaces=Yq(this.namespaces,a),this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let n=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(n>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:r,approval:s}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});r&&(this.uri=r,this.events.emit("display_uri",r)),await s().then(i=>{this.session=i;const a=v0e(i.namespaces);this.namespaces=Yq(this.namespaces,a),this.persist("namespaces",this.namespaces)}).catch(i=>{if(i.message!==zTe)throw i;n++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===MS?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(q0(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await FF.init({core:this.providerOpts.core,logger:this.providerOpts.logger||g0e,relayUrl:this.providerOpts.relayUrl||KCt,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>BT(n)))];Zq("client",this.client),Zq("events",this.events),Zq("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=tTt(n,this.session),s=YTe(r),i=Yq(this.namespaces,this.optionalNamespaces),a=Xq(fR({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new lTt({namespace:a});break;case"algorand":this.rpcProviders[n]=new dTt({namespace:a});break;case"solana":this.rpcProviders[n]=new uTt({namespace:a});break;case"cosmos":this.rpcProviders[n]=new fTt({namespace:a});break;case"polkadot":this.rpcProviders[n]=new rTt({namespace:a});break;case"cip34":this.rpcProviders[n]=new hTt({namespace:a});break;case"elrond":this.rpcProviders[n]=new pTt({namespace:a});break;case"multiversx":this.rpcProviders[n]=new gTt({namespace:a});break;case"near":this.rpcProviders[n]=new mTt({namespace:a});break;case"tezos":this.rpcProviders[n]=new yTt({namespace:a});break;default:this.rpcProviders[MS]?this.rpcProviders[MS].updateNamespace(a):this.rpcProviders[MS]=new wTt({namespace:a})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:n}=e,{event:r}=n;if(r.name==="accountsChanged"){const s=r.data;s&&q0(s)&&this.events.emit("accountsChanged",s.map(nTt))}else if(r.name==="chainChanged"){const s=n.chainId,i=n.event.data,a=BT(s),o=Qq(s)!==Qq(i)?`${a}:${Qq(i)}`:s;this.onChainChanged(o)}else this.events.emit(r.name,r.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r;const{namespaces:s}=n,i=(r=this.client)==null?void 0:r.session.get(e);this.session=Xq(fR({},i),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Xq(fR({},gs("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Qf.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[MS]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n,optionalNamespaces:r,sessionProperties:s}=e;n&&Object.keys(n).length&&(this.namespaces=n),r&&Object.keys(r).length&&(this.optionalNamespaces=r),this.sessionProperties=s,this.persist("namespaces",n),this.persist("optionalNamespaces",r)}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(a=>BT(a)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=BT(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);s&&(n||this.getProvider(r).setDefaultChain(s),this.namespaces[r]?this.namespaces[r].defaultChain=s:this.namespaces[`${r}:${s}`]?this.namespaces[`${r}:${s}`].defaultChain=s:this.namespaces[`${r}:${s}`]={defaultChain:s},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",s))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,n){this.client.core.storage.setItem(`${m0e}/${e}`,n)}async getFromStore(e){return await this.client.core.storage.getItem(`${m0e}/${e}`)}};const ITt=STt,CTt="wc",TTt="ethereum_provider",NTt=`${CTt}@2:${TTt}:`,kTt="https://rpc.walletconnect.org/v1/",xY=["eth_sendTransaction","personal_sign"],PTt=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],EY=["chainChanged","accountsChanged"],OTt=["chainChanged","accountsChanged","message","disconnect","connect"];var RTt=Object.defineProperty,_Tt=Object.defineProperties,BTt=Object.getOwnPropertyDescriptors,T0e=Object.getOwnPropertySymbols,MTt=Object.prototype.hasOwnProperty,DTt=Object.prototype.propertyIsEnumerable,N0e=(t,e,n)=>e in t?RTt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DS=(t,e)=>{for(var n in e||(e={}))MTt.call(e,n)&&N0e(t,n,e[n]);if(T0e)for(var n of T0e(e))DTt.call(e,n)&&N0e(t,n,e[n]);return t},eK=(t,e)=>_Tt(t,BTt(e));function SD(t){return Number(t[0].split(":")[1])}function dR(t){return`0x${t.toString(16)}`}function LTt(t){const{chains:e,optionalChains:n,methods:r,optionalMethods:s,events:i,optionalEvents:a,rpcMap:o}=t;if(!q0(e))throw new Error("Invalid chains");const c={chains:e,methods:r||xY,events:i||EY,rpcMap:DS({},e.length?{[SD(e)]:o[SD(e)]}:{})},l=i==null?void 0:i.filter(p=>!EY.includes(p)),u=r==null?void 0:r.filter(p=>!xY.includes(p));if(!n&&!a&&!s&&!(l!=null&&l.length)&&!(u!=null&&u.length))return{required:e.length?c:void 0};const f=(l==null?void 0:l.length)&&(u==null?void 0:u.length)||!n,d={chains:[...new Set(f?c.chains.concat(n||[]):n)],methods:[...new Set(c.methods.concat(s!=null&&s.length?s:PTt))],events:[...new Set(c.events.concat(a!=null&&a.length?a:OTt))],rpcMap:o};return{required:e.length?c:void 0,optional:n.length?d:void 0}}let UTt=class XTe{constructor(){this.events=new Bu.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=NTt,this.on=(e,n)=>(this.events.on(e,n),this),this.once=(e,n)=>(this.events.once(e,n),this),this.removeListener=(e,n)=>(this.events.removeListener(e,n),this),this.off=(e,n)=>(this.events.off(e,n),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const n=new XTe;return await n.initialize(e),n}async request(e,n){return await this.signer.request(e,this.formatChainId(this.chainId),n)}sendAsync(e,n,r){this.signer.sendAsync(e,n,this.formatChainId(this.chainId),r)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:n,optional:r}=LTt(this.rpc);try{const s=await new Promise(async(a,o)=>{var c;this.rpc.showQrModal&&((c=this.modal)==null||c.subscribeModal(l=>{!l.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),o(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(eK(DS({namespaces:DS({},n&&{[this.namespace]:n})},r&&{optionalNamespaces:{[this.namespace]:r}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(l=>{a(l)}).catch(l=>{o(new Error(l.message))})});if(!s)return;const i=Qde(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:i),this.setAccounts(i),this.events.emit("connect",{chainId:dR(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{this.modal&&this.modal.closeModal()}}async authenticate(e,n){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e==null?void 0:e.chains});try{const r=await new Promise(async(i,a)=>{var o;this.rpc.showQrModal&&((o=this.modal)==null||o.subscribeModal(c=>{!c.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),a(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(eK(DS({},e),{chains:this.rpc.chains}),n).then(c=>{i(c)}).catch(c=>{a(new Error(c.message))})}),s=r.session;if(s){const i=Qde(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:i),this.setAccounts(i),this.events.emit("connect",{chainId:dR(this.chainId)})}return r}catch(r){throw this.signer.logger.error(r),r}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:n}=e,{event:r}=n;r.name==="accountsChanged"?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):r.name==="chainChanged"?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const n=parseInt(e);this.chainId=n,this.events.emit("chainChanged",dR(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",eK(DS({},gs("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var n,r;this.rpc.showQrModal&&((n=this.modal)==null||n.closeModal(),(r=this.modal)==null||r.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const n=e.filter(r=>this.isCompatibleChainId(r)).map(r=>this.parseChainId(r));n.length&&(this.chainId=n[0],this.events.emit("chainChanged",dR(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const n=this.parseChainId(e);this.chainId=n,this.switchEthereumChain(n)}}parseAccountId(e){const[n,r,s]=e.split(":");return{chainId:`${n}:${r}`,address:s}}setAccounts(e){this.accounts=e.filter(n=>this.parseChainId(this.parseAccountId(n).chainId)===this.chainId).map(n=>this.parseAccountId(n).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var n,r;const s=(n=e==null?void 0:e.chains)!=null?n:[],i=(r=e==null?void 0:e.optionalChains)!=null?r:[],a=s.concat(i);if(!a.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const o=s.length?(e==null?void 0:e.methods)||xY:[],c=s.length?(e==null?void 0:e.events)||EY:[],l=(e==null?void 0:e.optionalMethods)||[],u=(e==null?void 0:e.optionalEvents)||[],f=(e==null?void 0:e.rpcMap)||this.buildRpcMap(a,e.projectId),d=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:s==null?void 0:s.map(p=>this.formatChainId(p)),optionalChains:i.map(p=>this.formatChainId(p)),methods:o,events:c,optionalMethods:l,optionalEvents:u,rpcMap:f,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:d,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,n){const r={};return e.forEach(s=>{r[s]=this.getRpcUrl(s,n)}),r}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?SD(this.rpc.chains):SD(this.rpc.optionalChains),this.signer=await ITt.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let n;try{const{WalletConnectModal:r}=await cit(()=>import("./index-8YQDkqwX.js").then(s=>s.i),[]);n=r}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(n)try{this.modal=new n(DS({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(r){throw this.signer.logger.error(r),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:n,optionalChains:r,rpcMap:s}=e;n&&q0(n)&&(this.rpc.chains=n.map(i=>this.formatChainId(i)),n.forEach(i=>{this.rpc.rpcMap[i]=(s==null?void 0:s[i])||this.getRpcUrl(i)})),r&&q0(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r==null?void 0:r.map(i=>this.formatChainId(i)),r.forEach(i=>{this.rpc.rpcMap[i]=(s==null?void 0:s[i])||this.getRpcUrl(i)}))}getRpcUrl(e,n){var r;return((r=this.rpc.rpcMap)==null?void 0:r[e])||`${kTt}?chainId=eip155:${e}&projectId=${n||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),n=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:n==null?void 0:n.accounts),this.setAccounts(n==null?void 0:n.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(n=>this.signer.logger.warn(n))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(n=>this.parseAccount(n))}};const eNe=t=>({info:{walletId:"",uuid:"",name:"WalletConnect",icon:"https://avatars.githubusercontent.com/u/37784886"},provider:t});async function tNe(t){return await UTt.init({projectId:SIe,showQrModal:t,optionalChains:[1],metadata:{name:"Sequence Recovery Wallet External Wallet",description:"",url:"https://recovery.sequence.app",icons:[]}})}function FTt(){const[t,e]=F.useState(null),r=Vt(Jn).getLastConnectedExternalProviderInfo();return F.useEffect(()=>{async function s(){const i=await tNe(!1);await i.enable(),e(i)}return(r==null?void 0:r.name)==="WalletConnect"&&s(),()=>{t&&t.disconnect()}},[]),t}function nNe(){const t=Vt(Jn),e=FIe(),n=FTt();F.useEffect(()=>{if(n&&n.connected&&!t.selectedExternalProvider.get()){const r=eNe(n),s=t.availableExternalProviders.get();s?t.availableExternalProviders.set([r,...s]):t.availableExternalProviders.set([r])}},[n,t]),F.useEffect(()=>{e.length>0&&t.availableExternalProviders.set(e)},[e,t])}class V4{constructor(e){q(this,"authStore",Vt(us));q(this,"accountAddress",this.authStore.accountAddress.get());q(this,"isReady",rr(!1));q(this,"signClient");q(this,"currentRequestInfo");q(this,"allSessions",rr([]));q(this,"sessions",this.allSessions.readOnly());q(this,"createSignClient",async()=>{this.signClient=await FF.init({projectId:SIe,metadata:{name:"Sequence Recovery Wallet",description:"Sequence Recovery Wallet - Recover Your Wallet",url:"https://recovery.sequence.app",icons:["https://sequence.app/apple-touch-icon.png"]}}),this.signClient.on("session_proposal",this.onSessionProposal),this.signClient.on("session_request",this.onSessionRequest),this.signClient.on("session_ping",this.onSessionPing),this.signClient.on("session_event",this.onSessionEvent),this.signClient.on("session_update",this.onSessionUpdate),this.signClient.on("session_delete",this.onSessionDelete);const e=this.getSignClientSessions();e?this.allSessions.set(e):this.allSessions.set([]),this.isReady.set(!0)});q(this,"getSignClientSessions",()=>this.signClient.session.getAll().filter(n=>n.self.metadata.name!=="Sequence Recovery Wallet External Wallet"));q(this,"pair",async e=>{if(!this.signClient)throw new Error("WalletConnect signClient not initialized.");await this.signClient.core.pairing.pair({uri:e}),this.allSessions.set(this.getSignClientSessions())});q(this,"rejectRequest",()=>{var e;this.currentRequestInfo&&((e=this.signClient)==null||e.respond({topic:this.currentRequestInfo.topic,response:{id:this.currentRequestInfo.id,jsonrpc:"2.0",error:{message:"User rejected.",code:4001}}}))});q(this,"disconnectSession",async e=>{var r,s;const n=(r=this.signClient)==null?void 0:r.session.get(e);n&&(await((s=this.signClient)==null?void 0:s.engine.client.disconnect({topic:n.topic,reason:{message:"User disconnected.",code:6e3}})),this.allSessions.set(this.getSignClientSessions()??[]))});q(this,"disconnectAllSessions",async()=>{var n;(((n=this.signClient)==null?void 0:n.session.getAll())??[]).forEach(async r=>{var s;await((s=this.signClient)==null?void 0:s.engine.client.disconnect({topic:r.topic,reason:{message:"User disconnected.",code:6e3}}))}),this.allSessions.set([])});q(this,"onSessionProposal",async e=>{var l,u,f,d,p;console.log("onSessionProposal",e);const n=e.params.requiredNamespaces,r=e.params.optionalNamespaces,s=Object.keys(n).length===0?[]:n.eip155.chains??[],i=Object.keys(r).length===0?[]:r.eip155.chains??[],a=((l=s[0])==null?void 0:l.split(":").pop())??((u=i[0])==null?void 0:u.split(":").pop());if(!a)throw new Error("No chainId found in WalletConnect session proposal namespaces.");const o={app:e.params.proposer.metadata.name,origin:e.params.proposer.metadata.url,networkId:a,keepWalletOpened:!0},c=await this.store.get(Jn).walletRequestHandler.promptConnect(o);if(c&&c.connected){const m=this.store.get(fs).networks.get(),v=s.map(O=>Number(O.split(":").pop())),A=i.map(O=>Number(O.split(":").pop())),B={eip155:{accounts:m.map(O=>O.chainId).filter(O=>[...v,...A].includes(O)).map(O=>"eip155:"+O+":"+this.accountAddress),methods:["eth_sendTransaction","eth_sign","personal_sign","eth_signTypedData","eth_signTypedData_v4","wallet_switchEthereumChain"],events:["chainChanged","accountsChanged","connect","disconnect"]}},D=await((f=this.signClient)==null?void 0:f.approve({id:e.id,namespaces:B})),V=await(D==null?void 0:D.acknowledged());console.log("session",V),this.allSessions.set(this.getSignClientSessions()??[]),(d=this.signClient)==null||d.core.pairing.getPairings().filter(O=>e.params.pairingTopic!==O.topic).forEach(async O=>{var U,Q;e.params.proposer.metadata.url===((U=O.peerMetadata)==null?void 0:U.url)&&await((Q=this.signClient)==null?void 0:Q.core.pairing.disconnect({topic:O.topic}))})}else(p=this.signClient)==null||p.reject({id:e.id,reason:{message:"User rejected.",code:5e3}})});q(this,"onSessionRequest",async e=>{var a,o,c;console.log("onSessionRequest",e);const n=e.params.chainId.split(":").pop(),r={jsonrpc:"2.0",id:e.id,method:e.params.request.method,params:e.params.request.params,chainId:Number(n)};r.method==="eth_sendTransaction"&&Array.isArray(r.params)&&r.params.forEach(l=>{delete l.nonce});const s=(a=this.signClient)==null?void 0:a.session.get(e.topic),i={app:(s==null?void 0:s.peer.metadata.name)??"",origin:s==null?void 0:s.peer.metadata.url,networkId:n};this.store.get(Jn).walletRequestHandler.setConnectOptions(i),this.currentRequestInfo={topic:e.topic,id:e.id};try{const l=await this.store.get(Jn).walletRequestHandler.request(r);(o=this.signClient)==null||o.respond({topic:e.topic,response:{id:e.id,jsonrpc:"2.0",result:l}})}catch(l){(c=this.signClient)==null||c.respond({topic:e.topic,response:{id:e.id,jsonrpc:"2.0",error:{message:l.message,code:l.code??4001}}})}this.currentRequestInfo=void 0});q(this,"onSessionPing",async e=>{console.log("onSessionPing",e)});q(this,"onSessionEvent",async e=>{console.log("onSessionEvent",e)});q(this,"onSessionUpdate",async e=>{console.log("onSessionUpdate",e)});q(this,"onSessionDelete",async e=>{console.log("onSessionDelete",e),this.allSessions.set(this.getSignClientSessions()??[])});this.store=e,this.createSignClient()}}const rB=async(t,e,n=15)=>{let r,s=0;do{if(s>5&&await new Promise(i=>setTimeout(i,100*s)),r=await t.getTransactionReceipt(e),s===n){console.warn(`Could not get receipt for transaction ${e} after ${s} tries`);return}if(r)return r;s++}while(!r&&s<=n)};function VTt(){const t=Vt(us),e=Vt(Jn),n=Vt(fs),r=Vt(V4),s=Rb(),i=()=>{e.resetSignObservables(),r.rejectRequest(),e.toSignPermission.set("cancelled")},a=async(l,u)=>{const f=n.providerForChainId(u);await rB(f,l)&&(e.isSendingSignedTokenTransaction.set(void 0),s({variant:"success",title:"Sign transaction confirmed",description:"You can view the transaction details on your connected external wallet"}))};return{handleSignTxn:async l=>{const u=async(d,p)=>{var g;try{const m=(g=e.selectedExternalProvider.get())==null?void 0:g.provider,v=await e.getExternalProviderAddress(m);if(!v)throw new Error("No provider address found");return await e.sendTransaction(t.account,m,v,d,p)}catch(m){throw e.isSendingSignedTokenTransaction.set(void 0),m}};let f;if(l)try{e.isSendingSignedTokenTransaction.set(l),f=await u(l.txn,l.chainId),a(f.hash,l.chainId),e.toSignResult.set(f),e.toSignPermission.set("approved"),e.isSigningTxn.set(!1)}catch(d){throw s({variant:"error",title:"Transaction failed",description:"Please try again."}),e.isSendingSignedTokenTransaction.set(void 0),i(),d}},handleSignMsg:async l=>{const u=async(d,p)=>{try{let g;const m=t.account;if(d.message)g=await m.signMessage(d.message,d.chainId,d.eip6492?"eip6492":"throw");else if(d.typedData){const v=d.typedData;g=await m.signTypedData(v.domain,v.types,v.message,d.chainId,d.eip6492?"eip6492":"throw")}if(!g)throw new Error("Account sign method failed");return{hash:g}}catch(g){throw g}};let f;if(l)try{f=await u(l.message),e.toSignResult.set(f),e.toSignPermission.set("approved")}catch(d){throw s({variant:"error",title:"Transaction failed",description:"Please try again."}),e.isSendingSignedTokenTransaction.set(void 0),i(),d}},cancelRequest:i}}const $Tt=(t,e,n,r)=>{if(t.type==="COIN")switch(t.contractType){case Ms.ContractType.NATIVE:return{to:n,value:r,data:"0x"};case Ms.ContractType.ERC20:return{to:t.contractAddress,value:0n,data:Fj({abi:GAe,functionName:"transfer",args:[n,r]})}}else if(t.type==="COLLECTIBLE"&&t.tokenId)switch(t.contractType){case Ms.ContractType.ERC721:return{to:t.contractAddress,value:0n,data:Fj({abi:zAe,functionName:"transferFrom",args:[e,n,BigInt(t.tokenId)]})};case Ms.ContractType.ERC1155:return{to:t.contractAddress,value:0n,data:Fj({abi:WAe,functionName:"safeTransferFrom",args:[e,n,BigInt(t.tokenId),r,"0x"]})}}};function jTt(t){const e=hU(),n=F.useRef(0),{values:r}=jte(),s=F.useRef(!1),i=r.provider,a=F.useRef([]);if(F.useEffect(()=>{a.current=e.values},[e]),!t||!i||!a.current)return;const o=2e3;async function c(l){var f;const u=(f=a.current)==null?void 0:f.find(d=>d.id===l);if(!l||!i||!u){setTimeout(c.bind(null,l),o);return}if(n.current>20&&e.status(l)!=="timeout"){e.update(l,{status:"timeout"});return}if(!["success","cancelled","error","timeout"].includes(u.status)){n.current=n.current+1;try{if(!u.hash){setTimeout(c.bind(null,l),o);return}const d=await i.provider.request({method:"eth_getTransactionReceipt",params:[u.hash]});if(!d){setTimeout(c.bind(null,l),o);return}const p=d.status==="0x1"?"success":d.status==="0x0"?"failed":"cancelled";e.update(l,{hash:u.hash,status:p,code:d.status})}catch{e.update(l,{status:"cancelled"})}}}s.current||a.current&&i&&t&&(s.current=!0,c(t))}function HTt(){const{handle:t}=jte(),e=Vt(Jn),n=Vt(us),r=vn(n.accountAddress),[s,i]=F.useState();jTt(s);const a=vn(e.selectedExternalWalletAddress);async function o(c,l,u){if(!a)throw new Error("No external wallet address selected");if(!r)throw new Error("No account address found");const f=c.map(d=>{const p=BigInt(u||d.balance);return{...$Tt(d,r,a,p),gasLimit:0n,delegateCall:!1,onlyFallback:!1,behaviorOnError:"revert"}});if(f.length){const d=await t.queuePayload(f,l);return i(d),d}}return{createCalls:o,txnId:s}}const MT={COIN:"COIN",COLLECTIBLE:"COLLECTIBLE"},Wm={VERY_LARGE:"very-large",FRACTION:"fraction",VERY_TINY:"very-tiny",MIXED:"mixed"},qTt=(t,e)=>{if(isNaN(Number(t)))return console.error(`display format error ${t} is not a number`),"NaN";const n=Number(t);if(n===0)return"0";let r;n>1e8?e!=null&&e.disableCompactNotation?r=Wm.MIXED:r=Wm.VERY_LARGE:n<1e-10||n<1?r=Wm.FRACTION:r=Wm.MIXED;let s,i;const a=(e==null?void 0:e.significantDigits)??4;if(e!=null&&e.currency)return Intl.NumberFormat("en-US",{style:"currency",currency:e.currency}).format(n);switch(r){case Wm.VERY_LARGE:s="compact",i={maximumSignificantDigits:a,maximumFractionDigits:e==null?void 0:e.maximumFractionDigits};break;case Wm.VERY_TINY:s="scientific",i={maximumSignificantDigits:a,maximumFractionDigits:e==null?void 0:e.maximumFractionDigits};break;case Wm.FRACTION:s="standard",i={maximumSignificantDigits:a,maximumFractionDigits:e==null?void 0:e.maximumFractionDigits};break;default:s="standard",i={maximumSignificantDigits:a,maximumFractionDigits:e==null?void 0:e.maximumFractionDigits}}return Intl.NumberFormat("en-US",{notation:s,...i}).format(n)},KTt=(t,e=4)=>{const[n,r=""]=t.split("."),s=r.slice(0,e);return s.length===0||s.split("").every(i=>i==="0")?n:`${n}.${s}`};function ID(t,e,n=5){if(!t||typeof t!="string")return"0";try{const r=BigInt(t);return e?KTt(qTt(DAe(r,e),{disableScientificNotation:!0,maximumFractionDigits:n}),n):t}catch(r){return console.error("Error formatting balance:",r),"0"}}const k0e="https://imgproxy.sequence.xyz/",GTt="https://assets.sequence.info/",WTt="https://metadata.sequence.app/",zTt="https://dev-metadata.sequence.app/",rNe=t=>{if(t=JTt(t),!!t)return t.startsWith(WTt)||t.startsWith(zTt)||t.startsWith(k0e)||t.startsWith(GTt)||t.startsWith("http://localhost")?t:/^https?:\/\//.test(t)?`${k0e}${t}`:t},JTt=t=>{if(t)return t.startsWith("ipfs://")?t.replace("ipfs://","https://ipfs.io/ipfs/"):t},g3={NATIVE:"NATIVE",ERC20:"ERC20",ERC1155:"ERC1155",ERC721:"ERC721"};function YTt(t){var f,d,p,g,m,v,A,S,I,B,D,V,O,U,Q,ie,G,R,k;const e=t.contractType,n=t.contractAddress,r=t.accountAddress,{chainId:s}=t,i=y4(s),a=(i==null?void 0:i.type)===dn.TESTNET,o=t.balance==="0",c=e==="UNKNOWN"||!((f=t.contractInfo)!=null&&f.symbol)&&!((d=t.contractInfo)!=null&&d.name),l=((p=t.contractInfo)==null?void 0:p.extensions.verified)===!0,u={...t,contractAddress:n,accountAddress:r,uuid:QTt(t),path:ZTt(t),contractType:e,network:i,testnet:a,isEmpty:o,isUnknown:c,isVerified:l,isGroup:!1,isSwappable:!1,fiat:!1,keys:[]};switch(e){case g3.NATIVE:{const b=(i==null?void 0:i.nativeCurrency.decimals)??18;return{...u,type:MT.COIN,name:(i==null?void 0:i.nativeCurrency.name)||"Native Token",symbol:(i==null?void 0:i.nativeCurrency.symbol)||"???",decimals:b,holdings:DT(t.balance,b),logoURI:i==null?void 0:i.logoUrl,fiat:!1,explorerUrl:LT(s,n)}}case g3.ERC20:{const b=((g=t.contractInfo)==null?void 0:g.decimals)??18;return{...u,type:MT.COIN,name:((m=t.contractInfo)==null?void 0:m.name)||"Unknown",symbol:((v=t.contractInfo)==null?void 0:v.symbol)||"???",decimals:b,holdings:DT(t.balance,b),logoURI:(A=t.contractInfo)==null?void 0:A.logoURI,fiat:!1,explorerUrl:LT(s,n)}}case g3.ERC1155:case g3.ERC721:{const b=((S=t.tokenMetadata)==null?void 0:S.decimals)??((I=t.contractInfo)==null?void 0:I.decimals)??0,w=rNe((B=t.tokenMetadata)==null?void 0:B.image)||((D=t.tokenMetadata)==null?void 0:D.image_data);return{...u,type:MT.COLLECTIBLE,name:((V=t.tokenMetadata)==null?void 0:V.name)||"Unknown",description:(O=t.tokenMetadata)==null?void 0:O.description,tokenId:t.tokenID,tokenMetadata:t.tokenMetadata,symbol:((U=t.contractInfo)==null?void 0:U.symbol)||"???",image:w,asset:sNe(t.tokenMetadata,w),decimals:b,holdings:DT(t.balance,b),explorerUrl:LT(s,n,t.tokenID)}}default:{const b=((Q=t.tokenMetadata)==null?void 0:Q.decimals)??((ie=t.contractInfo)==null?void 0:ie.decimals)??(i==null?void 0:i.nativeCurrency.decimals)??18;return{...u,type:MT.COIN,name:((G=t.contractInfo)==null?void 0:G.name)||"Unknown",symbol:((R=t.contractInfo)==null?void 0:R.symbol)||"???",decimals:b,holdings:DT(t.balance,b),logoURI:(k=t.contractInfo)==null?void 0:k.logoURI,fiat:!1,explorerUrl:LT(s,n)}}}}function QTt(t){const e=t.contractAddress.toLowerCase(),n=t.tokenID||0;return`${t.accountAddress}::${t.chainId}::${e}::${n}`}function ZTt(t){const e=t.contractAddress.toLowerCase(),n=t.tokenID||0,r=t.accountAddress.slice(-4);return t.contractType===g3.NATIVE?`/tokens/${r}/${t.chainId}/native`:t.contractType===g3.ERC20||n===0?`/tokens/${r}/${t.chainId}/${e}`:`/tokens/${r}/${t.chainId}/${e}/${n}`}const DT=(t,e)=>({value:t,formatted:e?ID(t,e):t}),sNe=(t,e)=>{var i;if(!t)return;const n=t.animation_url,r=(i=n==null?void 0:n.split(".").pop())==null?void 0:i.toLowerCase();let s;if(n&&r!=="gltf"&&r!=="glb"){let a;["mp4","m4v","ogg","ogv","webm"].includes(r)?a="video":["mp3","wav","oga"].includes(r)?a="audio":a="iframe",s={type:a,url:n}}else t.video?s={type:"video",url:t.video}:t.audio?s={type:"audio",url:t.audio}:e?s={type:"image",url:e}:s=void 0;return s};function LT(t,e,n){var s;const r=(s=y4(t))==null?void 0:s.blockExplorer;if(r)return n?`${r.url}token/${e}?a=${n}`:`${r.url}address/${e}`}function XTt(t,e){const{collectibleInfoParams:n,collectibleInfoResponse:r}=t,{chainId:s,address:i,tokenId:a,contractType:o}=n,{balance:c,decimals:l,image:u,name:f}=r,d=y4(s),p=(d==null?void 0:d.type)===dn.TESTNET,g=(c==null?void 0:c.toString())??"1",m=l??0,v=rNe(u)||u,A={tokenId:a.toString(),contractAddress:i,name:f??"Unknown",description:"",image:u??"",decimals:m,properties:{},source:"",attributes:[],status:Ms.ResourceStatus.AVAILABLE},S={chainId:s,address:i,name:f??"Unknown",type:o,symbol:f??"",decimals:m,logoURI:u??"",source:"",deployed:!0,bytecodeHash:"",updatedAt:new Date().toISOString(),status:Ms.ResourceStatus.AVAILABLE,extensions:{link:"",description:"",ogImage:"",originChainId:0,originAddress:"",blacklist:!1,verified:!1,verifiedBy:"",categories:[],ogName:"",featured:!1,featureIndex:0}},I=a.toString(),B=`${e}::${s}::${i.toLowerCase()}::${I}`,D=`/tokens/${e.slice(-4)}/${s}/${i.toLowerCase()}/${I}`;return{type:MT.COLLECTIBLE,contractAddress:i,accountAddress:e,contractType:o,contractInfo:S,chainId:s,network:d,testnet:p,balance:g,holdings:DT(g,m),uuid:B,path:D,name:f??"Unknown",symbol:f??"???",decimals:m,tokenId:I,tokenMetadata:A,image:v,asset:sNe(A,v),description:"",isEmpty:g==="0",isUnknown:!f,isVerified:!1,isGroup:!1,isSwappable:!1,fiat:!1,keys:[],explorerUrl:LT(s,i,I)}}function eNt(){const t=Vt(us),e=Vt(Jn),n=vn(t.accountAddress),{createCalls:r}=HTt();return{handleEnqueueTokenPayload:async(a,o)=>{var f;if(!e.selectedExternalProvider.get()){console.warn("No external provider selected");return}if(!a)return;const c=YTt(a);let l;if(o){const d=((f=a.contractInfo)==null?void 0:f.decimals)??18;l=P5(o,d).toString()}return await r([c],c.chainId,l)},handleEnqueueCollectiblePayload:async(a,o)=>{if(!e.selectedExternalProvider.get()){console.warn("No external provider selected");return}if(!a||!n)return;const c=XTt(a,n);let l;if(o){const f=a.collectibleInfoResponse.decimals??0;l=P5(o,f).toString()}return await r([c],c.chainId,l)}}}function tNt(){const t=Vt(us),e=Vt(N4),n=Vt(fs),r=vn(t.accountAddress),s=vn(n.networks),[i,a]=F.useState(void 0);return F.useEffect(()=>{r&&s.length>0&&e.loadBalances(r,s)},[r,s,e]),F.useEffect(()=>{(async()=>{try{const c=await RIe({authStore:t});if(c){const l=c.trim().split(/\s+/).length;a(l===12)}}catch(c){console.error("Failed to get mnemonic",c)}})()},[t]),{isV2Wallet:i}}function iNe({isOpen:t,onClose:e,networkStore:n,walletStore:r}){if(!t)return null;const s=()=>{r.isNetworkModalOpen.set(!1),n.discardUnsavedNetworkEdits(),n.isAddingNetwork.set(!1),e()};return x.jsx(Sl,{onClose:s,rootProps:{style:{zIndex:100}},contentProps:{style:{scrollbarColor:"gray black",scrollbarWidth:"thin"}},children:x.jsx(UIe,{})})}function nNt({onClose:t,handleSignTxn:e}){var s;const r=Vt(Jn).toSignTxnDetails.get();return F.useEffect(()=>{r&&e(r)},[r]),x.jsx("div",{children:r&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[x.jsx(ke,{variant:"large",fontWeight:"bold",color:"text100",children:"Waiting for external wallet confirmation"}),x.jsxs("div",{className:"flex flex-col gap-3",children:[x.jsxs(Cs,{className:"flex flex-row justify-between items-center",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Origin"}),x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:(s=r==null?void 0:r.origin)==null?void 0:s.split("//")[1]}),x.jsx(Ia,{size:"xs",icon:SL,onClick:()=>window.open(r==null?void 0:r.origin,"_blank"),style:{width:"24px",height:"24px"}})]})]}),x.jsxs(Cs,{className:"flex flex-row justify-between",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Network"}),x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:yb(Number(r.chainId))})]}),x.jsx(RZ,{label:"Transaction Data",children:x.jsx("div",{className:"flex flex-col gap-2",children:r.txn.map((i,a)=>x.jsx(Cs,{children:x.jsx(ke,{variant:"code",color:"text80",style:{overflowWrap:"anywhere",whiteSpace:"pre-wrap"},children:JSON.stringify(i,null,4)||"Native token transfer"})},a))})})]})]}),x.jsx("div",{className:"h-0 my-0"}),x.jsx("div",{className:"flex flex-row items-center justify-end gap-2 p-6",children:x.jsx(Zt,{size:"md",shape:"square",onClick:()=>{t()},children:"Ignore transaction"})})]})})}function aNe({isOpen:t,onCancel:e,onSign:n}){const r=Nu("isMobile");return t?x.jsx(Sl,{isDismissible:!1,size:"sm",contentProps:{style:{width:r?"100%":"800px"}},children:x.jsx(nNt,{onClose:e,handleSignTxn:n})}):null}function rNt({onClose:t}){var o;const e=Vt(Jn),n=Vt(us),r=e.toSignMsgDetails.get(),s=n.accountAddress.get(),[i,a]=F.useState("");return F.useEffect(()=>{if(r!=null&&r.message.message){const c=ybt(r.message.message);try{a(I2(c))}catch{a(Ke(c))}}else r!=null&&r.message.typedData&&a(JSON.stringify(r.message.typedData,void 0,4))},[r]),x.jsx("div",{children:r&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[x.jsx(ke,{variant:"large",fontWeight:"bold",color:"text100",children:"Would you like to approve this transaction?"}),x.jsxs("div",{className:"flex flex-col gap-3",children:[x.jsxs(Cs,{className:"flex flex-row justify-between items-center",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Origin"}),x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:(o=r==null?void 0:r.origin)==null?void 0:o.split("//")[1]}),x.jsx(Ia,{size:"xs",icon:SL,onClick:()=>window.open(r==null?void 0:r.origin,"_blank"),style:{width:"24px",height:"24px"}})]})]}),x.jsxs(Cs,{className:"flex flex-row justify-between",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Network"}),x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:yb(Number(r.chainId))})]}),x.jsxs(Cs,{className:"flex flex-col gap-4",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Signee"}),x.jsx(Cs,{children:x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",style:{fontFamily:"monospace"},children:`${s}`})})]}),x.jsx(RZ,{label:"Message Content",children:x.jsx(Cs,{children:x.jsx(ke,{variant:"code",color:"text80",style:{overflowWrap:"anywhere",whiteSpace:"pre-wrap"},children:i})})})]})]}),x.jsx("div",{className:"h-0 my-0"}),x.jsxs("div",{className:"flex flex-row items-center justify-end gap-2 p-6",children:[x.jsx(Zt,{size:"md",shape:"square",onClick:()=>{t()},children:"Cancel"}),x.jsx(Zt,{variant:"primary",size:"md",shape:"square",onClick:()=>t(r),children:"Send"})]})]})})}function oNe({isOpen:t,onClose:e}){const n=Nu("isMobile");return t?x.jsx(Sl,{isDismissible:!1,size:"sm",contentProps:{style:{width:n?"100%":"800px"}},children:x.jsx(rNt,{onClose:e})}):null}function s6(t,e=18){try{return gb(t,e)}catch(n){return console.error("Error formatting balance:",n),"0"}}function sNt(t,e=18){try{return P5(t,e)}catch{throw new Error("Invalid amount format")}}function cNe(t,e,n=18){if(!t)return!0;try{return sNt(t,n)<=BigInt(e)}catch{return!0}}function lNe(t,e){const n=y4(e),r=n==null?void 0:n.blockExplorer;if(r)return`${r.url}tx/${t}`}function uNe({label:t,value:e,currentBalance:n,symbol:r,disabled:s=!1,insufficientBalance:i=!1,showMaxButton:a=!0,onChange:o,onMaxClick:c}){return x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsxs("div",{className:"flex flex-col gap-0.5",children:[x.jsx(ke,{variant:"normal",className:"text-primary/80",children:t}),x.jsxs(ke,{variant:"small",className:"text-primary/50",children:["Current Balance: ",n," ",r]})]}),x.jsx(na,{name:"amount",value:e,disabled:s,onChange:l=>{o(l.target.value)},controls:a&&c?x.jsx(Zt,{size:"xs",shape:"square",onClick:c,children:"Max"}):void 0}),i&&x.jsx(g2.Helper,{className:"mt-1",variant:"warning",title:"Insufficient balance for this transaction"})]})}function fNe({label:t,value:e,disabled:n=!1,placeholder:r="0x...",helperText:s,onChange:i}){return x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text80",children:t}),x.jsx(na,{name:"to",value:e,placeholder:r,disabled:n,onChange:a=>{i(a.target.value)}}),s&&x.jsx(ke,{variant:"small",color:"text50",children:s})]})}function dNe({assetName:t,networkTitle:e,chainId:n,transactionHash:r,explorerUrl:s,onClose:i}){return x.jsxs("div",{className:"flex flex-col gap-4 p-6 pt-0",children:[x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsxs("div",{className:"flex flex-row items-center justify-center gap-1",children:[x.jsx("div",{className:"w-5 h-5 rounded-full bg-backgroundRaised flex items-center justify-center",children:x.jsx(Ff,{className:"w-4 h-4 text-positive"})}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text100",className:"text-center",children:"Recovery transaction enqueued"})]}),x.jsxs(ke,{variant:"small",color:"text50",className:"text-center",children:["Enqueued recovery transaction of ",t,". You will be able to execute and transfer your ",t," after 30 days."]}),r&&x.jsx("div",{className:"flex flex-col gap-1 items-center",children:!s&&x.jsxs(ke,{variant:"small",color:"text50",children:["txn hash: ",r]})})]}),x.jsxs("div",{className:"flex flex-row items-center justify-center gap-2",children:[x.jsx(Zt,{variant:"primary",size:"md",shape:"square",onClick:i,children:"Close"}),r&&s&&x.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:x.jsx(Zt,{variant:"secondary",size:"md",shape:"square",children:x.jsxs("div",{className:"flex flex-row items-center gap-1",children:[x.jsx(a5,{chainId:n,style:{width:14,height:14}}),x.jsxs(ke,{children:["View on ",e," explorer"]})]})})})]})]})}function hNe({isWaitingForSignature:t,isRejected:e,isDisabled:n,connectedWalletName:r,onCancel:s,onRecover:i}){return x.jsxs("div",{className:"flex flex-col gap-2 p-6 pt-0 transition-all duration-300",children:[x.jsxs("div",{className:"flex flex-row items-center justify-end gap-2",children:[x.jsx(Zt,{size:"md",shape:"square",disabled:t,onClick:s,children:"Cancel"}),x.jsx(Zt,{variant:"primary",size:"md",shape:"square",disabled:n,onClick:i,className:"transition-all duration-300",children:t?x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(_0,{}),x.jsxs(ke,{children:["Continue with ",r]})]}):"Recover"})]}),e&&x.jsx(g2.Helper,{variant:"info",title:"You need to sign the transaction to proceed"})]})}function pNe(t,e){const n=Vt(Jn),r=vn(n.selectedExternalWalletAddress),[s,i]=F.useState(t),[a,o]=F.useState(e),[c,l]=F.useState(!0),u=!!a&&!!r&&a.toLowerCase()===r.toLowerCase();return F.useEffect(()=>{const f=n.selectedExternalWalletAddress.get();c&&f&&o(f)},[c,n]),{amount:s,toAddress:a,sendToExternalWallet:c,isSendingToExternalWallet:u,setAmount:i,setToAddress:o,setSendToExternalWallet:l}}function gNe(t,e,n){const r=hU(),s=t?r.get(t):void 0,i=s==null?void 0:s.status,a=i==="pending"||i==="success",o=i==="cancelled"||i==="error",c=a||o;return F.useEffect(()=>{if(!t)return;const l=r.get(t),u=l==null?void 0:l.status;(u==="pending"||u==="success"||u==="cancelled"||u==="error")&&(n==null||n(!1))},[t,r.values,n]),F.useEffect(()=>{if(!t||!e)return;const l=setInterval(()=>{const u=r.get(t),f=u==null?void 0:u.status;(f==="pending"||f==="success"||f==="cancelled"||f==="error")&&(n==null||n(!1),clearInterval(l))},500);return()=>clearInterval(l)},[t,e,r,n]),{transaction:s,isSigned:a,isRejected:o,isFinal:c}}function mNe(t,e,n){const r=hU();F.useEffect(()=>{if(!n)return;const s=t?r.get(t):void 0,i=s==null?void 0:s.status;n(!e&&(!t||(i==="pending"||i==="success"||i==="cancelled"||i==="error")))},[e,t,n,r.values])}function iNt({tokenBalance:t,onClose:e,onRecover:n,onDismissibleChange:r}){var b,w,N,L;const s=Nu("isMobile"),i=Vt(Jn),a=vn(i.selectedExternalProvider),[o,c]=F.useState(void 0),[l,u]=F.useState(!1),{amount:f,toAddress:d,sendToExternalWallet:p,isSendingToExternalWallet:g,setAmount:m,setToAddress:v,setSendToExternalWallet:A}=pNe(),{transaction:S,isSigned:I,isRejected:B}=gNe(o,l,u);mNe(o,l,r);const D=F.useMemo(()=>{var C;return!f||!t?!1:!cNe(f,t.balance,((C=t.contractInfo)==null?void 0:C.decimals)??18)},[f,t]);if(F.useEffect(()=>{var C;if(t){const T=s6(t.balance,((C=t.contractInfo)==null?void 0:C.decimals)??18);m(T);const E=i.selectedExternalWalletAddress.get();E&&v(E)}},[t,m,v,i]),!t)return null;const V=((b=t.contractInfo)==null?void 0:b.decimals)??18,O=yb(t.chainId),U=(a==null?void 0:a.info.name)||"wallet",Q=s6(t.balance,V),ie=S!=null&&S.hash&&(t!=null&&t.chainId)?lNe(S.hash,t.chainId):void 0,G=()=>{m(s6(t.balance,V))},R=async()=>{if(d&&f){c(void 0),u(!0);try{const C=await n({amount:f,to:d});C?c(C):u(!1)}catch{u(!1)}}},k=()=>{c(void 0),u(!1),e()};return x.jsxs("div",{className:"w-full",style:{width:s?"100%":"520px",maxWidth:"100%"},children:[x.jsxs("div",{className:"flex flex-col gap-6 p-4 sm:p-6",children:[x.jsxs(ke,{variant:"large",fontWeight:"bold",color:"text100",children:["Sending ",(w=t==null?void 0:t.contractInfo)==null?void 0:w.symbol," on ",O]}),x.jsxs("div",{className:"flex flex-col gap-3",children:[x.jsx(uNe,{label:"Amount",value:f??"",currentBalance:Q,symbol:(N=t==null?void 0:t.contractInfo)==null?void 0:N.symbol,insufficientBalance:D,onChange:m,onMaxClick:G}),x.jsx(fNe,{label:"To",value:d??"",disabled:p,helperText:g&&a?`You're sending to your ${a.info.name} wallet`:void 0,onChange:v})]}),x.jsx(Zt,{variant:"text",onClick:()=>A(!p),children:x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(o4,{checked:p}),x.jsx(ke,{variant:"small",color:"text80",children:"Send to connected external wallet address"})]})})]}),x.jsx("div",{className:"my-0"}),I?x.jsx(dNe,{assetName:(L=t==null?void 0:t.contractInfo)==null?void 0:L.symbol,networkTitle:O,chainId:t.chainId,transactionHash:S==null?void 0:S.hash,explorerUrl:ie,onClose:k}):x.jsx(hNe,{isWaitingForSignature:l,isRejected:B,insufficientBalance:D,isDisabled:l||!d||!f||D||!Ja(d),connectedWalletName:U,onCancel:k,onRecover:R})]})}function yNe({isOpen:t,isDismissible:e,tokenBalance:n,onClose:r,onRecover:s,onDismissibleChange:i}){const a=Nu("isMobile");return t?x.jsx(Sl,{size:"sm",isDismissible:e,onClose:r,contentProps:{style:{width:a?"100%":"auto",maxWidth:"100%",minWidth:0,maxHeight:a?"100%":"90vh",overflow:"auto"}},rootProps:{className:"px-3 sm:px-0"},children:x.jsx(iNt,{tokenBalance:n,onClose:r,onRecover:s,onDismissibleChange:i})}):null}function aNt({collectibleInfo:t,onClose:e,onRecover:n,onDismissibleChange:r}){var N,L,C,T;const s=Nu("isMobile"),i=Vt(Jn),a=vn(i.selectedExternalProvider),[o,c]=F.useState(void 0),[l,u]=F.useState(!1),{amount:f,toAddress:d,sendToExternalWallet:p,isSendingToExternalWallet:g,setAmount:m,setToAddress:v,setSendToExternalWallet:A}=pNe(),{transaction:S,isSigned:I,isRejected:B}=gNe(o,l,u);mNe(o,l,r);const D=F.useMemo(()=>{if(!f||!t||t.collectibleInfoParams.contractType==="ERC721")return!1;const E=t.collectibleInfoResponse.balance??0n,P=t.collectibleInfoResponse.decimals??0;return!cNe(f,E,P)},[f,t]);if(F.useEffect(()=>{if(t){if(t.collectibleInfoParams.contractType==="ERC721")m("1");else{const _=t.collectibleInfoResponse.balance,H=t.collectibleInfoResponse.decimals??0;if(_!=null){const ne=s6(_,H);m(ne)}}const P=i.selectedExternalWalletAddress.get();P&&v(P)}},[t,m,v,i]),!t)return null;const V=t.collectibleInfoParams.contractType==="ERC721",O=yb(t.collectibleInfoParams.chainId),U=(a==null?void 0:a.info.name)||"wallet",Q=t.collectibleInfoResponse.decimals??0,ie=t.collectibleInfoResponse.balance,G=ie!=null?s6(ie,Q):"0",R=S!=null&&S.hash&&(t!=null&&t.collectibleInfoParams.chainId)?lNe(S.hash,t.collectibleInfoParams.chainId):void 0,k=()=>{ie!=null&&m(s6(ie,Q))},b=async()=>{if(d&&f){c(void 0),u(!0);try{const E=await n({amount:f,to:d});E?c(E):u(!1)}catch{u(!1)}}},w=()=>{c(void 0),u(!1),e()};return x.jsxs("div",{className:"w-full",style:{width:s?"100%":"520px",maxWidth:"100%"},children:[x.jsxs("div",{className:"flex flex-col gap-6 p-4 sm:p-6",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[((N=t==null?void 0:t.collectibleInfoResponse)==null?void 0:N.image)&&x.jsx("img",{src:(L=t==null?void 0:t.collectibleInfoResponse)==null?void 0:L.image,className:"w-8 h-8 sm:w-7 sm:h-7"}),x.jsxs(ke,{variant:"large",fontWeight:"bold",color:"text100",children:["Sending ",(C=t==null?void 0:t.collectibleInfoResponse)==null?void 0:C.name," on ",O]})]}),x.jsxs("div",{className:"flex flex-col gap-3",children:[x.jsx(uNe,{label:"Amount",value:V?"1":f??"",currentBalance:G,disabled:V,insufficientBalance:D,showMaxButton:!V,onChange:m,onMaxClick:V?void 0:k}),x.jsx(fNe,{label:"To",value:d??"",disabled:p,helperText:g&&a?`You're sending to your ${a.info.name} wallet`:void 0,onChange:v})]}),x.jsx(Zt,{variant:"text",onClick:()=>A(!p),children:x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(o4,{checked:p}),x.jsx(ke,{variant:"small",color:"text80",children:"Send to connected external wallet address"})]})})]}),x.jsx("div",{className:"my-0"}),I?x.jsx(dNe,{assetName:(T=t==null?void 0:t.collectibleInfoResponse)==null?void 0:T.name,networkTitle:O,chainId:t.collectibleInfoParams.chainId,transactionHash:S==null?void 0:S.hash,explorerUrl:R,onClose:w}):x.jsx(hNe,{isWaitingForSignature:l,isRejected:B,insufficientBalance:D,isDisabled:l||!d||!f||D||!Ja(d),connectedWalletName:U,onCancel:w,onRecover:b})]})}function wNe({isOpen:t,isDismissible:e,collectibleInfo:n,onClose:r,onRecover:s,onDismissibleChange:i}){const a=Nu("isMobile");return t?x.jsx(Sl,{size:"sm",isDismissible:e,onClose:r,contentProps:{style:{width:a?"100%":"auto",maxWidth:"100%",minWidth:0,maxHeight:a?"100%":"90vh",overflow:"auto"}},rootProps:{className:"px-3 sm:px-0"},children:x.jsx(aNt,{collectibleInfo:n,onClose:r,onRecover:s,onDismissibleChange:i})}):null}function oNt({onClose:t}){var l;const e=Nu("isMobile"),n=Vt(Jn),r=vn(n.connectOptions),s=Rb(),[i,a]=F.useState(!1),o=async()=>{if(i)return;a(!0);const u=await n.walletRequestHandler.connect(r);n.connectDetails.set(u),a(!1),s({variant:"success",title:"Dapp connection added successfully",description:"You can now receive dapp action requests."}),t()},c=()=>{n.connectDetails.set({connected:!1}),t()};return x.jsxs("div",{className:"min-w-[500px] w-full",style:{minWidth:e?"100vw":"500px"},children:[x.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[x.jsx(ke,{variant:"large",fontWeight:"bold",color:"text80",children:"Would you like to connect to this dapp?"}),x.jsxs("div",{className:"flex flex-col gap-3",children:[x.jsxs(Cs,{className:"flex flex-row justify-between items-center",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Origin"}),x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:(l=r==null?void 0:r.origin)==null?void 0:l.split("//")[1]}),x.jsx(Ia,{size:"xs",icon:SL,onClick:()=>window.open(r==null?void 0:r.origin,"_blank")})]})]}),x.jsxs(Cs,{className:"flex flex-row justify-between",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:"Network"}),x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text100",children:yb(Number(r==null?void 0:r.networkId))})]})]})]}),x.jsx("div",{className:"h-0 my-0"}),x.jsxs("div",{className:"flex flex-row items-center justify-end gap-2 p-6",children:[x.jsx(Zt,{size:"md",shape:"square",onClick:()=>c(),children:"Cancel"}),x.jsx(Zt,{variant:"primary",size:"md",shape:"square",disabled:i,onClick:()=>o(),children:i?"Authorizing":"Connect"})]})]})}const Ene=({src:t,...e})=>x.jsx("div",{className:"flex flex-row justify-center items-center rounded-sm w-6 h-6",...e,children:x.jsx("img",{height:"auto",src:t,className:"rounded-xs w-full h-full",alt:"External Icon"})});function cNt({sessionList:t}){const e=Vt(V4);return x.jsx(x.Fragment,{children:t.map((n,r)=>x.jsxs(Cs,{className:"flex flex-row justify-between items-center gap-2",children:[x.jsxs("div",{className:"flex flex-row items-center gap-4",children:[x.jsx(Ene,{src:n.peer.metadata.icons[0]}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text100",children:n.peer.metadata.name?n.peer.metadata.name:n.peer.metadata.url})]}),x.jsxs("div",{className:"flex flex-row gap-2",children:[n.peer.metadata.url&&x.jsx(Ia,{icon:SL,size:"sm",shape:"square",onClick:()=>window.open(n.peer.metadata.url,"_blank")}),x.jsx(Ia,{icon:p2,size:"sm",shape:"square",onClick:()=>e.disconnectSession(n.topic)})]})]},r))})}var bNe={},Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.compactObject=ENe;Bl.deprecated=yNt;var lNt=Bl.detectBrowser=wNt;Bl.disableLog=pNt;Bl.disableWarnings=gNt;Bl.extractVersion=sB;Bl.filterStats=bNt;Bl.log=mNt;Bl.walkStats=CD;Bl.wrapPeerConnectionEvent=hNt;function uNt(t,e,n){return e=fNt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fNt(t){var e=dNt(t,"string");return xb(e)=="symbol"?e:e+""}function dNt(t,e){if(xb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xb(t){"@babel/helpers - typeof";return xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xb(t)}var vNe=!0,xNe=!0;function sB(t,e,n){var r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function hNt(t,e,n){if(t.RTCPeerConnection){var r=t.RTCPeerConnection.prototype,s=r.addEventListener;r.addEventListener=function(a,o){if(a!==e)return s.apply(this,arguments);var c=function(u){var f=n(u);f&&(o.handleEvent?o.handleEvent(f):o(f))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(o,c),s.apply(this,[a,c])};var i=r.removeEventListener;r.removeEventListener=function(a,o){if(a!==e||!this._eventMap||!this._eventMap[e])return i.apply(this,arguments);if(!this._eventMap[e].has(o))return i.apply(this,arguments);var c=this._eventMap[e].get(o);return this._eventMap[e].delete(o),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,i.apply(this,[a,c])},Object.defineProperty(r,"on"+e,{get:function(){return this["_on"+e]},set:function(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}}function pNt(t){return typeof t!="boolean"?new Error("Argument type: "+xb(t)+". Please use a boolean."):(vNe=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function gNt(t){return typeof t!="boolean"?new Error("Argument type: "+xb(t)+". Please use a boolean."):(xNe=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function mNt(){if((typeof window>"u"?"undefined":xb(window))==="object"){if(vNe)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function yNt(t,e){xNe&&console.warn(t+" is deprecated, please use "+e+" instead.")}function wNt(t){var e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;var n=t.navigator;if(n.userAgentData&&n.userAgentData.brands){var r=n.userAgentData.brands.find(function(s){return s.brand==="Chromium"});if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=sB(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=sB(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=sB(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function P0e(t){return Object.prototype.toString.call(t)==="[object Object]"}function ENe(t){return P0e(t)?Object.keys(t).reduce(function(e,n){var r=P0e(t[n]),s=r?ENe(t[n]):t[n],i=r&&!Object.keys(s).length;return s===void 0||i?e:Object.assign(e,uNt({},n,s))},{}):t}function CD(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(function(r){r.endsWith("Id")?CD(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(function(s){CD(t,t.get(s),n)})}))}function bNt(t,e,n){var r=n?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;var i=[];return t.forEach(function(a){a.type==="track"&&a.trackIdentifier===e.id&&i.push(a)}),i.forEach(function(a){t.forEach(function(o){o.type===r&&o.trackId===a.id&&CD(t,o,s)})}),s}Object.defineProperty(bNe,"__esModule",{value:!0});var vNt=bNe.shimGetUserMedia=ANt,xNt=ENt(Bl);function ANe(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(ANe=function(s){return s?n:e})(t)}function ENt(t,e){if(t&&t.__esModule)return t;if(t===null||Xy(t)!="object"&&typeof t!="function")return{default:t};var n=ANe(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&{}.hasOwnProperty.call(t,i)){var a=s?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function Xy(t){"@babel/helpers - typeof";return Xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xy(t)}var O0e=xNt.log;function ANt(t,e){var n=t&&t.navigator;if(n.mediaDevices){var r=function(l){if(Xy(l)!=="object"||l.mandatory||l.optional)return l;var u={};return Object.keys(l).forEach(function(f){if(!(f==="require"||f==="advanced"||f==="mediaSource")){var d=Xy(l[f])==="object"?l[f]:{ideal:l[f]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);var p=function(v,A){return v?v+A.charAt(0).toUpperCase()+A.slice(1):A==="deviceId"?"sourceId":A};if(d.ideal!==void 0){u.optional=u.optional||[];var g={};typeof d.ideal=="number"?(g[p("min",f)]=d.ideal,u.optional.push(g),g={},g[p("max",f)]=d.ideal,u.optional.push(g)):(g[p("",f)]=d.ideal,u.optional.push(g))}d.exact!==void 0&&typeof d.exact!="number"?(u.mandatory=u.mandatory||{},u.mandatory[p("",f)]=d.exact):["min","max"].forEach(function(m){d[m]!==void 0&&(u.mandatory=u.mandatory||{},u.mandatory[p(m,f)]=d[m])})}}),l.advanced&&(u.optional=(u.optional||[]).concat(l.advanced)),u},s=function(l,u){if(e.version>=61)return u(l);if(l=JSON.parse(JSON.stringify(l)),l&&Xy(l.audio)==="object"){var f=function(v,A,S){A in v&&!(S in v)&&(v[S]=v[A],delete v[A])};l=JSON.parse(JSON.stringify(l)),f(l.audio,"autoGainControl","googAutoGainControl"),f(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&Xy(l.video)==="object"){var d=l.video.facingMode;d=d&&(Xy(d)==="object"?d:{ideal:d});var p=e.version<66;if(d&&(d.exact==="user"||d.exact==="environment"||d.ideal==="user"||d.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!p)){delete l.video.facingMode;var g;if(d.exact==="environment"||d.ideal==="environment"?g=["back","rear"]:(d.exact==="user"||d.ideal==="user")&&(g=["front"]),g)return n.mediaDevices.enumerateDevices().then(function(m){m=m.filter(function(A){return A.kind==="videoinput"});var v=m.find(function(A){return g.some(function(S){return A.label.toLowerCase().includes(S)})});return!v&&m.length&&g.includes("back")&&(v=m[m.length-1]),v&&(l.video.deviceId=d.exact?{exact:v.deviceId}:{ideal:v.deviceId}),l.video=r(l.video),O0e("chrome: "+JSON.stringify(l)),u(l)})}l.video=r(l.video)}return O0e("chrome: "+JSON.stringify(l)),u(l)},i=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},a=function(l,u,f){s(l,function(d){n.webkitGetUserMedia(d,u,function(p){f&&f(i(p))})})};if(n.getUserMedia=a.bind(n),n.mediaDevices.getUserMedia){var o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return s(c,function(l){return o(l).then(function(u){if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(function(f){f.stop()}),new DOMException("","NotFoundError");return u},function(u){return Promise.reject(i(u))})})}}}}var SNe={};Object.defineProperty(SNe,"__esModule",{value:!0});var SNt=SNe.shimGetUserMedia=TNt,INt=CNt(Bl);function INe(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(INe=function(s){return s?n:e})(t)}function CNt(t,e){if(t&&t.__esModule)return t;if(t===null||i6(t)!="object"&&typeof t!="function")return{default:t};var n=INe(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&{}.hasOwnProperty.call(t,i)){var a=s?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function i6(t){"@babel/helpers - typeof";return i6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i6(t)}function TNt(t,e){var n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(c,l,u){INt.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(c).then(l,u)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var s=function(l,u,f){u in l&&!(f in l)&&(l[f]=l[u],delete l[u])},i=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(c){return i6(c)==="object"&&i6(c.audio)==="object"&&(c=JSON.parse(JSON.stringify(c)),s(c.audio,"autoGainControl","mozAutoGainControl"),s(c.audio,"noiseSuppression","mozNoiseSuppression")),i(c)},r&&r.prototype.getSettings){var a=r.prototype.getSettings;r.prototype.getSettings=function(){var c=a.apply(this,arguments);return s(c,"mozAutoGainControl","autoGainControl"),s(c,"mozNoiseSuppression","noiseSuppression"),c}}if(r&&r.prototype.applyConstraints){var o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(c){return this.kind==="audio"&&i6(c)==="object"&&(c=JSON.parse(JSON.stringify(c)),s(c,"autoGainControl","mozAutoGainControl"),s(c,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[c])}}}}var Z0={};Object.defineProperty(Z0,"__esModule",{value:!0});Z0.shimAudioContext=LNt;Z0.shimCallbacksAPI=RNt;Z0.shimConstraints=NNe;Z0.shimCreateOfferLegacy=DNt;var NNt=Z0.shimGetUserMedia=_Nt;Z0.shimLocalStreamsAPI=PNt;Z0.shimRTCIceServerUrls=BNt;Z0.shimRemoteStreamsAPI=ONt;Z0.shimTrackEventTransceiver=MNt;var CNe=kNt(Bl);function TNe(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(TNe=function(s){return s?n:e})(t)}function kNt(t,e){if(t&&t.__esModule)return t;if(t===null||Eb(t)!="object"&&typeof t!="function")return{default:t};var n=TNe(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&{}.hasOwnProperty.call(t,i)){var a=s?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function Eb(t){"@babel/helpers - typeof";return Eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eb(t)}function PNt(t){if(!(Eb(t)!=="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){var e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){var s=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(function(i){return e.call(s,i,r)}),r.getVideoTracks().forEach(function(i){return e.call(s,i,r)})},t.RTCPeerConnection.prototype.addTrack=function(r){for(var s=this,i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return a&&a.forEach(function(c){s._localStreams?s._localStreams.includes(c)||s._localStreams.push(c):s._localStreams=[c]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){var s=this;this._localStreams||(this._localStreams=[]);var i=this._localStreams.indexOf(r);if(i!==-1){this._localStreams.splice(i,1);var a=r.getTracks();this.getSenders().forEach(function(o){a.includes(o.track)&&s.removeTrack(o)})}})}}function ONt(t){if(!(Eb(t)!=="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(r){var s=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(function(a){if(s._remoteStreams||(s._remoteStreams=[]),!s._remoteStreams.includes(a)){s._remoteStreams.push(a);var o=new Event("addstream");o.stream=a,s.dispatchEvent(o)}})})}});var e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(function(i){if(r._remoteStreams||(r._remoteStreams=[]),!(r._remoteStreams.indexOf(i)>=0)){r._remoteStreams.push(i);var a=new Event("addstream");a.stream=i,r.dispatchEvent(a)}})}),e.apply(r,arguments)}}}function RNt(t){if(!(Eb(t)!=="object"||!t.RTCPeerConnection)){var e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,s=e.setLocalDescription,i=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(l,u){var f=arguments.length>=2?arguments[2]:arguments[0],d=n.apply(this,[f]);return u?(d.then(l,u),Promise.resolve()):d},e.createAnswer=function(l,u){var f=arguments.length>=2?arguments[2]:arguments[0],d=r.apply(this,[f]);return u?(d.then(l,u),Promise.resolve()):d};var o=function(l,u,f){var d=s.apply(this,[l]);return f?(d.then(u,f),Promise.resolve()):d};e.setLocalDescription=o,o=function(l,u,f){var d=i.apply(this,[l]);return f?(d.then(u,f),Promise.resolve()):d},e.setRemoteDescription=o,o=function(l,u,f){var d=a.apply(this,[l]);return f?(d.then(u,f),Promise.resolve()):d},e.addIceCandidate=o}}function _Nt(t){var e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){var n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=function(s){return r(NNe(s))}}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,a,o){e.mediaDevices.getUserMedia(i).then(a,o)}).bind(e))}function NNe(t){return t&&t.video!==void 0?Object.assign({},t,{video:CNe.compactObject(t.video)}):t}function BNt(t){if(t.RTCPeerConnection){var e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,s){if(r&&r.iceServers){for(var i=[],a=0;a<r.iceServers.length;a++){var o=r.iceServers[a];o.urls===void 0&&o.url?(CNe.deprecated("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,i.push(o)):i.push(r.iceServers[a])}r.iceServers=i}return new e(r,s)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return e.generateCertificate}})}}function MNt(t){Eb(t)==="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function DNt(t){var e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);var s=this.getTransceivers().find(function(a){return a.receiver.track.kind==="audio"});r.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);var i=this.getTransceivers().find(function(a){return a.receiver.track.kind==="video"});r.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveVideo===!0&&!i&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function LNt(t){Eb(t)!=="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var kNe=t=>{throw TypeError(t)},PNe=(t,e,n)=>e.has(t)||kNe("Cannot "+n),UNt=(t,e,n)=>(PNe(t,e,"read from private field"),n?n.call(t):e.get(t)),FNt=(t,e,n)=>e.has(t)?kNe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),VNt=(t,e,n,r)=>(PNe(t,e,"write to private field"),e.set(t,n),n);const R0e=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataBarLimited","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function $Nt(t){return t.join("|")}function jNt(t){const e=_0e(t);let n=0,r=R0e.length-1;for(;n<=r;){const s=Math.floor((n+r)/2),i=R0e[s],a=_0e(i);if(a===e)return i;a<e?n=s+1:r=s-1}return"None"}function _0e(t){return t.toLowerCase().replace(/_-\[\]/g,"")}function HNt(t,e){return t.Binarizer[e]}function qNt(t,e){return t.CharacterSet[e]}const KNt=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function GNt(t){return KNt[t.value]}function WNt(t,e){return t.EanAddOnSymbol[e]}function zNt(t,e){return t.TextMode[e]}const W5={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function ONe(t,e){return{...e,formats:$Nt(e.formats),binarizer:HNt(t,e.binarizer),eanAddOnSymbol:WNt(t,e.eanAddOnSymbol),textMode:zNt(t,e.textMode),characterSet:qNt(t,e.characterSet)}}function RNe(t){return{...t,format:jNt(t.format),eccLevel:t.eccLevel,contentType:GNt(t.contentType)}}const JNt={locateFile:(t,e)=>{const n=t.match(/_(.+?)\.wasm$/);return n?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.3.4/dist/${n[1]}/${t}`:e+t}};let B0e=new WeakMap;function Ane(t,e){var n;const r=B0e.get(t);if(r!=null&&r.modulePromise&&e===void 0)return r.modulePromise;const s=(n=r==null?void 0:r.moduleOverrides)!=null?n:JNt,i=t({...s});return B0e.set(t,{moduleOverrides:s,modulePromise:i}),i}async function YNt(t,e,n=W5){const r={...W5,...n},s=await Ane(t),{size:i}=e,a=new Uint8Array(await e.arrayBuffer()),o=s._malloc(i);s.HEAPU8.set(a,o);const c=s.readBarcodesFromImage(o,i,ONe(s,r));s._free(o);const l=[];for(let u=0;u<c.size();++u)l.push(RNe(c.get(u)));return l}async function QNt(t,e,n=W5){const r={...W5,...n},s=await Ane(t),{data:i,width:a,height:o,data:{byteLength:c}}=e,l=s._malloc(c);s.HEAPU8.set(i,l);const u=s.readBarcodesFromPixmap(l,a,o,ONe(s,r));s._free(l);const f=[];for(let d=0;d<u.size();++d)f.push(RNe(u.get(d)));return f}({...W5,formats:[...W5.formats]});var Sne=(()=>{var t,e=typeof document<"u"&&((t=document.currentScript)==null?void 0:t.tagName.toUpperCase())==="SCRIPT"?document.currentScript.src:void 0;return function(n={}){var r,s=n,i,a,o=new Promise((W,z)=>{i=W,a=z}),c=typeof window=="object",l=typeof Bun<"u",u=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var f=Object.assign({},s),d="./this.program",p="";function g(W){return s.locateFile?s.locateFile(W,p):p+W}var m,v;if(c||u||l){var A;u?p=self.location.href:typeof document<"u"&&((A=document.currentScript)===null||A===void 0?void 0:A.tagName.toUpperCase())==="SCRIPT"&&(p=document.currentScript.src),e&&(p=e),p.startsWith("blob:")?p="":p=p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1),u&&(v=W=>{var z=new XMLHttpRequest;return z.open("GET",W,!1),z.responseType="arraybuffer",z.send(null),new Uint8Array(z.response)}),m=W=>fetch(W,{credentials:"same-origin"}).then(z=>z.ok?z.arrayBuffer():Promise.reject(new Error(z.status+" : "+z.url)))}var S=s.print||console.log.bind(console),I=s.printErr||console.error.bind(console);Object.assign(s,f),f=null,s.arguments&&s.arguments,s.thisProgram&&(d=s.thisProgram);var B=s.wasmBinary,D,V=!1,O,U,Q,ie,G,R,k,b;function w(){var W=D.buffer;s.HEAP8=O=new Int8Array(W),s.HEAP16=Q=new Int16Array(W),s.HEAPU8=U=new Uint8Array(W),s.HEAPU16=ie=new Uint16Array(W),s.HEAP32=G=new Int32Array(W),s.HEAPU32=R=new Uint32Array(W),s.HEAPF32=k=new Float32Array(W),s.HEAPF64=b=new Float64Array(W)}var N=[],L=[],C=[];function T(){var W=s.preRun;W&&(typeof W=="function"&&(W=[W]),W.forEach(_)),Be(N)}function E(){Be(L)}function P(){var W=s.postRun;W&&(typeof W=="function"&&(W=[W]),W.forEach(ne)),Be(C)}function _(W){N.unshift(W)}function H(W){L.unshift(W)}function ne(W){C.unshift(W)}var $=0,te=null;function J(W){var z;$++,(z=s.monitorRunDependencies)===null||z===void 0||z.call(s,$)}function ee(W){var z;if($--,(z=s.monitorRunDependencies)===null||z===void 0||z.call(s,$),$==0&&te){var le=te;te=null,le()}}function X(W){var z;(z=s.onAbort)===null||z===void 0||z.call(s,W),W="Aborted("+W+")",I(W),V=!0,W+=". Build with -sASSERTIONS for more info.";var le=new WebAssembly.RuntimeError(W);throw a(le),le}var j="data:application/octet-stream;base64,",se=W=>W.startsWith(j);function ye(){var W="zxing_reader.wasm";return se(W)?W:g(W)}var Ce;function xe(W){if(W==Ce&&B)return new Uint8Array(B);if(v)return v(W);throw"both async and sync fetching of the wasm failed"}function De(W){return B?Promise.resolve().then(()=>xe(W)):m(W).then(z=>new Uint8Array(z),()=>xe(W))}function qe(W,z,le){return De(W).then(me=>WebAssembly.instantiate(me,z)).then(le,me=>{I(`failed to asynchronously prepare wasm: ${me}`),X(me)})}function ze(W,z,le,me){return!W&&typeof WebAssembly.instantiateStreaming=="function"&&!se(z)&&typeof fetch=="function"?fetch(z,{credentials:"same-origin"}).then(Ae=>{var Ne=WebAssembly.instantiateStreaming(Ae,le);return Ne.then(me,function(Ue){return I(`wasm streaming compile failed: ${Ue}`),I("falling back to ArrayBuffer instantiation"),qe(z,le,me)})}):qe(z,le,me)}function ft(){return{a:YF}}function mt(){var W,z=ft();function le(Ae,Ne){return $s=Ae.exports,D=$s.za,w(),Hb=$s.Da,H($s.Aa),ee(),$s}J();function me(Ae){le(Ae.instance)}if(s.instantiateWasm)try{return s.instantiateWasm(z,le)}catch(Ae){I(`Module.instantiateWasm callback failed with error: ${Ae}`),a(Ae)}return(W=Ce)!==null&&W!==void 0||(Ce=ye()),ze(B,Ce,z,me).catch(a),{}}var Be=W=>{W.forEach(z=>z(s))};s.noExitRuntime;var de=W=>Q4(W),oe=()=>nd(),fe=[],ce=0,ae=W=>{var z=new yt(W);return z.get_caught()||(z.set_caught(!0),ce--),z.set_rethrown(!1),fe.push(z),_9(W),R9(W)},Ie=0,nt=()=>{wr(0,0);var W=fe.pop();zb(W.excPtr),Ie=0};class yt{constructor(z){this.excPtr=z,this.ptr=z-24}set_type(z){R[this.ptr+4>>2]=z}get_type(){return R[this.ptr+4>>2]}set_destructor(z){R[this.ptr+8>>2]=z}get_destructor(){return R[this.ptr+8>>2]}set_caught(z){z=z?1:0,O[this.ptr+12]=z}get_caught(){return O[this.ptr+12]!=0}set_rethrown(z){z=z?1:0,O[this.ptr+13]=z}get_rethrown(){return O[this.ptr+13]!=0}init(z,le){this.set_adjusted_ptr(0),this.set_type(z),this.set_destructor(le)}set_adjusted_ptr(z){R[this.ptr+16>>2]=z}get_adjusted_ptr(){return R[this.ptr+16>>2]}}var Tt=W=>{throw Ie||(Ie=W),Ie},at=W=>yE(W),It=W=>{var z=Ie;if(!z)return at(0),0;var le=new yt(z);le.set_adjusted_ptr(z);var me=le.get_type();if(!me)return at(0),z;for(var Ae of W){if(Ae===0||Ae===me)break;var Ne=le.ptr+16;if(B9(Ae,me,Ne))return at(Ae),z}return at(me),z},_t=()=>It([]),pt=W=>It([W]),$t=(W,z)=>It([W,z]),Pt=()=>{var W=fe.pop();W||X("no exception to throw");var z=W.excPtr;throw W.get_rethrown()||(fe.push(W),W.set_rethrown(!0),W.set_caught(!1),ce++),Ie=z,Ie},jt=(W,z,le)=>{var me=new yt(W);throw me.init(z,le),Ie=W,ce++,Ie},En=()=>ce,An=()=>{X("")},At={},Sn=W=>{for(;W.length;){var z=W.pop(),le=W.pop();le(z)}};function Hn(W){return this.fromWireType(R[W>>2])}var Qt={},nn={},sn={},Nt,un=W=>{throw new Nt(W)},Xt=(W,z,le)=>{W.forEach(Me=>sn[Me]=z);function me(Me){var Je=le(Me);Je.length!==W.length&&un("Mismatched type converter count");for(var lt=0;lt<W.length;++lt)qt(W[lt],Je[lt])}var Ae=new Array(z.length),Ne=[],Ue=0;z.forEach((Me,Je)=>{nn.hasOwnProperty(Me)?Ae[Je]=nn[Me]:(Ne.push(Me),Qt.hasOwnProperty(Me)||(Qt[Me]=[]),Qt[Me].push(()=>{Ae[Je]=nn[Me],++Ue,Ue===Ne.length&&me(Ae)}))}),Ne.length===0&&me(Ae)},Ct=W=>{var z=At[W];delete At[W];var le=z.rawConstructor,me=z.rawDestructor,Ae=z.fields,Ne=Ae.map(Ue=>Ue.getterReturnType).concat(Ae.map(Ue=>Ue.setterArgumentType));Xt([W],Ne,Ue=>{var Me={};return Ae.forEach((Je,lt)=>{var wt=Je.fieldName,on=Ue[lt],br=Je.getter,Vr=Je.getterContext,Ps=Ue[lt+Ae.length],ki=Je.setter,ir=Je.setterContext;Me[wt]={read:Sr=>on.fromWireType(br(Vr,Sr)),write:(Sr,ap)=>{var ro=[];ki(ir,Sr,Ps.toWireType(ro,ap)),Sn(ro)}}}),[{name:z.name,fromWireType:Je=>{var lt={};for(var wt in Me)lt[wt]=Me[wt].read(Je);return me(Je),lt},toWireType:(Je,lt)=>{for(var wt in Me)if(!(wt in lt))throw new TypeError(`Missing field: "${wt}"`);var on=le();for(wt in Me)Me[wt].write(on,lt[wt]);return Je!==null&&Je.push(me,on),on},argPackAdvance:xt,readValueFromPointer:Hn,destructorFunction:me}]})},In=(W,z,le,me,Ae)=>{},Cn=()=>{for(var W=new Array(256),z=0;z<256;++z)W[z]=String.fromCharCode(z);kt=W},kt,Ht=W=>{for(var z="",le=W;U[le];)z+=kt[U[le++]];return z},an,ct=W=>{throw new an(W)};function yn(W,z){let le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var me=z.name;if(W||ct(`type "${me}" must have a positive integer typeid pointer`),nn.hasOwnProperty(W)){if(le.ignoreDuplicateRegistrations)return;ct(`Cannot register type '${me}' twice`)}if(nn[W]=z,delete sn[W],Qt.hasOwnProperty(W)){var Ae=Qt[W];delete Qt[W],Ae.forEach(Ne=>Ne())}}function qt(W,z){let le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return yn(W,z,le)}var xt=8,Tn=(W,z,le,me)=>{z=Ht(z),qt(W,{name:z,fromWireType:function(Ae){return!!Ae},toWireType:function(Ae,Ne){return Ne?le:me},argPackAdvance:xt,readValueFromPointer:function(Ae){return this.fromWireType(U[Ae])},destructorFunction:null})},Fr=W=>({count:W.count,deleteScheduled:W.deleteScheduled,preservePointerOnDelete:W.preservePointerOnDelete,ptr:W.ptr,ptrType:W.ptrType,smartPtr:W.smartPtr,smartPtrType:W.smartPtrType}),hn=W=>{function z(le){return le.$$.ptrType.registeredClass.name}ct(z(W)+" instance already deleted")},Or=!1,qn=W=>{},Dr=W=>{W.smartPtr?W.smartPtrType.rawDestructor(W.smartPtr):W.ptrType.registeredClass.rawDestructor(W.ptr)},ca=W=>{W.count.value-=1;var z=W.count.value===0;z&&Dr(W)},la=(W,z,le)=>{if(z===le)return W;if(le.baseClass===void 0)return null;var me=la(W,z,le.baseClass);return me===null?null:le.downcast(me)},ua={},Na={},Js=(W,z)=>{for(z===void 0&&ct("ptr should not be undefined");W.baseClass;)z=W.upcast(z),W=W.baseClass;return z},Ro=(W,z)=>(z=Js(W,z),Na[z]),_o=(W,z)=>{(!z.ptrType||!z.ptr)&&un("makeClassHandle requires ptr and ptrType");var le=!!z.smartPtrType,me=!!z.smartPtr;return le!==me&&un("Both smartPtrType and smartPtr must be specified"),z.count={value:1},to(Object.create(W,{$$:{value:z,writable:!0}}))};function Bo(W){var z=this.getPointee(W);if(!z)return this.destructor(W),null;var le=Ro(this.registeredClass,z);if(le!==void 0){if(le.$$.count.value===0)return le.$$.ptr=z,le.$$.smartPtr=W,le.clone();var me=le.clone();return this.destructor(W),me}function Ae(){return this.isSmartPointer?_o(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:z,smartPtrType:this,smartPtr:W}):_o(this.registeredClass.instancePrototype,{ptrType:this,ptr:W})}var Ne=this.registeredClass.getActualType(z),Ue=ua[Ne];if(!Ue)return Ae.call(this);var Me;this.isConst?Me=Ue.constPointerType:Me=Ue.pointerType;var Je=la(z,this.registeredClass,Me.registeredClass);return Je===null?Ae.call(this):this.isSmartPointer?_o(Me.registeredClass.instancePrototype,{ptrType:Me,ptr:Je,smartPtrType:this,smartPtr:W}):_o(Me.registeredClass.instancePrototype,{ptrType:Me,ptr:Je})}var to=W=>typeof FinalizationRegistry>"u"?(to=z=>z,W):(Or=new FinalizationRegistry(z=>{ca(z.$$)}),to=z=>{var le=z.$$,me=!!le.smartPtr;if(me){var Ae={$$:le};Or.register(z,Ae,z)}return z},qn=z=>Or.unregister(z),to(W)),Ml=()=>{Object.assign(fa.prototype,{isAliasOf(W){if(!(this instanceof fa)||!(W instanceof fa))return!1;var z=this.$$.ptrType.registeredClass,le=this.$$.ptr;W.$$=W.$$;for(var me=W.$$.ptrType.registeredClass,Ae=W.$$.ptr;z.baseClass;)le=z.upcast(le),z=z.baseClass;for(;me.baseClass;)Ae=me.upcast(Ae),me=me.baseClass;return z===me&&le===Ae},clone(){if(this.$$.ptr||hn(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var W=to(Object.create(Object.getPrototypeOf(this),{$$:{value:Fr(this.$$)}}));return W.$$.count.value+=1,W.$$.deleteScheduled=!1,W},delete(){this.$$.ptr||hn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ct("Object already scheduled for deletion"),qn(this),ca(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||hn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ct("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}})};function fa(){}var ka=(W,z)=>Object.defineProperty(z,"name",{value:W}),dc=(W,z,le)=>{if(W[z].overloadTable===void 0){var me=W[z];W[z]=function(){for(var Ae=arguments.length,Ne=new Array(Ae),Ue=0;Ue<Ae;Ue++)Ne[Ue]=arguments[Ue];return W[z].overloadTable.hasOwnProperty(Ne.length)||ct(`Function '${le}' called with an invalid number of arguments (${Ne.length}) - expects one of (${W[z].overloadTable})!`),W[z].overloadTable[Ne.length].apply(this,Ne)},W[z].overloadTable=[],W[z].overloadTable[me.argCount]=me}},ni=(W,z,le)=>{s.hasOwnProperty(W)?((le===void 0||s[W].overloadTable!==void 0&&s[W].overloadTable[le]!==void 0)&&ct(`Cannot register public name '${W}' twice`),dc(s,W,W),s.hasOwnProperty(le)&&ct(`Cannot register multiple overloads of a function with the same number of arguments (${le})!`),s[W].overloadTable[le]=z):(s[W]=z,le!==void 0&&(s[W].numArguments=le))},Dl=48,Ll=57,Ul=W=>{W=W.replace(/[^a-zA-Z0-9_]/g,"$");var z=W.charCodeAt(0);return z>=Dl&&z<=Ll?`_${W}`:W};function X0(W,z,le,me,Ae,Ne,Ue,Me){this.name=W,this.constructor=z,this.instancePrototype=le,this.rawDestructor=me,this.baseClass=Ae,this.getActualType=Ne,this.upcast=Ue,this.downcast=Me,this.pureVirtualFunctions=[]}var Uu=(W,z,le)=>{for(;z!==le;)z.upcast||ct(`Expected null or instance of ${le.name}, got an instance of ${z.name}`),W=z.upcast(W),z=z.baseClass;return W};function iE(W,z){if(z===null)return this.isReference&&ct(`null is not a valid ${this.name}`),0;z.$$||ct(`Cannot pass "${Kb(z)}" as a ${this.name}`),z.$$.ptr||ct(`Cannot pass deleted object as a pointer of type ${this.name}`);var le=z.$$.ptrType.registeredClass,me=Uu(z.$$.ptr,le,this.registeredClass);return me}function ep(W,z){var le;if(z===null)return this.isReference&&ct(`null is not a valid ${this.name}`),this.isSmartPointer?(le=this.rawConstructor(),W!==null&&W.push(this.rawDestructor,le),le):0;(!z||!z.$$)&&ct(`Cannot pass "${Kb(z)}" as a ${this.name}`),z.$$.ptr||ct(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&z.$$.ptrType.isConst&&ct(`Cannot convert argument of type ${z.$$.smartPtrType?z.$$.smartPtrType.name:z.$$.ptrType.name} to parameter type ${this.name}`);var me=z.$$.ptrType.registeredClass;if(le=Uu(z.$$.ptr,me,this.registeredClass),this.isSmartPointer)switch(z.$$.smartPtr===void 0&&ct("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:z.$$.smartPtrType===this?le=z.$$.smartPtr:ct(`Cannot convert argument of type ${z.$$.smartPtrType?z.$$.smartPtrType.name:z.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:le=z.$$.smartPtr;break;case 2:if(z.$$.smartPtrType===this)le=z.$$.smartPtr;else{var Ae=z.clone();le=this.rawShare(le,hc.toHandle(()=>Ae.delete())),W!==null&&W.push(this.rawDestructor,le)}break;default:ct("Unsupporting sharing policy")}return le}function jb(W,z){if(z===null)return this.isReference&&ct(`null is not a valid ${this.name}`),0;z.$$||ct(`Cannot pass "${Kb(z)}" as a ${this.name}`),z.$$.ptr||ct(`Cannot pass deleted object as a pointer of type ${this.name}`),z.$$.ptrType.isConst&&ct(`Cannot convert argument of type ${z.$$.ptrType.name} to parameter type ${this.name}`);var le=z.$$.ptrType.registeredClass,me=Uu(z.$$.ptr,le,this.registeredClass);return me}var tp=()=>{Object.assign(yh.prototype,{getPointee(W){return this.rawGetPointee&&(W=this.rawGetPointee(W)),W},destructor(W){var z;(z=this.rawDestructor)===null||z===void 0||z.call(this,W)},argPackAdvance:xt,readValueFromPointer:Hn,fromWireType:Bo})};function yh(W,z,le,me,Ae,Ne,Ue,Me,Je,lt,wt){this.name=W,this.registeredClass=z,this.isReference=le,this.isConst=me,this.isSmartPointer=Ae,this.pointeeType=Ne,this.sharingPolicy=Ue,this.rawGetPointee=Me,this.rawConstructor=Je,this.rawShare=lt,this.rawDestructor=wt,!Ae&&z.baseClass===void 0?me?(this.toWireType=iE,this.destructorFunction=null):(this.toWireType=jb,this.destructorFunction=null):this.toWireType=ep}var wh=(W,z,le)=>{s.hasOwnProperty(W)||un("Replacing nonexistent public symbol"),s[W].overloadTable!==void 0&&le!==void 0?s[W].overloadTable[le]=z:(s[W]=z,s[W].argCount=le)},aE=(W,z,le)=>{W=W.replace(/p/g,"i");var me=s["dynCall_"+W];return me(z,...le)},fm=[],Hb,dr=W=>{var z=fm[W];return z||(W>=fm.length&&(fm.length=W+1),fm[W]=z=Hb.get(W)),z},dm=function(W,z){let le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(W.includes("j"))return aE(W,z,le);var me=dr(z)(...le);return me},$4=(W,z)=>function(){for(var le=arguments.length,me=new Array(le),Ae=0;Ae<le;Ae++)me[Ae]=arguments[Ae];return dm(W,z,me)},Mo=(W,z)=>{W=Ht(W);function le(){return W.includes("j")?$4(W,z):dr(z)}var me=le();return typeof me!="function"&&ct(`unknown function pointer with signature ${W}: ${z}`),me},hm=(W,z)=>{var le=ka(z,function(me){this.name=z,this.message=me;var Ae=new Error(me).stack;Ae!==void 0&&(this.stack=this.toString()+`
`+Ae.replace(/^Error(:[^\n]*)?\n/,""))});return le.prototype=Object.create(W.prototype),le.prototype.constructor=le,le.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},le},Zf,Do=W=>{var z=O9(W),le=Ht(z);return td(z),le},np=(W,z)=>{var le=[],me={};function Ae(Ne){if(!me[Ne]&&!nn[Ne]){if(sn[Ne]){sn[Ne].forEach(Ae);return}le.push(Ne),me[Ne]=!0}}throw z.forEach(Ae),new Zf(`${W}: `+le.map(Do).join([", "]))},oE=(W,z,le,me,Ae,Ne,Ue,Me,Je,lt,wt,on,br)=>{wt=Ht(wt),Ne=Mo(Ae,Ne),Me&&(Me=Mo(Ue,Me)),lt&&(lt=Mo(Je,lt)),br=Mo(on,br);var Vr=Ul(wt);ni(Vr,function(){np(`Cannot construct ${wt} due to unbound types`,[me])}),Xt([W,z,le],me?[me]:[],Ps=>{Ps=Ps[0];var ki,ir;me?(ki=Ps.registeredClass,ir=ki.instancePrototype):ir=fa.prototype;var Sr=ka(wt,function(){if(Object.getPrototypeOf(this)!==ap)throw new an("Use 'new' to construct "+wt);if(ro.constructor_body===void 0)throw new an(wt+" has no accessible constructor");for(var op=arguments.length,xh=new Array(op),Eh=0;Eh<op;Eh++)xh[Eh]=arguments[Eh];var Qb=ro.constructor_body[xh.length];if(Qb===void 0)throw new an(`Tried to invoke ctor of ${wt} with invalid number of parameters (${xh.length}) - expected (${Object.keys(ro.constructor_body).toString()}) parameters instead!`);return Qb.apply(this,xh)}),ap=Object.create(ir,{constructor:{value:Sr}});Sr.prototype=ap;var ro=new X0(wt,Sr,ap,br,ki,Ne,Me,lt);if(ro.baseClass){var $u,SE;(SE=($u=ro.baseClass).__derivedClasses)!==null&&SE!==void 0||($u.__derivedClasses=[]),ro.baseClass.__derivedClasses.push(ro)}var e8=new yh(wt,ro,!0,!1,!1),xm=new yh(wt+"*",ro,!1,!1,!1),IE=new yh(wt+" const*",ro,!1,!0,!1);return ua[W]={pointerType:xm,constPointerType:IE},wh(Vr,Sr),[e8,xm,IE]})},Jc=(W,z)=>{for(var le=[],me=0;me<W;me++)le.push(R[z+me*4>>2]);return le};function cE(W){for(var z=1;z<W.length;++z)if(W[z]!==null&&W[z].destructorFunction===void 0)return!0;return!1}function pm(W,z,le,me,Ae,Ne){var Ue=z.length;Ue<2&&ct("argTypes array size mismatch! Must at least get return value and 'this' types!");var Me=z[1]!==null&&le!==null,Je=cE(z),lt=z[0].name!=="void",wt=Ue-2,on=new Array(wt),br=[],Vr=[],Ps=function(){Vr.length=0;var ki;br.length=Me?2:1,br[0]=Ae,Me&&(ki=z[1].toWireType(Vr,this),br[1]=ki);for(var ir=0;ir<wt;++ir)on[ir]=z[ir+2].toWireType(Vr,ir<0||arguments.length<=ir?void 0:arguments[ir]),br.push(on[ir]);var Sr=me(...br);function ap(ro){if(Je)Sn(Vr);else for(var $u=Me?1:2;$u<z.length;$u++){var SE=$u===1?ki:on[$u-2];z[$u].destructorFunction!==null&&z[$u].destructorFunction(SE)}if(lt)return z[0].fromWireType(ro)}return ap(Sr)};return ka(W,Ps)}var lE=(W,z,le,me,Ae,Ne)=>{var Ue=Jc(z,le);Ae=Mo(me,Ae),Xt([],[W],Me=>{Me=Me[0];var Je=`constructor ${Me.name}`;if(Me.registeredClass.constructor_body===void 0&&(Me.registeredClass.constructor_body=[]),Me.registeredClass.constructor_body[z-1]!==void 0)throw new an(`Cannot register multiple constructors with identical number of parameters (${z-1}) for class '${Me.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return Me.registeredClass.constructor_body[z-1]=()=>{np(`Cannot construct ${Me.name} due to unbound types`,Ue)},Xt([],Ue,lt=>(lt.splice(1,0,null),Me.registeredClass.constructor_body[z-1]=pm(Je,lt,null,Ae,Ne),[])),[]})},qb=W=>{W=W.trim();const z=W.indexOf("(");return z!==-1?W.substr(0,z):W},j4=(W,z,le,me,Ae,Ne,Ue,Me,Je,lt)=>{var wt=Jc(le,me);z=Ht(z),z=qb(z),Ne=Mo(Ae,Ne),Xt([],[W],on=>{on=on[0];var br=`${on.name}.${z}`;z.startsWith("@@")&&(z=Symbol[z.substring(2)]),Me&&on.registeredClass.pureVirtualFunctions.push(z);function Vr(){np(`Cannot call ${br} due to unbound types`,wt)}var Ps=on.registeredClass.instancePrototype,ki=Ps[z];return ki===void 0||ki.overloadTable===void 0&&ki.className!==on.name&&ki.argCount===le-2?(Vr.argCount=le-2,Vr.className=on.name,Ps[z]=Vr):(dc(Ps,z,br),Ps[z].overloadTable[le-2]=Vr),Xt([],wt,ir=>{var Sr=pm(br,ir,on,Ne,Ue);return Ps[z].overloadTable===void 0?(Sr.argCount=le-2,Ps[z]=Sr):Ps[z].overloadTable[le-2]=Sr,[]}),[]})},Fl=[],Yc=[],gm=W=>{W>9&&--Yc[W+1]===0&&(Yc[W]=void 0,Fl.push(W))},mm=()=>Yc.length/2-5-Fl.length,H4=()=>{Yc.push(0,1,void 0,1,null,1,!0,1,!1,1),s.count_emval_handles=mm},hc={toValue:W=>(W||ct("Cannot use deleted val. handle = "+W),Yc[W]),toHandle:W=>{switch(W){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const z=Fl.pop()||Yc.length;return Yc[z]=W,Yc[z+1]=1,z}}}},uE={name:"emscripten::val",fromWireType:W=>{var z=hc.toValue(W);return gm(W),z},toWireType:(W,z)=>hc.toHandle(z),argPackAdvance:xt,readValueFromPointer:Hn,destructorFunction:null},ym=W=>qt(W,uE),fE=(W,z,le)=>{switch(z){case 1:return le?function(me){return this.fromWireType(O[me])}:function(me){return this.fromWireType(U[me])};case 2:return le?function(me){return this.fromWireType(Q[me>>1])}:function(me){return this.fromWireType(ie[me>>1])};case 4:return le?function(me){return this.fromWireType(G[me>>2])}:function(me){return this.fromWireType(R[me>>2])};default:throw new TypeError(`invalid integer width (${z}): ${W}`)}},dE=(W,z,le,me)=>{z=Ht(z);function Ae(){}Ae.values={},qt(W,{name:z,constructor:Ae,fromWireType:function(Ne){return this.constructor.values[Ne]},toWireType:(Ne,Ue)=>Ue.value,argPackAdvance:xt,readValueFromPointer:fE(z,le,me),destructorFunction:null}),ni(z,Ae)},Xf=(W,z)=>{var le=nn[W];return le===void 0&&ct(`${z} has unknown type ${Do(W)}`),le},hE=(W,z,le)=>{var me=Xf(W,"enum");z=Ht(z);var Ae=me.constructor,Ne=Object.create(me.constructor.prototype,{value:{value:le},constructor:{value:ka(`${me.name}_${z}`,function(){})}});Ae.values[le]=Ne,Ae[z]=Ne},Kb=W=>{if(W===null)return"null";var z=typeof W;return z==="object"||z==="array"||z==="function"?W.toString():""+W},ds=(W,z)=>{switch(z){case 4:return function(le){return this.fromWireType(k[le>>2])};case 8:return function(le){return this.fromWireType(b[le>>3])};default:throw new TypeError(`invalid float width (${z}): ${W}`)}},is=(W,z,le)=>{z=Ht(z),qt(W,{name:z,fromWireType:me=>me,toWireType:(me,Ae)=>Ae,argPackAdvance:xt,readValueFromPointer:ds(z,le),destructorFunction:null})},be=(W,z,le,me,Ae,Ne,Ue,Me)=>{var Je=Jc(z,le);W=Ht(W),W=qb(W),Ae=Mo(me,Ae),ni(W,function(){np(`Cannot call ${W} due to unbound types`,Je)},z-1),Xt([],Je,lt=>{var wt=[lt[0],null].concat(lt.slice(1));return wh(W,pm(W,wt,null,Ae,Ne),z-1),[]})},Oe=(W,z,le)=>{switch(z){case 1:return le?me=>O[me]:me=>U[me];case 2:return le?me=>Q[me>>1]:me=>ie[me>>1];case 4:return le?me=>G[me>>2]:me=>R[me>>2];default:throw new TypeError(`invalid integer width (${z}): ${W}`)}},rt=(W,z,le,me,Ae)=>{z=Ht(z);var Ne=wt=>wt;if(me===0){var Ue=32-8*le;Ne=wt=>wt<<Ue>>>Ue}var Me=z.includes("unsigned"),Je=(wt,on)=>{},lt;Me?lt=function(wt,on){return Je(on,this.name),on>>>0}:lt=function(wt,on){return Je(on,this.name),on},qt(W,{name:z,fromWireType:Ne,toWireType:lt,argPackAdvance:xt,readValueFromPointer:Oe(z,le,me!==0),destructorFunction:null})},Bt=(W,z,le)=>{var me=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Ae=me[z];function Ne(Ue){var Me=R[Ue>>2],Je=R[Ue+4>>2];return new Ae(O.buffer,Je,Me)}le=Ht(le),qt(W,{name:le,fromWireType:Ne,argPackAdvance:xt,readValueFromPointer:Ne},{ignoreDuplicateRegistrations:!0})},hs=Object.assign({optional:!0},uE),Kn=(W,z)=>{qt(W,hs)},As=(W,z,le,me)=>{if(!(me>0))return 0;for(var Ae=le,Ne=le+me-1,Ue=0;Ue<W.length;++Ue){var Me=W.charCodeAt(Ue);if(Me>=55296&&Me<=57343){var Je=W.charCodeAt(++Ue);Me=65536+((Me&1023)<<10)|Je&1023}if(Me<=127){if(le>=Ne)break;z[le++]=Me}else if(Me<=2047){if(le+1>=Ne)break;z[le++]=192|Me>>6,z[le++]=128|Me&63}else if(Me<=65535){if(le+2>=Ne)break;z[le++]=224|Me>>12,z[le++]=128|Me>>6&63,z[le++]=128|Me&63}else{if(le+3>=Ne)break;z[le++]=240|Me>>18,z[le++]=128|Me>>12&63,z[le++]=128|Me>>6&63,z[le++]=128|Me&63}}return z[le]=0,le-Ae},Ns=(W,z,le)=>As(W,U,z,le),Ar=W=>{for(var z=0,le=0;le<W.length;++le){var me=W.charCodeAt(le);me<=127?z++:me<=2047?z+=2:me>=55296&&me<=57343?(z+=4,++le):z+=3}return z},as=typeof TextDecoder<"u"?new TextDecoder:void 0,Ys=function(W){let z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;for(var me=z+le,Ae=z;W[Ae]&&!(Ae>=me);)++Ae;if(Ae-z>16&&W.buffer&&as)return as.decode(W.subarray(z,Ae));for(var Ne="";z<Ae;){var Ue=W[z++];if(!(Ue&128)){Ne+=String.fromCharCode(Ue);continue}var Me=W[z++]&63;if((Ue&224)==192){Ne+=String.fromCharCode((Ue&31)<<6|Me);continue}var Je=W[z++]&63;if((Ue&240)==224?Ue=(Ue&15)<<12|Me<<6|Je:Ue=(Ue&7)<<18|Me<<12|Je<<6|W[z++]&63,Ue<65536)Ne+=String.fromCharCode(Ue);else{var lt=Ue-65536;Ne+=String.fromCharCode(55296|lt>>10,56320|lt&1023)}}return Ne},Lo=(W,z)=>W?Ys(U,W,z):"",fi=(W,z)=>{z=Ht(z);var le=z==="std::string";qt(W,{name:z,fromWireType(me){var Ae=R[me>>2],Ne=me+4,Ue;if(le)for(var Me=Ne,Je=0;Je<=Ae;++Je){var lt=Ne+Je;if(Je==Ae||U[lt]==0){var wt=lt-Me,on=Lo(Me,wt);Ue===void 0?Ue=on:(Ue+="\0",Ue+=on),Me=lt+1}}else{for(var br=new Array(Ae),Je=0;Je<Ae;++Je)br[Je]=String.fromCharCode(U[Ne+Je]);Ue=br.join("")}return td(me),Ue},toWireType(me,Ae){Ae instanceof ArrayBuffer&&(Ae=new Uint8Array(Ae));var Ne,Ue=typeof Ae=="string";Ue||Ae instanceof Uint8Array||Ae instanceof Uint8ClampedArray||Ae instanceof Int8Array||ct("Cannot pass non-string to std::string"),le&&Ue?Ne=Ar(Ae):Ne=Ae.length;var Me=bh(4+Ne+1),Je=Me+4;if(R[Me>>2]=Ne,le&&Ue)Ns(Ae,Je,Ne+1);else if(Ue)for(var lt=0;lt<Ne;++lt){var wt=Ae.charCodeAt(lt);wt>255&&(td(Je),ct("String has UTF-16 code units that do not fit in 8 bits")),U[Je+lt]=wt}else for(var lt=0;lt<Ne;++lt)U[Je+lt]=Ae[lt];return me!==null&&me.push(td,Me),Me},argPackAdvance:xt,readValueFromPointer:Hn,destructorFunction(me){td(me)}})},ws=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,no=(W,z)=>{for(var le=W,me=le>>1,Ae=me+z/2;!(me>=Ae)&&ie[me];)++me;if(le=me<<1,le-W>32&&ws)return ws.decode(U.subarray(W,le));for(var Ne="",Ue=0;!(Ue>=z/2);++Ue){var Me=Q[W+Ue*2>>1];if(Me==0)break;Ne+=String.fromCharCode(Me)}return Ne},Vl=(W,z,le)=>{var me;if((me=le)!==null&&me!==void 0||(le=2147483647),le<2)return 0;le-=2;for(var Ae=z,Ne=le<W.length*2?le/2:W.length,Ue=0;Ue<Ne;++Ue){var Me=W.charCodeAt(Ue);Q[z>>1]=Me,z+=2}return Q[z>>1]=0,z-Ae},Qc=W=>W.length*2,Fu=(W,z)=>{for(var le=0,me="";!(le>=z/4);){var Ae=G[W+le*4>>2];if(Ae==0)break;if(++le,Ae>=65536){var Ne=Ae-65536;me+=String.fromCharCode(55296|Ne>>10,56320|Ne&1023)}else me+=String.fromCharCode(Ae)}return me},Gb=(W,z,le)=>{var me;if((me=le)!==null&&me!==void 0||(le=2147483647),le<4)return 0;for(var Ae=z,Ne=Ae+le-4,Ue=0;Ue<W.length;++Ue){var Me=W.charCodeAt(Ue);if(Me>=55296&&Me<=57343){var Je=W.charCodeAt(++Ue);Me=65536+((Me&1023)<<10)|Je&1023}if(G[z>>2]=Me,z+=4,z+4>Ne)break}return G[z>>2]=0,z-Ae},rp=W=>{for(var z=0,le=0;le<W.length;++le){var me=W.charCodeAt(le);me>=55296&&me<=57343&&++le,z+=4}return z},zi=(W,z,le)=>{le=Ht(le);var me,Ae,Ne,Ue;z===2?(me=no,Ae=Vl,Ue=Qc,Ne=Me=>ie[Me>>1]):z===4&&(me=Fu,Ae=Gb,Ue=rp,Ne=Me=>R[Me>>2]),qt(W,{name:le,fromWireType:Me=>{for(var Je=R[Me>>2],lt,wt=Me+4,on=0;on<=Je;++on){var br=Me+4+on*z;if(on==Je||Ne(br)==0){var Vr=br-wt,Ps=me(wt,Vr);lt===void 0?lt=Ps:(lt+="\0",lt+=Ps),wt=br+z}}return td(Me),lt},toWireType:(Me,Je)=>{typeof Je!="string"&&ct(`Cannot pass non-string to C++ string type ${le}`);var lt=Ue(Je),wt=bh(4+lt+z);return R[wt>>2]=lt/z,Ae(Je,wt+4,lt+z),Me!==null&&Me.push(td,wt),wt},argPackAdvance:xt,readValueFromPointer:Hn,destructorFunction(Me){td(Me)}})},VF=(W,z,le,me,Ae,Ne)=>{At[W]={name:Ht(z),rawConstructor:Mo(le,me),rawDestructor:Mo(Ae,Ne),fields:[]}},Zc=(W,z,le,me,Ae,Ne,Ue,Me,Je,lt)=>{At[W].fields.push({fieldName:Ht(z),getterReturnType:le,getter:Mo(me,Ae),getterContext:Ne,setterArgumentType:Ue,setter:Mo(Me,Je),setterContext:lt})},$F=(W,z)=>{z=Ht(z),qt(W,{isVoid:!0,name:z,argPackAdvance:0,fromWireType:()=>{},toWireType:(le,me)=>{}})},S9=(W,z,le)=>U.copyWithin(W,z,z+le),Vu=[],pE=(W,z,le,me)=>(W=Vu[W],z=hc.toValue(z),W(null,z,le,me)),q4={},ks=W=>{var z=q4[W];return z===void 0?Ht(W):z},ed=()=>{if(typeof globalThis=="object")return globalThis;function W(z){z.$$$embind_global$$$=z;var le=typeof $$$embind_global$$$=="object"&&z.$$$embind_global$$$==z;return le||delete z.$$$embind_global$$$,le}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&W(global)?$$$embind_global$$$=global:typeof self=="object"&&W(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},K4=W=>W===0?hc.toHandle(ed()):(W=ks(W),hc.toHandle(ed()[W])),jF=W=>{var z=Vu.length;return Vu.push(W),z},G4=(W,z)=>{for(var le=new Array(W),me=0;me<W;++me)le[me]=Xf(R[z+me*4>>2],"parameter "+me);return le},HF=Reflect.construct,qF=(W,z,le)=>{var me=[],Ae=W.toWireType(me,le);return me.length&&(R[z>>2]=hc.toHandle(me)),Ae},KF=(W,z,le)=>{var me=G4(W,z),Ae=me.shift();W--;var Ne=new Array(W),Ue=(Je,lt,wt,on)=>{for(var br=0,Vr=0;Vr<W;++Vr)Ne[Vr]=me[Vr].readValueFromPointer(on+br),br+=me[Vr].argPackAdvance;var Ps=le===1?HF(lt,Ne):lt.apply(Je,Ne);return qF(Ae,wt,Ps)},Me=`methodCaller<(${me.map(Je=>Je.name).join(", ")}) => ${Ae.name}>`;return jF(ka(Me,Ue))},I9=W=>{W>9&&(Yc[W+1]+=1)},gE=W=>{var z=hc.toValue(W);Sn(z),gm(W)},wm=(W,z)=>{W=Xf(W,"_emval_take_value");var le=W.readValueFromPointer(z);return hc.toHandle(le)},GF=(W,z,le,me)=>{var Ae=new Date().getFullYear(),Ne=new Date(Ae,0,1),Ue=new Date(Ae,6,1),Me=Ne.getTimezoneOffset(),Je=Ue.getTimezoneOffset(),lt=Math.max(Me,Je);R[W>>2]=lt*60,G[z>>2]=+(Me!=Je);var wt=Vr=>{var Ps=Vr>=0?"-":"+",ki=Math.abs(Vr),ir=String(Math.floor(ki/60)).padStart(2,"0"),Sr=String(ki%60).padStart(2,"0");return`UTC${Ps}${ir}${Sr}`},on=wt(Me),br=wt(Je);Je<Me?(Ns(on,le,17),Ns(br,me,17)):(Ns(on,me,17),Ns(br,le,17))},C9=()=>2147483648,T9=(W,z)=>Math.ceil(W/z)*z,W4=W=>{var z=D.buffer,le=(W-z.byteLength+65535)/65536|0;try{return D.grow(le),w(),1}catch{}},z4=W=>{var z=U.length;W>>>=0;var le=C9();if(W>le)return!1;for(var me=1;me<=4;me*=2){var Ae=z*(1+.2/me);Ae=Math.min(Ae,W+100663296);var Ne=Math.min(le,T9(Math.max(W,Ae),65536)),Ue=W4(Ne);if(Ue)return!0}return!1},mE={},WF=()=>d||"./this.program",sp=()=>{if(!sp.strings){var W=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",z={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:W,_:WF()};for(var le in mE)mE[le]===void 0?delete z[le]:z[le]=mE[le];var me=[];for(var le in z)me.push(`${le}=${z[le]}`);sp.strings=me}return sp.strings},J4=(W,z)=>{for(var le=0;le<W.length;++le)O[z++]=W.charCodeAt(le);O[z]=0},zF=(W,z)=>{var le=0;return sp().forEach((me,Ae)=>{var Ne=z+le;R[W+Ae*4>>2]=Ne,J4(me,Ne),le+=me.length+1}),0},N9=(W,z)=>{var le=sp();R[W>>2]=le.length;var me=0;return le.forEach(Ae=>me+=Ae.length+1),R[z>>2]=me,0},pc=W=>52;function Y4(W,z,le,me,Ae){return 70}var Wb=[null,[],[]],k9=(W,z)=>{var le=Wb[W];z===0||z===10?((W===1?S:I)(Ys(le)),le.length=0):le.push(z)},P9=(W,z,le,me)=>{for(var Ae=0,Ne=0;Ne<le;Ne++){var Ue=R[z>>2],Me=R[z+4>>2];z+=8;for(var Je=0;Je<Me;Je++)k9(W,U[Ue+Je]);Ae+=Me}return R[me>>2]=Ae,0},JF=W=>W;Nt=s.InternalError=class extends Error{constructor(W){super(W),this.name="InternalError"}},Cn(),an=s.BindingError=class extends Error{constructor(W){super(W),this.name="BindingError"}},Ml(),tp(),Zf=s.UnboundTypeError=hm(Error,"UnboundTypeError"),H4();var YF={t:ae,x:nt,a:_t,j:pt,k:$t,O:Pt,q:jt,ga:En,d:Tt,ca:An,va:Ct,ba:In,pa:Tn,ta:oE,sa:lE,E:j4,oa:ym,F:dE,n:hE,W:is,X:be,y:rt,u:Bt,ua:Kn,V:fi,P:zi,L:VF,wa:Zc,qa:$F,ja:S9,T:pE,xa:gm,ya:K4,U:KF,Y:I9,Z:gE,ra:wm,da:GF,ha:z4,ea:zF,fa:N9,ia:pc,$:Y4,S:P9,J:rV,C:bE,Q:XF,R:aV,r:Z4,b:$l,D:wE,la:Xr,c:tV,ka:sV,h:ZF,i:He,s:Ut,N:Xc,w:qr,I:xE,K:nV,z:vE,H:oV,aa:vh,_:AE,l:bm,f:eV,e:QF,g:D9,M:iV,m:We,ma:vm,p:jn,v:Ni,na:ps,B:L9,o:Pe,G:EE,A:JF},$s=mt(),O9=W=>(O9=$s.Ba)(W),td=s._free=W=>(td=s._free=$s.Ca)(W),bh=s._malloc=W=>(bh=s._malloc=$s.Ea)(W),R9=W=>(R9=$s.Fa)(W),wr=(W,z)=>(wr=$s.Ga)(W,z),yE=W=>(yE=$s.Ha)(W),Q4=W=>(Q4=$s.Ia)(W),nd=()=>(nd=$s.Ja)(),zb=W=>(zb=$s.Ka)(W),_9=W=>(_9=$s.La)(W),B9=(W,z,le)=>(B9=$s.Ma)(W,z,le);s.dynCall_viijii=(W,z,le,me,Ae,Ne,Ue)=>(s.dynCall_viijii=$s.Na)(W,z,le,me,Ae,Ne,Ue);var M9=s.dynCall_jiii=(W,z,le,me)=>(M9=s.dynCall_jiii=$s.Oa)(W,z,le,me);s.dynCall_jiji=(W,z,le,me,Ae)=>(s.dynCall_jiji=$s.Pa)(W,z,le,me,Ae);var ip=s.dynCall_jiiii=(W,z,le,me,Ae)=>(ip=s.dynCall_jiiii=$s.Qa)(W,z,le,me,Ae);s.dynCall_iiiiij=(W,z,le,me,Ae,Ne,Ue)=>(s.dynCall_iiiiij=$s.Ra)(W,z,le,me,Ae,Ne,Ue),s.dynCall_iiiiijj=(W,z,le,me,Ae,Ne,Ue,Me,Je)=>(s.dynCall_iiiiijj=$s.Sa)(W,z,le,me,Ae,Ne,Ue,Me,Je),s.dynCall_iiiiiijj=(W,z,le,me,Ae,Ne,Ue,Me,Je,lt)=>(s.dynCall_iiiiiijj=$s.Ta)(W,z,le,me,Ae,Ne,Ue,Me,Je,lt);function $l(W,z){var le=oe();try{return dr(W)(z)}catch(me){if(de(le),me!==me+0)throw me;wr(1,0)}}function D9(W,z,le,me){var Ae=oe();try{dr(W)(z,le,me)}catch(Ne){if(de(Ae),Ne!==Ne+0)throw Ne;wr(1,0)}}function QF(W,z,le){var me=oe();try{dr(W)(z,le)}catch(Ae){if(de(me),Ae!==Ae+0)throw Ae;wr(1,0)}}function ZF(W,z,le,me){var Ae=oe();try{return dr(W)(z,le,me)}catch(Ne){if(de(Ae),Ne!==Ne+0)throw Ne;wr(1,0)}}function XF(W,z,le,me,Ae){var Ne=oe();try{return dr(W)(z,le,me,Ae)}catch(Ue){if(de(Ne),Ue!==Ue+0)throw Ue;wr(1,0)}}function eV(W,z){var le=oe();try{dr(W)(z)}catch(me){if(de(le),me!==me+0)throw me;wr(1,0)}}function tV(W,z,le){var me=oe();try{return dr(W)(z,le)}catch(Ae){if(de(me),Ae!==Ae+0)throw Ae;wr(1,0)}}function bm(W){var z=oe();try{dr(W)()}catch(le){if(de(z),le!==le+0)throw le;wr(1,0)}}function Pe(W,z,le,me,Ae,Ne,Ue,Me,Je,lt,wt){var on=oe();try{dr(W)(z,le,me,Ae,Ne,Ue,Me,Je,lt,wt)}catch(br){if(de(on),br!==br+0)throw br;wr(1,0)}}function We(W,z,le,me,Ae){var Ne=oe();try{dr(W)(z,le,me,Ae)}catch(Ue){if(de(Ne),Ue!==Ue+0)throw Ue;wr(1,0)}}function He(W,z,le,me,Ae){var Ne=oe();try{return dr(W)(z,le,me,Ae)}catch(Ue){if(de(Ne),Ue!==Ue+0)throw Ue;wr(1,0)}}function Ut(W,z,le,me,Ae,Ne){var Ue=oe();try{return dr(W)(z,le,me,Ae,Ne)}catch(Me){if(de(Ue),Me!==Me+0)throw Me;wr(1,0)}}function jn(W,z,le,me,Ae,Ne){var Ue=oe();try{dr(W)(z,le,me,Ae,Ne)}catch(Me){if(de(Ue),Me!==Me+0)throw Me;wr(1,0)}}function qr(W,z,le,me,Ae,Ne,Ue){var Me=oe();try{return dr(W)(z,le,me,Ae,Ne,Ue)}catch(Je){if(de(Me),Je!==Je+0)throw Je;wr(1,0)}}function Ni(W,z,le,me,Ae,Ne,Ue,Me){var Je=oe();try{dr(W)(z,le,me,Ae,Ne,Ue,Me)}catch(lt){if(de(Je),lt!==lt+0)throw lt;wr(1,0)}}function ps(W,z,le,me,Ae,Ne,Ue,Me,Je){var lt=oe();try{dr(W)(z,le,me,Ae,Ne,Ue,Me,Je)}catch(wt){if(de(lt),wt!==wt+0)throw wt;wr(1,0)}}function Z4(W){var z=oe();try{return dr(W)()}catch(le){if(de(z),le!==le+0)throw le;wr(1,0)}}function nV(W,z,le,me,Ae,Ne,Ue,Me,Je){var lt=oe();try{return dr(W)(z,le,me,Ae,Ne,Ue,Me,Je)}catch(wt){if(de(lt),wt!==wt+0)throw wt;wr(1,0)}}function Xc(W,z,le,me,Ae,Ne,Ue){var Me=oe();try{return dr(W)(z,le,me,Ae,Ne,Ue)}catch(Je){if(de(Me),Je!==Je+0)throw Je;wr(1,0)}}function wE(W,z,le,me){var Ae=oe();try{return dr(W)(z,le,me)}catch(Ne){if(de(Ae),Ne!==Ne+0)throw Ne;wr(1,0)}}function rV(W,z,le,me){var Ae=oe();try{return dr(W)(z,le,me)}catch(Ne){if(de(Ae),Ne!==Ne+0)throw Ne;wr(1,0)}}function vm(W,z,le,me,Ae,Ne,Ue,Me){var Je=oe();try{dr(W)(z,le,me,Ae,Ne,Ue,Me)}catch(lt){if(de(Je),lt!==lt+0)throw lt;wr(1,0)}}function bE(W,z,le,me,Ae,Ne){var Ue=oe();try{return dr(W)(z,le,me,Ae,Ne)}catch(Me){if(de(Ue),Me!==Me+0)throw Me;wr(1,0)}}function vE(W,z,le,me,Ae,Ne,Ue,Me,Je,lt){var wt=oe();try{return dr(W)(z,le,me,Ae,Ne,Ue,Me,Je,lt)}catch(on){if(de(wt),on!==on+0)throw on;wr(1,0)}}function Xr(W,z,le){var me=oe();try{return dr(W)(z,le)}catch(Ae){if(de(me),Ae!==Ae+0)throw Ae;wr(1,0)}}function sV(W,z,le,me,Ae){var Ne=oe();try{return dr(W)(z,le,me,Ae)}catch(Ue){if(de(Ne),Ue!==Ue+0)throw Ue;wr(1,0)}}function L9(W,z,le,me,Ae,Ne,Ue,Me,Je,lt){var wt=oe();try{dr(W)(z,le,me,Ae,Ne,Ue,Me,Je,lt)}catch(on){if(de(wt),on!==on+0)throw on;wr(1,0)}}function xE(W,z,le,me,Ae,Ne,Ue,Me){var Je=oe();try{return dr(W)(z,le,me,Ae,Ne,Ue,Me)}catch(lt){if(de(Je),lt!==lt+0)throw lt;wr(1,0)}}function iV(W,z,le,me,Ae,Ne,Ue){var Me=oe();try{dr(W)(z,le,me,Ae,Ne,Ue)}catch(Je){if(de(Me),Je!==Je+0)throw Je;wr(1,0)}}function aV(W,z,le,me){var Ae=oe();try{return dr(W)(z,le,me)}catch(Ne){if(de(Ae),Ne!==Ne+0)throw Ne;wr(1,0)}}function oV(W,z,le,me,Ae,Ne,Ue,Me,Je,lt,wt,on){var br=oe();try{return dr(W)(z,le,me,Ae,Ne,Ue,Me,Je,lt,wt,on)}catch(Vr){if(de(br),Vr!==Vr+0)throw Vr;wr(1,0)}}function EE(W,z,le,me,Ae,Ne,Ue,Me,Je,lt,wt,on,br,Vr,Ps,ki){var ir=oe();try{dr(W)(z,le,me,Ae,Ne,Ue,Me,Je,lt,wt,on,br,Vr,Ps,ki)}catch(Sr){if(de(ir),Sr!==Sr+0)throw Sr;wr(1,0)}}function vh(W,z,le,me){var Ae=oe();try{return M9(W,z,le,me)}catch(Ne){if(de(Ae),Ne!==Ne+0)throw Ne;wr(1,0)}}function AE(W,z,le,me,Ae){var Ne=oe();try{return ip(W,z,le,me,Ae)}catch(Ue){if(de(Ne),Ue!==Ue+0)throw Ue;wr(1,0)}}var Jb,Yb;te=function W(){Jb||X4(),Jb||(te=W)};function X4(){if($>0||!Yb&&(Yb=1,T(),$>0))return;function W(){var z;Jb||(Jb=1,s.calledRun=1,!V&&(E(),i(s),(z=s.onRuntimeInitialized)===null||z===void 0||z.call(s),P()))}s.setStatus?(s.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>s.setStatus(""),1),W()},1)):W()}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();return X4(),r=o,r}})();function ZNt(t){return Ane(Sne,t)}async function XNt(t,e){return YNt(Sne,t,e)}async function ekt(t,e){return QNt(Sne,t,e)}const _Ne=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["databar_limited","DataBarLimited"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],tkt=[..._Ne,["unknown"]].map(t=>t[0]),AY=new Map(_Ne);function nkt(t){for(const[e,n]of AY)if(t===n)return e;return"unknown"}function rkt(t){if(BNe(t))return{width:t.naturalWidth,height:t.naturalHeight};if(MNe(t))return{width:t.width.baseVal.value,height:t.height.baseVal.value};if(DNe(t))return{width:t.videoWidth,height:t.videoHeight};if(UNe(t))return{width:t.width,height:t.height};if(VNe(t))return{width:t.displayWidth,height:t.displayHeight};if(LNe(t))return{width:t.width,height:t.height};if(FNe(t))return{width:t.width,height:t.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function BNe(t){var e,n;try{return t instanceof((n=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:n.HTMLImageElement)}catch{return!1}}function MNe(t){var e,n;try{return t instanceof((n=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:n.SVGImageElement)}catch{return!1}}function DNe(t){var e,n;try{return t instanceof((n=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:n.HTMLVideoElement)}catch{return!1}}function LNe(t){var e,n;try{return t instanceof((n=(e=t==null?void 0:t.ownerDocument)==null?void 0:e.defaultView)==null?void 0:n.HTMLCanvasElement)}catch{return!1}}function UNe(t){try{return t instanceof ImageBitmap||Object.prototype.toString.call(t)==="[object ImageBitmap]"}catch{return!1}}function FNe(t){try{return t instanceof OffscreenCanvas||Object.prototype.toString.call(t)==="[object OffscreenCanvas]"}catch{return!1}}function VNe(t){try{return t instanceof VideoFrame||Object.prototype.toString.call(t)==="[object VideoFrame]"}catch{return!1}}function $Ne(t){try{return t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"}catch{return!1}}function skt(t){try{return t instanceof ImageData||Object.prototype.toString.call(t)==="[object ImageData]"}catch{return!1}}function ikt(t,e){try{const n=new OffscreenCanvas(t,e);if(n.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return n;throw void 0}catch{const n=document.createElement("canvas");return n.width=t,n.height=e,n}}async function jNe(t){if(BNe(t)&&!await lkt(t))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(MNe(t)&&!await ukt(t))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(VNe(t)&&fkt(t))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(DNe(t)&&(t.readyState===0||t.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(UNe(t)&&hkt(t))throw new DOMException("The image source is detached.","InvalidStateError");const{width:e,height:n}=rkt(t);if(e===0||n===0)return null;const r=ikt(e,n).getContext("2d");r.drawImage(t,0,0);try{return r.getImageData(0,0,e,n)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function akt(t){let e;try{if(globalThis.createImageBitmap)e=await createImageBitmap(t);else if(globalThis.Image){e=new Image;let n="";try{n=URL.createObjectURL(t),e.src=n,await e.decode()}finally{URL.revokeObjectURL(n)}}else return t}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await jNe(e)}function okt(t){const{width:e,height:n}=t;if(e===0||n===0)return null;const r=t.getContext("2d");try{return r.getImageData(0,0,e,n)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function ckt(t){if($Ne(t))return await akt(t);if(skt(t)){if(dkt(t))throw new DOMException("The image data has been detached.","InvalidStateError");return t}return LNe(t)||FNe(t)?okt(t):await jNe(t)}async function lkt(t){try{return await t.decode(),!0}catch{return!1}}async function ukt(t){var e;try{return await((e=t.decode)==null?void 0:e.call(t)),!0}catch{return!1}}function fkt(t){return t.format===null}function dkt(t){return t.data.buffer.byteLength===0}function hkt(t){return t.width===0&&t.height===0}function M0e(t,e){return pkt(t)?new DOMException(`${e}: ${t.message}`,t.name):gkt(t)?new t.constructor(`${e}: ${t.message}`):new Error(`${e}: ${t}`)}function pkt(t){return t instanceof DOMException||Object.prototype.toString.call(t)==="[object DOMException]"}function gkt(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}var iB;class SY extends EventTarget{constructor(e={}){var n;super(),FNt(this,iB);try{const r=(n=e==null?void 0:e.formats)==null?void 0:n.filter(s=>s!=="unknown");if((r==null?void 0:r.length)===0)throw new TypeError("Hint option provided, but is empty.");for(const s of r??[])if(!AY.has(s))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${s}' is not a valid enum value of type BarcodeFormat.`);VNt(this,iB,r??[]),ZNt().then(s=>{this.dispatchEvent(new CustomEvent("load",{detail:s}))}).catch(s=>{this.dispatchEvent(new CustomEvent("error",{detail:s}))})}catch(r){throw M0e(r,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return tkt.filter(e=>e!=="unknown")}async detect(e){try{const n=await ckt(e);if(n===null)return[];let r;const s={tryHarder:!0,returnCodabarStartEnd:!0,formats:UNt(this,iB).map(i=>AY.get(i))};try{$Ne(n)?r=await XNt(n,s):r=await ekt(n,s)}catch(i){throw console.error(i),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return r.map(i=>{const{topLeft:{x:a,y:o},topRight:{x:c,y:l},bottomLeft:{x:u,y:f},bottomRight:{x:d,y:p}}=i.position,g=Math.min(a,c,u,d),m=Math.min(o,l,f,p),v=Math.max(a,c,u,d),A=Math.max(o,l,f,p);return{boundingBox:new DOMRectReadOnly(g,m,v-g,A-m),rawValue:i.text,format:nkt(i.format),cornerPoints:[{x:a,y:o},{x:c,y:l},{x:d,y:p},{x:u,y:f}]}})}catch(n){throw M0e(n,"Failed to execute 'detect' on 'BarcodeDetector'")}}}iB=new WeakMap;globalThis.BarcodeDetector!=null||(globalThis.BarcodeDetector=SY);function mkt(t){const{onClick:e,disabled:n,className:r}=t,s={cursor:n?"default":"pointer",stroke:n?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...t.style};return bn.createElement("svg",{onClick:n?void 0:e,className:r,style:s,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},bn.createElement("path",{d:"M3 3L6.00007 6.00007M21 21L19.8455 19.8221M9.74194 4.06811C9.83646 4.04279 9.93334 4.02428 10.0319 4.01299C10.1453 4 10.2683 4 10.5141 4H13.5327C13.7786 4 13.9015 4 14.015 4.01299C14.6068 4.08078 15.1375 4.40882 15.4628 4.90782C15.5252 5.00345 15.5802 5.11345 15.6901 5.33333C15.7451 5.44329 15.7726 5.49827 15.8037 5.54609C15.9664 5.79559 16.2318 5.95961 16.5277 5.9935C16.5844 6 16.6459 6 16.7688 6H17.8234C18.9435 6 19.5036 6 19.9314 6.21799C20.3077 6.40973 20.6137 6.71569 20.8055 7.09202C21.0234 7.51984 21.0234 8.0799 21.0234 9.2V15.3496M19.8455 19.8221C19.4278 20 18.8702 20 17.8234 20H6.22344C5.10333 20 4.54328 20 4.11546 19.782C3.73913 19.5903 3.43317 19.2843 3.24142 18.908C3.02344 18.4802 3.02344 17.9201 3.02344 16.8V9.2C3.02344 8.0799 3.02344 7.51984 3.24142 7.09202C3.43317 6.71569 3.73913 6.40973 4.11546 6.21799C4.51385 6.015 5.0269 6.00103 6.00007 6.00007M19.8455 19.8221L14.5619 14.5619M14.5619 14.5619C14.0349 15.4243 13.0847 16 12 16C10.3431 16 9 14.6569 9 13C9 11.9153 9.57566 10.9651 10.4381 10.4381M14.5619 14.5619L10.4381 10.4381M10.4381 10.4381L6.00007 6.00007"}))}function ykt(t){const{onClick:e,disabled:n,className:r}=t,s={cursor:n?"default":"pointer",stroke:n?"grey":"yellow",strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:1.5,...t.style};return bn.createElement("svg",{onClick:n?void 0:e,className:r,style:s,width:"28px",height:"28px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},bn.createElement("path",{d:"M12 16C13.6569 16 15 14.6569 15 13C15 11.3431 13.6569 10 12 10C10.3431 10 9 11.3431 9 13C9 14.6569 10.3431 16 12 16Z"}),bn.createElement("path",{d:"M3 16.8V9.2C3 8.0799 3 7.51984 3.21799 7.09202C3.40973 6.71569 3.71569 6.40973 4.09202 6.21799C4.51984 6 5.0799 6 6.2 6H7.25464C7.37758 6 7.43905 6 7.49576 5.9935C7.79166 5.95961 8.05705 5.79559 8.21969 5.54609C8.25086 5.49827 8.27836 5.44328 8.33333 5.33333C8.44329 5.11342 8.49827 5.00346 8.56062 4.90782C8.8859 4.40882 9.41668 4.08078 10.0085 4.01299C10.1219 4 10.2448 4 10.4907 4H13.5093C13.7552 4 13.8781 4 13.9915 4.01299C14.5833 4.08078 15.1141 4.40882 15.4394 4.90782C15.5017 5.00345 15.5567 5.11345 15.6667 5.33333C15.7216 5.44329 15.7491 5.49827 15.7803 5.54609C15.943 5.79559 16.2083 5.95961 16.5042 5.9935C16.561 6 16.6224 6 16.7454 6H17.8C18.9201 6 19.4802 6 19.908 6.21799C20.2843 6.40973 20.5903 6.71569 20.782 7.09202C21 7.51984 21 8.0799 21 9.2V16.8C21 17.9201 21 18.4802 20.782 18.908C20.5903 19.2843 20.2843 19.5903 19.908 19.782C19.4802 20 18.9201 20 17.8 20H6.2C5.0799 20 4.51984 20 4.09202 19.782C3.71569 19.5903 3.40973 19.2843 3.21799 18.908C3 18.4802 3 17.9201 3 16.8Z"}))}function wkt(t){const{scanning:e,startScanning:n,stopScanning:r}=t,[s,i]=F.useState(!1);function a(){i(!0),e?r():n(),setTimeout(()=>i(!1),1e3)}return bn.createElement("div",{style:{bottom:85,right:3,position:"absolute",zIndex:2,cursor:s?"default":"pointer"}},e?bn.createElement(mkt,{disabled:s,onClick:a}):bn.createElement(ykt,{disabled:s,onClick:a}))}function bkt(t){const{onClick:e,className:n,style:r}=t;return bn.createElement("svg",{onClick:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:n,style:r,xmlns:"http://www.w3.org/2000/svg"},bn.createElement("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M13.225 9l5.025-7h-7.972l-3.3 11h5.359l-2.452 8.648.75.364L20.374 9zm.438 3H8.322l2.7-9H16.3l-5.025 7h7.101l-6.7 8.953z"}))}function vkt(t){const{onClick:e,className:n,style:r}=t;return bn.createElement("svg",{onClick:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:n,style:r,xmlns:"http://www.w3.org/2000/svg"},bn.createElement("path",{strokeWidth:.2,stroke:"yellow",fill:"yellow",d:"M14.516 15.158l.714.714-4.595 6.14-.75-.364L12.337 13H6.978L8.22 8.861l.803.803L8.322 12h3.036l1.793 1.792-1.475 5.16zm5.984 4.05L4.793 3.5l.707-.707 3.492 3.492L10.278 2h7.972l-5.025 7h7.149l-3.71 4.957 4.543 4.543zM12.707 10l3.243 3.243L18.376 10zM9.795 7.088l2.079 2.079L16.3 3h-5.278z"}))}function xkt(t){const{status:e,scanning:n,torchToggle:r}=t;function s(i){r(i)}return n&&r?bn.createElement("div",{style:{bottom:35,right:3,position:"absolute",zIndex:2,cursor:"pointer"}},e?bn.createElement(vkt,{onClick:()=>s(!1)}):bn.createElement(bkt,{onClick:()=>s(!0)})):null}function Ekt(t){const{onClick:e,className:n,disabled:r=!1}=t,s={cursor:r?"default":"pointer",stroke:r?"grey":"yellow",fill:r?"grey":"yellow",...t.style};return bn.createElement("svg",{onClick:r?void 0:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:n,style:s,xmlns:"http://www.w3.org/2000/svg"},bn.createElement("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-7.46,0.5l-1.5,0c-0.645,0 -0.643,-1 -0,-1l1.5,0l-0,-1.5c-0,-0.645 1,-0.643 1,0l-0,1.5l1.5,0c0.645,0 0.643,1 -0,1l-1.5,0l-0,1.5c-0,0.645 -1,0.643 -1,0l-0,-1.5Z"}))}function Akt(t){const{onClick:e,className:n,disabled:r=!1}=t,s={cursor:r?"default":"pointer",stroke:r?"grey":"yellow",fill:r?"grey":"yellow",...t.style};return bn.createElement("svg",{onClick:r?void 0:e,width:"30px",height:"30px",viewBox:"0 0 24 24",className:n,style:s,xmlns:"http://www.w3.org/2000/svg"},bn.createElement("path",{strokeWidth:.3,d:"M16.279,17.039c-1.396,1.209 -3.216,1.941 -5.206,1.941c-4.393,0 -7.96,-3.567 -7.96,-7.96c-0,-4.393 3.567,-7.96 7.96,-7.96c4.393,0 7.96,3.567 7.96,7.96c-0,2.044 -0.772,3.909 -2.04,5.319l0.165,0.165c1.194,1.194 2.388,2.388 3.583,3.582c0.455,0.456 -0.252,1.163 -0.707,0.708l-3.755,-3.755Zm1.754,-6.019c-0,-3.841 -3.119,-6.96 -6.96,-6.96c-3.842,0 -6.96,3.119 -6.96,6.96c-0,3.841 3.118,6.96 6.96,6.96c3.841,0 6.96,-3.119 6.96,-6.96Zm-4.96,-0.5c0.645,0 0.643,1 -0,1l-4,0c-0.645,0 -0.643,-1 -0,-1l4,0Z"}))}function Skt(t){const{scanning:e,capabilities:n,onZoom:r,value:s}=t;if(!e||!r)return null;const i=(n.max-n.min)/3;return bn.createElement(F.Fragment,null,bn.createElement("div",{style:{bottom:130,right:3,position:"absolute",zIndex:2,cursor:"pointer"}},bn.createElement(Akt,{disabled:s<=n.min,onClick:function(){r(Math.max(s-i,n.min))}})),bn.createElement("div",{style:{bottom:180,right:3,position:"absolute",zIndex:2,cursor:"pointer"}},bn.createElement(Ekt,{disabled:s>=n.max,onClick:function(){r(Math.min(s+i,n.max))}})))}function Ikt(t){const{scanning:e,loading:n,capabilities:r,border:s=35,onOff:i,torch:a,zoom:o,startScanning:c,stopScanning:l}=t,u="rgba(255, 0, 0, 0.5)";return bn.createElement("div",{style:{position:"relative"}},bn.createElement("svg",{viewBox:"0 0 100 100",style:{top:0,left:0,zIndex:1,boxSizing:"border-box",border:`${s>=35?s:35}px solid rgba(0, 0, 0, 0.2)`}},n&&bn.createElement("text",{x:"50",y:"50",textAnchor:"middle",fill:"black",fontSize:"8",fontFamily:"Arial",fontWeight:"bold"},"Loading ...",bn.createElement("animate",{attributeName:"opacity",values:"0;1;0",dur:"2s",repeatCount:"indefinite"})),bn.createElement("path",{fill:"none",d:"M23,0 L0,0 L0,23",stroke:u,strokeWidth:3}),bn.createElement("path",{fill:"none",d:"M0,77 L0,100 L23,100",stroke:u,strokeWidth:3}),bn.createElement("path",{fill:"none",d:"M77,100 L100,100 L100,77",stroke:u,strokeWidth:3}),bn.createElement("path",{fill:"none",d:"M100,23 L100,0 77,0",stroke:u,strokeWidth:3})),i&&bn.createElement(wkt,{scanning:e,startScanning:c,stopScanning:l}),a&&r.torch&&bn.createElement(xkt,{scanning:e,status:a.status,torchToggle:a.toggle}),o&&r.zoom&&bn.createElement(Skt,{scanning:e,capabilities:r.zoom,value:o.value,onZoom:o.onChange}))}const Ckt={facingMode:"environment",width:{min:640,ideal:720,max:1920},height:{min:640,ideal:720,max:1080}},Tkt={audio:!0,tracker:void 0,onOff:!1,finder:!0,torch:!0,zoom:!1},Nkt={width:"100%",height:"100%",position:"relative"},kkt={top:0,left:0,width:"100%",height:"100%",display:"block",overflow:"hidden"};var Pkt=function(t){let e,n=!1;return(...r)=>(n||(e=t(r),n=!0),e)}(()=>{const t=lNt(window);switch(t.browser){case"chrome":vNt(window,t);break;case"firefox":SNt(window,t);break;case"safari":NNt(window,t);break;default:throw new Error("Unsupported browser")}});const Okt="data:audio/mp3;base64,//PkZAAhghE0AKToAJra/n0FQygAAAGIkYJgmCYXBMAAGCTJz3zhCEM//z//1hz//8MMMMN08ssV6e5DDWIQreAgCvFKy8bXgIKMkUDDBgzJwIBtkRMQAocxIFdxghQGKDoEziAzQxOBOdH92i/iGi+zDCAEIX46a73HrSybZw1x3JZjXp7dSNy/P68rjcbt7p7fakMP5LVMyzCaj1pjvejYYAIDgDGzECjEAk1Jl3559HIon8hzlfPVTCvGJZzfcKSxXfyMWM88//9VKSxXdtnb9vomOuuRyiWVYbf+X8zp6fKGHIdycuWMMMMMMKSnp+6wsYc/9f/7z7rPPWHN556p6fP8MMMP///PPP/7+GHK9PT6p7f/unldP2np7YeHjweiYA4GLNAgAiI7u57n5//oc5/yfk6znOcPhwOBwggHCMpA4HA4KEyHOc5znO+hPIc5//+fqJh8XQPh90JU5xQinOf//87/zvP+ggAYuhCKHxdA+Hxd0EA4KKHA4ciB3kOXfXB/gmf8p/B96lAMKAgAADU+BujARHgwdisgHMfAUHAiceBg4ASBgZBiBIBH4ZaHOJsLhf8R+HYEciIgYSwj/+Bi7EqBh+AcBn5P6Bh4TuBmrAMBiZH7gaLEWgew//PkZFMlyek60MpYAShzqqZhm6gCUWeEUWAewEWYGN4X4GDEPwGE8S4GDoOIGAYKgIQOkz//gGARAUB+CwGxTwMAACAEgyAwdAlAxKhzAxXiZ///AxcEwAwJjDAziCAAwQgdAwRgdAsJQDAmAcGzYDwAhZIAKAcIQB4GT9TQMJ9/4Gi1Fv/AcAYUqKBAwGgNAwVBAAwGhwAwdBlAxFg1AwlgzAwNBuAkJQDBgEEDEqGECgChFgBgL//CIswYYH//+HKCpk4K0C9AaKKCAOBeMcR4X9C44BwABCgGAsGYCgTwHAcAwXAiAwSAQV///CJP9lwMBQAwAAAWGo5lVLCcaeneVhJAVGai3//ioaUEf//gaTAYGCj8BnEwfrIqDcsIQb/vmhU/8fAs0G8YGGwKST8Igj4GCATipksVzY8p//90FWJwh45AkX//4fCF9wMEgkL3uQc+gbGJ8t4MBAMBP/hEXf9FRuWBcAfIFjYzQdoLCBwh7IWVlxaX/w8oMCP/+EQT5poGB1Ir90DhiV6af/jFYBpT2BgoQyyt2M0ToBdEaZyzt8nTo3xdNDCTSd//o6F06CjooxRr4jVF/0bOKD6OMUNDRxiMUVFR0FFQPhGXRjDpr4MAEA4wIQUhYOIw//PkZE4nrg08sOx4ACQ0CopD2aAAlwTTBxQeMcwd8w8gZTAgABXwGABOkzpI0wAQAExnWfP4x8ZjKunWdZ1o1Qe6lFGKCNULORQCELAAPnRUf/GIx/0FHGfo3SdZ0qP2cukXKLlRtBKFgAQwCkwJgFRYBEEATmDsLSY2QiQYCEnEra+UZo6F1aKMRr6GhoaP/+j//ov+i+hjLqBgMkYoqChoo1GqCjoY06TpRqjjLOYzRRmMuizmgdKhdF8kjTAAAPMCwGswzglgwAJfzqxmioKH/////////////+ijLOAwFmN0f/////////Q///8ZjP/9DGYyFwIDBeB3MA4AlBWidKM5spykAUAQOCakK+udGqN8VDYjTRuN//0bVX//6Kio4xQFv//nf//kKOoAEIB6SY6hcxenp85///4/DEPf/84Xvl4vF4dwtxfEJgCYQHMSgKCROp4+fn////L4tQf0unz89OecLxeL0ul09y6enzp4dIhKAQFA5hKfLu1nU7/Wr71rRKJUBQSUVt////l08GUPVWgAAYAeNKsxbQNAAhQx3/oKGMM6dZ1Yy6sajMbfKio7lNcv0sScZ47lNcw32ekVFMP9fp/f+mklI6at6u/dBMQuW6y+C5BcgwAA//PkZEomGg1HYGe0riWsCqbEwiY0BJFJMxrCcxGgQ2VK8xxCF1wsABgQBBgQBAYAFCkYCgALkK4fJ00E5ctJN1Uxy5au3XoGcM4dSN0EYZwzhW0WCh1PZwzhnFFQxtnbO2d0Kt6CdXbruggkTEX5Rs4TEQUVsdVXaCcuWXIBQUGmwmgoAGcJiM4dSioHQdBnEY+hjcbov//jcb/43G43G/jCRibfxugdBnDqULO2duvQumztncbo4xGKKNxugooxGIxQULoOgFgUMTA/jbrxiMDmETL+eLhcPThzOeeOZfL5fIcBYuXD/OHv8t//LJFxjxQYHHKDGFkZMtlmKM0RgQfbVtxFIHbQBDRuzRguEI1c9XZ/rWmrZfVU3Oc/9utNNygRQkCoHlAYstNN6DJ1IINpoINppv+WG/+g2mmnUmmmpBAoJIJhnwB5xkymn606Df/t000xhU03UXC5Ol8uFyXy+Xy/l8v5w4cLk4XAvwAYUvl/QL5fTdlKZkEEEEGumaKaX00zIOemf6CH///ywI3LKpiQ2Ef4xYWMSDyI0XwzikpL0ajVHZ3j9DGIjeuXcNfjn96/S/TUz/X/vX////5K/r+v7Jn+LlAoGZOIQIwMKBQM/yppKYURmhGZkR2b//PkZE0mHg1HEG8wyiD7mlwAyDU8nJHi5htakZmZGNiRcpkJhBmUmZYQcM1VDEEBggNDV/ASEZRYKFZIhkXKLlKmk7IVTKmZNJ5KhiqVUqpX+k7+qlVKyV/ZIqZDFDWTJlFyi5TJpKhiXKBQyZzIS5JhBoayV/AQWVpGWkcYTV5O/rIVSv8/0nkr+v6/vyR/X9f1/ZN8kf5/n99/n+f5/lTKmf9/mRP8yFUqpWSv4yJUqpX9kj/MmZNJ5K/z/P9J5P/v6yFUz/CEoywgUMqZkz/FssECIsVq0aPRrRRatFFFykQZJ2Ukl///5KjmksOaA7ALROJLDnEsLbq3GTMVrwb/0dGzmM0DlfBlHQOmrdR0MYi92TX6b/cmDHLclyUVYO/4O8sFTKFTKFf8yhUyhUyhXzKlDKlCsr/+ZUoVlSsr/+ZQqZUoZUoceMfcoZUoZUoVlfOPGcmDHKcpynKg9yXJcr3JclyXJclyYO+DXJclyfgxFZVb3KcqD/g2MxzsY72L9LubPR0dCyf5K5NNd+Tv9GXRdV0XJclyfcl/n+k8kf6SX/iVynvXf///4Mg/1OkxguYzmM5jMcLHMxwwGhgNCwXMLAcwMXTLi1MD7w7tmTdBvMmE0xQFzCwHMDAd//PkZGMpigkmAGOUvCfTgcgAuC+ITswMFzC4oMLhYMByn0xvU+p9Tr0xUxf/0xv///1PBYDhgNTFTFTGTGTGTGTGTGTGTGC4GTFMDAcLAdMVMVMULAcMBpgYDhcDGFwsYXFBikLGFwMGA4MBxgcDKfTEMUoAx2BisD+mKp5Tv1OkxkxkxkxkxkxkxkxlO0xVPJi/6nv////U7CwHTFTFTGTGTGTGU+p71PpjJipihYDpipi/6n1Ov//C4GC4GTGTGTGTFU8WBSZdLhWB//yKlotyLZFiLf8tyyRUipFSKkVGRBZQMiWC3yx//wxUGKsSvDFQGHUAL3QMsHDFIYpCYy2Bmagy6BjLgy6Bh3od58DCLAizBgRb+EQiyEQiwGBFuDAi3/////20QqSBJf/qcumv/////wMZdGXAYMu1gYy6MuBEZdBgy4BjLgy6BjLgy6BjLgy6BjLQy6DBlz2cJDLgRGXAMZdGXAYMuhMZcCIy6sJGaoGMuppwNRl3WBjLgy63wiEWAwIt/+EQi0IhFsDCLAi0GBFkGBFgMJCqaqYAgAYIhBBvwf7kwcqRq7V3IctacvlN6NxqgooxRRuNRiijEZjMGRuMvz9FGozQ+1X2qe1T1S//+VhaWAtKwtML//PkZEIkbgcaAHc1xCJrjeAAtfuUAtLAWf///mWePH95ZFgsyssvM88+jzO6K+z7OM48sH+WDiweZx5YOK+zxWLGJWsa6xadAv02fTZLSpsFpvLSga0tMgWgUgWmwgUmyWl8tMgWWmLSoFJsoFlpSwsmyBg4HhEdgwHAYPBwGDgeBg8HwMHg4DB4PBgOAwcOwMHLwDn5lAwcDgiDgYDwMHA/4MB3//+EQeDAdwiDwYLPhEWQYLODBYERZBgt8Ii34GLBaB5pfAZ0FvEAQ/UfwxULlx+IXx+8f5CELH8fxKhAIDFoHBEDRc3////gwHgaRXgMHYMB2EU/gwZ/gYbw3gY3QbgYNgbgYiAbgwN3/+EQbBEG4MBuDAbAwG4RBtAwbg2////+B9B6F//////////hEdD//////////8DRahEQGCInMNg3LBElgNjDciCwG/lgNiwGxWG///mG4bf/+WA3Kw3KyIMNw2Kw3MNg3MNg3MNiIMiQ2OK0xMiA3KyJLAEZgRARmBEDEYFwBBgEgEeomowol5YAJKwCDAIAJ8sAE+gGBgCJYAQUZ/13LubMu5dyiYOAhKwEFGf9AOoz/g4CFAIol/lgAjysAgsAElYBP////lgJksBM//lgRUxF//PkZGApggsIAHt2wiNLoggAqCz8RFSwIqYioipkjEjHCCSN/+WJg5iYOYmPK5krmTmZk5mZ8sTJYmf8yJiNiIisi/ywRmRkZkZGZGRmRERkREZERGRERkREZERGxEf///hETIMEyBiZEyBiZEzwiJgDEwU4DV2gQGFOBgmP8GAiAwRAiBgIgYCIGAi/4MBHAwRgjAwRgjwMEQIgMcgY8DBGCMDBGCMDEyJn///+BiYQIBlObj4eYLIwsjAOBGFkYBoEQ84eULIw88LIA88PKHnw8sPKFkeHlANAiAaFUDAiMYPIHmDzBZBhZB///8GBOA1sH/Awni7AwnhPCITwYE/CKzBgt8Ig8GA4Ig6EQdww4Yb+F1sIgtwYCwGAsAwWAsBgLAYCwDBYCwDBaHUDF+VEDKgC2BgtBaDAWgYLQW////gYLAWQMFgLAMFoLcGAt////4RMABmBSj4NgwMOGHBsHhdcLrwbB4XXC6+F14YcLrww4Ng8MOGHBsHww4Ng8AUC4AoMQMC4fgw3wutV4QIsAgFYIBWCCVgHeVgHeWABCwAIVgH+YBwB5aRAstKgV6Ba1oMg9avtUVN/qdLWciD/cqD3Jg6DFPuTB/////lYAn//mC8C+YLwL5gvgvGC//PkZFEpLgMKYXt2xB5LogAArbdc+C8VgvlYL/mC8C+YLwL5YBfMNgNkwXixDWoHPMc4VUxVA2TBeDZPYXzXl815fK14sLxYXvK1//NeXzXl815fMtdDLSw3UsMtLCstMtLDLSwsFhWWlgt//8sFhW6f/////+WF7zXl8sL5ry+Vrxry+WF/wMLwX4MC+EQv/AwvBfAxsjYAyqpKA0lpLAwvBfBgXv///4RA2DANAYGgNgYGgNgYGwN+EQvf/BgXwYF//8DC+F4Dd6NgGBf4AgFwbB0MMF1wuuDYMBsGwusDYOBsHA2Dvg2DQuuDYOhdcMMF14YYDGYDEGwfhhgbB0MN///4RBaEQWgZByoYRWYMFvwiDsGwaF1gbB34GDwdC64XW/w1aKxDVgatir4YcLrQbBwNg7////////////+ESfgZPyff/////////4MFmBvvMAERZ8CC5adNj02E2S0qbCBSBZaYtN///oFlpU2QMXIFAYuQK9AtAo7IxLTpsIFJs/5aZRxQawaxGfIg9CsrI+PUqkWdOHp7ODsOl6cOHZ4dsulfLI9/8BAAgMBACsBLACVgBjoAWAE5OTM6WDAR0zodMdHCsJLASWAjzCQgsBJhASWAjysI8wkJMICU//PkZFkeqgcaYDd1th6DogAAqCuIxQwtDA5MdMULgyY6YqnXqdep5TpMdMVRNRL/UT9AN6jCiSjKAZRNRhAMomgFQDfCIJwYCQiCAiCMGAkGAgDBJUA3eVAMEgj////8SrDFIYqh5g8kPMHkDzB5OFkYeYPJ+HlDzB5+AYVQDibCyIPLLEZIsjIliWS0WywWyyWuWCyWJaLZbLJYDHgLAItFvy3///4eYPKBlQTh5QYEODBb//hhoNg7/C62DYPFUKwKsVgNWBq8VkVcVkVUVYrH//hGff/8Iz8GT7//////wiX4ML3gwvgwvf4ML3gZeqoHVGyBl4vgZfL2F1oNg4Lrg2DcLrg2DQw0Lrhh8Lr4YcMNBsGhdcGBcMOGGAFGAGMQsF1guuGG4XXV/4uQXOLmF1kL/8lCXkuSk4O8/FzHzuP0hIucf/CIFAMCgFPgYFAKAwCgGBQCgGHYO4GBVM4GgQI4RCMEQKQOtQjUI1CNcI14MqDKwDIAGQDzh5wsjDyw8uHmDzYeUPN+DEYRRhFEIowYgDQgIhWDApgwKAwKQYFAYFQMKkYDOxHAzsRgMKBUGBX/h5v+Hm4ecPNh5A8wBwjhZHhZAHlDzBZAFkAeQPKHnCyILIAsih5QsgDz//PkZLQgIgsMAFp1xCGLogAAA2rkB5w8oeYLIQ8kPMHkCyGHnAMKoGmAgFkUPMHmDYAtfHPHNkr/JYl8c8lCWHPHMkqSo5onMAkBDnfJX//8IgDBgBhEdAaxSQMHUGAEIgAV4risCcipBOMVRVBO////hEvAxsAwvf////8MPDDww4XWC64XXDDww4YcMPC6wYb/wYGgiGwMplMDYhTCIaCIaBga/////8GA+EQdgYPB4MB4GDwdhEH8Ig8Ig8GA6EQcEQf8DBxlBjoAweDuFwgCQXiL//iLiKCKCL4XCiKRFwEgoRT4iqpMQU1FMy4xMDCqqqqqqqr////xuDd8fv/DVwrArEIg6EQdhEHAYPBwMB+ERYBi0WAwWAZ0FoGLYOB+JfgZ0FoGdBaDBYbn+WHm9xW7/Nzzc83PLDzc8reWlA7S0oHamx//6BflpU2C0qbBaf/8yk/ysn+VkMhTKQrKVk8yE8rIVkKyYsAn/5WC+YICmCApWCGTkxtKMcVWlgFMEBTBAX////0C0C0C/////////LTFpvTZLTlpv/0Ci0xaYtOgWmymyWkAxcWmTZTYTY8tMmygUWmLTIFpsFpv9NnywLmLCx2RgWmQKTZ98UjnzZ1/++D4M6/////3//PkZOgjIg8IAFcbxCaTogAAoCuIzfJ8vfJ8Wcs5fBnD5//++L5f////////6nCKv//+o0o0FUYwqDNGCwgUMKC0VVGkVv//4Yf8LrxVCriqDVoasDVuKsNWw1bisBqwVkVkVX//gy/4YYMMGGhhgwwNg4LrhdcLrAYWGAA0zBsH4Ng3C6/////4MAoGBQIDAKBgUCAwCgYEAsDAoEAwKBAYBYMAoGBQIBgUCYGBQIBgUCwiBAYBYMAoRAgRAoGBBMBooCAYFAkIgTEUxFv/EWxFxFhFoi0LhQuFiLCL/EWqTEFNRTMuMTAwqqqq//////8TWJriV/hERAwRgYiEYGIhGBmIRgYiEYMEQMEcDMSiA1GYwMR+UDMTkA7KIgMRGIGGM0SIrRGjRlhEV4jxov8rR/5YRFhEdQSViCsR5iRJWIKxPlgQYgSViSsR5WJMQJLC78IiKERF4REeERGEREERHwMRGOBmIRhERhERAwRAYiEQGIhGBmIRAajkgG5TEEREDBHwYIwYI4REXCIV/4MCmDArgwKAYUO/gYVCkGBUGBTgYUCsGBUIhUDCoUCIVBgVBgVBgUhEKQMKhUDCoUBgVAwoFAYFcGBQDI6oA5+qQiFAMjBUGBXCyEPIFkOH//PkZPMj6gr6AFdVwifkBdwAoC2Ilh5/8PPh5Qsih5IeUA0TAZrE8PP////wMRiIIqID8piAxEIwMxCMDEQjCIj//BiIDRo8Iogii/4MKwYVhEoESkDEiIGJEgYlfBgmDBIMEAYgSBiBIREAwSERH/8I7wPfuCO4I7v/8GBvAw3Bv/////gwN34RBuBg2BuBg2BuBg2BuEQbhEG+EQbAwG4MBtwiDaDAbhEGwMBuDAbAwG4GDYG8DBsDcDBuNwDRWDcIg2AwbA34RBv///CINvCINgMRIN/////wiG4DDeG+TEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq/zB4OLAP8rBxWDisHlYOKxb5WLTFgsMWiw18LDOnjPxZoxadDOgsLAtLAbKymVhsrDZWG/LAb8w2GywGysNlgNFgNGFwuBQuWnTZLToFFpisLJsFp0Cy0voFAQLFZkMCAQwIBCsC/5WBCwBCwBCwBCsCeVgUwIBCwBDEwEMCAQrAhgUClgCFgTlgCGJgJ5gQTGJwKWAKYFApgQTGBQL5kY0HMjQYnAhWJvKwIWAIVgQrApYAhWBPBgECIEBgE/8IgXhECQiBAMCkcDEwEwMCAQGAQIhoIhsGBsIhvgwN//PkZN4irgr2AAOVqiUThegAnCtMgwNwiG/8IhuDA1hENhENgYbKYHb2IBhoNhENAwN////8IhsDKZS////8IhuBhspgc0KQRDWEQ3///CNf4GAIMDAwgAwAAwhAwAwYAIgwiHBgAMAYGAAGHv///CIBqBqESDEIgRYGoGHBiDEIgGoGgMAYgxgwgxCIETwYFYMCoMCuDApBgU8DCoU//gY3G//wYFOBhUKBEKQYFfBgV8IhSEQoBkYK8IhT/wMKhXBgUCIU4RCoRCvgYVCsDCp3A1SqAYFAiFP////gY3G1TEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVgwCAwCBEC///////8IgUIgWEQIBgUCAwTQMCAQDAoEhECAYFIwGaRMBotWAasdwH/KqBmhFgaKI4GRgKVpjCBTCBPMJHNMFMIFKwnlgJ5hUxhUwGWlpAMuMuWLTFpvQKQLQKLTIFJsoFIFFZb/8woQwoT///MIF8rC+WAphAphAppgpYClgsmwBC6bHoFFpUCi0wGXFguWCwFLgUsgX6BZaVNj0Ci03//+EQKEQKEQLCIFAxMBcDAgFAwIBQYBODAKBgUCAYEAuDAKBgUCAYFAgRAngwCgwCwiBIRAmE//PkZN4iogj2AFdVxiUrhewAhOkwQIBgQ0gbOI4GRhOBiYCgYEAv////CIFAyMBQYBf///CIF8IgUDAgFBgEAwIRwMCCcDEwFAwIBf///CIEQGMDGEXCKBpCIDCEQDCAsYInDFQMMAuYSoTQMVfBlf//+DKfBgAiGDAQMIMIgCIQYADAEGAgwP////8ItgNu2/8DAAAiABgHhECBgQGEQARA8GAeEQIMABECEQIMAwYBBgCDAARA4GAAgYACDAARAwiAgwDhED4RABEBCIGBgDoH2dgZwCBgAP//BhX/+DCiTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqF1ww////////hdeGGDDBhwjeF102E2fTYAowMLjE0zTDfyyMYjEDJTwMLSwFi0/gQLoFIFpsegWmyBQsWlQL9ApNgtIWn8tMgX6BaBX+WmQL9Nn02f9NktIgUgWmwWl9Avy06bCBSbJaUtImyWkQKLTIFgYWoFFpAKFwMLzZgwAwvLTIFlpU2fQLQK///4Yf4YaF1sLrg2DAuuDYNDDQw4NgwLrhh4XXC64Ng3C60MNwbB4XWC64YcMODYPCJYDlMQBlwRLg2DOF1v/////PkZM0eKgz0AE+UuCnLFfAAk3Fsg2DAYX/ww//4YaGGDDhdbDDACFwMuXA2DADlygusDYOBsGhhv//wNU/CKQusF1oXX+F1wuuGGC6wXWDDBdbC6wXXhHv//4AHIFgC0BZAA4Ba4FkADwFsC3AtQAOcC0BYAtgAcAA9+BYAsgW4FvgWOABwC1oq+it4RT0VVG0VFGkVywo1/RWU4U59TlFb1GvRX////QK9Nj/9AtNn02fTY9NhNlAr/QK//TYTZLSJsIFemx///oF/5aZNj02U2C0yBaBfoFAS6bKBfoFVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQiA8GAO/4RAf//////wYA4GAO+EQHAwB4GDoB4GA4HQRB0BhlDIBpEAcBgPDIBgPAeDAHIFAYuLTpspsJsFpi0haRApAtAstIYKClgF/ysF/ysE/ysF//LAJ6plTlYC1ZUypmqtWVK1VqyplSFgBaqqcwAAVIqcrEBAAKmMBERCQhwD5iICIQEyABMAABBVGXF4gIA4DLAAWAEQgLVSsBaq1ZUv+YKClgELAJ////5YBP//LAL5WC+Vgn+WAX/LT+gW//PkZMIhLgrsAFt1yiD7FiB6A9qwmwViybCbCbCBSBabCBSBabPpsegWmwWn9ApApApNgCGBmEwWlLSpsf////hEHgYOB3////4GDkiBxMHhEdgYOB4GDwcBg4HW23gooFYHd/+BnAz8O8Vv//FaBm4rBWh38es2zbAtD1m2PVBqBrBqBrAF7AF3/5el84MkuHTgyy+dL0dRnEajMIyOn8RsZ5HGG/kbIpHIkYUiD0y2WctlZaWSwrKx6FZbxnL54ul04eLhw9Ol84dl86cOHT3Ipb5Z8qKpVx6/j0EkLctVTEFNRTMuMTAwgWQLQAHgLf/////4Fn+EQESEcIgInCIRW9TkrCzH0YIjjWtI+YeCD0woLCBQwsKRWUaRVCBZFZRtRtFRTlTlThRtAr0C0C//02E2fTZQK/0Ck2f9TlFRTlTlFT/9TlFVFRFb/9ThThynIQbWkAREue5S11rKdlkDEVABh61ExYPU+tOD4MQgcn4iwigivxFRFoXDcRQLhoiwioXCeAkFBcNiL8RURQBIKEVEWiLBcKIqIpEXC4QReIoIpCIKAQMxFAFAsIuIr/4YYLr//ww4XWBgwC64XX/hhgw3hhwuv8MNhhguvhdcAUYgaYTAAoWDDg2DQbBg//PkZPYe6gzuADd1uDKsBhBAe89cYYdGjtDT2hDmlD2leaOv9oX0OX/0NNLplNf8ewakNWGrTfTRpphNJtfaeh7T1/tStdtTpqN532lpX/1/kmQ5eaf2hoaV9paGleJAvd0rer2pWu1ar2vk56vVrV5Hj1Nop+/lfv5Zpkem5kX/2vtata2rq783nbvtbW6VjW6a2rq13+rO6VysV58K7tbp0ru6Vrtqa1a67tr6sau1ulYrnfa2v927Vrt21NSuN5X927/D4diAQANh4gEIfxB+IQG/D/4gDw/iGIRD+HRATEFNRTMuMTAwqqqqqqqqqqqqqqqqqiIEK/ititFX///8VcVuK38VsVhXBOQTpq/qm8QCAcBmIxgdfFZCHECpxFBFAuFEUC4cLhsRTEVEUDVoDQD+KrFYirFX+KwKoVgVUVUVeKwGrhWRWBViqFYDV4rMViKyGroauBg/A0YThVgNAEVQqw1fisis4quKxxWYrAatxWIqoqg1dFYxVxWIrAavAaAArIrAqoqhWYrIqvxWMVYrARCADhcKoVYavDVgqhV4qorIrHFWKuKxFViscVUVYasAaAfFY/4YcMNhdfwuuGGC64YfDDA2DwusANygbBwAxhAECwNg8MOF1hD4//PkZOkc4g7yBjd1sDNkDhgqYwtcYoUyiQ0NCkxQ0NCQkSIbGKIyRGEo5mUaNEhGKEHMmaGhI0UokORvMmZmZSZSiMZQkRnKKZkzRoSNCQpQ0NEZoaNFJkhh3KOUJEhIcoSJCQkIzlDlEjMDMyMpQ0JCQzNCRGaNCRISEZoZihoaIwlEHKNGiMzFEjRmSIwlHMyZmcyiGyMxRyhIkIxRSZokSEYGBkiRojAPESNGjQxvKHMmMoSKTJCQkIwlFKLDYWGhoZhYWAAUGBsAwsMDYUAcK4XDPhQVwwLAH/DfgHC6TEFNRaqqBgjwYI//wYI/8GCL///+DBFhERgwRcIiPAzGYgMRKIDcskBgjAxEIwYI4GiRwNEjhFH4MRwYjA0aOEUf8Io/BiLgxGEUYRRQij/BiKDEYMR+DBGBiMRQiIgYIwiIwYIgiIgMRGIDUSjhEReEREBiIRAwR/wYI/8IiP4MEcGCIIiOERH8GCIIiMIiIIiODBHBgjBgjwiIoREcIiOEREDBFCKiAxHJcIiMGCMGCLwYI8IiPhERgwRAwRAYjEUIiIGCP/AxGIgiIsGCL//4REYMEXhERBERhExhExAzyAZiEWDBGERGeKsVsVRVFcVwTnFcVxVgnYqipFUV//PkZPkcfgzeAFaVxDgUBgAgatvIYrgnYqgnQJyK4riqK4rwTsVor4rQAjABAgnQritFSKoqQTsE5C1haxfF7F4XQtULSFqC1i4LwWkXIWkXRdF+LwqAnME4iqCdwToVuK+HAERWAkAlgJB0OB3Doc8OYc8VCsVgIB3DuHAERUAkAkHMOBwOAIisO4dwEAEAEg6AkAl4CeHA4AkKhXioBIOiv8OB3F+LgWkXxeF8XouxcF0XBeF8XBdF8XhdAdouC8AEsXYWsXOKsVBU/FaKmK/FTxXFbFUVPiv/8VfxXitVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVAXX/8MN/wwwYf//DDBh4Yf/+DYODDfCIFAwKBQiaANFgUDAgFAwIBcADwFuBY/At8C1wLfgAdAtwLGBawLcC3AsgWeBYwLX4XW8LrBhgiFgMlhYLrhh4XWhdb8MOGGhdcMP4YaF1gw8LrwuvhhoYYLrYXWDDBdcGwfC60MN/ww8GwZ4XXC64GZQsF1wbBnDD4XXg2DcLrBdaDYPhhgusF1uGGC64YfhhoNg0LrQwwYcMNC62F1/g2DYXW4XXC6+GH8DTIW4YeB/wR/wjwR+DP/y06bJaRAtAtAtAs//PkZNwY2grqBFW1xDhTRegABLBstL6BRaVAstN5aYtN/psIFf5aQtIgWgUWk8tImyWkQL9Avy0qbKbKbJaf02f/0CkCy05adAsC3K7+mx5aVAv0C/TZ8tOmymwB2pspsFpPLSlpy0qbCBSBXlpk2E2E2C0paUtP6Bfpslp0CkCy0ibJaZAosWQLLTJsemwgUmz6BZaYtOgUWmLTpsJsoFJslpPLT+mwmz//6Bfpsf6BSBSbCBXoFeWk9NhNhAr0Cy0/+WnTZ8tJ/oFf6bP+myWn//8tMmz/lpf//////8sPTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVBgJwiCYMBP//gwE//////wiCAMEgkIggIqIDKpUCIIgwE8IzA4j+EYhGAZMIyDJA5gGRhGcIyDIhEQiIGAgwIRDwiAGAAwYMHBghGAZMGRCMhGYRgGRA5gIyDIwZPBk/wZIRmEY/gyOBxIMgIzCMgcTgwRBgjwYJBgngwTwYJhEQBiBGERMIrwOouAxAgGCQYIhERhEQDBGDBAREgwTCIgGCQYJgwSDBHwiI4MEAwSBiRHCIkGCYGJEQiI/Bgn4REYREeBiBIH6XhERhETwogoy04mpZibFmJuWYmx8n//PkZN4ZrgrkAFZUyDcjofgAA9qc0HafZ8HwNrjaG3xtjaDtJwTo+D55Ow7fxNRNSyLPlqJsAr/lmA/FmWYm5acTQVgTkVQTnBOQTgVxVBOBVFWK4J3FUE7gBABOwToVQTsVhUFcVRXBOhUBORWiuKkVYrCqK+KoqgnQrAnEV+K8E7FQE5xWBOQToVQTsVRW8V4qRUFYVgTsVhXioKgrCqKwqAnYqCtBOhUioK+CcisK8VRUFSKnirFQVBVFcE6FcVoJwKoqCrFXFUE7gnAqiuCcQTsE7xU8VP8VYrgnYrCuTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqn3/l/J/8vHL5f/BhwCETgGpIDOATgEIOFoDcHzgEIDgC+pG7eve1S/6tat7rXupDXSStWoIpGS4TSMQNIySMwpIyAaRkkZ8GJGdBtbwYkZ63tCKRkoIpGWDEjLCKRmEkjOvsEUjJOsIpGa6bOrgxIzsEkjIGJGYUkZVKCKRmqoDkgEjMJJGSYMSMAikZJ3qhp0dq9ru3X1I36FujPbXuxwKbr//waABfg0AC6DUDUDXBqBoAmQawJiGrhqDUGoN//PkZL8USgKcAAblrroTgfQAbhtQAag1QawaYNIAuQa12Lv9si7F2NnXa2Vsi7i/DZl2tlL9l+vL8tlUTUTUTUYQDIBlGUAyifqJKJqJ+p5Mf/U7TETEU7CxkxVO1PKdqeU8u4vq2ddnrsbM2Zs/tl9s67V2NlbIu5sgaA1Q14ExAmAaA0BrDVDXhpgTPDQGuBMA0gTKGgCYgTHDQGrDUGgNcNQaw1hoAmcNIaRIAtALVEgC1gteI8FpBaBIAtcRwkAWgFpBaILVBaIkAWgRwjhIiPEeDXwa/4NUGr+DRwaKBgX/8IhP//wiF8GBMGBP/wYEhEKEQmEQuDAoGFTAwLgwLhG/4MvCM8GSDJCNwZQOXg2DwbB8MPDDhhuGGBsHhh8Lrf4MCQYFCIUGJgiE8GBQMIFhELDDhdaGHhdYGwaGGDDhhuDYMBsHg2D8MMGHBsH8GwYDYMhEKEQgMCeDAsIhAiFBgQIhAYFhEKDAkGBMIhYGEC4GFCBELgYUKDAuEQsGBQMKEwiEBgUGBcIhQYFwYFAwgWDAoRC8GBAYE4RCgwKEQvhEJgYUIBhQkIhAiECIUGBIMC4RCgwJCIUGBAiFgaYLwiEA5cGXCNhGBGwZAw4Ng0MPBkqNqcoqorlh//PkZP8cygrkAFI0wjo7lfAAjhq4SnPor//psoFemygWmwWm/0C0Ci05adApNn/TZQLU5RU9FRFVFdTn1OFG1Gywv/UbUa9Ff0VoFgCwBbAtQLUCzAtgAchHAN8ImAbgBvwDd4RwjQDeAN8I0ImEQEQAbwRgiQjBHhHAN0A3vgG6Ab/CIhEgG5AN6EQESAbmEYI4RABvYRoRABuYRgDehEQiAiIRABvcA3QiQDfwjwDfCICPCJCJCJ4RwiYRwjBEwDehEYRgDfCNCOEQEQEcI+BagAd4FrAscCxAswLfwLAFgC1wLNVMQU1FMy4xMDBVVVVVVVVVBlBkwO3wZAZMIz//////+DJwO0IwI0DsA7cGUI34Rn4RgMuEZgywZQjAZP/hGAcmDKEYDIB28GQGQGXhGgcgRoMgRoHYBywZAZYMmBygyQYFCIUDChQYE4MCgaYJ/gwKEQsGBAiEBgXAwgQLrhdcGwcGHBsGA2Dgw4YYGwZC6/hdYMMF14YcLrYYcMPDDhdYGweF1oYb4MCwYEwYEgwJBgTCIQGBIRC/BgQDCBcIhAMKFhEKDAsGBQYFAwgTgwKDAoMCQiEgwIBhAnCIUGBQiFwiEBicIhAiFhEIgIoBooGieDPA+4GeDPCP//PkZOobXgrkAEY0jjazieQgBKKIBGgyBGhGhGgyAdoMmEaDIB2gyhGwZYMsI0GSDIEaDKB2QOWEaDKB2hGgygcoHYBygdkDtgygcngyAyhG4MgMgRgRmDJCNBkA7QjAZIRoRoMuByhGgyAyAyhGwZYHKByAcgMgRoHIEbCNCNA7fCNA7AZAO0GSEYEaDLA7cDthGgyAyAyQjAOwGUIyDKEYEaEYEYEaEbA5AZQZAZAZIMgRkGXBlBkCMgyAyQZYMngcmEb8GUGQIyDIBywZAZOEZhGBGwO2EbwjcI3hGYMqTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqquDqz8GMDQIvBj///+DGDEGAMAifBj8IuEThFCIEQGPCLwiQYBFCKESDCETBhhGAZGEZ4MjgcSEY4GoRQigxCIEQGPCKBiBrgxwiBEwMIRAY4MQNMIkImDEGIRYMIRYRAYhFBjwYwNQYgwBgBh4GAMQiwYgxA0gahFBgBjgYBFhFhFCKEWBgEWEUGEIgMQYQMYRAMQigxhFBh4GkIgRIRYRAY4RIMQYgYhFA18IoMQYQihFhEgwhFCIDEGIRQieBiEUIoRQYhEwYDAFwGrBog0waAaQawacGsGiDQp9MZMVT3piJjJjK//PkZOYZBgjoaUJQ0DprofQgbhq0dep71PqeU69TpMdMVT6n1OlPKdJjpiKdFZkxlPKdJiJj+mKp/0xFPBoAmYaw0BpwJhDSBMQ1BqAmIEzDSGgNXDRDRhp+GsNMNAEyAmYagJkBMA1BpDXAmECZhoDXhqAmYawJjgTICZBrDSGsNAExDVDQGqGgNHDWBMIaQ0BrAmcCYgTHAmIEzDWGgNYaOBMw0BqDSBMYaA04aA1hqwJhw0ATKGqBM8NYEz4aQJkGoNMNIag1+GsCY+BMQJlDVw0cCYfDXw1ho4aQ0gTCTEFNRTMuMTAwqqoD37wjuhHf/////hGf////hHf/gycEZwRn4MnYMncIzsGTwOdOA507A507hGeEZ8GTuDJ4Rn4HPn4Mn4RnhGcDJwM3YM3gzdBm6DNwR3QjvA927Bm//Bm7Bm/Bm8GbgZvBm4GboR3gzeEd+DN8GbvBm6EZ+Bzp4Mn4HOnBGfA588IzsDnTgZPCM8Iz+EZ/CM4DnTgOdPBk8Iz4RJwGTidBi7AycTgiT4RJ8GE6ESdhEngZPJwGTieDCcESfwYToMJ3AycTwiTsDJ5OhEnwibwYb+ETdwibwibvCJuwYb/4RN/Btf/jYGyNv8bHLUtSzE0/LQBW//PkZPQcHgjQAFKVrjfDmgAge1eMLITcshNy1LX8si0LUTQtCyLQTUteWQmvLItSz4mgmnTJops0umEymDSPsnR9HwfB8k7Pvn0fAvwtcLXF/F+L4vQtQWuFoC0BaReF7AeBfwtcXBdF4XheFwXAtAui9C1haRdi6LwvirgnUE6FcVBVisKgrCvioK+KoqiqAhh3AQFXhwVYrFYCWHMOioVAI4dFWHPDgCAdDgdDmHcBIBEO+HRWAiKsBMO4dFQCAdATw6HBWHBWAgHBUHMOf/gICsOCoV4qw7+KxWHA6KhVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVC11Fz1+NP+/Xkqpr9OfuhQ6lZNWf+XsZc/si+KNoOj/Ntai9j7IISgZAklTqQhjToNTeQoreRdaSDODWvYAVFaWWkQmVuZPP8bRUzq896vc+XS6mm5gnnW7JLnV4z9N5XnW4k86x+uyHyxnWkmdborzraff2SvOtvljOtjd/5XRW8MivOsry/K3gUzrFPS1eFTOttTsul1+lLGdbV3c53h51mdbK7xPOr1SpnWlM63kedZnV4XPK86onnW7myrnWTmRTOqascoabXd/L+yuzS95dv1efjhl92ntYyTuIb6wuWRZFmWRa//PkZOcb/gqMACDf1LTLofggA9qc/gKRZiblqWYm3E24moSQnR9BJj6JwfBaFqWZZFoWvLUshNPxNuWn6bTZHgozRTSaNAY5oGjFQVgTkE6FUVorioK8VBXBO8VRUioAhxVioK4qAnIrYrCqKsVRVBORXBORVFcVcVwTgVBUBORUisK4rCoKwrxXFYE4FYVATjFcVhX4rcVBVFQV4rxVFSKwqCpFcV+K8VhXFYV4qivFUE4FaCdivBORUBOfBOgToE6FUVYqisKgqCtxWFbFQVxXisKgqRU4qioKuKwqCvxVBkH/4Mgf4Rg4RgfgxZBizhFYEVuDFvhFbBi3CKyEVsGLf/4MgAxaDFoGsWYMWgaxYBrFngxaDFnCKwIrAYswNas+DFgRWYGtWYMWBFZgxbgaxbgxZCKwGLIRWgxZCK2EVmDFmDFgMW4GtW8IrAYtBi3Bi0GLAYsCK0IrQit4MWeEVgRW+DFsI9cDW9AYtgxZhFaBrVgMWgxaDFvCKwIrIGtWhFaBrFuEVvBi3hFZA1i0IrYMWYMWAxaEVkGLAisCKzBizCK0DWrIRg+EYIRgQjABkHwODABkDhGDwODBgyAEYIRoRvww4YcKILYKILfhRg5htjY4OQbQ2hNAH8su//PkZP8cRgjWAFAUYjwDofQAi9pcJry1E1LUsuWvE2E0LQTcB+E2LMTctQFEEcWnFYVwTkAI4rRWFYE6BOhWwToBBAQgnIrisETANwIiAb/COEQEbgG+EcA38A3wjhGCMEeEaEeKoJwK4J2KoARBVBOIJ1FWKoJ0CcCuCdRWFcV4rioK4rAnYJ2K0V8VYr8E4xWFUVBVFQE6FXBORWFSKorxVFcVwToE5wTvBOoqwToVIJziuKwJxAQgnUVBUgnAqQCaCdxWirFaKwrRWFcE7FfFeK4rgnIrAnYrCoKoqgnAqCrip4qgnCr/////8Iu8BjvP4Ry5/8Izggc4Zw4RnD/hGcP8GThBk4eDJwgycIMnDwjOD4MnBA3eu9hF3kGO8gx3vBjvAN3jvMGO8CLvAY72DHeAbvXe+DHehF3kGO8gbvHeBF3oG713gG713vgx3oMd5BjvAi7wGO9A3eu8BjvMDd470Iu9wN3jvQY7wGO9wN3jvIRd4Bu9d6Bu9d6DHeAbvHewi7yEXecGO9BjvQN3rvIG7zykGO9A3eO9CLvYMd6EXegx3gG7x3kDd470Dd472DHewY7yDHeAKomwmhZFkAof8tCy4m5aCbcTUswFYsy0/LQTX9NBqBgJgYaY//PkZPcaTdCuAFgWlkI0DfQAe9r8Jxz6CShr8++JsArgjxNBNC0LQsyyLMsgRxallyyLIsi0LUTUtS0AVwFPia8si0LMTXiacsxNizLMTYTcsi1LMsy0E2LUsuJqJvxNyy/E1LMteWgm4mpZlkJuWRZFmWnLQTfgncVATkVcVQTsVIqQToVxWFeK4rwTmATCsCcAnQJyKoriqKwrxWiqKoqwToVRWBORWBOBVFSKgq4qAnAqAnArRVgnIJ3FYVQAgCriqK4qYqivBOsVoJwKgJ3FYVBWFfBOIqCoCcivipxUFSCd4qRV4rCvFaCc/BOhW8VxWFUVhX4r1eX/+DHgaYMOEX/CJgwwYQY8GODH/wYf4RAiQiAxCKBj4GAMYRQiwYcGEGMIoMfhECIBgEXAwCJhEA1BjhF+BhCIDEGARYGoRAYgxCLwYeESEUGMDEIoGAMAiAwBiBrCJ8GMGGEWEUGIRYMAYAxCKBiBgBqDDA1wiBEBiDAIsGIMANANMIoMAYhEBh4GMGMGARfAxBj8GAMANYRAYBFAwCIBhgYhEwNQMYGIRAMAiwNYRQi4RQYwYgahEBiBqBgESEUIqa6Z6bTBpGkmUwmkwaZpJlNCkifmkaaaBymgm0wmRPxSDTTa//PkZOYYTgboZUAQIkCEFgAAe898YTZpJtMJhNilphNdMJhMGgmemDSNJNmkaX6aNJN9MJhMc0E2mzSNJMpg0umU2mDS5oJlNJtNJnpg0DSTBoml0wmzTE8TRpGgm00mkzzRNNMJg0jQTSb/NFNdNGl02KTzRTfTPTSbTKZNLphNJpNmgmUymkwaaaTKZ/TSYTBoJr/ifptMpr9MJlNptMpg0kymumEwmf+mEwmOmkymTT5ppv80eaHTCYTHTSaNBNJtN80/0yaBoJo0k2aPTPNA0OaSaTJoplMJv9MgBAB4MBUGwbwVwUBkFAYDAU4NBoMBqhAELk//h/y1/vz6/6zMnEglwqnIsVSHBzAMMIqXiLgxS8ucoLCKl7VwipeupwYpeAxS8Z22hSl4U+qE1L2goKUva1GUJqXqwkpeAxS81IQpS8smBqXql6E1LyEVLxdEJqXoSUvAmpeJhFS8rpH3CKl6EVLxPWFKXgDUvVL1LCal4kuDFL2EVLxFlPClLyEVL2FKXhdwYpeswGpeqXkGKXqLAxS8wYpeqWk8KUvATUvQYpehJS9Bil6yoUpegipeZT2x1vN5NR2X3KrRuXjFmaS0AUCyE1BHflmWZacTYsvy05ZgAIs+WQCqJoWZ//PkZOwZ+gaYBgbm6EQMAfQAe9r8ZCbiaFkWv5ZibialoArlryyDtCSnyfR8hrE7PpNmiaIxDTGKafTJalqJoJoWQm4mnLUtSzE1LUsxNyy4mpZlqJpy14mgD8WpagKvLIEcJuWnLItBNhNhNxNgH8tSyLMTflmA/iaCaFqJqWf4mxZFmCdCvFWKwqivgnQJzFfwToAIwqgnOKgqCoK4J2KwqisKwJwKwqCqKgJwK4rYqirgnIJ2K8VhVwTmKorYrioK4JwKwrRWFQE5FUE6BOwTgV4qYqiuCdAnYqAnMVBVFUVATkVBVirioKoqCviuK8VwTjxWFfivFUVxXBOcVuKvFaKoqiuCdeEW3Bjb/gxvhFvCLYGN8GNwi3CLf8DbtuEW//CM7+DG+EW+DG8DbNgi3CLfA2zYItwY3gbZuDG8GT/Bk+DJ+DJ/hGdCM+EZwMnQZP8GT8GToRngc6dBk4IzwZOBk8GTvhGdBk+DG8Dbt8DbtgY2CLbBjYGNwi2A2zYDbN4RbhFtA2zcDbNwNu3CLaEW4RbeEW2DG8DbNwY3BjYDbNgY3A2zYItwi3CLbgbdvA27YGN/CLaDG4RbgxsDG4Rb8ItsI7oR3cGb00m0wmTT6aTZoJgUpMc0kwaa//PkZNcYqeLUAAAUHjw8DgQAe88cYTXTXNBpXiQdfLVpLJoaCSJs0TQNAbRpJpDWleaGlDmlfQ9fQ7tBZoa0IeOw3Ccq44TcHgrufDVzQNA0Om0wmDTNE0EymkymumU2mU0aSY6ZE8NFMmiaaYNDptMGn+aJpdNptNps0OmU0J50wNtMGmmEz/zQTJpppNplMJlM9M8FAYCoKAAApgqDIMACwAQbBsAMGQAQaCkGg0GgyCkGeCgNABwAAUgrwA+CoAQNAeHCAOAeAyIQHBwgDg4QYDAGgMEEOEAeA0Q4DxAHh0PEMGYMBsFQYDPgoDMGQV4NBqryAZfhGfwjMDl4Rv/wjcGT/4R/CPBH//hH4H3gzv4M7A+/gzoR4GdBnAf+DPBnwj4M7BnwivA1QIpCKcIpgaqDFgaqBogMWBqgGqgxQinA0XBi8IqEUCKBFcD7/CPwj0I+DPA/8GfBnQZ8I+EeCPwZ4R6EfhGcI0GSDIDJCNCMBkgdsIwGQDkBk4HIEZgy4RoHZwZQjcDtCMgcoRgRoRgHKDJBl4RgHIDKDIEYEaEZgyYMoRsIwGQGQIwGUGUI3A5AZMI2EaDLBlwjQZQjAjAZQoqIqqN+pypx/qNIqoqqNKNKcqchwGrCAPqN//PkZOsaCgjiBUZRnkhEBfAgw9tw+iu1RUqp2qNUNalOVG1GkV/U58sLU48sLLCiwFU4hAYA+qQQgasVhVIYQNWKwmAKpvasNoHIDm4OQHIDlGwNgbH4D+JuWQm4mhZFoJsWgm4I4TcbA2xtA5ODnGyNoHJ+NgHKDl/LMBXLUtS04mvLQteAqCaCbFoWQmha8bQ2Acg2ht8bI2RsjaGyNrjYGwNvjbByja/GxFYE4ipBOIrwTiK4J2KuK8BAK4rAnAJwKkE4FYE7FUVgEIqgIRVBO4qRXFQVBVBOMVwCcE5itBOoqAnQqCpBOIrxVBOoJ0KwJxgnQrCuKsVBXioCcCqCdAnYJyKsVYqipBOgjwiAj/8InhH4RMIkIioAC4RiJCMRP////CNk//Blkv4M6F8I9C/8GWT/8I2SwjZOEbJQZZIGWShGyYMsnwj0P///CPQ/hGyQRsn8I2SCNkgOyVkoMsnhGyQMslCNkoMsl4MsnhGyXCNk4MsmEbJ/wZZP8I2SA7JWTgyyQMiKDIieEYiAcRIihGIkIxFwZEUIxEA4iREgcRYihGIoHESIkDiJEUIxFwjEQIxEwZEWDIihGIoRiKEYiHcYJRIr9kzDmO5cIaApXE/NA0TTTKZGym/0//PkZMQWjdCsAwAWCsQ8Cfwoe89cyaXTKZACgKxsmybQFQCyPQPUbRtA9x6QAoegHKmRtClpk0RSkwaCYE/GyaaZ6ZFJTaaTCbTabTBomgmk2mxS0x0waSaTI2gcgOcT0T5MiedM9M9NCfCeGgNhMJlNJoT1MdNJhMjaNPptNGkmhtpnmgmv+KQmRSE0aaY6ZTKZTRoJg0U0aBopg0emU1/xPzTTaa5o80DRTZoJs0TRNEUhMikJs0P0x0wmkwmUymkwaKb5pppNJg0OaInhpGgmeaSbTBp9N/ptNJo0DTNAbOCkGAwGABgA4NgwAAAMAPBgAQKAyDAZgoCkFINAABWAEDAUBTAABgMBTgqACDcGAAQYDAUqLUlVt///+Bj4MIRcGH/hE//hEwY/wi8GPBj8GH8IgRcIv4RYMQi+DAIsIsIn8GHCLCJCJ/BhBgBpgwwifhFhEhF/gwCIDAGIMIMAMQYBFhFBgDH4GAMQiQNAYAwwYBECIAMIAMAAiHBgAMIAiAIg4MABgABhADAhEAGAARCBhCEQhEIMABh6EQAwIMABgCEQwMAQYD4MDCIcGACIQiHwYGDAhEOEQ4MAENB8hJD7PsnXJ0fZ98+D6LItQR3PgnZHmgPYYRopk0xj//PkZMkU/gLsKkITrkL0CfzIetvgJtNdNGkmkwCPLITf8s+WpaFmApAjgFUsyz49jSTCaGMmkyaRZlkJsWpaiagKBZlmWomh8c+CdcnROj4Pk+Akh9E6DsJ0fJ8c+OTs+idk4J2Tg+j7Pr8nB9nwfAa59k7598+D74Sk+eEkFQdDmKsOhwBEVYCeAiAmAiHcBEV4CYCIWmCHF6FqC0haRcF4XYvxfF2LwvC+FqC0xcC0C/FwLSFoF0XBfi7C0xei8LwvcLQLoWoXheC0BaIWoXBdiNiMY6cZ8RkZxnjqOojAz4zx0HUdBGozjoMw6iMjpxdi+L4uC5F/xd/haIui/bZ/+DGBp4RYMQYgw8Ivgw/CJ4RfBh/hECKBgEUGODH8InhFwY4GoMcIgRIMcInCIBrBhCIESESBp+DEGARfhEA1gxBjBj4RAYQYgxgYwiYRcIgMAiAwBjCJgYAawYYRQMQMAYhFgagYhEA0AxA1A1CJBhBgEXwMQNAihFhFAxwYAwgaYMPCJA1hEBiBrwYQiwYwiBFwYhFgxgawihFCLA0gYAwCKESBoBpCJ4MIRcGOEVB9ALR8BJj7/PonB9HyEoJwfZ9E4Dt5OeTnlqJtxNAH7nwfHPonJ8E759E6PoJI//PkZOAWKgjoZUAQYka0Ffgge9VcfZOCdE7J0To+Cc8JWTo+D7J0EqPoO0+T5PsJSfJ9n0TkJUfJOeTknPPo+z6J2Ts+ycE759/k7Pg+z5J2TonBOeTkJUTg+T5DtJ0Tvk5Pjk5DXPg+idH2HYfR9E6PgnR9k5JyfZ9cnR9cNYJSfROidE6Ps+Cdn0fB8E6DtPs+CdHwfH5OAlR8nyfB98+SdE4J0ff5OidH2TknfPkJMfYSg+Cd8+D6PsnP/JwTk++fYSQO0+D5J0fZ8HwTjn2AWDgdAL8ApALQCkO8GACwMgyAVBiAVhzwY4BeDIMgFMOh0ArDgc4BeAV4cgFsOhz/wP225HGw7wCsO4M8AqHP/+DEGQ7/8OgzgFoM4Bf4MhwO4BT4cDmHcGfDnw78GcVhUFTFXFeKoqYJ3isKuKkVgTsVoqCsKwrCoKsVQTqKorYWoXhfxeF/xdi58XOL4WmLnFYVQToE4FXiuK0VwTnFQVRVFcVhU4JzFfDgdhzBnDuHfALgyDAMQZBgGQCgBUAoDAMh3BkAsDMGcGAYgxBn+HAC0ArwCwMAS5adAry0yBSBfoFBVaKqKwVUVrRXUa9FUOEqVUjV3ySPLkvkzlNlNn02E2S06pvVKWACECpW//PkZN8VDgj+zymq5krb1ewAxJvkqe1XysDVFSqlVIo2o0ispyFVoqKNIrKcqNKcKcFhSjaKiKyKhYWiv6nCnCKijajSnPorKNKcKcqcIrqNoqKNqcKNoqKNKNqNKcIqKN//orf6BSbKbKBSBXlp0CvQKTYTZ/0C/LTxFxFoigioigCLC4cRYRWItEXC4cRcI0IoFwwXCiKwjQXC8LhRFcRcRQRSFwoikRcLhxFRFguHiKRF8E7FYVhVBOgCYVRUACKKgqgE0E6ACJFYVoJ0CcgnQrAnMVwTgE6ioKoRwDdhHhG4RARgDcCMEaEYIiAbwRIRuESEcIwRwiYRwjQjBEgWoFuBa4FngWkIQQigwhEwigx/CL/4RfCKEQGP/wYiEUwYHwYGDAwYAGA4RCEQBEGB0rCNcGU4RrBlcIsGGDCESBiEWDCBhCIEWBiDAGHCKEUGEGEGMIgMAiwigxCIDADQGIRfCIEQDXgYYRfBgBoESEXwY/CJCKEQIsGIRODEGIRQYgw8IgRYMMGAGGDEDGDAIoMcDQIkGMGGBrgwCKDAIsIkDUDWDGDDA1hE4RQMQYgwBhhFBhBh4MAMYRMIoRAiAxBjhF4mhZFpxNBNy0LQTUTXhKglR9FqWpaAP5Zi//PkZNYXkgTkGEJwlkXcDfQAe9r8bCa/k5JwTriacsizBHE6CSH1w7efHLPgjuJqWnLITYTX8tRNAH/ialqJuJuWZaFkCO4m5aE7J2TonB8E559nyEnJyfB8FmJrxNxNhNS1E3LT8sxNC0E0LTlqJuWQm3E15ZiaFqWRZiaCagP5aCblkKoqCsCdioKoqwToE6FcVwAhRWBOIrCpFbgnEVRVFUVIJ2K4rAnIqioKgrcV4riuK0E4FcVQTsVxUBOoJ3FUE7itFYE7FYVRXFUVwTkVoqAnYJxBO4rReF4XYWsLWLoui4LwuC9AdsLQL0LQA9C8Lgvi6LguBahfFwXAtIvQQ4vCqKwrxX/8E5xXit4JwKzBnwj+DF+F1guvBiQYkDRIR8I/gz8Gd4R/wYsGLBi8I8DPBneDPBnwZ/8I8DP8I8B/0Gd+DPA+8I/+Ef+DOgzvwj4R/hHoM+Ee4M4D74M+Ef/A/7gfcDPBn4R7BnfCPgz4M7Bngf8DPwjwR6B/3CPwj0Gfgz+EfBnhH8GfwioRQGIBqgRUDVAYoGiBFcIoBqoMWEUA1UDRYRUIqEUA1WBooGiAaqBogRUGJwigM8I/gz+DOCPwj/Bnwj3BnBHgZ4M4I+DOhHhNCz5aiaCb//PkZM0YugrgAAASBEUEBfQAe9rclmWompZ8shNyzLMsy1LMBUAfhNxNicBJCcE5J0JpyyLMTcBVLXloCO5aCagKACiAqflqWYmvE3E3BHlmArFnxNRNC1LUBS5aFoWhZFmWR8k5CTnxz4PonZ8E5Pg+j4LUshNQH4TYtSzLMshNBNhNSyAViyE0FQE4FYVoJ0CcRUgnYqisKoJxFWAhiuKgrCtFUE7FQE5iqKgqRVFWKorwTsVxVFYE7FTFTBOxVgnAqRXBOPisK4BOK0VoriuK0E5BOxUivFcE5FYE5FQVBXFQE6FQVBVFYVxWioCcCoLovi4LoWiL0LSL+LouBaIvBahdi6LoWgEMFoC1hacXxdC14uipiqKn8VPFbiqKsVb//Bm/+EXgx4RdhFb///hE1/8GLP//CKwIrQjoGa/wPewZqEdYM1wZqDNAetgzWEd8GagzYM2DN4M1wjoI7Bm+DNhHcD3rA9awZuEdwZvCOwjsGaA964M1A978I7hHQR0DNge98I6hHYR1wZrBmwPWgPWwZsI7wjqB63COvgzQR3BmwZsGaget8D3rCOgZoGa4R1gzYM0EdwZsI6CO+DN4R1wZsD3oGaBmwjqEdAzXCO/4R0DNAzYR0WgI8TQT//PkZL4XFgTcAE6Tekf8EfQAe9t8YTXiagKwCsJuWXLMTUtC1LMTT8TYTUJP+fAdomomoD8JuWoCgWoI7iaFkJqJqfZ8hrk4CSE5Pk+Cdk5PgnBOT7JwTg+uWZaiaCbcsgFAsy0LPlmJsWYmom5ZFmWpaibiaAjy15ZFkWQm5Zll+JsJqJvy1E0CThJz65OQlJ8H2TknZOT759k6J3z4PgTQTcsy0LITflmWfLUsiyLITYTcTT8syzLQsi0LMEcWZa8tSyE1LTibibFqWYI/8shNCyE1LQsy1LUTUBTLLloWXLUsiyLUtBN+JqJvy1E05Z8TcsxNeWn/LTnxydHwfZ9n1ydk4PsnHJyfR9E4JwTgnB8k4588nB9cnR8c+D7PjxV4q4r8VsVgTgE4/itFShX/xV4rirxVFWKoq4qfxX8E6xVxUBOYrCtwTvwTj/xV8E5/irBOsVuKwqRXFTFQVorCrFf/xWioKwrCtioCcxUFUVAToE4FUVxWFQVhUBO4rgnUVIJyKkVgToE4ipFUVoq4qisKsE64qCoCdxUFUVxXFUE78VxWFQV4qiuKgqiuK4CCK2KoqirBOATsE4FWK4qxVFUVhVFYE4gnIriuCcQTiK4rCoCdCtirBORUiqK2//PkZLAWsgzuADQNNkZj/fjIe9r8K/FXFUVwSE5aiaAKgmhaFpxNQkp8n3z5PsJOGsffLQsyyE1LItS1E1Af+CPLMTUTfibFmJoWQmxanzydHwTsnASknBaCalqWom5ZcsxNyc8nASsnHDt59BrhJgkpOicBKg7D7JyfZ8E5Pk+Cd8EeWXE0LQsiyLQtSyLIsi0LUTYsy0E3LITQshNiyLUsiy4I78shNy0LMVcE6ipgnArRVgncE4wTsVIrCqCcCtBOYrwTgE7iuKwqCoKwrcE7BOQTqKgqiqFpBEC1gPYD3F0X4WoLTF0Xxei6FqC0BaAtQWgXxdwtWFqC0haBW/FQVRUBOBUFcE6ioCcAnEVRX4rYrxWFUVBViuLsXgtAuC6FoBDBaYvi7F8XxexdF8XhcFyI//gx//CJBhgxhEwY/+EXwYgx8ImDH8GPhE8GPhEwigwhFwNQNQNfhE+DGDAGHCIBrhEhEBh4RQMAY/gYBFBhhEAxCIDCEUDEDHBiEUIoRQY+DCBp4McGEIgGgMcGIGMGIGIGgRQYgxCKBiBjBgDGESDADWBgEUDEIuDADWBpBiEUDEDDgYgwBgDEDQDUGIGgRAYQYAxCKBhCKEThEBgBiEUGIRQMQiQiwNAY//PkZKwWNgjoZUAQREakFfQAe9t8YMfwi4GBaFoJsWpaFlyyBHctCzE25ZiaFoAocsy1E24Sk+idk6LMTYTYTQsyyLUtCyLQTUswFYJMGuTg+CdHwErPotAFAsuJtxNCz4m4mvBHiafloWZZ8YppBqzTNI0jTNBMpg0jTTZZFqWfE3Af/xNf+WomhZ8suWZZCb8tC1LQtS14m/LQtBNhNOfR8hKCc8nHJ2EqCUE5CSHxydk6Pg+D7Ps+Sdk6LUTQTcTcTctSz4mwmha8TXlmJvyy5ZiaFl+WpZFoWZa8TQshNCz4mhalmJsWfLQsuWRactBNRNC1E1LLlly0E2PgJWfR8h2H2fJOSdnx+fXPs+T5PgNbnzz6Po+T7JwTk+z4PonROglJ84qCvxXxUirFX4q4qeCd1f8InCI/4R/CP//4RMI/CMEYI4RAR8I8IjCJ4REI/gG8ESEfCOERCP4R/+EaERCPCNCNCI4BvQjYRMHINobIOfjZBzDZG3xtja42gcw2PwcvG2Nng5+NgbY2wcn42htDYGwNrjYGwNsbX42vxscbI2gc3Bzg5Qcg2uNvjaGwNgbI2+Dl4OUbI2Qc42RsjbBy//g5eAboR4RwjQDeCP+EcI8IwBuwjwjBEBEA//PkZKoZMgrqADXt9EV8FfQAe9scG+EThEBGCMESESEbhEQjwjwjwjBHCIwiQDcCNCI/hHE0/LQBSLITf/lqWoSvk7LT8BWLMtRNAk58E7Po+CyLQTcsyyLUsi0Afi1LUTUTUtBNS05aFkWpZHzwkoSgnB9HwfQSsTYsizLQtRNRNgFf/8NcJWEmAWCdn0To+T4CUHyGtxNiyLT/lmJqJqJqWgmpZFqJsWgmwmwmwmv5ZiaibiactBNv/yyLTiaFkWZagKgCmJqWQmgmom3E0LTibAKfE0LLiuKgrYqipBO4JzFUE5BORXBOhVioKwqRWBOYJyKkE6BOIrYqCqCcxVxVFUV8E4FSCdcVgAgCuKkLTBDC6CHi+LwuRfha4uC+FpF8XQtAWgB2wtAWoXBchaBfwtQWnFSCdxVxXFUVhUFYV4rgnOK3wTiKir//1eDCsf//7/+wOYd///ei/f6lmiqGXpyOlCSRm+yP3UtDhFIzqBhwCFHAGFHABYGcAnAAMOAAYcAAw4BYKOAIROANgicAQYcABE4AAzgE4B+1wmcAwYcAK+sDOADgFLCJwAlWBnABwABnABwDWraETgEDOADgDBiRkgoJpGaP+64RSMoRSMGBiRkkwMSMlq7AxIy4//PkZJUYEgieBFw3fkL8FgAied8AROAAicA8DOATgAGHAAROAFwM4BOAGBhwADDgAGHANQUcAgicAYROAfgw4AIkbPNNNpo0TSNBNJgUs0l7lomEwmRSOaRp80zQFK4nvTInnTEGgwGwAwYmOmkyaInppJpMJg0k1+KUaaaTCb42U0mBsGiaSaNNNpo0OaKZNE0jTTSY5oGmaZpJrphM9MGkmDQTCZBzpg0OKR+mBtdMJobfTSbTfG2KSaBpGgaZomiaBomn02mOmkwmjSNPpjmmaKZNA0zSNFNCeClJkT40DTTCY5oJk0kyaJpdMppMdMdN80TR6ZTXTfNJNmimumem+aKZTKaTaaTRops0kwaZppk0+aSa6ZTKYTfTfTPTHTKa5omgmEyaJo9NmkaRp/pnmmaf6aNNMplMplMdMpv8TxMJlNplNJn9MdM1OM6hWa/EjiRiRiO/xIcSP+GgCZQ1+GvDRDV//4aP///4I8EwTwTBLwS/4AHgnBHBHgiwR4JgAgS4IwAYPA8ADg+AAAAFwfB4L4WADC2AGAGFwsFwuD2FgAcAPC+F/B8L4X/B7B4L4WwuD+AGDwXACAAC2D2AEFgfCwAAAAXB8LhcLeDwXCwPYPA+ACACD+AH4XwA//PkZJMVIgb2ejVLxkBMEgTIe898vwv4X/ACB/C4WwtgBg/gA4PA9gBeFhLRTXTRomkmP0yJ6J+mPy0NA0OvibNDQmfzTNNMjaFKNATxMiemiaRoGkmE2mkwmTRTHNBMGiaCZTSZTZomh0PaV9fX2hoX14kzSmOaCY5pJr80U0aPTfNFMps0jSNJMmiaSaTKb6aTKYNLphMpg0eaJoGkJ8aBoppMppMJg00xzTTabNFNJpNJpNpnpg0DT6bTRoppoJMWrSh/690NQ5paV5D2le/LND2hoQxDF/rzR1/r/aWhfaWleQxfXmheaevNDS0tLQ0ryGoch/X15D+vLy+0oc0ry/19DUOXuvIc0oav9oXkNX1/r3X18QCGHQGQHB8PiAPAaHgPDsBgcH+Hqv//+DJ0GNuEW4MbQY2wZO4Rn///4R34R3Qjv//8Gbv//8GbgZuwZvCO4GbsD37+Ed3A586DJ4Rn8DnToRn8GTsGT8GToRn4HOngyf4HOnBGeDJ0IzgjOCM8DnTwjOgydwOdP4RnYMncDbtwY2A27cItgNs3CLeDGwMbwY3CLaEWwRbQi3A27eDG0GN4G2bBFvA2zcItgY3A27YGN4G2bAxtA58/gc6eDJwHOnAyfCM7A588//PkZLMYngTSAFAUhEYcDfggw9V8DnzwOdOBk8IzuEZ4MnAyfgychsy7F3oE13Nl9sy7myrsL6qqOU5anCqkHqNDI3KVUTEU8GNU7U6gxyHKchyVV/Xa2Zspfds3rubK2VsjZmztk9djZi/TZV2NnXYu0vsm0yaBoDZNEbA2k0aKZNjmwbH/Nvm2bRtGyBVArD1G0bQPUevg9h6/+PRzZNkCrzZNgesegesermyPQPXzbHpNvm0PQPUPSbJs82TaHqAtj082h6DaNn8eo2DbHrHpNjj1m1zYHqNo2jYNnmwbPNgek2ja5sj0D1m0bJs80xtJlMdMCeps0U0meaaa6b5p/mmmU3zRTfNFN/pgHPzQNPmkaaaTXTKbTRoJk0zS6b/NBNdNJlNGj02aH6Z4IgAEEYJ4I+CMEQJcEUEXBOpHDX/w1Q0Q1Q1cNWGvw0Q0/hp/AmIaA0cCYhow0w1/w0hoDRhpw1w1BrgTLDXw1BrhrDQGgNQEzAmOGuGiGgNfgTHDQGoCZw1w0BrDWBMIEzDVDTDUGgNfAFwGjBrg1A1YNcGsAXAaQaABcBqg1g1QagaINYaoEyw1Bow1YaA1hoDSBMw1gTICYQJkGrDQGoNGGmGsNcNQawJkGuBM4aIa//PkZKAYngTsATQNQkKMFgDifh7AYagJkGsCZ+GkNWGiGsNAaYaOGgCYgTENQaw0Yaw1Q1Q0/hqw1BkAfmkaCb6ZTCY6bNBNLwmqGA5fzSTCb/lgwXOmMmMmTQ5pmkmUwmkymfzRTaZFJ6aNM002NrppMpg0kwKQmE2m0yKUaKaE95o9MJj9N9NJk0UymOaSaE/TabNNNmmmk2mU2aHTKZTCaNDjaTJoGimkyNvpk0TRTHTf6bTRopg001+mU0aXNBMjYNA0k2mjR5pfps0U100mUz0ym02mDRTHTaaTRpplMc0kz0ySA000mDSTKbNI002mzQTHTaYTf//NA0zQTBodNJk0UyKSaaZNJMprmkaP5oGmKUmEymUyaCbTHNBMJlN80DRNBMmkm/00mUwaZpprplNpvmiaJo80+aSa//TaY/6ZaH//wY4ReEX4RIMfwiAxBh/BhCJ/+ESDDwYcIn+EQIoMAiQYAw8IsGIGGETBj4MP4MQiAxhEAwAxAxBjBiEUIgMIMcDCDAGIMcGMDEGGBgEUDTwNfAx4MAiwiQYgwBgEUIgMIRAiQYhFwYAwBhA1CKDEIoGoGgMQi4MeDADGEQIkIgGMDCDAIoMAiQiAYwYYMQNQigwCJBiDEGAR//PkZJwV+gzoZUAQRkZsCfQAe9tcQYgx8GEGIMQiwMAY4MANAMcIoMSyE1E1/LMTUtCz5OD5PkJJz5Pk+uA/FqWRaib8TUTUTQtC05alqWYm4momgI8TYsxNCzE3LUtQFEsgFM+z6J0fB8nz+TsNcnB9BK+Tk+g7CdhJT6LTiaFqWYI7lqWoCvy05ZlnxNy0/LUshNBNvwR4moCj+Wv5ZlkJqWpalkCOE1E1LQsiyLITUBULLlqWZZlmJsWhZcsi1/4CiWpalkJqJuWvLXlkJsJpyy4mwm5ZlmJuWXLUTQteWgmgmwCsJoWfE3LMsiyLP8TTlkJuAolqJryzE1LTibCbloJuWhZFoWYmxZ8TcXIvxeC0i+FrF0B2i4L8LSL4uBaIDyCHF8XRfF6FqgiwtIuYWoXIrYqAncVvxVip8VIqCvUxPqtFbFf/4q/8V/8V/iririr8VATjxXipxWgnYq+KwqfFTFQVoq+KsVBW8VhUisKuK0VRXivFYE4FTBOhVFcVRV4riuCdCuCdCtwTiCcCqCcgnYqxWFcVIJwKsVxWisK8VxVgnArYqRWFeK0V4qgnQrgnYrfBOoqAnAq4J0CciqKviuK3BOoJyKsE4FUVoqisK2KwrAnArgBAFSK4//PkZJ0VagjyJgGtbkOkFfwAbh4AqRViuK4J0KgrCrFUVxVjOEeDQgjlcT4T40xtjaNI0uaI2QciGNJIl4kJZtCGIaSckIm6GL3TQ2zRTY2UwmjSNE0fxS02aY2BsJs0/+mzSE8TQpHTKZTaaG0aQpApZp/mmm+aHTfTCZGwNgUk0E0aRp/ilJlNJgT5MmkJ9zQNA0TQTH6ZG2mk0mk0mk3zQTKY/G3zQTHTabTBpGgmU0aKaTJpJpNJtMphNjYTfNE0emkymE2mEyaCbNBNfmkaJpdNJnpg0k0mDTTCbTaZTBp80k2aCbTfNE00yaCb6bTZoplMmmaKZTKaTJpmiaHTXNJNdMDbTab6Y6Z6ZNNMJhMJhN9NJrmim02m0ymU300aPTSa6Y//5pJpNdN/9NppxWxU4Jx/xWxU/xU4qcV/ipiuKwqxWFbioK/8VIqivFTwTkVgTkVor4JxFXxX8VcVxUFQE4FaCcwTvBOIqwToVuKwqCtFUVYqxXxWFeK0E7FQVYrwTnwTsV4rCqCcfFaCcRVFQE5gnAr4JyK4r4Jz4J0Koqip4rCvisKoJ3xWBOME7iuKgriuKgrAnAqgnArxXiqCcgnYJzFQVQTmAEIVYrwToAIYrwTiKkVQTkE5//PkZK4XGgzsADQNAkIcCfwAe898FXFTFYVxXxUFQVkzzS5oilg5TTTY2kyaJpJtNGgJ8aKaTQ2k2aCaNI0eaSYNJM/tKHEiQxfJG09MmgaSYTRppg0TRNNMJlMptMCfppNprmiaA2jQNLmmaRppk0jRFLNP9NJhMGmaQpZpJhNCkGkmE0J+mxSk0m0x02mjRTKbTCZ42EwaQpJpptNprmgaRpmim00J4mzSNM0kymkyKWmE0muaKYGwNjmgafTPNE0U0mUwJ7+mem01+J8mhSk2mjRTSb6aTCbNBM9MpjpjppMpk0E2mE2mE2mjSTfTaZ6YNFMcT1MpnprptNmim0wmE100aSaTRo9MGjzTTHTaaTfTSaNLpoFMAAFYNBQGwAvwAYM4NgqqkjaAN3d3d3etERNK5CZ/3Ctf8AaiAc/u7vaIn/+8XPv//+GDKv8W1/+AC8K4Yw+94xe940jgceOBwOcRaxGwH4EuNIjBfxazB8HhkwVjIAII/vDkjG/wAcJPeF5e98hNgSYLWMFvhZ73pX06aoehpmh01hMJtM9K3TKY9E10x+memvlIpZM9MUTCbShbUrtM+n5ophNZuXK+0wmemumMCemkmvc0Uwm/lJJlLe5oJZI0SyW6R0mE//PkZLcXlgrzECFvrEmMEfgAfh7k2aORpbTYUo9SBNsekGYNVKgqg6hrUXK4Q42DOwPWbILEzBSumEgkWJPU8S72G5wUuGDwguEKa1Q0UykS3Bn7FJNgg5qoEgpsGabBtGabZt7NrKCNgLYes1idmabBtm2bZsBRm0PQbF9mwPSPUBbMwzB6QojYM42ePTzbMwzR6TaNs1eBVNv81yDUJ2QYhJtD0m0PVe+x6T2M8HsbFwsh6B6D7HpugT2uZhO6HqZhmE7ISZhhkFNcghtmybBnnsD1Ho49ZtG2bZs5PVBc2EEepCaEHNjj1EJHq5smabZtmwbNEEPR+bJse9z2PY2T1SN0rdNJq6yXI06COvNJj9MGmkkGmUj7pI0TToNGlEsNEnCW10ymi5FtNFKpvps0kz0uW3aaTF00mTSzdNJu0KFYz1KjaGAhyoQCFGM//zFARgIUZ/oZpdCttay6M5drW1joSj6Ekk1b7J7R7aoQNlPrWBKLTTzOsGT5yYxLrtHTy2iUxEkES0HIBVD066VjGj31odPkkSjJtbWs6OIjKmlXHR9K5MTv5pdZolE10kk2lly74TFx5KTXeTGLrS6ExiucvJSSDUdXZm3NLn1rtYBCUEoRj77WOhCPc+g5//PkZJ8XPgzoAABMTrz8BfQyY9ONGxJULutaa1TE5LHxWEo+XecmMa3p0kqBCR6qOFaFUGpNJIIjqVi0ylBqJIkiSJIkmJj605EkSRJPetWAyVacmodBUVhGfrAZPF0AUrgRLNiqDU4VHo8h6HRObJJNdqlRBMFT0qdNE0WZhmay2tCuOY6oieWieianCnVSbzjd7SGhrLi6eUSeLcZTWqdML5PM50uOGJms9VqtYU6hrgrm4V0frUzTvYsiegR2FOkqUxSKdVCpmRCSkIAUZ4VPhqEKgFDU2VhUiIhUaIg0RAkTBYEjYBUbBMuCJgLAkCUBUinABgBE3/9EQqFRM0s0qzktk9ZFqqFC6RULE11JVDkd8Y1vVFOx9oUIpZ8Vnq5klkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq";var UT=t=>t instanceof Date,HNe=t=>t==null;const qNe=t=>typeof t=="object";var D0e=t=>!HNe(t)&&!Array.isArray(t)&&qNe(t)&&!UT(t),L0e=t=>HNe(t)||!qNe(t);function KNe(t,e){if(L0e(t)||L0e(e))return t===e;if(UT(t)&&UT(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const i=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const a=e[s];if(UT(i)&&UT(a)||D0e(i)&&D0e(a)||Array.isArray(i)&&Array.isArray(a)?!KNe(i,a):i!==a)return!1}}return!0}function hR(t){if(t===null)throw new Error("Canvas should always be defined when component is mounted.");const e=t.getContext("2d");if(e===null)throw new Error("Canvas 2D context should be non-null");e.clearRect(0,0,t.width,t.height)}function Rkt(t){var e;const{onScan:n,constraints:r,formats:s=["qr_code"],paused:i=!1,components:a,children:o,styles:c,classNames:l,allowMultiple:u,scanDelay:f,onError:d}=t,p=F.useRef(null),g=F.useRef(null),m=F.useRef(null),v=F.useMemo(()=>({...Ckt,...r}),[r]),A=F.useMemo(()=>({...Tkt,...a}),[a]),[S,I]=F.useState(!1),[B,D]=F.useState(!0),[V,O]=F.useState(v),U=function(){const b=F.useRef(Promise.resolve({type:"stop",data:{}})),w=F.useRef(null),N=F.useRef(null),[L,C]=F.useState({}),[T,E]=F.useState({}),P=F.useCallback(async(te,J)=>{var ee,X,j;if(!window.isSecureContext)throw new Error("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.");if(((ee=navigator==null?void 0:navigator.mediaDevices)===null||ee===void 0?void 0:ee.getUserMedia)===void 0)throw new Error("this browser has no Stream API support");Pkt();const se=await navigator.mediaDevices.getUserMedia({audio:!1,video:J});te.srcObject!==void 0?te.srcObject=se:te.mozSrcObject!==void 0?te.mozSrcObject=se:window.URL.createObjectURL?te.src=window.URL.createObjectURL(se):window.webkitURL?te.src=window.webkitURL.createObjectURL(se):te.src=se.id,await Promise.race([te.play(),new Promise(Ce=>setTimeout(Ce,3e3)).then(()=>{throw new Error("Loading camera stream timed out after 3 seconds.")})]),await new Promise(Ce=>setTimeout(Ce,500));const[ye]=se.getVideoTracks();return E(ye.getSettings()),C((j=(X=ye==null?void 0:ye.getCapabilities)===null||X===void 0?void 0:X.call(ye))!==null&&j!==void 0?j:{}),w.current=se,N.current=ye,{type:"start",data:{videoEl:te,stream:se,constraints:J}}},[]),_=F.useCallback(async(te,J)=>{te.src="",te.srcObject=null,te.load();for(const ee of J.getTracks())J.removeTrack(ee),ee.stop();return w.current=null,N.current=null,E({}),{type:"stop",data:{}}},[]),H=F.useCallback(async(te,{constraints:J,restart:ee=!1})=>{if(b.current=b.current.then(X=>{if(X.type==="start"){const{data:{videoEl:j,stream:se,constraints:ye}}=X;return ee||te!==j||J!==ye?_(j,se).then(()=>P(te,J)):X}return P(te,J)}),(await b.current).type==="stop")throw new Error("Something went wrong with the camera task queue (start task).")},[P,_]),ne=F.useCallback(async()=>{if(b.current=b.current.then(te=>{if(te.type==="stop")return te;const{data:{videoEl:J,stream:ee}}=te;return _(J,ee)}),(await b.current).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")},[_]),$=F.useCallback(async te=>{const J=N.current;if(!J)throw new Error("No active video track found.");{te.advanced&&te.advanced[0].zoom&&J.getCapabilities().torch&&await J.applyConstraints({advanced:[{torch:!1}]}),await J.applyConstraints(te);const ee=J.getCapabilities(),X=J.getSettings();C(ee),E(X)}},[]);return F.useEffect(()=>()=>{(async()=>await ne())()},[ne]),{capabilities:L,settings:T,startCamera:H,stopCamera:ne,updateConstraints:$}}(),{startScanning:Q,stopScanning:ie}=function(b){const{videoElementRef:w,onScan:N,onFound:L,retryDelay:C=100,scanDelay:T=0,formats:E=[],audio:P=!0,allowMultiple:_=!1}=b,H=F.useRef(new SY({formats:E})),ne=F.useRef(null),$=F.useRef(null);F.useEffect(()=>{H.current=new SY({formats:E})},[E]),F.useEffect(()=>{typeof window<"u"&&P&&(ne.current=new Audio(Okt))},[P]);const te=F.useCallback(J=>async ee=>{if(w.current!==null&&w.current.readyState>1){const{lastScan:X,contentBefore:j,lastScanHadContent:se}=J;if(ee-X<C)$.current=window.requestAnimationFrame(te(J));else{const ye=await H.current.detect(w.current),Ce=ye.some(ze=>!j.includes(ze.rawValue)),xe=ye.length>0;let De=J.lastOnScan;(Ce||_&&xe&&ee-De>=T)&&(P&&ne.current&&ne.current.paused&&ne.current.play().catch(ze=>console.error("Error playing the sound",ze)),De=ee,N(ye)),xe&&L(ye),!xe&&se&&L(ye);const qe={lastScan:ee,lastOnScan:De,lastScanHadContent:xe,contentBefore:Ce?ye.map(ze=>ze.rawValue):j};$.current=window.requestAnimationFrame(te(qe))}}},[w.current,N,L,C]);return{startScanning:F.useCallback(()=>{const J=performance.now(),ee={lastScan:J,lastOnScan:J,contentBefore:[],lastScanHadContent:!1};$.current=window.requestAnimationFrame(te(ee))},[te]),stopScanning:F.useCallback(()=>{$.current!==null&&(window.cancelAnimationFrame($.current),$.current=null)},[])}}({videoElementRef:p,onScan:n,onFound:b=>function(w,N,L,C){const T=L;if(T==null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas is always defined.");const E=N;if(E==null)throw new Error("onFound handler should only be called when component is mounted. Thus video element is always defined.");if(w.length===0||C===void 0)hR(T);else{const P=E.offsetWidth,_=E.offsetHeight,H=E.videoWidth,ne=E.videoHeight,$=Math.max(P/H,_/ne),te=H*$,J=ne*$,ee=te/H,X=J/ne,j=(P-te)/2,se=(_-J)/2,ye=({x:qe,y:ze})=>({x:Math.floor(qe*ee),y:Math.floor(ze*X)}),Ce=({x:qe,y:ze})=>({x:Math.floor(qe+j),y:Math.floor(ze+se)}),xe=w.map(qe=>{const{boundingBox:ze,cornerPoints:ft}=qe,{x:mt,y:Be}=Ce(ye({x:ze.x,y:ze.y})),{x:de,y:oe}=ye({x:ze.width,y:ze.height});return{...qe,cornerPoints:ft.map(fe=>Ce(ye(fe))),boundingBox:DOMRectReadOnly.fromRect({x:mt,y:Be,width:de,height:oe})}});T.width=E.offsetWidth,T.height=E.offsetHeight;const De=T.getContext("2d");if(De===null)throw new Error("onFound handler should only be called when component is mounted. Thus tracking canvas 2D context is always defined.");C(xe,De)}}(b,p.current,m.current,A.tracker),formats:s,audio:A.audio,allowMultiple:u,retryDelay:A.tracker===void 0?500:10,scanDelay:f});F.useEffect(()=>(I(!0),()=>{I(!1)}),[]),F.useEffect(()=>{S&&(ie(),Q())},[a==null?void 0:a.tracker]),F.useEffect(()=>{if(!KNe(v,V)){const b=v;r!=null&&r.deviceId&&delete b.facingMode,O(b)}},[r]);const G=F.useMemo(()=>({constraints:V,shouldStream:S&&!i}),[V,S,i]),R=async()=>{const b=p.current;if(b==null)throw new Error("Video should be defined when component is mounted.");const w=g.current;if(w==null)throw new Error("Canvas should be defined when component is mounted.");const N=w.getContext("2d");if(N==null)throw new Error("Canvas should be defined when component is mounted.");if(G.shouldStream){await U.stopCamera(),D(!1);try{await U.startCamera(b,G),b?D(!0):await U.stopCamera()}catch(L){d==null||d(L),console.error("error",L)}}else w.width=b.videoWidth,w.height=b.videoHeight,N.drawImage(b,0,0,b.videoWidth,b.videoHeight),await U.stopCamera(),D(!1)};F.useEffect(()=>{(async()=>await R())()},[G]);const k=F.useMemo(()=>G.shouldStream&&B,[G.shouldStream,B]);return F.useEffect(()=>{if(k){if(g.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus pause frame canvas is defined");if(hR(g.current),m.current===void 0)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus tracking canvas is defined");if(hR(m.current),p.current==null)throw new Error("shouldScan effect should only be triggered when component is mounted. Thus video element is defined");Q()}},[k]),bn.createElement("div",{style:{...Nkt,...c==null?void 0:c.container},className:l==null?void 0:l.container},bn.createElement("video",{ref:p,style:{...kkt,...c==null?void 0:c.video,visibility:i?"hidden":"visible"},className:l==null?void 0:l.video,autoPlay:!0,muted:!0,playsInline:!0}),bn.createElement("canvas",{ref:g,style:{display:i?"block":"none",position:"absolute",top:0,left:0,width:"100%"}}),bn.createElement("canvas",{ref:m,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}),bn.createElement("div",{style:{top:0,left:0,position:"absolute",width:"100%",height:"100%"}},A.finder&&bn.createElement(Ikt,{scanning:B,capabilities:U.capabilities,loading:!1,onOff:A.onOff,zoom:A.zoom&&U.settings.zoom?{value:U.settings.zoom,onChange:async b=>{const w={...V,advanced:[{zoom:b}]};await U.updateConstraints(w)}}:void 0,torch:A.torch?{status:(e=U.settings.torch)!==null&&e!==void 0&&e,toggle:async b=>{const w={...V,advanced:[{torch:b}]};await U.updateConstraints(w)}}:void 0,startScanning:async()=>await R(),stopScanning:async()=>{await U.stopCamera(),hR(m.current),D(!1)},border:c==null?void 0:c.finderBorder}),o))}function _kt({onQrUri:t}){const e=Nu("isMobile"),n=Vt(V4),[r,s]=F.useState(""),[i,a]=F.useState(null);F.useEffect(()=>{let c=!0;return(async()=>{var u;if(!((u=navigator.mediaDevices)!=null&&u.enumerateDevices)){c&&a(!1);return}try{const d=(await navigator.mediaDevices.enumerateDevices()).some(p=>p.kind==="videoinput");c&&a(d)}catch(f){console.warn("Unable to enumerate media devices",f),c&&a(!1)}})(),()=>{c=!1}},[]);const o=async()=>{if(r){console.log(r);try{await n.pair(r)}catch(c){console.error("Error pairing with dapp",c),t(!1);return}}t(!0)};return x.jsxs("div",{className:"flex flex-col w-full min-w-0",children:[x.jsxs("div",{className:"flex flex-col justify-between gap-6 p-3 sm:p-6 w-full min-w-0",children:[x.jsx(ke,{variant:"large",fontWeight:"bold",color:"text80",children:"Connect a Dapp"}),i?x.jsx("div",{className:"self-center w-full max-w-[320px] aspect-square min-w-0",children:x.jsx(Rkt,{onScan:c=>{c[0].rawValue&&s(c[0].rawValue)},styles:{video:{transform:e?"scaleX(-1)":"scaleX(1)",borderRadius:"10px",width:"100%",height:"100%"}}})}):null,i===!1?x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text80",children:"Camera not available on this device. Please paste the connection string below."}):null,x.jsxs("div",{className:"flex flex-col gap-1 w-full min-w-0",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text80",children:"Paste connection string"}),x.jsx(na,{name:"signClientUri",value:r,onChange:c=>s(c.target.value),className:"w-full"})]})]}),x.jsx("div",{className:"h-0 my-0"}),x.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2 p-3 sm:p-6 w-full min-w-0 pt-0!",children:[x.jsx(Zt,{size:"md",shape:"square",className:"w-full sm:w-auto",onClick:()=>{t(!1)},children:"Cancel"}),x.jsx(Zt,{variant:"primary",size:"md",shape:"square",disabled:!r,className:"w-full sm:w-auto",onClick:()=>{r&&o()},children:"Connect Dapp"})]})]})}const Bkt="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Link-Connection'%3e%3cg%20id='Vector'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.65098%205.00098L5.65098%2012.5868C5.65098%2012.8986%206.02798%2013.0547%206.24846%2012.8343L12.8342%206.24846C13.8737%205.20902%2015.651%205.9452%2015.651%207.41519V15.001H14.351V7.41519C14.351%207.10337%2013.974%206.94722%2013.7535%207.1677L7.1677%2013.7535C6.12826%2014.7929%204.35098%2014.0568%204.35098%2012.5868L4.35098%205.00098H5.65098Z'%20fill='white'/%3e%3cpath%20d='M5.00065%202.03125C3.3607%202.03125%202.03125%203.3607%202.03125%205.00065C2.03125%206.64061%203.3607%207.97005%205.00065%207.97005C6.64061%207.97005%207.97005%206.64061%207.97005%205.00065C7.97005%203.3607%206.64061%202.03125%205.00065%202.03125Z'%20fill='white'/%3e%3cpath%20d='M14.9997%2012.0312C13.3597%2012.0312%2012.0303%2013.3607%2012.0303%2015.0007C12.0303%2016.6406%2013.3597%2017.9701%2014.9997%2017.9701C16.6396%2017.9701%2017.9691%2016.6406%2017.9691%2015.0007C17.9691%2013.3607%2016.6396%2012.0312%2014.9997%2012.0312Z'%20fill='white'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Mkt="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Warning'%3e%3cpath%20id='Subtract'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M18%2017.4267L9.99998%203.57031L2%2017.4267H18ZM10.6778%2013.0944V7.32511H9.21569V13.0944H10.6778ZM9.94669%2016.1808C10.5481%2016.1808%2011.0356%2015.6933%2011.0356%2015.0919C11.0356%2014.4905%2010.5481%2014.003%209.94669%2014.003C9.3453%2014.003%208.85777%2014.4905%208.85777%2015.0919C8.85777%2015.6933%209.3453%2016.1808%209.94669%2016.1808Z'%20fill='%236D6D6D'/%3e%3c/g%3e%3c/svg%3e";function Dkt(){const t=Vt(Jn),e=Vt(V4),n=vn(e.allSessions),[r,s]=F.useState(!1),[i,a]=F.useState(!1),o=vn(t.selectedExternalProvider),c=async()=>{a(!0)};return x.jsxs("div",{className:"flex flex-col",children:[x.jsxs("div",{className:"flex flex-row justify-between items-center gap-2",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("img",{src:Bkt,alt:"Link Connection"}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text100",children:"Connected Dapps"})]}),x.jsxs(Zt,{size:"sm",shape:"square",disabled:(o==null?void 0:o.info.name)==="WalletConnect",onClick:()=>s(!0),children:[x.jsx(P7,{}),"Connect"]})]}),x.jsx("div",{className:"h-0 my-2"}),n.length>0?x.jsx(cNt,{sessionList:n}):x.jsx(Cs,{className:"flex flex-col",children:(o==null?void 0:o.info.name)==="WalletConnect"?x.jsxs("div",{className:"flex flex-col items-center gap-4",children:[x.jsx("img",{src:Mkt,alt:"Warning"}),x.jsx(ke,{variant:"normal",color:"text50",className:"p-4",children:"To connect to Dapps, switch from WalletConnect to a different wallet as your External Wallet connection method."})]}):x.jsx(ke,{variant:"normal",color:"text50",className:"p-4",children:"Connect a Dapp with WalletConnect to sign actions"})}),r&&x.jsx(Sl,{contentProps:{className:"w-full max-w-[500px] !w-[calc(100vw)] sm:!w-[500px]",style:{height:"572px"}},rootProps:{className:"px-3 sm:px-0"},onClose:()=>s(!1),children:x.jsx(_kt,{onQrUri:l=>{l&&c(),s(!1)}})}),i&&x.jsx(Sl,{size:"sm",onClose:()=>a(!1),children:x.jsx(oNt,{onClose:()=>a(!1)})})]})}const Lkt="data:image/svg+xml,%3csvg%20fill='none'%20height='400'%20viewBox='0%200%20400%20400'%20width='400'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cclipPath%20id='a'%3e%3cpath%20d='m0%200h400v400h-400z'/%3e%3c/clipPath%3e%3cg%20clip-path='url(%23a)'%3e%3ccircle%20cx='200'%20cy='200'%20fill='%233396ff'%20r='199.5'%20stroke='%2366b1ff'/%3e%3cpath%20d='m122.519%20148.965c42.791-41.729%20112.171-41.729%20154.962%200l5.15%205.022c2.14%202.086%202.14%205.469%200%207.555l-17.617%2017.18c-1.07%201.043-2.804%201.043-3.874%200l-7.087-6.911c-29.853-29.111-78.253-29.111-108.106%200l-7.59%207.401c-1.07%201.043-2.804%201.043-3.874%200l-17.617-17.18c-2.14-2.086-2.14-5.469%200-7.555zm191.397%2035.529%2015.679%2015.29c2.14%202.086%202.14%205.469%200%207.555l-70.7%2068.944c-2.139%202.087-5.608%202.087-7.748%200l-50.178-48.931c-.535-.522-1.402-.522-1.937%200l-50.178%2048.931c-2.139%202.087-5.608%202.087-7.748%200l-70.7015-68.945c-2.1396-2.086-2.1396-5.469%200-7.555l15.6795-15.29c2.1396-2.086%205.6085-2.086%207.7481%200l50.1789%2048.932c.535.522%201.402.522%201.937%200l50.177-48.932c2.139-2.087%205.608-2.087%207.748%200l50.179%2048.932c.535.522%201.402.522%201.937%200l50.179-48.931c2.139-2.087%205.608-2.087%207.748%200z'%20fill='%23fff'/%3e%3c/g%3e%3c/svg%3e";function Ukt({onSelectProvider:t}){const e=Vt(V4),n=FIe(),[r,s]=F.useState(!1),i=e.allSessions.get().length>0,a=async()=>{await e.disconnectAllSessions(),t();const o=await tNe(!0);await o.connect(),t(eNe(o))};return x.jsx("div",{children:r?x.jsxs("div",{className:"flex flex-col p-6 gap-6",children:[x.jsx(ke,{variant:"large",fontWeight:"bold",color:"text80",children:"Use WalletConnect for External Wallet?"}),x.jsx(Cs,{className:"flex flex-col items-center gap-3 border",style:{background:"rgba(176, 126, 30, 0.2)",borderColor:"rgba(176, 126, 30, 0.3)"},children:x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(eve,{color:"warning",size:"xs"}),x.jsx(ke,{variant:"medium",fontWeight:"bold",color:"text100",children:"Attention"})]}),i?x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text80",children:"If you connect your external wallet using WalletConnect, you'll lose all Dapps connections you already made using WalletConnect."}):x.jsxs(ke,{variant:"small",fontWeight:"medium",className:"text-primary/80",children:["If you connect your external wallet using WalletConnect, you won't be able to connect to any other Dapps during this session. ",x.jsx("br",{})," ",x.jsx("br",{}),"If you need to connect Dapps, please consider using a different external wallet instead."]})]})}),x.jsxs("div",{className:"flex flex-row gap-2 w-full mt-6 justify-end",children:[x.jsx(Zt,{size:"md",shape:"square",onClick:()=>t(),children:"Cancel"}),x.jsx(Zt,{variant:"primary",shape:"square",onClick:()=>a(),children:"Confirm"})]})]}):x.jsxs("div",{className:"flex flex-col p-6 gap-6",children:[x.jsx(ke,{variant:"large",fontWeight:"bold",color:"text80",children:"Connect external wallet"}),x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text50",children:"You need an external wallet to relay transactions"}),x.jsxs("div",{className:"flex flex-col gap-3",children:[x.jsx(Zt,{className:"flex flex-row gap-2 cursor-pointer",shape:"square",onClick:()=>{s(!0)},children:x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("img",{src:Lkt,alt:"Wallet Connect",className:"w-5 h-auto"}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text100",children:"Wallet Connect"})]})}),n.map(o=>x.jsx(Zt,{variant:"secondary",shape:"square",className:"flex flex-row gap-2 cursor-pointer",onClick:()=>t(o),children:x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("img",{src:o.info.icon,className:"w-5 h-auto"}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text100",children:o.info.name})]})},o.info.uuid))]})]})})}function Fkt(){const t=Vt(Jn),e=vn(t.selectedExternalProvider),n=vn(t.selectedExternalWalletAddress),[r,s]=F.useState(!1),[i,a]=F.useState(!1);F.useEffect(()=>{i&&setTimeout(()=>{a(!1)},2e3)},[i]);const o=async()=>{e===void 0&&s(!0)},c=async()=>{t.setExternalProvider(void 0);const u=e;(u==null?void 0:u.info.name)==="WalletConnect"&&u.provider.disconnect()},l=()=>{navigator.clipboard.writeText(n),a(!0)};return x.jsxs("div",{className:"flex flex-col w-full",children:[x.jsxs("div",{className:"flex flex-row justify-between items-center gap-2",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(IWe,{color:"text100",width:"5",height:"5"}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text100",children:"External Wallet"})]}),!e&&x.jsxs(Zt,{size:"sm",variant:"primary",shape:"square",onClick:()=>o(),children:[x.jsx(P7,{}),"Connect Wallet"]})]}),x.jsx("div",{className:"h-0 my-2"}),x.jsx(Cs,{className:"flex flex-col",children:e?x.jsxs("div",{className:"flex flex-row justify-between items-center",children:[x.jsxs("div",{className:"flex flex-row gap-4",children:[x.jsx(Ene,{src:e.info.icon}),x.jsxs("div",{className:"flex flex-col gap-1",children:[x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text80",children:e.info.name}),x.jsxs("div",{className:"flex flex-row items-center gap-1",children:[x.jsx(R7,{address:n,size:"xs"}),x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text50",className:"w-full",children:o9(n,10,4)}),i?x.jsx(Ia,{shape:"square",size:"xs",icon:Ff,onClick:()=>l()}):x.jsx(Ia,{shape:"square",size:"xs",icon:z1e,onClick:()=>l()})]})]})]}),x.jsx(Ia,{shape:"square",size:"xs",icon:p2,onClick:()=>c()})]}):x.jsx(ke,{variant:"normal",color:"text50",className:"p-4",children:"Connect an external wallet to relay transactions"})}),r&&x.jsx(Sl,{size:"sm",contentProps:{style:{width:400}},onClose:()=>s(!1),children:x.jsx(Ukt,{onSelectProvider:async u=>{var f,d;u&&(((f=t.selectedExternalProvider.get())==null?void 0:f.info.name)==="WalletConnect"&&await((d=t.selectedExternalProvider.get())==null?void 0:d.provider).disconnect(),t.setExternalProvider(u)),s(!1)}})})]})}function GNe(){return x.jsxs("div",{className:"flex flex-col gap-5",children:[x.jsx(ke,{variant:"small",fontWeight:"bold",color:"text50",children:"External connections"}),x.jsx(Fkt,{}),x.jsx(Dkt,{})]})}const U0e=["https://dweb.link/ipfs/","https://gateway.pinata.cloud/ipfs/","https://nftstorage.link/ipfs/","https://flk-ipfs.io/ipfs/","https://storry.tv/ipfs/","https://ipfs.io/ipfs/","https://hardbin.com/ipfs/","https://ipfs.runfission.com/ipfs/","https://ipfs.eth.aragon.network/ipfs/","https://4everland.io/ipfs/","https://w3s.link/ipfs/","https://trustless-gateway.link/ipfs/"],Vkt="QmeSjSinHpPnmXmspMjwiXyN6zS4E9zccariGR3jxcaWtq/1";class $kt{constructor(){q(this,"gatewayURL");q(this,"localStore");this.localStore=new Cg(u0.GATEWAY_ADDRESS),this.gatewayURL=this.localStore.get(),this.findAccessibleGateway()}async findAccessibleGateway(){const e=this.localStore.get();if(e&&await this.isGatewayAccessible(e)){this.gatewayURL=e;return}for(const n of U0e)if(await this.isGatewayAccessible(n)){this.gatewayURL=n,this.localStore.set(n);return}this.gatewayURL=U0e[0],console.warn("No accessible IPFS gateways found, falling back to default")}async isGatewayAccessible(e){try{return await fetch(`${e}${Vkt}`,{signal:AbortSignal.timeout(3e3)}),!0}catch{return!1}}async fetch(e){this.gatewayURL||await this.findAccessibleGateway();const n=await this.getGatewayURL(e);return fetch(n,{signal:AbortSignal.timeout(3e3)})}async getGatewayURL(e){if(this.gatewayURL||await this.findAccessibleGateway(),!e.startsWith("ipfs://"))throw new Error("Invalid IPFS URI");return e.replace("ipfs://",this.gatewayURL)}}function jkt(t,e){e(t.get()),t.subscribe(e)}const nf={ERC721:"ERC721",ERC1155:"ERC1155"};class Ine{constructor(e){q(this,"isFetchingBalances",rr(!1));q(this,"isFetchingCollectibleInfo",rr(!1));q(this,"ipfsGatewayHelper",new $kt);q(this,"userCollectibles",rr([]));q(this,"local",{userCollectibles:new Cg(u0.COLLECTIBLES)});this.store=e;const n=this.store.get(fs);jkt(n.networks,r=>{const s=this.store.get(us).accountAddress.get();s&&r.length>0&&this.loadBalances(s)})}async loadBalances(e){const n=this.local.userCollectibles.get()??[];if(n.length===0)return;this.isFetchingBalances.set(!0);const r=[],s=n.map(async i=>{const a=await this.getCollectibleInfo(i);if(!a.isOwner){this.removeCollectible({collectibleInfoParams:i,collectibleInfoResponse:a});return}r.push({collectibleInfoParams:i,collectibleInfoResponse:a})});await Promise.allSettled(s),this.userCollectibles.set(r),this.isFetchingBalances.set(!1)}async getCollectibleInfo(e){if(!Ja(e.address))throw new Error(`Invalid collectible address format: ${e.address}`);const n=this.store.get(us).accountAddress.get();if(!n)throw new Error("No account found");const r=this.store.get(fs).providerForChainId(e.chainId);this.isFetchingCollectibleInfo.set(!0);try{let s,i,a,o,c;if(e.contractType===Ms.ContractType.ERC721)try{const u=new Si(e.address,bIe,r);if(await r.getCode(e.address)==="0x")throw new Error("NOT_A_CONTRACT");const p=(await u.ownerOf(e.tokenId)).toLowerCase()===n.toLowerCase();if(!p)return{isOwner:p,uri:""};s=await u.tokenURI(e.tokenId)}catch(u){throw u.message==="NOT_A_CONTRACT"?new Error("No contract found at this address on the selected chain"):u.code==="BAD_DATA"||u.code==="CALL_EXCEPTION"?new Error("Token ID does not exist in this contract"):u}else if(e.contractType===Ms.ContractType.ERC1155)try{const u=new Si(e.address,vIe,r);if(await r.getCode(e.address)==="0x")throw new Error("NOT_A_CONTRACT");if(o=await u.balanceOf(n,e.tokenId),!o)return{isOwner:!1,uri:""};o=o??BigInt(1),s=await u.uri(e.tokenId)}catch(u){throw u.message==="NOT_A_CONTRACT"?new Error("No contract found at this address on the selected chain"):u.code==="BAD_DATA"||u.code==="CALL_EXCEPTION"?new Error("Token ID does not exist in this contract"):u}if(!s)throw new Error("Could not get collectible URI");s.includes("{id}")&&(s=s.replace("{id}",e.tokenId.toString()));let l;try{s.startsWith("ipfs://")?l=await this.ipfsGatewayHelper.fetch(s).then(u=>u.json()):l=await fetch(s).then(u=>u.json()),l&&(c=l.decimals,i=l.image,a=l.name),i!=null&&i.startsWith("ipfs://")&&(i=await this.ipfsGatewayHelper.getGatewayURL(i))}catch{a||(a=`No Metadata Found Address: ${e.address} TokenId: ${e.tokenId}`)}return c=c??0,{isOwner:!0,uri:s,image:i,name:a,balance:o,decimals:c}}catch(s){throw console.error(s),s.message==="No contract found at this address on the selected chain"||s.message==="Token ID does not exist in this contract"?s:new Error(`Error getting collectible info: ${s.message||"Unknown error"}`)}finally{this.isFetchingCollectibleInfo.set(!1)}}async addCollectible(e){if(e.collectibleInfoResponse.isOwner){const n=this.local.userCollectibles.get()??[];if(n.some(r=>r.address===e.collectibleInfoParams.address&&r.tokenId===e.collectibleInfoParams.tokenId))throw new Error("Collectible already added");this.local.userCollectibles.set([...n,e.collectibleInfoParams]),this.isFetchingCollectibleInfo.set(!0),this.loadBalances(),this.isFetchingCollectibleInfo.set(!1)}}async removeCollectible(e){const r=(this.local.userCollectibles.get()??[]).filter(a=>a.address!==e.collectibleInfoParams.address||a.tokenId!==e.collectibleInfoParams.tokenId);this.local.userCollectibles.set(r);const i=this.userCollectibles.get().filter(a=>a.collectibleInfoParams.address!==e.collectibleInfoParams.address||a.collectibleInfoParams.tokenId!==e.collectibleInfoParams.tokenId);this.userCollectibles.set(i)}async getERC721List(e){var i;const n=(i=Ld.get(e))==null?void 0:i[0];if(!n)return[];const r=await kc(Tr.ERC721),s=await r.get(Tr.ERC721,n);if(!s){const o={tokens:(await fetch(`https://raw.githubusercontent.com/0xsequence/token-directory/master/index/${n}/erc721.json`).then(c=>c.json())).tokens,date:new Date().toISOString()};return await r.put(Tr.ERC721,o,n),o}return s}async getERC1155List(e){var i;const n=(i=Ld.get(e))==null?void 0:i[0];if(!n)return[];const r=await kc(Tr.ERC1155),s=await r.get(Tr.ERC1155,n);if(!s){const o={tokens:(await fetch(`https://raw.githubusercontent.com/0xsequence/token-directory/master/index/${n}/erc1155.json`).then(c=>c.json())).tokens,date:new Date().toISOString()};return await r.put(Tr.ERC1155,o,n),o}return s}async addExternalERC721List(e,n){var a;const r=(a=Ld.get(e))==null?void 0:a[0];if(!r)return[];const s={tokens:n,date:new Date().toISOString()};await(await kc(Tr.ERC721)).put(Tr.ERC721,s,r)}async addExternalERC1155List(e,n){var a;const r=(a=Ld.get(e))==null?void 0:a[0];if(!r)return[];const s={tokens:n,date:new Date().toISOString()};await(await kc(Tr.ERC1155)).put(Tr.ERC1155,s,r)}async resetERC721List(e){var s;const n=(s=Ld.get(e))==null?void 0:s[0];return n?(await(await kc(Tr.ERC721)).delete(Tr.ERC721,n),await this.getERC721List(e)):[]}async resetERC1155List(e){var s;const n=(s=Ld.get(e))==null?void 0:s[0];return n?(await(await kc(Tr.ERC1155)).delete(Tr.ERC1155,n),await this.getERC1155List(e)):[]}}const Cne="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='collection'%3e%3cg%20id='Vector'%3e%3cpath%20d='M6.37183%2013.326V6.12354H13.5743V7.86282H8.11042V13.326H6.37183Z'%20fill='white'/%3e%3cpath%20d='M3%209.95247V2.75H10.2025V4.48928H4.7386V9.95247H3Z'%20fill='white'/%3e%3cpath%20d='M9.79834%2016.7508V9.54834H17.0008V16.7508H9.79834Z'%20fill='white'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function Tne({chainId:t,renderImage:e}){return x.jsxs("div",{className:"bg-background-overlay w-fit h-fit rounded-sm px-2 py-1 flex flex-row items-center gap-1",children:[e&&x.jsx(a5,{chainId:t,style:{width:"16px",height:"16px"}}),x.jsx(ke,{variant:"xsmall-bold",className:"text-primary/80",style:{whiteSpace:"nowrap",maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis"},children:yb(t)})]})}function Hkt({disabled:t,collectibleInfo:e,onSendClick:n}){return x.jsxs(Cs,{className:"flex flex-row items-center gap-3",children:[e.collectibleInfoResponse.image&&x.jsx("div",{children:x.jsx(Ene,{src:e.collectibleInfoResponse.image})}),x.jsxs("div",{className:"flex flex-col justify-center",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text80",children:e.collectibleInfoResponse.name??"Collectible"}),x.jsxs(ke,{variant:"small",fontWeight:"bold",color:"text50",className:"text-xs",children:["#",e.collectibleInfoParams.tokenId]}),x.jsx(Tne,{chainId:e.collectibleInfoParams.chainId})]}),x.jsx(ke,{variant:"small",fontWeight:"medium",color:"text50",className:"text-xs",children:e.collectibleInfoParams.contractType==="ERC1155"?Number(gb(e.collectibleInfoResponse.balance,e.collectibleInfoResponse.decimals??0)):1})]}),x.jsx("div",{className:"flex flex-row items-center gap-3 ml-auto",children:x.jsx(Ia,{shape:"square",icon:Z1e,size:"sm",disabled:t,onClick:n})})]})}function qkt({onClose:t}){const n=Vt(fs).networks.get(),r=n.filter(xe=>xe.type===Et.MAINNET),s=Vt(Ine),i=vn(s.isFetchingCollectibleInfo),a=Rb(),[o,c]=F.useState(r[0]),[l,u]=F.useState(""),[f,d]=F.useState(),[p,g]=F.useState(nf.ERC721),[m,v]=F.useState(!1),[A,S]=F.useState(!1),[I,B]=F.useState([]),[D,V]=F.useState(),[O,U]=F.useState(""),[Q,ie]=F.useState([]),[G,R]=F.useState(),[k,b]=F.useState([]),[w,N]=F.useState([]),[L,C]=F.useState(!1),[T,E]=F.useState(!1),[P,_]=F.useState(),[H,ne]=F.useState(""),[$,te]=F.useState({}),J="collectible-list-file-input";F.useEffect(()=>{const xe=async()=>{if(o&&p)try{if(p===nf.ERC721){const qe=await s.getERC721List(o.chainId);B(qe.tokens),V(new Date(qe.date))}else if(p===nf.ERC1155){const qe=await s.getERC1155List(o.chainId);B(qe.tokens),V(new Date(qe.date))}}catch{B([]),V(void 0)}},De=async()=>{if(o&&p&&l&&f){if(_(void 0),ne(""),!Ja(l)){ne("Invalid address format");return}try{const qe=await s.getCollectibleInfo({chainId:o.chainId,address:l,tokenId:f,contractType:p});_(qe),ne("")}catch(qe){console.error("Error fetching collectible info:",qe),_(void 0);const ze=qe.message||"Unable to fetch collectible information";ne(ze)}}else _(void 0),ne("")};xe(),De()},[o,p,l,f]),F.useEffect(()=>{(async()=>{if(N([]),!$[G.address])return;C(!0);const De=$[G.address].split(",").map(Number);for(const qe of De)try{const ze=await s.getCollectibleInfo({chainId:o.chainId,contractType:p,address:G.address,tokenId:qe});ze.isOwner&&N(ft=>[...ft,{collectibleInfo:ze,chainId:o.chainId,contractType:p,address:G.address,tokenId:qe}])}catch(ze){console.error(ze);continue}C(!1)})()},[$]),F.useEffect(()=>{(async()=>{if(o){if(p===nf.ERC721){const De=await s.getERC721List(o.chainId);B(De.tokens),V(new Date(De.date))}else if(p===nf.ERC1155){const De=await s.getERC1155List(o.chainId);B(De.tokens),V(new Date(De.date))}}})()},[o]),F.useEffect(()=>{if(!O)return ie(I==null?void 0:I.slice(0,8));ie(I==null?void 0:I.filter(xe=>xe.name&&xe.name.toLowerCase().includes(O.toLowerCase())).slice(0,8))},[I,O]);const ee=async()=>{try{o&&p&&l&&f&&P&&await s.addCollectible({collectibleInfoParams:{chainId:o.chainId,address:l,tokenId:f,contractType:p},collectibleInfoResponse:P}),k.length>0&&k.map(async xe=>{await s.addCollectible({collectibleInfoParams:{chainId:xe.chainId,address:xe.address,tokenId:xe.tokenId,contractType:xe.contractType},collectibleInfoResponse:xe.collectibleInfo})}),v(!1),a({variant:"success",title:`Collectible${k.length+(l?1:0)>1?"s":""} added successfully`,description:"You'll be able to see this collectible on your browser as long as you don't clear your cache."}),t()}catch(xe){console.error(xe),a({variant:"error",title:"One or more collectibles failed to add",description:"Please try again."})}},X=async xe=>{if(xe)try{const De=await xe.text(),qe=JSON.parse(De);if(Array.isArray(qe))qe.map(ze=>{if(!ze.address||!ze.name)throw new Error("Invalid collection list")}),o&&p&&(p===nf.ERC721?await s.addExternalERC721List(o.chainId,qe):p===nf.ERC1155&&await s.addExternalERC1155List(o.chainId,qe)),a({variant:"success",title:"Custom collection list imported successfully"}),t();else throw new Error("Invalid file format")}catch(De){console.error(De),a({variant:"error",title:"Failed to import token list",description:"Please ensure the file format is correct."})}},j=()=>{const xe=document.getElementById(J);xe==null||xe.click()},se=async xe=>{const De=k.some(qe=>qe.address===xe.address&&qe.tokenId===xe.tokenId);b(De?k.filter(qe=>qe.address!==xe.address&&qe.tokenId!==xe.tokenId):[...k,xe])},ye=(xe,De)=>{const qe=k.some(ze=>ze.address===xe.address&&ze.tokenId===xe.tokenId);return x.jsxs("div",{className:"flex flex-row items-center gap-3 sm:gap-4 bg-background-primary hover:bg-backgroundSecondary rounded-sm p-3",onClick:()=>{se(xe)},children:[x.jsx("img",{src:xe.collectibleInfo.image,className:"w-10 h-10"}),x.jsx(ke,{variant:"normal",fontWeight:"semibold",color:"text80",children:xe.collectibleInfo.name}),x.jsxs("div",{className:"flex flex-row items-center gap-2 ml-auto",children:[x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text80",children:"Balance:"}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text80",className:"mr-1",children:xe.contractType===nf.ERC721?1:gb(xe.collectibleInfo.balance,xe.collectibleInfo.decimals??0)}),x.jsx(o4,{checked:qe})]})]},De)},Ce=async()=>{if(p===nf.ERC721){const xe=await s.resetERC721List(o.chainId);B(xe.tokens),V(new Date(xe.date))}else{const xe=await s.resetERC1155List(o.chainId);B(xe.tokens),V(new Date(xe.date))}S(!1)};return x.jsxs("div",{className:"flex h-full min-h-0 w-full flex-col",children:[x.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto",children:[G?x.jsxs("div",{className:"flex flex-col h-full p-4 sm:p-6 gap-6",children:[x.jsxs("div",{className:"flex flex-row items-center gap-3 sm:gap-4",children:[x.jsx(Ia,{icon:PZ,onClick:()=>R(void 0)}),x.jsx(Gkt,{collection:G})]}),x.jsx("div",{className:"flex flex-col gap-2",children:x.jsx(na,{leftIcon:BG,value:$[G.address],placeholder:"Enter token IDs separated by commas",onChange:xe=>te({...$,[G.address]:xe.target.value})})}),L?x.jsx("div",{className:"flex flex-row items-center justify-center",children:x.jsx(_0,{size:"lg"})}):x.jsxs("div",{className:"flex flex-col",children:[k==null?void 0:k.map((xe,De)=>{if(xe.address===G.address)return ye(xe,De)}),w==null?void 0:w.map((xe,De)=>{if(xe.address===G.address&&!k.some(qe=>qe.tokenId===xe.tokenId))return ye(xe,De)})]})]}):x.jsxs("div",{className:"flex flex-col h-full p-4 sm:p-6 gap-6",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[x.jsx(ke,{variant:"large",fontWeight:"bold",color:"text80",children:"Import Collectibles"}),x.jsx(_7.Helper,{name:"collectibleNetwork",options:r.map(xe=>({label:x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("img",{src:xe.logoURI,className:"w-4 h-4"}),x.jsx(ke,{variant:"normal",className:"text-primary/80",children:xe.title})]}),value:xe.chainId.toString()})),value:o==null?void 0:o.chainId.toString(),onValueChange:xe=>c(n.find(De=>De.chainId===Number(xe))||r[0]),className:"h-7! rounded-lg! w-full sm:w-auto"})]}),x.jsx(ave,{value:p,onValueChange:xe=>g(xe),children:x.jsxs(ove,{className:"h-8 w-fit justify-start",children:[x.jsx(DG,{value:nf.ERC721,className:"h-8 px-4",children:"ERC721"}),x.jsx(DG,{value:nf.ERC1155,className:"h-8 px-4",children:"ERC1155"})]})}),x.jsxs("div",{className:"flex flex-col gap-3",children:[x.jsx(na,{leftIcon:BG,value:O,placeholder:"Search for a collection",onChange:xe=>U(xe.target.value)}),x.jsxs(Zt,{variant:"secondary",shape:"square",className:"mt-auto text-left whitespace-normal",onClick:o&&p?j:void 0,children:[x.jsx(J1e,{className:"w-4 h-4"}),o&&p?`Import custom token list for ${p===nf.ERC721?"ERC721 on "+(o==null?void 0:o.title):"ERC1155 on "+(o==null?void 0:o.title)}`:"Select Network and Type to import custom token list"]})]}),x.jsx("div",{className:"flex flex-col",children:Q==null?void 0:Q.map((xe,De)=>x.jsx(Kkt,{collection:xe,onClick:()=>R(xe)},De))}),x.jsx(nve,{id:J,name:"collectibleListFile",validExtensions:["json"],className:"hidden",onValueChange:X}),D&&x.jsxs(Zt,{shape:"square",size:"xs",onClick:()=>S(!0),className:"w-full sm:w-auto",children:[x.jsx(OZ,{className:"w-4 h-4"}),"Refresh list - last updated: ",D==null?void 0:D.toLocaleString()]})]}),x.jsxs("div",{className:"px-4 sm:px-6",children:[T&&x.jsxs("div",{className:"flex flex-col gap-3",children:[x.jsxs("div",{className:"flex flex-col gap-0.5",children:[x.jsx(ke,{variant:"small",fontWeight:"medium",color:"text80",children:"Collectible Address"}),x.jsx(na,{name:"collectibleAddress",className:"h-10 rounded-md",value:l??"",onChange:xe=>{u(xe.target.value)}})]}),x.jsxs("div",{className:"flex flex-col mb-6 gap-0.5",children:[x.jsx(ke,{variant:"small",fontWeight:"medium",color:"text80",children:"Token ID"}),x.jsx(na,{name:"collectibleTokenId",className:"h-10 rounded-md",value:f??"",onChange:xe=>{if(xe.target.value===""){d(void 0);return}d(xe.target.value)}})]})]}),i&&l&&f&&x.jsx("div",{className:"flex flex-row items-center justify-center mb-6",children:x.jsx(_0,{size:"lg"})}),H&&!i&&x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"negative",children:H}),P&&!P.isOwner&&!i&&x.jsx("div",{className:"flex flex-row items-center mb-6",children:x.jsx(ke,{color:"warning",children:"You do not own this collectible"})}),P&&P.isOwner&&!i&&x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 items-start sm:items-center bg-background-secondary p-3 sm:p-4 sm:px-6",children:[x.jsx(Ff,{className:"w-4 h-4 text-positive"}),x.jsx("img",{src:P.image,className:"w-12 h-12"}),x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text80",children:P.name??""}),x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(ke,{variant:"small",className:"text-primary/80",children:"You have this collectible"}),x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(p2,{className:"w-3 h-3"}),x.jsx(ke,{variant:"small",fontWeight:"bold",color:"text80",children:P.balance?Number(gb(P.balance,P.decimals??0)):1})]})]})]})]})]})]}),x.jsx("div",{className:"sticky bottom-0 z-10 shrink-0 border-t border-border-normal bg-background-primary",children:x.jsxs("div",{className:"flex flex-col sm:flex-row p-4 sm:p-6 gap-2",children:[T?x.jsx(Zt,{size:"md",shape:"square",disabled:!o,onClick:()=>{E(!1),u(""),_(void 0),ne("")},className:"w-full sm:w-auto",children:"Hide"}):x.jsx(Zt,{size:"md",shape:"square",disabled:!o,onClick:()=>{E(!0),ne("")},className:"w-full sm:w-auto",children:"Manual Import"}),x.jsx(Zt,{size:"md",shape:"square",className:"w-full sm:w-auto sm:ml-auto",onClick:t,children:"Cancel"}),x.jsx(Zt,{size:"md",variant:"primary",shape:"square",disabled:!P&&!k.length||m,onClick:()=>{ee()},className:"w-full sm:w-auto",children:"Add"})]})}),A&&x.jsx(Sl,{size:"sm",children:x.jsxs("div",{className:"flex flex-col p-4 sm:p-6 gap-6",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text80",children:`Refreshing list will remove the manually imported list for ${o==null?void 0:o.title}. Are you sure you want to continue?`}),x.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[x.jsx(Zt,{size:"md",shape:"square",onClick:()=>S(!1),children:"Cancel"}),x.jsx(Zt,{size:"md",shape:"square",onClick:Ce,children:"Confirm"})]})]})})]})}function Kkt({collection:t,onClick:e}){const[n,r]=F.useState(!1);return x.jsxs(Zt,{variant:"secondary",className:"flex border-none flex-row items-center gap-3 sm:gap-4 bg-background-primary hover:bg-background-hover rounded-sm p-3 w-full text-left mb-2 last:mb-0",onClick:e,children:[n||!t.logoURI?x.jsx("div",{className:"w-10 h-10 rounded-full bg-background-secondary flex items-center justify-center",children:x.jsx(W1e,{className:"w-4 h-4 text-secondary"})}):x.jsx("img",{src:t.logoURI,className:"w-10 h-10 rounded-full",onError:()=>r(!0)}),x.jsx(ke,{variant:"normal",fontWeight:"semibold",color:"text80",children:t.name})]})}function Gkt({collection:t}){const[e,n]=F.useState(!1);return x.jsxs("div",{className:"flex flex-row items-center gap-3 sm:gap-4",children:[e||!t.logoURI?x.jsx("div",{className:"w-10 h-10 rounded-full bg-background-secondary flex items-center justify-center",children:x.jsx(W1e,{className:"w-4 h-4 text-secondary"})}):x.jsx("img",{src:t.logoURI,className:"w-10 h-10 rounded-full",onError:()=>n(!0)}),x.jsx(ke,{variant:"large",fontWeight:"semibold",color:"text80",children:t.name})]})}function Wkt({onSendClick:t}){const e=Nu("isMobile"),n=Vt(Ine),r=Vt(fs),s=Vt(Jn),i=vn(n.isFetchingBalances),a=vn(n.userCollectibles),o=F.useMemo(()=>a,[a]),c=F.useMemo(()=>o.filter(d=>{var p;return!((p=r.networks.get().find(g=>g.chainId===d.collectibleInfoParams.chainId))!=null&&p.disabled)}),[o,r]),l=vn(s.selectedExternalProvider)!==void 0,[u,f]=F.useState(!1);return x.jsxs("div",{className:"w-full mb-5",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("img",{src:Cne,alt:"Collectibles",className:"w-4 h-4"}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text100",children:"Collectibles"})]}),x.jsxs(Zt,{size:"sm",shape:"square",onClick:()=>f(!0),className:"w-full sm:w-auto",children:[x.jsx(P7,{}),"Import"]})]}),x.jsx("div",{className:"h-0 my-2"}),x.jsx("div",{className:"flex flex-col gap-2",children:i?x.jsx("div",{className:"flex flex-row items-center justify-center mt-4",children:x.jsx(_0,{size:"lg"})}):x.jsx(x.Fragment,{children:c.length>0?x.jsx(x.Fragment,{children:o.map(d=>x.jsx("div",{children:x.jsx(Hkt,{disabled:!l,collectibleInfo:d,onSendClick:()=>{t(d)}})},d.collectibleInfoParams.chainId+d.collectibleInfoParams.address+d.collectibleInfoParams.tokenId))}):x.jsx(Cs,{className:"flex flex-col",children:x.jsx(ke,{variant:"normal",color:"text50",className:"text-center p-4",children:"Import ERC721 or ERC1155 Collectibles"})})})}),u&&x.jsx(Sl,{size:"lg",scroll:!1,onClose:()=>f(!1),contentProps:{style:{scrollbarColor:"gray black",scrollbarWidth:"thin",width:"100%",maxWidth:e?"100%":"800px",minHeight:"auto",maxHeight:e?"90%":"80%",overflow:"hidden"}},children:x.jsx(qkt,{onClose:()=>f(!1)})})]})}const Nne="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='coins'%3e%3cg%20id='Vector'%3e%3cpath%20d='M11.1921%207.78597C11.1921%208.14419%2010.5971%208.69061%209.27961%209.03061C8.55711%209.23097%207.70711%209.33418%206.82068%209.33418C5.94032%209.33418%205.09032%209.23097%204.37389%209.03668C3.04425%208.69061%202.45532%208.15633%202.45532%207.78597C2.45532%207.15454%204.15532%206.23776%206.82068%206.23776C9.49211%206.23776%2011.1921%207.15454%2011.1921%207.78597Z'%20fill='white'/%3e%3cpath%20d='M9.62814%2015.1728C8.78725%2015.3938%207.81704%2015.5109%206.82132%2015.5109C5.82986%2015.5109%204.86207%2015.3944%204.02179%2015.1734C3.16996%2014.9481%202.49361%2014.6263%202%2014.2378V15.9815C2%2017.0865%204.15961%2017.9844%206.82193%2017.9844C9.49032%2017.9844%2011.6499%2017.0865%2011.6499%2015.9815V14.2378C11.1563%2014.6263%2010.48%2014.9481%209.62814%2015.1728Z'%20fill='white'/%3e%3cpath%20d='M9.50732%2010.5956C8.72836%2010.8112%207.79396%2010.9277%206.82071%2010.9277C5.85779%2010.9277%204.92946%2010.8136%204.13532%2010.5987C3.15661%2010.3437%202.43168%209.96298%202%209.50337V11.8512C2%2012.567%202.89796%2013.1887%204.25371%2013.5463C4.99443%2013.7412%205.87964%2013.8542%206.82132%2013.8542C7.76907%2013.8542%208.65429%2013.7412%209.39561%2013.5463C10.752%2013.1887%2011.6493%2012.5603%2011.6493%2011.8512V9.49002C11.214%209.95569%2010.4818%2010.3443%209.50732%2010.5956Z'%20fill='white'/%3e%3cpath%20d='M15.8134%204.56107C17.0151%204.25095%2017.5578%203.75254%2017.5578%203.42581C17.5578%202.84988%2016.0072%202.01367%2013.5706%202.01367C11.1395%202.01367%209.58887%202.84988%209.58887%203.42581C9.58887%203.76362%2010.126%204.25095%2011.3388%204.5666C11.9923%204.74381%2012.7676%204.83796%2013.5706%204.83796C14.3791%204.83796%2015.1544%204.74381%2015.8134%204.56107Z'%20fill='white'/%3e%3cpath%20d='M13.5711%2014.1821C14.4793%2014.1821%2015.3643%2014.0752%2016.1313%2013.8737C16.9082%2013.6688%2017.5251%2013.3753%2017.9754%2013.0208V14.6113C17.9754%2015.6192%2016.0056%2016.4382%2013.5717%2016.4382C13.4159%2016.4382%2013.2619%2016.4349%2013.1103%2016.4283C13.153%2016.2336%2013.1755%2016.0314%2013.1755%2015.824V14.1753C13.3067%2014.1798%2013.4387%2014.1821%2013.5711%2014.1821Z'%20fill='white'/%3e%3cpath%20d='M13.1755%2012.7206C13.306%2012.7255%2013.4382%2012.7279%2013.5717%2012.7279C16.0056%2012.7279%2017.9754%2011.9089%2017.9754%2010.901V9.31055C17.5251%209.66497%2016.9082%209.95848%2016.1313%2010.1634C15.3643%2010.365%2014.4793%2010.4718%2013.5711%2010.4718C13.4387%2010.4718%2013.3067%2010.4696%2013.1755%2010.465V12.7206Z'%20fill='white'/%3e%3cpath%20d='M13.1755%208.95334C13.3059%208.95819%2013.4379%208.96067%2013.5711%208.96067C14.4356%208.96067%2015.243%208.85767%2015.9192%208.6799C17.1563%208.35372%2017.9748%207.78056%2017.9748%207.13375V4.98009C17.5778%205.40484%2016.9099%205.75926%2016.0211%205.98853C15.3106%206.18512%2014.4583%206.29144%2013.5706%206.29144C13.3313%206.29144%2013.0943%206.28371%2012.8615%206.2685C13.0621%206.65495%2013.1755%207.09399%2013.1755%207.55951V8.95334Z'%20fill='white'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function zkt({onClose:t}){const n=Vt(fs).networks.get(),r=n.filter(P=>P.type===Et.MAINNET),s=Vt(N4),i=vn(s.isFetchingTokenInfo),a=Rb(),[o,c]=F.useState(r[0]),[l,u]=F.useState(""),[f,d]=F.useState(),[p,g]=F.useState(""),[m,v]=F.useState(!1),[A,S]=F.useState(!1),[I,B]=F.useState(!1),[D,V]=F.useState([]),[O,U]=F.useState(),[Q,ie]=F.useState(""),[G,R]=F.useState([]),[k,b]=F.useState([]),w="token-list-file-input";F.useEffect(()=>{l?(async()=>{if(o){if(d(void 0),g(""),!Ja(l)){g("Invalid address format");return}try{const _=await s.getTokenInfo(o.chainId,l);d(_),g("")}catch(_){console.error("Error fetching token info:",_),d(void 0),g("There is no token with this address, check the selected chain above")}}})():(d(void 0),g(""))},[o,l]),F.useEffect(()=>{(async()=>{if(o)try{const _=await s.getTokenList(o.chainId),H=_.tokens,ne=new Date(_.date);V(H),U(ne)}catch{V([]),U(void 0)}})()},[o]),F.useEffect(()=>{if(!Q)return R(D.slice(0,8));R(D.filter(P=>P.symbol&&P.symbol.toLowerCase().includes(Q.toLowerCase())).slice(0,8))},[D,Q]),F.useEffect(()=>{k.map(async P=>{var _;if(!((_=P.info)!=null&&_.balance)&&o){const H=await s.getTokenInfo(o.chainId,P.address);P.info=H}})},[k]);const N=async P=>{const _=k.some(H=>H.address===P);b(_?k.filter(H=>H.address!==P):[...k,{address:P,info:void 0}])},L=async()=>{try{o&&(l&&f||k.length)&&(v(!0),l&&f&&f.symbol&&f.decimals&&await s.addToken({chainId:o.chainId,address:l,contractType:Ms.ContractType.ERC20,symbol:f.symbol,decimals:f.decimals}),k.length>0&&k.map(async P=>{await s.addToken({chainId:o.chainId,address:P.address,contractType:Ms.ContractType.ERC20,symbol:P.info.symbol,decimals:P.info.decimals})}),v(!1),a({variant:"success",title:`ERC20 token${k.length+(l?1:0)>1?"s":""} added successfully`,description:"You'll be able to see this token on your browser as long as you don't clear your cache."}),t())}catch(P){console.error(P),a({variant:"error",title:"One or more ERC20 tokens failed to add",description:"Please try again."}),t()}},C=async P=>{if(P)try{const _=await P.text(),H=JSON.parse(_);if(Array.isArray(H))H.map(ne=>{if(!ne.address||!ne.symbol)throw new Error("Invalid token list")}),o&&await s.addExternalTokenList(o.chainId,H),a({variant:"success",title:"Custom token list imported successfully"}),t();else throw new Error("Invalid file format")}catch(_){console.error(_),a({variant:"error",title:"Failed to import token list",description:"Please ensure the file format is correct."})}},T=()=>{const P=document.getElementById(w);P==null||P.click()},E=async()=>{if(o){const P=await s.resetTokenList(o.chainId);V(P.tokens),U(new Date(P.date))}S(!1)};return x.jsxs("div",{className:"flex h-full min-h-0 w-full flex-col",children:[x.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto",children:[x.jsxs("div",{className:"flex flex-col p-4 sm:p-6 gap-6",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[x.jsx(ke,{variant:"large",fontWeight:"bold",color:"text80",children:"Import Tokens"}),x.jsx(_7.Helper,{name:"tokenNetwork",options:r.map(P=>({label:x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("img",{src:P.logoURI,className:"w-4 h-4"}),x.jsx(ke,{variant:"normal",className:"text-primary/80",children:P.title})]}),value:P.chainId.toString()})),value:o==null?void 0:o.chainId.toString(),onValueChange:P=>c(n.find(_=>_.chainId===Number(P))||r[0]),className:"h-7! rounded-lg! w-full sm:w-auto"})]}),x.jsxs("div",{className:"flex flex-col gap-3",children:[x.jsx(na,{leftIcon:BG,value:Q,placeholder:"Search for a token",onChange:P=>ie(P.target.value)}),x.jsxs(Zt,{variant:"secondary",shape:"square",onClick:o?T:void 0,className:"mt-auto text-left whitespace-normal",children:[x.jsx(J1e,{className:"w-4 h-4"}),o?`Import custom token list for ${" "+(o==null?void 0:o.title)}`:"Select Network to import custom token list"]})]}),x.jsx("div",{className:"flex flex-col",children:G==null?void 0:G.map((P,_)=>{var $;const H=k.some(te=>te.address===P.address),ne=k.find(te=>te.address===P.address);return x.jsxs("div",{className:rn("flex flex-row items-center justify-between bg-background-primary hover:bg-background-secondary rounded-sm p-3",H&&"bg-background-secondary"),onClick:()=>{N(P.address)},children:[x.jsxs("div",{className:"flex flex-row items-center",children:[x.jsx("img",{src:P.logoURI,className:"w-6 h-6 rounded-full mr-4"}),x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text80",children:P.symbol})]}),x.jsxs("div",{className:"flex flex-row items-center justify-end gap-2",children:[H&&x.jsxs(x.Fragment,{children:[x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text80",children:"Balance:"}),($=ne==null?void 0:ne.info)!=null&&$.balance?x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text80",children:ne.info.balance}):x.jsx(_0,{size:"md",className:"mr-1"})]}),x.jsx(o4,{checked:H})]})]},_)})}),x.jsx(nve,{id:w,name:"tokenListFile",validExtensions:["json"],className:"hidden",onValueChange:C}),O&&x.jsxs(Zt,{shape:"square",size:"xs",color:"text80",onClick:()=>S(!0),className:"w-full sm:w-auto",children:[x.jsx(OZ,{size:"xs",className:"mr-1"}),"Refresh list - last updated: ",O==null?void 0:O.toLocaleString()]})]}),x.jsxs("div",{className:"p-4 sm:p-6",children:[I&&x.jsxs("div",{className:"flex flex-col mb-6 gap-0.5",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text80",children:"Token Address"}),x.jsx(na,{name:"tokenAddress",value:l??"",onChange:P=>{u(P.target.value)}})]}),i&&l?x.jsx("div",{className:"flex items-center mb-6 justify-center",children:x.jsx(_0,{size:"lg"})}):p?x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"negative",children:p}):f&&x.jsxs(Cs,{className:"flex flex-col mb-6 gap-2",children:[x.jsx(ke,{variant:"medium",fontWeight:"bold",color:"text80",children:f.symbol??""}),x.jsx(ke,{variant:"small",color:"text80",children:"Your Balance:"}),x.jsx(ke,{variant:"medium",fontWeight:"bold",color:"text80",children:f.balance})]})]})]}),x.jsx("div",{className:"sticky bottom-0 z-10 shrink-0 border-t border-border-normal bg-background-primary",children:x.jsxs("div",{className:"flex flex-col sm:flex-row p-4 sm:p-6 gap-2 pt-4",children:[I?x.jsx(Zt,{shape:"square",disabled:!o,onClick:()=>{B(!1),u(""),d(void 0),g("")},className:"w-full sm:w-auto",children:"Hide"}):x.jsx(Zt,{shape:"square",disabled:!o,onClick:()=>{B(!0),g("")},className:"w-full sm:w-auto",children:"Manual Import"}),x.jsx(Zt,{size:"md",shape:"square",className:"w-full sm:w-auto sm:ml-auto",onClick:t,children:"Cancel"}),x.jsx(Zt,{variant:"primary",shape:"square",disabled:!f&&!k.length||m,onClick:()=>{L()},className:"w-full sm:w-auto",children:"Add"})]})}),A&&x.jsx(Sl,{size:"sm",children:x.jsxs("div",{className:"flex flex-col p-4 sm:p-6 gap-6",children:[x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text80",className:"pr-4",children:`Refreshing list will remove the manually imported list for ${o==null?void 0:o.title}. Are you sure you want to continue?`}),x.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[x.jsx(Zt,{size:"sm",shape:"square",onClick:()=>S(!1),children:"Cancel"}),x.jsx(Zt,{variant:"destructive",size:"sm",shape:"square",onClick:E,children:"Confirm"})]})]})})]})}const Jkt=(t,e)=>Math.floor(t*10**e)/10**e;function Ykt({disabled:t,tokenBalance:e,onSendClick:n}){var l,u,f,d;const r=gb(e.balance,((l=e.contractInfo)==null?void 0:l.decimals)??18),s=Jkt(Number(r),5),i=e.contractType==="NATIVE"?WJ(e.chainId):null,a=((u=e.contractInfo)==null?void 0:u.name)??(i==null?void 0:i.name)??"Unknown token",o=((f=e.contractInfo)==null?void 0:f.symbol)??(i==null?void 0:i.symbol)??a,c=((d=e.contractInfo)==null?void 0:d.logoURI)||nze(e.chainId,e.contractAddress);return x.jsxs(Cs,{className:"flex flex-row items-center gap-3",children:[x.jsx(Eze,{src:c,symbol:o,withNetwork:e.chainId,size:"md",className:"size-6"}),x.jsxs("div",{className:"flex flex-col",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text80",children:a}),x.jsx(Tne,{chainId:e.chainId})]}),x.jsxs(ke,{variant:"normal",fontWeight:"medium",color:"text50",className:"text-xs",children:[s," ",o]})]}),x.jsx("div",{className:"flex flex-row items-center ml-auto gap-3",children:x.jsx(Ia,{shape:"square",icon:Z1e,size:"sm",disabled:t,onClick:n})})]})}function Qkt({onSendClick:t}){const e=Nu("isMobile"),n=Vt(Jn),r=Vt(N4),s=Vt(fs),i=vn(r.balances),a=vn(r.isFetchingBalances),o=vn(n.selectedExternalProvider)!==void 0,[c,l]=F.useState(!1),[u,f]=F.useState(!0),d=F.useMemo(()=>{const p=new Map,g=m=>!u||m.balance!=="0";return i.forEach(m=>{var A;if((A=s.networks.get().find(S=>S.chainId===m.chainId))!=null&&A.disabled)return;const v=`${m.contractAddress}-${m.chainId}`;!p.has(v)&&g(m)&&p.set(v,m)}),Array.from(p.values())},[i,u,a]);return x.jsxs("div",{className:"flex flex-col",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("img",{src:Nne,alt:"Coins",className:"w-4 h-4"}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text100",children:"Coins"})]}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 sm:ml-auto",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(o4,{checked:u,onCheckedChange:p=>f(p===!0)}),x.jsx(ke,{variant:"small",color:"text80",className:"cursor-pointer",onClick:()=>f(!u),children:"Filter zero balances"})]}),x.jsxs(Zt,{size:"sm",shape:"square",onClick:()=>l(!0),className:"w-full sm:w-auto",children:[x.jsx(P7,{}),"Import"]})]})]}),x.jsx("div",{className:"my-2"}),x.jsx("div",{className:"flex flex-col gap-2",children:a?x.jsx("div",{className:"flex flex-row items-center justify-center mt-4",children:x.jsx(_0,{size:"lg"})}):x.jsx(x.Fragment,{children:d.length>0?x.jsx(x.Fragment,{children:d.map(p=>x.jsx(Ykt,{tokenBalance:p,disabled:!o,onSendClick:()=>t(p)},p.contractAddress+p.chainId))}):x.jsx(Cs,{className:"flex flex-col",children:x.jsx(ke,{variant:"normal",color:"text50",className:"text-center p-4",children:"Import ERC 20 token address"})})})}),c&&x.jsx(Sl,{size:"lg",scroll:!1,onClose:()=>l(!1),contentProps:{style:{scrollbarColor:"gray black",scrollbarWidth:"thin",width:"100%",maxWidth:e?"100%":"800px",minHeight:"auto",maxHeight:e?"90%":"80%",overflow:"hidden"}},children:x.jsx(zkt,{onClose:()=>l(!1)})})]})}function Zkt(){const t=Vt(us),e=vn(t.accountAddress);return x.jsxs(Cs,{className:"flex flex-col gap-3 p-4 bg-background-raised/90",children:[x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(Q1e,{}),x.jsx(ke,{variant:"medium",fontWeight:"bold",color:"text100",children:"View your wallet assets"})]}),x.jsx(ke,{variant:"small",color:"text80",children:"We may not be able to automatically discover every token or NFT in your wallet. You can view your full balance, then add the assets you want to recover here."})]}),x.jsx("a",{href:`https://blockscan.com/address/${e}`,target:"_blank",rel:"noopener noreferrer",children:x.jsxs(Zt,{variant:"primary",size:"sm",shape:"square",disabled:!e,className:"flex flex-row items-center gap-2 mt-1",children:[x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text100",children:"View wallet balance"}),x.jsx("img",{src:Hte,alt:"External link",className:"w-4 h-4"})]})})]})}function WNe({onTokenSendClick:t,onCollectibleSendClick:e}){return x.jsxs("div",{className:"flex flex-col gap-5 mt-10",children:[x.jsx(ke,{variant:"small",fontWeight:"bold",color:"text50",children:"My Sequence wallet"}),x.jsx(Zkt,{}),x.jsx(Qkt,{onSendClick:t}),x.jsx(Wkt,{onSendClick:e})]})}const zNe="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Send%20(Default)'%3e%3cpath%20id='Subtract'%20d='M14.952%202.86937L3.33984%2010.6285C3.00008%2010.8569%202.89796%2011.3362%203.11176%2011.6991C3.2446%2011.9246%203.46815%2012.0521%203.6999%2012.0616L3.70388%2012.0651L3.708%2012.0686H6.28605C6.78202%2012.0686%207.26064%2011.8739%207.63066%2011.5216C8.1492%2011.0279%2010.4926%209.12312%2011.7011%208.14595C12.0915%207.83027%2012.8551%207.99125%2012.625%208.4375L11.2433%2010.9344C10.7104%2011.8479%2010.8913%2013.0409%2011.667%2013.7286L14.4613%2016.206L14.718%2016.4303L14.928%2016.6297L14.998%2016.6795L15.0641%2016.7149C15.0822%2016.7245%2015.1011%2016.7323%2015.1206%2016.738C15.1476%2016.746%2015.1755%2016.75%2015.2035%2016.75H15.3981C15.7996%2016.75%2016.125%2016.4024%2016.125%2015.9736L16.125%203.53132C16.125%203.11184%2015.8136%202.77006%2015.4242%202.75541C15.2649%202.73526%2015.0984%202.77102%2014.952%202.86937Z'%20fill='white'/%3e%3c/g%3e%3c/svg%3e";function Xkt({parsedCalls:t,tokenMetadata:e}){return x.jsx(RZ,{label:"Show details",children:x.jsxs("div",{className:"flex flex-col gap-1.5 mt-2",children:[x.jsxs("div",{className:"flex flex-row flex-wrap gap-1 items-center",children:[x.jsx("img",{src:zNe,style:{width:"16px",height:"16px"}}),x.jsxs(ke,{variant:"small",fontWeight:"medium",className:"text-primary/80",children:["Transfers (",t.length,")"]})]}),t.map((n,r)=>{const s=()=>n.type==="native"||n.type==="erc20"?Nne:n.type==="erc721"||n.type==="erc1155"?Cne:null,i=()=>{var a;switch(n.type){case"native":return"Native Transfer";case"erc20":{const o=(a=e.get(n.contractAddress))==null?void 0:a.symbol;return o?`${o} Transfer`:"ERC20 Transfer"}case"erc721":return"ERC721 NFT";case"erc1155":return"ERC1155 NFT";default:return"Transfer"}};return x.jsxs(Cs,{className:"flex flex-col gap-1 p-2 bg-background-muted rounded-sm border border-border-normal",children:[x.jsxs("div",{className:"flex flex-row flex-wrap gap-2 items-center",children:[s()&&x.jsx("div",{className:"p-1.5 bg-background-secondary rounded-sm flex items-center justify-center",children:x.jsx("img",{src:s(),style:{width:"20px",height:"20px"}})}),x.jsxs("div",{className:"flex flex-col gap-0.25 flex-1",children:[x.jsx(ke,{variant:"small",fontWeight:"bold",color:"text100",children:i()}),x.jsx(ke,{variant:"xsmall",color:"text50",children:n.description})]})]}),x.jsx("div",{className:"h-0.5 bg-background-active"}),x.jsxs("div",{className:"flex flex-col gap-1",children:[n.recipient&&x.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center",children:[x.jsx("div",{className:"sm:min-w-20",children:x.jsx(ke,{variant:"xsmall",fontWeight:"medium",className:"text-primary/50",children:"Recipient:"})}),x.jsx(BZ,{message:n.recipient,children:x.jsxs("div",{className:"inline-flex items-center gap-1",children:[x.jsx(R7,{address:n.recipient,size:"xs"}),x.jsx(ke,{variant:"xsmall",style:{fontFamily:"monospace",textDecoration:"underline",cursor:"pointer"},className:"text-primary/80",children:o9(n.recipient,6,4)})]})})]}),(n.type==="native"||n.type==="erc20")&&n.amount!==void 0&&(()=>{var u,f;const a=n.type==="native"?18:((u=e.get(n.contractAddress))==null?void 0:u.decimals)??18,o=n.type==="native"?"ETH":((f=e.get(n.contractAddress))==null?void 0:f.symbol)??"tokens",c=n.amount.toString(),l=gb(c,a);return x.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center",children:[x.jsx("div",{className:"sm:min-w-20",children:x.jsx(ke,{variant:"xsmall",fontWeight:"medium",className:"text-primary/50",children:"Amount:"})}),x.jsxs(ke,{variant:"xsmall",fontWeight:"semibold",className:"text-primary/80",children:[l," ",o]})]})})(),n.type==="erc721"&&n.tokenId!==void 0&&x.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center",children:[x.jsx("div",{className:"sm:min-w-20",children:x.jsx(ke,{variant:"xsmall",fontWeight:"medium",className:"text-primary/50",children:"Token ID:"})}),x.jsxs(ke,{variant:"xsmall",fontWeight:"semibold",className:"text-primary/80",children:["#",n.tokenId.toString()]})]}),n.type==="erc1155"&&n.tokenId!==void 0&&x.jsxs("div",{className:"flex flex-col gap-0.5",children:[x.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center",children:[x.jsx("div",{className:"sm:min-w-20",children:x.jsx(ke,{variant:"xsmall",fontWeight:"medium",className:"text-primary/50",children:"Token ID:"})}),x.jsxs(ke,{variant:"xsmall",fontWeight:"semibold",className:"text-primary/80",children:["#",n.tokenId.toString()]})]}),n.amount!==void 0&&x.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center",children:[x.jsx("div",{className:"sm:min-w-20",children:x.jsx(ke,{variant:"xsmall",fontWeight:"medium",className:"text-primary/50",children:"Quantity:"})}),x.jsx(ke,{variant:"xsmall",fontWeight:"semibold",className:"text-primary/80",children:n.amount.toString()})]})]})]})]},r)})]})})}function e7t({parsedCalls:t,tokenMetadata:e}){const n=s=>s==="native"||s==="erc20"?Nne:s==="erc721"||s==="erc1155"?Cne:null,r=s=>{var i;switch(s.type){case"native":return"Native Transfer";case"erc20":{const a=(i=e.get(s.contractAddress))==null?void 0:i.symbol;return a?`${a} Transfer`:"ERC20 Transfer"}case"erc721":return"ERC721 NFT";case"erc1155":return"ERC1155 NFT";default:return"Transfer"}};return x.jsxs("div",{className:"flex flex-col gap-1.5 mt-2",children:[x.jsxs("div",{className:"flex flex-row flex-wrap gap-1 items-center",children:[x.jsx("img",{src:zNe,style:{width:"16px",height:"16px"}}),x.jsxs(ke,{variant:"small",fontWeight:"medium",className:"text-primary/80",children:["Transfers (",t.length,")"]})]}),t.map((s,i)=>x.jsxs(Cs,{className:"flex flex-col gap-1 border border-border-normal rounded-sm p-2 bg-background-muted",children:[x.jsxs("div",{className:"flex flex-row flex-wrap gap-2 items-center",children:[n(s.type)&&x.jsx("div",{className:"p-1.5 bg-background-secondary rounded-sm flex items-center justify-center",children:x.jsx("img",{src:n(s.type),style:{width:"20px",height:"20px"}})}),x.jsxs("div",{className:"flex flex-col gap-0.25 flex-1",children:[x.jsx(ke,{variant:"small",fontWeight:"medium",className:"text-primary/80",children:r(s)}),x.jsx(ke,{variant:"xsmall",className:"text-primary/50",children:s.description})]})]}),x.jsx("div",{className:"h-0.5 bg-background-active"}),x.jsxs("div",{className:"flex flex-col gap-1",children:[s.recipient&&x.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center",children:[x.jsx("div",{className:"sm:min-w-20",children:x.jsx(ke,{variant:"xsmall",fontWeight:"medium",className:"text-primary/50",children:"Recipient:"})}),x.jsx(BZ,{message:s.recipient,children:x.jsxs("div",{className:"inline-flex items-center gap-1",children:[x.jsx(R7,{address:s.recipient,size:"xs"}),x.jsx(ke,{variant:"xsmall",style:{fontFamily:"monospace",backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"4px 8px",borderRadius:"4px",cursor:"pointer"},className:"text-primary/80",children:o9(s.recipient,6,4)})]})})]}),(s.type==="native"||s.type==="erc20")&&s.amount!==void 0&&(()=>{var u,f;const a=s.type==="native"?18:((u=e.get(s.contractAddress))==null?void 0:u.decimals)??18,o=s.type==="native"?"ETH":((f=e.get(s.contractAddress))==null?void 0:f.symbol)??"tokens",c=s.amount.toString(),l=gb(c,a);return x.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center",children:[x.jsx("div",{className:"sm:min-w-20",children:x.jsx(ke,{variant:"xsmall",fontWeight:"medium",className:"text-primary/50",children:"Amount:"})}),x.jsxs(ke,{variant:"xsmall",fontWeight:"semibold",className:"text-primary/80",children:[l," ",o]})]})})(),s.type==="erc721"&&s.tokenId!==void 0&&x.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center",children:[x.jsx("div",{className:"sm:min-w-20",children:x.jsx(ke,{variant:"xsmall",fontWeight:"medium",className:"text-primary/50",children:"Token ID:"})}),x.jsxs(ke,{variant:"xsmall",fontWeight:"semibold",className:"text-primary/80",children:["#",s.tokenId.toString()]})]}),s.type==="erc1155"&&s.tokenId!==void 0&&x.jsxs("div",{className:"flex flex-col gap-0.5",children:[x.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center",children:[x.jsx("div",{className:"sm:min-w-20",children:x.jsx(ke,{variant:"xsmall",fontWeight:"medium",className:"text-primary/50",children:"Token ID:"})}),x.jsxs(ke,{variant:"xsmall",fontWeight:"semibold",className:"text-primary/80",children:["#",s.tokenId.toString()]})]}),s.amount!==void 0&&x.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center",children:[x.jsx("div",{className:"sm:min-w-20",children:x.jsx(ke,{variant:"xsmall",fontWeight:"medium",className:"text-primary/50",children:"Quantity:"})}),x.jsx(ke,{variant:"xsmall",fontWeight:"semibold",className:"text-primary/80",children:s.amount.toString()})]})]})]})]},i))]})}function t7t({parsedCalls:t,chainId:e}){const n=Vt(fs),[r,s]=F.useState(new Map);return F.useEffect(()=>{(async()=>{const a=n.providerForChainId(e),o=new Map,c=await kc(Tr.TOKEN_METADATA);for(const l of t)if(l.type==="erc20"&&l.contractAddress&&!r.has(l.contractAddress)){const u=`${e}:${l.contractAddress.toLowerCase()}`;try{const f=await c.get(Tr.TOKEN_METADATA,u);if(f)o.set(l.contractAddress,f);else{const d=new Si(l.contractAddress,h3,a),[p,g]=await Promise.all([d.decimals(),d.symbol()]),m={decimals:Number(p),symbol:g};o.set(l.contractAddress,m),await c.put(Tr.TOKEN_METADATA,m,u)}}catch(f){console.error(`Failed to fetch metadata for ${l.contractAddress}:`,f);const d={decimals:18,symbol:"tokens"};o.set(l.contractAddress,d)}}o.size>0&&s(o),c.close()})()},[t,e,n]),r}function n7t(t){if(t.value&&t.value>0n&&(!t.data||t.data==="0x"))return{type:"native",recipient:t.to,amount:t.value,description:`Transfer ${ID(t.value.toString(),18)} native tokens`};if(t.data&&t.data.startsWith("0xa9059cbb"))try{const e=Vj({abi:GAe,data:t.data});if(e.functionName==="transfer"){const[n,r]=e.args;return{type:"erc20",recipient:n,amount:r,contractAddress:t.to,description:"Transfer ERC20 tokens"}}}catch{}if(t.data&&t.data.startsWith("0x23b872dd"))try{const e=Vj({abi:zAe,data:t.data});if(e.functionName==="transferFrom"){const[n,r,s]=e.args;return{type:"erc721",recipient:r,tokenId:s,contractAddress:t.to,description:`Transfer ERC721 NFT (Token ID: ${s.toString()})`}}}catch{}if(t.data&&t.data.startsWith("0xf242432a"))try{const e=Vj({abi:WAe,data:t.data});if(e.functionName==="safeTransferFrom"){const[n,r,s,i]=e.args.slice(0,4);return{type:"erc1155",recipient:r,tokenId:s,amount:i,contractAddress:t.to,description:`Transfer ERC1155 NFT (Token ID: ${s.toString()}, Amount: ${i.toString()})`}}}catch{}return{type:"unknown",description:"Unknown transaction"}}function r7t({firstCall:t,transactionAmount:e,chainId:n}){const r=Vt(N4),s=Vt(Ine),i=vn(r.balances),a=vn(s.userCollectibles),o=F.useRef(new Set),c=F.useRef(new Set);return F.useEffect(()=>{if(t){if(t.type==="erc20"||t.type==="native"){const u=t.contractAddress||$c,f=`${n}-${u.toLowerCase()}`;if(o.current.has(f))return;o.current.add(f),r.fetchTokenBalanceIfMissing(n,u)}else if(t.type==="erc721"||t.type==="erc1155"){const u=t.contractAddress,f=t.tokenId;if(!u||f===void 0)return;const d=`${n}-${u.toLowerCase()}-${f}`;if(c.current.has(d))return;if(c.current.add(d),!s.userCollectibles.get().find(g=>g.collectibleInfoParams.address.toLowerCase()===u.toLowerCase()&&g.collectibleInfoParams.tokenId===Number(f)&&g.collectibleInfoParams.chainId===n)){const g=t.type==="erc721"?"ERC721":"ERC1155";s.getCollectibleInfo({chainId:n,address:u,tokenId:Number(f),contractType:g}).then(m=>{const v=s.userCollectibles.get();s.userCollectibles.set([...v,{collectibleInfoParams:{chainId:n,address:u,tokenId:Number(f),contractType:g},collectibleInfoResponse:m}])}).catch(m=>{console.error("Error fetching collectible info:",m)})}}}},[t,n,r,s]),{hasEnoughBalance:F.useMemo(()=>{if(!t)return!1;if(t.type==="erc721"){const u=a.find(f=>{var d;return f.collectibleInfoParams.address.toLowerCase()===((d=t.contractAddress)==null?void 0:d.toLowerCase())&&f.collectibleInfoParams.tokenId===Number(t.tokenId)&&f.collectibleInfoParams.chainId===n});return(u==null?void 0:u.collectibleInfoResponse.isOwner)??!1}else if(t.type==="erc1155"){const u=a.find(d=>{var p;return d.collectibleInfoParams.address.toLowerCase()===((p=t.contractAddress)==null?void 0:p.toLowerCase())&&d.collectibleInfoParams.tokenId===Number(t.tokenId)&&d.collectibleInfoParams.chainId===n});return((u==null?void 0:u.collectibleInfoResponse.balance)??0n)>=(e??0n)}else{const u=t.contractAddress||$c,f=i.find(d=>d.contractAddress.toLowerCase()===u.toLowerCase()&&d.chainId===n);return f?BigInt(f.balance)>=(e??0n):!1}},[t,e,n,i,a]),balances:i,collectibles:a}}async function s7t(t,e,n,r,s,i,a){const o=await ba.transactions.request(t,s,e,{noConfigUpdate:!0,source:"recovery_payload"});await ba.transactions.define(o,{nonce:r,space:n});const c=await ba.transactions.get(o).then(f=>f).catch(f=>console.log("catch",f));if(!c||c.status!=="defined")throw await ba.transactions.delete(o),new Error("Transaction not found or unexpected status");const l=a?c.relayerOptions.find(f=>f.relayerId===a.info.uuid):c.relayerOptions.find(f=>f.kind==="standard"&&!f.feeOption);if(!l)throw await ba.transactions.delete(o),new Error("No free relayer options found");const u=await ba.transactions.selectRelayer(o,l.id);return ba.signatures.onSignatureRequestUpdate(u,async f=>{if(f.status!=="pending")return;const d=f.signers.find(p=>{var g;return((g=p.handler)==null?void 0:g.kind)==="recovery-extension"&&p.status==="ready"});d&&d.status==="ready"&&d.handle().then(async()=>{ba.transactions.relay(o).catch(p=>{p&&p.code&&p.code===4001&&(ba.transactions.delete(o),i("cancelled"))})})},f=>{console.error("Error fetching signature request:",f)},!0),o}function i7t({payload:t,selectedExternalProvider:e}){var m,v;const[n,r]=F.useState(!1),[s,i]=F.useState(null),[a,o]=F.useState(!1),[c,l]=F.useState(null);F.useEffect(()=>{async function A(){var S,I;try{const B=(S=t.payload)==null?void 0:S.space,D=(I=t.payload)==null?void 0:I.nonce;if(B!==void 0&&D!==void 0){const V=await ba.wallets.getNonce(t.chainId,t.wallet,B);r(V>D)}}catch(B){console.error("Error checking if payload is executed:",B)}}A()},[t.chainId,t.wallet,(m=t.payload)==null?void 0:m.space,(v=t.payload)==null?void 0:v.nonce]),F.useEffect(()=>{s&&ba.transactions.get(s).then(A=>{ba.transactions.onTransactionUpdate(A.id,u,!0)}).catch(A=>{console.log("Error getting transaction:",A)})},[s]);function u(A){A&&l(A)}const f=async()=>{var S;o(!0);const A=await s7t(t.wallet,(S=t.payload)==null?void 0:S.calls,t.payload.space,t.payload.nonce,t.chainId,()=>{o(!1)},e);A&&i(A)},d=(c==null?void 0:c.status)==="final"&&(c==null?void 0:c.opStatus.status)==="confirmed"?c==null?void 0:c.opStatus.transactionHash:null,p=c==null?void 0:c.status,g=p==="final"?c==null?void 0:c.opStatus.status:null;return{isExecuted:n,isPending:a,transaction:c,hash:d,status:p,opStatus:g,handleExecuteRecovery:f}}function a7t({payloadId:t,chainId:e,isExecuted:n,startDate:r,endDate:s,isLocked:i,readyToExecute:a}){const o=c=>c.toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});return x.jsxs("div",{className:"flex flex-col gap-1 flex-grow-1 min-w-0",children:[x.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-4 sm:items-center min-w-0",children:[x.jsx(BZ,{message:t,children:x.jsxs(ke,{variant:"normal",fontWeight:"bold",color:"text80",style:{fontFamily:"monospace",textDecoration:"underline"},className:"max-w-full",children:[t.slice(0,6),"...",t.slice(-4)]})}),x.jsx(Tne,{chainId:e,renderImage:!0}),n&&x.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[x.jsx("div",{className:"p-1 bg-positive/10 rounded-full flex items-center justify-center",children:x.jsx(Ff,{className:"w-4 h-4 text-positive"})}),x.jsx(ke,{variant:"small",fontWeight:"medium",color:"positive",children:"Executed"})]})]}),x.jsxs("div",{className:"flex flex-col gap-0.5",children:[x.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center",children:[x.jsx(ke,{variant:"small",fontWeight:"medium",color:"text50",children:"Queued at:"}),x.jsx(ke,{variant:"small",fontWeight:"medium",color:"text80",children:o(r)})]}),!n&&x.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center",children:[x.jsx(ke,{variant:"small",fontWeight:"medium",color:"text50",children:a?x.jsxs("span",{className:"flex flex-row gap-1 items-center",children:[x.jsx(Ff,{className:"w-4 h-4 text-positive"})," Ready to execute"]}):"Locked until:"}),!a&&x.jsx(ke,{variant:"small",fontWeight:"medium",color:"text80",children:o(s)})]})]})]})}function o7t({isPending:t,hash:e,status:n,opStatus:r,isExecuted:s,isLocked:i,readyToExecute:a,hasEnoughBalance:o,selectedExternalProvider:c,chainId:l,onExecute:u}){const f=e?c7t(e,l):null,d=c==null?void 0:c.info.name;return n==="final"&&r==="confirmed"&&f?x.jsxs("div",{className:"flex flex-col gap-1 items-start sm:items-center",children:[x.jsxs(ke,{variant:"small",fontWeight:"bold",color:"text80",className:"flex flex-row gap-1 items-center",children:[x.jsx(Ff,{className:"w-4 h-4 text-positive"})," Recovery completed"]}),f&&x.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"w-full sm:w-auto",children:x.jsx(Zt,{variant:"primary",size:"sm",shape:"square",className:"w-full justify-center",children:x.jsx(ke,{variant:"small",fontWeight:"bold",color:"text100",children:"View on explorer"})})})]}):t&&!e?x.jsxs(Zt,{variant:"primary",size:"sm",shape:"square",disabled:!0,className:"w-full sm:w-auto justify-center",children:[x.jsx(_0,{size:"xs",className:"text-white mr-1"}),x.jsxs(ke,{variant:"small",fontWeight:"bold",color:"text100",children:["Continue with ",d]})]}):!t&&!e?x.jsx(Zt,{variant:"primary",size:"sm",shape:"square",onClick:u,disabled:!a||s||!o,className:"w-full sm:w-auto justify-center",children:x.jsx(ke,{variant:"small",fontWeight:"bold",color:"text100",children:s?"Executed":i?"Locked":c?"Execute":"Connect wallet"})}):null}function c7t(t,e){const n=y4(e),r=n==null?void 0:n.blockExplorer;if(r)return`${r.url}tx/${t}`}function l7t({firstCall:t,transactionAmount:e,balances:n,collectibles:r,chainId:s,tokenMetadata:i}){const a=()=>{var d,p,g;if(t.type==="erc721")return`You don't own this NFT (Token ID: ${(d=t.tokenId)==null?void 0:d.toString()}).`;if(t.type==="erc1155"){const m=r.find(A=>{var S;return A.collectibleInfoParams.address.toLowerCase()===((S=t.contractAddress)==null?void 0:S.toLowerCase())&&A.collectibleInfoParams.tokenId===Number(t.tokenId)&&A.collectibleInfoParams.chainId===s});return`You have ${((p=m==null?void 0:m.collectibleInfoResponse.balance)==null?void 0:p.toString())??"0"} but need ${(e==null?void 0:e.toString())??"0"} of Token ID: ${(g=t.tokenId)==null?void 0:g.toString()}.`}const o=t.contractAddress||$c,c=n.find(m=>m.contractAddress.toLowerCase()===o.toLowerCase()&&m.chainId===s),l=i.get(t.contractAddress),u=(l==null?void 0:l.decimals)??18,f=(l==null?void 0:l.symbol)??"tokens";return`You have ${ID((c==null?void 0:c.balance)??"0",u)} ${f} but need ${ID((e==null?void 0:e.toString())??"0",u)} ${f}.`};return x.jsx(g2.Helper,{variant:"error",title:"Insufficient balance",description:a(),className:"[&_[data-slot=alert-description]]:break-words"})}function F0e({payload:t,executedHidden:e=!1}){var V,O;const n=Vt(Jn),r=vn(n.selectedExternalProvider),s=new Date(Number(t.startTimestamp)*1e3),i=new Date(Number(t.endTimestamp)*1e3),a=i>new Date,c=(((V=t.payload)==null?void 0:V.calls)||[]).map(n7t),l=(O=c[0])==null?void 0:O.amount,u=c[0],f=t7t({parsedCalls:c,chainId:t.chainId}),{hasEnoughBalance:d,balances:p,collectibles:g}=r7t({firstCall:u,transactionAmount:l,chainId:t.chainId}),{isExecuted:m,isPending:v,hash:A,status:S,opStatus:I,handleExecuteRecovery:B}=i7t({payload:t,selectedExternalProvider:r}),D=!a&&!!r&&!m;return e&&m?null:x.jsxs("div",{className:"flex flex-col gap-2 bg-background-muted border border-border-normal rounded-xl p-2",children:[x.jsxs(Cs,{className:"flex flex-col gap-3 p-4 bg-background-secondary rounded-md border-none sm:flex-row sm:items-center",style:{opacity:m?.5:1,pointerEvents:m?"none":"auto"},children:[x.jsx(a7t,{payloadId:t.id,chainId:t.chainId,isExecuted:m??!1,startDate:s,endDate:i,isLocked:a,readyToExecute:D}),x.jsx("div",{className:"w-full sm:w-auto sm:ml-auto",children:x.jsx(o7t,{isPending:v,hash:A,status:S,opStatus:I,isExecuted:m??!1,isLocked:a,readyToExecute:D,hasEnoughBalance:d??!1,selectedExternalProvider:r,chainId:t.chainId,onExecute:B})})]}),!d&&!m&&x.jsx(l7t,{firstCall:u,transactionAmount:l,balances:p,collectibles:g,chainId:t.chainId,tokenMetadata:f}),c.length>0&&!m&&x.jsx(Xkt,{parsedCalls:c,tokenMetadata:f}),c.length>0&&m&&x.jsx(e7t,{parsedCalls:c,tokenMetadata:f})]})}function u7t({queuedPayloads:t,isLoading:e,refetch:n}){const[r,s]=F.useState(!0),[i,a]=F.useState("all"),o=t.reduce((g,m)=>{const v=m.chainId;return g[v]||(g[v]=[]),g[v].push(m),g},{}),c=Object.keys(o).map(Number),l=F.useMemo(()=>{const g=[{value:"all",label:x.jsx("div",{className:"flex flex-row items-center gap-2",children:x.jsx(ke,{variant:"xsmall",className:"text-primary/80",children:"All Chains"})})}];return c.forEach(m=>{g.push({value:m.toString(),label:x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx(a5,{chainId:m,size:"sm"}),x.jsx(ke,{variant:"xsmall",className:"text-primary/80",children:yb(m)})]})})}),g},[c]),u=F.useMemo(()=>i==="all"?t:t.filter(g=>g.chainId.toString()===i),[t,i]),f=u.reduce((g,m)=>{const v=m.chainId;return g[v]||(g[v]=[]),g[v].push(m),g},{}),d=Object.keys(f).map(Number),p=d.length>1;return x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[x.jsxs(ke,{variant:"small",fontWeight:"bold",color:"text50",className:"break-words",children:["Recovery Payloads (",u.length," ",u.length===1?"payload":"payloads"," ",i!=="all"?"filtered":"queued",")"]}),x.jsxs("div",{className:"flex w-full flex-wrap items-center gap-2 sm:w-auto sm:justify-end",children:[c.length>1&&x.jsx(_7.Helper,{name:"chain-filter",value:i,options:l,onValueChange:a,className:"h-7! rounded-lg! bg-background-secondary [&>span>div>span]:text-primary [&>svg]:text-primary"}),x.jsx(Zt,{variant:"secondary",shape:"square",size:"xs",onClick:()=>s(!r),children:r?x.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[x.jsx(X1e,{})," Show Executed"]}):x.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[x.jsx(Y1e,{})," Hide Executed"]})}),x.jsx(Ia,{icon:OZ,variant:"secondary",size:"xs",onClick:()=>n()})]})]}),x.jsx("div",{className:"flex flex-col gap-2 bg-background-secondary border border-border-card rounded-xl p-2",children:e?x.jsx("div",{className:"py-10",children:x.jsxs(ke,{variant:"normal",fontWeight:"medium",color:"text50",className:"flex flex-row gap-2 items-center justify-center",children:[x.jsx(_0,{size:"sm"})," Loading queued recovery payloads..."]})}):u.length===0?x.jsx("div",{className:"flex flex-col",children:x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text50",className:"text-center p-4",children:i==="all"?"No recovery payloads queued yet.":"No recovery payloads found for the selected chain."})}):p?d.map(g=>x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsxs("div",{className:"sticky top-0 my-2 left-0 z-10 flex flex-row gap-2 p-2 bg-background-secondary rounded-md",children:[x.jsx(a5,{chainId:g,size:"sm"}),x.jsx(ke,{variant:"normal",fontWeight:"bold",color:"text80",children:yb(g)})]}),x.jsx("div",{className:"flex flex-col gap-2",children:f[g].map(m=>x.jsx(F0e,{payload:m,executedHidden:r},m.id))})]},g)):u.map(g=>x.jsx(F0e,{payload:g,executedHidden:r},g.id))})]})}function f7t({isV2Wallet:t,queuedPayloads:e,isLoading:n,refetch:r}){return t?null:x.jsx(u7t,{queuedPayloads:e,isLoading:n,refetch:r})}const JNe=800;function d7t(){const t=Vt(Jn),e=Vt(fs),n=Vt(us),r=vn(t.isSigningTxn),s=vn(t.isSigningMsg),i=vn(t.isNetworkModalOpen),a=vn(n.isLoadingAccount),o=vn(n.accountAddress),[c,l]=F.useState(!1);F.useEffect(()=>{l(a)},[a]),nNe();const{isV2Wallet:u}=tNt(),{handleSignTxn:f,handleSignMsg:d,cancelRequest:p}=VTt(),{handleEnqueueTokenPayload:g,handleEnqueueCollectiblePayload:m}=eNt(),{payloads:v,isLoading:A,refetch:S}=Q1t(),[I,B]=F.useState(void 0),[D,V]=F.useState(void 0),[O,U]=F.useState(!1),[Q,ie]=F.useState(!1),[G,R]=F.useState(!0),[k,b]=F.useState(!0),w=E=>{V(void 0),t.isSendingCollectibleTransaction.set(void 0),B(E),U(!0)},N=E=>{B(void 0),t.isSendingTokenTransaction.set(void 0),V(E),ie(!0)},L=()=>{B(void 0),U(!1)},C=()=>{V(void 0),ie(!1)},T=E=>{t.isSigningMsg.set(!1),E?d(E):p()};return!o&&!c?null:x.jsxs("div",{children:[x.jsx(qte,{}),x.jsx("div",{className:"flex flex-col items-center",children:x.jsxs("div",{className:"flex flex-col p-5 w-full pb-20",style:{maxWidth:JNe},children:[x.jsxs("div",{className:"flex flex-col",children:[x.jsx(GNe,{}),x.jsx(WNe,{onTokenSendClick:w,onCollectibleSendClick:N})]}),x.jsx(f7t,{isV2Wallet:u,queuedPayloads:v,isLoading:A,refetch:S})]})}),x.jsx(iNe,{isOpen:i,onClose:()=>t.isNetworkModalOpen.set(!1),networkStore:e,walletStore:t}),x.jsx(aNe,{isOpen:r,onCancel:p,onSign:f}),x.jsx(oNe,{isOpen:s,onClose:T}),x.jsx(yNe,{isOpen:O,isDismissible:G,tokenBalance:I,onClose:L,onRecover:async({amount:E})=>{if(E&&I)return await g(I,E)},onDismissibleChange:R}),x.jsx(wNe,{isOpen:Q,isDismissible:k,collectibleInfo:D,onClose:C,onRecover:async({amount:E})=>{if(E&&D)return await m(D,E)},onDismissibleChange:b})]})}const V0e=t=>{const e=t.trim().split(/\s+/g).length;return e===12||e===24};function h7t(){const t=Nu("isMobile"),e=Vt(us),n=Vt(Jn),s=Vt(fs).networks.get(),[i,a]=F.useState({mnemonic:"",selectedWallet:""}),o=FL(),[c,l]=F.useState([]),[u,f]=F.useState(null),[d,p]=F.useState({isSearchingWallets:!1,isRecovering:!1}),g=vn(n.isNetworkModalOpen),m=OIe(),v=P1t(),A=F.useMemo(()=>{const U=V0e(i.mnemonic),Q=FM(i.selectedWallet);return{isMnemonicValid:U,isWalletSelected:Q,showMnemonicError:i.mnemonic&&!U}},[i]),S=F.useMemo(()=>{const U=i.mnemonic.trim().split(/\s+/g).filter(Q=>Q).length;return U===12?12:U===24?24:12},[i.mnemonic]),I=F.useCallback((U,Q)=>{a(ie=>({...ie,[U]:Q})),f(null)},[]),B=F.useCallback(async U=>{const Q=U.trim().split(/\s+/g).length;if(Q!==12&&Q!==24){l([]);return}p(ie=>({...ie,isSearchingWallets:!0})),f(null);try{if(Q===12){const ie=ZM.fromPhrase(U.trim()),G=[...(await GJ.walletsOfSigner({signer:ie.address})).map(({wallet:R})=>R),...(k1t[ie.address]??[]).map(({wallet:R})=>R)];l(G),G.length>0?a(R=>({...R,selectedWallet:G[0]})):(f("No wallet match found. Please double-check your recovery phrase."),a(R=>({...R,selectedWallet:""})))}else{const ie=await m(U);if(!ie){f("No wallet match found. Please double-check your recovery phrase."),l([]),a(k=>({...k,selectedWallet:""}));return}const{walletAddress:G,recoverySignerAddress:R}=ie;await MIe(G,R),l([G]),a(k=>({...k,selectedWallet:G}))}}catch(ie){console.error("Error searching for wallets:",ie),ie instanceof Error&&(ie.message==="invalid_mnemonic"||ie.message==="no_signers"||ie.message==="signer_not_found")?f("No wallet match found. Please double-check your recovery phrase."):f("Failed to search for wallets. Please try again."),l([]),a(G=>({...G,selectedWallet:""}))}finally{p(ie=>({...ie,isSearchingWallets:!1}))}},[m]),D=F.useCallback(U=>{I("mnemonic",U),l([]),I("selectedWallet","")},[I]);F.useEffect(()=>{V0e(i.mnemonic)&&B(i.mnemonic)},[i.mnemonic,B]);const V=F.useCallback(async()=>{if(!A.isMnemonicValid||!A.isWalletSelected)return;p(ie=>({...ie,isRecovering:!0})),f(null);const U=i.mnemonic.trim(),Q=U.split(/\s+/g).length;try{if(Q===12){const ie=ZM.fromPhrase(U),G=new cF([ie]),b=(await new i9({address:i.selectedWallet,tracker:GJ,contexts:AIe,orchestrator:G,networks:s}).status(ge.MAINNET)).config;if(!tc.genericCoderFor(b.version).config.signersOf(b).some(C=>C.address===ie.address)){f("No wallet match found. Please double-check your recovery phrase and wallet address.");return}await e.signInWithRecoveryMnemonic(i.selectedWallet,U),o("/wallet-v2-recovery")}else{const ie=await m(U);if(!ie){f("No wallet match found. Please double-check your recovery phrase and wallet address.");return}const{walletAddress:G,recoverySignerAddress:R}=ie;await v(G,R),await e.signInWithRecoveryMnemonic(G,U),o("/wallet-v3-recovery")}}catch(ie){if(console.error("Recovery error:",ie),ie instanceof Error&&(ie.message==="invalid_mnemonic"||ie.message==="no_signers"||ie.message==="signer_not_found")){f("No wallet match found. Please double-check your recovery phrase and wallet address.");return}f("Failed to recover wallet. Please verify your recovery phrase and try again.")}finally{p(ie=>({...ie,isRecovering:!1}))}},[A.isMnemonicValid,A.isWalletSelected,i.mnemonic,i.selectedWallet,m,v,e,s]),O=d.isSearchingWallets||d.isRecovering;return x.jsxs("div",{className:"flex flex-col bg-background-primary pb-20",children:[x.jsx(qte,{}),x.jsxs("div",{className:"self-center flex flex-col gap-6 p-4 sm:p-6 w-full",style:{maxWidth:JNe},children:[x.jsxs("div",{className:"flex flex-col",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[x.jsx(Ia,{size:"sm",shape:"circle",onClick:()=>o("/"),icon:PZ}),x.jsx(ke,{variant:"xlarge",color:"text80",className:"leading-tight",children:"Recover your wallet"})]}),x.jsx("div",{className:"h-0.5 w-full bg-backgroundMuted my-6"}),x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text80",className:"mb-2",children:"Recovery phrase"}),x.jsx(ke,{variant:"normal",fontWeight:"medium",color:"text50",className:"mb-3",children:"Enter your 12 or 24-word mnemonic phrase below."}),x.jsx(H1t,{wordCount:S,onMnemonicChange:D}),A.showMnemonicError&&x.jsx(g2.Helper,{title:"Mnemonic must be 12 or 24 words",variant:"info",className:"mt-6"})]}),d.isSearchingWallets&&x.jsxs("div",{className:"self-center flex flex-row items-center gap-1",children:[x.jsx(_0,{size:"md"}),x.jsx(ke,{variant:"small",color:"text80",children:"Searching for wallet address..."})]}),!d.isSearchingWallets&&c.length>0&&x.jsx(J1t,{possibleWallets:c}),u&&x.jsx(g2.Helper,{title:u,variant:"error"}),x.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:x.jsx(Zt,{variant:"primary",size:t?"lg":"md",shape:"square",className:"w-full sm:w-auto sm:ml-auto",disabled:!A.isMnemonicValid||!A.isWalletSelected||O,onClick:V,children:d.isRecovering?"Loading...":"Recover wallet"})})]}),g&&x.jsx(Sl,{onClose:()=>n.isNetworkModalOpen.set(!1),rootProps:{style:{zIndex:100}},children:x.jsx(UIe,{})})]})}function p7t(){const t=Vt(us),e=Vt(N4),n=Vt(Jn),r=Vt(fs),s=Vt(V4),i=vn(t.accountAddress),a=vn(n.isSigningTxn),o=vn(n.isSigningMsg),c=vn(n.isNetworkModalOpen),l=vn(r.networks);return F.useEffect(()=>{i&&l.length>0&&e.loadBalances(i,l)},[i,l,e]),{stores:{authStore:t,tokenStore:e,walletStore:n,networkStore:r,walletConnectSignClientStore:s},state:{accountAddress:i,isSigningTxn:a,isSigningMsg:o,isNetworkModalOpen:c,networks:l}}}function g7t(t,e,n){const r=Rb(),s=F.useCallback(async(o,c,l)=>{if(!t.selectedExternalProvider.get()){console.warn("No external provider selected");return}let u;try{u=await t.sendToken(o,c,l)}catch(p){throw p.code===4001&&r({variant:"error",title:"User denied transaction signature."}),console.error(p),p}const f=n.providerForChainId(o.chainId);return await rB(f,u.hash)&&r({variant:"success",title:"Transaction confirmed",description:"You can view the transaction details on your connected external wallet"}),e.updateTokenBalance(o),t.isSendingTokenTransaction.set(void 0),u},[t,e,n,r]),i=F.useCallback(async(o,c,l)=>{if(!t.selectedExternalProvider.get()){console.warn("No external provider selected");return}let u;try{u=await t.sendCollectible(o,c,l)}catch(p){throw p.code===4001&&r({variant:"error",title:"User denied transaction signature."}),console.error(p),p}const f=n.providerForChainId(o.collectibleInfoParams.chainId);return await rB(f,u.hash)&&r({variant:"success",title:"Transaction confirmed",description:"You can view the transaction details on your connected external wallet"}),t.isSendingCollectibleTransaction.set(void 0),u},[t,n,r]),a=F.useCallback(async(o,c)=>{const l=n.providerForChainId(c);await rB(l,o)&&(t.isSendingSignedTokenTransaction.set(void 0),r({variant:"success",title:"Sign transaction confirmed",description:"You can view the transaction details on your connected external wallet"}))},[t,n,r]);return{handleSendToken:s,handleSendCollectible:i,handlePendingSignTransaction:a}}function m7t(t,e,n,r){const s=Rb(),i=F.useCallback(()=>{e.resetSignObservables(),n.rejectRequest(),e.toSignPermission.set("cancelled")},[e,n]),a=F.useCallback(async c=>{var f;const l=(f=e.selectedExternalProvider.get())==null?void 0:f.provider,u=t.account;if(!l||!u)throw new Error("No provider or account found");try{e.isSendingSignedTokenTransaction.set(c);const d=await e.getExternalProviderAddress(l);if(!d)throw new Error("No provider address found");const p=await e.sendTransaction(u,l,d,c.txn,c.chainId);await r(p.hash,c.chainId),e.toSignResult.set(p),e.toSignPermission.set("approved"),e.isSigningTxn.set(!1)}catch(d){throw s({variant:"error",title:"Transaction failed",description:"Please try again."}),e.isSendingSignedTokenTransaction.set(void 0),i(),d}},[t,e,r,s,i]),o=F.useCallback(async c=>{const l=t.account;if(!l)throw new Error("No account found");try{let u;if(c.message.message)u=await l.signMessage(c.message.message,c.message.chainId,c.message.eip6492?"eip6492":"throw");else if(c.message.typedData){const f=c.message.typedData;u=await l.signTypedData(f.domain,f.types,f.message,c.message.chainId,c.message.eip6492?"eip6492":"throw")}if(!u)throw new Error("Account sign method failed");e.toSignResult.set({hash:u}),e.toSignPermission.set("approved")}catch(u){throw s({variant:"error",title:"Transaction failed",description:"Please try again."}),e.isSendingSignedTokenTransaction.set(void 0),i(),u}},[t,e,s,i]);return{handleSignTransaction:a,handleSignMessage:o,cancelRequest:i}}function y7t(t,e){const[n,r]=F.useState(!1),[s,i]=F.useState(!1),[a,o]=F.useState(!1),[c,l]=F.useState(void 0),[u,f]=F.useState(void 0);F.useEffect(()=>{r(e)},[e]);const d=F.useCallback(v=>{f(void 0),t.isSendingCollectibleTransaction.set(void 0),l(v),i(!0)},[t]),p=F.useCallback(()=>{i(!1),l(void 0),t.isSendingTokenTransaction.set(void 0)},[t]),g=F.useCallback(v=>{l(void 0),t.isSendingTokenTransaction.set(void 0),f(v),o(!0)},[t]),m=F.useCallback(()=>{o(!1),f(void 0),t.isSendingCollectibleTransaction.set(void 0)},[t]);return{networkModal:{isOpen:n,close:()=>r(!1)},sendTokenModal:{isOpen:s,open:d,close:p,pendingToken:c},sendCollectibleModal:{isOpen:a,open:g,close:m,pendingCollectible:u}}}const w7t=800;function b7t(){const t=Vt(us),e=vn(t.isLoadingAccount),n=vn(t.accountAddress),[r,s]=F.useState(!1);F.useEffect(()=>{s(e)},[e]);const{stores:i,state:a}=p7t(),{walletStore:o,networkStore:c,tokenStore:l}=i;nNe();const u=y7t(o,a.isNetworkModalOpen),{handleSendToken:f,handleSendCollectible:d,handlePendingSignTransaction:p}=g7t(o,l,c),{handleSignTransaction:g,handleSignMessage:m,cancelRequest:v}=m7t(i.authStore,o,i.walletConnectSignClientStore,p),[A,S]=F.useState(!0),[I,B]=F.useState(!0),D=async U=>{U.to&&U.amount&&u.sendTokenModal.pendingToken&&(await f(u.sendTokenModal.pendingToken,U.to,U.amount),u.sendTokenModal.close())},V=async U=>{U.to&&U.amount&&u.sendCollectibleModal.pendingCollectible&&(await d(u.sendCollectibleModal.pendingCollectible,U.to,U.amount),u.sendCollectibleModal.close())},O=U=>{U?m(U):v()};return!n&&!r?null:x.jsxs("div",{children:[x.jsx(qte,{}),x.jsx("div",{className:"flex flex-col items-center",children:x.jsx("div",{className:"flex flex-col p-5 w-full pb-20",style:{maxWidth:w7t},children:x.jsxs("div",{className:"flex flex-col",children:[x.jsx(GNe,{}),x.jsx(WNe,{onTokenSendClick:u.sendTokenModal.open,onCollectibleSendClick:u.sendCollectibleModal.open})]})})}),x.jsx(iNe,{isOpen:u.networkModal.isOpen,onClose:u.networkModal.close,networkStore:c,walletStore:o}),x.jsx(aNe,{isOpen:a.isSigningTxn,onCancel:v,onSign:g}),x.jsx(oNe,{isOpen:a.isSigningMsg,onClose:O}),x.jsx(yNe,{isOpen:u.sendTokenModal.isOpen,isDismissible:A,tokenBalance:u.sendTokenModal.pendingToken,onClose:u.sendTokenModal.close,onRecover:D,onDismissibleChange:S}),x.jsx(wNe,{isOpen:u.sendCollectibleModal.isOpen,isDismissible:I,collectibleInfo:u.sendCollectibleModal.pendingCollectible,onClose:u.sendCollectibleModal.close,onRecover:V,onDismissibleChange:B})]})}const v7t=()=>{const t=FL(),e=VZ();return F.useEffect(()=>{sessionStorage.getItem(`${e3}-redirect`)==="true"&&(sessionStorage.removeItem(`${e3}-redirect`),e.pathname!=="/recovery"&&t("/recovery",{replace:!0}));const r=()=>{sessionStorage.removeItem(e3)};return sessionStorage.setItem(e3,"active"),window.addEventListener("beforeunload",r),()=>{window.removeEventListener("beforeunload",r)}},[t,e.pathname]),x.jsxs(x.Fragment,{children:[x.jsxs(RJe,{children:[x.jsx(yI,{path:"/",element:x.jsx(N1t,{})}),x.jsx(yI,{path:"recovery",element:x.jsx(h7t,{})}),x.jsx(yI,{path:"wallet-v2-recovery",element:x.jsx(b7t,{})}),x.jsx(yI,{path:"wallet-v3-recovery",element:x.jsx(d7t,{})})]}),x.jsx(E1t,{})]})},x7t=()=>{const t=v1t();return x.jsx(x1t,{value:t,children:x.jsx(MJe,{basename:"/",children:x.jsx(v7t,{})})})},$0e="@sequence-recovery",E7t=async()=>{try{localStorage.clear();try{const t=await aD($0e),e=Array.from(t.objectStoreNames);t.close();for(const n of e)try{const r=await aD($0e);if(r.objectStoreNames.contains(n)){const s=r.transaction(n,"readwrite");await s.objectStore(n).clear(),await s.done}r.close()}catch(r){console.warn(`Failed to clear object store "${n}":`,r)}}catch(t){console.warn("Failed to access main IndexedDB:",t)}try{await Mbt("sequence-cache")}catch(t){console.warn("Failed to delete sequence-cache database:",t)}console.log("All application state cleared")}catch(t){throw console.error("Error clearing application state:",t),t}},A7t=async()=>{if(!sessionStorage.getItem(e3))try{await E7t(),sessionStorage.setItem(`${e3}-redirect`,"true")}catch(n){console.error("Failed to clear state on refresh:",n)}const e=Uze();LG.createRoot(document.getElementById("root")).render(x.jsx(bn.StrictMode,{children:x.jsx(Fze,{store:e,children:x.jsx(kGe,{theme:"dark",children:x.jsx(wze,{children:x.jsx(x7t,{})})})})}))};A7t();export{cit as _};
